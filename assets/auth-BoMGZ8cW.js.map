{"version":3,"file":"auth-BoMGZ8cW.js","sources":["../../src/lib/actions/auth.js"],"sourcesContent":["// $lib/actions/auth.js\nimport ApiClient from '$lib/api';\nimport { user, accessToken } from '$lib/stores';\nimport { clearRefreshToken } from '$lib/db/indexeddb'; // üìå th√™m d√≤ng n√†y\nimport { closeSocket } from '$lib/websocket-client';\n\nconst api = new ApiClient();\n\nexport async function logOut() {\n    try {\n        const data = await api.post('/auth/logout', {}, { withCredentials: true });\n        user.set(null);\n        accessToken.set(null);\n\n        // close socket\n        await closeSocket();\n\n        // Xo√° refresh token kh·ªèi IndexedDB\n        await clearRefreshToken();\n\n        console.log('üîê Logged out + refresh token cleared');\n\n    } catch (err) {\n        console.error('üö® LOGOUT ERROR:', err);\n    }\n}\n"],"names":["api","ApiClient","logOut","data","user","accessToken","closeSocket","clearRefreshToken","err"],"mappings":"wEAMA,MAAMA,EAAM,IAAIC,EAET,eAAeC,GAAS,CAC3B,GAAI,CACA,MAAMC,EAAO,MAAMH,EAAI,KAAK,eAAgB,GAAI,CAAE,gBAAiB,GAAM,EACzEI,EAAK,IAAI,IAAI,EACbC,EAAY,IAAI,IAAI,EAGpB,MAAMC,EAAW,EAGjB,MAAMC,EAAiB,EAEvB,QAAQ,IAAI,uCAAuC,CAEvD,OAASC,EAAK,CACV,QAAQ,MAAM,mBAAoBA,CAAG,CACzC,CACJ"}