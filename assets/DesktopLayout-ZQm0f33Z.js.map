{"version":3,"mappings":"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","names":["action","dom","get_value","effect","payload","untrack","inited","prev","render_effect","value","deep_read_state","safe_not_equal","iconNode","pxToNumber","pxString","num","getDimensionName","horizontal","calcComputedStyle","element","getElementRect","getBordersSizeOffsets","computedStyle","calcEnds","left","top","result","right","bottom","resultExtended","elementRectWithoutBorder","rect","borderOffsets","positionDiff","to","from","getGlobalMousePosition","event","eventMouse","eventTouch","clientX","clientY","sumPartial","arr","start","end","valueFunction","sum","i","forEachPartial","callback","KEY","thirdEventArg","arg","id","pushOtherPanes","dblClickSplitter","rtl","firstSplitter","style","theme","clazz","dispatch","createEventDispatcher","container","$.mutable_source","isReady","isAwaitingPaneReset","isAfterInitialTimeoutZero","isMouseDown","isDragging","activeSplitter","clickedSplitter","timeoutId","panes","isHorizontal","writable","showFirstSplitter","veryFirstPaneKey","activeSplitterElement","activeSplitterDrag","setContext","_key","$veryFirstPaneKey","onPaneAdd","onPaneRemove","pane","index","el","$.store_set","tickAndResetPaneSizes","prepareSizeEvent","paneForward","cb","includingFirst","onMouseDown","onSplitterClick","onSplitterDblClick","onPaneClick","reportGivenSizeChange","key","p","removed","_event","newGivenSize","onMount","verifyAndUpdatePanesOrder","resetPaneSizes","$.set","onDestroy","unbindEvents","afterUpdate","isRTL","containerComputedStyle","$.get","bindEvents","onMouseMove","onMouseUp","isSplitterElement","node","getOrientedDiff","drag","elementSize","tdrag","getCurrentDimensionName","splitterPane","activeSplitterNode","globalMousePosition","splitterRect","containerRectWithoutBorder","containerSizeWithoutBorder","_isRTL","currentMouseDrag","calculatePanesSize","splitterIndex","totalMinSizes","maxExtendedSize","totalMaxExtendedPlusMinSizes","leftSpare","giveBest","min","max","szExtra","getCurrentDragPercentage","splitterSize","activeSplitterSize","splittersTotalSizeBefore","currentBeforeNode","splittersTotalSizeAfter","currentAfterNode","totalSplitterBefore","totalSplitter","paneBeforeIndex","paneBefore","paneAfterIndex","paneAfter","sums","sumPrevPanesSize","sumNextPanesSize","minDrag","maxDrag","mouseDragPercentage","paneBeforeSnap","paneAfterSnap","dragPercentage","snapped","paneBeforeMaxReached","paneAfterMaxReached","vars","doPushOtherPanes","_a","findPrevExpandedPane","_b","findNextExpandedPane","panesCount","getSizeOfPane","tick","equalize","leftToAllocate","definedSizesCount","undefinedSizesNotReadyCount","undefinedSizesSum","ungrowable","unshrinkable","sz","undefinedSizesCount","undefinedSizesReadyCount","undefinedSizesNotReadySz","undefinedScaleFactor","currentSz","readjustSizes","panesSizableCount","equalSpaceToAllocate","newPaneSize","allocated","children","currentPaneIndex","needReorder","child","isPane","isSplitter","newPanes","$.bind_this","div","$$value","classes","$.set_class","carefullCallbackGenerator","callbackObjectGetter","callbackName","callbackObject","carefullCallbackSource","ssrRegisterPaneSize","onPaneInit","clientOnlyContext","getContext","size","minSize","maxSize","snapSize","undefinedPaneInitSize","isSplitterActive","clientCallbacks","carefullClientCallbacks","reportGivenSizeChangeSafe","inst","v","isActive","dimension","$isHorizontal","event_handler","$.derived","event_handler_1","event_handler_2","event_handler_3","$showFirstSplitter","$$render","consequent","event_handler_4","div_1","consequent_1","defaultSizes","$.prop","$$props","prefix","paneSizes","saved","handleResize","sizes","item","$$restProps","exportLayoutConfig","exported","importLayoutConfig","data","resetLayoutConfig","keysToRemove","LayoutK2","option","paneSizesMain","paneSizesBody","paneSizesContent","$.untrack","$.event","items","loaded","ApiClient","$.each","ul","$$index","$$array","alternate","activeTab","tabs","fileHistory","names","extensions","uploaders","randomTime","h","m","randomFile","ext","formatDate","dayOffset","d","dd","mm","yyyy","fileCount","files","getIcon","type","getColorClass","filterFiles","f","tab","$.set_text","text","group","file","$$anchor","text_3","text_4","text_5","$.template_effect","text_1","keyword","page","total","pageSizeOptions","pageSize","showDropdown","customSize","changePage","newPage","totalPages","apply","toggle","doSearch","addUser","addGroup","tabChange","$0","node_7","_","button_5","node_13","button_9","$.bind_value","input_1","e","consequent_2","div_10","button_11","button_3","button_4","button_6","button_7","text_2","input","ownKeys","object","enumerableOnly","keys","symbols","sym","_objectSpread2","target","source","_defineProperty","_typeof","obj","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","_arrayLikeToArray","iter","_i","_arr","_n","_d","_s","_e","err","o","minLen","len","arr2","_createForOfIteratorHelper","allowArrayLike","it","F","normalCompletion","didErr","step","FINALIZE_EVENT_NAME","CONSIDER_EVENT_NAME","dispatchFinalizeEvent","info","dispatchConsiderEvent","DRAGGED_ENTERED_EVENT_NAME","DRAGGED_LEFT_EVENT_NAME","DRAGGED_OVER_INDEX_EVENT_NAME","DRAGGED_LEFT_DOCUMENT_EVENT_NAME","DRAGGED_LEFT_TYPES","dispatchDraggedElementEnteredContainer","containerEl","indexObj","draggedEl","dispatchDraggedElementLeftContainerForAnother","theOtherDz","dispatchDraggedElementLeftContainerForNone","dispatchDraggedElementIsOverIndex","dispatchDraggedLeftDocument","TRIGGERS","SOURCES","SHADOW_ITEM_MARKER_PROPERTY_NAME","SHADOW_ELEMENT_ATTRIBUTE_NAME","SHADOW_ELEMENT_HINT_ATTRIBUTE_NAME","SHADOW_PLACEHOLDER_ITEM_ID","DRAGGED_ELEMENT_ID","ITEM_ID_KEY","activeDndZoneCount","incrementActiveDropZoneCount","decrementActiveDropZoneCount","isOnServer","getBoundingRectNoTransforms","onlyVisible","ta","getVisibleRectRecursive","tx","sx","sy","dx","dy","x","y","w","getAbsoluteRectNoTransforms","getAbsoluteRect","findCenter","calcDistance","pointA","pointB","isPointInsideRect","point","findCenterOfElement","isCenterOfAInsideB","elA","elB","centerOfA","rectOfB","calcDistanceBetweenCenters","centerOfB","isElementOffDocument","visibleRect","wasClippedByScrollY","wasClippedByScrollX","parent","overflowY","overflowX","isScrollableY","isScrollableX","parentRect","newTop","newBottom","newLeft","newRight","dzToShadowIndexToRect","resetIndexesCache","cacheShadowRect","dz","shadowElIndex","findWouldBeIndex","floatingAboveEl","collectionBelowEl","cachedShadowRect","minDistanceSoFar","indexOfMin","distance","originalLen","template","phantom","phantomDistance","toString","getDepth","_getDepth","countSoFar","areObjectsShallowEqual","objA","objB","keyA","areArraysShallowEqualSameOrder","arrA","arrB","INTERVAL_MS","TOLERANCE_PX","next","observe","dropZones","intervalMs","multiScroller","lastDropZoneFound","lastIndexFound","lastIsDraggedInADropZone","lastCentrePositionOfDragged","dropZonesFromDeepToShallow","dz1","dz2","andNow","currentCenterOfDragged","scrolled","isDraggedInADropZone","_iterator","_step","unobserve","SCROLL_ZONE_PX","makeScroller","scrollingInfo","resetScrolling","scrollContainer","_scrollingInfo","directionObj","stepPx","calcScrollStepPx","distancePx","scrollIfNeeded","pointer","elementToScroll","distances","calcInnerDistancesBetweenPointAndSidesOfElement","isAlreadyScrolling","scrollingVertically","scrollingHorizontally","createMultiScroller","baseElementsForScrolling","getPointerPosition","scrollingContainersSet","findRelevantScrollContainers","scrollingContainersDeepToShallow","_makeScroller","mousePosition","scrollContainersUnderCursor","findScrollableParents","scrollableContainers","_window$getComputedSt","overflow","scrollingContainers","svelteNodeClone","cloned","values","elIsSelect","selects","_select","clonedSelects","select","optionEl","elIsCanvas","canvases","clonedCanvases","canvas","clonedCanvas","FEATURE_FLAG_NAMES","featureFlagsMap","getFeatureFlag","flagName","TRANSITION_DURATION_SECONDS","trs","property","createDraggedElementFrom","originalElement","positionCenterOnXY","copyStylesFromTo","elTopPx","elLeftPx","center","moveDraggedElementToWasDroppedState","morphDraggedElementToBeLike","copyFromEl","currentMouseX","currentMouseY","newRect","draggedElRect","widthChange","heightChange","relativeDistanceOfMousePointerFromDraggedSides","copyToEl","s","styleDraggable","draggableEl","dragDisabled","hideElement","dragTarget","decorateShadowEl","shadowEl","unDecorateShadowElement","styleActiveDropZones","getStyles","getClasses","styles","c","styleInactiveDropZones","preventShrinking","originalMinHeight","originalMinWidth","DEFAULT_DROP_ZONE_TYPE$1","MIN_OBSERVATION_INTERVAL_MS","DISABLED_OBSERVATION_INTERVAL_MS","MIN_MOVEMENT_BEFORE_DRAG_START_PX","DEFAULT_TOUCH_DELAY_MS","DEFAULT_DROP_TARGET_STYLE$1","ORIGINAL_DRAGGED_ITEM_MARKER_ATTRIBUTE","originalDragTarget","draggedElData","draggedElType","originDropZone","originIndex","shadowElData","shadowElDropZone","dragStartMousePosition","currentMousePosition","isWorkingOnPreviousDrag","finalizingPreviousDrag","unlockOriginDzMinDimensions","isDraggedOutsideOfAnyDz","scheduledForRemovalAfterDrop","touchDragHoldTimer","touchHoldElapsed","typeToDropZones$1","dzToConfig$1","elToMouseDownListener","registerDropZone$1","dropZoneEl","unregisterDropZone$1","watchDraggedElement","handleDraggedEntered","handleDraggedLeft","handleDraggedIsOverIndex","handleDrop$1","setIntervalMs","observationIntervalMs","unWatchDraggedElement","_iterator2","_step2","findShadowElementIdx","createShadowElData","_objectSpread2$1","_dzToConfig$get","dropFromOthersDisabled","originZoneItems","newOriginZoneItems","shadowElIdx","_dzToConfig$get2","originalItems","origShadowDz","_e$detail","_dzToConfig$get3","handleMouseMove","_dzToConfig$get4","finalizeWithinZone","domShadowEl","cleanupPostDrop","animateDraggedToFinalPosition","shadowElRect","newTransform","_dzToConfig$get5","dropAnimationDurationMs","transition","scheduleDZForRemovalAfterDrop","destroy","_ref","dndzone$2","options","initialized","config","elToIdx","addMaybeListeners","handleMouseMoveMaybeDragStart","handleFalseAlarm","removeMaybeListeners","clickEvent","isTouch","handleDragStart","handleMouseDown","isTouchStart","useDelay","currentIdx","rootNode","originDropZoneRoot","centreDraggedOnCursor","keepOriginalElementInDom","configure","_ref2","_ref2$items","_ref2$flipDurationMs","_ref2$type","newType","_ref2$dragDisabled","_ref2$morphDisabled","morphDisabled","_ref2$dropFromOthersD","_ref2$dropTargetStyle","dropTargetStyle","_ref2$dropTargetClass","dropTargetClasses","_ref2$transformDragge","transformDraggedElement","_ref2$centreDraggedOn","_ref2$dropAnimationDi","dropAnimationDisabled","_ref2$delayTouchStart","delayTouchStartOpt","effectiveDelayMs","getConfigProp","propName","idx","newOptions","destroyDz","_ID_TO_INSTRUCTION","INSTRUCTION_IDs$1","ID_TO_INSTRUCTION","ALERT_DIV_ID","alertsDiv","initAriaOnBrowser","txt","instructionToHiddenDiv","initAria","destroyAria","_document$getElementB","alertToScreenReader","alertText","DEFAULT_DROP_ZONE_TYPE","DEFAULT_DROP_TARGET_STYLE","draggedItemType","focusedDz","focusedDzLabel","focusedItem","focusedItemId","focusedItemLabel","allDragTargets","elToKeyDownListeners","elToFocusListeners","dzToHandles","dzToConfig","typeToDropZones","INSTRUCTION_IDs","registerDropZone","globalKeyDownHandler","globalClickHandler","unregisterDropZone","handleDrop","handleZoneFocus","newlyFocusedDz","originItems","originItem","originIdx","itemToMove","targetItems","autoAriaDisabled","dzFrom","triggerAllDzsUpdate","update","dispatchConsider","dndzone$1","swap","j","handleKeyDown","_items","_children","_idx","setCurrentFocusedItem","dropTargets","msg","handleClick","focusedItemIdx","_ref2$zoneTabIndex","zoneTabIndex","_ref2$zoneItemTabInde","zoneItemTabIndex","_ref2$autoAriaDisable","_loop","handles","_excluded","dndzone","shouldIgnoreZone","validateOptions","pointerZone","keyboardZone","delayTouchStart","rest","itemWithMissingId","isInt","validBoolean","validNumber","activeTabId","tabCounter","setActive","doClose","handleDnd","detail","newTab","$.action","$$node","$$action_arg","mapTabDetail","componentCache","componentRegistry","registerComponentByName","name","loader","autoRegister","modules","__vitePreload","TabDetails$1","path","loadComponentByName","component","preloadComponents","currentComponent","ready","doLoad","kind","portal","targetEl","newTarget","download","filename","contentType","blob","url","showPopup","buttonRef","popupRef","popupStyle","togglePopup","positionPopup","btnRect","popupRect","handleClickOutside","content","menuItems","layout","ex","logOut","changeConten","button","button_1","nav","label","accept","onImport","fileInput","handleChange","reader","user","api","fetchData","limit","json","handleSearch","handlePageChange","settings","open","modalOption","changeSettings","$.mutate","importedContent","handleImport","openTab","t","closeTab","consequent_3","alternate_1","$$component","error","consequent_6","consequent_5","alternate_2","isLoading","consequent_4","alternate_3","$user"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,24,29],"sources":["../../node_modules/svelte/src/internal/client/dom/elements/actions.js","../../node_modules/lucide-svelte/dist/icons/chevron-down.svelte","../../node_modules/lucide-svelte/dist/icons/chevron-left.svelte","../../node_modules/lucide-svelte/dist/icons/chevron-right.svelte","../../node_modules/lucide-svelte/dist/icons/chevrons-left.svelte","../../node_modules/lucide-svelte/dist/icons/chevrons-right.svelte","../../node_modules/lucide-svelte/dist/icons/search.svelte","../../node_modules/lucide-svelte/dist/icons/user-plus.svelte","../../node_modules/lucide-svelte/dist/icons/users.svelte","../../node_modules/svelte-splitpanes/dist/internal/utils/sizing.js","../../node_modules/svelte-splitpanes/dist/internal/utils/styling.js","../../node_modules/svelte-splitpanes/dist/internal/utils/position.js","../../node_modules/svelte-splitpanes/dist/internal/utils/array.js","../../node_modules/svelte-splitpanes/dist/Splitpanes.svelte","../../node_modules/svelte-splitpanes/dist/internal/utils/functions.js","../../node_modules/svelte-splitpanes/dist/Pane.svelte","../../src/components/layout/k2/K2Split.svelte","../../src/components/layout/k2/K2Pane.svelte","../../src/components/layout/k2/index.js","../../src/components/Layout.svelte","../../src/faces/worklist/Item.svelte","../../src/faces/worklist/index.svelte","../../src/faces/histories/index.svelte","../../src/faces/search/index.svelte","../../node_modules/svelte-dnd-action/dist/index.mjs","../../src/components/tabs/vscode.svelte","../../src/lib/mapper.js","../../src/lib/componentLoader.js","../../src/components/tabs/details/TabDetails.svelte","../../node_modules/svelte-portal/src/Portal.svelte","../../src/lib/utils.js","../../src/components/ui/context-menu/Settings.svelte","../../src/components/ui/files/FileImporter.svelte","../../src/faces/DesktopLayout.svelte"],"sourcesContent":["/** @import { ActionPayload } from '#client' */\nimport { effect, render_effect } from '../../reactivity/effects.js';\nimport { safe_not_equal } from '../../reactivity/equality.js';\nimport { deep_read_state, untrack } from '../../runtime.js';\n\n/**\n * @template P\n * @param {Element} dom\n * @param {(dom: Element, value?: P) => ActionPayload<P>} action\n * @param {() => P} [get_value]\n * @returns {void}\n */\nexport function action(dom, action, get_value) {\n\teffect(() => {\n\t\tvar payload = untrack(() => action(dom, get_value?.()) || {});\n\n\t\tif (get_value && payload?.update) {\n\t\t\tvar inited = false;\n\t\t\t/** @type {P} */\n\t\t\tvar prev = /** @type {any} */ ({}); // initialize with something so it's never equal on first run\n\n\t\t\trender_effect(() => {\n\t\t\t\tvar value = get_value();\n\n\t\t\t\t// Action's update method is coarse-grained, i.e. when anything in the passed value changes, update.\n\t\t\t\t// This works in legacy mode because of mutable_source being updated as a whole, but when using $state\n\t\t\t\t// together with actions and mutation, it wouldn't notice the change without a deep read.\n\t\t\t\tdeep_read_state(value);\n\n\t\t\t\tif (inited && safe_not_equal(prev, value)) {\n\t\t\t\t\tprev = value;\n\t\t\t\t\t/** @type {Function} */ (payload.update)(value);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinited = true;\n\t\t}\n\n\t\tif (payload?.destroy) {\n\t\t\treturn () => /** @type {Function} */ (payload.destroy)();\n\t\t}\n\t});\n}\n","<script>/**\n * @license lucide-svelte v0.544.0 - ISC\n *\n * ISC License\n *\n * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * ---\n *\n * The MIT License (MIT) (for portions derived from Feather)\n *\n * Copyright (c) 2013-2023 Cole Bemis\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"m6 9 6 6 6-6\" }]];\n/**\n * @component @name ChevronDown\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNiA5IDYgNiA2LTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/chevron-down\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"chevron-down\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script>/**\n * @license lucide-svelte v0.544.0 - ISC\n *\n * ISC License\n *\n * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * ---\n *\n * The MIT License (MIT) (for portions derived from Feather)\n *\n * Copyright (c) 2013-2023 Cole Bemis\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"m15 18-6-6 6-6\" }]];\n/**\n * @component @name ChevronLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTUgMTgtNi02IDYtNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-left\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"chevron-left\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script>/**\n * @license lucide-svelte v0.544.0 - ISC\n *\n * ISC License\n *\n * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * ---\n *\n * The MIT License (MIT) (for portions derived from Feather)\n *\n * Copyright (c) 2013-2023 Cole Bemis\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"m9 18 6-6-6-6\" }]];\n/**\n * @component @name ChevronRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtOSAxOCA2LTYtNi02IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/chevron-right\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"chevron-right\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script>/**\n * @license lucide-svelte v0.544.0 - ISC\n *\n * ISC License\n *\n * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * ---\n *\n * The MIT License (MIT) (for portions derived from Feather)\n *\n * Copyright (c) 2013-2023 Cole Bemis\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"m11 17-5-5 5-5\" }], [\"path\", { \"d\": \"m18 17-5-5 5-5\" }]];\n/**\n * @component @name ChevronsLeft\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTEgMTctNS01IDUtNSIgLz4KICA8cGF0aCBkPSJtMTggMTctNS01IDUtNSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevrons-left\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"chevrons-left\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script>/**\n * @license lucide-svelte v0.544.0 - ISC\n *\n * ISC License\n *\n * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * ---\n *\n * The MIT License (MIT) (for portions derived from Feather)\n *\n * Copyright (c) 2013-2023 Cole Bemis\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"m6 17 5-5-5-5\" }], [\"path\", { \"d\": \"m13 17 5-5-5-5\" }]];\n/**\n * @component @name ChevronsRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNiAxNyA1LTUtNS01IiAvPgogIDxwYXRoIGQ9Im0xMyAxNyA1LTUtNS01IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/chevrons-right\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"chevrons-right\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script>/**\n * @license lucide-svelte v0.544.0 - ISC\n *\n * ISC License\n *\n * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * ---\n *\n * The MIT License (MIT) (for portions derived from Feather)\n *\n * Copyright (c) 2013-2023 Cole Bemis\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"m21 21-4.34-4.34\" }], [\"circle\", { \"cx\": \"11\", \"cy\": \"11\", \"r\": \"8\" }]];\n/**\n * @component @name Search\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEgMjEtNC4zNC00LjM0IiAvPgogIDxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/search\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"search\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script>/**\n * @license lucide-svelte v0.544.0 - ISC\n *\n * ISC License\n *\n * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * ---\n *\n * The MIT License (MIT) (for portions derived from Feather)\n *\n * Copyright (c) 2013-2023 Cole Bemis\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\" }], [\"circle\", { \"cx\": \"9\", \"cy\": \"7\", \"r\": \"4\" }], [\"line\", { \"x1\": \"19\", \"x2\": \"19\", \"y1\": \"8\", \"y2\": \"14\" }], [\"line\", { \"x1\": \"22\", \"x2\": \"16\", \"y1\": \"11\", \"y2\": \"11\" }]];\n/**\n * @component @name UserPlus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iNyIgcj0iNCIgLz4KICA8bGluZSB4MT0iMTkiIHgyPSIxOSIgeTE9IjgiIHkyPSIxNCIgLz4KICA8bGluZSB4MT0iMjIiIHgyPSIxNiIgeTE9IjExIiB5Mj0iMTEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/user-plus\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"user-plus\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","<script>/**\n * @license lucide-svelte v0.544.0 - ISC\n *\n * ISC License\n *\n * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.\n *\n * Permission to use, copy, modify, and/or distribute this software for any\n * purpose with or without fee is hereby granted, provided that the above\n * copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * ---\n *\n * The MIT License (MIT) (for portions derived from Feather)\n *\n * Copyright (c) 2013-2023 Cole Bemis\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\nimport Icon from '../Icon.svelte';\nconst iconNode = [[\"path\", { \"d\": \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\" }], [\"path\", { \"d\": \"M16 3.128a4 4 0 0 1 0 7.744\" }], [\"path\", { \"d\": \"M22 21v-2a4 4 0 0 0-3-3.87\" }], [\"circle\", { \"cx\": \"9\", \"cy\": \"7\", \"r\": \"4\" }]];\n/**\n * @component @name Users\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8cGF0aCBkPSJNMTYgMy4xMjhhNCA0IDAgMCAxIDAgNy43NDQiIC8+CiAgPHBhdGggZD0iTTIyIDIxdi0yYTQgNCAwIDAgMC0zLTMuODciIC8+CiAgPGNpcmNsZSBjeD0iOSIgY3k9IjciIHI9IjQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/users\n * @see https://lucide.dev/guide/packages/lucide-svelte - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {FunctionalComponent} Svelte component\n *\n */\n</script>\n\n<Icon name=\"users\" {...$$props} iconNode={iconNode}>\n  <slot/>\n</Icon>\n","export function pxToNumber(pxString) {\n    if (!pxString?.endsWith('px')) {\n        return undefined;\n    }\n    // otherwise\n    const num = parseFloat(pxString.slice(0, pxString.length - 2));\n    return isNaN(num) ? undefined : num;\n}\nexport const getDimensionName = (horizontal) => (horizontal ? 'height' : 'width');\n","/**\n * A wrapper of `window.getComputedStyle()`,\n *  that also invites minification capabilities (muliply calls can be forward to here, and it's pure).\n * */\nexport const calcComputedStyle = (element) => \n/*@__PURE__*/ window.getComputedStyle(element);\n","import { pxToNumber } from './sizing.js';\nimport { calcComputedStyle } from './styling.js';\n/**\n * A legacy-typed safer version of `element.getBoundingClientRect()`,\n *  that also invites minification capabilities (muliply calls can be forward to here, and it's pure).\n * */\nexport const getElementRect = (element) => \n/*@__PURE__*/ element.getBoundingClientRect();\nexport const getBordersSizeOffsets = (computedStyle, calcEnds = true) => {\n    if (computedStyle.getPropertyValue('box-sizing') === 'border-box') {\n        // In this case, no offset is needed since the box model of this element doesn't include the border.\n        return undefined;\n    }\n    // otherwise\n    const left = pxToNumber(computedStyle.getPropertyValue('border-left-width'));\n    if (left === undefined) {\n        console.error('Splitpanes Error: Fail to parse container `border-left-width`.');\n        return undefined;\n    }\n    // otherwise\n    const top = pxToNumber(computedStyle.getPropertyValue('border-top-width'));\n    if (top === undefined) {\n        console.error('Splitpanes Error: Fail to parse container `border-top-width`.');\n        return undefined;\n    }\n    // otherwise\n    const result = { left, top };\n    if (calcEnds) {\n        const right = pxToNumber(computedStyle.getPropertyValue('border-right-width'));\n        if (right === undefined) {\n            console.error('Splitpanes Error: Fail to parse container `border-right-width`.');\n            return undefined;\n        }\n        // otherwise\n        const bottom = pxToNumber(computedStyle.getPropertyValue('border-bottom-width'));\n        if (bottom === undefined) {\n            console.error('Splitpanes Error: Fail to parse container `border-bottom-width`.');\n            return undefined;\n        }\n        // otherwise\n        const resultExtended = result;\n        resultExtended.right = right;\n        resultExtended.bottom = bottom;\n    }\n    return result;\n};\n/**\n * Computes the position and the dimensions of the element without the border.\n *\n * While `element.getBoundingClientRect()` gives the correct size with the borders, this method method does include the borders.\n *\n * Notice that for calculating the width and the height without the border, we must use this function instead of using\n *  `Element.clientWidth` and `Element.clientHeight`, beacuse they round the sizes of the pixels to be integer.\n */\nexport function elementRectWithoutBorder(element, computedStyle) {\n    if (!computedStyle) {\n        computedStyle = calcComputedStyle(element);\n    }\n    const rect = getElementRect(element);\n    const borderOffsets = getBordersSizeOffsets(computedStyle, true) || {\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0\n    };\n    return {\n        width: rect.width - borderOffsets.left - borderOffsets.right,\n        height: rect.height - borderOffsets.top - borderOffsets.bottom,\n        left: rect.left + borderOffsets.left,\n        top: rect.top + borderOffsets.top\n    };\n}\n/** Get the cursor position relative to some element. */\nexport const positionDiff = (to, from) => ({\n    left: to.left - from.left,\n    top: to.top - from.top\n});\nexport function getGlobalMousePosition(event) {\n    const eventMouse = event;\n    const eventTouch = event;\n    const { clientX, clientY } = 'ontouchstart' in window && eventTouch.touches ? eventTouch.touches[0] : eventMouse;\n    return { left: clientX, top: clientY };\n}\n","export function sumPartial(arr, start, end, valueFunction) {\n    let sum = 0;\n    for (let i = start; i < end; i++) {\n        sum += valueFunction(arr[i], i);\n    }\n    return sum;\n}\nexport function forEachPartial(arr, start, end, callback) {\n    for (let i = start; i < end; i++) {\n        callback(arr[i], i);\n    }\n}\n","<script context=\"module\" lang=\"ts\">export const KEY = {};\n/**\n * the third argument for event bundler\n * @see https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n */\nconst thirdEventArg = (() => {\n    let result = false;\n    try {\n        const arg = Object.defineProperty({}, 'passive', {\n            get() {\n                result = { passive: true };\n                return true;\n            }\n        });\n        // @ts-expect-error no overload matches\n        window.addEventListener('testpassive', arg, arg);\n        // @ts-expect-error no overload matches\n        window.remove('testpassive', arg, arg);\n    }\n    catch (_e) {\n        /* */\n    }\n    return result;\n})();\n</script>\n\n<script lang=\"ts\" strictEvents>import { onMount, onDestroy, setContext, createEventDispatcher, tick, afterUpdate } from 'svelte';\nimport { writable } from 'svelte/store';\nimport GatheringRound from './internal/GatheringRound.svelte';\nimport { browser } from './internal/env.js';\nimport { getDimensionName } from './internal/utils/sizing.js';\nimport { elementRectWithoutBorder, getGlobalMousePosition, positionDiff, getElementRect } from './internal/utils/position.js';\nimport { forEachPartial, sumPartial } from './internal/utils/array.js';\nimport { calcComputedStyle } from './internal/utils/styling.js';\n// PROPS ----------------\n//@ts-expect-error undefined not assigned to string\nexport let id = undefined;\n// horiz or verti?\nexport let horizontal = false;\n// when true, moving a splitter can push other panes\nexport let pushOtherPanes = true;\n// open/close on double click\nexport let dblClickSplitter = true;\n// true if RTL\nexport let rtl = 'auto';\n// true to display the first splitter\nexport let firstSplitter = false;\n// css style\nexport let style = null;\n// the splitter theme to use\nexport let theme = 'default-theme';\n// css class\nlet clazz = '';\nexport { clazz as class };\n// VARIABLES ----------------\n//used to bubble events up\nconst dispatch = createEventDispatcher();\n// the splitpane component\nlet container;\n// true when component is ready, prevents emitting console warnings on hot reloading.\nlet isReady = false;\n// true when pane reset is awaiting for the next tick, to avoid double call to pane reset.\nlet isAwaitingPaneReset = false;\n// true after the initial timeout 0 waiting, prevents CSS transitions until then.\nlet isAfterInitialTimeoutZero = false;\n// true when mouse is down\nlet isMouseDown = false;\n// true when a splitter is being dragged\nlet isDragging = false;\n// that's the splitter than is being dragged\nlet activeSplitter = -1;\n// that's well the clicked splitter!\nlet clickedSplitter = -1;\n// used to detect double clicks\nlet timeoutId;\n// panes per insertion order (pane.index is the order index)\nlet panes = new Array();\n// passed to the children via the context - writable to ensure proper reactivity\nconst isHorizontal = writable(horizontal);\nconst showFirstSplitter = writable(firstSplitter);\n// tells the key of the very first pane, or undefined if not recieved yet\nconst veryFirstPaneKey = writable(undefined);\nlet activeSplitterElement;\nlet activeSplitterDrag;\nlet ssrPaneDefinedSizeSum = 0;\nlet ssrPaneUndefinedSizeCount = 0;\n// REACTIVE ----------------\n$: $isHorizontal = horizontal;\n$: $showFirstSplitter = firstSplitter;\n// used to complete rendering service side (SSR mode)\nfunction ssrRegisterPaneSize(size) {\n    if (size === null) {\n        ++ssrPaneUndefinedSizeCount;\n    }\n    else {\n        ssrPaneDefinedSizeSum += size;\n    }\n}\nconst onPaneInit = _key => {\n    if ($veryFirstPaneKey === undefined) {\n        $veryFirstPaneKey = _key;\n    }\n    return {\n        undefinedPaneInitSize: browser ? 0 : (100 - ssrPaneDefinedSizeSum) / ssrPaneUndefinedSizeCount\n    };\n};\nsetContext(KEY, {\n    showFirstSplitter,\n    veryFirstPaneKey,\n    isHorizontal,\n    ssrRegisterPaneSize: browser ? undefined : ssrRegisterPaneSize,\n    onPaneInit,\n    clientOnly: browser\n        ? {\n            onPaneAdd,\n            onPaneRemove\n        }\n        : undefined\n});\nfunction onPaneAdd(pane) {\n    // 1. Add pane to array at the same index it was inserted in the <splitpanes> tag.\n    let index = -1;\n    if (pane.element.parentNode) {\n        Array.from(pane.element.parentNode.children).some((el) => {\n            if (el.className.includes('splitpanes__pane'))\n                index++;\n            return el === pane.element;\n        });\n    }\n    if (index === 0) {\n        // Need to update the first pane key, because the first pane can be changed in runtime.\n        $veryFirstPaneKey = pane.key;\n    }\n    //inserts pane at proper array index\n    panes.splice(index, 0, pane);\n    // reindex panes\n    for (let i = 0; i < panes.length; i++) {\n        panes[i].index = i;\n    }\n    if (isReady) {\n        // 2. tick and resize the panes.\n        tickAndResetPaneSizes().then(() => {\n            // 3. Set the pane as ready\n            pane.isReady = true;\n            // 4. Fire `pane-add` event.\n            dispatch('pane-add', {\n                index,\n                panes: prepareSizeEvent()\n            });\n        });\n    }\n    const paneForward = (cb, includingFirst = true) => (value) => {\n        if (includingFirst || pane.index > 0) {\n            cb(value, pane);\n        }\n    };\n    return {\n        onSplitterDown: paneForward(onMouseDown, false),\n        onSplitterClick: paneForward(onSplitterClick, false),\n        onSplitterDblClick: paneForward(onSplitterDblClick),\n        onPaneClick: paneForward(onPaneClick),\n        reportGivenSizeChange: paneForward(reportGivenSizeChange)\n    };\n}\nasync function onPaneRemove(key) {\n    // 1. Remove the pane from array and redo indexes.\n    const index = panes.findIndex(p => p.key === key);\n    // race condition - typically happens when the dev server restarts\n    if (index >= 0) {\n        const removed = panes.splice(index, 1)[0];\n        // reindex panes\n        for (let i = 0; i < panes.length; i++) {\n            panes[i].index = i;\n        }\n        if (index === 0) {\n            $veryFirstPaneKey = panes.length > 0 ? panes[0].key : undefined;\n        }\n        if (isReady) {\n            // 3. tick and resize the panes.\n            await tickAndResetPaneSizes();\n            // 4. Fire `pane-remove` event.\n            dispatch('pane-remove', {\n                removed,\n                panes: prepareSizeEvent()\n            });\n        }\n    }\n}\n// called by sub-panes\nfunction onPaneClick(_event, pane) {\n    dispatch('pane-click', pane);\n}\nfunction reportGivenSizeChange(newGivenSize, pane) {\n    pane.setSz(newGivenSize);\n    tickAndResetPaneSizes();\n}\nonMount(() => {\n    verifyAndUpdatePanesOrder();\n    resetPaneSizes();\n    for (let i = 0; i < panes.length; i++) {\n        panes[i].isReady = true;\n    }\n    isReady = true;\n    dispatch('ready');\n    setTimeout(() => {\n        isAfterInitialTimeoutZero = true;\n    }, 0);\n});\nif (browser) {\n    onDestroy(() => {\n        if (isReady) {\n            // this is to solve an edge case:\n            // when the user starts dragging and the component is destroyed, leaving behind hanging events\n            unbindEvents();\n        }\n        // Prevent emitting console warnings on hot reloading.\n        isReady = false;\n    });\n}\nafterUpdate(() => {\n    verifyAndUpdatePanesOrder();\n});\n// Tells in the current DOM state if we are in RTL direction or not.\nfunction isRTL(containerComputedStyle) {\n    if (rtl === 'auto') {\n        // the try catch is to support old browser, flag is preset to false\n        try {\n            return (containerComputedStyle ?? calcComputedStyle(container)).direction === 'rtl';\n        }\n        catch (_err) {\n            // We want application to not crush, but don't care about the message\n        }\n    }\n    // otherwise\n    return rtl === true;\n}\nfunction bindEvents() {\n    document.body.style.cursor = isHorizontal ? 'col-resize' : 'row-resize';\n    document.addEventListener('mousemove', onMouseMove, thirdEventArg);\n    document.addEventListener('mouseup', onMouseUp);\n    if ('ontouchstart' in window) {\n        document.addEventListener('touchmove', onMouseMove, thirdEventArg);\n        document.addEventListener('touchend', onMouseUp);\n    }\n}\nfunction unbindEvents() {\n    document.body.style.cursor = '';\n    document.removeEventListener('mousemove', onMouseMove);\n    document.removeEventListener('mouseup', onMouseUp);\n    if ('ontouchstart' in window) {\n        document.removeEventListener('touchmove', onMouseMove);\n        document.removeEventListener('touchend', onMouseUp);\n    }\n}\nconst isSplitterElement = (node) => node.nodeType === Node.ELEMENT_NODE &&\n    node.classList.contains('splitpanes__splitter');\nfunction getOrientedDiff(drag, elementSize, isRTL) {\n    let tdrag = drag[horizontal ? 'top' : 'left'];\n    if (isRTL && !horizontal)\n        tdrag = elementSize - tdrag;\n    return tdrag;\n}\nconst getCurrentDimensionName = () => getDimensionName(horizontal);\nfunction onMouseDown(event, splitterPane) {\n    isMouseDown = true;\n    activeSplitter = splitterPane.index;\n    splitterPane.setSplitterActive(true);\n    const paneElement = splitterPane.element;\n    let activeSplitterNode = paneElement;\n    while (activeSplitterNode) {\n        activeSplitterNode = activeSplitterNode.previousSibling;\n        if (activeSplitterNode && isSplitterElement(activeSplitterNode)) {\n            break;\n        }\n    }\n    if (activeSplitterNode === null) {\n        console.error(\"Splitpane Error: Active splitter wasn't found!\");\n        return; // Don't bind move event on error\n    }\n    activeSplitterElement = activeSplitterNode;\n    const globalMousePosition = getGlobalMousePosition(event);\n    const splitterRect = getElementRect(activeSplitterElement);\n    activeSplitterDrag = getOrientedDiff(positionDiff(globalMousePosition, splitterRect), splitterRect[getCurrentDimensionName()], isRTL());\n    bindEvents();\n}\nfunction onMouseMove(event) {\n    if (isMouseDown) {\n        isDragging = true;\n        const globalMousePosition = getGlobalMousePosition(event);\n        const containerComputedStyle = calcComputedStyle(container);\n        const containerRectWithoutBorder = elementRectWithoutBorder(container, containerComputedStyle);\n        const containerSizeWithoutBorder = containerRectWithoutBorder[getCurrentDimensionName()];\n        const _isRTL = isRTL(containerComputedStyle);\n        const currentMouseDrag = positionDiff(globalMousePosition, containerRectWithoutBorder);\n        const tdrag = getOrientedDiff(currentMouseDrag, containerSizeWithoutBorder, _isRTL);\n        calculatePanesSize(tdrag, containerSizeWithoutBorder);\n        dispatch('resize', prepareSizeEvent());\n    }\n}\nfunction onMouseUp() {\n    if (isDragging) {\n        dispatch('resized', prepareSizeEvent());\n    }\n    isMouseDown = false;\n    const pane = panes[activeSplitter];\n    pane.setSplitterActive(false);\n    // Keep dragging flag until click event is finished (click happens immediately after mouseup)\n    // in order to prevent emitting `splitter-click` event if splitter was dragged.\n    setTimeout(() => {\n        isDragging = false;\n        unbindEvents();\n    }, 100);\n}\n// If touch device, detect double tap manually (2 taps separated by less than 500ms).\nfunction onSplitterClick(event, splitterPane) {\n    if ('ontouchstart' in window) {\n        const splitterIndex = splitterPane.index;\n        // Detect splitter double taps if the option is on.\n        if (dblClickSplitter) {\n            if (clickedSplitter === splitterIndex) {\n                if (timeoutId)\n                    clearTimeout(timeoutId);\n                timeoutId = null;\n                onSplitterDblClick(event, splitterPane);\n                clickedSplitter = -1; // Reset for the next tap check.\n            }\n            else {\n                clickedSplitter = splitterIndex;\n                timeoutId = setTimeout(() => {\n                    clickedSplitter = -1;\n                }, 500);\n            }\n        }\n    }\n    if (!isDragging)\n        dispatch('splitter-click', splitterPane);\n}\n// On splitter dbl click or dbl tap maximize this pane.\nfunction onSplitterDblClick(_event, splitterPane) {\n    if (dblClickSplitter) {\n        const splitterIndex = splitterPane.index;\n        let totalMinSizes = 0;\n        for (let i = 0; i < panes.length; i++) {\n            const pane = panes[i];\n            if (i !== splitterIndex) {\n                totalMinSizes += pane.min();\n            }\n        }\n        const maxExtendedSize = Math.min(Math.max(0, 100 - totalMinSizes), splitterPane.max());\n        const totalMaxExtendedPlusMinSizes = totalMinSizes + maxExtendedSize;\n        if (totalMaxExtendedPlusMinSizes >= 100) {\n            // put everything to the minimum, and in the splitterPane put the rest of the size\n            for (let i = 0; i < panes.length; i++) {\n                const pane = panes[i];\n                if (pane !== splitterPane) {\n                    pane.setSz(pane.min());\n                }\n                else {\n                    pane.setSz(100 - totalMinSizes);\n                }\n            }\n        }\n        else {\n            // notice that in this case, we can conclude that `panes.length >= 2`\n            // put splitterPane to the maximum (the actual one), and the normal panes to the minimum,\n            //  and give the spare to left pane (or to the right pane, if the splitterPane is the first pane)\n            // if this spare size is beyond the pane maximum, need to pass it along to the other panes\n            let leftSpare = 100 - totalMaxExtendedPlusMinSizes;\n            splitterPane.setSz(maxExtendedSize);\n            const giveBest = (pane) => {\n                const min = pane.min();\n                const max = pane.max();\n                const szExtra = Math.min(Math.max(0, leftSpare), max - min);\n                pane.setSz(min + szExtra);\n                leftSpare -= szExtra;\n            };\n            // go backward and give the most size as we can\n            for (let i = splitterIndex - 1; i >= 0; i--)\n                giveBest(panes[i]);\n            // go forward and give the most size as we can\n            for (let i = splitterIndex + 1; i < panes.length; i++)\n                giveBest(panes[i]);\n            // at the end of the process, we must have that `leftSpare` is 0\n            if (leftSpare !== 0) {\n                console.warn('Splitpanes: there is a left spare size after computation of splitter double click, which means there are issues on the size constains of the panes.');\n            }\n        }\n        dispatch('pane-maximize', splitterPane);\n        dispatch('resized', prepareSizeEvent());\n    }\n    // onMouseUp might not be called on the second click, so update the mouse state.\n    // TODO: Should also check and unbind events, but better IMO to not bind&unbind on every click, so ignored for now.\n    isMouseDown = false;\n}\nconst prepareSizeEvent = () => panes.map(pane => ({\n    min: pane.min(),\n    max: pane.max(),\n    size: pane.sz(),\n    snap: pane.snap()\n}));\n/**\n * Returns the drag percentage of the splitter relative to the 2 parts it's inbetween, meaning the ratio between\n *  the size that all the panes before the splitter consumes (ignoring other splitters size) and the total size of the container.\n */\nfunction getCurrentDragPercentage(tdrag, containerSizeWithoutBorder) {\n    // Here we want the splitter size **including the borders**.\n    // We need to use `Element.getBoundingClientRect()` and not `Element.clientWidth` and `Element.clientHeight`,\n    //  bacause the latter round the number of pixels to integer, and additionally, they don't include the borders.\n    const splitterSize = (node) => getElementRect(node)[getCurrentDimensionName()];\n    const activeSplitterSize = splitterSize(activeSplitterElement);\n    let splittersTotalSizeBefore = 0;\n    let currentBeforeNode = activeSplitterElement.previousSibling;\n    while (currentBeforeNode) {\n        if (isSplitterElement(currentBeforeNode)) {\n            splittersTotalSizeBefore += splitterSize(currentBeforeNode);\n        }\n        currentBeforeNode = currentBeforeNode.previousSibling;\n    }\n    let splittersTotalSizeAfter = 0;\n    let currentAfterNode = activeSplitterElement.nextSibling;\n    while (currentAfterNode) {\n        if (isSplitterElement(currentAfterNode)) {\n            splittersTotalSizeAfter += splitterSize(currentAfterNode);\n        }\n        currentAfterNode = currentAfterNode.nextSibling;\n    }\n    const totalSplitterBefore = splittersTotalSizeBefore + activeSplitterDrag;\n    const totalSplitter = splittersTotalSizeBefore + activeSplitterSize + splittersTotalSizeAfter;\n    // An explanation to the mathematical computation:\n    //\n    // Let's start with the case of only two panes. If we mark the first pane size in prec\n    //  (thinking about it as a number between 0 to 1) as `x`, we'll get that the size of the left pane in pixels will be:\n    // `x*containerSizeWithoutBorder - x*totalSplitter = x*(containerSizeWithoutBorder - totalSplitter)`\n    // Since we want that the total size in pixels before the user mouse pointer will be `tdrag`, and we need to add the\n    //  size of the splitter itself that is before the mouse pointer, we get the equation:\n    // `x*(containerSizeWithoutBorder - totalSplitter) + activeSplitterDrag = tdrag`\n    //\n    // Now in the general case when we have many panes before the splitter, mark their precentages\n    //  (again, thinking about it as a number between 0 to 1) by x1,x2,...,xn we'll get the equation:\n    // `(x1 + ... + xn)*(containerSizeWithoutBorder - totalSplitter) + totalSplitterBefore = tdrag`\n    // And solving it yeild the answer:\n    // `x1 + ... + xn = (tdrag - totalSplitterBefore) / (containerSizeWithoutBorder - totalSplitter)`\n    return ((tdrag - totalSplitterBefore) / (containerSizeWithoutBorder - totalSplitter)) * 100;\n}\n/**\n * Called when slitters are moving to adjust pane sizes\n */\nfunction calculatePanesSize(tdrag, containerSizeWithoutBorder) {\n    let paneBeforeIndex = activeSplitter - 1;\n    let paneBefore = panes[paneBeforeIndex];\n    let paneAfterIndex = activeSplitter;\n    let paneAfter = panes[paneAfterIndex];\n    let sums = {\n        prevPanesSize: sumPrevPanesSize(paneBeforeIndex),\n        nextPanesSize: sumNextPanesSize(paneAfterIndex),\n        prevReachedMinPanes: 0,\n        nextReachedMinPanes: 0\n    };\n    // If not pushing other panes, panes to resize are right before and right after splitter.\n    const minDrag = 0 + (pushOtherPanes ? 0 : sums.prevPanesSize);\n    const maxDrag = 100 - (pushOtherPanes ? 0 : sums.nextPanesSize);\n    // Calculate drag percentage\n    const mouseDragPercentage = Math.max(Math.min(getCurrentDragPercentage(tdrag, containerSizeWithoutBorder), maxDrag), minDrag);\n    // Handle snap\n    const paneBeforeSnap = sums.prevPanesSize + paneBefore.min() + paneBefore.snap();\n    const paneAfterSnap = 100 - (sums.nextPanesSize + paneAfter.min() + paneAfter.snap());\n    let dragPercentage = mouseDragPercentage;\n    let snapped = false;\n    if (mouseDragPercentage <= paneBeforeSnap) {\n        if (mouseDragPercentage > sums.prevPanesSize + paneBefore.min()) {\n            dragPercentage = Math.max(paneBefore.min() + sums.prevPanesSize, 100 - (paneAfter.max() + sums.nextPanesSize));\n            snapped = true;\n        }\n    }\n    else if (mouseDragPercentage >= paneAfterSnap) {\n        if (mouseDragPercentage < 100 - sums.nextPanesSize - paneAfter.min()) {\n            dragPercentage = Math.min(100 - (paneAfter.min() + sums.nextPanesSize), paneBefore.max() + sums.prevPanesSize);\n            snapped = true;\n        }\n    }\n    const paneBeforeMaxReached = paneBefore.max() < 100 && dragPercentage >= paneBefore.max() + sums.prevPanesSize;\n    const paneAfterMaxReached = paneAfter.max() < 100 && dragPercentage <= 100 - (paneAfter.max() + sums.nextPanesSize);\n    // Prevent dragging beyond pane max.\n    if (paneBeforeMaxReached || paneAfterMaxReached) {\n        if (paneBeforeMaxReached) {\n            paneBefore.setSz(paneBefore.max());\n            paneAfter.setSz(Math.max(100 - paneBefore.max() - sums.prevPanesSize - sums.nextPanesSize, 0));\n        }\n        else {\n            paneBefore.setSz(Math.max(100 - paneAfter.max() - sums.prevPanesSize - sums.nextPanesSize, 0));\n            paneAfter.setSz(paneAfter.max());\n        }\n    }\n    else {\n        // When pushOtherPanes = true, find the closest expanded pane on each side of the splitter.\n        // TODO: Bug: This should work also when removing `!snapped` condition, but it's not!\n        //   To reproduce, reload the example page and see the example \"Min & max with snap\".\n        //   It gets wrongly pushed when try to snap on the initial dragging of the first splitter to the right.\n        if (pushOtherPanes && !snapped) {\n            const vars = doPushOtherPanes(sums, dragPercentage);\n            if (!vars) {\n                //\t\tsetAllPaneDimensions();\n                return; // Prevent other calculation.\n            }\n            ({ sums, paneBeforeIndex, paneAfterIndex } = vars);\n            paneBefore = panes[paneBeforeIndex];\n            paneAfter = panes[paneAfterIndex];\n        }\n        if (typeof paneBeforeIndex === 'number') {\n            paneBefore.setSz(Math.min(Math.max(dragPercentage - sums.prevPanesSize - sums.prevReachedMinPanes, paneBefore.min()), paneBefore.max()));\n        }\n        if (typeof paneAfterIndex === 'number') {\n            paneAfter.setSz(Math.min(Math.max(100 - dragPercentage - sums.nextPanesSize - sums.nextReachedMinPanes, paneAfter.min()), paneAfter.max()));\n        }\n    }\n}\nfunction doPushOtherPanes(sums, dragPercentage) {\n    const splitterIndex = activeSplitter - 1;\n    let paneBeforeIndex = splitterIndex;\n    let paneAfterIndex = splitterIndex + 1;\n    // Pushing Down.\n    // Going smaller than the current pane min size: take the previous expanded pane.\n    if (dragPercentage < sums.prevPanesSize + panes[paneBeforeIndex].min()) {\n        paneBeforeIndex = findPrevExpandedPane(splitterIndex)?.index;\n        sums.prevReachedMinPanes = 0;\n        if (paneBeforeIndex === undefined) {\n            // If nothing else to push down, cancel dragging.\n            sums.prevPanesSize = 0;\n            panes[0].setSz(panes[0].min());\n            forEachPartial(panes, 1, splitterIndex + 1, (pane) => {\n                pane.setSz(pane.min());\n                sums.prevReachedMinPanes += pane.min();\n            });\n            panes[paneAfterIndex].setSz(100 - sums.prevReachedMinPanes - panes[0].min() - sums.prevPanesSize - sums.nextPanesSize);\n            return null;\n        }\n        else {\n            // If pushing a n-2 or less pane, from splitter, then make sure all in between is at min size.\n            if (paneBeforeIndex < splitterIndex) {\n                forEachPartial(panes, paneBeforeIndex + 1, splitterIndex + 1, (pane) => {\n                    pane.setSz(pane.min());\n                    sums.prevReachedMinPanes += pane.min();\n                });\n            }\n            sums.prevPanesSize = sumPrevPanesSize(paneBeforeIndex);\n        }\n    }\n    // Pushing Up.\n    // Pushing up beyond min size is reached: take the next expanded pane.\n    if (dragPercentage > 100 - sums.nextPanesSize - panes[paneAfterIndex].min()) {\n        paneAfterIndex = findNextExpandedPane(splitterIndex)?.index;\n        if (paneBeforeIndex === undefined)\n            console.log('Yep undefined paneAfterIndex');\n        sums.nextReachedMinPanes = 0;\n        if (paneAfterIndex === undefined) {\n            // If nothing else to push up, cancel dragging.\n            sums.nextPanesSize = 0;\n            const panesCount = panes.length;\n            panes[panesCount - 1].setSz(panes[panesCount - 1].min());\n            forEachPartial(panes, splitterIndex + 1, panesCount - 1, pane => {\n                pane.setSz(pane.min());\n                sums.nextReachedMinPanes += pane.min();\n            });\n            panes[paneBeforeIndex].setSz(100 -\n                sums.prevPanesSize -\n                sums.nextReachedMinPanes -\n                panes[panesCount - 1].min() -\n                sums.nextPanesSize);\n            return null;\n        }\n        else {\n            // If pushing a n+2 or more pane, from splitter, then make sure all in between is at min size.\n            if (paneAfterIndex > splitterIndex + 1) {\n                forEachPartial(panes, splitterIndex + 1, paneAfterIndex, (pane) => {\n                    pane.setSz(pane.min());\n                    sums.nextReachedMinPanes += pane.min();\n                });\n            }\n            sums.nextPanesSize = sumNextPanesSize(paneAfterIndex);\n        }\n    }\n    return { sums, paneBeforeIndex, paneAfterIndex };\n}\nconst getSizeOfPane = (pane) => pane.sz();\nconst sumPrevPanesSize = (splitterIndex) => sumPartial(panes, 0, splitterIndex, getSizeOfPane);\nconst sumNextPanesSize = (splitterIndex) => sumPartial(panes, splitterIndex + 1, panes.length, getSizeOfPane);\n// Return the previous pane from siblings which has a size (width for vert or height for horz) of more than 0.\nconst findPrevExpandedPane = (splitterIndex) => [...panes].reverse().find(p => p.index < splitterIndex && p.sz() > p.min());\n// Return the next pane from siblings which has a size (width for vert or height for horz) of more than 0.\nconst findNextExpandedPane = (splitterIndex) => panes.find(p => p.index > splitterIndex + 1 && p.sz() > p.min());\nasync function tickAndResetPaneSizes() {\n    isAwaitingPaneReset = true;\n    await tick();\n    if (isAwaitingPaneReset) {\n        resetPaneSizes();\n        isAwaitingPaneReset = false;\n    }\n}\n/**\n *\n * @param addedPane\n * @param removedPane\n */\nfunction resetPaneSizes() {\n    equalize();\n    if (isReady)\n        dispatch('resized', prepareSizeEvent());\n}\nfunction equalize() {\n    // Escape the function on the edge case that there is not even a single pane\n    if (panes.length === 0) {\n        return;\n    }\n    // otherwise\n    const panesCount = panes.length;\n    let leftToAllocate = 100;\n    let definedSizesCount = 0;\n    let undefinedSizesNotReadyCount = 0;\n    let undefinedSizesSum = 0;\n    const ungrowable = [];\n    const unshrinkable = [];\n    for (let i = 0; i < panesCount; i++) {\n        const pane = panes[i];\n        const sz = pane.sz();\n        if (pane.givenSize === null) {\n            if (pane.isReady) {\n                undefinedSizesSum += sz;\n                if (sz >= pane.max())\n                    ungrowable.push(pane);\n                if (sz <= pane.min())\n                    unshrinkable.push(pane);\n            }\n            else {\n                undefinedSizesNotReadyCount += 1;\n            }\n        }\n        else {\n            // if the size is defined, we don't modify its size at all\n            leftToAllocate -= sz;\n            definedSizesCount++;\n            ungrowable.push(pane);\n            unshrinkable.push(pane);\n        }\n    }\n    const undefinedSizesCount = panesCount - definedSizesCount;\n    const undefinedSizesReadyCount = undefinedSizesCount - undefinedSizesNotReadyCount;\n    // the proportion of the newly added panes\n    let undefinedSizesNotReadySz;\n    let undefinedScaleFactor;\n    if (undefinedSizesReadyCount > 0) {\n        // if has undefined sizes panes that are ready:\n        undefinedSizesNotReadySz = undefinedSizesSum / undefinedSizesReadyCount;\n        if (undefinedSizesNotReadySz > 0.1 && leftToAllocate > 0.1) {\n            undefinedSizesSum += undefinedSizesNotReadyCount * undefinedSizesNotReadySz;\n            undefinedScaleFactor = leftToAllocate / undefinedSizesSum;\n        }\n        else {\n            // when the size of the ready undefined panes shares are negligible, need to set the not ready\n            //  undefined one to size 0, for being \"proportional\" to negligible sizes\n            undefinedSizesNotReadySz = 0;\n            undefinedScaleFactor = 1;\n        }\n    }\n    else {\n        // otherwise, divide the space of the undefined sizes panes equally:\n        undefinedSizesNotReadySz = leftToAllocate / undefinedSizesCount;\n        undefinedScaleFactor = 1;\n    }\n    // whenever `leftToAllocate` or `undefinedSizesSum` aren't negligible, need to adjact the sizes\n    if (leftToAllocate + undefinedSizesSum > 0.1) {\n        leftToAllocate = 100; // reset the space calculation\n        for (let i = 0; i < panesCount; i++) {\n            const pane = panes[i];\n            if (!(typeof pane.givenSize === 'number')) {\n                // add the proportion of the newly added pane if has undefined size\n                const currentSz = pane.isReady ? pane.sz() : undefinedSizesNotReadySz;\n                const sz = Math.max(Math.min(currentSz * undefinedScaleFactor, pane.max()), pane.min());\n                pane.setSz(sz);\n            }\n            leftToAllocate -= pane.sz();\n        }\n        // since we multiply by scaling, there might be left space that is needed to be saturated\n        if (Math.abs(leftToAllocate) > 0.1) {\n            leftToAllocate = readjustSizes(leftToAllocate, ungrowable, unshrinkable);\n        }\n    }\n    if (!isFinite(leftToAllocate)) {\n        console.warn('Splitpanes: Internal error, sizes might be NaN as a result.');\n    }\n    else if (Math.abs(leftToAllocate) > 0.1) {\n        console.warn('Splitpanes: Could not resize panes correctly due to their constraints.');\n    }\n}\n// Second loop to adjust sizes now that we know more about the panes constraints.\nfunction readjustSizes(leftToAllocate, ungrowable, unshrinkable) {\n    const panesCount = panes.length;\n    const panesSizableCount = panesCount - (leftToAllocate > 0 ? ungrowable.length : unshrinkable.length);\n    if (panesSizableCount <= 0) {\n        return leftToAllocate;\n    }\n    const equalSpaceToAllocate = leftToAllocate / panesSizableCount;\n    if (panes.length === 1) {\n        panes[0].setSz(100);\n        leftToAllocate = 0;\n    }\n    else\n        for (let i = 0; i < panes.length; i++) {\n            const pane = panes[i];\n            const sz = pane.sz();\n            if (leftToAllocate > 0 && !ungrowable.includes(pane)) {\n                // Need to diff the size before and after to get the exact allocated space.\n                const newPaneSize = Math.max(Math.min(sz + equalSpaceToAllocate, pane.max()), pane.min());\n                const allocated = newPaneSize - sz;\n                leftToAllocate -= allocated;\n                pane.setSz(newPaneSize);\n            }\n            else if (!unshrinkable.includes(pane)) {\n                // Need to diff the size before and after to get the exact allocated space.\n                const newPaneSize = Math.max(Math.min(sz + equalSpaceToAllocate, pane.max()), pane.min());\n                const allocated = newPaneSize - sz;\n                leftToAllocate -= allocated;\n                pane.setSz(newPaneSize);\n            }\n        }\n    return leftToAllocate;\n}\n/**\n   * Checks that <Splitpanes> is composed of <Pane>, and verify that the panes are still in the right order,\n      and if not update the internal order.\n   */\nfunction verifyAndUpdatePanesOrder() {\n    if (!container) {\n        return;\n    }\n    const { children } = container;\n    let currentPaneIndex = 0;\n    let needReorder = false;\n    for (let i = 0; i < children.length; i++) {\n        const child = children.item(i);\n        const isPane = child.classList.contains('splitpanes__pane');\n        const isSplitter = child.classList.contains('splitpanes__splitter');\n        // Node is not a Pane or a splitter: remove it.\n        if (!isPane && !isSplitter) {\n            child.parentNode?.removeChild(child); // el.remove() doesn't work on IE11.\n            console.warn('Splitpanes: Only <Pane> elements are allowed at the root of <Splitpanes>. One of your DOM nodes was removed.');\n            return;\n        }\n        else if (isPane) {\n            if (!needReorder && panes[currentPaneIndex].element !== child) {\n                needReorder = true;\n            }\n            currentPaneIndex++;\n        }\n    }\n    if (needReorder) {\n        const newPanes = [];\n        for (let i = 0; i < children.length; i++) {\n            const child = children.item(i);\n            const isPane = child?.classList.contains('splitpanes__pane');\n            if (isPane) {\n                const pane = panes.find(pane => pane.element === child);\n                if (pane) {\n                    pane.index = newPanes.length;\n                    newPanes.push(pane);\n                }\n                else {\n                    console.warn(\"Splitpanes: Internal error - found a <Pane> elements which isn't tracked.\");\n                }\n            }\n        }\n        panes = newPanes;\n        $veryFirstPaneKey = panes.length > 0 ? panes[0].key : undefined;\n    }\n}\n</script>\n\n<div\n  {id}\n  bind:this={container}\n  class={`splitpanes ${theme || ''} ${clazz || ''}`}\n  class:splitpanes--horizontal={horizontal}\n  class:splitpanes--vertical={!horizontal}\n  class:splitpanes--dragging={isMouseDown || isDragging}\n  class:splitpanes--freeze={!isAfterInitialTimeoutZero}\n  {style}>\n  {#if !browser}\n    <GatheringRound><slot /></GatheringRound>\n  {/if}\n  <slot />\n</div>\n\n<style global>:global(.splitpanes.default-theme) :global(.splitpanes__pane) {\n  background-color: #f2f2f2;\n}\n:global(.splitpanes.default-theme) :global(.splitpanes__splitter) {\n  background-color: #fff;\n  box-sizing: border-box;\n  position: relative;\n  flex-shrink: 0;\n}\n:global(.splitpanes.default-theme) :global(.splitpanes__splitter:before), :global(.splitpanes.default-theme) :global(.splitpanes__splitter:after) {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  background-color: rgba(0, 0, 0, 0.15);\n  transition: background-color 0.3s;\n}\n:global(.splitpanes.default-theme) :global(.splitpanes__splitter:hover:before), :global(.splitpanes.default-theme) :global(.splitpanes__splitter:hover:after) {\n  background-color: rgba(0, 0, 0, 0.25);\n}\n:global(.splitpanes.default-theme) :global(.splitpanes__splitter:first-child) {\n  cursor: auto;\n}\n\n:global(.default-theme.splitpanes) :global(.splitpanes) :global(.splitpanes__splitter) {\n  z-index: 1;\n}\n:global(.default-theme.splitpanes--vertical) > :global(.splitpanes__splitter),\n:global(.default-theme) :global(.splitpanes--vertical) > :global(.splitpanes__splitter) {\n  width: 7px;\n  border-left: 1px solid #eee;\n  cursor: col-resize;\n}\n:global(.default-theme.splitpanes--vertical) > :global(.splitpanes__splitter:before), :global(.default-theme.splitpanes--vertical) > :global(.splitpanes__splitter:after), :global(.default-theme) :global(.splitpanes--vertical) > :global(.splitpanes__splitter:before), :global(.default-theme) :global(.splitpanes--vertical) > :global(.splitpanes__splitter:after) {\n  transform: translateY(-50%);\n  width: 1px;\n  height: 30px;\n}\n:global(.default-theme.splitpanes--vertical) > :global(.splitpanes__splitter:before),\n:global(.default-theme) :global(.splitpanes--vertical) > :global(.splitpanes__splitter:before) {\n  margin-left: -2px;\n}\n:global(.default-theme.splitpanes--vertical) > :global(.splitpanes__splitter:after),\n:global(.default-theme) :global(.splitpanes--vertical) > :global(.splitpanes__splitter:after) {\n  margin-left: 1px;\n}\n:global(.default-theme.splitpanes--horizontal) > :global(.splitpanes__splitter),\n:global(.default-theme) :global(.splitpanes--horizontal) > :global(.splitpanes__splitter) {\n  height: 7px;\n  border-top: 1px solid #eee;\n  cursor: row-resize;\n}\n:global(.default-theme.splitpanes--horizontal) > :global(.splitpanes__splitter:before), :global(.default-theme.splitpanes--horizontal) > :global(.splitpanes__splitter:after), :global(.default-theme) :global(.splitpanes--horizontal) > :global(.splitpanes__splitter:before), :global(.default-theme) :global(.splitpanes--horizontal) > :global(.splitpanes__splitter:after) {\n  transform: translateX(-50%);\n  width: 30px;\n  height: 1px;\n}\n:global(.default-theme.splitpanes--horizontal) > :global(.splitpanes__splitter:before),\n:global(.default-theme) :global(.splitpanes--horizontal) > :global(.splitpanes__splitter:before) {\n  margin-top: -2px;\n}\n:global(.default-theme.splitpanes--horizontal) > :global(.splitpanes__splitter:after),\n:global(.default-theme) :global(.splitpanes--horizontal) > :global(.splitpanes__splitter:after) {\n  margin-top: 1px;\n}\n\n:global(div.splitpanes--horizontal.splitpanes--dragging) {\n  cursor: row-resize;\n}\n\n:global(div.splitpanes--vertical.splitpanes--dragging) {\n  cursor: col-resize;\n}\n\n:global(.splitpanes) {\n  display: flex;\n  width: 100%;\n  height: 100%;\n}\n:global(.splitpanes--vertical) {\n  flex-direction: row;\n}\n:global(.splitpanes--horizontal) {\n  flex-direction: column;\n}\n:global(.splitpanes--dragging) :global(*) {\n  user-select: none;\n}\n:global(.splitpanes__pane) {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  /** Add also a direct child selector, for dealing with specifity of nested splitpanes transition.\n    This issue was happening in the examples on nested splitpanes, vertical inside horizontal.\n    I think it's better to keep also the previous CSS selector for (potential) old browser compatibility.\n  */\n}\n:global(.splitpanes--vertical) :global(.splitpanes__pane) {\n  transition: width 0.2s ease-out;\n}\n:global(.splitpanes--horizontal) :global(.splitpanes__pane) {\n  transition: height 0.2s ease-out;\n}\n:global(.splitpanes--vertical) > :global(.splitpanes__pane) {\n  transition: width 0.2s ease-out;\n}\n:global(.splitpanes--horizontal) > :global(.splitpanes__pane) {\n  transition: height 0.2s ease-out;\n}\n:global(.splitpanes--dragging) :global(.splitpanes__pane) {\n  transition: none;\n  pointer-events: none;\n}\n:global(.splitpanes--freeze) :global(.splitpanes__pane) {\n  transition: none;\n}\n:global(.splitpanes__splitter) {\n  touch-action: none;\n}\n:global(.splitpanes--vertical) > :global(.splitpanes__splitter) {\n  min-width: 1px;\n}\n:global(.splitpanes--horizontal) > :global(.splitpanes__splitter) {\n  min-height: 1px;\n}</style>\n","/**\n * Generate a callback that is safe to be called even if `callbackObjectGetter()` is nullish on that moment.\n *\n * In the case of the object is nullish, invoking the callback will do nothing.\n */\nconst carefullCallbackGenerator = (callbackObjectGetter, callbackName) => (value) => {\n    const callbackObject = callbackObjectGetter();\n    if (callbackObject !== null) {\n        callbackObject[callbackName](value);\n    }\n};\n/**\n * This is an source of callbacks that are safe to be called even if the object of `callbackObjectGetter()` is nullish on that moment.\n *\n * In the case of the object is nullish, invoking the callbacks will do nothing.\n */\nexport const carefullCallbackSource = (callbackObjectGetter) => \n//@ts-expect-error unassignable\ncarefullCallbackGenerator.bind(null, callbackObjectGetter);\n","<script lang=\"ts\" strictEvents>import { getContext, onMount, onDestroy, hasContext } from 'svelte';\nimport { KEY } from './Splitpanes.svelte';\nimport { browser } from './internal/env.js';\nimport { gatheringKey } from './internal/GatheringRound.svelte';\nimport { getDimensionName } from './internal/utils/sizing.js';\nimport { carefullCallbackSource } from './internal/utils/functions';\nconst { ssrRegisterPaneSize, onPaneInit, clientOnly: clientOnlyContext, isHorizontal, showFirstSplitter, veryFirstPaneKey } = getContext(KEY);\n// PROPS\nexport let size = null;\nexport let minSize = 0;\nexport let maxSize = 100;\nexport let snapSize = 0;\n// css class\nlet clazz = '';\nexport { clazz as class };\n// VARIABLES\nconst key = {};\nconst gathering = !browser && hasContext(gatheringKey);\nconst { undefinedPaneInitSize } = (!gathering ? onPaneInit(key) : {});\nlet element;\nlet sz = size ?? undefinedPaneInitSize;\nlet isSplitterActive = false;\n// CALLBACKS\nlet clientCallbacks = undefined;\n/**\n * This is an object of callbacks that are safe to be called on browser even when the object `clientCallbacks`\n *  isn't initialized yet (i.e. before `onPaneAdd()`).\n *\n * In the case of the object isn't initialized yet, calling this callbacks will do nothing.\n */\nconst carefullClientCallbacks = browser\n    ? carefullCallbackSource(() => clientCallbacks)\n    : undefined;\nconst reportGivenSizeChangeSafe = (size) => {\n    // We put an extra check of `size != sz` here and not in the reactive statement, since we don't want a change\n    //  of `sz` to trigger report.\n    if (clientCallbacks && size != sz) {\n        carefullClientCallbacks?.('reportGivenSizeChange')(size);\n    }\n};\n// REACTIVE\n$: {\n    if (browser && typeof size === 'number') {\n        reportGivenSizeChangeSafe(size);\n    }\n}\n$: dimension = getDimensionName($isHorizontal);\n$: style = `${dimension}: ${sz}%;`;\nif (gathering && ssrRegisterPaneSize) {\n    ssrRegisterPaneSize(size);\n}\nelse if (browser) {\n    onMount(() => {\n        const inst = {\n            index: 0,\n            key,\n            element: element,\n            givenSize: size,\n            sz: () => sz,\n            setSz: v => {\n                sz = v;\n                if (typeof size === 'number' && size !== sz) {\n                    size = sz;\n                }\n            },\n            min: () => minSize,\n            max: () => maxSize,\n            snap: () => snapSize,\n            setSplitterActive: (isActive) => {\n                isSplitterActive = isActive;\n            },\n            isReady: false\n        };\n        clientCallbacks = clientOnlyContext?.onPaneAdd(inst);\n    });\n    onDestroy(() => {\n        clientOnlyContext?.onPaneRemove(key);\n    });\n}\n</script>\n\n{#if !gathering}\n  <!-- Splitter -->\n  {#if $veryFirstPaneKey !== key || $showFirstSplitter}\n    <!-- this a11y issue is known, and will be taken care of as part of the a11y feature issue in #11 -->\n    <!-- svelte-ignore a11y-click-events-have-key-events -->\n    <!-- svelte-ignore a11y-no-static-element-interactions -->\n    <div\n      class=\"splitpanes__splitter {isSplitterActive ? 'splitpanes__splitter__active' : ''}\"\n      on:mousedown={carefullClientCallbacks?.('onSplitterDown')}\n      on:touchstart={carefullClientCallbacks?.('onSplitterDown')}\n      on:click={carefullClientCallbacks?.('onSplitterClick')}\n      on:dblclick={carefullClientCallbacks?.('onSplitterDblClick')} />\n  {/if}\n\n  <!-- Pane -->\n  <!-- this a11y issue is known, and will be taken care of as part of the a11y feature issue in #11 -->\n  <!-- svelte-ignore a11y-click-events-have-key-events -->\n  <!-- svelte-ignore a11y-no-static-element-interactions -->\n  <div\n    class={`splitpanes__pane ${clazz || ''}`}\n    bind:this={element}\n    on:click={carefullClientCallbacks?.('onPaneClick')}\n    {style}>\n    <slot />\n  </div>\n{/if}\n","<script>\n  import { onMount } from 'svelte';\n  import { Splitpanes } from 'svelte-splitpanes';\n  // import \"../../../styles/splitpanes.css\";\n\n  export let key = '';\n  export let horizontal = false;\n  export let defaultSizes = [];\n  export let prefix = 'layout__';\n\n  let paneSizes = [];\n  let _key = `${prefix}${key}`;\n\n  onMount(() => {\n    const saved = localStorage.getItem(_key);\n    if (saved) {\n      try {\n        paneSizes = JSON.parse(saved);\n      } catch {\n        paneSizes = defaultSizes;\n      }\n    } else {\n      paneSizes = defaultSizes;\n    }\n  });\n\n  const handleResize = (event) => {\n    const sizes = event.detail;\n    const result =\n      Array.isArray(sizes) &&\n      sizes?.map((item) => ({\n        ...item,\n        size: Number.isFinite(item.size) ? Math.round(item.size) : item.size,\n        snapSize: Math.round(item.size / 2)\n      }));\n    //console.log('result', result);\n    localStorage.setItem(_key, JSON.stringify(result));\n  };\n</script>\n\n<Splitpanes {horizontal} on:resize={handleResize}>\n  <slot {paneSizes} />\n</Splitpanes>\n","<script>\n    import { Pane } from \"svelte-splitpanes\";\n    export let index = 0;\n    export let paneSizes = [];\n</script>\n\n<Pane {...paneSizes[index]} {...$$restProps}>\n    <slot />\n</Pane>\n","export { default as K2Split } from './K2Split.svelte';\nexport { default as K2Pane } from './K2Pane.svelte';\nlet prefix = 'layout__';\n\nexport const exportLayoutConfig = () => {\n    const exported = {};\n\n    for (const key in localStorage) {\n        if (key.startsWith(prefix)) {\n            exported[key] = JSON.parse(localStorage.getItem(key));\n        }\n    }\n\n    // console.log('----*-----');\n    // for (const key in exported) {\n    //     console.log(key, \":\", exported[key]);\n    // }\n\n    return exported;\n};\n\nexport const importLayoutConfig = (data) => {\n    for (const key in data) {\n        if (key.startsWith(prefix)) {\n            localStorage.setItem(key, JSON.stringify(data[key]));\n        }\n    }\n    setTimeout(() => {\n        window.location.reload();\n    }, 1000);\n};\n\nexport const resetLayoutConfig = () => {\n    const keysToRemove = [];\n\n    for (const key in localStorage) {\n        if (key.startsWith(prefix)) {\n            keysToRemove.push(key);\n        }\n    }\n\n    keysToRemove.forEach((key) => localStorage.removeItem(key));\n    setTimeout(() => {\n        window.location.reload();\n    }, 1000);\n};\n\nexport default {\n    exportLayoutConfig,\n    importLayoutConfig,\n    resetLayoutConfig,\n};","<script>\n  import { K2Split, K2Pane } from '@layout/k2';\n  import { min } from 'rxjs';\n  export let option = {};\n\n  // $: change(option);\n  // const change = (option) => {\n  //   // console.clear();\n  //   console.log('option', option);\n  // };\n</script>\n\n<K2Split\n  key=\"2k-main\"\n  horizontal={true}\n  defaultSizes={[\n    { size: 5, snapSize: 2 },\n    { size: 90, snapSize: 10 },\n    { size: 5, snapSize: 10 }\n  ]}\n  let:paneSizes={paneSizesMain}>\n  <K2Pane index={0} paneSizes={paneSizesMain}>\n    <slot name=\"header\" />\n  </K2Pane>\n  <K2Pane index={1} paneSizes={paneSizesMain}>\n    <K2Split\n      key=\"2k-body\"\n      horizontal={false}\n      defaultSizes={[\n        { size: 23, snapSize: 10 },\n        { size: 50, snapSize: 10 },\n        { size: 30, snapSize: 10 }\n      ]}\n      let:paneSizes={paneSizesBody}>\n      <K2Pane index={0} paneSizes={paneSizesBody} pushOtherPanes={false}>\n        <slot name=\"left\" />\n      </K2Pane>\n      <K2Pane index={1} paneSizes={paneSizesBody}>\n        <K2Split\n          key=\"2k-content\"\n          horizontal={true}\n          defaultSizes={[\n            { size: 10, snapSize: 5 },\n            { size: 80, snapSize: 10 },\n            { size: 10, snapSize: 10 }\n          ]}\n          let:paneSizes={paneSizesContent}>\n          <K2Pane index={0} paneSizes={paneSizesContent}>\n            <slot name=\"head\" />\n          </K2Pane>\n          <K2Pane index={1} paneSizes={paneSizesContent}>\n            <slot name=\"content\" />\n          </K2Pane>\n          <K2Pane index={2} paneSizes={paneSizesContent}>\n            <slot name=\"comment\" />\n          </K2Pane>\n        </K2Split>\n      </K2Pane>\n      {#if option && option?.showBodyRight !== false}\n        <K2Pane index={2} paneSizes={paneSizesBody}>\n          <slot name=\"right\" />\n        </K2Pane>\n      {/if}\n    </K2Split>\n  </K2Pane>\n  <K2Pane index={2} paneSizes={paneSizesMain}>\n    <slot name=\"footer\" />\n  </K2Pane>\n</K2Split>\n","<script>\n  export let item;\n  import { createEventDispatcher } from 'svelte';\n  const dispatch = createEventDispatcher();\n</script>\n\n<!-- svelte-ignore a11y_click_events_have_key_events -->\n<!-- svelte-ignore a11y_no_static_element_interactions -->\n<div\n  class=\"flex flex-col gap-2 p-8 sm:flex-row sm:items-center sm:gap-6 sm:py-4\n         hover:bg-gray-100 active:bg-gray-200 transition-colors duration-200 rounded-lg cursor-pointer\"\n  on:click={() => {\n    dispatch('click', item);\n  }}>\n  <img\n    class=\"mx-auto block h-12 rounded-full sm:mx-0 sm:shrink-0\"\n    src={`https://ui-avatars.com/api/?name=${item?.partner_name || ''}&background=random&size=50`}\n    alt=\"User {item.userId}\" />\n\n  <div class=\"space-y-2 text-center sm:text-left\">\n    <div class=\"space-y-0.5\">\n      <p class=\"text-lg font-semibold text-black\">{item?.code || ''}</p>\n      <p class=\"font-medium text-gray-500\">{item?.partner_name || ''}</p>\n      <p class=\"font-medium text-gray-500\">{item?.result_datetime || ''}</p>\n    </div>\n  </div>\n</div>\n","<!-- worklist/index.svelte -->\n<script>\n  import { onMount } from 'svelte';\n  import Item from './Item.svelte';\n  // import Loading from '@components/loading/index.svelte';\n  import { createEventDispatcher } from 'svelte';\n  const dispatch = createEventDispatcher();\n\n  import ApiClient from '$lib/api';\n\n  export let items = [];\n  export let loaded = false;\n  let item = {};\n  //let loaded = false;\n\n  // let page = 1;\n  // let limit = 20;\n  // let keyword = '';\n\n  const api = new ApiClient();\n\n  // onMount(async () => {\n  //   try {\n  //     const json = await api.get(\n  //       `/api/endo/results?limit=${limit}&page=${page}&keyword=${encodeURIComponent(keyword)}`\n  //     );\n  //     if (json.success) {\n  //       items = json.data;\n  //       console.log('Items loaded:', items);\n  //     } else {\n  //       console.error('API error:', json.error);\n  //     }\n  //   } catch (err) {\n  //     console.error('Fetch error:', err);\n  //   } finally {\n  //     console.log('Finished loading items.', new Date());\n  //     loaded = true;\n  //   }\n  // });\n</script>\n\n{#if loaded}\n  <div class=\"w-full h-full overflow-auto\">\n    <h1 class=\"text-1xl font-bold mb-2 text-center hidden\">Chat List</h1>\n    <div class=\"bg-white shadow-md rounded-lg overflow-hidden\">\n      <ul id=\"chat-list\" class=\"divide-y divide-gray-200\">\n        {#each items as item}\n          <Item {item} on:click />\n        {/each}\n      </ul>\n    </div>\n  </div>\n{:else}\n  <p>ang ti...</p>\n{/if}\n","<script>\n  import { onMount } from \"svelte\";\n  let activeTab = \"all\";\n\n  const tabs = [\n    { label: \"Tt c\", value: \"all\" },\n    { label: \"Ti liu\", value: \"docx\" },\n    { label: \"Hp ng\", value: \"pdf\" },\n    { label: \"Bo co\", value: \"xlsx\" },\n  ];\n\n  const fileHistory = [\n    {\n      date: \"Hm nay - 03/05/2025\",\n      files: [\n        {\n          name: \"Bo co doanh thu.docx\",\n          uploader: \"Hng\",\n          time: \"10:32 AM\",\n          type: \"docx\",\n        },\n        {\n          name: \"Thng k qu.xlsx\",\n          uploader: \"Lan\",\n          time: \"09:15 AM\",\n          type: \"xlsx\",\n        },\n        {\n          name: \"Chi ph thng 4.pdf\",\n          uploader: \"Linh\",\n          time: \"08:05 AM\",\n          type: \"pdf\",\n        },\n      ],\n    },\n    {\n      date: \"Hm qua - 02/05/2025\",\n      files: [\n        {\n          name: \"Hp ng mu.pdf\",\n          uploader: \"Minh\",\n          time: \"17:40\",\n          type: \"pdf\",\n        },\n        {\n          name: \"K hoch marketing.xlsx\",\n          uploader: \"T\",\n          time: \"16:22\",\n          type: \"xlsx\",\n        },\n      ],\n    },\n  ];\n\n  const names = [\n    \"Bo co\",\n    \"Thng k\",\n    \"Chi ph\",\n    \"Hp ng\",\n    \"K hoch\",\n    \"Phiu thu\",\n    \"Bin bn\",\n    \"Ngn sch\",\n    \"Bng lng\",\n    \"Quyt ton\",\n  ];\n  const extensions = [\"docx\", \"xlsx\", \"pdf\"];\n  const uploaders = [\n    \"Hng\",\n    \"Lan\",\n    \"Linh\",\n    \"Minh\",\n    \"T\",\n    \"Hoa\",\n    \"Nam\",\n    \"Tho\",\n    \"An\",\n    \"Dng\",\n  ];\n\nfunction randomTime() {\n  const h = String(Math.floor(Math.random() * 24)).padStart(2, \"0\");\n  const m = String(Math.floor(Math.random() * 60)).padStart(2, \"0\");\n  return `${h}:${m}`;\n}\n\n  function randomFile() {\n const ext = extensions[Math.floor(Math.random() * extensions.length)];\n    const name = `${names[Math.floor(Math.random() * names.length)]} ${Math.floor(Math.random() * 100)}.${ext}`;\n    return {\n      name,\n      uploader: uploaders[Math.floor(Math.random() * uploaders.length)],\n      time: randomTime(),\n      type: ext,\n    };\n  }\n\n  function formatDate(dayOffset) {\n    const d = new Date(2025, 4, 3); // 03/05/2025\n    d.setDate(d.getDate() - dayOffset);\n    const dd = String(d.getDate()).padStart(2, \"0\");\n    const mm = String(d.getMonth() + 1).padStart(2, \"0\");\n    const yyyy = d.getFullYear();\n    const label =\n      dayOffset === 0\n        ? \"Hm nay\"\n        : dayOffset === 1\n          ? \"Hm qua\"\n          : `Ngy ${dd}/${mm}/${yyyy}`;\n    return `${label} - ${dd}/${mm}/${yyyy}`;\n  }\n\n  onMount(() => {\n    //const fileHistory = [];\n\n    // To 100 ngy, mi ngy c 14 files\n    for (let i = 0; i < 100; i++) {\n      const fileCount = Math.floor(Math.random() * 4) + 1;\n      const files = Array.from({ length: fileCount }, () => randomFile());\n      fileHistory.push({\n        date: formatDate(i),\n        files,\n      });\n    }\n  });\n\n  function getIcon(type) {\n    switch (type) {\n      case \"docx\":\n        return \"\";\n      case \"xlsx\":\n        return \"\";\n      case \"pdf\":\n        return \"\";\n      default:\n        return \"\";\n    }\n  }\n\n  function getColorClass(type) {\n    switch (type) {\n      case \"docx\":\n        return \"text-blue-600\";\n      case \"xlsx\":\n        return \"text-green-600\";\n      case \"pdf\":\n        return \"text-red-600\";\n      default:\n        return \"text-gray-500\";\n    }\n  }\n\n  // Hm lc danh sch theo tab ang chn\n  function filterFiles(files) {\n    if (activeTab === \"all\") return files;\n    return files.filter((f) => f.type === activeTab);\n  }\n</script>\n\n<div class=\"w-full h-full mx-auto p-6 space-y-8 items-center-safe\">\n  <!-- Tabs -->\n  <div class=\"flex gap-4 border-b pb-2\">\n    {#each tabs as tab}\n      <button\n        on:click={() => (activeTab = tab.value)}\n        class=\"px-4 py-2 text-sm font-medium border-b-2 transition-colors duration-200\"\n        class:border-blue-500={activeTab === tab.value}\n        class:text-blue-600={activeTab === tab.value}\n        class:text-gray-500={activeTab !== tab.value}\n        class:border-transparent={activeTab !== tab.value}\n      >\n        {tab.label}\n      </button>\n    {/each}\n  </div>\n\n  <!-- File History -->\n  {#each fileHistory as group (group.date)}\n    {#if filterFiles(group.files).length > 0}\n      <div>\n        <h2 class=\"text-lg font-bold text-gray-700 mb-3\">\n          {group.date}\n        </h2>\n        <ul class=\"space-y-3\">\n          {#each filterFiles(group.files) as file (file.name)}\n            <li\n              class=\"flex items-center gap-4 p-4 bg-white shadow rounded-md hover:bg-gray-50 transition\"\n            >\n              <div class={`text-xl ${getColorClass(file.type)}`}>\n                {getIcon(file.type)}\n              </div>\n              <div class=\"flex-1\">\n                <p class=\"font-medium text-gray-800\">\n                  {file.name}\n                </p>\n                <p class=\"text-sm text-gray-500\">\n                  Ti ln bi {file.uploader}  {file.time}\n                </p>\n              </div>\n              <span class=\"text-xs text-gray-400\">.{file.type}</span>\n            </li>\n          {/each}\n        </ul>\n      </div>\n    {/if}\n  {/each}\n</div>\n","<script>\n  import {\n    Search,\n    UserPlus,\n    Users,\n    ChevronLeft,\n    ChevronRight,\n    ChevronsLeft,\n    ChevronsRight,\n    ChevronDown\n  } from 'lucide-svelte';\n  import { createEventDispatcher } from 'svelte';\n\n  const dispatch = createEventDispatcher();\n\n  let keyword = '';\n  let page = 1;\n  export let total = 0;\n  const pageSizeOptions = [1, 3, 5, 10, 20, 50, 100, 500];\n  let pageSize = pageSizeOptions[2]; // default 5\n  let showDropdown = false;\n  let customSize = '';\n\n  $: totalPages = pageSize === 0 ? 1 : Math.ceil(total / pageSize);\n\n  function changePage(newPage) {\n    if (newPage < 1 || newPage > totalPages) return;\n    page = newPage;\n    dispatch('pageChange', { keyword, page, limit: pageSize });\n  }\n\n  // function changePageSize(e) {\n  //   pageSize = parseInt(e.target.value);\n  //   page = 1; // reset v trang u khi i pageSize\n  //   dispatch('pageChange', { keyword, page, limit: pageSize });\n  // }\n\n  function apply(size) {\n    if (isNaN(size) || size < 0) return;\n\n    pageSize = size;\n    customSize = '';\n    showDropdown = false;\n    dispatch('search', { keyword, page, limit: pageSize });\n  }\n\n  function toggle() {\n    showDropdown = !showDropdown;\n  }\n\n  function doSearch() {\n    dispatch('search', { keyword, page, limit: pageSize });\n  }\n\n  // function changePage(newPage) {\n  //   if (newPage < 1) return;\n  //   page = newPage;\n  //   dispatch('pageChange', { page });\n  // }\n\n  function addUser() {\n    dispatch('addUser');\n  }\n\n  function addGroup() {\n    dispatch('addGroup');\n  }\n\n  function tabChange(tab) {\n    dispatch('tabChange', { tab });\n  }\n</script>\n\n<div class=\"bg-white border-b shadow p-4 mt-0 flex flex-col gap-4\">\n  <!-- Hng 1: Search box + nt -->\n  <div class=\"flex items-center gap-2\">\n    <div class=\"relative flex-1\">\n      <Search class=\"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400\" size={18} />\n      <input\n        type=\"text\"\n        bind:value={keyword}\n        placeholder=\"Tm kim...\"\n        class=\"w-full h-10 pl-8 pr-3 border rounded-md focus:outline-none focus:ring\"\n        on:keydown={(e) => e.key === 'Enter' && doSearch()} />\n    </div>\n\n    <button\n      class=\"w-10 h-10 flex items-center justify-center bg-transparent text-gray-400 rounded-md hover:bg-gray-100\"\n      title=\"Tm\"\n      on:click={doSearch}>\n      <Search size={20} />\n    </button>\n\n    <button\n      class=\"w-10 h-10 flex items-center justify-center bg-transparent text-gray-400 rounded-md hover:bg-gray-100\"\n      title=\"Thm user\"\n      on:click={addUser}>\n      <UserPlus size={20} />\n    </button>\n\n    <button\n      class=\"w-10 h-10 flex items-center justify-center bg-transparent text-gray-400 rounded-md hover:bg-gray-100\"\n      title=\"Thm nhm\"\n      on:click={addGroup}>\n      <Users size={20} />\n    </button>\n  </div>\n\n  <!-- Hng 2: Toggle nng cao -->\n  <details class=\"border rounded-md\">\n    <summary class=\"cursor-pointer px-3 py-2\"> Ty chn nng cao</summary>\n    <div class=\"p-3 text-sm text-gray-700\">\n      <p>Lc theo loi, trng thi, ngy to</p>\n    </div>\n  </details>\n\n  <!-- Hng 3: Phn trang -->\n  <div class=\"flex flex-col items-center gap-2 text-sm py-3 border-t\">\n    <!-- Dng 1: Thng tin -->\n    <div class=\"text-gray-600\">\n      {#if pageSize === 0}\n        Hin th tt c {total} mc\n      {:else}\n        Hin th {(page - 1) * pageSize + 1}\n        {Math.min(page * pageSize, total)} trong {total}\n      {/if}\n    </div>\n\n    <!-- Dng 2: Pagination -->\n    <div class=\"flex items-center gap-2 flex-nowrap\">\n      <!-- iu hng -->\n      <div class=\"flex items-center gap-1 flex-nowrap\">\n        <button\n          class=\"p-1 border rounded hover:bg-gray-100 disabled:opacity-50\"\n          disabled={page === 1}\n          on:click={() => changePage(1)}>\n          <ChevronsLeft size={14} />\n        </button>\n\n        <button\n          class=\"p-1 border rounded hover:bg-gray-100 disabled:opacity-50\"\n          disabled={page === 1}\n          on:click={() => changePage(page - 1)}>\n          <ChevronLeft size={14} />\n        </button>\n\n        <!-- Trang s (ti a 3 trang gn nht) -->\n        {#each Array(totalPages) as _, i (i)}\n          {#if Math.abs(i + 1 - page) <= 1}\n            <button\n              class=\"px-2 py-1 border rounded text-sm hover:bg-gray-100\n                   {page === i + 1 ? 'bg-blue-600 text-white border-blue-600' : ''}\"\n              on:click={() => changePage(i + 1)}>\n              {i + 1}\n            </button>\n          {/if}\n        {/each}\n\n        <button\n          class=\"p-1 border rounded hover:bg-gray-100 disabled:opacity-50\"\n          disabled={page === totalPages}\n          on:click={() => changePage(page + 1)}>\n          <ChevronRight size={14} />\n        </button>\n\n        <button\n          class=\"p-1 border rounded hover:bg-gray-100 disabled:opacity-50\"\n          disabled={page === totalPages}\n          on:click={() => changePage(totalPages)}>\n          <ChevronsRight size={14} />\n        </button>\n      </div>\n\n      <div class=\"relative inline-block text-sm\">\n        <!-- Nt chnh -->\n        <button\n          class=\"flex items-center gap-1 border rounded-lg px-3 py-1.5 bg-white shadow-sm hover:bg-gray-50\"\n          on:click={toggle}>\n          [{pageSize === 0 ? 'All' : pageSize}]\n          <ChevronDown size={16} class=\"text-gray-500 transition-transform {showDropdown ? 'rotate-180' : ''}\" />\n        </button>\n\n        <!-- Dropdown -->\n        {#if showDropdown}\n          <div\n            class=\"absolute mt-1 w-25 rounded-lg border border-gray-200 bg-white shadow-lg ring-1 ring-black/50 z-10 animate-fadeIn\">\n            <!-- Options -->\n            {#each pageSizeOptions as size}\n              <button\n                class=\"w-full text-left px-3 py-2 hover:bg-blue-50 hover:text-blue-600 transition-colors\"\n                on:click={() => apply(size)}>\n                {size}\n              </button>\n            {/each}\n\n            <!-- Custom input -->\n            <div class=\"border-t border-b-emerald-900 px-3 py-2 flex items-center gap-2\">\n              <input\n                type=\"number\"\n                min=\"0\"\n                bind:value={customSize}\n                placeholder=\"0\"\n                class=\"w-16 border rounded px-2 py-1 text-xs focus:ring focus:border-blue-500\"\n                on:keydown={(e) => e.key === 'Enter' && apply(parseInt(customSize))} />\n              <button\n                class=\"px-2 py-1 text-xs rounded bg-blue-600 text-white hover:bg-blue-700 hidden\"\n                on:click={() => apply(parseInt(customSize))}>\n                OK\n              </button>\n            </div>\n          </div>\n        {/if}\n      </div>\n    </div>\n  </div>\n\n  <!-- Hng 4: Tabs -->\n  <div class=\"flex gap-2 border-b text-sm\">\n    {#each ['Tt c', 'Cha c', ' ghim', 'Nhm'] as tab}\n      <button\n        class=\"px-4 py-2 hover:text-blue-500 border-b-2 {tab === 'Tt c'\n          ? 'border-blue-500 font-semibold'\n          : 'border-transparent'}\"\n        on:click={() => tabChange(tab)}>\n        {tab}\n      </button>\n    {/each}\n  </div>\n</div>\n\n<style>\n  /* Animation nh */\n  .animate-fadeIn {\n    animation: fadeIn 0.15s ease-out;\n  }\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n      transform: translateY(-4px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n</style>\n","function ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _s, _e;\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n  return _arr;\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function () {};\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (e) {\n      didErr = true;\n      err = e;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\n// external events\nvar FINALIZE_EVENT_NAME = \"finalize\";\nvar CONSIDER_EVENT_NAME = \"consider\";\n\n/**\n * @typedef {Object} Info\n * @property {string} trigger\n * @property {string} id\n * @property {string} source\n * @param {Node} el\n * @param {Array} items\n * @param {Info} info\n */\nfunction dispatchFinalizeEvent(el, items, info) {\n  el.dispatchEvent(new CustomEvent(FINALIZE_EVENT_NAME, {\n    detail: {\n      items: items,\n      info: info\n    }\n  }));\n}\n\n/**\n * Dispatches a consider event\n * @param {Node} el\n * @param {Array} items\n * @param {Info} info\n */\nfunction dispatchConsiderEvent(el, items, info) {\n  el.dispatchEvent(new CustomEvent(CONSIDER_EVENT_NAME, {\n    detail: {\n      items: items,\n      info: info\n    }\n  }));\n}\n\n// internal events\nvar DRAGGED_ENTERED_EVENT_NAME = \"draggedEntered\";\nvar DRAGGED_LEFT_EVENT_NAME = \"draggedLeft\";\nvar DRAGGED_OVER_INDEX_EVENT_NAME = \"draggedOverIndex\";\nvar DRAGGED_LEFT_DOCUMENT_EVENT_NAME = \"draggedLeftDocument\";\nvar DRAGGED_LEFT_TYPES = {\n  LEFT_FOR_ANOTHER: \"leftForAnother\",\n  OUTSIDE_OF_ANY: \"outsideOfAny\"\n};\nfunction dispatchDraggedElementEnteredContainer(containerEl, indexObj, draggedEl) {\n  containerEl.dispatchEvent(new CustomEvent(DRAGGED_ENTERED_EVENT_NAME, {\n    detail: {\n      indexObj: indexObj,\n      draggedEl: draggedEl\n    }\n  }));\n}\n\n/**\n * @param containerEl - the dropzone the element left\n * @param draggedEl - the dragged element\n * @param theOtherDz - the new dropzone the element entered\n */\nfunction dispatchDraggedElementLeftContainerForAnother(containerEl, draggedEl, theOtherDz) {\n  containerEl.dispatchEvent(new CustomEvent(DRAGGED_LEFT_EVENT_NAME, {\n    detail: {\n      draggedEl: draggedEl,\n      type: DRAGGED_LEFT_TYPES.LEFT_FOR_ANOTHER,\n      theOtherDz: theOtherDz\n    }\n  }));\n}\nfunction dispatchDraggedElementLeftContainerForNone(containerEl, draggedEl) {\n  containerEl.dispatchEvent(new CustomEvent(DRAGGED_LEFT_EVENT_NAME, {\n    detail: {\n      draggedEl: draggedEl,\n      type: DRAGGED_LEFT_TYPES.OUTSIDE_OF_ANY\n    }\n  }));\n}\nfunction dispatchDraggedElementIsOverIndex(containerEl, indexObj, draggedEl) {\n  containerEl.dispatchEvent(new CustomEvent(DRAGGED_OVER_INDEX_EVENT_NAME, {\n    detail: {\n      indexObj: indexObj,\n      draggedEl: draggedEl\n    }\n  }));\n}\nfunction dispatchDraggedLeftDocument(draggedEl) {\n  window.dispatchEvent(new CustomEvent(DRAGGED_LEFT_DOCUMENT_EVENT_NAME, {\n    detail: {\n      draggedEl: draggedEl\n    }\n  }));\n}\n\nvar TRIGGERS = {\n  DRAG_STARTED: \"dragStarted\",\n  DRAGGED_ENTERED: DRAGGED_ENTERED_EVENT_NAME,\n  DRAGGED_ENTERED_ANOTHER: \"dragEnteredAnother\",\n  DRAGGED_OVER_INDEX: DRAGGED_OVER_INDEX_EVENT_NAME,\n  DRAGGED_LEFT: DRAGGED_LEFT_EVENT_NAME,\n  DRAGGED_LEFT_ALL: \"draggedLeftAll\",\n  DROPPED_INTO_ZONE: \"droppedIntoZone\",\n  DROPPED_INTO_ANOTHER: \"droppedIntoAnother\",\n  DROPPED_OUTSIDE_OF_ANY: \"droppedOutsideOfAny\",\n  DRAG_STOPPED: \"dragStopped\"\n};\nvar SOURCES = {\n  POINTER: \"pointer\",\n  KEYBOARD: \"keyboard\"\n};\nvar SHADOW_ITEM_MARKER_PROPERTY_NAME = \"isDndShadowItem\";\nvar SHADOW_ELEMENT_ATTRIBUTE_NAME = \"data-is-dnd-shadow-item-internal\";\nvar SHADOW_ELEMENT_HINT_ATTRIBUTE_NAME = \"data-is-dnd-shadow-item-hint\";\nvar SHADOW_PLACEHOLDER_ITEM_ID = \"id:dnd-shadow-placeholder-0000\";\nvar DRAGGED_ELEMENT_ID = \"dnd-action-dragged-el\";\nvar ITEM_ID_KEY = \"id\";\nvar activeDndZoneCount = 0;\nfunction incrementActiveDropZoneCount() {\n  activeDndZoneCount++;\n}\nfunction decrementActiveDropZoneCount() {\n  if (activeDndZoneCount === 0) {\n    throw new Error(\"Bug! trying to decrement when there are no dropzones\");\n  }\n  activeDndZoneCount--;\n}\n\n/**\n * Allows using another key instead of \"id\" in the items data. This is global and applies to all dndzones.\n * Has to be called when there are no rendered dndzones whatsoever.\n * @param {String} newKeyName\n * @throws {Error} if it was called when there are rendered dndzones or if it is given the wrong type (not a string)\n */\nfunction overrideItemIdKeyNameBeforeInitialisingDndZones(newKeyName) {\n  if (activeDndZoneCount > 0) {\n    throw new Error(\"can only override the id key before initialising any dndzone\");\n  }\n  if (typeof newKeyName !== \"string\") {\n    throw new Error(\"item id key has to be a string\");\n  }\n  printDebug(function () {\n    return [\"overriding item id key name\", newKeyName];\n  });\n  ITEM_ID_KEY = newKeyName;\n}\nvar isOnServer = typeof window === \"undefined\";\nvar printDebug = function printDebug() {};\n\n/**\n * Allows the user to show/hide console debug output\n * * @param {boolean} isDebug\n */\nfunction setDebugMode(isDebug) {\n  if (isDebug) {\n    printDebug = function printDebug(generateMessage) {\n      var logFunction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : console.debug;\n      var message = generateMessage();\n      if (Array.isArray(message)) {\n        logFunction.apply(void 0, _toConsumableArray(message));\n      } else {\n        logFunction(message);\n      }\n    };\n  } else {\n    printDebug = function printDebug() {};\n  }\n}\n\n// This is based off https://stackoverflow.com/questions/27745438/how-to-compute-getboundingclientrect-without-considering-transforms/57876601#57876601\n// It removes the transforms that are potentially applied by the flip animations\n/**\n * Gets the bounding rect but removes transforms (ex: flip animation)\n * @param {HTMLElement} el\n * @param {boolean} [onlyVisible] - use the visible rect defaults to true\n * @return {{top: number, left: number, bottom: number, right: number}}\n */\nfunction getBoundingRectNoTransforms(el) {\n  var onlyVisible = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var ta;\n  var rect = onlyVisible ? getVisibleRectRecursive(el) : el.getBoundingClientRect();\n  var style = getComputedStyle(el);\n  var tx = style.transform;\n  if (tx) {\n    var sx, sy, dx, dy;\n    if (tx.startsWith(\"matrix3d(\")) {\n      ta = tx.slice(9, -1).split(/, /);\n      sx = +ta[0];\n      sy = +ta[5];\n      dx = +ta[12];\n      dy = +ta[13];\n    } else if (tx.startsWith(\"matrix(\")) {\n      ta = tx.slice(7, -1).split(/, /);\n      sx = +ta[0];\n      sy = +ta[3];\n      dx = +ta[4];\n      dy = +ta[5];\n    } else {\n      return rect;\n    }\n    var to = style.transformOrigin;\n    var x = rect.x - dx - (1 - sx) * parseFloat(to);\n    var y = rect.y - dy - (1 - sy) * parseFloat(to.slice(to.indexOf(\" \") + 1));\n    var w = sx ? rect.width / sx : el.offsetWidth;\n    var h = sy ? rect.height / sy : el.offsetHeight;\n    return {\n      x: x,\n      y: y,\n      width: w,\n      height: h,\n      top: y,\n      right: x + w,\n      bottom: y + h,\n      left: x\n    };\n  } else {\n    return rect;\n  }\n}\n\n/**\n * Gets the absolute bounding rect (accounts for the window's scroll position and removes transforms)\n * @param {HTMLElement} el\n * @return {{top: number, left: number, bottom: number, right: number}}\n */\nfunction getAbsoluteRectNoTransforms(el) {\n  var rect = getBoundingRectNoTransforms(el);\n  return {\n    top: rect.top + window.scrollY,\n    bottom: rect.bottom + window.scrollY,\n    left: rect.left + window.scrollX,\n    right: rect.right + window.scrollX\n  };\n}\n\n/**\n * Gets the absolute bounding rect (accounts for the window's scroll position)\n * @param {HTMLElement} el\n * @return {{top: number, left: number, bottom: number, right: number}}\n */\nfunction getAbsoluteRect(el) {\n  var rect = el.getBoundingClientRect();\n  return {\n    top: rect.top + window.scrollY,\n    bottom: rect.bottom + window.scrollY,\n    left: rect.left + window.scrollX,\n    right: rect.right + window.scrollX\n  };\n}\n\n/**\n * finds the center :)\n * @typedef {Object} Rect\n * @property {number} top\n * @property {number} bottom\n * @property {number} left\n * @property {number} right\n * @param {Rect} rect\n * @return {{x: number, y: number}}\n */\nfunction findCenter(rect) {\n  return {\n    x: (rect.left + rect.right) / 2,\n    y: (rect.top + rect.bottom) / 2\n  };\n}\n\n/**\n * @typedef {Object} Point\n * @property {number} x\n * @property {number} y\n * @param {Point} pointA\n * @param {Point} pointB\n * @return {number}\n */\nfunction calcDistance(pointA, pointB) {\n  return Math.sqrt(Math.pow(pointA.x - pointB.x, 2) + Math.pow(pointA.y - pointB.y, 2));\n}\n\n/**\n * @param {Point} point\n * @param {Rect} rect\n * @return {boolean|boolean}\n */\nfunction isPointInsideRect(point, rect) {\n  return point.y <= rect.bottom && point.y >= rect.top && point.x >= rect.left && point.x <= rect.right;\n}\n\n/**\n * find the absolute coordinates of the center of a dom element\n * @param el {HTMLElement}\n * @returns {{x: number, y: number}}\n */\nfunction findCenterOfElement(el) {\n  return findCenter(getAbsoluteRect(el));\n}\n\n/**\n * @param {HTMLElement} elA\n * @param {HTMLElement} elB\n * @return {boolean}\n */\nfunction isCenterOfAInsideB(elA, elB) {\n  var centerOfA = findCenterOfElement(elA);\n  var rectOfB = getAbsoluteRectNoTransforms(elB);\n  return isPointInsideRect(centerOfA, rectOfB);\n}\n\n/**\n * @param {HTMLElement|ChildNode} elA\n * @param {HTMLElement|ChildNode} elB\n * @return {number}\n */\nfunction calcDistanceBetweenCenters(elA, elB) {\n  var centerOfA = findCenterOfElement(elA);\n  var centerOfB = findCenterOfElement(elB);\n  return calcDistance(centerOfA, centerOfB);\n}\n\n/**\n * @param {HTMLElement} el - the element to check\n * @returns {boolean} - true if the element in its entirety is off-screen including the scrollable area (the normal dom events look at the mouse rather than the element)\n */\nfunction isElementOffDocument(el) {\n  var rect = getAbsoluteRect(el);\n  return rect.right < 0 || rect.left > document.documentElement.scrollWidth || rect.bottom < 0 || rect.top > document.documentElement.scrollHeight;\n}\n\n/**\n * Computes the portion of an element that is actually visible inside its scrollable\n * ancestor containers. If the element is clipped by any scrollable ancestor (overflow: auto|scroll),\n * the returned rect is the clipped one. If it is not clipped by any scrollable ancestor but is\n * partially or fully outside the viewport, the function returns the element's full bounding rect\n * (i.e. it does NOT clip to the viewport).\n *\n * This is useful for distinguishing \"hidden because parent scrolls\" from\n * \"hidden because off-screen\".\n *\n * @param {HTMLElement} element - The DOM element to measure.\n * @returns {{top: number, bottom: number, left: number, right: number, width: number, height: number}}\n * An object describing the visible rectangle in viewport coordinates.\n */\nfunction getVisibleRectRecursive(element) {\n  // original rect of the element (can be off-screen)\n  var rect = element.getBoundingClientRect();\n\n  // this will be our \"clipped by scroll containers\" rect\n  var visibleRect = {\n    top: rect.top,\n    bottom: rect.bottom,\n    left: rect.left,\n    right: rect.right\n  };\n  var wasClippedByScrollY = false;\n  var wasClippedByScrollX = false;\n\n  // walk up and clip ONLY by scrollable ancestors\n  var parent = element.parentElement;\n  while (parent && parent !== document.body) {\n    var style = window.getComputedStyle(parent);\n    var overflowY = style.overflowY;\n    var overflowX = style.overflowX;\n    var isScrollableY = overflowY === \"scroll\" || overflowY === \"auto\";\n    var isScrollableX = overflowX === \"scroll\" || overflowX === \"auto\";\n    if (isScrollableY || isScrollableX) {\n      var parentRect = parent.getBoundingClientRect();\n      if (isScrollableY) {\n        // if we actually shrink, mark it\n        var newTop = Math.max(visibleRect.top, parentRect.top);\n        var newBottom = Math.min(visibleRect.bottom, parentRect.bottom);\n        if (newTop !== visibleRect.top || newBottom !== visibleRect.bottom) {\n          wasClippedByScrollY = true;\n        }\n        visibleRect.top = newTop;\n        visibleRect.bottom = newBottom;\n      }\n      if (isScrollableX) {\n        var newLeft = Math.max(visibleRect.left, parentRect.left);\n        var newRight = Math.min(visibleRect.right, parentRect.right);\n        if (newLeft !== visibleRect.left || newRight !== visibleRect.right) {\n          wasClippedByScrollX = true;\n        }\n        visibleRect.left = newLeft;\n        visibleRect.right = newRight;\n      }\n    }\n    parent = parent.parentElement;\n  }\n\n  // CASE 1: element was clipped by a scrollable container\n  //  return the clipped rect (this is your 500px content inside 250px scroller case)\n  if (wasClippedByScrollY || wasClippedByScrollX) {\n    return {\n      top: visibleRect.top,\n      bottom: visibleRect.bottom,\n      left: visibleRect.left,\n      right: visibleRect.right,\n      width: Math.max(0, visibleRect.right - visibleRect.left),\n      height: Math.max(0, visibleRect.bottom - visibleRect.top)\n    };\n  }\n\n  // CASE 2: not clipped by scroll containers\n  //  we want the elements FULL rect, even if its off-screen\n  // i.e. do NOT clip to viewport\n  return {\n    top: rect.top,\n    bottom: rect.bottom,\n    left: rect.left,\n    right: rect.right,\n    width: Math.max(0, rect.right - rect.left),\n    height: Math.max(0, rect.bottom - rect.top)\n  };\n}\n\nvar dzToShadowIndexToRect;\n\n/**\n * Resets the cache that allows for smarter \"would be index\" resolution. Should be called after every drag operation\n */\nfunction resetIndexesCache() {\n  printDebug(function () {\n    return \"resetting indexes cache\";\n  });\n  dzToShadowIndexToRect = new Map();\n}\nresetIndexesCache();\n\n/**\n * Caches the coordinates of the shadow element when it's in a certain index in a certain dropzone.\n * Helpful in order to determine \"would be index\" more effectively\n * @param {HTMLElement} dz\n * @return {number} - the shadow element index\n */\nfunction cacheShadowRect(dz) {\n  var shadowElIndex = Array.from(dz.children).findIndex(function (child) {\n    return child.getAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME);\n  });\n  if (shadowElIndex >= 0) {\n    if (!dzToShadowIndexToRect.has(dz)) {\n      dzToShadowIndexToRect.set(dz, new Map());\n    }\n    dzToShadowIndexToRect.get(dz).set(shadowElIndex, getAbsoluteRectNoTransforms(dz.children[shadowElIndex]));\n    return shadowElIndex;\n  }\n  return undefined;\n}\n\n/**\n * @typedef {Object} Index\n * @property {number} index - the would be index\n * @property {boolean} isProximityBased - false if the element is actually over the index, true if it is not over it but this index is the closest\n */\n/**\n * Find the index for the dragged element in the list it is dragged over\n * @param {HTMLElement} floatingAboveEl\n * @param {HTMLElement} collectionBelowEl\n * @returns {Index|null} -  if the element is over the container the Index object otherwise null\n */\nfunction findWouldBeIndex(floatingAboveEl, collectionBelowEl) {\n  if (!isCenterOfAInsideB(floatingAboveEl, collectionBelowEl)) {\n    return null;\n  }\n  var children = collectionBelowEl.children;\n  // the container is empty, floating element should be the first\n  if (children.length === 0) {\n    return {\n      index: 0,\n      isProximityBased: true\n    };\n  }\n  var shadowElIndex = cacheShadowRect(collectionBelowEl);\n\n  // the search could be more efficient but keeping it simple for now\n  // a possible improvement: pass in the lastIndex it was found in and check there first, then expand from there\n  for (var i = 0; i < children.length; i++) {\n    if (isCenterOfAInsideB(floatingAboveEl, children[i])) {\n      var cachedShadowRect = dzToShadowIndexToRect.has(collectionBelowEl) && dzToShadowIndexToRect.get(collectionBelowEl).get(i);\n      if (cachedShadowRect) {\n        if (!isPointInsideRect(findCenterOfElement(floatingAboveEl), cachedShadowRect)) {\n          return {\n            index: shadowElIndex,\n            isProximityBased: false\n          };\n        }\n      }\n      return {\n        index: i,\n        isProximityBased: false\n      };\n    }\n  }\n  // this can happen if there is space around the children so the floating element has\n  //entered the container but not any of the children, in this case we will find the nearest child\n  var minDistanceSoFar = Number.MAX_VALUE;\n  var indexOfMin = undefined;\n  // we are checking all of them because we don't know whether we are dealing with a horizontal or vertical container and where the floating element entered from\n  for (var _i = 0; _i < children.length; _i++) {\n    var distance = calcDistanceBetweenCenters(floatingAboveEl, children[_i]);\n    if (distance < minDistanceSoFar) {\n      minDistanceSoFar = distance;\n      indexOfMin = _i;\n    }\n  }\n\n  // -------- Phantom slot check --------\n  // Regardless of layout (simple vertical list, flex-wrap, grid, floats ) the\n  // visually closest drop target can be *after* the current last **real** child.\n  // In simple layouts the would be index from the existing children would always be the last index\n  // but in more complex layouts (flex-wrap, grid, floats ) it can be any index.\n  // The problem is we can't predict where an additional element would be rendered in the general case,\n  // We therefore create a temporary, invisible clone of that last element, let\n  // the browser position it, measure the distance, and remove it immediately\n  // (same task  no paint).  This leaves `children` back in its original state\n  // before we exit the function, so existing index-caching logic and shadow-\n  // element bookkeeping continue to work unchanged.\n  if (children.length > 0) {\n    var originalLen = children.length; // before we append the phantom\n    var template = children[originalLen - 1];\n    var phantom = template.cloneNode(false); // shallow clone is enough for size\n    phantom.style.visibility = \"hidden\";\n    phantom.style.pointerEvents = \"none\";\n    collectionBelowEl.appendChild(phantom);\n    var phantomDistance = calcDistanceBetweenCenters(floatingAboveEl, phantom);\n    if (phantomDistance < minDistanceSoFar) {\n      indexOfMin = originalLen; // index of phantom slot in original list\n    }\n\n    collectionBelowEl.removeChild(phantom);\n  }\n  return {\n    index: indexOfMin,\n    isProximityBased: true\n  };\n}\n\n/**\n * @param {Object} object\n * @return {string}\n */\nfunction toString(object) {\n  return JSON.stringify(object, null, 2);\n}\n\n/**\n * Finds the depth of the given node in the DOM tree\n * @param {HTMLElement} node\n * @return {number} - the depth of the node\n */\nfunction getDepth(node) {\n  if (!node) {\n    throw new Error(\"cannot get depth of a falsy node\");\n  }\n  return _getDepth(node, 0);\n}\nfunction _getDepth(node) {\n  var countSoFar = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  if (!node.parentElement) {\n    return countSoFar - 1;\n  }\n  return _getDepth(node.parentElement, countSoFar + 1);\n}\n\n/**\n * A simple util to shallow compare objects quickly, it doesn't validate the arguments so pass objects in\n * @param {Object} objA\n * @param {Object} objB\n * @return {boolean} - true if objA and objB are shallow equal\n */\nfunction areObjectsShallowEqual(objA, objB) {\n  if (Object.keys(objA).length !== Object.keys(objB).length) {\n    return false;\n  }\n  for (var keyA in objA) {\n    if (!{}.hasOwnProperty.call(objB, keyA) || objB[keyA] !== objA[keyA]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Shallow compares two arrays\n * @param arrA\n * @param arrB\n * @return {boolean} - whether the arrays are shallow equal\n */\nfunction areArraysShallowEqualSameOrder(arrA, arrB) {\n  if (arrA.length !== arrB.length) {\n    return false;\n  }\n  for (var i = 0; i < arrA.length; i++) {\n    if (arrA[i] !== arrB[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nvar INTERVAL_MS = 200;\nvar TOLERANCE_PX = 10;\nvar next;\n\n/**\n * Tracks the dragged elements and performs the side effects when it is dragged over a drop zone (basically dispatching custom-events scrolling)\n * @param {Set<HTMLElement>} dropZones\n * @param {HTMLElement} draggedEl\n * @param {number} [intervalMs = INTERVAL_MS]\n * @param {MultiScroller} multiScroller\n */\nfunction observe(draggedEl, dropZones) {\n  var intervalMs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : INTERVAL_MS;\n  var multiScroller = arguments.length > 3 ? arguments[3] : undefined;\n  // initialization\n  var lastDropZoneFound;\n  var lastIndexFound;\n  var lastIsDraggedInADropZone = false;\n  var lastCentrePositionOfDragged;\n  // We are sorting to make sure that in case of nested zones of the same type the one \"on top\" is considered first\n  var dropZonesFromDeepToShallow = Array.from(dropZones).sort(function (dz1, dz2) {\n    return getDepth(dz2) - getDepth(dz1);\n  });\n\n  /**\n   * The main function in this module. Tracks where everything is/ should be a take the actions\n   */\n  function andNow() {\n    var currentCenterOfDragged = findCenterOfElement(draggedEl);\n    var scrolled = multiScroller.multiScrollIfNeeded();\n    // we only want to make a new decision after the element was moved a bit to prevent flickering\n    if (!scrolled && lastCentrePositionOfDragged && Math.abs(lastCentrePositionOfDragged.x - currentCenterOfDragged.x) < TOLERANCE_PX && Math.abs(lastCentrePositionOfDragged.y - currentCenterOfDragged.y) < TOLERANCE_PX) {\n      next = window.setTimeout(andNow, intervalMs);\n      return;\n    }\n    if (isElementOffDocument(draggedEl)) {\n      printDebug(function () {\n        return \"off document\";\n      });\n      dispatchDraggedLeftDocument(draggedEl);\n      return;\n    }\n    lastCentrePositionOfDragged = currentCenterOfDragged;\n    // this is a simple algorithm, potential improvement: first look at lastDropZoneFound\n    var isDraggedInADropZone = false;\n    var _iterator = _createForOfIteratorHelper(dropZonesFromDeepToShallow),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var dz = _step.value;\n        if (scrolled) resetIndexesCache();\n        var indexObj = findWouldBeIndex(draggedEl, dz);\n        if (indexObj === null) {\n          // it is not inside\n          continue;\n        }\n        var index = indexObj.index;\n        isDraggedInADropZone = true;\n        // the element is over a container\n        if (dz !== lastDropZoneFound) {\n          lastDropZoneFound && dispatchDraggedElementLeftContainerForAnother(lastDropZoneFound, draggedEl, dz);\n          dispatchDraggedElementEnteredContainer(dz, indexObj, draggedEl);\n          lastDropZoneFound = dz;\n        } else if (index !== lastIndexFound) {\n          dispatchDraggedElementIsOverIndex(dz, indexObj, draggedEl);\n          lastIndexFound = index;\n        }\n        // we handle looping with the 'continue' statement above\n        break;\n      }\n      // the first time the dragged element is not in any dropzone we need to notify the last dropzone it was in\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    if (!isDraggedInADropZone && lastIsDraggedInADropZone && lastDropZoneFound) {\n      dispatchDraggedElementLeftContainerForNone(lastDropZoneFound, draggedEl);\n      lastDropZoneFound = undefined;\n      lastIndexFound = undefined;\n      lastIsDraggedInADropZone = false;\n    } else {\n      lastIsDraggedInADropZone = true;\n    }\n    next = window.setTimeout(andNow, intervalMs);\n  }\n  andNow();\n}\n\n// assumption - we can only observe one dragged element at a time, this could be changed in the future\nfunction unobserve() {\n  printDebug(function () {\n    return \"unobserving\";\n  });\n  clearTimeout(next);\n  resetIndexesCache();\n}\n\nvar SCROLL_ZONE_PX = 30;\n\n/**\n * Will make a scroller that can scroll any element given to it in any direction\n * @returns {{scrollIfNeeded: function(Point, HTMLElement): boolean, resetScrolling: function(void):void}}\n */\nfunction makeScroller() {\n  var scrollingInfo;\n  function resetScrolling() {\n    scrollingInfo = {\n      directionObj: undefined,\n      stepPx: 0\n    };\n  }\n  resetScrolling();\n  // directionObj {x: 0|1|-1, y:0|1|-1} - 1 means down in y and right in x\n  function scrollContainer(containerEl) {\n    var _scrollingInfo = scrollingInfo,\n      directionObj = _scrollingInfo.directionObj,\n      stepPx = _scrollingInfo.stepPx;\n    if (directionObj) {\n      containerEl.scrollBy(directionObj.x * stepPx, directionObj.y * stepPx);\n      window.requestAnimationFrame(function () {\n        return scrollContainer(containerEl);\n      });\n    }\n  }\n  function calcScrollStepPx(distancePx) {\n    return SCROLL_ZONE_PX - distancePx;\n  }\n\n  /**\n   * @param {Point} pointer - the pointer will be used to decide in which direction to scroll\n   * @param {HTMLElement} elementToScroll - the scroll container\n   * If the pointer is next to the sides of the element to scroll, will trigger scrolling\n   * Can be called repeatedly with updated pointer and elementToScroll values without issues\n   * @return {boolean} - true if scrolling was needed\n   */\n  function scrollIfNeeded(pointer, elementToScroll) {\n    if (!elementToScroll) {\n      return false;\n    }\n    var distances = calcInnerDistancesBetweenPointAndSidesOfElement(pointer, elementToScroll);\n    var isAlreadyScrolling = !!scrollingInfo.directionObj;\n    if (distances === null) {\n      if (isAlreadyScrolling) resetScrolling();\n      return false;\n    }\n    var scrollingVertically = false,\n      scrollingHorizontally = false;\n    // vertical\n    if (elementToScroll.scrollHeight > elementToScroll.clientHeight) {\n      if (distances.bottom < SCROLL_ZONE_PX) {\n        scrollingVertically = true;\n        scrollingInfo.directionObj = {\n          x: 0,\n          y: 1\n        };\n        scrollingInfo.stepPx = calcScrollStepPx(distances.bottom);\n      } else if (distances.top < SCROLL_ZONE_PX) {\n        scrollingVertically = true;\n        scrollingInfo.directionObj = {\n          x: 0,\n          y: -1\n        };\n        scrollingInfo.stepPx = calcScrollStepPx(distances.top);\n      }\n      if (!isAlreadyScrolling && scrollingVertically) {\n        scrollContainer(elementToScroll);\n        return true;\n      }\n    }\n    // horizontal\n    if (elementToScroll.scrollWidth > elementToScroll.clientWidth) {\n      if (distances.right < SCROLL_ZONE_PX) {\n        scrollingHorizontally = true;\n        scrollingInfo.directionObj = {\n          x: 1,\n          y: 0\n        };\n        scrollingInfo.stepPx = calcScrollStepPx(distances.right);\n      } else if (distances.left < SCROLL_ZONE_PX) {\n        scrollingHorizontally = true;\n        scrollingInfo.directionObj = {\n          x: -1,\n          y: 0\n        };\n        scrollingInfo.stepPx = calcScrollStepPx(distances.left);\n      }\n      if (!isAlreadyScrolling && scrollingHorizontally) {\n        scrollContainer(elementToScroll);\n        return true;\n      }\n    }\n    resetScrolling();\n    return false;\n  }\n  return {\n    scrollIfNeeded: scrollIfNeeded,\n    resetScrolling: resetScrolling\n  };\n}\n\n/**\n * If the point is inside the element returns its distances from the sides, otherwise returns null\n * @param {Point} point\n * @param {HTMLElement} el\n * @return {null|{top: number, left: number, bottom: number, right: number}}\n */\nfunction calcInnerDistancesBetweenPointAndSidesOfElement(point, el) {\n  // Even if the scrolling element is small it acts as a scroller for the viewport\n  var rect = el === document.scrollingElement ? {\n    top: 0,\n    bottom: window.innerHeight,\n    left: 0,\n    right: window.innerWidth\n  } : el.getBoundingClientRect();\n  if (!isPointInsideRect(point, rect)) {\n    return null;\n  }\n  return {\n    top: point.y - rect.top,\n    bottom: rect.bottom - point.y,\n    left: point.x - rect.left,\n    right: rect.right - point.x\n  };\n}\n\n/**\n @typedef {Object} MultiScroller\n @property {function():boolean} multiScrollIfNeeded - call this on every \"tick\" to scroll containers if needed, returns true if anything was scrolled\n/**\n * Creates a scroller than can scroll any of the provided containers or any of their scrollable parents (including the document's scrolling element)\n * @param {HTMLElement[]} baseElementsForScrolling\n * @param {function():Point} getPointerPosition\n * @return {MultiScroller}\n */\nfunction createMultiScroller() {\n  var baseElementsForScrolling = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var getPointerPosition = arguments.length > 1 ? arguments[1] : undefined;\n  printDebug(function () {\n    return \"creating multi-scroller\";\n  });\n  var scrollingContainersSet = findRelevantScrollContainers(baseElementsForScrolling);\n  var scrollingContainersDeepToShallow = Array.from(scrollingContainersSet).sort(function (dz1, dz2) {\n    return getDepth(dz2) - getDepth(dz1);\n  });\n  var _makeScroller = makeScroller(),\n    scrollIfNeeded = _makeScroller.scrollIfNeeded,\n    resetScrolling = _makeScroller.resetScrolling;\n\n  /**\n   * @return {boolean} - was any container scrolled\n   */\n  function tick() {\n    var mousePosition = getPointerPosition();\n    if (!mousePosition || !scrollingContainersDeepToShallow) {\n      return false;\n    }\n    var scrollContainersUnderCursor = scrollingContainersDeepToShallow.filter(function (el) {\n      return isPointInsideRect(mousePosition, el.getBoundingClientRect()) || el === document.scrollingElement;\n    });\n    for (var i = 0; i < scrollContainersUnderCursor.length; i++) {\n      var scrolled = scrollIfNeeded(mousePosition, scrollContainersUnderCursor[i]);\n      if (scrolled) {\n        return true;\n      }\n    }\n    return false;\n  }\n  return {\n    multiScrollIfNeeded: scrollingContainersSet.size > 0 ? tick : function () {\n      return false;\n    },\n    destroy: function destroy() {\n      return resetScrolling();\n    }\n  };\n}\n\n// internal utils\nfunction findScrollableParents(element) {\n  if (!element) {\n    return [];\n  }\n  var scrollableContainers = [];\n  var parent = element;\n  while (parent) {\n    var _window$getComputedSt = window.getComputedStyle(parent),\n      overflow = _window$getComputedSt.overflow;\n    if (overflow.split(\" \").some(function (o) {\n      return o.includes(\"auto\") || o.includes(\"scroll\");\n    })) {\n      scrollableContainers.push(parent);\n    }\n    parent = parent.parentElement;\n  }\n  return scrollableContainers;\n}\nfunction findRelevantScrollContainers(dropZones) {\n  var scrollingContainers = new Set();\n  var _iterator = _createForOfIteratorHelper(dropZones),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var dz = _step.value;\n      findScrollableParents(dz).forEach(function (container) {\n        return scrollingContainers.add(container);\n      });\n    }\n    // The scrolling element might have overflow visible and still be scrollable\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  if (document.scrollingElement.scrollHeight > document.scrollingElement.clientHeight || document.scrollingElement.scrollWidth > document.scrollingElement.clientHeight) {\n    scrollingContainers.add(document.scrollingElement);\n  }\n  return scrollingContainers;\n}\n\n/**\n * Fixes svelte issue when cloning node containing (or being) <select> which will loose it's value.\n * Since svelte manages select value internally.\n * @see https://github.com/sveltejs/svelte/issues/6717\n * @see https://github.com/isaacHagoel/svelte-dnd-action/issues/306\n *\n * @param {HTMLElement} el\n * @returns\n */\nfunction svelteNodeClone(el) {\n  var cloned = el.cloneNode(true);\n  var values = [];\n  var elIsSelect = el.tagName === \"SELECT\";\n  var selects = elIsSelect ? [el] : _toConsumableArray(el.querySelectorAll(\"select\"));\n  var _iterator = _createForOfIteratorHelper(selects),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _select = _step.value;\n      values.push(_select.value);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  if (selects.length > 0) {\n    var clonedSelects = elIsSelect ? [cloned] : _toConsumableArray(cloned.querySelectorAll(\"select\"));\n    for (var i = 0; i < clonedSelects.length; i++) {\n      var select = clonedSelects[i];\n      var value = values[i];\n      var optionEl = select.querySelector(\"option[value=\\\"\".concat(value, \"\\\"\"));\n      if (optionEl) {\n        optionEl.setAttribute(\"selected\", true);\n      }\n    }\n  }\n  var elIsCanvas = el.tagName === \"CANVAS\";\n  var canvases = elIsCanvas ? [el] : _toConsumableArray(el.querySelectorAll(\"canvas\"));\n  if (canvases.length > 0) {\n    var clonedCanvases = elIsCanvas ? [cloned] : _toConsumableArray(cloned.querySelectorAll(\"canvas\"));\n    for (var _i = 0; _i < clonedCanvases.length; _i++) {\n      var canvas = canvases[_i];\n      var clonedCanvas = clonedCanvases[_i];\n      clonedCanvas.width = canvas.width;\n      clonedCanvas.height = canvas.height;\n      if (canvas.width > 0 && canvas.height > 0) {\n        clonedCanvas.getContext(\"2d\").drawImage(canvas, 0, 0);\n      }\n    }\n  }\n  return cloned;\n}\n\n/**\n * @type {{USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT: string}}\n */\nvar FEATURE_FLAG_NAMES = Object.freeze({\n  // This flag exists as a workaround for issue 454 (basically a browser bug) - seems like these rect values take time to update when in grid layout. Setting it to true can cause strange behaviour in the REPL for non-grid zones, see issue 470\n  USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT: \"USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT\"\n});\nvar featureFlagsMap = _defineProperty({}, FEATURE_FLAG_NAMES.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT, false);\n\n/**\n * @param {FEATURE_FLAG_NAMES} flagName\n * @param {boolean} flagValue\n */\nfunction setFeatureFlag(flagName, flagValue) {\n  if (!FEATURE_FLAG_NAMES[flagName]) throw new Error(\"Can't set non existing feature flag \".concat(flagName, \"! Supported flags: \").concat(Object.keys(FEATURE_FLAG_NAMES)));\n  featureFlagsMap[flagName] = !!flagValue;\n}\n\n/**\n *\n * @param {FEATURE_FLAG_NAMES} flagName\n * @return {boolean}\n */\nfunction getFeatureFlag(flagName) {\n  if (!FEATURE_FLAG_NAMES[flagName]) throw new Error(\"Can't get non existing feature flag \".concat(flagName, \"! Supported flags: \").concat(Object.keys(FEATURE_FLAG_NAMES)));\n  return featureFlagsMap[flagName];\n}\n\nvar TRANSITION_DURATION_SECONDS = 0.2;\n\n/**\n * private helper function - creates a transition string for a property\n * @param {string} property\n * @return {string} - the transition string\n */\nfunction trs(property) {\n  return \"\".concat(property, \" \").concat(TRANSITION_DURATION_SECONDS, \"s ease\");\n}\n/**\n * clones the given element and applies proper styles and transitions to the dragged element\n * @param {HTMLElement} originalElement\n * @param {Point} [positionCenterOnXY]\n * @return {Node} - the cloned, styled element\n */\nfunction createDraggedElementFrom(originalElement, positionCenterOnXY) {\n  var rect = originalElement.getBoundingClientRect();\n  var draggedEl = svelteNodeClone(originalElement);\n  copyStylesFromTo(originalElement, draggedEl);\n  draggedEl.id = DRAGGED_ELEMENT_ID;\n  draggedEl.style.position = \"fixed\";\n  var elTopPx = rect.top;\n  var elLeftPx = rect.left;\n  draggedEl.style.top = \"\".concat(elTopPx, \"px\");\n  draggedEl.style.left = \"\".concat(elLeftPx, \"px\");\n  if (positionCenterOnXY) {\n    var center = findCenter(rect);\n    elTopPx -= center.y - positionCenterOnXY.y;\n    elLeftPx -= center.x - positionCenterOnXY.x;\n    window.setTimeout(function () {\n      draggedEl.style.top = \"\".concat(elTopPx, \"px\");\n      draggedEl.style.left = \"\".concat(elLeftPx, \"px\");\n    }, 0);\n  }\n  draggedEl.style.margin = \"0\";\n  // we can't have relative or automatic height and width or it will break the illusion\n  draggedEl.style.boxSizing = \"border-box\";\n  draggedEl.style.height = \"\".concat(rect.height, \"px\");\n  draggedEl.style.width = \"\".concat(rect.width, \"px\");\n  draggedEl.style.transition = \"\".concat(trs(\"top\"), \", \").concat(trs(\"left\"), \", \").concat(trs(\"background-color\"), \", \").concat(trs(\"opacity\"), \", \").concat(trs(\"color\"), \" \");\n  // this is a workaround for a strange browser bug that causes the right border to disappear when all the transitions are added at the same time\n  window.setTimeout(function () {\n    return draggedEl.style.transition += \", \".concat(trs(\"width\"), \", \").concat(trs(\"height\"));\n  }, 0);\n  draggedEl.style.zIndex = \"9999\";\n  draggedEl.style.cursor = \"grabbing\";\n  return draggedEl;\n}\n\n/**\n * styles the dragged element to a 'dropped' state\n * @param {HTMLElement} draggedEl\n */\nfunction moveDraggedElementToWasDroppedState(draggedEl) {\n  draggedEl.style.cursor = \"grab\";\n}\n\n/**\n * Morphs the dragged element style, maintains the mouse pointer within the element\n * @param {HTMLElement} draggedEl\n * @param {HTMLElement} copyFromEl - the element the dragged element should look like, typically the shadow element\n * @param {number} currentMouseX\n * @param {number} currentMouseY\n */\nfunction morphDraggedElementToBeLike(draggedEl, copyFromEl, currentMouseX, currentMouseY) {\n  copyStylesFromTo(copyFromEl, draggedEl);\n  var newRect = copyFromEl.getBoundingClientRect();\n  var draggedElRect = draggedEl.getBoundingClientRect();\n  var widthChange = newRect.width - draggedElRect.width;\n  var heightChange = newRect.height - draggedElRect.height;\n  if (widthChange || heightChange) {\n    var relativeDistanceOfMousePointerFromDraggedSides = {\n      left: (currentMouseX - draggedElRect.left) / draggedElRect.width,\n      top: (currentMouseY - draggedElRect.top) / draggedElRect.height\n    };\n    if (!getFeatureFlag(FEATURE_FLAG_NAMES.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT)) {\n      draggedEl.style.height = \"\".concat(newRect.height, \"px\");\n      draggedEl.style.width = \"\".concat(newRect.width, \"px\");\n    }\n    draggedEl.style.left = \"\".concat(parseFloat(draggedEl.style.left) - relativeDistanceOfMousePointerFromDraggedSides.left * widthChange, \"px\");\n    draggedEl.style.top = \"\".concat(parseFloat(draggedEl.style.top) - relativeDistanceOfMousePointerFromDraggedSides.top * heightChange, \"px\");\n  }\n}\n\n/**\n * @param {HTMLElement} copyFromEl\n * @param {HTMLElement} copyToEl\n */\nfunction copyStylesFromTo(copyFromEl, copyToEl) {\n  var computedStyle = window.getComputedStyle(copyFromEl);\n  Array.from(computedStyle).filter(function (s) {\n    return s.startsWith(\"background\") || s.startsWith(\"padding\") || s.startsWith(\"font\") || s.startsWith(\"text\") || s.startsWith(\"align\") || s.startsWith(\"justify\") || s.startsWith(\"display\") || s.startsWith(\"flex\") || s.startsWith(\"border\") || s === \"opacity\" || s === \"color\" || s === \"list-style-type\" ||\n    // copying with and height to make up for rect update timing issues in some browsers\n    getFeatureFlag(FEATURE_FLAG_NAMES.USE_COMPUTED_STYLE_INSTEAD_OF_BOUNDING_RECT) && (s === \"width\" || s === \"height\");\n  }).forEach(function (s) {\n    return copyToEl.style.setProperty(s, computedStyle.getPropertyValue(s), computedStyle.getPropertyPriority(s));\n  });\n}\n\n/**\n * makes the element compatible with being draggable\n * @param {HTMLElement} draggableEl\n * @param {boolean} dragDisabled\n */\nfunction styleDraggable(draggableEl, dragDisabled) {\n  draggableEl.draggable = false;\n  draggableEl.ondragstart = function () {\n    return false;\n  };\n  if (!dragDisabled) {\n    draggableEl.style.userSelect = \"none\";\n    draggableEl.style.WebkitUserSelect = \"none\";\n    draggableEl.style.cursor = \"grab\";\n  } else {\n    draggableEl.style.userSelect = \"\";\n    draggableEl.style.WebkitUserSelect = \"\";\n    draggableEl.style.cursor = \"\";\n  }\n}\n\n/**\n * Hides the provided element so that it can stay in the dom without interrupting\n * @param {HTMLElement} dragTarget\n */\nfunction hideElement(dragTarget) {\n  dragTarget.style.display = \"none\";\n  dragTarget.style.position = \"fixed\";\n  dragTarget.style.zIndex = \"-5\";\n}\n\n/**\n * styles the shadow element\n * @param {HTMLElement} shadowEl\n */\nfunction decorateShadowEl(shadowEl) {\n  shadowEl.style.visibility = \"hidden\";\n  shadowEl.setAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME, \"true\");\n}\n\n/**\n * undo the styles the shadow element\n * @param {HTMLElement} shadowEl\n */\nfunction unDecorateShadowElement(shadowEl) {\n  shadowEl.style.visibility = \"\";\n  shadowEl.removeAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME);\n}\n\n/**\n * will mark the given dropzones as visually active\n * @param {Array<HTMLElement>} dropZones\n * @param {Function} getStyles - maps a dropzone to a styles object (so the styles can be removed)\n * @param {Function} getClasses - maps a dropzone to a classList\n */\nfunction styleActiveDropZones(dropZones) {\n  var getStyles = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n  var getClasses = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {\n    return [];\n  };\n  dropZones.forEach(function (dz) {\n    var styles = getStyles(dz);\n    Object.keys(styles).forEach(function (style) {\n      dz.style[style] = styles[style];\n    });\n    getClasses(dz).forEach(function (c) {\n      return dz.classList.add(c);\n    });\n  });\n}\n\n/**\n * will remove the 'active' styling from given dropzones\n * @param {Array<HTMLElement>} dropZones\n * @param {Function} getStyles - maps a dropzone to a styles object\n * @param {Function} getClasses - maps a dropzone to a classList\n */\nfunction styleInactiveDropZones(dropZones) {\n  var getStyles = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n  var getClasses = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {\n    return [];\n  };\n  dropZones.forEach(function (dz) {\n    var styles = getStyles(dz);\n    Object.keys(styles).forEach(function (style) {\n      dz.style[style] = \"\";\n    });\n    getClasses(dz).forEach(function (c) {\n      return dz.classList.contains(c) && dz.classList.remove(c);\n    });\n  });\n}\n\n/**\n * will prevent the provided element from shrinking by setting its minWidth and minHeight to the current width and height values\n * @param {HTMLElement} el\n * @return {function(): void} - run this function to undo the operation and restore the original values\n */\nfunction preventShrinking(el) {\n  var originalMinHeight = el.style.minHeight;\n  el.style.minHeight = window.getComputedStyle(el).getPropertyValue(\"height\");\n  var originalMinWidth = el.style.minWidth;\n  el.style.minWidth = window.getComputedStyle(el).getPropertyValue(\"width\");\n  return function undo() {\n    el.style.minHeight = originalMinHeight;\n    el.style.minWidth = originalMinWidth;\n  };\n}\n\nvar DEFAULT_DROP_ZONE_TYPE$1 = \"--any--\";\nvar MIN_OBSERVATION_INTERVAL_MS = 100;\nvar DISABLED_OBSERVATION_INTERVAL_MS = 20;\nvar MIN_MOVEMENT_BEFORE_DRAG_START_PX = 3;\nvar DEFAULT_TOUCH_DELAY_MS = 80;\nvar DEFAULT_DROP_TARGET_STYLE$1 = {\n  outline: \"rgba(255, 255, 102, 0.7) solid 2px\"\n};\nvar ORIGINAL_DRAGGED_ITEM_MARKER_ATTRIBUTE = \"data-is-dnd-original-dragged-item\";\nvar originalDragTarget;\nvar draggedEl;\nvar draggedElData;\nvar draggedElType;\nvar originDropZone;\nvar originIndex;\nvar shadowElData;\nvar shadowElDropZone;\nvar dragStartMousePosition;\nvar currentMousePosition;\nvar isWorkingOnPreviousDrag = false;\nvar finalizingPreviousDrag = false;\nvar unlockOriginDzMinDimensions;\nvar isDraggedOutsideOfAnyDz = false;\nvar scheduledForRemovalAfterDrop = [];\nvar multiScroller;\nvar touchDragHoldTimer;\nvar touchHoldElapsed = false;\n\n// a map from type to a set of drop-zones\nvar typeToDropZones$1 = new Map();\n// important - this is needed because otherwise the config that would be used for everyone is the config of the element that created the event listeners\nvar dzToConfig$1 = new Map();\n// this is needed in order to be able to cleanup old listeners and avoid stale closures issues (as the listener is defined within each zone)\nvar elToMouseDownListener = new WeakMap();\n\n/* drop-zones registration management */\nfunction registerDropZone$1(dropZoneEl, type) {\n  printDebug(function () {\n    return \"registering drop-zone if absent\";\n  });\n  if (!typeToDropZones$1.has(type)) {\n    typeToDropZones$1.set(type, new Set());\n  }\n  if (!typeToDropZones$1.get(type).has(dropZoneEl)) {\n    typeToDropZones$1.get(type).add(dropZoneEl);\n    incrementActiveDropZoneCount();\n  }\n}\nfunction unregisterDropZone$1(dropZoneEl, type) {\n  typeToDropZones$1.get(type)[\"delete\"](dropZoneEl);\n  decrementActiveDropZoneCount();\n  if (typeToDropZones$1.get(type).size === 0) {\n    typeToDropZones$1[\"delete\"](type);\n  }\n}\n\n/* functions to manage observing the dragged element and trigger custom drag-events */\nfunction watchDraggedElement() {\n  printDebug(function () {\n    return \"watching dragged element\";\n  });\n  var dropZones = typeToDropZones$1.get(draggedElType);\n  var _iterator = _createForOfIteratorHelper(dropZones),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var dz = _step.value;\n      dz.addEventListener(DRAGGED_ENTERED_EVENT_NAME, handleDraggedEntered);\n      dz.addEventListener(DRAGGED_LEFT_EVENT_NAME, handleDraggedLeft);\n      dz.addEventListener(DRAGGED_OVER_INDEX_EVENT_NAME, handleDraggedIsOverIndex);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  window.addEventListener(DRAGGED_LEFT_DOCUMENT_EVENT_NAME, handleDrop$1);\n\n  // it is important that we don't have an interval that is faster than the flip duration because it can cause elements to jump bach and forth\n  var setIntervalMs = Math.max.apply(Math, _toConsumableArray(Array.from(dropZones.keys()).map(function (dz) {\n    return dzToConfig$1.get(dz).dropAnimationDurationMs;\n  })));\n  var observationIntervalMs = setIntervalMs === 0 ? DISABLED_OBSERVATION_INTERVAL_MS : Math.max(setIntervalMs, MIN_OBSERVATION_INTERVAL_MS); // if setIntervalMs is 0 it goes to 20, otherwise it is max between it and min observation.\n  multiScroller = createMultiScroller(dropZones, function () {\n    return currentMousePosition;\n  });\n  observe(draggedEl, dropZones, observationIntervalMs * 1.07, multiScroller);\n}\nfunction unWatchDraggedElement() {\n  printDebug(function () {\n    return \"unwatching dragged element\";\n  });\n  var dropZones = typeToDropZones$1.get(draggedElType);\n  var _iterator2 = _createForOfIteratorHelper(dropZones),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var dz = _step2.value;\n      dz.removeEventListener(DRAGGED_ENTERED_EVENT_NAME, handleDraggedEntered);\n      dz.removeEventListener(DRAGGED_LEFT_EVENT_NAME, handleDraggedLeft);\n      dz.removeEventListener(DRAGGED_OVER_INDEX_EVENT_NAME, handleDraggedIsOverIndex);\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n  window.removeEventListener(DRAGGED_LEFT_DOCUMENT_EVENT_NAME, handleDrop$1);\n  // ensuring multiScroller is not already destroyed before destroying\n  if (multiScroller) {\n    multiScroller.destroy();\n    multiScroller = undefined;\n  }\n  unobserve();\n}\nfunction findShadowElementIdx(items) {\n  return items.findIndex(function (item) {\n    return !!item[SHADOW_ITEM_MARKER_PROPERTY_NAME];\n  });\n}\nfunction createShadowElData(draggedElData) {\n  var _objectSpread2$1;\n  return _objectSpread2(_objectSpread2({}, draggedElData), {}, (_objectSpread2$1 = {}, _defineProperty(_objectSpread2$1, SHADOW_ITEM_MARKER_PROPERTY_NAME, true), _defineProperty(_objectSpread2$1, ITEM_ID_KEY, SHADOW_PLACEHOLDER_ITEM_ID), _objectSpread2$1));\n}\n\n/* custom drag-events handlers */\nfunction handleDraggedEntered(e) {\n  printDebug(function () {\n    return [\"dragged entered\", e.currentTarget, e.detail];\n  });\n  var _dzToConfig$get = dzToConfig$1.get(e.currentTarget),\n    items = _dzToConfig$get.items,\n    dropFromOthersDisabled = _dzToConfig$get.dropFromOthersDisabled;\n  if (dropFromOthersDisabled && e.currentTarget !== originDropZone) {\n    printDebug(function () {\n      return \"ignoring dragged entered because drop is currently disabled\";\n    });\n    return;\n  }\n  isDraggedOutsideOfAnyDz = false;\n  // this deals with another race condition. on some occasions (super rapid operations) the list hasn't updated yet\n  items = items.filter(function (item) {\n    return item[ITEM_ID_KEY] !== shadowElData[ITEM_ID_KEY] && item[ITEM_ID_KEY] !== SHADOW_PLACEHOLDER_ITEM_ID;\n  });\n  printDebug(function () {\n    return \"dragged entered items \".concat(toString(items));\n  });\n  if (originDropZone !== e.currentTarget) {\n    var originZoneItems = dzToConfig$1.get(originDropZone).items;\n    var newOriginZoneItems = originZoneItems.filter(function (item) {\n      return !item[SHADOW_ITEM_MARKER_PROPERTY_NAME];\n    });\n    dispatchConsiderEvent(originDropZone, newOriginZoneItems, {\n      trigger: TRIGGERS.DRAGGED_ENTERED_ANOTHER,\n      id: draggedElData[ITEM_ID_KEY],\n      source: SOURCES.POINTER\n    });\n  }\n  var shadowElIdx = e.detail.indexObj.index;\n  shadowElDropZone = e.currentTarget;\n  items.splice(shadowElIdx, 0, shadowElData);\n  dispatchConsiderEvent(e.currentTarget, items, {\n    trigger: TRIGGERS.DRAGGED_ENTERED,\n    id: draggedElData[ITEM_ID_KEY],\n    source: SOURCES.POINTER\n  });\n}\nfunction handleDraggedLeft(e) {\n  // dealing with a rare race condition on extremely rapid clicking and dropping\n  if (!isWorkingOnPreviousDrag) return;\n  printDebug(function () {\n    return [\"dragged left\", e.currentTarget, e.detail];\n  });\n  var _dzToConfig$get2 = dzToConfig$1.get(e.currentTarget),\n    originalItems = _dzToConfig$get2.items,\n    dropFromOthersDisabled = _dzToConfig$get2.dropFromOthersDisabled;\n  if (dropFromOthersDisabled && e.currentTarget !== originDropZone && e.currentTarget !== shadowElDropZone) {\n    printDebug(function () {\n      return \"drop is currently disabled\";\n    });\n    return;\n  }\n  var items = _toConsumableArray(originalItems);\n  var shadowElIdx = findShadowElementIdx(items);\n  if (shadowElIdx !== -1) {\n    items.splice(shadowElIdx, 1);\n  }\n  var origShadowDz = shadowElDropZone;\n  shadowElDropZone = undefined;\n  var _e$detail = e.detail,\n    type = _e$detail.type,\n    theOtherDz = _e$detail.theOtherDz;\n  if (type === DRAGGED_LEFT_TYPES.OUTSIDE_OF_ANY || type === DRAGGED_LEFT_TYPES.LEFT_FOR_ANOTHER && theOtherDz !== originDropZone && dzToConfig$1.get(theOtherDz).dropFromOthersDisabled) {\n    printDebug(function () {\n      return \"dragged left all, putting shadow element back in the origin dz\";\n    });\n    isDraggedOutsideOfAnyDz = true;\n    shadowElDropZone = originDropZone;\n    // if the last zone it left is the origin dz, we will put it back into items (which we just removed it from)\n    var originZoneItems = origShadowDz === originDropZone ? items : _toConsumableArray(dzToConfig$1.get(originDropZone).items);\n    originZoneItems.splice(originIndex, 0, shadowElData);\n    dispatchConsiderEvent(originDropZone, originZoneItems, {\n      trigger: TRIGGERS.DRAGGED_LEFT_ALL,\n      id: draggedElData[ITEM_ID_KEY],\n      source: SOURCES.POINTER\n    });\n  }\n  // for the origin dz, when the dragged is outside of any, this will be fired in addition to the previous. this is for simplicity\n  dispatchConsiderEvent(e.currentTarget, items, {\n    trigger: TRIGGERS.DRAGGED_LEFT,\n    id: draggedElData[ITEM_ID_KEY],\n    source: SOURCES.POINTER\n  });\n}\nfunction handleDraggedIsOverIndex(e) {\n  printDebug(function () {\n    return [\"dragged is over index\", e.currentTarget, e.detail];\n  });\n  var _dzToConfig$get3 = dzToConfig$1.get(e.currentTarget),\n    originalItems = _dzToConfig$get3.items,\n    dropFromOthersDisabled = _dzToConfig$get3.dropFromOthersDisabled;\n  if (dropFromOthersDisabled && e.currentTarget !== originDropZone) {\n    printDebug(function () {\n      return \"drop is currently disabled\";\n    });\n    return;\n  }\n  var items = _toConsumableArray(originalItems);\n  isDraggedOutsideOfAnyDz = false;\n  var index = e.detail.indexObj.index;\n  var shadowElIdx = findShadowElementIdx(items);\n  if (shadowElIdx !== -1) {\n    items.splice(shadowElIdx, 1);\n  }\n  items.splice(index, 0, shadowElData);\n  dispatchConsiderEvent(e.currentTarget, items, {\n    trigger: TRIGGERS.DRAGGED_OVER_INDEX,\n    id: draggedElData[ITEM_ID_KEY],\n    source: SOURCES.POINTER\n  });\n}\n\n// Global mouse/touch-events handlers\nfunction handleMouseMove(e) {\n  e.preventDefault();\n  var c = e.touches ? e.touches[0] : e;\n  currentMousePosition = {\n    x: c.clientX,\n    y: c.clientY\n  };\n  draggedEl.style.transform = \"translate3d(\".concat(currentMousePosition.x - dragStartMousePosition.x, \"px, \").concat(currentMousePosition.y - dragStartMousePosition.y, \"px, 0)\");\n}\nfunction handleDrop$1() {\n  printDebug(function () {\n    return \"dropped\";\n  });\n  finalizingPreviousDrag = true;\n  // cleanup\n  window.removeEventListener(\"mousemove\", handleMouseMove);\n  window.removeEventListener(\"touchmove\", handleMouseMove);\n  window.removeEventListener(\"mouseup\", handleDrop$1);\n  window.removeEventListener(\"touchend\", handleDrop$1);\n  unWatchDraggedElement();\n  moveDraggedElementToWasDroppedState(draggedEl);\n  if (!shadowElDropZone) {\n    printDebug(function () {\n      return \"element was dropped right after it left origin but before entering somewhere else\";\n    });\n    shadowElDropZone = originDropZone;\n  }\n  printDebug(function () {\n    return [\"dropped in dz\", shadowElDropZone];\n  });\n  var _dzToConfig$get4 = dzToConfig$1.get(shadowElDropZone),\n    items = _dzToConfig$get4.items,\n    type = _dzToConfig$get4.type;\n  styleInactiveDropZones(typeToDropZones$1.get(type), function (dz) {\n    return dzToConfig$1.get(dz).dropTargetStyle;\n  }, function (dz) {\n    return dzToConfig$1.get(dz).dropTargetClasses;\n  });\n  var shadowElIdx = findShadowElementIdx(items);\n  // the handler might remove the shadow element, ex: dragula like copy on drag\n  if (shadowElIdx === -1) {\n    if (shadowElDropZone === originDropZone) {\n      shadowElIdx = originIndex;\n    }\n  }\n  items = items.map(function (item) {\n    return item[SHADOW_ITEM_MARKER_PROPERTY_NAME] ? draggedElData : item;\n  });\n  function finalizeWithinZone() {\n    unlockOriginDzMinDimensions();\n    dispatchFinalizeEvent(shadowElDropZone, items, {\n      trigger: isDraggedOutsideOfAnyDz ? TRIGGERS.DROPPED_OUTSIDE_OF_ANY : TRIGGERS.DROPPED_INTO_ZONE,\n      id: draggedElData[ITEM_ID_KEY],\n      source: SOURCES.POINTER\n    });\n    if (shadowElDropZone !== originDropZone) {\n      // letting the origin drop zone know the element was permanently taken away\n      dispatchFinalizeEvent(originDropZone, dzToConfig$1.get(originDropZone).items, {\n        trigger: TRIGGERS.DROPPED_INTO_ANOTHER,\n        id: draggedElData[ITEM_ID_KEY],\n        source: SOURCES.POINTER\n      });\n    }\n    // In edge cases the dom might have not been updated yet so we can't rely on data list index\n    var domShadowEl = Array.from(shadowElDropZone.children).find(function (c) {\n      return c.getAttribute(SHADOW_ELEMENT_ATTRIBUTE_NAME);\n    });\n    if (domShadowEl) unDecorateShadowElement(domShadowEl);\n    cleanupPostDrop();\n  }\n  if (dzToConfig$1.get(shadowElDropZone).dropAnimationDisabled) {\n    finalizeWithinZone();\n  } else {\n    animateDraggedToFinalPosition(shadowElIdx, finalizeWithinZone);\n  }\n}\n\n// helper function for handleDrop\nfunction animateDraggedToFinalPosition(shadowElIdx, callback) {\n  var shadowElRect = shadowElIdx > -1 ? getBoundingRectNoTransforms(shadowElDropZone.children[shadowElIdx], false) : getBoundingRectNoTransforms(shadowElDropZone, false);\n  var newTransform = {\n    x: shadowElRect.left - parseFloat(draggedEl.style.left),\n    y: shadowElRect.top - parseFloat(draggedEl.style.top)\n  };\n  var _dzToConfig$get5 = dzToConfig$1.get(shadowElDropZone),\n    dropAnimationDurationMs = _dzToConfig$get5.dropAnimationDurationMs;\n  var transition = \"transform \".concat(dropAnimationDurationMs, \"ms ease\");\n  draggedEl.style.transition = draggedEl.style.transition ? draggedEl.style.transition + \",\" + transition : transition;\n  draggedEl.style.transform = \"translate3d(\".concat(newTransform.x, \"px, \").concat(newTransform.y, \"px, 0)\");\n  window.setTimeout(callback, dropAnimationDurationMs);\n}\nfunction scheduleDZForRemovalAfterDrop(dz, destroy) {\n  scheduledForRemovalAfterDrop.push({\n    dz: dz,\n    destroy: destroy\n  });\n  window.requestAnimationFrame(function () {\n    hideElement(dz);\n    document.body.appendChild(dz);\n  });\n}\n/* cleanup */\nfunction cleanupPostDrop() {\n  // Remove the temporary elements that were kept in the DOM during the drag\n  if (draggedEl && draggedEl.remove) {\n    draggedEl.remove();\n  }\n  if (originalDragTarget && originalDragTarget.remove) {\n    originalDragTarget.remove();\n  }\n  draggedEl = undefined;\n  originalDragTarget = undefined;\n  draggedElData = undefined;\n  draggedElType = undefined;\n  originDropZone = undefined;\n  originIndex = undefined;\n  shadowElData = undefined;\n  shadowElDropZone = undefined;\n  dragStartMousePosition = undefined;\n  currentMousePosition = undefined;\n  isWorkingOnPreviousDrag = false;\n  finalizingPreviousDrag = false;\n  unlockOriginDzMinDimensions = undefined;\n  isDraggedOutsideOfAnyDz = false;\n  if (touchDragHoldTimer) {\n    clearTimeout(touchDragHoldTimer);\n  }\n  touchDragHoldTimer = undefined;\n  touchHoldElapsed = false;\n  if (scheduledForRemovalAfterDrop.length) {\n    printDebug(function () {\n      return [\"will destroy zones that were removed during drag\", scheduledForRemovalAfterDrop];\n    });\n    scheduledForRemovalAfterDrop.forEach(function (_ref) {\n      var dz = _ref.dz,\n        destroy = _ref.destroy;\n      destroy();\n      dz.remove();\n    });\n    scheduledForRemovalAfterDrop = [];\n  }\n}\nfunction dndzone$2(node, options) {\n  var initialized = false;\n  var config = {\n    items: undefined,\n    type: undefined,\n    flipDurationMs: 0,\n    dragDisabled: false,\n    morphDisabled: false,\n    dropFromOthersDisabled: false,\n    dropTargetStyle: DEFAULT_DROP_TARGET_STYLE$1,\n    dropTargetClasses: [],\n    transformDraggedElement: function transformDraggedElement() {},\n    centreDraggedOnCursor: false,\n    dropAnimationDisabled: false,\n    delayTouchStartMs: 0\n  };\n  printDebug(function () {\n    return [\"dndzone good to go options: \".concat(toString(options), \", config: \").concat(toString(config)), {\n      node: node\n    }];\n  });\n  var elToIdx = new Map();\n  function addMaybeListeners() {\n    window.addEventListener(\"mousemove\", handleMouseMoveMaybeDragStart, {\n      passive: false\n    });\n    window.addEventListener(\"touchmove\", handleMouseMoveMaybeDragStart, {\n      passive: false,\n      capture: false\n    });\n    window.addEventListener(\"mouseup\", handleFalseAlarm, {\n      passive: false\n    });\n    window.addEventListener(\"touchend\", handleFalseAlarm, {\n      passive: false\n    });\n  }\n  function removeMaybeListeners() {\n    window.removeEventListener(\"mousemove\", handleMouseMoveMaybeDragStart);\n    window.removeEventListener(\"touchmove\", handleMouseMoveMaybeDragStart);\n    window.removeEventListener(\"mouseup\", handleFalseAlarm);\n    window.removeEventListener(\"touchend\", handleFalseAlarm);\n    if (touchDragHoldTimer) {\n      clearTimeout(touchDragHoldTimer);\n      touchDragHoldTimer = undefined;\n      touchHoldElapsed = false;\n    }\n  }\n  function handleFalseAlarm(e) {\n    removeMaybeListeners();\n    originalDragTarget = undefined;\n    dragStartMousePosition = undefined;\n    currentMousePosition = undefined;\n\n    // dragging initiated by touch events prevents onclick from initially firing\n    if (e.type === \"touchend\") {\n      var clickEvent = new Event(\"click\", {\n        bubbles: true,\n        cancelable: true\n      });\n      // doing it this way instead of calling .click() because that doesn't work for SVG elements\n      e.target.dispatchEvent(clickEvent);\n    }\n  }\n  function handleMouseMoveMaybeDragStart(e) {\n    var isTouch = !!e.touches;\n    var c = isTouch ? e.touches[0] : e;\n    // If touch drag delay is configured and not elapsed yet, allow scrolling until either\n    // the delay elapses (timer will call handleDragStart) or the user moves significantly,\n    // in which case we cancel the potential drag and let the interaction be a scroll.\n    if (isTouch && config.delayTouchStartMs > 0 && !touchHoldElapsed) {\n      currentMousePosition = {\n        x: c.clientX,\n        y: c.clientY\n      };\n      if (Math.abs(currentMousePosition.x - dragStartMousePosition.x) >= MIN_MOVEMENT_BEFORE_DRAG_START_PX || Math.abs(currentMousePosition.y - dragStartMousePosition.y) >= MIN_MOVEMENT_BEFORE_DRAG_START_PX) {\n        // User started scrolling, cancel drag attempt.\n        if (touchDragHoldTimer) {\n          clearTimeout(touchDragHoldTimer);\n          touchDragHoldTimer = undefined;\n        }\n        handleFalseAlarm(e);\n      }\n      return; // Do not preventDefault so scrolling works.\n    }\n\n    // legacy / post-delay path  block scrolling and maybe start drag\n    e.preventDefault();\n    currentMousePosition = {\n      x: c.clientX,\n      y: c.clientY\n    };\n    if (Math.abs(currentMousePosition.x - dragStartMousePosition.x) >= MIN_MOVEMENT_BEFORE_DRAG_START_PX || Math.abs(currentMousePosition.y - dragStartMousePosition.y) >= MIN_MOVEMENT_BEFORE_DRAG_START_PX) {\n      removeMaybeListeners();\n      handleDragStart();\n    }\n  }\n  function handleMouseDown(e) {\n    // on safari clicking on a select element doesn't fire mouseup at the end of the click and in general this makes more sense\n    if (e.target !== e.currentTarget && (e.target.value !== undefined || e.target.isContentEditable)) {\n      printDebug(function () {\n        return \"won't initiate drag on a nested input element\";\n      });\n      return;\n    }\n    // prevents responding to any button but left click which equals 0 (which is falsy)\n    if (e.button) {\n      printDebug(function () {\n        return \"ignoring none left click button: \".concat(e.button);\n      });\n      return;\n    }\n    if (isWorkingOnPreviousDrag) {\n      printDebug(function () {\n        return \"cannot start a new drag before finalizing previous one\";\n      });\n      return;\n    }\n    var isTouchStart = !!e.touches;\n    var useDelay = isTouchStart && config.delayTouchStartMs > 0;\n    if (!useDelay) {\n      e.preventDefault();\n    }\n    e.stopPropagation();\n    var c = isTouchStart ? e.touches[0] : e;\n    dragStartMousePosition = {\n      x: c.clientX,\n      y: c.clientY\n    };\n    currentMousePosition = _objectSpread2({}, dragStartMousePosition);\n    originalDragTarget = e.currentTarget;\n    if (useDelay) {\n      touchHoldElapsed = false;\n      touchDragHoldTimer = window.setTimeout(function () {\n        // If the finger is still down and no false-alarm happened\n        if (!originalDragTarget) return;\n        touchHoldElapsed = true;\n        removeMaybeListeners();\n        handleDragStart();\n      }, config.delayTouchStartMs);\n    }\n    addMaybeListeners();\n  }\n  function handleDragStart() {\n    printDebug(function () {\n      return [\"drag start config: \".concat(toString(config)), originalDragTarget];\n    });\n    isWorkingOnPreviousDrag = true;\n\n    // initialising globals\n    var currentIdx = elToIdx.get(originalDragTarget);\n    originIndex = currentIdx;\n    originDropZone = originalDragTarget.parentElement;\n    /** @type {ShadowRoot | HTMLDocument | Element } */\n    var rootNode = originDropZone.closest(\"dialog\") || originDropZone.closest(\"[popover]\") || originDropZone.getRootNode();\n    var originDropZoneRoot = rootNode.body || rootNode;\n    var originalItems = config.items,\n      type = config.type,\n      centreDraggedOnCursor = config.centreDraggedOnCursor;\n    var items = _toConsumableArray(originalItems);\n    draggedElData = items[currentIdx];\n    draggedElType = type;\n    shadowElData = createShadowElData(draggedElData);\n\n    // creating the draggable element\n    draggedEl = createDraggedElementFrom(originalDragTarget, centreDraggedOnCursor && currentMousePosition);\n    originDropZoneRoot.appendChild(draggedEl);\n    // We will keep the original dom node in the dom because touch events keep firing on it, we want to re-add it after the framework removes it\n    function keepOriginalElementInDom() {\n      if (!originalDragTarget.parentElement) {\n        originalDragTarget.setAttribute(ORIGINAL_DRAGGED_ITEM_MARKER_ATTRIBUTE, true);\n        originDropZoneRoot.appendChild(originalDragTarget);\n        // have to watch before we hide, otherwise Svelte 5 $state gets confused\n        watchDraggedElement();\n        hideElement(originalDragTarget);\n        // after the removal of the original element we can give the shadow element the original item id so that the host zone can find it and render it correctly if it does lookups by id\n        shadowElData[ITEM_ID_KEY] = draggedElData[ITEM_ID_KEY];\n        // to prevent the outline from disappearing\n        draggedEl.focus();\n      } else {\n        window.requestAnimationFrame(keepOriginalElementInDom);\n      }\n    }\n    window.requestAnimationFrame(keepOriginalElementInDom);\n    styleActiveDropZones(Array.from(typeToDropZones$1.get(config.type)).filter(function (dz) {\n      return dz === originDropZone || !dzToConfig$1.get(dz).dropFromOthersDisabled;\n    }), function (dz) {\n      return dzToConfig$1.get(dz).dropTargetStyle;\n    }, function (dz) {\n      return dzToConfig$1.get(dz).dropTargetClasses;\n    });\n\n    // removing the original element by removing its data entry\n    items.splice(currentIdx, 1, shadowElData);\n    unlockOriginDzMinDimensions = preventShrinking(originDropZone);\n    dispatchConsiderEvent(originDropZone, items, {\n      trigger: TRIGGERS.DRAG_STARTED,\n      id: draggedElData[ITEM_ID_KEY],\n      source: SOURCES.POINTER\n    });\n\n    // handing over to global handlers - starting to watch the element\n    window.addEventListener(\"mousemove\", handleMouseMove, {\n      passive: false\n    });\n    window.addEventListener(\"touchmove\", handleMouseMove, {\n      passive: false,\n      capture: false\n    });\n    window.addEventListener(\"mouseup\", handleDrop$1, {\n      passive: false\n    });\n    window.addEventListener(\"touchend\", handleDrop$1, {\n      passive: false\n    });\n  }\n  function configure(_ref2) {\n    var _ref2$items = _ref2.items,\n      items = _ref2$items === void 0 ? undefined : _ref2$items,\n      _ref2$flipDurationMs = _ref2.flipDurationMs,\n      dropAnimationDurationMs = _ref2$flipDurationMs === void 0 ? 0 : _ref2$flipDurationMs,\n      _ref2$type = _ref2.type,\n      newType = _ref2$type === void 0 ? DEFAULT_DROP_ZONE_TYPE$1 : _ref2$type,\n      _ref2$dragDisabled = _ref2.dragDisabled,\n      dragDisabled = _ref2$dragDisabled === void 0 ? false : _ref2$dragDisabled,\n      _ref2$morphDisabled = _ref2.morphDisabled,\n      morphDisabled = _ref2$morphDisabled === void 0 ? false : _ref2$morphDisabled,\n      _ref2$dropFromOthersD = _ref2.dropFromOthersDisabled,\n      dropFromOthersDisabled = _ref2$dropFromOthersD === void 0 ? false : _ref2$dropFromOthersD,\n      _ref2$dropTargetStyle = _ref2.dropTargetStyle,\n      dropTargetStyle = _ref2$dropTargetStyle === void 0 ? DEFAULT_DROP_TARGET_STYLE$1 : _ref2$dropTargetStyle,\n      _ref2$dropTargetClass = _ref2.dropTargetClasses,\n      dropTargetClasses = _ref2$dropTargetClass === void 0 ? [] : _ref2$dropTargetClass,\n      _ref2$transformDragge = _ref2.transformDraggedElement,\n      transformDraggedElement = _ref2$transformDragge === void 0 ? function () {} : _ref2$transformDragge,\n      _ref2$centreDraggedOn = _ref2.centreDraggedOnCursor,\n      centreDraggedOnCursor = _ref2$centreDraggedOn === void 0 ? false : _ref2$centreDraggedOn,\n      _ref2$dropAnimationDi = _ref2.dropAnimationDisabled,\n      dropAnimationDisabled = _ref2$dropAnimationDi === void 0 ? false : _ref2$dropAnimationDi,\n      _ref2$delayTouchStart = _ref2.delayTouchStart,\n      delayTouchStartOpt = _ref2$delayTouchStart === void 0 ? false : _ref2$delayTouchStart;\n    config.dropAnimationDurationMs = dropAnimationDurationMs;\n    var effectiveDelayMs = 0;\n    if (delayTouchStartOpt === true) {\n      effectiveDelayMs = DEFAULT_TOUCH_DELAY_MS;\n    } else if (typeof delayTouchStartOpt === \"number\" && isFinite(delayTouchStartOpt) && delayTouchStartOpt >= 0) {\n      effectiveDelayMs = delayTouchStartOpt;\n    }\n    config.delayTouchStartMs = effectiveDelayMs;\n    if (config.type && newType !== config.type) {\n      unregisterDropZone$1(node, config.type);\n    }\n    config.type = newType;\n    config.items = _toConsumableArray(items);\n    config.dragDisabled = dragDisabled;\n    config.morphDisabled = morphDisabled;\n    config.transformDraggedElement = transformDraggedElement;\n    config.centreDraggedOnCursor = centreDraggedOnCursor;\n    config.dropAnimationDisabled = dropAnimationDisabled;\n\n    // realtime update for dropTargetStyle\n    if (initialized && isWorkingOnPreviousDrag && !finalizingPreviousDrag && (!areObjectsShallowEqual(dropTargetStyle, config.dropTargetStyle) || !areArraysShallowEqualSameOrder(dropTargetClasses, config.dropTargetClasses))) {\n      styleInactiveDropZones([node], function () {\n        return config.dropTargetStyle;\n      }, function () {\n        return dropTargetClasses;\n      });\n      styleActiveDropZones([node], function () {\n        return dropTargetStyle;\n      }, function () {\n        return dropTargetClasses;\n      });\n    }\n    config.dropTargetStyle = dropTargetStyle;\n    config.dropTargetClasses = _toConsumableArray(dropTargetClasses);\n\n    // realtime update for dropFromOthersDisabled\n    function getConfigProp(dz, propName) {\n      return dzToConfig$1.get(dz) ? dzToConfig$1.get(dz)[propName] : config[propName];\n    }\n    if (initialized && isWorkingOnPreviousDrag && config.dropFromOthersDisabled !== dropFromOthersDisabled) {\n      if (dropFromOthersDisabled) {\n        styleInactiveDropZones([node], function (dz) {\n          return getConfigProp(dz, \"dropTargetStyle\");\n        }, function (dz) {\n          return getConfigProp(dz, \"dropTargetClasses\");\n        });\n      } else {\n        styleActiveDropZones([node], function (dz) {\n          return getConfigProp(dz, \"dropTargetStyle\");\n        }, function (dz) {\n          return getConfigProp(dz, \"dropTargetClasses\");\n        });\n      }\n    }\n    config.dropFromOthersDisabled = dropFromOthersDisabled;\n    dzToConfig$1.set(node, config);\n    registerDropZone$1(node, newType);\n    var shadowElIdx = isWorkingOnPreviousDrag ? findShadowElementIdx(config.items) : -1;\n    for (var idx = 0; idx < node.children.length; idx++) {\n      var draggableEl = node.children[idx];\n      styleDraggable(draggableEl, dragDisabled);\n      if (idx === shadowElIdx) {\n        if (!morphDisabled) {\n          morphDraggedElementToBeLike(draggedEl, draggableEl, currentMousePosition.x, currentMousePosition.y);\n        }\n        config.transformDraggedElement(draggedEl, draggedElData, idx);\n        decorateShadowEl(draggableEl);\n        continue;\n      }\n      draggableEl.removeEventListener(\"mousedown\", elToMouseDownListener.get(draggableEl));\n      draggableEl.removeEventListener(\"touchstart\", elToMouseDownListener.get(draggableEl));\n      if (!dragDisabled) {\n        draggableEl.addEventListener(\"mousedown\", handleMouseDown);\n        draggableEl.addEventListener(\"touchstart\", handleMouseDown);\n        elToMouseDownListener.set(draggableEl, handleMouseDown);\n      }\n      // updating the idx\n      elToIdx.set(draggableEl, idx);\n      if (!initialized) {\n        initialized = true;\n      }\n    }\n  }\n  configure(options);\n  return {\n    update: function update(newOptions) {\n      printDebug(function () {\n        return \"pointer dndzone will update newOptions: \".concat(toString(newOptions));\n      });\n      configure(newOptions);\n    },\n    destroy: function destroy() {\n      function destroyDz() {\n        printDebug(function () {\n          return \"pointer dndzone will destroy\";\n        });\n        unregisterDropZone$1(node, dzToConfig$1.get(node).type);\n        dzToConfig$1[\"delete\"](node);\n      }\n      if (isWorkingOnPreviousDrag && !node.closest(\"[\".concat(ORIGINAL_DRAGGED_ITEM_MARKER_ATTRIBUTE, \"]\"))) {\n        printDebug(function () {\n          return \"pointer dndzone will be scheduled for destruction\";\n        });\n        scheduleDZForRemovalAfterDrop(node, destroyDz);\n      } else {\n        destroyDz();\n      }\n    }\n  };\n}\n\nvar _ID_TO_INSTRUCTION;\nvar INSTRUCTION_IDs$1 = {\n  DND_ZONE_ACTIVE: \"dnd-zone-active\",\n  DND_ZONE_DRAG_DISABLED: \"dnd-zone-drag-disabled\"\n};\nvar ID_TO_INSTRUCTION = (_ID_TO_INSTRUCTION = {}, _defineProperty(_ID_TO_INSTRUCTION, INSTRUCTION_IDs$1.DND_ZONE_ACTIVE, \"Tab to one the items and press space-bar or enter to start dragging it\"), _defineProperty(_ID_TO_INSTRUCTION, INSTRUCTION_IDs$1.DND_ZONE_DRAG_DISABLED, \"This is a disabled drag and drop list\"), _ID_TO_INSTRUCTION);\nvar ALERT_DIV_ID = \"dnd-action-aria-alert\";\nvar alertsDiv;\nfunction initAriaOnBrowser() {\n  if (alertsDiv) {\n    // it is already initialized\n    return;\n  }\n  // setting the dynamic alerts\n  alertsDiv = document.createElement(\"div\");\n  (function initAlertsDiv() {\n    alertsDiv.id = ALERT_DIV_ID;\n    // tab index -1 makes the alert be read twice on chrome for some reason\n    //alertsDiv.tabIndex = -1;\n    alertsDiv.style.position = \"fixed\";\n    alertsDiv.style.bottom = \"0\";\n    alertsDiv.style.left = \"0\";\n    alertsDiv.style.zIndex = \"-5\";\n    alertsDiv.style.opacity = \"0\";\n    alertsDiv.style.height = \"0\";\n    alertsDiv.style.width = \"0\";\n    alertsDiv.setAttribute(\"role\", \"alert\");\n  })();\n  document.body.prepend(alertsDiv);\n\n  // setting the instructions\n  Object.entries(ID_TO_INSTRUCTION).forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      id = _ref2[0],\n      txt = _ref2[1];\n    return document.body.prepend(instructionToHiddenDiv(id, txt));\n  });\n}\n\n/**\n * Initializes the static aria instructions so they can be attached to zones\n * @return {{DND_ZONE_ACTIVE: string, DND_ZONE_DRAG_DISABLED: string} | null} - the IDs for static aria instruction (to be used via aria-describedby) or null on the server\n */\nfunction initAria() {\n  if (isOnServer) return null;\n  if (document.readyState === \"complete\") {\n    initAriaOnBrowser();\n  } else {\n    window.addEventListener(\"DOMContentLoaded\", initAriaOnBrowser);\n  }\n  return _objectSpread2({}, INSTRUCTION_IDs$1);\n}\n\n/**\n * Removes all the artifacts (dom elements) added by this module\n */\nfunction destroyAria() {\n  if (isOnServer || !alertsDiv) return;\n  Object.keys(ID_TO_INSTRUCTION).forEach(function (id) {\n    var _document$getElementB;\n    return (_document$getElementB = document.getElementById(id)) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.remove();\n  });\n  alertsDiv.remove();\n  alertsDiv = undefined;\n}\nfunction instructionToHiddenDiv(id, txt) {\n  var div = document.createElement(\"div\");\n  div.id = id;\n  div.innerHTML = \"<p>\".concat(txt, \"</p>\");\n  div.style.display = \"none\";\n  div.style.position = \"fixed\";\n  div.style.zIndex = \"-5\";\n  return div;\n}\n\n/**\n * Will make the screen reader alert the provided text to the user\n * @param {string} txt\n */\nfunction alertToScreenReader(txt) {\n  if (isOnServer) return;\n  if (!alertsDiv) {\n    initAriaOnBrowser();\n  }\n  alertsDiv.innerHTML = \"\";\n  var alertText = document.createTextNode(txt);\n  alertsDiv.appendChild(alertText);\n  // this is needed for Safari\n  alertsDiv.style.display = \"none\";\n  alertsDiv.style.display = \"inline\";\n}\n\nvar DEFAULT_DROP_ZONE_TYPE = \"--any--\";\nvar DEFAULT_DROP_TARGET_STYLE = {\n  outline: \"rgba(255, 255, 102, 0.7) solid 2px\"\n};\nvar isDragging = false;\nvar draggedItemType;\nvar focusedDz;\nvar focusedDzLabel = \"\";\nvar focusedItem;\nvar focusedItemId;\nvar focusedItemLabel = \"\";\nvar allDragTargets = new WeakSet();\nvar elToKeyDownListeners = new WeakMap();\nvar elToFocusListeners = new WeakMap();\nvar dzToHandles = new Map();\nvar dzToConfig = new Map();\nvar typeToDropZones = new Map();\n\n/* TODO (potentially)\n * what's the deal with the black border of voice-reader not following focus?\n * maybe keep focus on the last dragged item upon drop?\n */\n\nvar INSTRUCTION_IDs;\n\n/* drop-zones registration management */\nfunction registerDropZone(dropZoneEl, type) {\n  printDebug(function () {\n    return \"registering drop-zone if absent\";\n  });\n  if (typeToDropZones.size === 0) {\n    printDebug(function () {\n      return \"adding global keydown and click handlers\";\n    });\n    INSTRUCTION_IDs = initAria();\n    window.addEventListener(\"keydown\", globalKeyDownHandler);\n    window.addEventListener(\"click\", globalClickHandler);\n  }\n  if (!typeToDropZones.has(type)) {\n    typeToDropZones.set(type, new Set());\n  }\n  if (!typeToDropZones.get(type).has(dropZoneEl)) {\n    typeToDropZones.get(type).add(dropZoneEl);\n    incrementActiveDropZoneCount();\n  }\n}\nfunction unregisterDropZone(dropZoneEl, type) {\n  printDebug(function () {\n    return \"unregistering drop-zone\";\n  });\n  if (focusedDz === dropZoneEl) {\n    handleDrop();\n  }\n  typeToDropZones.get(type)[\"delete\"](dropZoneEl);\n  decrementActiveDropZoneCount();\n  if (typeToDropZones.get(type).size === 0) {\n    typeToDropZones[\"delete\"](type);\n  }\n  if (typeToDropZones.size === 0) {\n    printDebug(function () {\n      return \"removing global keydown and click handlers\";\n    });\n    window.removeEventListener(\"keydown\", globalKeyDownHandler);\n    window.removeEventListener(\"click\", globalClickHandler);\n    INSTRUCTION_IDs = undefined;\n    destroyAria();\n  }\n}\nfunction globalKeyDownHandler(e) {\n  if (!isDragging) return;\n  switch (e.key) {\n    case \"Escape\":\n      {\n        handleDrop();\n        break;\n      }\n  }\n}\nfunction globalClickHandler() {\n  if (!isDragging) return;\n  if (!allDragTargets.has(document.activeElement)) {\n    printDebug(function () {\n      return \"clicked outside of any draggable\";\n    });\n    handleDrop();\n  }\n}\nfunction handleZoneFocus(e) {\n  printDebug(function () {\n    return \"zone focus\";\n  });\n  if (!isDragging) return;\n  var newlyFocusedDz = e.currentTarget;\n  if (newlyFocusedDz === focusedDz) return;\n  focusedDzLabel = newlyFocusedDz.getAttribute(\"aria-label\") || \"\";\n  var _dzToConfig$get = dzToConfig.get(focusedDz),\n    originItems = _dzToConfig$get.items;\n  var originItem = originItems.find(function (item) {\n    return item[ITEM_ID_KEY] === focusedItemId;\n  });\n  var originIdx = originItems.indexOf(originItem);\n  var itemToMove = originItems.splice(originIdx, 1)[0];\n  var _dzToConfig$get2 = dzToConfig.get(newlyFocusedDz),\n    targetItems = _dzToConfig$get2.items,\n    autoAriaDisabled = _dzToConfig$get2.autoAriaDisabled;\n  if (newlyFocusedDz.getBoundingClientRect().top < focusedDz.getBoundingClientRect().top || newlyFocusedDz.getBoundingClientRect().left < focusedDz.getBoundingClientRect().left) {\n    targetItems.push(itemToMove);\n    if (!autoAriaDisabled) {\n      alertToScreenReader(\"Moved item \".concat(focusedItemLabel, \" to the end of the list \").concat(focusedDzLabel));\n    }\n  } else {\n    targetItems.unshift(itemToMove);\n    if (!autoAriaDisabled) {\n      alertToScreenReader(\"Moved item \".concat(focusedItemLabel, \" to the beginning of the list \").concat(focusedDzLabel));\n    }\n  }\n  var dzFrom = focusedDz;\n  dispatchFinalizeEvent(dzFrom, originItems, {\n    trigger: TRIGGERS.DROPPED_INTO_ANOTHER,\n    id: focusedItemId,\n    source: SOURCES.KEYBOARD\n  });\n  dispatchFinalizeEvent(newlyFocusedDz, targetItems, {\n    trigger: TRIGGERS.DROPPED_INTO_ZONE,\n    id: focusedItemId,\n    source: SOURCES.KEYBOARD\n  });\n  focusedDz = newlyFocusedDz;\n}\nfunction triggerAllDzsUpdate() {\n  dzToHandles.forEach(function (_ref, dz) {\n    var update = _ref.update;\n    return update(dzToConfig.get(dz));\n  });\n}\nfunction handleDrop() {\n  var dispatchConsider = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  printDebug(function () {\n    return \"drop\";\n  });\n  if (!dzToConfig.get(focusedDz).autoAriaDisabled) {\n    alertToScreenReader(\"Stopped dragging item \".concat(focusedItemLabel));\n  }\n  if (allDragTargets.has(document.activeElement)) {\n    document.activeElement.blur();\n  }\n  if (dispatchConsider) {\n    dispatchConsiderEvent(focusedDz, dzToConfig.get(focusedDz).items, {\n      trigger: TRIGGERS.DRAG_STOPPED,\n      id: focusedItemId,\n      source: SOURCES.KEYBOARD\n    });\n  }\n  styleInactiveDropZones(typeToDropZones.get(draggedItemType), function (dz) {\n    return dzToConfig.get(dz).dropTargetStyle;\n  }, function (dz) {\n    return dzToConfig.get(dz).dropTargetClasses;\n  });\n  focusedItem = null;\n  focusedItemId = null;\n  focusedItemLabel = \"\";\n  draggedItemType = null;\n  focusedDz = null;\n  focusedDzLabel = \"\";\n  isDragging = false;\n  triggerAllDzsUpdate();\n}\n//////\nfunction dndzone$1(node, options) {\n  var config = {\n    items: undefined,\n    type: undefined,\n    dragDisabled: false,\n    zoneTabIndex: 0,\n    zoneItemTabIndex: 0,\n    dropFromOthersDisabled: false,\n    dropTargetStyle: DEFAULT_DROP_TARGET_STYLE,\n    dropTargetClasses: [],\n    autoAriaDisabled: false\n  };\n  function swap(arr, i, j) {\n    if (arr.length <= 1) return;\n    arr.splice(j, 1, arr.splice(i, 1, arr[j])[0]);\n  }\n  function handleKeyDown(e) {\n    printDebug(function () {\n      return [\"handling key down\", e.key];\n    });\n    switch (e.key) {\n      case \"Enter\":\n      case \" \":\n        {\n          // we don't want to affect nested input elements or clickable elements\n          if ((e.target.disabled !== undefined || e.target.href || e.target.isContentEditable) && !allDragTargets.has(e.target)) {\n            return;\n          }\n          e.preventDefault(); // preventing scrolling on spacebar\n          e.stopPropagation();\n          if (isDragging) {\n            // TODO - should this trigger a drop? only here or in general (as in when hitting space or enter outside of any zone)?\n            handleDrop();\n          } else {\n            // drag start\n            handleDragStart(e);\n          }\n          break;\n        }\n      case \"ArrowDown\":\n      case \"ArrowRight\":\n        {\n          if (!isDragging) return;\n          e.preventDefault(); // prevent scrolling\n          e.stopPropagation();\n          var _dzToConfig$get3 = dzToConfig.get(node),\n            items = _dzToConfig$get3.items;\n          var children = Array.from(node.children);\n          var idx = children.indexOf(e.currentTarget);\n          printDebug(function () {\n            return [\"arrow down\", idx];\n          });\n          if (idx < children.length - 1) {\n            if (!config.autoAriaDisabled) {\n              alertToScreenReader(\"Moved item \".concat(focusedItemLabel, \" to position \").concat(idx + 2, \" in the list \").concat(focusedDzLabel));\n            }\n            swap(items, idx, idx + 1);\n            dispatchFinalizeEvent(node, items, {\n              trigger: TRIGGERS.DROPPED_INTO_ZONE,\n              id: focusedItemId,\n              source: SOURCES.KEYBOARD\n            });\n          }\n          break;\n        }\n      case \"ArrowUp\":\n      case \"ArrowLeft\":\n        {\n          if (!isDragging) return;\n          e.preventDefault(); // prevent scrolling\n          e.stopPropagation();\n          var _dzToConfig$get4 = dzToConfig.get(node),\n            _items = _dzToConfig$get4.items;\n          var _children = Array.from(node.children);\n          var _idx = _children.indexOf(e.currentTarget);\n          printDebug(function () {\n            return [\"arrow up\", _idx];\n          });\n          if (_idx > 0) {\n            if (!config.autoAriaDisabled) {\n              alertToScreenReader(\"Moved item \".concat(focusedItemLabel, \" to position \").concat(_idx, \" in the list \").concat(focusedDzLabel));\n            }\n            swap(_items, _idx, _idx - 1);\n            dispatchFinalizeEvent(node, _items, {\n              trigger: TRIGGERS.DROPPED_INTO_ZONE,\n              id: focusedItemId,\n              source: SOURCES.KEYBOARD\n            });\n          }\n          break;\n        }\n    }\n  }\n  function handleDragStart(e) {\n    printDebug(function () {\n      return \"drag start\";\n    });\n    setCurrentFocusedItem(e.currentTarget);\n    focusedDz = node;\n    draggedItemType = config.type;\n    isDragging = true;\n    var dropTargets = Array.from(typeToDropZones.get(config.type)).filter(function (dz) {\n      return dz === focusedDz || !dzToConfig.get(dz).dropFromOthersDisabled;\n    });\n    styleActiveDropZones(dropTargets, function (dz) {\n      return dzToConfig.get(dz).dropTargetStyle;\n    }, function (dz) {\n      return dzToConfig.get(dz).dropTargetClasses;\n    });\n    if (!config.autoAriaDisabled) {\n      var msg = \"Started dragging item \".concat(focusedItemLabel, \". Use the arrow keys to move it within its list \").concat(focusedDzLabel);\n      if (dropTargets.length > 1) {\n        msg += \", or tab to another list in order to move the item into it\";\n      }\n      alertToScreenReader(msg);\n    }\n    dispatchConsiderEvent(node, dzToConfig.get(node).items, {\n      trigger: TRIGGERS.DRAG_STARTED,\n      id: focusedItemId,\n      source: SOURCES.KEYBOARD\n    });\n    triggerAllDzsUpdate();\n  }\n  function handleClick(e) {\n    if (!isDragging) return;\n    if (e.currentTarget === focusedItem) return;\n    e.stopPropagation();\n    handleDrop(false);\n    handleDragStart(e);\n  }\n  function setCurrentFocusedItem(draggableEl) {\n    var _dzToConfig$get5 = dzToConfig.get(node),\n      items = _dzToConfig$get5.items;\n    var children = Array.from(node.children);\n    var focusedItemIdx = children.indexOf(draggableEl);\n    focusedItem = draggableEl;\n    focusedItem.tabIndex = config.zoneItemTabIndex;\n    focusedItemId = items[focusedItemIdx][ITEM_ID_KEY];\n    focusedItemLabel = children[focusedItemIdx].getAttribute(\"aria-label\") || \"\";\n  }\n  function configure(_ref2) {\n    var _ref2$items = _ref2.items,\n      items = _ref2$items === void 0 ? [] : _ref2$items,\n      _ref2$type = _ref2.type,\n      newType = _ref2$type === void 0 ? DEFAULT_DROP_ZONE_TYPE : _ref2$type,\n      _ref2$dragDisabled = _ref2.dragDisabled,\n      dragDisabled = _ref2$dragDisabled === void 0 ? false : _ref2$dragDisabled,\n      _ref2$zoneTabIndex = _ref2.zoneTabIndex,\n      zoneTabIndex = _ref2$zoneTabIndex === void 0 ? 0 : _ref2$zoneTabIndex,\n      _ref2$zoneItemTabInde = _ref2.zoneItemTabIndex,\n      zoneItemTabIndex = _ref2$zoneItemTabInde === void 0 ? 0 : _ref2$zoneItemTabInde,\n      _ref2$dropFromOthersD = _ref2.dropFromOthersDisabled,\n      dropFromOthersDisabled = _ref2$dropFromOthersD === void 0 ? false : _ref2$dropFromOthersD,\n      _ref2$dropTargetStyle = _ref2.dropTargetStyle,\n      dropTargetStyle = _ref2$dropTargetStyle === void 0 ? DEFAULT_DROP_TARGET_STYLE : _ref2$dropTargetStyle,\n      _ref2$dropTargetClass = _ref2.dropTargetClasses,\n      dropTargetClasses = _ref2$dropTargetClass === void 0 ? [] : _ref2$dropTargetClass,\n      _ref2$autoAriaDisable = _ref2.autoAriaDisabled,\n      autoAriaDisabled = _ref2$autoAriaDisable === void 0 ? false : _ref2$autoAriaDisable;\n    config.items = _toConsumableArray(items);\n    config.dragDisabled = dragDisabled;\n    config.dropFromOthersDisabled = dropFromOthersDisabled;\n    config.zoneTabIndex = zoneTabIndex;\n    config.zoneItemTabIndex = zoneItemTabIndex;\n    config.dropTargetStyle = dropTargetStyle;\n    config.dropTargetClasses = dropTargetClasses;\n    config.autoAriaDisabled = autoAriaDisabled;\n    if (config.type && newType !== config.type) {\n      unregisterDropZone(node, config.type);\n    }\n    config.type = newType;\n    registerDropZone(node, newType);\n    if (!autoAriaDisabled) {\n      node.setAttribute(\"aria-disabled\", dragDisabled);\n      node.setAttribute(\"role\", \"list\");\n      node.setAttribute(\"aria-describedby\", dragDisabled ? INSTRUCTION_IDs.DND_ZONE_DRAG_DISABLED : INSTRUCTION_IDs.DND_ZONE_ACTIVE);\n    }\n    dzToConfig.set(node, config);\n    if (isDragging) {\n      node.tabIndex = node === focusedDz || focusedItem.contains(node) || config.dropFromOthersDisabled || focusedDz && config.type !== dzToConfig.get(focusedDz).type ? -1 : 0;\n    } else {\n      node.tabIndex = config.zoneTabIndex;\n    }\n    node.addEventListener(\"focus\", handleZoneFocus);\n    var _loop = function _loop(i) {\n      var draggableEl = node.children[i];\n      allDragTargets.add(draggableEl);\n      draggableEl.tabIndex = isDragging ? -1 : config.zoneItemTabIndex;\n      if (!autoAriaDisabled) {\n        draggableEl.setAttribute(\"role\", \"listitem\");\n      }\n      draggableEl.removeEventListener(\"keydown\", elToKeyDownListeners.get(draggableEl));\n      draggableEl.removeEventListener(\"click\", elToFocusListeners.get(draggableEl));\n      if (!dragDisabled) {\n        draggableEl.addEventListener(\"keydown\", handleKeyDown);\n        elToKeyDownListeners.set(draggableEl, handleKeyDown);\n        draggableEl.addEventListener(\"click\", handleClick);\n        elToFocusListeners.set(draggableEl, handleClick);\n      }\n      if (isDragging && config.items[i][ITEM_ID_KEY] === focusedItemId) {\n        printDebug(function () {\n          return [\"focusing on\", {\n            i: i,\n            focusedItemId: focusedItemId\n          }];\n        });\n        // if it is a nested dropzone, it was re-rendered and we need to refresh our pointer\n        focusedItem = draggableEl;\n        focusedItem.tabIndex = config.zoneItemTabIndex;\n        // without this the element loses focus if it moves backwards in the list\n        draggableEl.focus();\n      }\n    };\n    for (var i = 0; i < node.children.length; i++) {\n      _loop(i);\n    }\n  }\n  configure(options);\n  var handles = {\n    update: function update(newOptions) {\n      printDebug(function () {\n        return \"keyboard dndzone will update newOptions: \".concat(toString(newOptions));\n      });\n      configure(newOptions);\n    },\n    destroy: function destroy() {\n      printDebug(function () {\n        return \"keyboard dndzone will destroy\";\n      });\n      unregisterDropZone(node, config.type);\n      dzToConfig[\"delete\"](node);\n      dzToHandles[\"delete\"](node);\n    }\n  };\n  dzToHandles.set(node, handles);\n  return handles;\n}\n\nvar _excluded = [\"items\", \"flipDurationMs\", \"type\", \"dragDisabled\", \"morphDisabled\", \"dropFromOthersDisabled\", \"zoneTabIndex\", \"zoneItemTabIndex\", \"dropTargetStyle\", \"dropTargetClasses\", \"transformDraggedElement\", \"autoAriaDisabled\", \"centreDraggedOnCursor\", \"delayTouchStart\", \"dropAnimationDisabled\"];\n\n/**\n * A custom action to turn any container to a dnd zone and all of its direct children to draggables\n * Supports mouse, touch and keyboard interactions.\n * Dispatches two events that the container is expected to react to by modifying its list of items,\n * which will then feed back in to this action via the update function\n *\n * @typedef {object} Options\n * @property {array} items - the list of items that was used to generate the children of the given node (the list used in the #each block\n * @property {string} [type] - the type of the dnd zone. children dragged from here can only be dropped in other zones of the same type, default to a base type\n * @property {number} [flipDurationMs] - if the list animated using flip (recommended), specifies the flip duration such that everything syncs with it without conflict, defaults to zero\n * @property {boolean} [dragDisabled]\n * @property {boolean} [morphDisabled] - whether dragged element should morph to zone dimensions\n * @property {boolean} [dropFromOthersDisabled]\n * @property {number} [zoneTabIndex] - set the tabindex of the list container when not dragging\n * @property {number} [zoneItemTabIndex] - set the tabindex of the list container items when not dragging\n * @property {object} [dropTargetStyle]\n * @property {string[]} [dropTargetClasses]\n * @property {boolean|number} [delayTouchStart] - On touch devices, wait this long before converting the gesture to a drag.\n * `true` uses the built-in default (80 ms).\n * @property {boolean} [dropAnimationDisabled] - cancels the drop animation to place\n * @property {function} [transformDraggedElement]\n * @param {HTMLElement} node - the element to enhance\n * @param {Options} options\n * @return {{update: function, destroy: function}}\n */\nfunction dndzone(node, options) {\n  if (shouldIgnoreZone(node)) {\n    return {\n      update: function update() {},\n      destroy: function destroy() {}\n    };\n  }\n  validateOptions(options);\n  var pointerZone = dndzone$2(node, options);\n  var keyboardZone = dndzone$1(node, options);\n  return {\n    update: function update(newOptions) {\n      validateOptions(newOptions);\n      pointerZone.update(newOptions);\n      keyboardZone.update(newOptions);\n    },\n    destroy: function destroy() {\n      pointerZone.destroy();\n      keyboardZone.destroy();\n    }\n  };\n}\n\n/**\n * If the user marked something in the ancestry of our node as shadow element, we can ignore it\n * We need the user to mark it for us because svelte updates the action from deep to shallow (but renders top down)\n * @param {HTMLElement} node\n * @return {boolean}\n */\nfunction shouldIgnoreZone(node) {\n  return !!node.closest(\"[\".concat(SHADOW_ELEMENT_HINT_ATTRIBUTE_NAME, \"=\\\"true\\\"]\"));\n}\nfunction validateOptions(options) {\n  /*eslint-disable*/\n  var items = options.items;\n    options.flipDurationMs;\n    options.type;\n    options.dragDisabled;\n    options.morphDisabled;\n    options.dropFromOthersDisabled;\n    var zoneTabIndex = options.zoneTabIndex,\n    zoneItemTabIndex = options.zoneItemTabIndex;\n    options.dropTargetStyle;\n    var dropTargetClasses = options.dropTargetClasses;\n    options.transformDraggedElement;\n    options.autoAriaDisabled;\n    options.centreDraggedOnCursor;\n    var delayTouchStart = options.delayTouchStart;\n    options.dropAnimationDisabled;\n    var rest = _objectWithoutProperties(options, _excluded);\n  /*eslint-enable*/\n  if (Object.keys(rest).length > 0) {\n    console.warn(\"dndzone will ignore unknown options\", rest);\n  }\n  if (!items) {\n    throw new Error(\"no 'items' key provided to dndzone\");\n  }\n  var itemWithMissingId = items.find(function (item) {\n    return !{}.hasOwnProperty.call(item, ITEM_ID_KEY);\n  });\n  if (itemWithMissingId) {\n    throw new Error(\"missing '\".concat(ITEM_ID_KEY, \"' property for item \").concat(toString(itemWithMissingId)));\n  }\n  if (dropTargetClasses && !Array.isArray(dropTargetClasses)) {\n    throw new Error(\"dropTargetClasses should be an array but instead it is a \".concat(_typeof(dropTargetClasses), \", \").concat(toString(dropTargetClasses)));\n  }\n  if (zoneTabIndex && !isInt(zoneTabIndex)) {\n    throw new Error(\"zoneTabIndex should be a number but instead it is a \".concat(_typeof(zoneTabIndex), \", \").concat(toString(zoneTabIndex)));\n  }\n  if (zoneItemTabIndex && !isInt(zoneItemTabIndex)) {\n    throw new Error(\"zoneItemTabIndex should be a number but instead it is a \".concat(_typeof(zoneItemTabIndex), \", \").concat(toString(zoneItemTabIndex)));\n  }\n  if (delayTouchStart !== undefined && delayTouchStart !== false) {\n    var validBoolean = delayTouchStart === true;\n    var validNumber = typeof delayTouchStart === \"number\" && isFinite(delayTouchStart) && delayTouchStart >= 0;\n    if (!validBoolean && !validNumber) {\n      throw new Error(\"delayTouchStart should be a boolean (true/false) or a non-negative number but instead it is a \".concat(_typeof(delayTouchStart), \", \").concat(toString(delayTouchStart)));\n    }\n  }\n}\nfunction isInt(value) {\n  return !isNaN(value) && function (x) {\n    return (x | 0) === x;\n  }(parseFloat(value));\n}\n\nfunction createStore(initialValue) {\n  var _val = initialValue;\n  var subs = new Set();\n  return {\n    get: function get() {\n      return _val;\n    },\n    set: function set(newVal) {\n      _val = newVal;\n      Array.from(subs).forEach(function (cb) {\n        return cb(_val);\n      });\n    },\n    subscribe: function subscribe(cb) {\n      subs.add(cb);\n      cb(_val);\n    },\n    unsubscribe: function unsubscribe(cb) {\n      subs[\"delete\"](cb);\n    }\n  };\n}\n\nvar isItemsDragDisabled = createStore(true);\nvar userDragDisabled = createStore(false);\nfunction getAddedOptions() {\n  return {\n    dragDisabled: userDragDisabled.get() || isItemsDragDisabled.get(),\n    zoneItemTabIndex: -1\n  };\n}\n\n/**\n * This is an action that wraps around the dndzone action to make it easy to work with drag handles\n * When using this you must also use the 'dragHandle' action (see below) on an element inside each item within the zone\n * Credit for the idea and initial implementation goes to @gleuch (Greg Leuch) and @geovie (Georg Vienna)\n *\n * @param {HTMLElement} node\n * @param options - will be passed down to the dndzone\n * @return {{update: (newOptions: Object) => {}, destroy: () => {}}}\n */\nfunction dragHandleZone(node, options) {\n  var _options$dragDisabled;\n  // Initialise stores from initial options\n  userDragDisabled.set((_options$dragDisabled = options === null || options === void 0 ? void 0 : options.dragDisabled) !== null && _options$dragDisabled !== void 0 ? _options$dragDisabled : false);\n  var currentOptions = options;\n  var zone = dndzone(node, _objectSpread2(_objectSpread2({}, currentOptions), getAddedOptions()));\n  function updateZone() {\n    zone.update(_objectSpread2(_objectSpread2({}, currentOptions), getAddedOptions()));\n  }\n\n  // Subscribe to internal store so finishing a drag updates the zone\n  isItemsDragDisabled.subscribe(updateZone);\n\n  // We don't need to subscribe to userDragDisabled here because updates to\n  // it always come through the `update` lifecycle and will call `updateZone`\n  // anyway.\n\n  function consider(e) {\n    var _e$detail$info = e.detail.info,\n      source = _e$detail$info.source,\n      trigger = _e$detail$info.trigger;\n    // Ensure dragging is stopped on drag finish via keyboard\n    if (source === SOURCES.KEYBOARD && trigger === TRIGGERS.DRAG_STOPPED) {\n      isItemsDragDisabled.set(true);\n    }\n  }\n  function finalize(e) {\n    var source = e.detail.info.source;\n    // Ensure dragging is stopped on drag finish via pointer (mouse, touch)\n    if (source === SOURCES.POINTER) {\n      isItemsDragDisabled.set(true);\n    }\n  }\n  node.addEventListener(\"consider\", consider);\n  node.addEventListener(\"finalize\", finalize);\n  return {\n    update: function update(newOptions) {\n      var _currentOptions$dragD, _currentOptions;\n      currentOptions = newOptions;\n      // keep store in sync with external prop\n      userDragDisabled.set((_currentOptions$dragD = (_currentOptions = currentOptions) === null || _currentOptions === void 0 ? void 0 : _currentOptions.dragDisabled) !== null && _currentOptions$dragD !== void 0 ? _currentOptions$dragD : false);\n      updateZone();\n    },\n    destroy: function destroy() {\n      node.removeEventListener(\"consider\", consider);\n      node.removeEventListener(\"finalize\", finalize);\n      isItemsDragDisabled.unsubscribe(updateZone);\n    }\n  };\n}\n\n/**\n * This should be used to mark drag handles inside items that belong to a 'dragHandleZone' (see above)\n * @param {HTMLElement} handle\n * @return {{update: *, destroy: *}}\n */\nfunction dragHandle(handle) {\n  handle.setAttribute(\"role\", \"button\");\n  function startDrag(e) {\n    // preventing default to prevent lag on touch devices (because of the browser checking for screen scrolling)\n    e.preventDefault();\n    isItemsDragDisabled.set(false);\n\n    // Reset the startDrag/isItemsDragDisabled if the user releases the mouse/touch without initiating a drag\n    window.addEventListener(\"mouseup\", resetStartDrag);\n    window.addEventListener(\"touchend\", resetStartDrag);\n  }\n  function handleKeyDown(e) {\n    if (e.key === \"Enter\" || e.key === \" \") isItemsDragDisabled.set(false);\n  }\n  function resetStartDrag() {\n    isItemsDragDisabled.set(true);\n    window.removeEventListener(\"mouseup\", resetStartDrag);\n    window.removeEventListener(\"touchend\", resetStartDrag);\n  }\n  var recomputeHandleState = function recomputeHandleState() {\n    var userDisabled = userDragDisabled.get();\n    var internalDisabled = isItemsDragDisabled.get();\n    if (userDisabled) {\n      handle.tabIndex = -1;\n      handle.style.cursor = \"\"; // default cursor\n    } else {\n      handle.tabIndex = internalDisabled ? 0 : -1;\n      handle.style.cursor = internalDisabled ? \"grab\" : \"grabbing\";\n    }\n  };\n\n  // Subscribe to both stores\n  userDragDisabled.subscribe(recomputeHandleState);\n  isItemsDragDisabled.subscribe(recomputeHandleState);\n  handle.addEventListener(\"mousedown\", startDrag);\n  handle.addEventListener(\"touchstart\", startDrag);\n  handle.addEventListener(\"keydown\", handleKeyDown);\n  return {\n    update: function update() {},\n    destroy: function destroy() {\n      handle.removeEventListener(\"mousedown\", startDrag);\n      handle.removeEventListener(\"touchstart\", startDrag);\n      handle.removeEventListener(\"keydown\", handleKeyDown);\n      userDragDisabled.unsubscribe(recomputeHandleState);\n      isItemsDragDisabled.unsubscribe(recomputeHandleState);\n    }\n  };\n}\n\nexport { DRAGGED_ELEMENT_ID, FEATURE_FLAG_NAMES, SHADOW_ITEM_MARKER_PROPERTY_NAME, SHADOW_PLACEHOLDER_ITEM_ID, SOURCES, TRIGGERS, alertToScreenReader, dndzone, dragHandle, dragHandleZone, overrideItemIdKeyNameBeforeInitialisingDndZones, setDebugMode, setFeatureFlag };\n","<script>\n  import { dndzone } from 'svelte-dnd-action';\n  import { onMount } from 'svelte';\n\n  export let tabs = [];\n  export let activeTabId;\n  export let theme = 'light';\n  let tabCounter = tabs.length || 1;\n\n  import { createEventDispatcher } from 'svelte';\n  const dispatch = createEventDispatcher();\n\n  function setActive(id) {\n    activeTabId = id;\n  }\n\n  function doClose(id) {\n    dispatch('closeTab', id);\n  }\n\n  function handleDnd({ detail }) {\n    tabs = detail.items;\n  }\n\n  function newTab() {\n    tabCounter += 1;\n    const newTab = { id: tabCounter, title: `Tab ${tabCounter}`, kind: 'new' + tabCounter, data: {} };\n    tabs = [...tabs, newTab];\n    activeTabId = newTab.kind;\n  }\n\n  onMount(() => {\n    if (tabs.length > 0) {\n      activeTabId = tabs[0].kind;\n    }\n  });\n</script>\n\n<div\n  class=\"tabs-container flex items-center text-sm h-10 px-2 overflow-x-auto border-b\"\n  class:bg-gray-100={theme === 'light'}\n  class:bg-[#1e1e1e]={theme === 'dark'}\n  class:border-gray-300={theme === 'light'}\n  class:border-[#2a2a2a]={theme === 'dark'}\n  use:dndzone={{ items: tabs, flipDurationMs: 150 }}\n  on:consider={handleDnd}\n  on:finalize={handleDnd}>\n  {#each tabs as tab (tab.id)}\n    <div\n      class=\"tab relative flex items-center px-4 h-full cursor-pointer select-none transition group tab-layout\"\n      class:text-gray-700={theme === 'light'}\n      class:text-gray-300={theme === 'dark'}\n      class:hover:text-black={theme === 'light'}\n      class:hover:text-white={theme === 'dark'}\n      class:border-b-2={tab.kind === activeTabId}\n      class:border-blue-500={tab.kind === activeTabId}\n      class:bg-white={theme === 'light' && tab.kind === activeTabId}\n      class:bg-[#2d2d2d]={theme === 'dark' && tab.kind === activeTabId}\n      on:click={() => setActive(tab.kind)}>\n      <span>{tab?.title || ''}</span>\n      <span\n        class=\"close ml-1.5 w-5 h-5 text-sm rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-200 ease-in-out cursor-pointer\"\n        class:text-red-500={theme === 'light'}\n        class:text-red-400={theme === 'dark'}\n        class:hover:bg-gray-200={theme === 'light'}\n        class:hover:bg-[#444]={theme === 'dark'}\n        on:click|stopPropagation={() => doClose(tab.kind)}>\n        \n      </span>\n    </div>\n  {/each}\n\n  <div\n    class=\"ml-2 cursor-pointer text-lg px-2 transition\"\n    class:text-gray-500={theme === 'light'}\n    class:hover:text-black={theme === 'light'}\n    class:text-gray-400={theme === 'dark'}\n    class:hover:text-white={theme === 'dark'}\n    on:click={newTab}>\n    +\n  </div>\n</div>\n","// Hm map d liu raw t backend sang data cho Info.svelte\nexport function mapRecordToInfo(raw) {\n    return {\n        id: raw.id_iuid ?? null,\n        code: raw.code ?? \"\",\n        partner_name: raw.partner_name ?? \"\",\n        partner_code: raw.partner_code ?? \"\",\n        partner_address: raw.partner_address ?? \"\",\n        partner_phone: raw.partner_phone ?? \"\",\n        result_datetime: raw.result_datetime ?? null,\n        result_date: raw.result_date ?? null,\n        diagnosis: raw.diagnosis ?? \"\",\n        findings: raw.findings ?? \"\",\n        impression: raw.impression ?? \"\",\n        recommendation: raw.recommendation ?? \"\",\n        note: raw.note ?? \"\",\n        item_name: raw.item_name ?? \"\",\n        provider_name: raw.provider_name ?? \"\",\n        provider_phone: raw.provider_phone ?? \"\",\n        provider_email: raw.provider_email ?? \"\"\n    };\n}\n\n// Hm map ngc li, t data trong Info.svelte gi v backend\nexport function mapInfoToRecord(data) {\n    return {\n        id_iuid: data.id,\n        code: data.code,\n        partner_name: data.partner_name,\n        partner_code: data.partner_code,\n        partner_address: data.partner_address,\n        partner_phone: data.partner_phone,\n        result_datetime: data.result_datetime,\n        result_date: data.result_date,\n        diagnosis: data.diagnosis,\n        findings: data.findings,\n        impression: data.impression,\n        recommendation: data.recommendation,\n        note: data.note,\n        item_name: data.item_name,\n        provider_name: data.provider_name,\n        provider_phone: data.provider_phone,\n        provider_email: data.provider_email\n    };\n}\n\nexport const mapTabDetail = {\n    user: 'userdetail',\n    report: 'reportview',\n    product: 'productdetail',\n    invoice: 'invoicedetail',\n    result: 'ResultDetail',\n    home: 'HomeDetail'\n};","import { tick } from \"svelte\";\n\nconst componentCache = new Map();\nconst componentRegistry = new Map();\n\n/**\n * ng k loader ng cho 1 component\n */\nexport function registerComponentByName(name, loader) {\n    componentRegistry.set(name, loader);\n}\n\n/**\n * Auto-register ton b component t 1 folder\n * @param {string}  \n */\nexport function autoRegister() {\n    // Thay ng dn ny cho ng vi project ca bn @components/**/*.svelte\n    const modules = import.meta.glob('@components/tabs/details/*.svelte');\n    //www/src/components/tabs/details\n    for (const [path, loader] of Object.entries(modules)) {\n        const name = path.split('/').pop().replace('.svelte', '');\n        //console.log(`Auto-register component: ${name} from ${path}`);\n        if (!name) continue;\n        registerComponentByName(name, loader);\n    }\n}\n\n/**\n * Load component theo tn, c cache\n */\nexport async function loadComponentByName(name) {\n    if (!name) return null;\n    // nu c trong cache th ly lun\n    if (componentCache.has(name)) {\n        return componentCache.get(name);\n    }\n    // ly loader t registry\n    const loader = componentRegistry.get(name);\n    if (!loader) {\n        console.warn(` Component ${name} cha c register`);\n        return null;\n    }\n    const { default: component } = await loader();\n    componentCache.set(name, component);\n    return component;\n}\n\nexport async function preloadComponents(names = []) {\n    for (const name of names) {\n        try {\n            await loadComponentByName(name);\n        } catch (err) {\n            console.error(` Li preload ${name}:`, err);\n        }\n    }\n    //console.log(' Preload components done:', names);\n}\n\nexport function registerComponent(type, loaderFn) {\n    if (!type || typeof type !== \"string\") {\n        console.error(\" registerComponent: type khng hp l:\", type);\n        return false;\n    }\n    if (typeof loaderFn !== \"function\") {\n        console.error(` registerComponent: loaderFn cho \"${type}\" khng phi function`, loaderFn);\n        return false;\n    }\n    if (componentRegistry.has(type)) {\n        console.warn(` registerComponent: Component \"${type}\"  tn ti, s ghi .`);\n    }\n\n    componentRegistry.set(type, loaderFn);\n    console.log(` ng k component: \"${type}\" thnh cng.`);\n    return true;\n}\n\n/**\n * Xo component khi registry\n * @param {string} type - Tn component\n */\nexport function unregisterComponent(type) {\n    if (!type || typeof type !== \"string\") {\n        console.error(\" unregisterComponent: type khng hp l:\", type);\n        return false;\n    }\n    if (!componentRegistry.has(type)) {\n        console.warn(` unregisterComponent: Khng tm thy component \"${type}\" trong registry.`);\n        return false;\n    }\n\n    componentRegistry.delete(type);\n    console.log(`  xo component: \"${type}\".`);\n    return true;\n}\n\n/**\n * Ly loaderFn theo tn component\n * @param {string} type - Tn component\n * @returns {Function|null} loaderFn hoc null nu khng c\n */\nexport function getComponent(type) {\n    if (!type || typeof type !== \"string\") {\n        console.error(\" getComponent: type khng hp l:\", type);\n        return null;\n    }\n    if (!componentRegistry.has(type)) {\n        console.warn(` getComponent: Khng tm thy component \"${type}\" trong registry.`);\n        return null;\n    }\n    return componentRegistry.get(type);\n}\n","<script>\n  import { onMount } from 'svelte';\n  import { mapTabDetail } from '$lib/mapper';\n  import { autoRegister, loadComponentByName, preloadComponents } from '$lib/componentLoader';\n\n  export let tabs = [];\n  export let activeTabId;\n  let currentComponent = null;\n\n  let ready = false;\n\n  $: if (ready && activeTabId) {\n    doLoad(activeTabId);\n  }\n\n  const doLoad = async (kind) => {\n    const name = mapTabDetail[kind] || activeTabId;\n    currentComponent = await loadComponentByName(name);\n  };\n\n  onMount(async () => {\n    autoRegister();\n    await preloadComponents(['HomeDetail', 'ResultDetail']); // preload trc\n    ready = true;\n  });\n</script>\n\n<slot {currentComponent} {tabs} {activeTabId} {...$$restProps} />\n","<script context=\"module\">\n  import { tick } from \"svelte\";\n\n  /**\n   * Usage: <div use:portal={'css selector'}> or <div use:portal={document.body}>\n   *\n   * @param {HTMLElement} el\n   * @param {HTMLElement|string} target DOM Element or CSS Selector\n   */\n  export function portal(el, target = \"body\") {\n    let targetEl;\n    async function update(newTarget) {\n      target = newTarget;\n      if (typeof target === \"string\") {\n        targetEl = document.querySelector(target);\n        if (targetEl === null) {\n          await tick();\n          targetEl = document.querySelector(target);\n        }\n        if (targetEl === null) {\n          throw new Error(\n            `No element found matching css selector: \"${target}\"`\n          );\n        }\n      } else if (target instanceof HTMLElement) {\n        targetEl = target;\n      } else {\n        throw new TypeError(\n          `Unknown portal target type: ${\n            target === null ? \"null\" : typeof target\n          }. Allowed types: string (CSS selector) or HTMLElement.`\n        );\n      }\n      targetEl.appendChild(el);\n      el.hidden = false;\n    }\n\n    function destroy() {\n      if (el.parentNode) {\n        el.parentNode.removeChild(el);\n      }\n    }\n\n    update(target);\n    return {\n      update,\n      destroy,\n    };\n  }\n</script>\n\n<script>\n  /**\n   * DOM Element or CSS Selector\n   * @type { HTMLElement|string}\n   */\n  export let target = \"body\";\n</script>\n\n<div use:portal={target} hidden>\n  <slot />\n</div>\n","export const download = (data, filename = 'noname', contentType = 'application/json') => {\n    const blob = new Blob([data], { type: contentType });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = filename;\n    a.click();\n\n    URL.revokeObjectURL(url);\n};\n","<script>\n  import { onMount, tick, onDestroy } from 'svelte';\n  import Portal from 'svelte-portal';\n  import Icon from '@components/Icon.svelte';\n  import LayoutK2 from '@components/layout/k2/index.js';\n  import { download } from '$lib/utils.js';\n  import { logOut } from '$lib/actions/auth.js';\n\n  // import Modal from '@components/ui/Modal2.svelte';\n\n  export let value = undefined;\n  let showPopup = false;\n  let buttonRef;\n  let popupRef;\n  let popupStyle = '';\n\n  let open = false;\n\n  async function togglePopup() {\n    showPopup = !showPopup;\n    if (showPopup) {\n      await tick(); // m bo popup  render vo DOM\n      positionPopup();\n    }\n  }\n\n  // Tnh ton v tr popup khi hin th\n  async function positionPopup() {\n    if (!buttonRef || !popupRef) return;\n    // Ly ta  v kch thc ca nt\n    const btnRect = buttonRef.getBoundingClientRect();\n    const popupRect = popupRef.getBoundingClientRect();\n    let top = btnRect.bottom + window.scrollY;\n    let left = btnRect.left + window.scrollX;\n\n    // iu chnh nu popup b trn ra ngoi mn hnh ngang\n    if (left + popupRect.width > window.innerWidth) {\n      left = window.innerWidth - popupRect.width - 8; // 8px padding\n    }\n    // iu chnh nu popup b trn ra ngoi mn hnh dc\n    if (top + popupRect.height > window.innerHeight + window.scrollY) {\n      top = btnRect.top + window.scrollY - popupRect.height;\n    }\n\n    popupStyle = `\n      position: absolute;\n      top: ${top}px;\n      left: ${left}px;\n      z-index: 9999;\n    `;\n  }\n\n  // n popup khi click ra ngoi\n  function handleClickOutside(event) {\n    if (popupRef && !popupRef.contains(event.target) && !buttonRef.contains(event.target)) {\n      showPopup = false;\n    }\n  }\n\n  onMount(async () => {\n    document.addEventListener('click', handleClickOutside);\n  });\n\n  onDestroy(() => {\n    document.removeEventListener('click', handleClickOutside);\n  });\n\n  export let content;\n  let menuItems = [\n    {\n      name: 'addItem',\n      onClick: () => {\n        value = { addItem: true };\n      },\n      displayText: 'Add Item',\n      class: ''\n    },\n    {\n      name: 'emptyicons',\n      onClick: () => (content.textContent = 'Empty Icon...'),\n      displayText: 'Empty Icon',\n      class: ''\n    },\n    {\n      name: 'zoom',\n      onClick: () => (content.textContent = 'Zoom...'),\n      displayText: 'Zoom',\n      class: ''\n    },\n    {\n      name: 'printMenu',\n      onClick: () => {\n        value = { print: true };\n      },\n      displayText: 'Print',\n      class: ''\n    },\n    { name: 'hr' },\n    {\n      name: 'settings',\n      onClick: () => (content.textContent = 'settings...'),\n      displayText: 'Settings',\n      class: ''\n    },\n    { name: 'hr' },\n    {\n      name: 'showPanel',\n      onClick: () => {\n        value = { showPanel: true };\n      },\n      displayText: 'Show Panel',\n      class: ''\n    },\n    {\n      name: 'hidePanel',\n      onClick: () => {\n        value = { hidePanel: true };\n      },\n      displayText: 'Hide Panel',\n      class: ''\n    },\n    { name: 'hr' },\n    {\n      name: 'trash',\n      onClick: () => (content.textContent = 'Removed...'),\n      displayText: 'Trash',\n      class: ''\n    },\n    {\n      name: 'once-layout',\n      onClick: () => {\n        if (LayoutK2?.importLayoutConfig) {\n          const layout = {\n            'layout__2k-body': [\n              {\n                min: 0,\n                max: 100,\n                size: 19,\n                snap: 9\n              },\n              {\n                min: 0,\n                max: 100,\n                size: 67,\n                snap: 34\n              },\n              {\n                min: 0,\n                max: 100,\n                size: 14,\n                snap: 7\n              }\n            ],\n            'layout__2k-main': [\n              {\n                min: 0,\n                max: 100,\n                size: 5,\n                snap: 3\n              },\n              {\n                min: 0,\n                max: 100,\n                size: 90,\n                snap: 45\n              },\n              {\n                min: 0,\n                max: 100,\n                size: 5,\n                snap: 2\n              }\n            ],\n            'layout__2k-content': [\n              {\n                min: 0,\n                max: 100,\n                size: 10,\n                snap: 5\n              },\n              {\n                min: 0,\n                max: 100,\n                size: 84,\n                snap: 42\n              },\n              {\n                min: 0,\n                max: 100,\n                size: 6,\n                snap: 3\n              }\n            ]\n          };\n          LayoutK2.importLayoutConfig(layout);\n        }\n      },\n      displayText: 'Once Layout',\n      class: ''\n    },\n    {\n      name: 'export-layout',\n      onClick: () => {\n        if (LayoutK2?.exportLayoutConfig) {\n          const ex = LayoutK2.exportLayoutConfig();\n          //console.log('layout::', ex);\n          download(JSON.stringify(ex, null, 2), 'layout.backup', 'application/json');\n        }\n      },\n      displayText: 'Export Layout',\n      class: ''\n    },\n    {\n      name: 'import-layout',\n      onClick: () => {\n        value = { impLayout: true };\n      },\n      displayText: 'Import Layout',\n      class: ' '\n    },\n    {\n      name: 'reset-layout',\n      onClick: () => {\n        if (LayoutK2?.resetLayoutConfig) {\n          LayoutK2.resetLayoutConfig();\n        }\n      },\n      displayText: 'Reset Layout',\n      class: ''\n    },\n    {\n      name: 'logout',\n      onClick: logOut,\n      displayText: 'ng xut',\n      class: ''\n    }\n  ];\n\n  $: changeConten(content);\n  const changeConten = (content) => {\n    if (content?.code === 'impLayout') {\n      let data = JSON.parse(content.data);\n      if (LayoutK2?.importLayoutConfig) LayoutK2.importLayoutConfig(data);\n    }\n  };\n</script>\n\n<button bind:this={buttonRef} on:click={togglePopup}>\n  <Icon name=\"monitor-cog\" class=\"text-red-500 hover:opacity-80\" width={24} height={24} />\n</button>\n\n<Portal>\n  {#if showPopup}\n    <nav\n      bind:this={popupRef}\n      style={popupStyle}\n      class=\"absolute z-50 bg-white border border-gray-300 rounded-md shadow-lg w-56\"\n      on:click|stopPropagation>\n      <ul class=\"p-2\">\n        {#each menuItems as item}\n          {#if item.name === 'hr'}\n            <hr class=\"my-2 border-t border-gray-200\" />\n          {:else}\n            <li>\n              <button\n                class=\"w-full text-left px-3 py-2 bg-white hover:bg-gray-100 rounded-md flex items-center gap-2 text-sm text-gray-800\"\n                on:click={() => {\n                  item.onClick();\n                  showPopup = false;\n                }}>\n                <span>{item.class}</span>\n                {item.displayText}\n              </button>\n            </li>\n          {/if}\n        {/each}\n      </ul>\n    </nav>\n  {/if}\n</Portal>\n\n<style>\n  /* .popup {\n    background: white;\n    border: 1px solid #ddd;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n    min-width: 150px;\n    padding: 10px 0;\n    border-radius: 4px;\n  } */\n</style>\n","<script>\n  export let label = 'Import File';\n  export let accept = '.txt,.json,.csv'; // Cho php m rng\n  export let onImport = (text, file) => {}; // Callback t ngoi truyn vo\n\n  let fileInput;\n\n  function handleClick() {\n    fileInput.value = ''; // Xa  c th chn li cng 1 file\n    fileInput.click();\n  }\n\n  function handleChange(event) {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    const reader = new FileReader();\n\n    reader.onload = (e) => {\n      const content = e.target.result;\n      onImport(content, file); // Gi callback vi ni dung file v object file\n    };\n\n    reader.onerror = () => {\n      console.error('Li khi c file');\n    };\n\n    reader.readAsText(file);\n  }\n</script>\n\n<!-- Nt import -->\n<button on:click={handleClick} class=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition\">\n  {label}\n</button>\n\n<!-- Input n -->\n<input bind:this={fileInput} type=\"file\" {accept} on:change={handleChange} class=\"hidden\" />\n","<script>\n  import { onMount } from 'svelte';\n  import Layout from '../components/Layout.svelte';\n  // import CamView from '@components/CamView.svelte';\n  import Worklist from './worklist/index.svelte';\n  import History from './histories/index.svelte';\n  import CameraSetting from '@components/CameraSettings.svelte';\n  import Search from './search/index.svelte';\n  import Board from '@components/dnd/Broad.svelte';\n  import Item from '@components/dnd/ItemDnd.svelte';\n  import Tabs from '@components/tabs/vscode.svelte';\n  import TabDetails from '@components/tabs/details/TabDetails.svelte';\n  import Icon from '@components/Icon.svelte';\n\n  import Settings from '@components/ui/context-menu/Settings.svelte';\n  import Modal from '@components/ui/modal/Modal.svelte';\n  import FileImporter from '@components/ui/files/FileImporter.svelte';\n  import { writable } from 'svelte/store';\n\n  import ApiClient from '$lib/api';\n\n  export let user;\n  let items = [];\n  let loaded = false;\n  let total = 0;\n  $: id = undefined;\n  // let page = 1;\n  // let limit = 20;\n  // let keyword = '';\n\n  const api = new ApiClient();\n\n  // Hm fetch data\n  async function fetchData({ keyword = '', page = 0, limit = 0 } = {}) {\n    //console.clear();\n    //console.log('Fetching data with:::', keyword, page, limit);\n    loaded = false;\n    try {\n      const json = await api.get(\n        `/api/endo/results?limit=${limit}&page=${page}&keyword=${encodeURIComponent(keyword)}`\n      );\n      if (json.success) {\n        items = json.data;\n        total = json?.metadata?.total || 0;\n        //console.log('Items loaded:', json.metadata.total, items);\n      } else {\n        console.info('API error:', json.error);\n      }\n    } catch (err) {\n      console.info('Li:', err);\n    } finally {\n      loaded = true;\n    }\n  }\n\n  // ln u load\n  onMount(() => {\n    fetchData();\n  });\n\n  // lng nghe event t Search\n  function handleSearch(e) {\n    fetchData({ ...e.detail });\n  }\n\n  // lng nghe event i trang\n  function handlePageChange(e) {\n    console.log('Page change event:', e.detail);\n    fetchData({ ...e.detail });\n  }\n\n  let settings = undefined;\n  let setting = undefined;\n  let open = false;\n  let modalOption = { width: '80%', height: '80%', title: '' };\n\n  let isOpen = false;\n\n  let option = {};\n\n  $: changeSettings(settings);\n\n  const changeSettings = (settings) => {\n    if (settings?.print) {\n      open = true;\n    } else if (settings?.addItem) {\n      open = true;\n    } else if (settings?.impLayout) {\n      open = true;\n      modalOption = { width: '60%', height: '60%', title: 'Nhp liu giao din' };\n    } else if (settings?.showPanel) {\n      option.showBodyRight = true;\n    } else if (settings?.hidePanel) {\n      option.showBodyRight = false;\n    }\n  };\n\n  let activeTab;\n  //$: console.log('activeTab', activeTab);\n\n  let importedContent = {};\n\n  function handleImport(data, file) {\n    importedContent.data = data;\n    importedContent.code = 'impLayout';\n    importedContent.fileName = file.name;\n  }\n\n  let board = [\n    {\n      id: 1,\n      name: 'TODO',\n      items: [\n        { id: 41, name: 'item41' },\n        { id: 42, name: 'item42' },\n        { id: 43, name: 'item43' },\n        { id: 44, name: 'item44' },\n        { id: 45, name: 'item45' },\n        { id: 46, name: 'item46' },\n        { id: 47, name: 'item47' },\n        { id: 48, name: 'item48' },\n        { id: 49, name: 'item49' }\n      ]\n    },\n    {\n      id: 2,\n      name: 'DOING',\n      items: []\n    },\n    {\n      id: 3,\n      name: 'DONE',\n      items: []\n    }\n  ];\n\n  // const onSelectItem = (e) => {\n  //   const item = e.detail || {};\n  //   //console.log('Item clicked:', e.detail);\n  //   activeTab = { type: 'result', label: 'Kt qu ' + item.code };\n  //   id = item.id_iuid;\n  // };\n\n  let tabs = [{ id: '1', title: 'Home', kind: 'home', data: { id: '' } }];\n  let activeTabId = null;\n\n  function openTab(item) {\n    const exists = tabs.find((t) => t.kind === item.kind);\n    if (!exists) {\n      tabs = [\n        ...tabs,\n        {\n          id: crypto.randomUUID(),\n          title: item.title || 'Kt qu',\n          kind: item.kind || 'result',\n          data: item || {}\n        }\n      ];\n    }\n    activeTabId = item.kind || tabs[tabs.length - 1].kind;\n    id = item.id_iuid || tabs[tabs.length - 1].data.id;\n  }\n\n  function closeTab(kind) {\n    tabs = tabs.filter((t) => t.kind !== kind);\n    if (activeTabId === kind) {\n      activeTabId = tabs.length ? tabs[tabs.length - 1].kind : null;\n    }\n  }\n\n  //$: console.log('Tabs->', tabs, activeTabId);\n</script>\n\n<Modal\n  {open}\n  onClose={() => {\n    open = false;\n  }}\n  {...modalOption}>\n  {#if settings?.print}\n    <iframe\n      src=\"https://demo.evat.vn/temp/20250517/15/9991_dd8bba67a89443e280dd88366563933b/C25TGT_00000138.pdf?zoom=250&panel=hide\"\n      class=\"w-full h-full\">\n    </iframe>\n  {:else if settings?.addItem}\n    <div class=\"w-full h-full flex flex-col items-center justify-center\">\n      <h2>Ni dung bt k  y</h2>\n      <p>Bn c th t bt c g vo slot!</p>\n    </div>\n  {:else if settings?.impLayout}\n    <FileImporter label=\"Ti file ln\" onImport={handleImport} accept={'.txt,.json,.csv,.backup'} />\n    {#if importedContent?.data}\n      <div class=\"mt-4 p-4 border rounded bg-gray-100\">\n        <p class=\"font-bold\"> {importedContent?.fileName}</p>\n        <pre class=\"whitespace-pre-wrap\">{importedContent?.data}</pre>\n      </div>\n    {/if}\n  {/if}\n</Modal>\n\n<Layout {option}>\n  <svelte:fragment slot=\"content\">\n    <TabDetails\n      {tabs}\n      {activeTabId}\n      {id}\n      let:tabs\n      let:activeTabId\n      let:isLoading\n      let:currentComponent\n      let:tab\n      let:error\n      let:id>\n      {#if isLoading}\n        <div class=\"p-4 text-gray-400 italic\"> Loading tab content...</div>\n      {:else if currentComponent}\n        <svelte:component this={currentComponent} {tabs} {activeTabId} {id} />\n      {:else if error}\n        <div class=\"p-4 text-red-500 italic\"> {error.message}</div>\n      {/if}\n    </TabDetails>\n  </svelte:fragment>\n  <svelte:fragment slot=\"left\">\n    <div class=\"min-w-[330px] w-full h-full flex flex-col\">\n      <!-- Search section -->\n      <div class=\"min-h-[280px] bg-gray-200\">\n        <Search\n          on:search={handleSearch}\n          on:pageChange={handlePageChange}\n          on:addUser={() => console.log('Add user')}\n          on:addGroup={() => console.log('Add group')}\n          on:tabChange={() => console.log('Tab change')}\n          {total} />\n      </div>\n\n      <!-- Worklist section -->\n      <div class=\"flex-1 bg-gray-100 overflow-auto\">\n        <Worklist {items} {loaded} on:click={(e) => openTab({ ...e.detail, kind: 'result' })} />\n      </div>\n    </div>\n  </svelte:fragment>\n\n  <svelte:fragment slot=\"head\">\n    <!-- <Tabs bind:tab={activeTab} /> -->\n    <Tabs {tabs} bind:activeTabId on:closeTab={(e) => closeTab(e.detail)} />\n  </svelte:fragment>\n\n  <svelte:fragment slot=\"header\">\n    <div class=\"flex justify-between flex-row items-center w-full\">\n      <div>{`Xin cho, ${$user.name || $user.email} (${$user.id})`}</div>\n      <div></div>\n      <div>\n        <Settings bind:value={settings} content={importedContent} />\n      </div>\n    </div>\n  </svelte:fragment>\n\n  <svelte:fragment slot=\"right\">\n    <History />\n  </svelte:fragment>\n\n  <svelte:fragment slot=\"comment\">comment</svelte:fragment>\n</Layout>\n"],"file":"assets/DesktopLayout-ZQm0f33Z.js"}