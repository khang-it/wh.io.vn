const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./MobileLayout-BABVFqWZ.js","./auth-D8HnUpce.js","./MobileLayout-kgKoArum.css","./DesktopLayout-v_NQbr1h.js","./DesktopLayout-DVaojfNY.css"])))=>i.map(i=>d[i]);
var HM=Object.defineProperty;var m0=e=>{throw TypeError(e)};var GM=(e,t,i)=>t in e?HM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Ne=(e,t,i)=>GM(e,typeof t!="symbol"?t+"":t,i),mC=(e,t,i)=>t.has(e)||m0("Cannot "+i);var g=(e,t,i)=>(mC(e,t,"read from private field"),i?i.call(e):t.get(e)),F=(e,t,i)=>t.has(e)?m0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),x=(e,t,i,s)=>(mC(e,t,"write to private field"),s?s.call(e,i):t.set(e,i),i),E=(e,t,i)=>(mC(e,t,"access private method"),i);var os=(e,t,i,s)=>({set _(n){x(e,t,n,i)},get _(){return g(e,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();const UR=!1;var tp=Array.isArray,BM=Array.prototype.indexOf,By=Array.from,jR=Object.defineProperty,kr=Object.getOwnPropertyDescriptor,KR=Object.getOwnPropertyDescriptors,VM=Object.prototype,zM=Array.prototype,Vy=Object.getPrototypeOf,v0=Object.isExtensible;function md(e){return typeof e=="function"}const Bn=()=>{};function WM(e){return e()}function vw(e){for(var t=0;t<e.length;t++)e[t]()}function qR(){var e,t,i=new Promise((s,n)=>{e=s,t=n});return{promise:i,resolve:e,reject:t}}function YR(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const i=[];for(const s of e)if(i.push(s),i.length===t)break;return i}const ss=2,Hv=4,Gv=8,Bo=16,qr=32,Zc=64,Bv=128,Xn=512,Bi=1024,Ps=2048,Vo=4096,js=8192,ja=16384,Vv=32768,Vr=65536,C0=1<<17,XR=1<<18,cu=1<<19,QR=1<<20,mg=32768,Cw=1<<21,zy=1<<22,Ka=1<<23,Lo=Symbol("$state"),JR=Symbol("legacy props"),$M=Symbol(""),Ad=new class extends Error{constructor(){super(...arguments);Ne(this,"name","StaleReactionError");Ne(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function vC(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function ip(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function UM(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function jM(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function KM(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function qM(e){throw new Error("https://svelte.dev/e/effect_orphan")}function YM(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function XM(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function QM(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function JM(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ZM(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function eI(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function tI(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const zv=1,Wv=2,ZR=4,iI=8,sI=16,nI=1,oI=2,eE=4,rI=8,aI=16,lI=4,cI=1,dI=2,Gi=Symbol(),hI="http://www.w3.org/1999/xhtml",uI="http://www.w3.org/2000/svg",gI="@attach";function fI(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function pI(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let mI=!1;function tE(e){return e===this.v}function iE(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function sE(e){return!iE(e,this.v)}let du=!1,vI=!1;function CI(){du=!0}let wt=null;function Yh(e){wt=e}function wI(e){return nE().get(e)}function bI(e,t){return nE().set(e,t),t}function ft(e,t=!1,i){wt={p:wt,i:!1,c:null,e:null,s:e,x:null,l:du&&!t?{s:null,u:null,$:[]}:null}}function pt(e){var t=wt,i=t.e;if(i!==null){t.e=null;for(var s of i)SE(s)}return e!==void 0&&(t.x=e),t.i=!0,wt=t.p,e??{}}function sp(){return!du||wt!==null&&wt.l===null}function nE(e){return wt===null&&ip(),wt.c??(wt.c=new Map(yI(wt)||void 0))}function yI(e){let t=e.p;for(;t!==null;){const i=t.c;if(i!==null)return i;t=t.p}return null}let El=[];function oE(){var e=El;El=[],vw(e)}function rl(e){if(El.length===0&&!Zu){var t=El;queueMicrotask(()=>{t===El&&oE()})}El.push(e)}function SI(){for(;El.length>0;)oE()}function rE(e){var t=gt;if(t===null)return dt.f|=Ka,e;if((t.f&Vv)===0){if((t.f&Bv)===0)throw e;t.b.error(e)}else Xh(e,t)}function Xh(e,t){for(;t!==null;){if((t.f&Bv)!==0)try{t.b.error(e);return}catch(i){e=i}t=t.parent}throw e}const bp=new Set;let Et=null,Ju=null,si=null,Do=[],$v=null,ww=!1,Zu=!1;var Kd,qd,Tl,Dl,Og,Yd,Xd,ts,bw,ml,aE,lE;const Cv=class Cv{constructor(){F(this,ts);Ne(this,"committed",!1);Ne(this,"current",new Map);Ne(this,"previous",new Map);F(this,Kd,new Set);F(this,qd,new Set);F(this,Tl,0);F(this,Dl,0);F(this,Og,null);F(this,Yd,[]);F(this,Xd,[]);Ne(this,"skipped_effects",new Set);Ne(this,"is_fork",!1)}process(t){var s;Do=[],Ju=null,this.apply();var i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const n of t)E(this,ts,bw).call(this,n,i);this.is_fork||E(this,ts,aE).call(this),g(this,Dl)>0||this.is_fork?(E(this,ts,ml).call(this,i.effects),E(this,ts,ml).call(this,i.render_effects),E(this,ts,ml).call(this,i.block_effects)):(Ju=this,Et=null,w0(i.render_effects),w0(i.effects),Ju=null,(s=g(this,Og))==null||s.resolve()),si=null}capture(t,i){this.previous.has(t)||this.previous.set(t,i),(t.f&Ka)===0&&(this.current.set(t,t.v),si==null||si.set(t,t.v))}activate(){Et=this,this.apply()}deactivate(){Et=null,si=null}flush(){if(this.activate(),Do.length>0){if(cE(),Et!==null&&Et!==this)return}else g(this,Tl)===0&&this.process([]);this.deactivate()}discard(){for(const t of g(this,qd))t(this);g(this,qd).clear()}increment(t){x(this,Tl,g(this,Tl)+1),t&&x(this,Dl,g(this,Dl)+1)}decrement(t){x(this,Tl,g(this,Tl)-1),t&&x(this,Dl,g(this,Dl)-1),this.revive()}revive(){for(const t of g(this,Yd))zi(t,Ps),Bc(t);for(const t of g(this,Xd))zi(t,Vo),Bc(t);x(this,Yd,[]),x(this,Xd,[]),this.flush()}oncommit(t){g(this,Kd).add(t)}ondiscard(t){g(this,qd).add(t)}settled(){return(g(this,Og)??x(this,Og,qR())).promise}static ensure(){if(Et===null){const t=Et=new Cv;bp.add(Et),Zu||Cv.enqueue(()=>{Et===t&&t.flush()})}return Et}static enqueue(t){rl(t)}apply(){}};Kd=new WeakMap,qd=new WeakMap,Tl=new WeakMap,Dl=new WeakMap,Og=new WeakMap,Yd=new WeakMap,Xd=new WeakMap,ts=new WeakSet,bw=function(t,i){var d;t.f^=Bi;for(var s=t.first;s!==null;){var n=s.f,o=(n&(qr|Zc))!==0,r=o&&(n&Bi)!==0,a=r||(n&js)!==0||this.skipped_effects.has(s);if((s.f&Bv)!==0&&((d=s.b)!=null&&d.is_pending())&&(i={parent:i,effect:s,effects:[],render_effects:[],block_effects:[]}),!a&&s.fn!==null){o?s.f^=Bi:(n&Hv)!==0?i.effects.push(s):fu(s)&&((s.f&Bo)!==0&&i.block_effects.push(s),Jh(s));var l=s.first;if(l!==null){s=l;continue}}var c=s.parent;for(s=s.next;s===null&&c!==null;)c===i.effect&&(E(this,ts,ml).call(this,i.effects),E(this,ts,ml).call(this,i.render_effects),E(this,ts,ml).call(this,i.block_effects),i=i.parent),s=c.next,c=c.parent}},ml=function(t){for(const i of t)((i.f&Ps)!==0?g(this,Yd):g(this,Xd)).push(i),zi(i,Bi)},aE=function(){if(g(this,Dl)===0){for(const t of g(this,Kd))t();g(this,Kd).clear()}g(this,Tl)===0&&E(this,ts,lE).call(this)},lE=function(){var n;if(bp.size>1){this.previous.clear();var t=si,i=!0,s={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const o of bp){if(o===this){i=!1;continue}const r=[];for(const[l,c]of this.current){if(o.current.has(l))if(i&&c!==o.current.get(l))o.current.set(l,c);else continue;r.push(l)}if(r.length===0)continue;const a=[...o.current.keys()].filter(l=>!this.current.has(l));if(a.length>0){const l=new Set,c=new Map;for(const d of r)dE(d,a,l,c);if(Do.length>0){Et=o,o.apply();for(const d of Do)E(n=o,ts,bw).call(n,d,s);Do=[],o.deactivate()}}}Et=null,si=t}this.committed=!0,bp.delete(this)};let Dr=Cv;function xI(e){var t=Zu;Zu=!0;try{for(var i;;){if(SI(),Do.length===0&&(Et==null||Et.flush(),Do.length===0))return $v=null,i;cE()}}finally{Zu=t}}function cE(){var e=Dc;ww=!0;try{var t=0;for(R0(!0);Do.length>0;){var i=Dr.ensure();if(t++>1e3){var s,n;RI()}i.process(Do),qa.clear()}}finally{ww=!1,R0(e),$v=null}}function RI(){try{YM()}catch(e){Xh(e,$v)}}let yn=null;function w0(e){var t=e.length;if(t!==0){for(var i=0;i<t;){var s=e[i++];if((s.f&(ja|js))===0&&fu(s)&&(yn=new Set,Jh(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?EE(s):s.fn=null),(yn==null?void 0:yn.size)>0)){qa.clear();for(const n of yn){if((n.f&(ja|js))!==0)continue;const o=[n];let r=n.parent;for(;r!==null;)yn.has(r)&&(yn.delete(r),o.push(r)),r=r.parent;for(let a=o.length-1;a>=0;a--){const l=o[a];(l.f&(ja|js))===0&&Jh(l)}}yn.clear()}}yn=null}}function dE(e,t,i,s){if(!i.has(e)&&(i.add(e),e.reactions!==null))for(const n of e.reactions){const o=n.f;(o&ss)!==0?dE(n,t,i,s):(o&(zy|Bo))!==0&&(o&Ps)===0&&hE(n,t,s)&&(zi(n,Ps),Bc(n))}}function hE(e,t,i){const s=i.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const n of e.deps){if(t.includes(n))return!0;if((n.f&ss)!==0&&hE(n,t,i))return i.set(n,!0),!0}return i.set(e,!1),!1}function Bc(e){for(var t=$v=e;t.parent!==null;){t=t.parent;var i=t.f;if(ww&&t===gt&&(i&Bo)!==0&&(i&XR)===0)return;if((i&(Zc|qr))!==0){if((i&Bi)===0)return;t.f^=Bi}}Do.push(t)}function EI(e){let t=0,i=zr(0),s;return()=>{Uv()&&(b(i),gu(()=>(t===0&&(s=X(()=>e(()=>eg(i)))),t+=1,()=>{rl(()=>{t-=1,t===0&&(s==null||s(),s=void 0,eg(i))})})))}}var AI=Vr|cu|Bv;function FI(e,t,i){new PI(e,t,i)}var sn,nn,Gy,ro,Ml,ao,on,bs,lo,tr,ua,Il,ga,kl,fa,wv,Di,TI,DI,yw,jp,Kp,Sw;class PI{constructor(t,i,s){F(this,Di);Ne(this,"parent");F(this,sn,!1);F(this,nn);F(this,Gy,null);F(this,ro);F(this,Ml);F(this,ao);F(this,on,null);F(this,bs,null);F(this,lo,null);F(this,tr,null);F(this,ua,null);F(this,Il,0);F(this,ga,0);F(this,kl,!1);F(this,fa,null);F(this,wv,EI(()=>(x(this,fa,zr(g(this,Il))),()=>{x(this,fa,null)})));x(this,nn,t),x(this,ro,i),x(this,Ml,s),this.parent=gt.b,x(this,sn,!!g(this,ro).pending),x(this,ao,ed(()=>{gt.b=this;{var n=E(this,Di,yw).call(this);try{x(this,on,zs(()=>s(n)))}catch(o){this.error(o)}g(this,ga)>0?E(this,Di,Kp).call(this):x(this,sn,!1)}return()=>{var o;(o=g(this,ua))==null||o.remove()}},AI))}is_pending(){return g(this,sn)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!g(this,ro).pending}update_pending_count(t){E(this,Di,Sw).call(this,t),x(this,Il,g(this,Il)+t),g(this,fa)&&Vc(g(this,fa),g(this,Il))}get_effect_pending(){return g(this,wv).call(this),b(g(this,fa))}error(t){var i=g(this,ro).onerror;let s=g(this,ro).failed;if(g(this,kl)||!i&&!s)throw t;g(this,on)&&(Ti(g(this,on)),x(this,on,null)),g(this,bs)&&(Ti(g(this,bs)),x(this,bs,null)),g(this,lo)&&(Ti(g(this,lo)),x(this,lo,null));var n=!1,o=!1;const r=()=>{if(n){pI();return}n=!0,o&&tI(),Dr.ensure(),x(this,Il,0),g(this,lo)!==null&&Id(g(this,lo),()=>{x(this,lo,null)}),x(this,sn,this.has_pending_snippet()),x(this,on,E(this,Di,jp).call(this,()=>(x(this,kl,!1),zs(()=>g(this,Ml).call(this,g(this,nn)))))),g(this,ga)>0?E(this,Di,Kp).call(this):x(this,sn,!1)};var a=dt;try{Es(null),o=!0,i==null||i(t,r),o=!1}catch(l){Xh(l,g(this,ao)&&g(this,ao).parent)}finally{Es(a)}s&&rl(()=>{x(this,lo,E(this,Di,jp).call(this,()=>{Dr.ensure(),x(this,kl,!0);try{return zs(()=>{s(g(this,nn),()=>t,()=>r)})}catch(l){return Xh(l,g(this,ao).parent),null}finally{x(this,kl,!1)}}))})}}sn=new WeakMap,nn=new WeakMap,Gy=new WeakMap,ro=new WeakMap,Ml=new WeakMap,ao=new WeakMap,on=new WeakMap,bs=new WeakMap,lo=new WeakMap,tr=new WeakMap,ua=new WeakMap,Il=new WeakMap,ga=new WeakMap,kl=new WeakMap,fa=new WeakMap,wv=new WeakMap,Di=new WeakSet,TI=function(){try{x(this,on,zs(()=>g(this,Ml).call(this,g(this,nn))))}catch(t){this.error(t)}x(this,sn,!1)},DI=function(){const t=g(this,ro).pending;t&&(x(this,bs,zs(()=>t(g(this,nn)))),Dr.enqueue(()=>{var i=E(this,Di,yw).call(this);x(this,on,E(this,Di,jp).call(this,()=>(Dr.ensure(),zs(()=>g(this,Ml).call(this,i))))),g(this,ga)>0?E(this,Di,Kp).call(this):(Id(g(this,bs),()=>{x(this,bs,null)}),x(this,sn,!1))}))},yw=function(){var t=g(this,nn);return g(this,sn)&&(x(this,ua,Wr()),g(this,nn).before(g(this,ua)),t=g(this,ua)),t},jp=function(t){var i=gt,s=dt,n=wt;mn(g(this,ao)),Es(g(this,ao)),Yh(g(this,ao).ctx);try{return t()}catch(o){return rE(o),null}finally{mn(i),Es(s),Yh(n)}},Kp=function(){const t=g(this,ro).pending;g(this,on)!==null&&(x(this,tr,document.createDocumentFragment()),g(this,tr).append(g(this,ua)),PE(g(this,on),g(this,tr))),g(this,bs)===null&&x(this,bs,zs(()=>t(g(this,nn))))},Sw=function(t){var i;if(!this.has_pending_snippet()){this.parent&&E(i=this.parent,Di,Sw).call(i,t);return}x(this,ga,g(this,ga)+t),g(this,ga)===0&&(x(this,sn,!1),g(this,bs)&&Id(g(this,bs),()=>{x(this,bs,null)}),g(this,tr)&&(g(this,nn).before(g(this,tr)),x(this,tr,null)))};function uE(e,t,i,s){const n=sp()?np:Mr;if(i.length===0&&e.length===0){s(t.map(n));return}var o=Et,r=gt,a=MI();function l(){Promise.all(i.map(c=>II(c))).then(c=>{a();try{s([...t.map(n),...c])}catch(d){(r.f&ja)===0&&Xh(d,r)}o==null||o.deactivate(),Hm()}).catch(c=>{Xh(c,r)})}e.length>0?Promise.all(e).then(()=>{a();try{return l()}finally{o==null||o.deactivate(),Hm()}}):l()}function MI(){var e=gt,t=dt,i=wt,s=Et;return function(o=!0){mn(e),Es(t),Yh(i),o&&(s==null||s.activate())}}function Hm(){mn(null),Es(null),Yh(null)}function np(e){var t=ss|Ps,i=dt!==null&&(dt.f&ss)!==0?dt:null;return gt!==null&&(gt.f|=cu),{ctx:wt,deps:null,effects:null,equals:tE,f:t,fn:e,reactions:null,rv:0,v:Gi,wv:0,parent:i??gt,ac:null}}function II(e,t){let i=gt;i===null&&UM();var s=i.b,n=void 0,o=zr(Gi),r=!dt,a=new Map;return zI(()=>{var u;var l=qR();n=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{c===Et&&c.committed&&c.deactivate(),Hm()})}catch(f){l.reject(f),Hm()}var c=Et;if(r){var d=!s.is_pending();s.update_pending_count(1),c.increment(d),(u=a.get(c))==null||u.reject(Ad),a.delete(c),a.set(c,l)}const h=(f,p=void 0)=>{if(c.activate(),p)p!==Ad&&(o.f|=Ka,Vc(o,p));else{(o.f&Ka)!==0&&(o.f^=Ka),Vc(o,f);for(const[m,v]of a){if(a.delete(m),m===c)break;v.reject(Ad)}}r&&(s.update_pending_count(-1),c.decrement(d))};l.promise.then(h,f=>h(null,f||"unknown"))}),uu(()=>{for(const l of a.values())l.reject(Ad)}),new Promise(l=>{function c(d){function h(){d===n?l(o):c(n)}d.then(h,h)}c(n)})}function Sl(e){const t=np(e);return TE(t),t}function Mr(e){const t=np(e);return t.equals=sE,t}function gE(e){var t=e.effects;if(t!==null){e.effects=null;for(var i=0;i<t.length;i+=1)Ti(t[i])}}function kI(e){for(var t=e.parent;t!==null;){if((t.f&ss)===0)return t;t=t.parent}return null}function Wy(e){var t,i=gt;mn(kI(e));try{e.f&=~mg,gE(e),t=kE(e)}finally{mn(i)}return t}function fE(e){var t=Wy(e);if(e.equals(t)||(e.v=t,e.wv=ME()),!td)if(si!==null)Uv()&&si.set(e,e.v);else{var i=(e.f&Xn)===0?Vo:Bi;zi(e,i)}}let xw=new Set;const qa=new Map;let pE=!1;function zr(e,t){var i={f:0,v:e,reactions:null,equals:tE,rv:0,wv:0};return i}function Zr(e,t){const i=zr(e);return TE(i),i}function re(e,t=!1,i=!0){var n;const s=zr(e);return t||(s.equals=sE),du&&i&&wt!==null&&wt.l!==null&&((n=wt.l).s??(n.s=[])).push(s),s}function hs(e,t){return O(e,X(()=>b(e))),t}function O(e,t,i=!1){dt!==null&&(!ko||(dt.f&C0)!==0)&&sp()&&(dt.f&(ss|Bo|zy|C0))!==0&&!(us!=null&&us.includes(e))&&eI();let s=i?Fd(t):t;return Vc(e,s)}function Vc(e,t){if(!e.equals(t)){var i=e.v;td?qa.set(e,t):qa.set(e,i),e.v=t;var s=Dr.ensure();s.capture(e,i),(e.f&ss)!==0&&((e.f&Ps)!==0&&Wy(e),zi(e,(e.f&Xn)!==0?Bi:Vo)),e.wv=ME(),mE(e,Ps),sp()&&gt!==null&&(gt.f&Bi)!==0&&(gt.f&(qr|Zc))===0&&(tn===null?KI([e]):tn.push(e)),!s.is_fork&&xw.size>0&&!pE&&_I()}return t}function _I(){pE=!1;const e=Array.from(xw);for(const t of e)(t.f&Bi)!==0&&zi(t,Vo),fu(t)&&Jh(t);xw.clear()}function b0(e,t=1){var i=b(e),s=t===1?i++:i--;return O(e,i),s}function eg(e){O(e,e.v+1)}function mE(e,t){var i=e.reactions;if(i!==null)for(var s=sp(),n=i.length,o=0;o<n;o++){var r=i[o],a=r.f;if(!(!s&&r===gt)){var l=(a&Ps)===0;if(l&&zi(r,t),(a&ss)!==0){var c=r;si==null||si.delete(c),(a&mg)===0&&(a&Xn&&(r.f|=mg),mE(c,Vo))}else l&&((a&Bo)!==0&&yn!==null&&yn.add(r),Bc(r))}}}function Fd(e){if(typeof e!="object"||e===null||Lo in e)return e;const t=Vy(e);if(t!==VM&&t!==zM)return e;var i=new Map,s=tp(e),n=Zr(0),o=Mc,r=a=>{if(Mc===o)return a();var l=dt,c=Mc;Es(null),A0(o);var d=a();return Es(l),A0(c),d};return s&&i.set("length",Zr(e.length)),new Proxy(e,{defineProperty(a,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&JM();var d=i.get(l);return d===void 0?d=r(()=>{var h=Zr(c.value);return i.set(l,h),h}):O(d,c.value,!0),!0},deleteProperty(a,l){var c=i.get(l);if(c===void 0){if(l in a){const d=r(()=>Zr(Gi));i.set(l,d),eg(n)}}else O(c,Gi),eg(n);return!0},get(a,l,c){var f;if(l===Lo)return e;var d=i.get(l),h=l in a;if(d===void 0&&(!h||(f=kr(a,l))!=null&&f.writable)&&(d=r(()=>{var p=Fd(h?a[l]:Gi),m=Zr(p);return m}),i.set(l,d)),d!==void 0){var u=b(d);return u===Gi?void 0:u}return Reflect.get(a,l,c)},getOwnPropertyDescriptor(a,l){var c=Reflect.getOwnPropertyDescriptor(a,l);if(c&&"value"in c){var d=i.get(l);d&&(c.value=b(d))}else if(c===void 0){var h=i.get(l),u=h==null?void 0:h.v;if(h!==void 0&&u!==Gi)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return c},has(a,l){var u;if(l===Lo)return!0;var c=i.get(l),d=c!==void 0&&c.v!==Gi||Reflect.has(a,l);if(c!==void 0||gt!==null&&(!d||(u=kr(a,l))!=null&&u.writable)){c===void 0&&(c=r(()=>{var f=d?Fd(a[l]):Gi,p=Zr(f);return p}),i.set(l,c));var h=b(c);if(h===Gi)return!1}return d},set(a,l,c,d){var S;var h=i.get(l),u=l in a;if(s&&l==="length")for(var f=c;f<h.v;f+=1){var p=i.get(f+"");p!==void 0?O(p,Gi):f in a&&(p=r(()=>Zr(Gi)),i.set(f+"",p))}if(h===void 0)(!u||(S=kr(a,l))!=null&&S.writable)&&(h=r(()=>Zr(void 0)),O(h,Fd(c)),i.set(l,h));else{u=h.v!==Gi;var m=r(()=>Fd(c));O(h,m)}var v=Reflect.getOwnPropertyDescriptor(a,l);if(v!=null&&v.set&&v.set.call(d,c),!u){if(s&&typeof l=="string"){var C=i.get("length"),w=Number(l);Number.isInteger(w)&&w>=C.v&&O(C,w+1)}eg(n)}return!0},ownKeys(a){b(n);var l=Reflect.ownKeys(a).filter(h=>{var u=i.get(h);return u===void 0||u.v!==Gi});for(var[c,d]of i)d.v!==Gi&&!(c in a)&&l.push(c);return l},setPrototypeOf(){ZM()}})}function y0(e){try{if(e!==null&&typeof e=="object"&&Lo in e)return e[Lo]}catch{}return e}function LI(e,t){return Object.is(y0(e),y0(t))}var S0,vE,CE,wE;function OI(){if(S0===void 0){S0=window,vE=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,i=Text.prototype;CE=kr(t,"firstChild").get,wE=kr(t,"nextSibling").get,v0(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),v0(i)&&(i.__t=void 0)}}function Wr(e=""){return document.createTextNode(e)}function Qh(e){return CE.call(e)}function op(e){return wE.call(e)}function D(e,t){return Qh(e)}function K(e,t=!1){{var i=Qh(e);return i instanceof Comment&&i.data===""?op(i):i}}function k(e,t=1,i=!1){let s=e;for(;t--;)s=op(s);return s}function NI(e){e.textContent=""}function bE(){return!1}function $y(e,t){if(t){const i=document.body;e.autofocus=!0,rl(()=>{document.activeElement===i&&e.focus()})}}let x0=!1;function HI(){x0||(x0=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const i of e.target.elements)(t=i.__on_r)==null||t.call(i)})},{capture:!0}))}function hu(e){var t=dt,i=gt;Es(null),mn(null);try{return e()}finally{Es(t),mn(i)}}function Uy(e,t,i,s=i){e.addEventListener(t,()=>hu(i));const n=e.__on_r;n?e.__on_r=()=>{n(),s(!0)}:e.__on_r=()=>s(!0),HI()}function yE(e){gt===null&&(dt===null&&qM(),KM()),td&&jM()}function GI(e,t){var i=t.last;i===null?t.last=t.first=e:(i.next=e,e.prev=i,t.last=e)}function zo(e,t,i,s=!0){var n=gt;n!==null&&(n.f&js)!==0&&(e|=js);var o={ctx:wt,deps:null,nodes_start:null,nodes_end:null,f:e|Ps|Xn,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(i)try{Jh(o),o.f|=Vv}catch(l){throw Ti(o),l}else t!==null&&Bc(o);if(s){var r=o;if(i&&r.deps===null&&r.teardown===null&&r.nodes_start===null&&r.first===r.last&&(r.f&cu)===0&&(r=r.first,(e&Bo)!==0&&(e&Vr)!==0&&r!==null&&(r.f|=Vr)),r!==null&&(r.parent=n,n!==null&&GI(r,n),dt!==null&&(dt.f&ss)!==0&&(e&Zc)===0)){var a=dt;(a.effects??(a.effects=[])).push(r)}}return o}function Uv(){return dt!==null&&!ko}function uu(e){const t=zo(Gv,null,!1);return zi(t,Bi),t.teardown=e,t}function Rw(e){yE();var t=gt.f,i=!dt&&(t&qr)!==0&&(t&Vv)===0;if(i){var s=wt;(s.e??(s.e=[])).push(e)}else return SE(e)}function SE(e){return zo(Hv|QR,e,!1)}function BI(e){return yE(),zo(Gv|QR,e,!0)}function VI(e){Dr.ensure();const t=zo(Zc|cu,e,!0);return(i={})=>new Promise(s=>{i.outro?Id(t,()=>{Ti(t),s(void 0)}):(Ti(t),s(void 0))})}function rp(e){return zo(Hv,e,!1)}function Lt(e,t){var i=wt,s={effect:null,ran:!1,deps:e};i.l.$.push(s),s.effect=gu(()=>{e(),!s.ran&&(s.ran=!0,X(t))})}function Ys(){var e=wt;gu(()=>{for(var t of e.l.$){t.deps();var i=t.effect;(i.f&Bi)!==0&&zi(i,Vo),fu(i)&&Jh(i),t.ran=!1}})}function zI(e){return zo(zy|cu,e,!0)}function gu(e,t=0){return zo(Gv|t,e,!0)}function xe(e,t=[],i=[],s=[],n=!1){uE(s,t,i,o=>{zo(n?Hv:Gv,()=>e(...o.map(b)),!0)})}function ed(e,t=0){var i=zo(Bo|t,e,!0);return i}function zs(e,t=!0){return zo(qr|cu,e,!0,t)}function xE(e){var t=e.teardown;if(t!==null){const i=td,s=dt;E0(!0),Es(null);try{t.call(null)}finally{E0(i),Es(s)}}}function RE(e,t=!1){var i=e.first;for(e.first=e.last=null;i!==null;){const n=i.ac;n!==null&&hu(()=>{n.abort(Ad)});var s=i.next;(i.f&Zc)!==0?i.parent=null:Ti(i,t),i=s}}function WI(e){for(var t=e.first;t!==null;){var i=t.next;(t.f&qr)===0&&Ti(t),t=i}}function Ti(e,t=!0){var i=!1;(t||(e.f&XR)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&($I(e.nodes_start,e.nodes_end),i=!0),RE(e,t&&!i),Gm(e,0),zi(e,ja);var s=e.transitions;if(s!==null)for(const o of s)o.stop();xE(e);var n=e.parent;n!==null&&n.first!==null&&EE(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function $I(e,t){for(;e!==null;){var i=e===t?null:op(e);e.remove(),e=i}}function EE(e){var t=e.parent,i=e.prev,s=e.next;i!==null&&(i.next=s),s!==null&&(s.prev=i),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=i))}function Id(e,t,i=!0){var s=[];jy(e,s,!0),AE(s,()=>{i&&Ti(e),t&&t()})}function AE(e,t){var i=e.length;if(i>0){var s=()=>--i||t();for(var n of e)n.out(s)}else t()}function jy(e,t,i){if((e.f&js)===0){if(e.f^=js,e.transitions!==null)for(const r of e.transitions)(r.is_global||i)&&t.push(r);for(var s=e.first;s!==null;){var n=s.next,o=(s.f&Vr)!==0||(s.f&qr)!==0&&(e.f&Bo)!==0;jy(s,t,o?i:!1),s=n}}}function Ky(e){FE(e,!0)}function FE(e,t){if((e.f&js)!==0){e.f^=js,(e.f&Bi)===0&&(zi(e,Ps),Bc(e));for(var i=e.first;i!==null;){var s=i.next,n=(i.f&Vr)!==0||(i.f&qr)!==0;FE(i,n?t:!1),i=s}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}function PE(e,t){for(var i=e.nodes_start,s=e.nodes_end;i!==null;){var n=i===s?null:op(i);t.append(i),i=n}}let ca=null;function UI(e){var t=ca;try{if(ca=new Set,X(e),t!==null)for(var i of ca)t.add(i);return ca}finally{ca=t}}function jI(e){for(var t of UI(e))Vc(t,t.v)}let Dc=!1;function R0(e){Dc=e}let td=!1;function E0(e){td=e}let dt=null,ko=!1;function Es(e){dt=e}let gt=null;function mn(e){gt=e}let us=null;function TE(e){dt!==null&&(us===null?us=[e]:us.push(e))}let ls=null,Ms=0,tn=null;function KI(e){tn=e}let DE=1,vg=0,Mc=vg;function A0(e){Mc=e}function ME(){return++DE}function fu(e){var t=e.f;if((t&Ps)!==0)return!0;if(t&ss&&(e.f&=~mg),(t&Vo)!==0){var i=e.deps;if(i!==null)for(var s=i.length,n=0;n<s;n++){var o=i[n];if(fu(o)&&fE(o),o.wv>e.wv)return!0}(t&Xn)!==0&&si===null&&zi(e,Bi)}return!1}function IE(e,t,i=!0){var s=e.reactions;if(s!==null&&!(us!=null&&us.includes(e)))for(var n=0;n<s.length;n++){var o=s[n];(o.f&ss)!==0?IE(o,t,!1):t===o&&(i?zi(o,Ps):(o.f&Bi)!==0&&zi(o,Vo),Bc(o))}}function kE(e){var p;var t=ls,i=Ms,s=tn,n=dt,o=us,r=wt,a=ko,l=Mc,c=e.f;ls=null,Ms=0,tn=null,dt=(c&(qr|Zc))===0?e:null,us=null,Yh(e.ctx),ko=!1,Mc=++vg,e.ac!==null&&(hu(()=>{e.ac.abort(Ad)}),e.ac=null);try{e.f|=Cw;var d=e.fn,h=d(),u=e.deps;if(ls!==null){var f;if(Gm(e,Ms),u!==null&&Ms>0)for(u.length=Ms+ls.length,f=0;f<ls.length;f++)u[Ms+f]=ls[f];else e.deps=u=ls;if(Dc&&Uv()&&(e.f&Xn)!==0)for(f=Ms;f<u.length;f++)((p=u[f]).reactions??(p.reactions=[])).push(e)}else u!==null&&Ms<u.length&&(Gm(e,Ms),u.length=Ms);if(sp()&&tn!==null&&!ko&&u!==null&&(e.f&(ss|Vo|Ps))===0)for(f=0;f<tn.length;f++)IE(tn[f],e);return n!==null&&n!==e&&(vg++,tn!==null&&(s===null?s=tn:s.push(...tn))),(e.f&Ka)!==0&&(e.f^=Ka),h}catch(m){return rE(m)}finally{e.f^=Cw,ls=t,Ms=i,tn=s,dt=n,us=o,Yh(r),ko=a,Mc=l}}function qI(e,t){let i=t.reactions;if(i!==null){var s=BM.call(i,e);if(s!==-1){var n=i.length-1;n===0?i=t.reactions=null:(i[s]=i[n],i.pop())}}i===null&&(t.f&ss)!==0&&(ls===null||!ls.includes(t))&&(zi(t,Vo),(t.f&Xn)!==0&&(t.f^=Xn,t.f&=~mg),gE(t),Gm(t,0))}function Gm(e,t){var i=e.deps;if(i!==null)for(var s=t;s<i.length;s++)qI(e,i[s])}function Jh(e){var t=e.f;if((t&ja)===0){zi(e,Bi);var i=gt,s=Dc;gt=e,Dc=!0;try{(t&Bo)!==0?WI(e):RE(e),xE(e);var n=kE(e);e.teardown=typeof n=="function"?n:null,e.wv=DE;var o;UR&&vI&&(e.f&Ps)!==0&&e.deps}finally{Dc=s,gt=i}}}async function zc(){await Promise.resolve(),xI()}function b(e){var t=e.f,i=(t&ss)!==0;if(ca==null||ca.add(e),dt!==null&&!ko){var s=gt!==null&&(gt.f&ja)!==0;if(!s&&!(us!=null&&us.includes(e))){var n=dt.deps;if((dt.f&Cw)!==0)e.rv<vg&&(e.rv=vg,ls===null&&n!==null&&n[Ms]===e?Ms++:ls===null?ls=[e]:ls.includes(e)||ls.push(e));else{(dt.deps??(dt.deps=[])).push(e);var o=e.reactions;o===null?e.reactions=[dt]:o.includes(dt)||o.push(dt)}}}if(td){if(qa.has(e))return qa.get(e);if(i){var r=e,a=r.v;return((r.f&Bi)===0&&r.reactions!==null||LE(r))&&(a=Wy(r)),qa.set(r,a),a}}else if(i){if(r=e,si!=null&&si.has(r))return si.get(r);fu(r)&&fE(r),Dc&&Uv()&&(r.f&Xn)===0&&_E(r)}else if(si!=null&&si.has(e))return si.get(e);if((e.f&Ka)!==0)throw e.v;return e.v}function _E(e){if(e.deps!==null){e.f^=Xn;for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&ss)!==0&&(t.f&Xn)===0&&_E(t)}}function LE(e){if(e.v===Gi)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(qa.has(t)||(t.f&ss)!==0&&LE(t))return!0;return!1}function X(e){var t=ko;try{return ko=!0,e()}finally{ko=t}}const YI=-7169;function zi(e,t){e.f=e.f&YI|t}function ve(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Lo in e)Ew(e);else if(!Array.isArray(e))for(let t in e){const i=e[t];typeof i=="object"&&i&&Lo in i&&Ew(i)}}}function Ew(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{Ew(e[s],t)}catch{}const i=Vy(e);if(i!==Object.prototype&&i!==Array.prototype&&i!==Map.prototype&&i!==Set.prototype&&i!==Date.prototype){const s=KR(i);for(let n in s){const o=s[n].get;if(o)try{o.call(e)}catch{}}}}}function XI(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const QI=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function JI(e){return QI.includes(e)}const ZI={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function ek(e){return e=e.toLowerCase(),ZI[e]??e}const tk=["touchstart","touchmove"];function ik(e){return tk.includes(e)}const OE=new Set,Aw=new Set;function NE(e,t,i,s={}){function n(o){if(s.capture||ku.call(t,o),!o.cancelBubble)return hu(()=>i==null?void 0:i.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?rl(()=>{t.addEventListener(e,n,s)}):t.addEventListener(e,n,s),n}function $(e,t,i,s,n){var o={capture:s,passive:n},r=NE(e,t,i,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&uu(()=>{t.removeEventListener(e,r,o)})}function ap(e){for(var t=0;t<e.length;t++)OE.add(e[t]);for(var i of Aw)i(e)}let F0=null;function ku(e){var v;var t=this,i=t.ownerDocument,s=e.type,n=((v=e.composedPath)==null?void 0:v.call(e))||[],o=n[0]||e.target;F0=e;var r=0,a=F0===e&&e.__root;if(a){var l=n.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=n.indexOf(t);if(c===-1)return;l<=c&&(r=l)}if(o=n[r]||e.target,o!==t){jR(e,"currentTarget",{configurable:!0,get(){return o||i}});var d=dt,h=gt;Es(null),mn(null);try{for(var u,f=[];o!==null;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var m=o["__"+s];m!=null&&(!o.disabled||e.target===o)&&m.call(o,e)}catch(C){u?f.push(C):u=C}if(e.cancelBubble||p===t||p===null)break;o=p}if(u){for(let C of f)queueMicrotask(()=>{throw C});throw u}}finally{e.__root=t,delete e.currentTarget,Es(d),mn(h)}}}function HE(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Zh(e,t){var i=gt;i.nodes_start===null&&(i.nodes_start=e,i.nodes_end=t)}function W(e,t){var i=(t&cI)!==0,s=(t&dI)!==0,n,o=!e.startsWith("<!>");return()=>{n===void 0&&(n=HE(o?e:"<!>"+e),i||(n=Qh(n)));var r=s||vE?document.importNode(n,!0):n.cloneNode(!0);if(i){var a=Qh(r),l=r.lastChild;Zh(a,l)}else Zh(r,r);return r}}function sk(e,t,i="svg"){var s=!e.startsWith("<!>"),n=`<${i}>${s?e:"<!>"+e}</${i}>`,o;return()=>{if(!o){var r=HE(n),a=Qh(r);o=Qh(a)}var l=o.cloneNode(!0);return Zh(l,l),l}}function GE(e,t){return sk(e,t,"svg")}function BE(e=""){{var t=Wr(e+"");return Zh(t,t),t}}function de(){var e=document.createDocumentFragment(),t=document.createComment(""),i=Wr();return e.append(t,i),Zh(t,i),e}function I(e,t){e!==null&&e.before(t)}let Bm=!0;function yp(e){Bm=e}function Be(e,t){var i=t==null?"":typeof t=="object"?t+"":t;i!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=i,e.nodeValue=i+"")}function nk(e,t){return ok(e,t)}const hd=new Map;function ok(e,{target:t,anchor:i,props:s={},events:n,context:o,intro:r=!0}){OI();var a=new Set,l=h=>{for(var u=0;u<h.length;u++){var f=h[u];if(!a.has(f)){a.add(f);var p=ik(f);t.addEventListener(f,ku,{passive:p});var m=hd.get(f);m===void 0?(document.addEventListener(f,ku,{passive:p}),hd.set(f,1)):hd.set(f,m+1)}}};l(By(OE)),Aw.add(l);var c=void 0,d=VI(()=>{var h=i??t.appendChild(Wr());return FI(h,{pending:()=>{}},u=>{if(o){ft({});var f=wt;f.c=o}n&&(s.$$events=n),Bm=r,c=e(u,s)||{},Bm=!0,o&&pt()}),()=>{var p;for(var u of a){t.removeEventListener(u,ku);var f=hd.get(u);--f===0?(document.removeEventListener(u,ku),hd.delete(u)):hd.set(u,f)}Aw.delete(l),h!==i&&((p=h.parentNode)==null||p.removeChild(h))}});return rk.set(c,d),c}let rk=new WeakMap;var En,co,Is,Ng,Hg,bv;class qy{constructor(t,i=!0){Ne(this,"anchor");F(this,En,new Map);F(this,co,new Map);F(this,Is,new Map);F(this,Ng,!0);F(this,Hg,()=>{var t=Et;if(g(this,En).has(t)){var i=g(this,En).get(t),s=g(this,co).get(i);if(s)Ky(s);else{var n=g(this,Is).get(i);n&&(g(this,co).set(i,n.effect),g(this,Is).delete(i),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),s=n.effect)}for(const[o,r]of g(this,En)){if(g(this,En).delete(o),o===t)break;const a=g(this,Is).get(r);a&&(Ti(a.effect),g(this,Is).delete(r))}for(const[o,r]of g(this,co)){if(o===i)continue;const a=()=>{if(Array.from(g(this,En).values()).includes(o)){var c=document.createDocumentFragment();PE(r,c),c.append(Wr()),g(this,Is).set(o,{effect:r,fragment:c})}else Ti(r);g(this,co).delete(o)};g(this,Ng)||!s?Id(r,a,!1):a()}}});F(this,bv,t=>{g(this,En).delete(t);const i=Array.from(g(this,En).values());for(const[s,n]of g(this,Is))i.includes(s)||(Ti(n.effect),g(this,Is).delete(s))});this.anchor=t,x(this,Ng,i)}ensure(t,i){var s=Et,n=bE();if(i&&!g(this,co).has(t)&&!g(this,Is).has(t))if(n){var o=document.createDocumentFragment(),r=Wr();o.append(r),g(this,Is).set(t,{effect:zs(()=>i(r)),fragment:o})}else g(this,co).set(t,zs(()=>i(this.anchor)));if(g(this,En).set(s,t),n){for(const[a,l]of g(this,co))a===t?s.skipped_effects.delete(l):s.skipped_effects.add(l);for(const[a,l]of g(this,Is))a===t?s.skipped_effects.delete(l.effect):s.skipped_effects.add(l.effect);s.oncommit(g(this,Hg)),s.ondiscard(g(this,bv))}else g(this,Hg).call(this)}}En=new WeakMap,co=new WeakMap,Is=new WeakMap,Ng=new WeakMap,Hg=new WeakMap,bv=new WeakMap;function ne(e,t,i=!1){var s=new qy(e),n=i?Vr:0;function o(r,a){s.ensure(r,a)}ed(()=>{var r=!1;t((a,l=!0)=>{r=!0,o(l,a)}),r||o(!1,null)},n)}function ds(e,t){return t}function ak(e,t,i){for(var s=e.items,n=[],o=t.length,r=0;r<o;r++)jy(t[r].e,n,!0);var a=o>0&&n.length===0&&i!==null;if(a){var l=i.parentNode;NI(l),l.append(i),s.clear(),so(e,t[0].prev,t[o-1].next)}AE(n,()=>{for(var c=0;c<o;c++){var d=t[c];a||(s.delete(d.k),so(e,d.prev,d.next)),Ti(d.e,!a)}})}function hi(e,t,i,s,n,o=null){var r=e,a={flags:t,items:new Map,first:null},l=(t&ZR)!==0;if(l){var c=e;r=c.appendChild(Wr())}var d=null,h=!1,u=new Map,f=Mr(()=>{var C=i();return tp(C)?C:C==null?[]:By(C)}),p,m;function v(){lk(m,p,a,u,r,n,t,s,i),o!==null&&(p.length===0?d?Ky(d):d=zs(()=>o(r)):d!==null&&Id(d,()=>{d=null}))}ed(()=>{m??(m=gt),p=b(f);var C=p.length;if(!(h&&C===0)){h=C===0;var w,S,y,R;if(bE()){var A=new Set,P=Et;for(S=0;S<C;S+=1){y=p[S],R=s(y,S);var T=a.items.get(R)??u.get(R);T?(t&(zv|Wv))!==0&&VE(T,y,S,t):(w=zE(null,a,null,null,y,R,S,n,t,i,!0),u.set(R,w)),A.add(R)}for(const[M,N]of a.items)A.has(M)||P.skipped_effects.add(N.e);P.oncommit(v)}else v();b(f)}})}function lk(e,t,i,s,n,o,r,a,l){var ye,De,Pe,Q;var c=(r&iI)!==0,d=(r&(zv|Wv))!==0,h=t.length,u=i.items,f=i.first,p=f,m,v=null,C,w=[],S=[],y,R,A,P;if(c)for(P=0;P<h;P+=1)y=t[P],R=a(y,P),A=u.get(R),A!==void 0&&((ye=A.a)==null||ye.measure(),(C??(C=new Set)).add(A));for(P=0;P<h;P+=1){if(y=t[P],R=a(y,P),A=u.get(R),A===void 0){var T=s.get(R);if(T!==void 0){s.delete(R),u.set(R,T);var M=v?v.next:p;so(i,v,T),so(i,T,M),CC(T,M,n),v=T}else{var N=p?p.e.nodes_start:n;v=zE(N,i,v,v===null?i.first:v.next,y,R,P,o,r,l)}u.set(R,v),w=[],S=[],p=v.next;continue}if(d&&VE(A,y,P,r),(A.e.f&js)!==0&&(Ky(A.e),c&&((De=A.a)==null||De.unfix(),(C??(C=new Set)).delete(A))),A!==p){if(m!==void 0&&m.has(A)){if(w.length<S.length){var _=S[0],L;v=_.prev;var z=w[0],q=w[w.length-1];for(L=0;L<w.length;L+=1)CC(w[L],_,n);for(L=0;L<S.length;L+=1)m.delete(S[L]);so(i,z.prev,q.next),so(i,v,z),so(i,q,_),p=_,v=q,P-=1,w=[],S=[]}else m.delete(A),CC(A,p,n),so(i,A.prev,A.next),so(i,A,v===null?i.first:v.next),so(i,v,A),v=A;continue}for(w=[],S=[];p!==null&&p.k!==R;)(p.e.f&js)===0&&(m??(m=new Set)).add(p),S.push(p),p=p.next;if(p===null)continue;A=p}w.push(A),v=A,p=A.next}if(p!==null||m!==void 0){for(var B=m===void 0?[]:By(m);p!==null;)(p.e.f&js)===0&&B.push(p),p=p.next;var Z=B.length;if(Z>0){var ee=(r&ZR)!==0&&h===0?n:null;if(c){for(P=0;P<Z;P+=1)(Pe=B[P].a)==null||Pe.measure();for(P=0;P<Z;P+=1)(Q=B[P].a)==null||Q.fix()}ak(i,B,ee)}}c&&rl(()=>{var te;if(C!==void 0)for(A of C)(te=A.a)==null||te.apply()}),e.first=i.first&&i.first.e,e.last=v&&v.e;for(var Y of s.values())Ti(Y.e);s.clear()}function VE(e,t,i,s){(s&zv)!==0&&Vc(e.v,t),(s&Wv)!==0?Vc(e.i,i):e.i=i}function zE(e,t,i,s,n,o,r,a,l,c,d){var h=(l&zv)!==0,u=(l&sI)===0,f=h?u?re(n,!1,!1):zr(n):n,p=(l&Wv)===0?r:zr(r),m={i:p,v:f,k:o,a:null,e:null,prev:i,next:s};try{if(e===null){var v=document.createDocumentFragment();v.append(e=Wr())}return m.e=zs(()=>a(e,f,p,c),mI),m.e.prev=i&&i.e,m.e.next=s&&s.e,i===null?d||(t.first=m):(i.next=m,i.e.next=m.e),s!==null&&(s.prev=m,s.e.prev=m.e),m}finally{}}function CC(e,t,i){for(var s=e.next?e.next.e.nodes_start:i,n=t?t.e.nodes_start:i,o=e.e.nodes_start;o!==null&&o!==s;){var r=op(o);n.before(o),o=r}}function so(e,t,i){t===null?e.first=i:(t.next=i,t.e.next=i&&i.e),i!==null&&(i.prev=t,i.e.prev=t&&t.e)}function Oe(e,t,i,s,n){var a;var o=(a=t.$$slots)==null?void 0:a[i],r=!1;o===!0&&(o=t[i==="default"?"children":i],r=!0),o===void 0||o(e,r?()=>s:s)}function ck(e,t,i){var s=new qy(e);ed(()=>{var n=t()??null;s.ensure(n,n&&(o=>i(o,n)))},Vr)}function dk(e,t,i,s,n,o){var r=null,a=e,l=new qy(a,!1);ed(()=>{const c=t()||null;var d=uI;if(c===null){l.ensure(null,null),yp(!0);return}return l.ensure(c,h=>{if(c){if(r=document.createElementNS(d,c),Zh(r,r),s){var u=r.appendChild(Wr());s(r,u)}gt.nodes_end=r,h.before(r)}}),yp(!0),()=>{c&&yp(!1)}},Vr),uu(()=>{yp(!0)})}function hk(e,t){var i=void 0,s;ed(()=>{i!==(i=t())&&(s&&(Ti(s),s=null),i&&(s=zs(()=>{rp(()=>i(e))})))})}function WE(e){var t,i,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(i=WE(e[t]))&&(s&&(s+=" "),s+=i)}else for(i in e)e[i]&&(s&&(s+=" "),s+=i);return s}function uk(){for(var e,t,i=0,s="",n=arguments.length;i<n;i++)(e=arguments[i])&&(t=WE(e))&&(s&&(s+=" "),s+=t);return s}function gk(e){return typeof e=="object"?uk(e):e??""}const P0=[...` 	
\r\fÂ \v\uFEFF`];function fk(e,t,i){var s=e==null?"":""+e;if(t&&(s=s?s+" "+t:t),i){for(var n in i)if(i[n])s=s?s+" "+n:n;else if(s.length)for(var o=n.length,r=0;(r=s.indexOf(n,r))>=0;){var a=r+o;(r===0||P0.includes(s[r-1]))&&(a===s.length||P0.includes(s[a]))?s=(r===0?"":s.substring(0,r))+s.substring(a+1):r=a}}return s===""?null:s}function T0(e,t=!1){var i=t?" !important;":";",s="";for(var n in e){var o=e[n];o!=null&&o!==""&&(s+=" "+n+": "+o+i)}return s}function wC(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function pk(e,t){if(t){var i="",s,n;if(Array.isArray(t)?(s=t[0],n=t[1]):s=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,r=0,a=!1,l=[];s&&l.push(...Object.keys(s).map(wC)),n&&l.push(...Object.keys(n).map(wC));var c=0,d=-1;const m=e.length;for(var h=0;h<m;h++){var u=e[h];if(a?u==="/"&&e[h-1]==="*"&&(a=!1):o?o===u&&(o=!1):u==="/"&&e[h+1]==="*"?a=!0:u==='"'||u==="'"?o=u:u==="("?r++:u===")"&&r--,!a&&o===!1&&r===0){if(u===":"&&d===-1)d=h;else if(u===";"||h===m-1){if(d!==-1){var f=wC(e.substring(c,d).trim());if(!l.includes(f)){u!==";"&&h++;var p=e.substring(c,h).trim();i+=" "+p+";"}}c=h+1,d=-1}}}}return s&&(i+=T0(s)),n&&(i+=T0(n,!0)),i=i.trim(),i===""?null:i}return e==null?null:String(e)}function Vt(e,t,i,s,n,o){var r=e.__className;if(r!==i||r===void 0){var a=fk(i,s,o);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=i}else if(o&&n!==o)for(var l in o){var c=!!o[l];(n==null||c!==!!n[l])&&e.classList.toggle(l,c)}return o}function bC(e,t={},i,s){for(var n in i){var o=i[n];t[n]!==o&&(i[n]==null?e.style.removeProperty(n):e.style.setProperty(n,o,s))}}function qn(e,t,i,s){var n=e.__style;if(n!==t){var o=pk(t,s);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}else s&&(Array.isArray(s)?(bC(e,i==null?void 0:i[0],s[0]),bC(e,i==null?void 0:i[1],s[1],"important")):bC(e,i,s));return s}function Vm(e,t,i=!1){if(e.multiple){if(t==null)return;if(!tp(t))return fI();for(var s of e.options)s.selected=t.includes(tg(s));return}for(s of e.options){var n=tg(s);if(LI(n,t)){s.selected=!0;return}}(!i||t!==void 0)&&(e.selectedIndex=-1)}function $E(e){var t=new MutationObserver(()=>{Vm(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),uu(()=>{t.disconnect()})}function mk(e,t,i=t){var s=new WeakSet,n=!0;Uy(e,"change",o=>{var r=o?"[selected]":":checked",a;if(e.multiple)a=[].map.call(e.querySelectorAll(r),tg);else{var l=e.querySelector(r)??e.querySelector("option:not([disabled])");a=l&&tg(l)}i(a),Et!==null&&s.add(Et)}),rp(()=>{var o=t();if(e===document.activeElement){var r=Ju??Et;if(s.has(r))return}if(Vm(e,o,n),n&&o===void 0){var a=e.querySelector(":checked");a!==null&&(o=tg(a),i(o))}e.__value=o,n=!1}),$E(e)}function tg(e){return"__value"in e?e.__value:e.value}const Su=Symbol("class"),xu=Symbol("style"),UE=Symbol("is custom element"),jE=Symbol("is html");function yY(e,t){var i=jv(e);i.value===(i.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function vk(e,t){var i=jv(e);i.checked!==(i.checked=t??void 0)&&(e.checked=t)}function Ck(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Ci(e,t,i,s){var n=jv(e);n[t]!==(n[t]=i)&&(t==="loading"&&(e[$M]=i),i==null?e.removeAttribute(t):typeof i!="string"&&KE(e).includes(t)?e[t]=i:e.setAttribute(t,i))}function wk(e,t,i,s,n=!1,o=!1){var r=jv(e),a=r[UE],l=!r[jE],c=t||{},d=e.tagName==="OPTION";for(var h in t)h in i||(i[h]=null);i.class?i.class=gk(i.class):i[Su]&&(i.class=null),i[xu]&&(i.style??(i.style=null));var u=KE(e);for(const S in i){let y=i[S];if(d&&S==="value"&&y==null){e.value=e.__value="",c[S]=y;continue}if(S==="class"){var f=e.namespaceURI==="http://www.w3.org/1999/xhtml";Vt(e,f,y,s,t==null?void 0:t[Su],i[Su]),c[S]=y,c[Su]=i[Su];continue}if(S==="style"){qn(e,y,t==null?void 0:t[xu],i[xu]),c[S]=y,c[xu]=i[xu];continue}var p=c[S];if(!(y===p&&!(y===void 0&&e.hasAttribute(S)))){c[S]=y;var m=S[0]+S[1];if(m!=="$$")if(m==="on"){const R={},A="$$"+S;let P=S.slice(2);var v=JI(P);if(XI(P)&&(P=P.slice(0,-7),R.capture=!0),!v&&p){if(y!=null)continue;e.removeEventListener(P,c[A],R),c[A]=null}if(y!=null)if(v)e[`__${P}`]=y,ap([P]);else{let T=function(M){c[S].call(this,M)};c[A]=NE(P,e,T,R)}else v&&(e[`__${P}`]=void 0)}else if(S==="style")Ci(e,S,y);else if(S==="autofocus")$y(e,!!y);else if(!a&&(S==="__value"||S==="value"&&y!=null))e.value=e.__value=y;else if(S==="selected"&&d)Ck(e,y);else{var C=S;l||(C=ek(C));var w=C==="defaultValue"||C==="defaultChecked";if(y==null&&!a&&!w)if(r[S]=null,C==="value"||C==="checked"){let R=e;const A=t===void 0;if(C==="value"){let P=R.defaultValue;R.removeAttribute(C),R.defaultValue=P,R.value=R.__value=A?P:null}else{let P=R.defaultChecked;R.removeAttribute(C),R.defaultChecked=P,R.checked=A?P:!1}}else e.removeAttribute(S);else w||u.includes(C)&&(a||typeof y!="string")?(e[C]=y,C in r&&(r[C]=Gi)):typeof y!="function"&&Ci(e,C,y)}}}return c}function Fw(e,t,i=[],s=[],n=[],o,r=!1,a=!1){uE(n,i,s,l=>{var c=void 0,d={},h=e.nodeName==="SELECT",u=!1;if(ed(()=>{var p=t(...l.map(b)),m=wk(e,c,p,o,r,a);u&&h&&"value"in p&&Vm(e,p.value);for(let C of Object.getOwnPropertySymbols(d))p[C]||Ti(d[C]);for(let C of Object.getOwnPropertySymbols(p)){var v=p[C];C.description===gI&&(!c||v!==c[C])&&(d[C]&&Ti(d[C]),d[C]=zs(()=>hk(e,()=>v))),m[C]=v}c=m}),h){var f=e;rp(()=>{Vm(f,c.value,!0),$E(f)})}u=!0})}function jv(e){return e.__attributes??(e.__attributes={[UE]:e.nodeName.includes("-"),[jE]:e.namespaceURI===hI})}var D0=new Map;function KE(e){var t=e.getAttribute("is")||e.nodeName,i=D0.get(t);if(i)return i;D0.set(t,i=[]);for(var s,n=e,o=Element.prototype;o!==n;){s=KR(n);for(var r in s)s[r].set&&i.push(r);n=Vy(n)}return i}const bk=()=>performance.now(),Ar={tick:e=>requestAnimationFrame(e),now:()=>bk(),tasks:new Set};function qE(){const e=Ar.now();Ar.tasks.forEach(t=>{t.c(e)||(Ar.tasks.delete(t),t.f())}),Ar.tasks.size!==0&&Ar.tick(qE)}function yk(e){let t;return Ar.tasks.size===0&&Ar.tick(qE),{promise:new Promise(i=>{Ar.tasks.add(t={c:e,f:i})}),abort(){Ar.tasks.delete(t)}}}function Sp(e,t){hu(()=>{e.dispatchEvent(new CustomEvent(t))})}function Sk(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(i=>i[0].toUpperCase()+i.slice(1)).join("")}function M0(e){const t={},i=e.split(";");for(const s of i){const[n,o]=s.split(":");if(!n||o===void 0)break;const r=Sk(n.trim());t[r]=o.trim()}return t}const xk=e=>e;function YE(e,t,i,s){var n=(e&lI)!==0,o="both",r,a=t.inert,l=t.style.overflow,c,d;function h(){return hu(()=>r??(r=i()(t,(s==null?void 0:s())??{},{direction:o})))}var u={is_global:n,in(){t.inert=a,Sp(t,"introstart"),c=Pw(t,h(),d,1,()=>{Sp(t,"introend"),c==null||c.abort(),c=r=void 0,t.style.overflow=l})},out(v){t.inert=!0,Sp(t,"outrostart"),d=Pw(t,h(),c,0,()=>{Sp(t,"outroend"),v==null||v()})},stop:()=>{c==null||c.abort(),d==null||d.abort()}},f=gt;if((f.transitions??(f.transitions=[])).push(u),Bm){var p=n;if(!p){for(var m=f.parent;m&&(m.f&Vr)!==0;)for(;(m=m.parent)&&(m.f&Bo)===0;);p=!m||(m.f&Vv)!==0}p&&rp(()=>{X(()=>u.in())})}}function Pw(e,t,i,s,n){var o=s===1;if(md(t)){var r,a=!1;return rl(()=>{if(!a){var v=t({direction:o?"in":"out"});r=Pw(e,v,i,s,n)}}),{abort:()=>{a=!0,r==null||r.abort()},deactivate:()=>r.deactivate(),reset:()=>r.reset(),t:()=>r.t()}}if(i==null||i.deactivate(),!(t!=null&&t.duration))return n(),{abort:Bn,deactivate:Bn,reset:Bn,t:()=>s};const{delay:l=0,css:c,tick:d,easing:h=xk}=t;var u=[];if(o&&i===void 0&&(d&&d(0,1),c)){var f=M0(c(0,1));u.push(f,f)}var p=()=>1-s,m=e.animate(u,{duration:l,fill:"forwards"});return m.onfinish=()=>{m.cancel();var v=(i==null?void 0:i.t())??1-s;i==null||i.abort();var C=s-v,w=t.duration*Math.abs(C),S=[];if(w>0){var y=!1;if(c)for(var R=Math.ceil(w/16.666666666666668),A=0;A<=R;A+=1){var P=v+C*h(A/R),T=M0(c(P,1-P));S.push(T),y||(y=T.overflow==="hidden")}y&&(e.style.overflow="hidden"),p=()=>{var M=m.currentTime;return v+C*h(M/w)},d&&yk(()=>{if(m.playState!=="running")return!1;var M=p();return d(M,1-M),!0})}m=e.animate(S,{duration:w,fill:"forwards"}),m.onfinish=()=>{p=()=>s,d==null||d(s,1-s),n()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=Bn)},deactivate:()=>{n=Bn},reset:()=>{s===0&&(d==null||d(1,0))},t:()=>p()}}function eu(e,t,i=t){var s=new WeakSet;Uy(e,"input",async n=>{var o=n?e.defaultValue:e.value;if(o=yC(e)?SC(o):o,i(o),Et!==null&&s.add(Et),await zc(),o!==(o=t())){var r=e.selectionStart,a=e.selectionEnd,l=e.value.length;if(e.value=o??"",a!==null){var c=e.value.length;r===a&&a===l&&c>l?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=r,e.selectionEnd=Math.min(a,c))}}}),X(t)==null&&e.value&&(i(yC(e)?SC(e.value):e.value),Et!==null&&s.add(Et)),gu(()=>{var n=t();if(e===document.activeElement){var o=Ju??Et;if(s.has(o))return}yC(e)&&n===SC(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function xp(e,t,i=t){Uy(e,"change",s=>{var n=s?e.defaultChecked:e.checked;i(n)}),X(t)==null&&i(e.checked),gu(()=>{var s=t();e.checked=!!s})}function yC(e){var t=e.type;return t==="number"||t==="range"}function SC(e){return e===""?null:+e}function sa(e,t,i){var s=kr(e,t);s&&s.set&&(e[t]=i,uu(()=>{e[t]=null}))}function I0(e,t){return e===t||(e==null?void 0:e[Lo])===t}function ns(e={},t,i,s){return rp(()=>{var n,o;return gu(()=>{n=o,o=[],X(()=>{e!==i(...o)&&(t(e,...o),n&&I0(i(...n),e)&&t(null,...n))})}),()=>{rl(()=>{o&&I0(i(...o),e)&&t(null,...o)})}}),e}function Rk(e){return function(...t){var i=t[0];i.target===this&&(e==null||e.apply(this,t))}}function Ic(e){return function(...t){var i=t[0];return i.stopPropagation(),e==null?void 0:e.apply(this,t)}}function Ek(e){return function(...t){var i=t[0];return i.preventDefault(),e==null?void 0:e.apply(this,t)}}function vt(e=!1){const t=wt,i=t.l.u;if(!i)return;let s=()=>ve(t.s);if(e){let n=0,o={};const r=np(()=>{let a=!1;const l=t.s;for(const c in l)l[c]!==o[c]&&(o[c]=l[c],a=!0);return a&&n++,n});s=()=>b(r)}i.b.length&&BI(()=>{k0(t,s),vw(i.b)}),Rw(()=>{const n=X(()=>i.m.map(WM));return()=>{for(const o of n)typeof o=="function"&&o()}}),i.a.length&&Rw(()=>{k0(t,s),vw(i.a)})}function k0(e,t){if(e.l.s)for(const i of e.l.s)b(i);t()}function XE(e){var t=zr(0);return function(){return arguments.length===1?(O(t,b(t)+1),arguments[0]):(b(t),e())}}function Kv(e,t){var o;var i=(o=e.$$events)==null?void 0:o[t.type],s=tp(i)?i.slice():i==null?[]:[i];for(var n of s)n.call(this,t)}function QE(e,t,i){if(e==null)return t(void 0),Bn;const s=X(()=>e.subscribe(t,i));return s.unsubscribe?()=>s.unsubscribe():s}const ud=[];function Zt(e,t=Bn){let i=null;const s=new Set;function n(a){if(iE(e,a)&&(e=a,i)){const l=!ud.length;for(const c of s)c[1](),ud.push(c,e);if(l){for(let c=0;c<ud.length;c+=2)ud[c][0](ud[c+1]);ud.length=0}}}function o(a){n(a(e))}function r(a,l=Bn){const c=[a,l];return s.add(c),s.size===1&&(i=t(n,o)||Bn),a(e),()=>{s.delete(c),s.size===0&&i&&(i(),i=null)}}return{set:n,update:o,subscribe:r}}function ii(e){let t;return QE(e,i=>t=i)(),t}let Rp=!1,Tw=Symbol();function ht(e,t,i){const s=i[t]??(i[t]={store:null,source:re(void 0),unsubscribe:Bn});if(s.store!==e&&!(Tw in i))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=Bn;else{var n=!0;s.unsubscribe=QE(e,o=>{n?s.source.v=o:O(s.source,o)}),n=!1}return e&&Tw in i?ii(e):b(s.source)}function ra(e,t){return e.set(t),t}function Xs(){const e={};function t(){uu(()=>{for(var i in e)e[i].unsubscribe();jR(e,Tw,{enumerable:!1,value:!0})})}return[e,t]}function Ak(e){var t=Rp;try{return Rp=!1,[e(),Rp]}finally{Rp=t}}function _0(e,t=1){const i=e();return e(i+t),i}const Fk={get(e,t){if(!e.exclude.includes(t))return b(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,i){if(!(t in e.special)){var s=gt;try{mn(e.parent_effect),e.special[t]=ce({get[t](){return e.props[t]}},t,eE)}finally{mn(s)}}return e.special[t](i),b0(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),b0(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function $e(e,t){return new Proxy({props:e,exclude:t,special:{},version:zr(0),parent_effect:gt},Fk)}const Pk={get(e,t){let i=e.props.length;for(;i--;){let s=e.props[i];if(md(s)&&(s=s()),typeof s=="object"&&s!==null&&t in s)return s[t]}},set(e,t,i){let s=e.props.length;for(;s--;){let n=e.props[s];md(n)&&(n=n());const o=kr(n,t);if(o&&o.set)return o.set(i),!0}return!1},getOwnPropertyDescriptor(e,t){let i=e.props.length;for(;i--;){let s=e.props[i];if(md(s)&&(s=s()),typeof s=="object"&&s!==null&&t in s){const n=kr(s,t);return n&&!n.configurable&&(n.configurable=!0),n}}},has(e,t){if(t===Lo||t===JR)return!1;for(let i of e.props)if(md(i)&&(i=i()),i!=null&&t in i)return!0;return!1},ownKeys(e){const t=[];for(let i of e.props)if(md(i)&&(i=i()),!!i){for(const s in i)t.includes(s)||t.push(s);for(const s of Object.getOwnPropertySymbols(i))t.includes(s)||t.push(s)}return t}};function et(...e){return new Proxy({props:e},Pk)}function ce(e,t,i,s){var S;var n=!du||(i&oI)!==0,o=(i&rI)!==0,r=(i&aI)!==0,a=s,l=!0,c=()=>(l&&(l=!1,a=r?X(s):s),a),d;if(o){var h=Lo in e||JR in e;d=((S=kr(e,t))==null?void 0:S.set)??(h&&t in e?y=>e[t]=y:void 0)}var u,f=!1;o?[u,f]=Ak(()=>e[t]):u=e[t],u===void 0&&s!==void 0&&(u=c(),d&&(n&&QM(),d(u)));var p;if(n?p=()=>{var y=e[t];return y===void 0?c():(l=!0,y)}:p=()=>{var y=e[t];return y!==void 0&&(a=void 0),y===void 0?a:y},n&&(i&eE)===0)return p;if(d){var m=e.$$legacy;return(function(y,R){return arguments.length>0?((!n||!R||m||f)&&d(R?p():y),y):p()})}var v=!1,C=((i&nI)!==0?np:Mr)(()=>(v=!1,p()));o&&b(C);var w=gt;return(function(y,R){if(arguments.length>0){const A=R?b(C):n&&o?Fd(y):y;return O(C,A),v=!0,a!==void 0&&(a=A),y}return td&&v||(w.f&ja)!==0?C.v:b(C)})}function Mi(e){wt===null&&ip(),du&&wt.l!==null?ZE(wt).m.push(e):Rw(()=>{const t=X(e);if(typeof t=="function")return t})}function Yr(e){wt===null&&ip(),Mi(()=>()=>X(e))}function Tk(e,t,{bubbles:i=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:i,cancelable:s})}function JE(){const e=wt;return e===null&&ip(),(t,i,s)=>{var o;const n=(o=e.s.$$events)==null?void 0:o[t];if(n){const r=tp(n)?n.slice():[n],a=Tk(t,i,s);for(const l of r)l.call(e.x,a);return!a.defaultPrevented}return!0}}function Yy(e){wt===null&&ip(),wt.l===null&&XM(),ZE(wt).a.push(e)}function ZE(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Dk="5";var VR;typeof window<"u"&&((VR=window.__svelte??(window.__svelte={})).v??(VR.v=new Set)).add(Dk);CI();const za=Zt(null),Wn=Zt(""),xC=Zt(!0),Mk="App2KSecureDB",Ya="authStore",Xa="cryptoKeys",Xy="refreshToken_encrypted",Qy="aes-key",kc="__app2k_aes_key_b64",Wa="__app2k_refresh_token_b64";let pl=null;function L0(e){const t=new Uint8Array(e);let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);return btoa(i)}function RC(e){const t=atob(e),i=t.length,s=new Uint8Array(i);for(let n=0;n<i;n++)s[n]=t.charCodeAt(n);return s.buffer}function lp(){return new Promise((e,t)=>{const i=indexedDB.open(Mk,3);i.onupgradeneeded=()=>{const s=i.result;s.objectStoreNames.contains(Ya)||s.createObjectStore(Ya),s.objectStoreNames.contains(Xa)||s.createObjectStore(Xa)},i.onsuccess=()=>e(i.result),i.onerror=()=>t(i.error),i.onblocked=()=>{console.warn("IndexedDB blocked"),t(new Error("Database blocked"))}})}async function Ik(e){try{const i=(await lp()).transaction(Xa,"readwrite");i.objectStore(Xa).put(e,Qy);try{const s=L0(e);localStorage.setItem(kc,s)}catch(s){console.warn("Backup key to localStorage failed:",s)}return new Promise((s,n)=>{i.oncomplete=()=>s(),i.onerror=()=>{console.warn("saveExportedKey tx error:",i.error),n(i.error)}})}catch(t){console.warn("saveExportedKey fallback -> store in localStorage only",t);try{const i=L0(e);localStorage.setItem(kc,i);return}catch{throw t}}}async function kk(){try{const i=(await lp()).transaction(Xa,"readonly").objectStore(Xa).get(Qy);return await new Promise(s=>{i.onsuccess=()=>{const n=i.result;if(n instanceof ArrayBuffer)s(n);else if(n&&n.buffer instanceof ArrayBuffer)s(n.buffer);else{const o=localStorage.getItem(kc);if(o)try{s(RC(o))}catch(r){console.warn("Failed to parse key from localStorage backup:",r),s(null)}else s(null)}},i.onerror=()=>{const n=localStorage.getItem(kc);if(n)try{s(RC(n))}catch(o){console.warn("Failed to parse key from localStorage backup:",o),s(null)}else s(null)}})}catch(e){console.warn("loadExportedKey indexdb open failed, try localStorage:",e);const t=localStorage.getItem(kc);if(t)try{return RC(t)}catch{return null}return null}}async function eA(){if(pl)return pl;const e=await kk();if(e)try{return pl=await crypto.subtle.importKey("raw",e,{name:"AES-GCM"},!0,["encrypt","decrypt"]),pl}catch(i){console.warn("importKey failed, will regenerate key:",i)}pl=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);const t=await crypto.subtle.exportKey("raw",pl);return await Ik(t),pl}async function _k(e){const t=await eA(),i=crypto.getRandomValues(new Uint8Array(12)),s=new TextEncoder().encode(String(e));return{cipher:await crypto.subtle.encrypt({name:"AES-GCM",iv:i},t,s),iv:i.buffer}}async function Lk(e,t){const i=await eA(),s=e instanceof ArrayBuffer?new Uint8Array(e):e instanceof Uint8Array?e:e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):null,n=t instanceof ArrayBuffer?new Uint8Array(t):t instanceof Uint8Array?t:t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer):null;if(!s||!n)throw new Error("Invalid cipher or iv format");const o=await crypto.subtle.decrypt({name:"AES-GCM",iv:n},i,s);return new TextDecoder().decode(o)}async function Jy(e){if(!e)return!1;const t=await _k(e);try{const s=(await lp()).transaction(Ya,"readwrite");s.objectStore(Ya).put({cipher:t.cipher,iv:t.iv},Xy);try{localStorage.setItem(Wa,btoa(String(e)))}catch(o){console.warn("Could not backup token to localStorage:",o)}return await new Promise((o,r)=>{s.oncomplete=()=>o(!0),s.onerror=()=>r(s.error)})}catch(i){console.warn("saveRefreshToken indexeddb failed, fallback to localStorage",i);try{return localStorage.setItem(Wa,btoa(String(e))),!0}catch(s){throw s}}}async function tA(){try{const i=(await lp()).transaction(Ya,"readonly").objectStore(Ya).get(Xy);return await new Promise(s=>{i.onsuccess=async()=>{const n=i.result;if(!n){const a=localStorage.getItem(Wa);if(a)try{s(atob(a))}catch{s(null)}else s(null);return}const{cipher:o,iv:r}=n;try{const a=await Lk(o,r);s(a)}catch(a){console.warn("Token decrypt failed â clearing storage",a),await Zy();const l=localStorage.getItem(Wa);if(l)try{s(atob(l))}catch{s(null)}else s(null)}},i.onerror=()=>{const n=localStorage.getItem(Wa);if(n)try{s(atob(n))}catch{s(null)}else s(null)}})}catch(e){console.warn("getRefreshToken fallback localStorage:",e);const t=localStorage.getItem(Wa);if(t)try{return atob(t)}catch{return null}return null}}async function Zy(){try{const e=await lp(),t=e.transaction(Ya,"readwrite");t.objectStore(Ya).delete(Xy);const i=e.transaction(Xa,"readwrite");return i.objectStore(Xa).delete(Qy),localStorage.removeItem(kc),localStorage.removeItem(Wa),await Promise.all([new Promise(s=>{t.oncomplete=s,t.onerror=s}),new Promise(s=>{i.oncomplete=s,i.onerror=s})])}catch(e){console.warn("clearRefreshToken fallback:",e);try{localStorage.removeItem(kc),localStorage.removeItem(Wa)}catch{}return}}/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2023 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const Ok={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Nk=GE("<svg><!><!></svg>");function Ct(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]),s=$e(i,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);ft(t,!1);let n=ce(t,"name",8,void 0),o=ce(t,"color",8,"currentColor"),r=ce(t,"size",8,24),a=ce(t,"strokeWidth",8,2),l=ce(t,"absoluteStrokeWidth",8,!1),c=ce(t,"iconNode",24,()=>[]);const d=(...p)=>p.filter((m,v,C)=>!!m&&C.indexOf(m)===v).join(" ");vt();var h=Nk();Fw(h,(p,m)=>({...Ok,...s,width:r(),height:r(),stroke:o(),"stroke-width":p,class:m}),[()=>(ve(l()),ve(a()),ve(r()),X(()=>l()?Number(a())*24/Number(r()):a())),()=>(ve(n()),ve(i),X(()=>d("lucide-icon","lucide",n()?`lucide-${n()}`:"",i.class)))]);var u=D(h);hi(u,1,c,ds,(p,m)=>{var v=Sl(()=>YR(b(m),2));let C=()=>b(v)[0],w=()=>b(v)[1];var S=de(),y=K(S);dk(y,C,!0,(R,A)=>{Fw(R,()=>({...w()}))}),I(p,S)});var f=k(u);Oe(f,t,"default",{}),I(e,h),pt()}function iA(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];Ct(e,et({name:"arrow-left"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function Hk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M16 2v2"}],["path",{d:"M7 22v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2"}],["path",{d:"M8 2v2"}],["circle",{cx:"12",cy:"11",r:"3"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}]];Ct(e,et({name:"contact"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function Gk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];Ct(e,et({name:"copy"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function Bk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}]];Ct(e,et({name:"ellipsis-vertical"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function Vk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]];Ct(e,et({name:"ellipsis"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function zk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"m15 15 6 6"}],["path",{d:"m15 9 6-6"}],["path",{d:"M21 16v5h-5"}],["path",{d:"M21 8V3h-5"}],["path",{d:"M3 16v5h5"}],["path",{d:"m3 21 6-6"}],["path",{d:"M3 8V3h5"}],["path",{d:"M9 9 3 3"}]];Ct(e,et({name:"expand"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function Wk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];Ct(e,et({name:"file-text"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function $k(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}]];Ct(e,et({name:"file"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function sA(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"m15 17 5-5-5-5"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12"}]];Ct(e,et({name:"forward"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function nA(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]];Ct(e,et({name:"image"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function Uk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"m22 11-1.296-1.296a2.4 2.4 0 0 0-3.408 0L11 16"}],["path",{d:"M4 8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2"}],["circle",{cx:"13",cy:"7",r:"1",fill:"currentColor"}],["rect",{x:"8",y:"2",width:"14",height:"14",rx:"2"}]];Ct(e,et({name:"images"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function jk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"}]];Ct(e,et({name:"maximize"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function Kk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"}],["path",{d:"M8 12h.01"}],["path",{d:"M12 12h.01"}],["path",{d:"M16 12h.01"}]];Ct(e,et({name:"message-circle-more"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function qk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"}]];Ct(e,et({name:"message-circle"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function Yk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z"}],["path",{d:"M7 11h10"}],["path",{d:"M7 15h6"}],["path",{d:"M7 7h8"}]];Ct(e,et({name:"message-square-text"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function Xk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z"}]];Ct(e,et({name:"message-square"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function Qk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3"}]];Ct(e,et({name:"minimize"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function oA(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M9 3v18"}],["path",{d:"m16 15-3-3 3-3"}]];Ct(e,et({name:"panel-left-close"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function rA(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M9 3v18"}],["path",{d:"m14 9 3 3-3 3"}]];Ct(e,et({name:"panel-left-open"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function Jk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551"}]];Ct(e,et({name:"paperclip"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function Zk(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];Ct(e,et({name:"refresh-cw"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function e_(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4"}],["path",{d:"m9 17-5-5 5-5"}]];Ct(e,et({name:"reply"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function O0(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];Ct(e,et({name:"rotate-ccw"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function eS(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]];Ct(e,et({name:"search"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function t_(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]];Ct(e,et({name:"send"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function i_(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"}],["circle",{cx:"12",cy:"12",r:"3"}]];Ct(e,et({name:"settings"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function s_(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"m15 15 6 6m-6-6v4.8m0-4.8h4.8"}],["path",{d:"M9 19.8V15m0 0H4.2M9 15l-6 6"}],["path",{d:"M15 4.2V9m0 0h4.8M15 9l6-6"}],["path",{d:"M9 4.2V9m0 0H4.2M9 9 3 3"}]];Ct(e,et({name:"shrink"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function n_(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9"}]];Ct(e,et({name:"smile"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function o_(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344"}],["path",{d:"m9 11 3 3L22 4"}]];Ct(e,et({name:"square-check-big"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function aA(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];Ct(e,et({name:"trash-2"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function lA(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11"}]];Ct(e,et({name:"user-plus"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function cA(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}],["circle",{cx:"9",cy:"7",r:"4"}]];Ct(e,et({name:"users"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function r_(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2"}]];Ct(e,et({name:"video"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}function dA(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const s=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];Ct(e,et({name:"x"},()=>i,{get iconNode(){return s},children:(n,o)=>{var r=de(),a=K(r);Oe(a,t,"default",{}),I(n,r)},$$slots:{default:!0}}))}var a_=W("<img/>");function Ep(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]),s=$e(i,["name"]);let n=ce(t,"name",8,"icon");var o=a_();Fw(o,()=>({src:`./assets/${n()}.svg`,loading:"lazy",...s})),I(e,o)}const l_="modulepreload",c_=function(e,t){return new URL(e,t).href},N0={},Al=function(t,i,s){let n=Promise.resolve();if(i&&i.length>0){let r=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};const a=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=r(i.map(d=>{if(d=c_(d,s),d in N0)return;N0[d]=!0;const h=d.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(!!s)for(let m=a.length-1;m>=0;m--){const v=a[m];if(v.href===d&&(!h||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${u}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":l_,h||(p.as="script"),p.crossOrigin="",p.href=d,c&&p.setAttribute("nonce",c),document.head.appendChild(p),h)return new Promise((m,v)=>{p.addEventListener("load",m),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return n.then(r=>{for(const a of r||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},ig=Zt("desktop"),H0=()=>{window.innerWidth<640?ig.set("mobile"):window.innerWidth>=640&&window.innerWidth<1024?ig.set("tablet"):ig.set("desktop")};typeof window<"u"&&(H0(),window.addEventListener("resize",H0));var d_=W('<div class="loading-overlay svelte-14fu6kf"><div class="loading-box svelte-14fu6kf"><div class="spinner svelte-14fu6kf"></div> <p class="loading-message svelte-14fu6kf"> </p></div></div>');function hA(e,t){let i=ce(t,"message",8,"Loading...");var s=d_(),n=D(s),o=k(D(n),2),r=D(o);xe(()=>Be(r,i())),I(e,s)}function h_(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]),s=$e(i,[]);ft(t,!1);const n=()=>ht(ig,"$screen",o),[o,r]=Xs();let a=re(null),l="";async function c(){const p=ii(ig);if(p!==l)if(l=p,p==="mobile"){const m=await Al(()=>import("./MobileLayout-BABVFqWZ.js"),__vite__mapDeps([0,1,2]),import.meta.url);O(a,m.default)}else if(p==="tablet"){const m=await Al(()=>import("./DesktopLayout-v_NQbr1h.js").then(v=>v.D),__vite__mapDeps([3,1,4]),import.meta.url);O(a,m.default)}else{const m=await Al(()=>import("./DesktopLayout-v_NQbr1h.js").then(v=>v.D),__vite__mapDeps([3,1,4]),import.meta.url);O(a,m.default)}}Mi(async()=>{await c()}),Lt(()=>n(),()=>{n()&&c()}),Ys(),vt();var d=de(),h=K(d);{var u=p=>{var m=de(),v=K(m);ck(v,()=>b(a),(C,w)=>{w(C,et(()=>s))}),I(p,m)},f=p=>{hA(p,{message:"Äang táº£i..."})};ne(h,p=>{b(a)?p(u):p(f,!1)})}I(e,d),pt(),r()}class qv{constructor({baseURL:t="",withCredentials:i=!1,defaultHeaders:s={"Content-Type":"application/json"},defaultResponseType:n="json"}={}){this.baseURL="https://render-server-ezuf.onrender.com",this.withCredentials=i,this.defaultHeaders=s,this.defaultResponseType=n,this._isRefreshing=!1,this._refreshQueue=[],this.latestAccessToken=null}setAccessToken(t){typeof t=="string"?(Wn.set(t),this.latestAccessToken=t):(Wn.set(""),this.latestAccessToken=null)}_enqueueRefresh(t,i){this._refreshQueue.push({resolve:t,reject:i})}_resolveRefreshQueue(t){this._refreshQueue.forEach(i=>i.resolve(t)),this._refreshQueue=[]}_rejectRefreshQueue(t){this._refreshQueue.forEach(i=>i.reject(t)),this._refreshQueue=[]}async _refreshAccessToken(){if(this._isRefreshing)return new Promise((t,i)=>{this._enqueueRefresh(t,i)});this._isRefreshing=!0;try{const t=await tA();if(!t)throw new Error("Refresh token not found");const i=await fetch(`${this.baseURL}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(!i.ok)throw new Error(`Refresh failed: HTTP ${i.status}`);const s=await i.json();if(!(s!=null&&s.accessToken))throw new Error("Refresh response missing accessToken");return this.setAccessToken(s.accessToken),s.refreshToken&&await Jy(s.refreshToken),this._resolveRefreshQueue(s.accessToken),s.accessToken}catch(t){try{await Zy()}catch(i){console.warn("clearRefreshToken failed:",i)}this.setAccessToken("");try{za.set(null)}catch{}throw this._rejectRefreshQueue(t),t}finally{this._isRefreshing=!1}}async request(t,{method:i="GET",data:s=null,params:n=null,headers:o={},responseType:r=this.defaultResponseType,withCredentials:a=this.withCredentials,retry:l=!0}={}){const c=`${this.baseURL}${t}${n?"?"+new URLSearchParams(n):""}`,d=this.latestAccessToken??ii(Wn)??"",h={...s instanceof FormData?{}:this.defaultHeaders,...d?{Authorization:`Bearer ${d}`}:{},...o},u={method:i,credentials:a?"include":"same-origin",headers:h};s&&(u.body=s instanceof FormData?s:JSON.stringify(s));let f;try{f=await fetch(c,u)}catch(p){throw p}if(f.status===401&&l)try{const p=await this._refreshAccessToken(),m={...s instanceof FormData?{}:this.defaultHeaders,...o||{},...p?{Authorization:`Bearer ${p}`}:{}},v={method:i,credentials:a?"include":"same-origin",headers:m};s&&(v.body=s instanceof FormData?s:JSON.stringify(s));const C=await fetch(c,v);if(!C.ok)throw new Error(`HTTP ${C.status}: ${C.statusText}`);return this._parseResponseByType(C,r)}catch(p){throw p}if(!f.ok)throw new Error(`HTTP ${f.status}: ${f.statusText}`);return this._parseResponseByType(f,r)}_parseResponseByType(t,i){switch(i){case"json":return t.json();case"text":return t.text();case"blob":return t.blob();case"arrayBuffer":return t.arrayBuffer();case"formData":return t.formData();default:return t}}get(t,i={}){return this.request(t,{...i,method:"GET"})}post(t,i,s={}){return this.request(t,{...s,method:"POST",data:i})}put(t,i,s={}){return this.request(t,{...s,method:"PUT",data:i})}delete(t,i={}){return this.request(t,{...i,method:"DELETE"})}}const uA=new qv;async function u_(e){const t=new FormData;return t.append("image",e,"capture.jpg"),uA.post("/capture",t)}async function G0(e,t=!1){const i=new FormData;return i.append("chunk",e,t?"final.webm":"chunk.webm"),i.append("stop",t.toString()),uA.post("/stream-input",i)}const tS=new qv,qp=Zt("ð Connecting..."),Vn=Zt([]),Fr=Zt(null),Dw=Zt(""),Yv=Zt([]),$n=Zt(null),xn=Zt(null),$a=Zt(!1),zn=Zt(new Set),B0=Zt(null);za.subscribe(e=>{e?(Fr.set(e.id),Dw.set(e.name)):(Fr.set(null),Dw.set(""))});const g_="wss://render-server-ezuf.onrender.com";let at=null,Mw=null,Iw=!1;function gA(){if(console.log("connectWebSocket....",at==null?void 0:at.readyState,WebSocket.CLOSED),at&&at.readyState!==WebSocket.CLOSED)return console.log("âï¸ WS already connected or connecting"),at;const e=ii(Wn);if(!e){console.log("No access token â DO NOT CONNECT WS yet.");return}Iw=!1,at=new WebSocket(g_),at.onopen=()=>{at.send(JSON.stringify({type:"auth",token:e})),qp.set("ð¢ Connected")},at.onmessage=async i=>{try{const s=JSON.parse(i.data);if(s.type==="auth_error"){console.warn("Token expired â refreshing...",new Date().toISOString());try{const o=(await tS.post("/auth/refresh",{},{withCredentials:!0})).accessToken;Wn.set(o),t({type:"auth",token:o})}catch(n){console.error("Lá»i Refresh token failed:",n),at.close()}return}if(s.type==="recent_contacts"){Yv.set([...s.conversations]);return}if(s.type==="welcome"){console.log("welcome",s);return}if(s.type==="chat"){const n=(s==null?void 0:s.payload)??{};if(!f_(n))return;Vn.update(o=>V0(o,[n]));return}if(s.type==="messages"){if(s.rows.length===0)return;Vn.update(n=>V0(n,s.rows,{prepend:!0}));return}if(s.type==="reaction_update"){const{messageId:n,reactions:o}=s;Vn.update(r=>r.map(a=>a.id===n?{...a,reactions:o}:a));return}if(s.type==="message_recalled"){const{messageId:n}=s;Vn.update(o=>o.map(r=>r.id===n?{...r,status:1}:r));return}if(s.type==="message_deleted_self"){const{messageId:n}=s;Vn.update(o=>o.filter(r=>r.id!==n));return}}catch{console.warn("â ï¸ Invalid WS message:",i.data)}},at.onclose=()=>{const i=ii(Wn);if(Iw||!i){console.log("ð WS closed manually or token missing â NO reconnect"),qp.set("âª WS closed");return}console.log("ð´ WS disconnected â retry in 2s..."),qp.set("ð´ Disconnected â retrying..."),clearTimeout(Mw),Mw=setTimeout(gA,2e3)};function t(i){if(at)if(at.readyState===WebSocket.OPEN)at.send(JSON.stringify(i));else{const s=()=>{at.send(JSON.stringify(i)),at.removeEventListener("open",s)};at.addEventListener("open",s)}}return at}function f_(e){const t=ii($n);return t?e.conversationId===t:!1}function Un(e){if(!at||at.readyState!==WebSocket.OPEN){console.warn("â ï¸ WS not ready");return}at.send(JSON.stringify(e))}const p_=e=>(at==null?void 0:at.readyState)===WebSocket.OPEN&&at.send(e),m_=()=>(at==null?void 0:at.readyState)===WebSocket.OPEN&&at.send("stop");function kw(){at&&(console.log("ð Closing WS manually..."),Iw=!0,clearTimeout(Mw),at.close(),at=null)}function Cg(e,t={}){!at||at.readyState!==WebSocket.OPEN||at.send(JSON.stringify({type:"load_messages",conversationId:e,firstMsg:t.firstMsg??null}))}function V0(e,t,{prepend:i=!1}={}){const s=new Map;e.forEach(o=>s.set(o.id,o)),t.forEach(o=>s.set(o.id,o));const n=Array.from(s.values());return i?n.sort((o,r)=>new Date(o.created_at)-new Date(r.created_at)):n}async function v_(e){if(!e)throw new Error("File is required");const t=new FormData;t.append("file",e);try{return await tS.post("/api/upload",t,{withCredentials:!0,responseType:"json"})}catch(i){throw console.error("â uploadFile failed:",i),i}}async function C_(e){const t=new FormData;e.forEach(i=>t.append("images",i));try{return await tS.post("/api/upload/images",t,{withCredentials:!0,responseType:"json"})}catch(i){throw console.error("â uploadFile failedss:",i),i}}const w_=new Audio("/sounds/shutter.mp3"),b_=new Audio("/sounds/recording.mp3"),y_=new Audio("/sounds/stop-recording.mp3");function iS(e){e.currentTime=0,e.play().catch(t=>console.warn("KhÃ´ng phÃ¡t ÄÆ°á»£c Ã¢m thanh:",t))}function S_(){iS(w_)}function x_(){iS(b_)}function R_(){iS(y_)}var E_=W(`<div class="absolute bottom-14 left-1/2 -translate-x-1/2 bg-white text-gray-800
               rounded-lg shadow-lg w-48 py-2 z-50"><button class="w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center gap-2"> </button> <button class="w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center gap-2 disabled:opacity-50">ð Start Stream</button> <button class="w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center gap-2 disabled:opacity-50">â¹ Stop Stream</button></div>`),A_=W(`<div class="relative flex flex-col h-full bg-black overflow-hidden"><video autoplay playsinline="" class="w-full h-full object-contain"></video> <div class="fixed bottom-0 left-0 w-full px-6 py-4 bg-black/50 backdrop-blur-sm
         shadow-lg flex flex-wrap items-center justify-center gap-3 border-t z-50"><button class="px-4 py-2 rounded-full bg-green-500 text-white font-medium
           shadow hover:bg-green-600 transition flex items-center gap-2">ð¸ <span>Capture</span></button> <button class="px-4 py-2 rounded-full bg-blue-500 text-white font-medium
           shadow hover:bg-blue-600 transition flex items-center gap-2 disabled:opacity-50">ð¥ <span>Start</span></button> <button class="px-4 py-2 rounded-full bg-red-500 text-white font-medium
           shadow hover:bg-red-600 transition flex items-center gap-2 disabled:opacity-50">â¹ <span>Stop</span></button> <div class="relative"><button class="w-12 h-12 flex items-center justify-center rounded-full bg-gray-700 text-white
             shadow-md hover:bg-gray-800 transition">â®</button> <!></div></div> <button class="absolute top-2 left-2 bg-white text-black rounded-full p-2 shadow-md block md:hidden"><!></button></div>`,2);function F_(e,t){ft(t,!1);let i=re("environment"),s=re(!1),n=re(),o,r,a=[],l=re(!1),c=ce(t,"onClose",8);Mi(async()=>{await h()}),Yr(()=>{f(),console.log("Camera component destroyed, camera stopped.",new Date().toLocaleTimeString())});async function d(){const Y=/iPhone|iPad|iPod/i.test(navigator.userAgent);try{Y?o=await navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"}},audio:!1}):o=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})}catch(ye){console.warn("â ï¸ KhÃ´ng láº¥y ÄÆ°á»£c camera sau hoáº·c lá»i khÃ¡c, fallback vá» camera máº·c Äá»nh",ye),o=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})}hs(n,b(n).srcObject=o)}async function h(){try{x_(),o&&o.getTracks().forEach(Y=>Y.stop()),o=await navigator.mediaDevices.getUserMedia({video:{facingMode:b(i)},audio:!1}),b(n)&&hs(n,b(n).srcObject=o)}catch(Y){console.warn("â ï¸ KhÃ´ng má» ÄÆ°á»£c camera",Y)}}function u(){O(i,b(i)==="user"?"environment":"user"),h(),y()}function f(){o&&(o.getTracks().forEach(Y=>Y.stop()),o=null),b(n)&&hs(n,b(n).srcObject=null)}async function p(){S_();const Y=document.createElement("canvas");Y.width=b(n).videoWidth,Y.height=b(n).videoHeight,Y.getContext("2d").drawImage(b(n),0,0);const De=await new Promise(Pe=>Y.toBlob(Pe,"image/jpeg"));u_(De)}async function m(){a=[],r=new MediaRecorder(o,{mimeType:"video/webm"});let Y=[],ye=0;const De=2;r.ondataavailable=async Pe=>{if(Pe.data.size>0&&(a.push(Pe.data),Y.push(Pe.data),ye+=Pe.data.size,ye/(1024*1024)>=De)){const Q=new Blob(Y,{type:"video/webm"});console.log("Chunk size:",Q,new Date().toLocaleTimeString()),await G0(Q,!1),Y=[],ye=0}},r.onstop=async()=>{const Pe=new Blob(a,{type:"video/webm"});await G0(Pe,!0)},r.start(2e3),O(l,!0)}function v(){R_(),r&&r.stop(),O(l,!1)}function C(){r=new MediaRecorder(o,{mimeType:"video/webm"}),r.ondataavailable=Y=>{Y.data.size>0&&Y.data.arrayBuffer().then(ye=>{p_(ye)})},r.onstop=()=>{m_()},r.start(1e3),O(l,!0)}function w(){r&&b(l)&&r.stop(),kw(),O(l,!1)}function S(){O(s,!b(s))}function y(){O(s,!1)}var R={initCamera1:d,stopCamera:f,capture:p,startRecording:m,stopRecording:v,startWebSocketStream:C,stopWebSocketStream:w};vt();var A=A_(),P=D(A);ns(P,Y=>O(n,Y),()=>b(n));var T=k(P,2),M=D(T),N=k(M,2),_=k(N,2),L=k(_,2),z=D(L),q=k(z,2);{var B=Y=>{var ye=E_(),De=D(ye),Pe=D(De),Q=k(De,2),te=k(Q,2);xe(()=>{Be(Pe,`ð· Chuyá»n Camera (${b(i)==="user"?"TrÆ°á»c":"Sau"})`),Q.disabled=b(l),te.disabled=!b(l)}),$("click",De,u),$("click",Q,()=>{C(),y()}),$("click",te,()=>{w(),y()}),I(Y,ye)};ne(q,Y=>{b(s)&&Y(B)})}var Z=k(T,2),ee=D(Z);return iA(ee,{size:"20"}),xe(()=>{N.disabled=b(l),_.disabled=!b(l)}),$("loadedmetadata",P,()=>b(n).play()),$("click",M,p),$("click",N,m),$("click",_,v),$("click",z,S),$("click",Z,function(...Y){var ye;(ye=c())==null||ye.apply(this,Y)}),I(e,A),sa(t,"initCamera1",d),sa(t,"stopCamera",f),sa(t,"capture",p),sa(t,"startRecording",m),sa(t,"stopRecording",v),sa(t,"startWebSocketStream",C),sa(t,"stopWebSocketStream",w),pt(R)}var P_=W('<button class="p-2 rounded hover:bg-gray-100 transition" title="Äáº·t láº¡i vá» trÃ­" aria-label="Reset position"><!></button>'),T_=W('<div class="fixed inset-0 z-40 bg-white/10 backdrop-blur-sm transition-opacity"></div> <div class="fixed inset-0 z-50 flex items-center justify-center pointer-events-none"><div class="bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden relative pointer-events-auto transition-transform transition-all duration-300"><div class="flex items-center justify-between px-6 py-4 border-b bg-gradient-to-r from-gray-50 to-white cursor-move select-none"><h2 class="text-xl font-semibold text-gray-800"> </h2> <div class="flex gap-3 items-center"><!> <button class="p-2 rounded hover:bg-gray-100 transition" title="Chuyá»n cháº¿ Äá» fullscreen" aria-label="Toggle fullscreen"><!></button> <button class="p-2 rounded hover:bg-gray-100 transition" aria-label="Maximize or minimize modal"><!></button> <button class="p-2 rounded hover:bg-gray-100 transition" title="ÄÃ³ng" aria-label="Close modal"><!></button></div></div> <div class="px-6 py-4 overflow-y-auto h-[calc(100%-130px)]"><!></div> <div class="flex justify-end gap-2 px-6 py-2 border-t bg-gray-50"><button class="px-4 py-2 text-sm font-medium text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-100">Cancel</button> <button class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700">OK</button></div></div></div>',1);function D_(e,t){ft(t,!1);let i=ce(t,"open",12,!1),s=ce(t,"title",8,"Untitle"),n=ce(t,"onClose",8,()=>{i(!1)}),o=ce(t,"onConfirm",8,()=>{}),r=ce(t,"width",8,"80vw"),a=ce(t,"height",8,"auto"),l=ce(t,"closeOnOutsideClick",8,!0),c=re(),d=0,h=0,u=!1,f,p,m=re(!1),v=re(!1);function C(L){if(!b(c)||b(m))return;u=!0,f=L.clientX,p=L.clientY;const z=window.getComputedStyle(b(c)),q=new DOMMatrixReadOnly(z.transform);d=q.m41,h=q.m42,window.addEventListener("mousemove",w),window.addEventListener("mouseup",S)}function w(L){if(!u)return;const z=L.clientX-f,q=L.clientY-p;hs(c,b(c).style.transform=`translate(${d+z}px, ${h+q}px)`)}function S(){if(u=!1,window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",S),b(c)){const L=window.getComputedStyle(b(c)),z=new DOMMatrixReadOnly(L.transform);O(v,!(z.m41===0&&z.m42===0))}}function y(){b(c)&&(hs(c,b(c).style.transform="translate(0px, 0px)"),O(v,!1))}function R(){O(m,!b(m)),y()}function A(){var L,z,q;b(c)&&(b(m)?(q=document.exitFullscreen)==null||q.call(document):(z=(L=b(c)).requestFullscreen)==null||z.call(L),O(m,!b(m)))}function P(){O(m,!!document.fullscreenElement)}Mi(()=>{document.addEventListener("fullscreenchange",P)}),Yr(()=>{document.removeEventListener("fullscreenchange",P)});function T(){l()&&n()()}vt();var M=de(),N=K(M);{var _=L=>{var z=T_(),q=K(z),B=k(q,2),Z=D(B),ee=D(Z),Y=D(ee),ye=D(Y),De=k(Y,2),Pe=D(De);{var Q=Te=>{var We=P_(),Qt=D(We);Zk(Qt,{class:"w-5 h-5 text-gray-600 hover:text-blue-600"}),$("click",We,y),I(Te,We)};ne(Pe,Te=>{b(v)&&Te(Q)})}var te=k(Pe,2),ie=D(te);{var ae=Te=>{s_(Te,{class:"w-5 h-5 text-gray-600 hover:text-blue-600"})},U=Te=>{zk(Te,{class:"w-5 h-5 text-gray-600 hover:text-blue-600"})};ne(ie,Te=>{b(m)?Te(ae):Te(U,!1)})}var oe=k(te,2),Ae=D(oe);{var Ce=Te=>{Qk(Te,{class:"w-5 h-5 text-gray-600 hover:text-blue-600"})},Qe=Te=>{jk(Te,{class:"w-5 h-5 text-gray-600 hover:text-blue-600"})};ne(Ae,Te=>{b(m)?Te(Ce):Te(Qe,!1)})}var je=k(oe,2),Je=D(je);dA(Je,{class:"w-6 h-6 text-gray-600 hover:text-red-600"});var tt=k(ee,2),ct=D(tt);Oe(ct,t,"default",{});var st=k(tt,2),be=D(st),Ve=k(be,2);ns(Z,Te=>O(c,Te),()=>b(c)),xe(()=>{qn(Z,`width: ${(b(m)?"100vw":r())??""}; height: ${(b(m)?"100vh":a())??""}; max-height: 90vh; transform: translate(0px, 0px);`),Be(ye,s()),Ci(oe,"title",b(m)?"Thu nhá» cá»­a sá»":"PhÃ³ng to cá»­a sá»")}),$("click",q,T),$("click",te,R),$("click",oe,A),$("click",je,function(...Te){var We;(We=n())==null||We.apply(this,Te)}),$("mousedown",ee,C),$("click",be,function(...Te){var We;(We=n())==null||We.apply(this,Te)}),$("click",Ve,function(...Te){var We;(We=o())==null||We.apply(this,Te)}),$("click",Z,Ic(function(Te){Kv.call(this,t,Te)})),I(L,z)};ne(N,L=>{i()&&L(_)})}I(e,M),pt()}var M_=W("<button><span> </span> </button>"),I_=W('<section class="bg-white p-6 rounded-xl shadow space-y-4"><h2 class="text-lg font-medium text-gray-800">Account Info</h2> <div><label class="block text-sm text-gray-600">Full Name</label> <input type="text" placeholder="Your name" class="mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:ring focus:ring-blue-200"/></div> <div><label class="block text-sm text-gray-600">Email</label> <input type="email" placeholder="your@email.com" class="mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:ring focus:ring-blue-200"/></div> <button class="mt-4 px-4 py-2 rounded-lg bg-blue-600 text-white shadow hover:bg-blue-700">Save Account</button></section>'),k_=W('<section class="bg-white p-6 rounded-xl shadow space-y-4"><h2 class="text-lg font-medium text-gray-800">Security</h2> <div><label class="block text-sm text-gray-600">Change Password</label> <input type="password" placeholder="New password" class="mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:ring focus:ring-blue-200"/></div> <button class="mt-4 px-4 py-2 rounded-lg bg-blue-600 text-white shadow hover:bg-blue-700">Update Password</button></section>'),__=W('<section class="bg-white p-6 rounded-xl shadow space-y-4"><h2 class="text-lg font-medium text-gray-800">Notifications</h2> <label class="flex items-center gap-3"><input type="checkbox" class="rounded text-blue-600"/> Email alerts</label> <label class="flex items-center gap-3"><input type="checkbox" class="rounded text-blue-600"/> Push notifications</label></section>'),L_=W('<section class="bg-white p-6 rounded-xl shadow space-y-4"><h2 class="text-lg font-medium text-gray-800">System Settings</h2> <label class="block text-sm text-gray-600">Language</label> <select class="mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:ring focus:ring-blue-200"><option>English</option><option>Vietnamese</option><option>Japanese</option></select></section>'),O_=W(`<div class="min-h-screen flex bg-gray-100"><aside class="w-64 bg-white shadow-lg flex flex-col"><div class="p-6 font-bold text-xl text-blue-600 border-b">â¡ Settings</div> <nav class="flex-1 p-4 space-y-2"></nav></aside> <main class="flex-1 p-8 space-y-6"><div class="flex justify-between items-center"><h1 class="text-2xl font-semibold text-gray-800 capitalize"> </h1> <input type="text" placeholder="Search settings..." class="w-64 px-4 py-2 rounded-lg border border-gray-300 shadow-sm
               focus:border-blue-500 focus:ring focus:ring-blue-200"/></div> <!></main></div>`);function N_(e){let t=re("account"),i=re("");const s=[{id:"account",label:"Account",icon:"ð¤"},{id:"security",label:"Security",icon:"ð"},{id:"notifications",label:"Notifications",icon:"ð"},{id:"system",label:"System",icon:"âï¸"}];function n(C){O(t,C)}function o(){alert("Changes saved!")}var r=O_(),a=D(r),l=k(D(a),2);hi(l,5,()=>s,ds,(C,w)=>{var S=M_(),y=D(S),R=D(y),A=k(y);xe(()=>{Vt(S,1,`w-full flex items-center gap-3 px-4 py-2 rounded-lg transition
                 ${b(t)===b(w).id?"bg-blue-100 text-blue-700 font-medium":"hover:bg-gray-100 text-gray-700"}`),Be(R,b(w).icon),Be(A,` ${b(w).label??""}`)}),$("click",S,()=>n(b(w).id)),I(C,S)});var c=k(a,2),d=D(c),h=D(d),u=D(h),f=k(h,2),p=k(d,2);{var m=C=>{var w=I_(),S=k(D(w),6);$("click",S,o),I(C,w)},v=C=>{var w=de(),S=K(w);{var y=A=>{var P=k_();I(A,P)},R=A=>{var P=de(),T=K(P);{var M=_=>{var L=__();I(_,L)},N=_=>{var L=de(),z=K(L);{var q=B=>{var Z=L_();I(B,Z)};ne(z,B=>{b(t)==="system"&&B(q)},!0)}I(_,L)};ne(T,_=>{b(t)==="notifications"?_(M):_(N,!1)},!0)}I(A,P)};ne(S,A=>{b(t)==="security"?A(y):A(R,!1)},!0)}I(C,w)};ne(p,C=>{b(t)==="account"?C(m):C(v,!1)})}xe(()=>Be(u,`${b(t)??""} settings`)),eu(f,()=>b(i),C=>O(i,C)),I(e,r)}function H_(){const{subscribe:e,update:t}=Zt({});function i(n,o){t(r=>(r[n]=o,r))}function s(n){t(o=>(delete o[n],o))}return{subscribe:e,register:i,unregister:s}}const _w=H_();function EC(e,t){ft(t,!1);let i=ce(t,"combo",8);const s=JE();function n(o){s("pressed",{detail:o})}Mi(()=>{_w.register(i(),n)}),Yr(()=>{_w.unregister(i())}),vt(),pt()}var G_=W('<div class="text-center text-gray-500">Loading...</div>'),B_=W('<div class="text-center text-red-500">No users found.</div>'),V_=W('<tr class="hover:bg-gray-100"><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700"></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-blue-600"> </td></tr>'),z_=W('<div class="overflow-x-auto bg-white rounded-lg shadow"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">#</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Name</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Email</th></tr></thead><tbody class="divide-y divide-gray-200"></tbody></table></div>'),W_=W('<div class="max-w-3xl mx-auto p-4"><h1 class="text-2xl font-bold mb-4 text-center">User List</h1> <!></div>');function $_(e,t){ft(t,!1);let i=re([]),s=re(!1);async function n(){O(s,!1);try{const d=await(await fetch("https://render-server-ezuf.onrender.com/users")).json();d.success?O(i,d.users):console.error("API error34:",d.error)}catch(c){console.error("Fetch error12:",c)}finally{O(s,!0)}}Mi(()=>{n()}),vt();var o=W_(),r=k(D(o),2);{var a=c=>{var d=G_();I(c,d)},l=c=>{var d=de(),h=K(d);{var u=p=>{var m=B_();I(p,m)},f=p=>{var m=z_(),v=D(m),C=k(D(v));hi(C,5,()=>b(i),ds,(w,S,y)=>{var R=V_(),A=D(R);A.textContent=y+1;var P=k(A),T=D(P),M=k(P),N=D(M);xe(()=>{Be(T,b(S).name),Be(N,b(S).email)}),I(w,R)}),I(p,m)};ne(h,p=>{b(i).length===0?p(u):p(f,!1)},!0)}I(c,d)};ne(r,c=>{b(s)?c(l,!1):c(a)})}I(e,o),pt()}var Lw=function(e,t){return Lw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i[n]=s[n])},Lw(e,t)};function pu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Lw(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function U_(e,t,i,s){function n(o){return o instanceof i?o:new i(function(r){r(o)})}return new(i||(i=Promise))(function(o,r){function a(d){try{c(s.next(d))}catch(h){r(h)}}function l(d){try{c(s.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((s=s.apply(e,t||[])).next())})}function fA(e,t){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,n,o,r=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return r.next=a(0),r.throw=a(1),r.return=a(2),typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(c){return function(d){return l([c,d])}}function l(c){if(s)throw new TypeError("Generator is already executing.");for(;r&&(r=0,c[0]&&(i=0)),i;)try{if(s=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,n=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(c[0]===6&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(d){c=[6,d],n=0}finally{s=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function wg(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],s=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function tu(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var s=i.call(e),n,o=[],r;try{for(;(t===void 0||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(a){r={error:a}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o}function bg(e,t,i){if(i||arguments.length===2)for(var s=0,n=t.length,o;s<n;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return e.concat(o||Array.prototype.slice.call(t))}function kd(e){return this instanceof kd?(this.v=e,this):new kd(e)}function j_(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(e,t||[]),n,o=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",r),n[Symbol.asyncIterator]=function(){return this},n;function r(f){return function(p){return Promise.resolve(p).then(f,h)}}function a(f,p){s[f]&&(n[f]=function(m){return new Promise(function(v,C){o.push([f,m,v,C])>1||l(f,m)})},p&&(n[f]=p(n[f])))}function l(f,p){try{c(s[f](p))}catch(m){u(o[0][3],m)}}function c(f){f.value instanceof kd?Promise.resolve(f.value.v).then(d,h):u(o[0][2],f)}function d(f){l("next",f)}function h(f){l("throw",f)}function u(f,p){f(p),o.shift(),o.length&&l(o[0][0],o[0][1])}}function K_(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof wg=="function"?wg(e):e[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(o){i[o]=e[o]&&function(r){return new Promise(function(a,l){r=e[o](r),n(a,l,r.done,r.value)})}}function n(o,r,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},r)}}function zt(e){return typeof e=="function"}function q_(e){var t=function(s){Error.call(s),s.stack=new Error().stack},i=e(t);return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var AC=q_(function(e){return function(i){e(this),this.message=i?i.length+` errors occurred during unsubscription:
`+i.map(function(s,n){return n+1+") "+s.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=i}});function Ow(e,t){if(e){var i=e.indexOf(t);0<=i&&e.splice(i,1)}}var Xv=(function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,i,s,n,o;if(!this.closed){this.closed=!0;var r=this._parentage;if(r)if(this._parentage=null,Array.isArray(r))try{for(var a=wg(r),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(m){t={error:m}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}else r.remove(this);var d=this.initialTeardown;if(zt(d))try{d()}catch(m){o=m instanceof AC?m.errors:[m]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var u=wg(h),f=u.next();!f.done;f=u.next()){var p=f.value;try{z0(p)}catch(m){o=o??[],m instanceof AC?o=bg(bg([],tu(o)),tu(m.errors)):o.push(m)}}}catch(m){s={error:m}}finally{try{f&&!f.done&&(n=u.return)&&n.call(u)}finally{if(s)throw s.error}}}if(o)throw new AC(o)}},e.prototype.add=function(t){var i;if(t&&t!==this)if(this.closed)z0(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(i=this._finalizers)!==null&&i!==void 0?i:[]).push(t)}},e.prototype._hasParent=function(t){var i=this._parentage;return i===t||Array.isArray(i)&&i.includes(t)},e.prototype._addParent=function(t){var i=this._parentage;this._parentage=Array.isArray(i)?(i.push(t),i):i?[i,t]:t},e.prototype._removeParent=function(t){var i=this._parentage;i===t?this._parentage=null:Array.isArray(i)&&Ow(i,t)},e.prototype.remove=function(t){var i=this._finalizers;i&&Ow(i,t),t instanceof e&&t._removeParent(this)},e.EMPTY=(function(){var t=new e;return t.closed=!0,t})(),e})();Xv.EMPTY;function pA(e){return e instanceof Xv||e&&"closed"in e&&zt(e.remove)&&zt(e.add)&&zt(e.unsubscribe)}function z0(e){zt(e)?e():e.unsubscribe()}var Y_={Promise:void 0},X_={setTimeout:function(e,t){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];return setTimeout.apply(void 0,bg([e,t],tu(i)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function mA(e){X_.setTimeout(function(){throw e})}function W0(){}function Q_(e){e()}var sS=(function(e){pu(t,e);function t(i){var s=e.call(this)||this;return s.isStopped=!1,i?(s.destination=i,pA(i)&&i.add(s)):s.destination=e1,s}return t.create=function(i,s,n){return new Nw(i,s,n)},t.prototype.next=function(i){this.isStopped||this._next(i)},t.prototype.error=function(i){this.isStopped||(this.isStopped=!0,this._error(i))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(i){this.destination.next(i)},t.prototype._error=function(i){try{this.destination.error(i)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t})(Xv),J_=(function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var i=this.partialObserver;if(i.next)try{i.next(t)}catch(s){Ap(s)}},e.prototype.error=function(t){var i=this.partialObserver;if(i.error)try{i.error(t)}catch(s){Ap(s)}else Ap(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(i){Ap(i)}},e})(),Nw=(function(e){pu(t,e);function t(i,s,n){var o=e.call(this)||this,r;return zt(i)||!i?r={next:i??void 0,error:s??void 0,complete:n??void 0}:r=i,o.destination=new J_(r),o}return t})(sS);function Ap(e){mA(e)}function Z_(e){throw e}var e1={closed:!0,next:W0,error:Z_,complete:W0},nS=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function vA(e){return e}function t1(e){return e.length===0?vA:e.length===1?e[0]:function(i){return e.reduce(function(s,n){return n(s)},i)}}var id=(function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var i=new e;return i.source=this,i.operator=t,i},e.prototype.subscribe=function(t,i,s){var n=this,o=s1(t)?t:new Nw(t,i,s);return Q_(function(){var r=n,a=r.operator,l=r.source;o.add(a?a.call(o,l):l?n._subscribe(o):n._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(i){t.error(i)}},e.prototype.forEach=function(t,i){var s=this;return i=$0(i),new i(function(n,o){var r=new Nw({next:function(a){try{t(a)}catch(l){o(l),r.unsubscribe()}},error:o,complete:n});s.subscribe(r)})},e.prototype._subscribe=function(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)},e.prototype[nS]=function(){return this},e.prototype.pipe=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return t1(t)(this)},e.prototype.toPromise=function(t){var i=this;return t=$0(t),new t(function(s,n){var o;i.subscribe(function(r){return o=r},function(r){return n(r)},function(){return s(o)})})},e.create=function(t){return new e(t)},e})();function $0(e){var t;return(t=e??Y_.Promise)!==null&&t!==void 0?t:Promise}function i1(e){return e&&zt(e.next)&&zt(e.error)&&zt(e.complete)}function s1(e){return e&&e instanceof sS||i1(e)&&pA(e)}function n1(e){return zt(e==null?void 0:e.lift)}function cp(e){return function(t){if(n1(t))return t.lift(function(i){try{return e(i,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}function iu(e,t,i,s,n){return new o1(e,t,i,s,n)}var o1=(function(e){pu(t,e);function t(i,s,n,o,r,a){var l=e.call(this,i)||this;return l.onFinalize=r,l.shouldUnsubscribe=a,l._next=s?function(c){try{s(c)}catch(d){i.error(d)}}:e.prototype._next,l._error=o?function(c){try{o(c)}catch(d){i.error(d)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=n?function(){try{n()}catch(c){i.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var s=this.closed;e.prototype.unsubscribe.call(this),!s&&((i=this.onFinalize)===null||i===void 0||i.call(this))}},t})(sS),r1={now:function(){return Date.now()}},a1=(function(e){pu(t,e);function t(i,s){return e.call(this)||this}return t.prototype.schedule=function(i,s){return this},t})(Xv),U0={setInterval:function(e,t){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];return setInterval.apply(void 0,bg([e,t],tu(i)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},l1=(function(e){pu(t,e);function t(i,s){var n=e.call(this,i,s)||this;return n.scheduler=i,n.work=s,n.pending=!1,n}return t.prototype.schedule=function(i,s){var n;if(s===void 0&&(s=0),this.closed)return this;this.state=i;var o=this.id,r=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(r,o,s)),this.pending=!0,this.delay=s,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(r,this.id,s),this},t.prototype.requestAsyncId=function(i,s,n){return n===void 0&&(n=0),U0.setInterval(i.flush.bind(i,this),n)},t.prototype.recycleAsyncId=function(i,s,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return s;s!=null&&U0.clearInterval(s)},t.prototype.execute=function(i,s){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(i,s);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(i,s){var n=!1,o;try{this.work(i)}catch(r){n=!0,o=r||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var i=this,s=i.id,n=i.scheduler,o=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Ow(o,this),s!=null&&(this.id=this.recycleAsyncId(n,s,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t})(a1),j0=(function(){function e(t,i){i===void 0&&(i=e.now),this.schedulerActionCtor=t,this.now=i}return e.prototype.schedule=function(t,i,s){return i===void 0&&(i=0),new this.schedulerActionCtor(this,t).schedule(s,i)},e.now=r1.now,e})(),c1=(function(e){pu(t,e);function t(i,s){s===void 0&&(s=j0.now);var n=e.call(this,i,s)||this;return n.actions=[],n._active=!1,n}return t.prototype.flush=function(i){var s=this.actions;if(this._active){s.push(i);return}var n;this._active=!0;do if(n=i.execute(i.state,i.delay))break;while(i=s.shift());if(this._active=!1,n){for(;i=s.shift();)i.unsubscribe();throw n}},t})(j0),d1=new c1(l1),CA=(function(e){return e&&typeof e.length=="number"&&typeof e!="function"});function h1(e){return zt(e==null?void 0:e.then)}function u1(e){return zt(e[nS])}function g1(e){return Symbol.asyncIterator&&zt(e==null?void 0:e[Symbol.asyncIterator])}function f1(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function p1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var m1=p1();function v1(e){return zt(e==null?void 0:e[m1])}function C1(e){return j_(this,arguments,function(){var i,s,n,o;return fA(this,function(r){switch(r.label){case 0:i=e.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,kd(i.read())];case 3:return s=r.sent(),n=s.value,o=s.done,o?[4,kd(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,kd(n)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return i.releaseLock(),[7];case 10:return[2]}})})}function w1(e){return zt(e==null?void 0:e.getReader)}function oS(e){if(e instanceof id)return e;if(e!=null){if(u1(e))return b1(e);if(CA(e))return y1(e);if(h1(e))return S1(e);if(g1(e))return wA(e);if(v1(e))return x1(e);if(w1(e))return R1(e)}throw f1(e)}function b1(e){return new id(function(t){var i=e[nS]();if(zt(i.subscribe))return i.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function y1(e){return new id(function(t){for(var i=0;i<e.length&&!t.closed;i++)t.next(e[i]);t.complete()})}function S1(e){return new id(function(t){e.then(function(i){t.closed||(t.next(i),t.complete())},function(i){return t.error(i)}).then(null,mA)})}function x1(e){return new id(function(t){var i,s;try{for(var n=wg(e),o=n.next();!o.done;o=n.next()){var r=o.value;if(t.next(r),t.closed)return}}catch(a){i={error:a}}finally{try{o&&!o.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}t.complete()})}function wA(e){return new id(function(t){E1(e,t).catch(function(i){return t.error(i)})})}function R1(e){return wA(C1(e))}function E1(e,t){var i,s,n,o;return U_(this,void 0,void 0,function(){var r,a;return fA(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),i=K_(e),l.label=1;case 1:return[4,i.next()];case 2:if(s=l.sent(),!!s.done)return[3,4];if(r=s.value,t.next(r),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),n={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),s&&!s.done&&(o=i.return)?[4,o.call(i)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function rS(e,t){return cp(function(i,s){var n=0;i.subscribe(iu(s,function(o){s.next(e.call(t,o,n++))}))})}var A1=Array.isArray;function F1(e,t){return A1(t)?e.apply(void 0,bg([],tu(t))):e(t)}function P1(e){return rS(function(t){return F1(e,t)})}function T1(e,t,i,s,n,o,r,a){var l=[],c=0,d=0,h=!1,u=function(){h&&!l.length&&!c&&t.complete()},f=function(m){return c<s?p(m):l.push(m)},p=function(m){c++;var v=!1;oS(i(m,d++)).subscribe(iu(t,function(C){t.next(C)},function(){v=!0},void 0,function(){if(v)try{c--;for(var C=function(){var w=l.shift();r||p(w)};l.length&&c<s;)C();u()}catch(w){t.error(w)}}))};return e.subscribe(iu(t,f,function(){h=!0,u()})),function(){}}function bA(e,t,i){return i===void 0&&(i=1/0),zt(t)?bA(function(s,n){return rS(function(o,r){return t(s,o,n,r)})(oS(e(s,n)))},i):(typeof t=="number"&&(i=t),cp(function(s,n){return T1(s,n,e,i)}))}var D1=["addListener","removeListener"],M1=["addEventListener","removeEventListener"],I1=["on","off"];function Hw(e,t,i,s){if(zt(i)&&(s=i,i=void 0),s)return Hw(e,t,i).pipe(P1(s));var n=tu(L1(e)?M1.map(function(a){return function(l){return e[a](t,l,i)}}):k1(e)?D1.map(K0(e,t)):_1(e)?I1.map(K0(e,t)):[],2),o=n[0],r=n[1];if(!o&&CA(e))return bA(function(a){return Hw(a,t,i)})(oS(e));if(!o)throw new TypeError("Invalid event target");return new id(function(a){var l=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a.next(1<c.length?c:c[0])};return o(l),function(){return r(l)}})}function K0(e,t){return function(i){return function(s){return e[i](t,s)}}}function k1(e){return zt(e.addListener)&&zt(e.removeListener)}function _1(e){return zt(e.on)&&zt(e.off)}function L1(e){return zt(e.addEventListener)&&zt(e.removeEventListener)}function O1(e,t){return cp(function(i,s){var n=0;i.subscribe(iu(s,function(o){return e.call(t,o,n++)&&s.next(o)}))})}function N1(e,t){return t===void 0&&(t=d1),cp(function(i,s){var n=null,o=null,r=null,a=function(){if(n){n.unsubscribe(),n=null;var c=o;o=null,s.next(c)}};function l(){var c=r+e,d=t.now();if(d<c){n=this.schedule(void 0,c-d),s.add(n);return}a()}i.subscribe(iu(s,function(c){o=c,r=t.now(),n||(n=t.schedule(l,e),s.add(n))},function(){a(),s.complete()},void 0,function(){o=n=null}))})}function H1(e,t){return t===void 0&&(t=vA),e=e??G1,cp(function(i,s){var n,o=!0;i.subscribe(iu(s,function(r){var a=t(r);(o||!e(n,a))&&(o=!1,n=a,s.next(r))}))})}function G1(e,t){return e===t}const B1=e=>e;function yA(e){const t=e-1;return t*t*t+1}function q0(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function V1(e,{delay:t=0,duration:i=400,easing:s=B1}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:i,easing:s,css:o=>`opacity: ${o*n}`}}function z1(e,{delay:t=0,duration:i=400,easing:s=yA,x:n=0,y:o=0,opacity:r=0}={}){const a=getComputedStyle(e),l=+a.opacity,c=a.transform==="none"?"":a.transform,d=l*(1-r),[h,u]=q0(n),[f,p]=q0(o);return{delay:t,duration:i,easing:s,css:(m,v)=>`
			transform: ${c} translate(${(1-m)*h}${u}, ${(1-m)*f}${p});
			opacity: ${l-d*v}`}}function W1(e,{delay:t=0,duration:i=400,easing:s=yA,start:n=0,opacity:o=0}={}){const r=getComputedStyle(e),a=+r.opacity,l=r.transform==="none"?"":r.transform,c=1-n,d=a*(1-o);return{delay:t,duration:i,easing:s,css:(h,u)=>`
			transform: ${l} scale(${1-c*u});
			opacity: ${a-d*u}
		`}}function $1(e,t){return{delay:(t==null?void 0:t.delay)||0,duration:(t==null?void 0:t.duration)||300,css:(i,s)=>{const n=V1(e,t).css(i,s),o=W1(e,t).css(i,s);return`${n}; ${o}`}}}var U1=W('<li class="px-4 py-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 cursor-pointer"> </li>'),j1=W('<ul class="mt-4 max-h-60 overflow-y-auto divide-y divide-gray-100 dark:divide-gray-700"></ul>'),K1=W('<div class="mt-4 text-center text-gray-400">KhÃ´ng cÃ³ káº¿t quáº£.</div>'),q1=W('<div class="fixed inset-0 bg-black/40 z-40"></div> <div class="fixed top-[20%] left-1/2 -translate-x-1/2 z-50 bg-white dark:bg-zinc-900 w-full max-w-md rounded-xl shadow-xl p-4"><input type="text" placeholder="Search..." class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring"/> <!></div>',1);function Y1(e,t){ft(t,!1);let i=re(!1),s=re(),n=re([]),o;function r(){O(i,!0),O(n,[]),setTimeout(()=>{var u;return(u=b(s))==null?void 0:u.focus()},0)}function a(){O(i,!1),o==null||o.unsubscribe()}async function l(u){console.log("ð Gá»i server vá»i query:",u);try{const p=await(await fetch("https://jsonplaceholder.typicode.com/posts")).json();console.log("â Káº¿t quáº£ tá»« server:",p),O(n,p.filter(m=>m.title.toLowerCase().includes(u.toLowerCase())).slice(0,10))}catch(f){console.error("â Lá»i gá»i API:",f),O(n,[])}}Mi(()=>{const u=m=>{(m.metaKey||m.ctrlKey)&&m.key==="k"&&(m.preventDefault(),r()),m.key==="Escape"&&a()};window.addEventListener("keydown",u);const f=()=>{b(s)&&(o=Hw(b(s),"input").pipe(rS(m=>m.target.value.trim()),O1(m=>m.length>0),N1(500),H1()).subscribe(m=>{l(m)}))},p=setInterval(()=>{b(i)&&b(s)&&(f(),clearInterval(p))},100);return()=>{window.removeEventListener("keydown",u),o==null||o.unsubscribe()}}),vt();var c=de(),d=K(c);{var h=u=>{var f=q1(),p=K(f),m=k(p,2),v=D(m);ns(v,y=>O(s,y),()=>b(s));var C=k(v,2);{var w=y=>{var R=j1();hi(R,5,()=>b(n),ds,(A,P)=>{var T=U1(),M=D(T);xe(()=>Be(M,b(P).title)),I(A,T)}),I(y,R)},S=y=>{var R=K1();I(y,R)};ne(C,y=>{b(n).length>0?y(w):y(S,!1)})}$("click",p,a),YE(3,m,()=>$1,()=>({duration:300})),$("click",m,Ic(()=>{})),I(u,f)};ne(d,u=>{b(i)&&u(h)})}I(e,c),pt()}function Fp(e){if(!(e!=null&&e.endsWith("px")))return;const t=parseFloat(e.slice(0,e.length-2));return isNaN(t)?void 0:t}const SA=e=>e?"height":"width",Gw=e=>window.getComputedStyle(e),Bw=e=>e.getBoundingClientRect(),X1=(e,t=!0)=>{if(e.getPropertyValue("box-sizing")==="border-box")return;const i=Fp(e.getPropertyValue("border-left-width"));if(i===void 0){console.error("Splitpanes Error: Fail to parse container `border-left-width`.");return}const s=Fp(e.getPropertyValue("border-top-width"));if(s===void 0){console.error("Splitpanes Error: Fail to parse container `border-top-width`.");return}const n={left:i,top:s};if(t){const o=Fp(e.getPropertyValue("border-right-width"));if(o===void 0){console.error("Splitpanes Error: Fail to parse container `border-right-width`.");return}const r=Fp(e.getPropertyValue("border-bottom-width"));if(r===void 0){console.error("Splitpanes Error: Fail to parse container `border-bottom-width`.");return}const a=n;a.right=o,a.bottom=r}return n};function Q1(e,t){t||(t=Gw(e));const i=Bw(e),s=X1(t,!0)||{left:0,top:0,right:0,bottom:0};return{width:i.width-s.left-s.right,height:i.height-s.top-s.bottom,left:i.left+s.left,top:i.top+s.top}}const Y0=(e,t)=>({left:e.left-t.left,top:e.top-t.top});function X0(e){const t=e,i=e,{clientX:s,clientY:n}="ontouchstart"in window&&i.touches?i.touches[0]:t;return{left:s,top:n}}function Q0(e,t,i,s){let n=0;for(let o=t;o<i;o++)n+=s(e[o],o);return n}function Pp(e,t,i,s){for(let n=t;n<i;n++)s(e[n],n)}const xA={},J0=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get(){return e={passive:!0},!0}});window.addEventListener("testpassive",t,t),window.remove("testpassive",t,t)}catch{}return e})();var J1=W("<div><!> <!></div>");function Z1(e,t){ft(t,!1);const i=()=>ht(_,"$veryFirstPaneKey",s),[s,n]=Xs();let o=ce(t,"id",8,void 0),r=ce(t,"horizontal",8,!1),a=ce(t,"pushOtherPanes",8,!0),l=ce(t,"dblClickSplitter",8,!0),c=ce(t,"rtl",8,"auto"),d=ce(t,"firstSplitter",8,!1),h=ce(t,"style",8,null),u=ce(t,"theme",8,"default-theme"),f=ce(t,"class",8,"");const p=JE();let m=re(),v=!1,C=!1,w=re(!1),S=re(!1),y=re(!1),R=-1,A=-1,P,T=new Array;const M=Zt(r()),N=Zt(d()),_=Zt(void 0);let L,z;bI(xA,{showFirstSplitter:N,veryFirstPaneKey:_,isHorizontal:M,ssrRegisterPaneSize:void 0,onPaneInit:j=>(i()===void 0&&ra(_,j),{undefinedPaneInitSize:0}),clientOnly:{onPaneAdd:B,onPaneRemove:Z}});function B(j){let ge=-1;j.element.parentNode&&Array.from(j.element.parentNode.children).some(me=>(me.className.includes("splitpanes__pane")&&ge++,me===j.element)),ge===0&&ra(_,j.key),T.splice(ge,0,j);for(let me=0;me<T.length;me++)T[me].index=me;v&&We().then(()=>{j.isReady=!0,p("pane-add",{index:ge,panes:Qe()})});const Re=(me,_e=!0)=>Me=>{(_e||j.index>0)&&me(Me,j)};return{onSplitterDown:Re(ae,!1),onSplitterClick:Re(Ae,!1),onSplitterDblClick:Re(Ce),onPaneClick:Re(ee),reportGivenSizeChange:Re(Y)}}async function Z(j){const ge=T.findIndex(Re=>Re.key===j);if(ge>=0){const Re=T.splice(ge,1)[0];for(let me=0;me<T.length;me++)T[me].index=me;ge===0&&ra(_,T.length>0?T[0].key:void 0),v&&(await We(),p("pane-remove",{removed:Re,panes:Qe()}))}}function ee(j,ge){p("pane-click",ge)}function Y(j,ge){ge.setSz(j),We()}Mi(()=>{H(),Qt();for(let j=0;j<T.length;j++)T[j].isReady=!0;v=!0,p("ready"),setTimeout(()=>{O(w,!0)},0)}),Yr(()=>{v&&Pe(),v=!1}),Yy(()=>{H()});function ye(j){if(c()==="auto")try{return(j??Gw(b(m))).direction==="rtl"}catch{}return c()===!0}function De(){document.body.style.cursor=M?"col-resize":"row-resize",document.addEventListener("mousemove",U,J0),document.addEventListener("mouseup",oe),"ontouchstart"in window&&(document.addEventListener("touchmove",U,J0),document.addEventListener("touchend",oe))}function Pe(){document.body.style.cursor="",document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",oe),"ontouchstart"in window&&(document.removeEventListener("touchmove",U),document.removeEventListener("touchend",oe))}const Q=j=>j.nodeType===Node.ELEMENT_NODE&&j.classList.contains("splitpanes__splitter");function te(j,ge,Re){let me=j[r()?"top":"left"];return Re&&!r()&&(me=ge-me),me}const ie=()=>SA(r());function ae(j,ge){O(S,!0),R=ge.index,ge.setSplitterActive(!0);let me=ge.element;for(;me&&(me=me.previousSibling,!(me&&Q(me))););if(me===null){console.error("Splitpane Error: Active splitter wasn't found!");return}L=me;const _e=X0(j),Me=Bw(L);z=te(Y0(_e,Me),Me[ie()],ye()),De()}function U(j){if(b(S)){O(y,!0);const ge=X0(j),Re=Gw(b(m)),me=Q1(b(m),Re),_e=me[ie()],Me=ye(Re),Ee=Y0(ge,me),Ie=te(Ee,_e,Me);Je(Ie,_e),p("resize",Qe())}}function oe(){b(y)&&p("resized",Qe()),O(S,!1),T[R].setSplitterActive(!1),setTimeout(()=>{O(y,!1),Pe()},100)}function Ae(j,ge){if("ontouchstart"in window){const Re=ge.index;l()&&(A===Re?(P&&clearTimeout(P),P=null,Ce(j,ge),A=-1):(A=Re,P=setTimeout(()=>{A=-1},500)))}b(y)||p("splitter-click",ge)}function Ce(j,ge){if(l()){const Re=ge.index;let me=0;for(let Ee=0;Ee<T.length;Ee++){const Ie=T[Ee];Ee!==Re&&(me+=Ie.min())}const _e=Math.min(Math.max(0,100-me),ge.max()),Me=me+_e;if(Me>=100)for(let Ee=0;Ee<T.length;Ee++){const Ie=T[Ee];Ie!==ge?Ie.setSz(Ie.min()):Ie.setSz(100-me)}else{let Ee=100-Me;ge.setSz(_e);const Ie=Ye=>{const ot=Ye.min(),Ut=Ye.max(),ei=Math.min(Math.max(0,Ee),Ut-ot);Ye.setSz(ot+ei),Ee-=ei};for(let Ye=Re-1;Ye>=0;Ye--)Ie(T[Ye]);for(let Ye=Re+1;Ye<T.length;Ye++)Ie(T[Ye]);Ee!==0&&console.warn("Splitpanes: there is a left spare size after computation of splitter double click, which means there are issues on the size constains of the panes.")}p("pane-maximize",ge),p("resized",Qe())}O(S,!1)}const Qe=()=>T.map(j=>({min:j.min(),max:j.max(),size:j.sz(),snap:j.snap()}));function je(j,ge){const Re=Ut=>Bw(Ut)[ie()],me=Re(L);let _e=0,Me=L.previousSibling;for(;Me;)Q(Me)&&(_e+=Re(Me)),Me=Me.previousSibling;let Ee=0,Ie=L.nextSibling;for(;Ie;)Q(Ie)&&(Ee+=Re(Ie)),Ie=Ie.nextSibling;const Ye=_e+z,ot=_e+me+Ee;return(j-Ye)/(ge-ot)*100}function Je(j,ge){let Re=R-1,me=T[Re],_e=R,Me=T[_e],Ee={prevPanesSize:st(Re),nextPanesSize:be(_e),prevReachedMinPanes:0,nextReachedMinPanes:0};const Ie=0+(a()?0:Ee.prevPanesSize),Ye=100-(a()?0:Ee.nextPanesSize),ot=Math.max(Math.min(je(j,ge),Ye),Ie),Ut=Ee.prevPanesSize+me.min()+me.snap(),ei=100-(Ee.nextPanesSize+Me.min()+Me.snap());let bt=ot,Ii=!1;ot<=Ut?ot>Ee.prevPanesSize+me.min()&&(bt=Math.max(me.min()+Ee.prevPanesSize,100-(Me.max()+Ee.nextPanesSize)),Ii=!0):ot>=ei&&ot<100-Ee.nextPanesSize-Me.min()&&(bt=Math.min(100-(Me.min()+Ee.nextPanesSize),me.max()+Ee.prevPanesSize),Ii=!0);const bn=me.max()<100&&bt>=me.max()+Ee.prevPanesSize,wu=Me.max()<100&&bt<=100-(Me.max()+Ee.nextPanesSize);if(bn||wu)bn?(me.setSz(me.max()),Me.setSz(Math.max(100-me.max()-Ee.prevPanesSize-Ee.nextPanesSize,0))):(me.setSz(Math.max(100-Me.max()-Ee.prevPanesSize-Ee.nextPanesSize,0)),Me.setSz(Me.max()));else{if(a()&&!Ii){const rt=tt(Ee,bt);if(!rt)return;({sums:Ee,paneBeforeIndex:Re,paneAfterIndex:_e}=rt),me=T[Re],Me=T[_e]}typeof Re=="number"&&me.setSz(Math.min(Math.max(bt-Ee.prevPanesSize-Ee.prevReachedMinPanes,me.min()),me.max())),typeof _e=="number"&&Me.setSz(Math.min(Math.max(100-bt-Ee.nextPanesSize-Ee.nextReachedMinPanes,Me.min()),Me.max()))}}function tt(j,ge){var Me,Ee;const Re=R-1;let me=Re,_e=Re+1;if(ge<j.prevPanesSize+T[me].min()){if(me=(Me=Ve(Re))==null?void 0:Me.index,j.prevReachedMinPanes=0,me===void 0)return j.prevPanesSize=0,T[0].setSz(T[0].min()),Pp(T,1,Re+1,Ie=>{Ie.setSz(Ie.min()),j.prevReachedMinPanes+=Ie.min()}),T[_e].setSz(100-j.prevReachedMinPanes-T[0].min()-j.prevPanesSize-j.nextPanesSize),null;me<Re&&Pp(T,me+1,Re+1,Ie=>{Ie.setSz(Ie.min()),j.prevReachedMinPanes+=Ie.min()}),j.prevPanesSize=st(me)}if(ge>100-j.nextPanesSize-T[_e].min())if(_e=(Ee=Te(Re))==null?void 0:Ee.index,me===void 0&&console.log("Yep undefined paneAfterIndex"),j.nextReachedMinPanes=0,_e===void 0){j.nextPanesSize=0;const Ie=T.length;return T[Ie-1].setSz(T[Ie-1].min()),Pp(T,Re+1,Ie-1,Ye=>{Ye.setSz(Ye.min()),j.nextReachedMinPanes+=Ye.min()}),T[me].setSz(100-j.prevPanesSize-j.nextReachedMinPanes-T[Ie-1].min()-j.nextPanesSize),null}else _e>Re+1&&Pp(T,Re+1,_e,Ie=>{Ie.setSz(Ie.min()),j.nextReachedMinPanes+=Ie.min()}),j.nextPanesSize=be(_e);return{sums:j,paneBeforeIndex:me,paneAfterIndex:_e}}const ct=j=>j.sz(),st=j=>Q0(T,0,j,ct),be=j=>Q0(T,j+1,T.length,ct),Ve=j=>[...T].reverse().find(ge=>ge.index<j&&ge.sz()>ge.min()),Te=j=>T.find(ge=>ge.index>j+1&&ge.sz()>ge.min());async function We(){C=!0,await zc(),C&&(Qt(),C=!1)}function Qt(){$t(),v&&p("resized",Qe())}function $t(){if(T.length===0)return;const j=T.length;let ge=100,Re=0,me=0,_e=0;const Me=[],Ee=[];for(let ei=0;ei<j;ei++){const bt=T[ei],Ii=bt.sz();bt.givenSize===null?bt.isReady?(_e+=Ii,Ii>=bt.max()&&Me.push(bt),Ii<=bt.min()&&Ee.push(bt)):me+=1:(ge-=Ii,Re++,Me.push(bt),Ee.push(bt))}const Ie=j-Re,Ye=Ie-me;let ot,Ut;if(Ye>0?(ot=_e/Ye,ot>.1&&ge>.1?(_e+=me*ot,Ut=ge/_e):(ot=0,Ut=1)):(ot=ge/Ie,Ut=1),ge+_e>.1){ge=100;for(let ei=0;ei<j;ei++){const bt=T[ei];if(typeof bt.givenSize!="number"){const Ii=bt.isReady?bt.sz():ot,bn=Math.max(Math.min(Ii*Ut,bt.max()),bt.min());bt.setSz(bn)}ge-=bt.sz()}Math.abs(ge)>.1&&(ge=se(ge,Me,Ee))}isFinite(ge)?Math.abs(ge)>.1&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints."):console.warn("Splitpanes: Internal error, sizes might be NaN as a result.")}function se(j,ge,Re){const _e=T.length-(j>0?ge.length:Re.length);if(_e<=0)return j;const Me=j/_e;if(T.length===1)T[0].setSz(100),j=0;else for(let Ee=0;Ee<T.length;Ee++){const Ie=T[Ee],Ye=Ie.sz();if(j>0&&!ge.includes(Ie)){const ot=Math.max(Math.min(Ye+Me,Ie.max()),Ie.min()),Ut=ot-Ye;j-=Ut,Ie.setSz(ot)}else if(!Re.includes(Ie)){const ot=Math.max(Math.min(Ye+Me,Ie.max()),Ie.min()),Ut=ot-Ye;j-=Ut,Ie.setSz(ot)}}return j}function H(){var me;if(!b(m))return;const{children:j}=b(m);let ge=0,Re=!1;for(let _e=0;_e<j.length;_e++){const Me=j.item(_e),Ee=Me.classList.contains("splitpanes__pane"),Ie=Me.classList.contains("splitpanes__splitter");if(!Ee&&!Ie){(me=Me.parentNode)==null||me.removeChild(Me),console.warn("Splitpanes: Only <Pane> elements are allowed at the root of <Splitpanes>. One of your DOM nodes was removed.");return}else Ee&&(!Re&&T[ge].element!==Me&&(Re=!0),ge++)}if(Re){const _e=[];for(let Me=0;Me<j.length;Me++){const Ee=j.item(Me);if(Ee==null?void 0:Ee.classList.contains("splitpanes__pane")){const Ye=T.find(ot=>ot.element===Ee);Ye?(Ye.index=_e.length,_e.push(Ye)):console.warn("Splitpanes: Internal error - found a <Pane> elements which isn't tracked.")}}T=_e,ra(_,T.length>0?T[0].key:void 0)}}Lt(()=>ve(r()),()=>{ra(M,r())}),Lt(()=>ve(d()),()=>{ra(N,d())}),Ys(),vt();var le=J1();let Fe;var mt=D(le);ne(mt,j=>{});var nt=k(mt,2);Oe(nt,t,"default",{}),ns(le,j=>O(m,j),()=>b(m)),xe(()=>{Ci(le,"id",o()),Fe=Vt(le,1,`splitpanes ${u()||""} ${f()||""}`,null,Fe,{"splitpanes--horizontal":r(),"splitpanes--vertical":!r(),"splitpanes--dragging":b(S)||b(y),"splitpanes--freeze":!b(w)}),qn(le,h())}),I(e,le),pt(),n()}const eL=(e,t)=>i=>{const s=e();s!==null&&s[t](i)},tL=e=>eL.bind(null,e);var iL=W("<div></div>"),sL=W("<!>   <div><!></div>",1);function nL(e,t){ft(t,!1);const i=()=>ht(u,"$isHorizontal",o),s=()=>ht(p,"$veryFirstPaneKey",o),n=()=>ht(f,"$showFirstSplitter",o),[o,r]=Xs(),a=re(),l=re(),{ssrRegisterPaneSize:c,onPaneInit:d,clientOnly:h,isHorizontal:u,showFirstSplitter:f,veryFirstPaneKey:p}=wI(xA);let m=ce(t,"size",12,null),v=ce(t,"minSize",8,0),C=ce(t,"maxSize",8,100),w=ce(t,"snapSize",8,0),S=ce(t,"class",8,"");const y={},{undefinedPaneInitSize:R}=d(y);let A=re(),P=re(m()??R),T=re(!1),M;const N=tL(()=>M),_=B=>{M&&B!=b(P)&&(N==null||N("reportGivenSizeChange")(B))};Mi(()=>{const B={index:0,key:y,element:b(A),givenSize:m(),sz:()=>b(P),setSz:Z=>{O(P,Z),typeof m()=="number"&&m()!==b(P)&&m(b(P))},min:()=>v(),max:()=>C(),snap:()=>w(),setSplitterActive:Z=>{O(T,Z)},isReady:!1};M=h==null?void 0:h.onPaneAdd(B)}),Yr(()=>{h==null||h.onPaneRemove(y)}),Lt(()=>ve(m()),()=>{typeof m()=="number"&&_(m())}),Lt(()=>i(),()=>{O(a,SA(i()))}),Lt(()=>(b(a),b(P)),()=>{O(l,`${b(a)}: ${b(P)}%;`)}),Ys(),vt();var L=de(),z=K(L);{var q=B=>{var Z=sL(),ee=K(Z);{var Y=Q=>{var te=iL(),ie=Sl(()=>N==null?void 0:N("onSplitterDown")),ae=Sl(()=>N==null?void 0:N("onSplitterDown")),U=Sl(()=>N==null?void 0:N("onSplitterClick")),oe=Sl(()=>N==null?void 0:N("onSplitterDblClick"));xe(()=>Vt(te,1,`splitpanes__splitter ${b(T)?"splitpanes__splitter__active":""}`)),$("mousedown",te,function(...Ae){var Ce;(Ce=b(ie))==null||Ce.apply(this,Ae)}),$("touchstart",te,function(...Ae){var Ce;(Ce=b(ae))==null||Ce.apply(this,Ae)}),$("click",te,function(...Ae){var Ce;(Ce=b(U))==null||Ce.apply(this,Ae)}),$("dblclick",te,function(...Ae){var Ce;(Ce=b(oe))==null||Ce.apply(this,Ae)}),I(Q,te)};ne(ee,Q=>{(s()!==y||n())&&Q(Y)})}var ye=k(ee,2),De=Sl(()=>N==null?void 0:N("onPaneClick")),Pe=D(ye);Oe(Pe,t,"default",{}),ns(ye,Q=>O(A,Q),()=>b(A)),xe(()=>{Vt(ye,1,`splitpanes__pane ${S()||""}`),qn(ye,b(l))}),$("click",ye,function(...Q){var te;(te=b(De))==null||te.apply(this,Q)}),I(B,Z)};ne(z,B=>{B(q)})}I(e,L),pt(),r()}function FC(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]),s=$e(i,["key","horizontal","defaultSizes","prefix"]);ft(t,!1);let n=ce(t,"key",8,""),o=ce(t,"horizontal",8,!1),r=ce(t,"defaultSizes",24,()=>[]),a=ce(t,"prefix",8,"layout__"),l=re([]),c=`${a()}${n()}`;Mi(()=>{const h=localStorage.getItem(c);if(h)try{O(l,JSON.parse(h))}catch{O(l,r())}else O(l,r())});const d=h=>{const u=h.detail,f=Array.isArray(u)&&(u==null?void 0:u.map(p=>({...p,size:Number.isFinite(p.size)?Math.round(p.size):p.size,snapSize:Math.round(p.size/2)})));localStorage.setItem(c,JSON.stringify(f))};vt(),Z1(e,et({get horizontal(){return o()}},()=>s,{$$events:{resize:d},children:(h,u)=>{var f=de(),p=K(f);Oe(p,t,"default",{get paneSizes(){return b(l)}}),I(h,f)},$$slots:{default:!0}})),pt()}function jo(e,t){const i=$e(t,["children","$$slots","$$events","$$legacy"]),s=$e(i,["index","paneSizes"]);ft(t,!1);let n=ce(t,"index",8,0),o=ce(t,"paneSizes",24,()=>[]);vt(),nL(e,et(()=>o()[n()],()=>s,{children:(r,a)=>{var l=de(),c=K(l);Oe(c,t,"default",{}),I(r,l)},$$slots:{default:!0}})),pt()}const zm={vi:{today:"HÃ´m nay",yesterday:"HÃ´m qua",weekdays:{0:"CN",1:"T2",2:"T3",3:"T4",4:"T5",5:"T6",6:"T7"}},en:{today:"Today",yesterday:"Yesterday"}};function Ua(e){return String(e).padStart(2,"0")}function Z0(e,t="vi"){if(!e)return"";const i=new Date(e);if(isNaN(i.getTime()))return"";const s=new Date,n=zm[t]??zm.vi,o=i.getFullYear()===s.getFullYear(),r=p=>`${p.getFullYear()}-${Ua(p.getMonth()+1)}-${Ua(p.getDate())}`,a=r(s),l=r(new Date(s.getFullYear(),s.getMonth(),s.getDate()-1)),c=r(i),d=Ua(i.getDate()),h=Ua(i.getMonth()+1),u=i.getFullYear(),f=t==="vi"?n.weekdays[i.getDay()]:i.toLocaleDateString(t,{weekday:"short"});return c===a?`${n.today}, ${d}/${h}`:c===l?`${n.yesterday}, ${f}, ${d}/${h}`:o?`${f}, ${d}/${h}`:`${f}, ${d}/${h}/${u}`}function Tp(e,t="vi"){if(!e)return"";const i=new Date(e);if(isNaN(i.getTime()))return"";const s=new Date,n=zm[t]??zm.vi,o=u=>`${u.getFullYear()}-${Ua(u.getMonth()+1)}-${Ua(u.getDate())}`,r=o(s),a=o(new Date(s.getFullYear(),s.getMonth(),s.getDate()-1)),l=o(i),c=Ua(i.getHours()),d=Ua(i.getMinutes()),h=`${c}:${d}`;return l===r?h:l===a?`${n.yesterday}, ${h}`:h}function Wm(e,t){if(!e||!t)return!0;const i=new Date(e),s=new Date(t);return isNaN(i.getTime())||isNaN(s.getTime())?!0:i.getFullYear()!==s.getFullYear()||i.getMonth()!==s.getMonth()||i.getDate()!==s.getDate()}var oL=W('<div class="flex items-center justify-center my-3"><span class="px-3 py-[2px] text-xs rounded-full bg-gray-200 text-gray-600"> </span></div>');function RA(e,t){ft(t,!1);let i=ce(t,"time",8),s=ce(t,"locale",8,"vi");vt();var n=oL(),o=D(n),r=D(o);xe(a=>Be(r,a),[()=>(ve(Z0),ve(i()),ve(s()),X(()=>Z0(i(),s())))]),I(e,n),pt()}var rL=W('<button class="btn nav left svelte-4w3r7p">â¹</button>'),aL=W('<button class="btn nav right svelte-4w3r7p">âº</button>'),lL=W("<img/>"),cL=W('<div class="overlay svelte-4w3r7p"><div class="viewer svelte-4w3r7p"><img draggable="false"/> <button class="btn close svelte-4w3r7p">â</button> <!> <!> <div class="toolbox svelte-4w3r7p"><button class="svelte-4w3r7p">ð¤ Share</button> <button class="svelte-4w3r7p">â¬ï¸ Download</button> <button class="svelte-4w3r7p">ð Open</button></div> <div class="meta svelte-4w3r7p"><strong>ð· ThÃ´ng tin</strong> <br/> <br/> <!></div> <div class="counter svelte-4w3r7p"> </div> <div class="thumb-wrap svelte-4w3r7p"></div></div></div>');function dL(e,t){ft(t,!1);let i=ce(t,"images",24,()=>[]),s=ce(t,"index",12,0),n=ce(t,"onClose",8,()=>{}),o=re(1),r=re(0),a=re(0),l=!1,c,d,h=0,u=1,f=0;const p=130;let m=0,v=0,C=re({width:0,height:0,size:null});function w(se){const H=new Image;H.onload=()=>{hs(C,b(C).width=H.width),hs(C,b(C).height=H.height)},H.src=se,fetch(se,{method:"HEAD"}).then(le=>{const Fe=le.headers.get("content-length");Fe&&hs(C,b(C).size=S(parseInt(Fe)))}).catch(()=>{})}function S(se){const H=["B","KB","MB","GB"],le=Math.floor(Math.log(se)/Math.log(1024));return`${(se/Math.pow(1024,le)).toFixed(1)} ${H[le]}`}let y=re("zoom-in"),R=re();function A(){if(!b(R))return;const se=b(R).querySelector(`.thumb-${s()}`);se&&se.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}function P(){s()<i().length-1&&(M("left"),_0(s),De())}function T(){s()>0&&(M("right"),_0(s,-1),De())}function M(se){O(y,se==="left"?"slide-left":"slide-right"),setTimeout(()=>O(y,""),250)}function N(se){O(o,b(o)+se.deltaY*-.002),O(o,Math.min(Math.max(b(o),1),4))}function _(se){b(o)<2?O(o,2):b(o)<4?O(o,4):De();const H=se.target.getBoundingClientRect();O(r,(H.width/2-(se.clientX-H.left))*(b(o)-1)),O(a,(H.height/2-(se.clientY-H.top))*(b(o)-1))}function L(se){const H=se.touches?se.touches[0]:se;b(o)===1&&(m=performance.now(),v=H.clientY),l=!0,c=H.clientX-b(r),d=H.clientY-b(a)}function z(se){if(!l)return;const H=se.touches?se.touches[0]:se;if(O(r,H.clientX-c),O(a,H.clientY-d),b(o)===1){const le=performance.now(),Fe=le-m,mt=H.clientY-v;Fe>0&&Math.abs(mt/Fe*1e3)>p&&(O(y,"swipe-close"),setTimeout(n(),150)),m=le,v=H.clientY}}function q(){l=!1}function B(se){const H=se.touches?se.touches[0]:se;h=H.clientX,H.clientY}function Z(se){const le=(se.changedTouches?se.changedTouches[0]:se).clientX-h;b(o)===1&&Math.abs(le)>60&&(le<0?P():T())}function ee(se){se.touches.length<2||(f=ye(se.touches),u=b(o))}function Y(se){if(se.touches.length<2)return;const H=ye(se.touches);O(o,Math.min(Math.max(u*(H/f),1),4))}function ye(se){return Math.hypot(se[0].clientX-se[1].clientX,se[0].clientY-se[1].clientY)}function De(){O(o,1),O(r,O(a,0))}function Pe(){navigator.share?navigator.share({url:i()[s()]}):window.open(i()[s()],"_blank")}function Q(){const se=document.createElement("a");se.href=i()[s()],se.download=`photo-${s()+1}`,se.click()}Lt(()=>(ve(i()),ve(s())),()=>{w(i()[s()])}),Lt(()=>{},()=>{A()}),Ys(),vt();var te=cL(),ie=D(te),ae=D(ie),U=k(ae,2),oe=k(U,2);{var Ae=se=>{var H=rL();$("click",H,T),I(se,H)};ne(oe,se=>{s()>0&&se(Ae)})}var Ce=k(oe,2);{var Qe=se=>{var H=aL();$("click",H,P),I(se,H)};ne(Ce,se=>{ve(s()),ve(i()),X(()=>s()<i().length-1)&&se(Qe)})}var je=k(Ce,2),Je=D(je),tt=k(Je,2),ct=k(tt,2),st=k(je,2),be=k(D(st),3),Ve=k(be,3);{var Te=se=>{var H=BE();xe(()=>Be(H,`Size: ${b(C),X(()=>b(C).size)??""}`)),I(se,H)};ne(Ve,se=>{b(C),X(()=>b(C).size)&&se(Te)})}var We=k(st,2),Qt=D(We),$t=k(We,2);hi($t,5,i,ds,(se,H,le)=>{var Fe=lL();xe(()=>{Ci(Fe,"src",b(H)),Vt(Fe,1,`thumb thumb-${le} ${s()===le?"active":""}`,"svelte-4w3r7p")}),$("click",Fe,()=>{s(le),De()}),I(se,Fe)}),ns($t,se=>O(R,se),()=>b(R)),xe(()=>{Ci(ae,"src",(ve(i()),ve(s()),X(()=>i()[s()]))),Vt(ae,1,`main-img ${b(y)??""}`,"svelte-4w3r7p"),qn(ae,`transform: translate(${b(r)??""}px, ${b(a)??""}px) scale(${b(o)??""});`),Be(be,` Resolution: ${b(C),X(()=>b(C).width)??""}Ã${b(C),X(()=>b(C).height)??""} `),Be(Qt,`${s()+1} / ${ve(i()),X(()=>i().length)??""}`)}),$("dblclick",ae,_),$("click",U,()=>n()()),$("click",Je,Pe),$("click",tt,Q),$("click",ct,()=>window.open(i()[s()],"_blank")),$("click",ie,Ic(function(se){Kv.call(this,t,se)})),$("wheel",ie,N),$("mousedown",ie,L),$("mousemove",ie,z),$("mouseup",ie,q),$("mouseleave",ie,q),$("touchstart",ie,se=>{B(se),ee(se)}),$("touchmove",ie,se=>Y(se)),$("touchend",ie,Z),$("click",te,()=>n()()),I(e,te),pt()}function hL(e){return--e*e*e*e*e+1}var uL=W('<div class="absolute bottom-8 pointer-events-none z-50"><span class="text-4xl drop-shadow-xl"> </span></div>'),gL=W('<button class="text-2xl hover:scale-150 transition-transform duration-200 active:scale-190"> </button>'),fL=W("<div></div>"),pL=W(`<div class="relative inline-block"><!> <button class="text-[12px] bg-gray-200 dark:bg-gray-600
           px-1.5 py-0.5 rounded-full
           hover:scale-110 transition">ð</button> <!></div>`);function mL(e,t){ft(t,!1);let i=ce(t,"fromMe",8,!1),s=ce(t,"messageId",8),n=ce(t,"reactions",24,()=>["ð","â¤ï¸","ð","ð®","ð¢","ð¡"]),o=ce(t,"effect",8,"fly-one"),r=ce(t,"onSelect",8,()=>{}),a=re(!1),l=re(!1),c=re([]);function d(P){if(o()!=="simple"){if(o()==="fly-one"&&u(P),o()==="fly-multi"){const T=6+Math.floor(Math.random()*4);for(let M=0;M<T;M++)setTimeout(()=>u(P),M*70)}if(o()==="center-rise"&&u(P,{x:h(),y:160}),o()==="spread"&&[-40,-20,0,20,40].forEach((T,M)=>{setTimeout(()=>u(P,{x:T,y:140}),M*60)}),o()==="burst")for(let T=0;T<8;T++)u(P,{x:i()?-(10+Math.random()*40):10+Math.random()*40,y:120+Math.random()*80,scale:.7+Math.random()*.6})}}function h(){return i()?-40:0}function u(P,T={}){const M=Date.now()+Math.random();O(c,[...b(c),{id:M,emoji:P,x:T.x??f(),y:T.y??p(),scale:T.scale??m()}])}function f(){return i()?-(10+Math.random()*40):10+Math.random()*40}function p(){return 130+Math.random()*50}function m(){return .8+Math.random()*.5}function v(P){O(c,b(c).filter(T=>T.id!==P))}function C(P){r()({messageId:s(),reaction:P}),d(P),O(a,!1)}vt();var w=pL(),S=D(w);hi(S,1,()=>b(c),P=>P.id,(P,T)=>{var M=uL(),N=D(M),_=D(N);xe(()=>{qn(M,`
    ${i()?"right: 24px;":"left: 24px;"}
    transform: translateX(${b(T),X(()=>b(T).x)??""}px) scale(${b(T),X(()=>b(T).scale)??""});
    opacity: 0.95;
  `),Be(_,(b(T),X(()=>b(T).emoji)))}),$("introend",M,()=>v(b(T).id)),YE(3,M,()=>z1,()=>({y:-b(T).y,duration:900,easing:hL})),I(P,M)});var y=k(S,2);y.__click=P=>{P.stopPropagation(),O(a,!b(a))};var R=k(y,2);{var A=P=>{var T=fL();let M;hi(T,5,n,ds,(N,_)=>{var L=gL();L.__click=()=>C(b(_));var z=D(L);xe(()=>Be(z,b(_))),I(N,L)}),xe(()=>M=Vt(T,1,`absolute bottom-full translate-y-1
        ${i()?"right-0 origin-bottom-right":"left-0 origin-bottom-left"}
        flex gap-2 bg-white dark:bg-gray-700
        border border-gray-300 dark:border-gray-600
        rounded-full px-3 py-2 shadow-xl z-50
        scale-0 transition-transform duration-150`,null,M,{"scale-100":b(a)||b(l)})),$("mouseenter",T,()=>O(a,!0)),$("mouseleave",T,()=>O(a,!1)),I(P,T)};ne(R,P=>{(b(l)||b(a))&&P(A)})}$("mouseenter",w,()=>O(l,!0)),$("mouseleave",w,()=>{O(l,!1),O(a,!1)}),I(e,w),pt()}ap(["click"]);var sg={};sg.d=(e,t)=>{for(var i in t)sg.o(t,i)&&!sg.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})};sg.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Ue=globalThis.pdfjsLib={};sg.d(Ue,{AbortException:()=>nd,AnnotationEditorLayer:()=>Qb,AnnotationEditorParamsType:()=>ze,AnnotationEditorType:()=>qe,AnnotationEditorUIManager:()=>$c,AnnotationLayer:()=>f2,AnnotationMode:()=>da,ColorPicker:()=>Km,DOMSVGFactory:()=>CS,DrawLayer:()=>ty,FeatureTest:()=>gs,GlobalWorkerOptions:()=>Pr,ImageKind:()=>Yp,InvalidPDFException:()=>AA,MissingPDFException:()=>sd,OPS:()=>Rn,OutputScale:()=>Uw,PDFDataRangeTransport:()=>SF,PDFDateString:()=>hS,PDFWorker:()=>Ld,PasswordResponses:()=>bL,PermissionFlag:()=>wL,PixelsPerInch:()=>Qa,RenderingCancelledException:()=>cS,TextLayer:()=>yg,UnexpectedResponseException:()=>eC,Util:()=>ke,VerbosityLevel:()=>Qv,XfaLayer:()=>RF,build:()=>qO,createValidAbsoluteUrl:()=>RL,fetchData:()=>iC,getDocument:()=>GO,getFilenameFromUrl:()=>kL,getPdfFilenameFromUrl:()=>_L,getXfaPageViewport:()=>LL,isDataScheme:()=>sC,isPdfFile:()=>dS,noContextMenu:()=>vn,normalizeUnicode:()=>DL,setLayerDimensions:()=>Wc,shadow:()=>ut,version:()=>KO});const is=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),EA=[1,0,0,1,0,0],Vw=[.001,0,0,.001,0,0],vL=1e7,PC=1.35,Vs={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},da={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},CL="pdfjs_internal_editor_",qe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ze={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},wL={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},qi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Yp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},gi={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Ru={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Qv={ERRORS:0,WARNINGS:1,INFOS:5},Rn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},bL={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Jv=Qv.WARNINGS;function yL(e){Number.isInteger(e)&&(Jv=e)}function SL(){return Jv}function Zv(e){Jv>=Qv.INFOS&&console.log(`Info: ${e}`)}function Ze(e){Jv>=Qv.WARNINGS&&console.log(`Warning: ${e}`)}function Nt(e){throw new Error(e)}function wi(e,t){e||Nt(t)}function xL(e){switch(e==null?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function RL(e,t=null,i=null){if(!e)return null;try{if(i&&typeof e=="string"){if(i.addDefaultProtocol&&e.startsWith("www.")){const n=e.match(/\./g);(n==null?void 0:n.length)>=2&&(e=`http://${e}`)}if(i.tryConvertEncoding)try{e=TL(e)}catch{}}const s=t?new URL(e,t):new URL(e);if(xL(s))return s}catch{}return null}function ut(e,t,i,s=!1){return Object.defineProperty(e,t,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const al=(function(){function t(i,s){this.message=i,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class zw extends al{constructor(t,i){super(t,"PasswordException"),this.code=i}}class Ww extends al{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class AA extends al{constructor(t){super(t,"InvalidPDFException")}}class sd extends al{constructor(t){super(t,"MissingPDFException")}}class eC extends al{constructor(t,i){super(t,"UnexpectedResponseException"),this.status=i}}class EL extends al{constructor(t){super(t,"FormatError")}}class nd extends al{constructor(t){super(t,"AbortException")}}function FA(e){(typeof e!="object"||(e==null?void 0:e.length)===void 0)&&Nt("Invalid argument for bytesToString");const t=e.length,i=8192;if(t<i)return String.fromCharCode.apply(null,e);const s=[];for(let n=0;n<t;n+=i){const o=Math.min(n+i,t),r=e.subarray(n,o);s.push(String.fromCharCode.apply(null,r))}return s.join("")}function tC(e){typeof e!="string"&&Nt("Invalid argument for stringToBytes");const t=e.length,i=new Uint8Array(t);for(let s=0;s<t;++s)i[s]=e.charCodeAt(s)&255;return i}function AL(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function aS(e){const t=Object.create(null);for(const[i,s]of e)t[i]=s;return t}function FL(){const e=new Uint8Array(4);return e[0]=1,new Uint32Array(e.buffer,0,1)[0]===1}function PL(){try{return new Function(""),!0}catch{return!1}}class gs{static get isLittleEndian(){return ut(this,"isLittleEndian",FL())}static get isEvalSupported(){return ut(this,"isEvalSupported",PL())}static get isOffscreenCanvasSupported(){return ut(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ut(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ut(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,i;return ut(this,"isCSSRoundSupported",(i=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:i.call(t,"width: round(1.5px, 1px)"))}}const TC=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));var Gr,Xp,$w;class ke{static makeHexColor(t,i,s){return`#${TC[t]}${TC[i]}${TC[s]}`}static scaleMinMax(t,i){let s;t[0]?(t[0]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[3],i[3]*=t[3]):(s=i[0],i[0]=i[1],i[1]=s,s=i[2],i[2]=i[3],i[3]=s,t[1]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static applyTransform(t,i){const s=t[0]*i[0]+t[1]*i[2]+i[4],n=t[0]*i[1]+t[1]*i[3]+i[5];return[s,n]}static applyInverseTransform(t,i){const s=i[0]*i[3]-i[1]*i[2],n=(t[0]*i[3]-t[1]*i[2]+i[2]*i[5]-i[4]*i[3])/s,o=(-t[0]*i[1]+t[1]*i[0]+i[4]*i[1]-i[5]*i[0])/s;return[n,o]}static getAxialAlignedBoundingBox(t,i){const s=this.applyTransform(t,i),n=this.applyTransform(t.slice(2,4),i),o=this.applyTransform([t[0],t[3]],i),r=this.applyTransform([t[2],t[1]],i);return[Math.min(s[0],n[0],o[0],r[0]),Math.min(s[1],n[1],o[1],r[1]),Math.max(s[0],n[0],o[0],r[0]),Math.max(s[1],n[1],o[1],r[1])]}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t){const i=[t[0],t[2],t[1],t[3]],s=t[0]*i[0]+t[1]*i[2],n=t[0]*i[1]+t[1]*i[3],o=t[2]*i[0]+t[3]*i[2],r=t[2]*i[1]+t[3]*i[3],a=(s+r)/2,l=Math.sqrt((s+r)**2-4*(s*r-o*n))/2,c=a+l||1,d=a-l||1;return[Math.sqrt(c),Math.sqrt(d)]}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const s=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(s>n)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return o>r?null:[s,o,n,r]}static bezierBoundingBox(t,i,s,n,o,r,a,l,c){return c?(c[0]=Math.min(c[0],t,a),c[1]=Math.min(c[1],i,l),c[2]=Math.max(c[2],t,a),c[3]=Math.max(c[3],i,l)):c=[Math.min(t,a),Math.min(i,l),Math.max(t,a),Math.max(i,l)],E(this,Gr,$w).call(this,t,s,o,a,i,n,r,l,3*(-t+3*(s-o)+a),6*(t-2*s+o),3*(s-t),c),E(this,Gr,$w).call(this,t,s,o,a,i,n,r,l,3*(-i+3*(n-r)+l),6*(i-2*n+r),3*(n-i),c),c}}Gr=new WeakSet,Xp=function(t,i,s,n,o,r,a,l,c,d){if(c<=0||c>=1)return;const h=1-c,u=c*c,f=u*c,p=h*(h*(h*t+3*c*i)+3*u*s)+f*n,m=h*(h*(h*o+3*c*r)+3*u*a)+f*l;d[0]=Math.min(d[0],p),d[1]=Math.min(d[1],m),d[2]=Math.max(d[2],p),d[3]=Math.max(d[3],m)},$w=function(t,i,s,n,o,r,a,l,c,d,h,u){if(Math.abs(c)<1e-12){Math.abs(d)>=1e-12&&E(this,Gr,Xp).call(this,t,i,s,n,o,r,a,l,-h/d,u);return}const f=d**2-4*h*c;if(f<0)return;const p=Math.sqrt(f),m=2*c;E(this,Gr,Xp).call(this,t,i,s,n,o,r,a,l,(-d+p)/m,u),E(this,Gr,Xp).call(this,t,i,s,n,o,r,a,l,(-d-p)/m,u)},F(ke,Gr);function TL(e){return decodeURIComponent(escape(e))}let DC=null,ex=null;function DL(e){return DC||(DC=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ex=new Map([["ï¬","Å¿t"]])),e.replaceAll(DC,(t,i,s)=>i?i.normalize("NFKC"):ex.get(s))}function ML(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const e=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(e);else for(let t=0;t<32;t++)e[t]=Math.floor(Math.random()*255);return FA(e)}const lS="pdfjs_internal_id_",Ko={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function IL(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(FA(e))}const Xo="http://www.w3.org/2000/svg",xl=class xl{};Ne(xl,"CSS",96),Ne(xl,"PDF",72),Ne(xl,"PDF_TO_CSS_UNITS",xl.CSS/xl.PDF);let Qa=xl;async function iC(e,t="text"){if(_u(e,document.baseURI)){const i=await fetch(e);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,s)=>{const n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(n.response);return}i(n.responseText);return}s(new Error(n.statusText))}},n.send(null)})}class dp{constructor({viewBox:t,scale:i,rotation:s,offsetX:n=0,offsetY:o=0,dontFlip:r=!1}){this.viewBox=t,this.scale=i,this.rotation=s,this.offsetX=n,this.offsetY=o;const a=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let c,d,h,u;switch(s%=360,s<0&&(s+=360),s){case 180:c=-1,d=0,h=0,u=1;break;case 90:c=0,d=1,h=1,u=0;break;case 270:c=0,d=-1,h=-1,u=0;break;case 0:c=1,d=0,h=0,u=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}r&&(h=-h,u=-u);let f,p,m,v;c===0?(f=Math.abs(l-t[1])*i+n,p=Math.abs(a-t[0])*i+o,m=(t[3]-t[1])*i,v=(t[2]-t[0])*i):(f=Math.abs(a-t[0])*i+n,p=Math.abs(l-t[1])*i+o,m=(t[2]-t[0])*i,v=(t[3]-t[1])*i),this.transform=[c*i,d*i,h*i,u*i,f-c*i*a-h*i*l,p-d*i*a-u*i*l],this.width=m,this.height=v}get rawDims(){const{viewBox:t}=this;return ut(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:s=this.offsetX,offsetY:n=this.offsetY,dontFlip:o=!1}={}){return new dp({viewBox:this.viewBox.slice(),scale:t,rotation:i,offsetX:s,offsetY:n,dontFlip:o})}convertToViewportPoint(t,i){return ke.applyTransform([t,i],this.transform)}convertToViewportRectangle(t){const i=ke.applyTransform([t[0],t[1]],this.transform),s=ke.applyTransform([t[2],t[3]],this.transform);return[i[0],i[1],s[0],s[1]]}convertToPdfPoint(t,i){return ke.applyInverseTransform([t,i],this.transform)}}class cS extends al{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function sC(e){const t=e.length;let i=0;for(;i<t&&e[i].trim()==="";)i++;return e.substring(i,i+5).toLowerCase()==="data:"}function dS(e){return typeof e=="string"&&/\.pdf$/i.test(e)}function kL(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)}function _L(e,t="document.pdf"){if(typeof e!="string")return t;if(sC(e))return Ze('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=i.exec(e);let o=s.exec(n[1])||s.exec(n[2])||s.exec(n[3]);if(o&&(o=o[0],o.includes("%")))try{o=s.exec(decodeURIComponent(o))[0]}catch{}return o||t}class tx{constructor(){Ne(this,"started",Object.create(null));Ne(this,"times",[])}time(t){t in this.started&&Ze(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ze(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:s}of this.times)i=Math.max(s.length,i);for(const{name:s,start:n,end:o}of this.times)t.push(`${s.padEnd(i)} ${o-n}ms
`);return t.join("")}}function _u(e,t){try{const{protocol:i}=t?new URL(e,t):new URL(e);return i==="http:"||i==="https:"}catch{return!1}}function vn(e){e.preventDefault()}function ix(e){console.log("Deprecated API usage: "+e)}var Gg;class hS{static toDateObject(t){if(!t||typeof t!="string")return null;g(this,Gg)||x(this,Gg,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const i=g(this,Gg).exec(t);if(!i)return null;const s=parseInt(i[1],10);let n=parseInt(i[2],10);n=n>=1&&n<=12?n-1:0;let o=parseInt(i[3],10);o=o>=1&&o<=31?o:1;let r=parseInt(i[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(i[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(i[6],10);l=l>=0&&l<=59?l:0;const c=i[7]||"Z";let d=parseInt(i[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(i[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(r+=d,a+=h):c==="+"&&(r-=d,a-=h),new Date(Date.UTC(s,n,o,r,a,l))}}Gg=new WeakMap,F(hS,Gg);function LL(e,{scale:t=1,rotation:i=0}){const{width:s,height:n}=e.attributes.style,o=[0,0,parseInt(s),parseInt(n)];return new dp({viewBox:o,scale:t,rotation:i})}function uS(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(t=>parseInt(t)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ze(`Not a valid color format: "${e}"`),[0,0,0])}function OL(e){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const i of e.keys()){t.style.color=i;const s=window.getComputedStyle(t).color;e.set(i,uS(s))}t.remove()}function Yt(e){const{a:t,b:i,c:s,d:n,e:o,f:r}=e.getTransform();return[t,i,s,n,o,r]}function qo(e){const{a:t,b:i,c:s,d:n,e:o,f:r}=e.getTransform().invertSelf();return[t,i,s,n,o,r]}function Wc(e,t,i=!1,s=!0){if(t instanceof dp){const{pageWidth:n,pageHeight:o}=t.rawDims,{style:r}=e,a=gs.isCSSRoundSupported,l=`var(--scale-factor) * ${n}px`,c=`var(--scale-factor) * ${o}px`,d=a?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,h=a?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!i||t.rotation%180===0?(r.width=d,r.height=h):(r.width=h,r.height=d)}s&&e.setAttribute("data-main-rotation",t.rotation)}class Uw{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var pa,_l,An,Ll,Bg,Vg,yv,PA,ps,TA,DA,Qp,MA,Kw;const Jo=class Jo{constructor(t){F(this,ps);F(this,pa,null);F(this,_l,null);F(this,An);F(this,Ll,null);F(this,Bg,null);x(this,An,t),g(Jo,Vg)||x(Jo,Vg,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=x(this,pa,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=g(this,An)._uiManager._signal;t.addEventListener("contextmenu",vn,{signal:i}),t.addEventListener("pointerdown",E(Jo,yv,PA),{signal:i});const s=x(this,Ll,document.createElement("div"));s.className="buttons",t.append(s);const n=g(this,An).toolbarPosition;if(n){const{style:o}=t,r=g(this,An)._uiManager.direction==="ltr"?1-n[0]:n[0];o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return E(this,ps,MA).call(this),t}get div(){return g(this,pa)}hide(){var t;g(this,pa).classList.add("hidden"),(t=g(this,_l))==null||t.hideDropdown()}show(){var t;g(this,pa).classList.remove("hidden"),(t=g(this,Bg))==null||t.shown()}async addAltText(t){const i=await t.render();E(this,ps,Qp).call(this,i),g(this,Ll).prepend(i,g(this,ps,Kw)),x(this,Bg,t)}addColorPicker(t){x(this,_l,t);const i=t.renderButton();E(this,ps,Qp).call(this,i),g(this,Ll).prepend(i,g(this,ps,Kw))}remove(){var t;g(this,pa).remove(),(t=g(this,_l))==null||t.destroy(),x(this,_l,null)}};pa=new WeakMap,_l=new WeakMap,An=new WeakMap,Ll=new WeakMap,Bg=new WeakMap,Vg=new WeakMap,yv=new WeakSet,PA=function(t){t.stopPropagation()},ps=new WeakSet,TA=function(t){g(this,An)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},DA=function(t){g(this,An)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},Qp=function(t){const i=g(this,An)._uiManager._signal;t.addEventListener("focusin",E(this,ps,TA).bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",E(this,ps,DA).bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",vn,{signal:i})},MA=function(){const{editorType:t,_uiManager:i}=g(this,An),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",g(Jo,Vg)[t]),E(this,ps,Qp).call(this,s),s.addEventListener("click",n=>{i.delete()},{signal:i._signal}),g(this,Ll).append(s)},Kw=function(){const t=document.createElement("div");return t.className="divider",t},F(Jo,yv),F(Jo,Vg,null);let jw=Jo;var zg,Ol,Nl,nl,IA,kA,_A;class NL{constructor(t){F(this,nl);F(this,zg,null);F(this,Ol,null);F(this,Nl);x(this,Nl,t)}show(t,i,s){const[n,o]=E(this,nl,kA).call(this,i,s),{style:r}=g(this,Ol)||x(this,Ol,E(this,nl,IA).call(this));t.append(g(this,Ol)),r.insetInlineEnd=`${100*n}%`,r.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){g(this,Ol).remove()}}zg=new WeakMap,Ol=new WeakMap,Nl=new WeakMap,nl=new WeakSet,IA=function(){const t=x(this,Ol,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",vn,{signal:g(this,Nl)._signal});const i=x(this,zg,document.createElement("div"));return i.className="buttons",t.append(i),E(this,nl,_A).call(this),t},kA=function(t,i){let s=0,n=0;for(const o of t){const r=o.y+o.height;if(r<s)continue;const a=o.x+(i?o.width:0);if(r>s){n=a,s=r;continue}i?a>n&&(n=a):a<n&&(n=a)}return[i?1-n:n,s]},_A=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const i=document.createElement("span");t.append(i),i.className="visuallyHidden",i.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=g(this,Nl)._signal;t.addEventListener("contextmenu",vn,{signal:s}),t.addEventListener("click",()=>{g(this,Nl).highlightSelection("floating_button")},{signal:s}),g(this,zg).append(t)};function $m(e,t,i){for(const s of i)t.addEventListener(s,e[s].bind(e))}function HL(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")}var Sv;class GL{constructor(){F(this,Sv,0)}get id(){return`${CL}${os(this,Sv)._++}`}}Sv=new WeakMap;var Qd,Wg,Xi,Jd,Jp;const g0=class g0{constructor(){F(this,Jd);F(this,Qd,ML());F(this,Wg,0);F(this,Xi,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;const o=n.decode().then(()=>(s.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return ut(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:i,name:s,size:n,type:o}=t;return E(this,Jd,Jp).call(this,`${i}_${s}_${n}_${o}`,t)}async getFromUrl(t){return E(this,Jd,Jp).call(this,t,t)}async getFromBlob(t,i){const s=await i;return E(this,Jd,Jp).call(this,t,s)}async getFromId(t){g(this,Xi)||x(this,Xi,new Map);const i=g(this,Xi).get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:s}=i;return delete i.blobPromise,this.getFromBlob(i.id,s)}return this.getFromUrl(i.url)}getFromCanvas(t,i){g(this,Xi)||x(this,Xi,new Map);let s=g(this,Xi).get(t);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const n=new OffscreenCanvas(i.width,i.height);return n.getContext("2d").drawImage(i,0,0),s={bitmap:n.transferToImageBitmap(),id:`image_${g(this,Qd)}_${os(this,Wg)._++}`,refCounter:1,isSvg:!1},g(this,Xi).set(t,s),g(this,Xi).set(s.id,s),s}getSvgUrl(t){const i=g(this,Xi).get(t);return i!=null&&i.isSvg?i.svgUrl:null}deleteId(t){var n;g(this,Xi)||x(this,Xi,new Map);const i=g(this,Xi).get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:s}=i;if(!i.url&&!i.file){const o=new OffscreenCanvas(s.width,s.height);o.getContext("bitmaprenderer").transferFromImageBitmap(s),i.blobPromise=o.convertToBlob()}(n=s.close)==null||n.call(s),i.bitmap=null}isValidId(t){return t.startsWith(`image_${g(this,Qd)}_`)}};Qd=new WeakMap,Wg=new WeakMap,Xi=new WeakMap,Jd=new WeakSet,Jp=async function(t,i){g(this,Xi)||x(this,Xi,new Map);let s=g(this,Xi).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${g(this,Qd)}_${os(this,Wg)._++}`,refCounter:0,isSvg:!1});let n;if(typeof i=="string"?(s.url=i,n=await iC(i,"blob")):i instanceof File?n=s.file=i:i instanceof Blob&&(n=i),n.type==="image/svg+xml"){const o=g0._isSVGFittingCanvas,r=new FileReader,a=new Image,l=new Promise((c,d)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,c()},r.onload=async()=>{const h=s.svgUrl=r.result;a.src=await o?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=r.onerror=d});r.readAsDataURL(n),await l}else s.bitmap=await createImageBitmap(n);s.refCounter=1}catch(n){console.error(n),s=null}return g(this,Xi).set(t,s),s&&g(this,Xi).set(s.id,s),s};let qw=g0;var xi,ma,$g,Ri;class BL{constructor(t=128){F(this,xi,[]);F(this,ma,!1);F(this,$g);F(this,Ri,-1);x(this,$g,t)}add({cmd:t,undo:i,post:s,mustExec:n,type:o=NaN,overwriteIfSameType:r=!1,keepUndo:a=!1}){if(n&&t(),g(this,ma))return;const l={cmd:t,undo:i,post:s,type:o};if(g(this,Ri)===-1){g(this,xi).length>0&&(g(this,xi).length=0),x(this,Ri,0),g(this,xi).push(l);return}if(r&&g(this,xi)[g(this,Ri)].type===o){a&&(l.undo=g(this,xi)[g(this,Ri)].undo),g(this,xi)[g(this,Ri)]=l;return}const c=g(this,Ri)+1;c===g(this,$g)?g(this,xi).splice(0,1):(x(this,Ri,c),c<g(this,xi).length&&g(this,xi).splice(c)),g(this,xi).push(l)}undo(){if(g(this,Ri)===-1)return;x(this,ma,!0);const{undo:t,post:i}=g(this,xi)[g(this,Ri)];t(),i==null||i(),x(this,ma,!1),x(this,Ri,g(this,Ri)-1)}redo(){if(g(this,Ri)<g(this,xi).length-1){x(this,Ri,g(this,Ri)+1),x(this,ma,!0);const{cmd:t,post:i}=g(this,xi)[g(this,Ri)];t(),i==null||i(),x(this,ma,!1)}}hasSomethingToUndo(){return g(this,Ri)!==-1}hasSomethingToRedo(){return g(this,Ri)<g(this,xi).length-1}destroy(){x(this,xi,null)}}xi=new WeakMap,ma=new WeakMap,$g=new WeakMap,Ri=new WeakMap;var xv,LA;class hp{constructor(t){F(this,xv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=gs.platform;for(const[s,n,o={}]of t)for(const r of s){const a=r.startsWith("mac+");i&&a?(this.callbacks.set(r.slice(4),{callback:n,options:o}),this.allKeys.add(r.split("+").at(-1))):!i&&!a&&(this.callbacks.set(r,{callback:n,options:o}),this.allKeys.add(r.split("+").at(-1)))}}exec(t,i){if(!this.allKeys.has(i.key))return;const s=this.callbacks.get(E(this,xv,LA).call(this,i));if(!s)return;const{callback:n,options:{bubbles:o=!1,args:r=[],checker:a=null}}=s;a&&!a(t,i)||(n.bind(t,...r,i)(),o||(i.stopPropagation(),i.preventDefault()))}}xv=new WeakSet,LA=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i};const Rv=class Rv{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return OL(t),ut(this,"_colors",t)}convert(t){const i=uS(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,n]of this._colors)if(n.every((o,r)=>o===i[r]))return Rv._colorsMapping.get(s);return i}getHexCode(t){const i=this._colors.get(t);return i?ke.makeHexColor(...i):t}};Ne(Rv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Yw=Rv;var Zd,ks,pi,Oi,eh,ir,th,Fn,va,ih,Hl,ho,Pn,Gl,Ug,jg,sh,Kg,uo,Ca,nh,wa,go,Ev,ba,qg,ya,Bl,Yg,Xg,Ei,Ft,sr,Vl,Qg,Jg,Sa,fo,nr,Zg,rn,we,Zp,Xw,OA,NA,em,HA,GA,BA,Qw,VA,Jw,Zw,zA,rs,na,WA,$A,eb,UA,Lu,tb;const Md=class Md{constructor(t,i,s,n,o,r,a,l,c,d,h){F(this,we);F(this,Zd,new AbortController);F(this,ks,null);F(this,pi,new Map);F(this,Oi,new Map);F(this,eh,null);F(this,ir,null);F(this,th,null);F(this,Fn,new BL);F(this,va,null);F(this,ih,0);F(this,Hl,new Set);F(this,ho,null);F(this,Pn,null);F(this,Gl,new Set);F(this,Ug,!1);F(this,jg,!1);F(this,sh,!1);F(this,Kg,null);F(this,uo,null);F(this,Ca,null);F(this,nh,null);F(this,wa,!1);F(this,go,null);F(this,Ev,new GL);F(this,ba,!1);F(this,qg,!1);F(this,ya,null);F(this,Bl,null);F(this,Yg,null);F(this,Xg,null);F(this,Ei,qe.NONE);F(this,Ft,new Set);F(this,sr,null);F(this,Vl,null);F(this,Qg,null);F(this,Jg,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});F(this,Sa,[0,0]);F(this,fo,null);F(this,nr,null);F(this,Zg,null);F(this,rn,null);const u=this._signal=g(this,Zd).signal;x(this,nr,t),x(this,Zg,i),x(this,eh,s),this._eventBus=n,n._on("editingaction",this.onEditingAction.bind(this),{signal:u}),n._on("pagechanging",this.onPageChanging.bind(this),{signal:u}),n._on("scalechanging",this.onScaleChanging.bind(this),{signal:u}),n._on("rotationchanging",this.onRotationChanging.bind(this),{signal:u}),n._on("setpreference",this.onSetPreference.bind(this),{signal:u}),n._on("switchannotationeditorparams",f=>this.updateParams(f.type,f.value),{signal:u}),E(this,we,HA).call(this),E(this,we,zA).call(this),E(this,we,Qw).call(this),x(this,ir,o.annotationStorage),x(this,Kg,o.filterFactory),x(this,Vl,r),x(this,nh,a||null),x(this,Ug,l),x(this,jg,c),x(this,sh,d),x(this,Xg,h||null),this.viewParameters={realScale:Qa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=Md.prototype,i=r=>g(r,nr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&r.hasSomethingToControl(),s=(r,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},n=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return ut(this,"_keyboardManager",new hp([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(r,{target:a})=>!(a instanceof HTMLButtonElement)&&g(r,nr).contains(a)&&!r.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(r,{target:a})=>!(a instanceof HTMLButtonElement)&&g(r,nr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:i}]]))}destroy(){var t,i,s,n;(t=g(this,rn))==null||t.resolve(),x(this,rn,null),(i=g(this,Zd))==null||i.abort(),x(this,Zd,null),this._signal=null;for(const o of g(this,Oi).values())o.destroy();g(this,Oi).clear(),g(this,pi).clear(),g(this,Gl).clear(),x(this,ks,null),g(this,Ft).clear(),g(this,Fn).destroy(),(s=g(this,eh))==null||s.destroy(),(n=g(this,go))==null||n.hide(),x(this,go,null),g(this,uo)&&(clearTimeout(g(this,uo)),x(this,uo,null)),g(this,fo)&&(clearTimeout(g(this,fo)),x(this,fo,null))}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return g(this,Xg)}get useNewAltTextFlow(){return g(this,jg)}get useNewAltTextWhenAddingImage(){return g(this,sh)}get hcmFilter(){return ut(this,"hcmFilter",g(this,Vl)?g(this,Kg).addHCMFilter(g(this,Vl).foreground,g(this,Vl).background):"none")}get direction(){return ut(this,"direction",getComputedStyle(g(this,nr)).direction)}get highlightColors(){return ut(this,"highlightColors",g(this,nh)?new Map(g(this,nh).split(",").map(t=>t.split("=").map(i=>i.trim()))):null)}get highlightColorNames(){return ut(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){x(this,Yg,t)}editAltText(t,i=!1){var s;(s=g(this,eh))==null||s.editAltText(this,t,i)}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){switch(t){case"enableNewAltTextWhenAddingImage":x(this,sh,i);break}}onPageChanging({pageNumber:t}){x(this,ih,t-1)}focusMainContainer(){g(this,nr).focus()}findParent(t,i){for(const s of g(this,Oi).values()){const{x:n,y:o,width:r,height:a}=s.div.getBoundingClientRect();if(t>=n&&t<=n+r&&i>=o&&i<=o+a)return s}return null}disableUserSelect(t=!1){g(this,Zg).classList.toggle("noUserSelect",t)}addShouldRescale(t){g(this,Gl).add(t)}removeShouldRescale(t){g(this,Gl).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Qa.PDF_TO_CSS_UNITS;for(const i of g(this,Gl))i.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:s,anchorOffset:n,focusNode:o,focusOffset:r}=i,a=i.toString(),c=E(this,we,Zp).call(this,i).closest(".textLayer"),d=this.getSelectionBoxes(c);if(!d)return;i.empty();const h=E(this,we,Xw).call(this,c),u=g(this,Ei)===qe.NONE,f=()=>{h==null||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:s,anchorOffset:n,focusNode:o,focusOffset:r,text:a}),u&&this.showAllEditors("highlight",!0,!0)};if(u){this.switchToMode(qe.HIGHLIGHT,f);return}f()}addToAnnotationStorage(t){!t.isEmpty()&&g(this,ir)&&!g(this,ir).has(t.id)&&g(this,ir).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,g(this,wa)&&(x(this,wa,!1),E(this,we,em).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of g(this,Ft))if(i.div.contains(t)){x(this,Bl,[i,t]),i._focusEventsAllowed=!1;break}}focus(){if(!g(this,Bl))return;const[t,i]=g(this,Bl);x(this,Bl,null),i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}addEditListeners(){E(this,we,Qw).call(this),E(this,we,Jw).call(this)}removeEditListeners(){E(this,we,VA).call(this),E(this,we,Zw).call(this)}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const s of g(this,Pn))if(s.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const s of g(this,Pn))if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=g(this,ks))==null||s.commitOrRemove(),!this.hasSelection)return;const i=[];for(const n of g(this,Ft)){const o=n.serialize(!0);o&&i.push(o)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const o of i.items)for(const r of g(this,Pn))if(r.isHandlingMimeForPasting(o.type)){r.paste(o,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){Ze(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const n=this.currentLayer;try{const o=[];for(const l of s){const c=await n.deserialize(l);if(!c)return;o.push(c)}const r=()=>{for(const l of o)E(this,we,eb).call(this,l);E(this,we,tb).call(this,o)},a=()=>{for(const l of o)l.remove()};this.addCommands({cmd:r,undo:a,mustExec:!0})}catch(o){Ze(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),g(this,Ei)!==qe.NONE&&!this.isEditorHandlingKeyboard&&Md._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,g(this,wa)&&(x(this,wa,!1),E(this,we,em).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(E(this,we,GA).call(this),E(this,we,Jw).call(this),E(this,we,rs).call(this,{isEditing:g(this,Ei)!==qe.NONE,isEmpty:E(this,we,Lu).call(this),hasSomethingToUndo:g(this,Fn).hasSomethingToUndo(),hasSomethingToRedo:g(this,Fn).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,we,BA).call(this),E(this,we,Zw).call(this),E(this,we,rs).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!g(this,Pn)){x(this,Pn,t);for(const i of g(this,Pn))E(this,we,na).call(this,i.defaultPropertiesToUpdate)}}getId(){return g(this,Ev).id}get currentLayer(){return g(this,Oi).get(g(this,ih))}getLayer(t){return g(this,Oi).get(t)}get currentPageIndex(){return g(this,ih)}addLayer(t){g(this,Oi).set(t.pageIndex,t),g(this,ba)?t.enable():t.disable()}removeLayer(t){g(this,Oi).delete(t.pageIndex)}async updateMode(t,i=null,s=!1){if(g(this,Ei)!==t&&!(g(this,rn)&&(await g(this,rn).promise,!g(this,rn)))){if(x(this,rn,Promise.withResolvers()),x(this,Ei,t),t===qe.NONE){this.setEditingState(!1),E(this,we,$A).call(this),g(this,rn).resolve();return}this.setEditingState(!0),await E(this,we,WA).call(this),this.unselectAll();for(const n of g(this,Oi).values())n.updateMode(t);if(!i){s&&this.addNewEditorFromKeyboard(),g(this,rn).resolve();return}for(const n of g(this,pi).values())n.annotationElementId===i?(this.setSelected(n),n.enterInEditMode()):n.unselect();g(this,rn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==g(this,Ei)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,i){var s;if(g(this,Pn)){switch(t){case ze.CREATE:this.currentLayer.addNewEditor();return;case ze.HIGHLIGHT_DEFAULT_COLOR:(s=g(this,Yg))==null||s.updateColor(i);break;case ze.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(g(this,Qg)||x(this,Qg,new Map)).set(t,i),this.showAllEditors("highlight",i);break}for(const n of g(this,Ft))n.updateParams(t,i);for(const n of g(this,Pn))n.updateDefaultParams(t,i)}}showAllEditors(t,i,s=!1){var o;for(const r of g(this,pi).values())r.editorType===t&&r.show(i);(((o=g(this,Qg))==null?void 0:o.get(ze.HIGHLIGHT_SHOW_ALL))??!0)!==i&&E(this,we,na).call(this,[[ze.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(g(this,qg)!==t){x(this,qg,t);for(const i of g(this,Oi).values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}getEditors(t){const i=[];for(const s of g(this,pi).values())s.pageIndex===t&&i.push(s);return i}getEditor(t){return g(this,pi).get(t)}addEditor(t){g(this,pi).set(t.id,t)}removeEditor(t){var i;t.div.contains(document.activeElement)&&(g(this,uo)&&clearTimeout(g(this,uo)),x(this,uo,setTimeout(()=>{this.focusMainContainer(),x(this,uo,null)},0))),g(this,pi).delete(t.id),this.unselect(t),(!t.annotationElementId||!g(this,Hl).has(t.annotationElementId))&&((i=g(this,ir))==null||i.remove(t.id))}addDeletedAnnotationElement(t){g(this,Hl).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return g(this,Hl).has(t)}removeDeletedAnnotationElement(t){g(this,Hl).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){g(this,ks)!==t&&(x(this,ks,t),t&&E(this,we,na).call(this,t.propertiesToUpdate))}updateUI(t){g(this,we,UA)===t&&E(this,we,na).call(this,t.propertiesToUpdate)}toggleSelected(t){if(g(this,Ft).has(t)){g(this,Ft).delete(t),t.unselect(),E(this,we,rs).call(this,{hasSelectedEditor:this.hasSelection});return}g(this,Ft).add(t),t.select(),E(this,we,na).call(this,t.propertiesToUpdate),E(this,we,rs).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const i of g(this,Ft))i!==t&&i.unselect();g(this,Ft).clear(),g(this,Ft).add(t),t.select(),E(this,we,na).call(this,t.propertiesToUpdate),E(this,we,rs).call(this,{hasSelectedEditor:!0})}isSelected(t){return g(this,Ft).has(t)}get firstSelectedEditor(){return g(this,Ft).values().next().value}unselect(t){t.unselect(),g(this,Ft).delete(t),E(this,we,rs).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return g(this,Ft).size!==0}get isEnterHandled(){return g(this,Ft).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){g(this,Fn).undo(),E(this,we,rs).call(this,{hasSomethingToUndo:g(this,Fn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,we,Lu).call(this)})}redo(){g(this,Fn).redo(),E(this,we,rs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:g(this,Fn).hasSomethingToRedo(),isEmpty:E(this,we,Lu).call(this)})}addCommands(t){g(this,Fn).add(t),E(this,we,rs).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,we,Lu).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...g(this,Ft)],i=()=>{for(const n of t)n.remove()},s=()=>{for(const n of t)E(this,we,eb).call(this,n)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=g(this,ks))==null||t.commitOrRemove()}hasSomethingToControl(){return g(this,ks)||this.hasSelection}selectAll(){for(const t of g(this,Ft))t.commit();E(this,we,tb).call(this,g(this,pi).values())}unselectAll(){if(!(g(this,ks)&&(g(this,ks).commitOrRemove(),g(this,Ei)!==qe.NONE))&&this.hasSelection){for(const t of g(this,Ft))t.unselect();g(this,Ft).clear(),E(this,we,rs).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;g(this,Sa)[0]+=t,g(this,Sa)[1]+=i;const[n,o]=g(this,Sa),r=[...g(this,Ft)],a=1e3;g(this,fo)&&clearTimeout(g(this,fo)),x(this,fo,setTimeout(()=>{x(this,fo,null),g(this,Sa)[0]=g(this,Sa)[1]=0,this.addCommands({cmd:()=>{for(const l of r)g(this,pi).has(l.id)&&l.translateInPage(n,o)},undo:()=>{for(const l of r)g(this,pi).has(l.id)&&l.translateInPage(-n,-o)},mustExec:!1})},a));for(const l of r)l.translateInPage(t,i)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,ho,new Map);for(const t of g(this,Ft))g(this,ho).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!g(this,ho))return!1;this.disableUserSelect(!1);const t=g(this,ho);x(this,ho,null);let i=!1;for(const[{x:n,y:o,pageIndex:r},a]of t)a.newX=n,a.newY=o,a.newPageIndex=r,i||(i=n!==a.savedX||o!==a.savedY||r!==a.savedPageIndex);if(!i)return!1;const s=(n,o,r,a)=>{if(g(this,pi).has(n.id)){const l=g(this,Oi).get(a);l?n._setParentAndPosition(l,o,r):(n.pageIndex=a,n.x=o,n.y=r)}};return this.addCommands({cmd:()=>{for(const[n,{newX:o,newY:r,newPageIndex:a}]of t)s(n,o,r,a)},undo:()=>{for(const[n,{savedX:o,savedY:r,savedPageIndex:a}]of t)s(n,o,r,a)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(g(this,ho))for(const s of g(this,ho).keys())s.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||g(this,Ft).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return g(this,ks)===t}getActive(){return g(this,ks)}getMode(){return g(this,Ei)}get imageManager(){return ut(this,"imageManager",new qw)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let c=0,d=i.rangeCount;c<d;c++)if(!t.contains(i.getRangeAt(c).commonAncestorContainer))return null;const{x:s,y:n,width:o,height:r}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(c,d,h,u)=>({x:(d-n)/r,y:1-(c+h-s)/o,width:u/r,height:h/o});break;case"180":a=(c,d,h,u)=>({x:1-(c+h-s)/o,y:1-(d+u-n)/r,width:h/o,height:u/r});break;case"270":a=(c,d,h,u)=>({x:1-(d+u-n)/r,y:(c-s)/o,width:u/r,height:h/o});break;default:a=(c,d,h,u)=>({x:(c-s)/o,y:(d-n)/r,width:h/o,height:u/r});break}const l=[];for(let c=0,d=i.rangeCount;c<d;c++){const h=i.getRangeAt(c);if(!h.collapsed)for(const{x:u,y:f,width:p,height:m}of h.getClientRects())p===0||m===0||l.push(a(u,f,p,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:i}){(g(this,th)||x(this,th,new Map)).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){var i;(i=g(this,th))==null||i.delete(t)}renderAnnotationElement(t){var n;const i=(n=g(this,th))==null?void 0:n.get(t.data.id);if(!i)return;const s=g(this,ir).getRawValue(i);s&&(g(this,Ei)===qe.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}};Zd=new WeakMap,ks=new WeakMap,pi=new WeakMap,Oi=new WeakMap,eh=new WeakMap,ir=new WeakMap,th=new WeakMap,Fn=new WeakMap,va=new WeakMap,ih=new WeakMap,Hl=new WeakMap,ho=new WeakMap,Pn=new WeakMap,Gl=new WeakMap,Ug=new WeakMap,jg=new WeakMap,sh=new WeakMap,Kg=new WeakMap,uo=new WeakMap,Ca=new WeakMap,nh=new WeakMap,wa=new WeakMap,go=new WeakMap,Ev=new WeakMap,ba=new WeakMap,qg=new WeakMap,ya=new WeakMap,Bl=new WeakMap,Yg=new WeakMap,Xg=new WeakMap,Ei=new WeakMap,Ft=new WeakMap,sr=new WeakMap,Vl=new WeakMap,Qg=new WeakMap,Jg=new WeakMap,Sa=new WeakMap,fo=new WeakMap,nr=new WeakMap,Zg=new WeakMap,rn=new WeakMap,we=new WeakSet,Zp=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Xw=function(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const s of g(this,Oi).values())if(s.hasTextLayer(t))return s;return null},OA=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=E(this,we,Zp).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(s);n&&(g(this,go)||x(this,go,new NL(this)),g(this,go).show(s,n,this.direction==="ltr"))},NA=function(){var o,r,a;const t=document.getSelection();if(!t||t.isCollapsed){g(this,sr)&&((o=g(this,go))==null||o.hide(),x(this,sr,null),E(this,we,rs).call(this,{hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===g(this,sr))return;const n=E(this,we,Zp).call(this,t).closest(".textLayer");if(!n){g(this,sr)&&((r=g(this,go))==null||r.hide(),x(this,sr,null),E(this,we,rs).call(this,{hasSelectedText:!1}));return}if((a=g(this,go))==null||a.hide(),x(this,sr,i),E(this,we,rs).call(this,{hasSelectedText:!0}),!(g(this,Ei)!==qe.HIGHLIGHT&&g(this,Ei)!==qe.NONE)&&(g(this,Ei)===qe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,wa,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=g(this,Ei)===qe.HIGHLIGHT?E(this,we,Xw).call(this,n):null;l==null||l.toggleDrawing();const c=new AbortController,d=this.combinedSignal(c),h=u=>{u.type==="pointerup"&&u.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),u.type==="pointerup"&&E(this,we,em).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}},em=function(t=""){g(this,Ei)===qe.HIGHLIGHT?this.highlightSelection(t):g(this,Ug)&&E(this,we,OA).call(this)},HA=function(){document.addEventListener("selectionchange",E(this,we,NA).bind(this),{signal:this._signal})},GA=function(){if(g(this,Ca))return;x(this,Ca,new AbortController);const t=this.combinedSignal(g(this,Ca));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},BA=function(){var t;(t=g(this,Ca))==null||t.abort(),x(this,Ca,null)},Qw=function(){if(g(this,ya))return;x(this,ya,new AbortController);const t=this.combinedSignal(g(this,ya));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},VA=function(){var t;(t=g(this,ya))==null||t.abort(),x(this,ya,null)},Jw=function(){if(g(this,va))return;x(this,va,new AbortController);const t=this.combinedSignal(g(this,va));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Zw=function(){var t;(t=g(this,va))==null||t.abort(),x(this,va,null)},zA=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},rs=function(t){Object.entries(t).some(([s,n])=>g(this,Jg)[s]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(g(this,Jg),t)}),g(this,Ei)===qe.HIGHLIGHT&&t.hasSelectedEditor===!1&&E(this,we,na).call(this,[[ze.HIGHLIGHT_FREE,!0]]))},na=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},WA=async function(){if(!g(this,ba)){x(this,ba,!0);const t=[];for(const i of g(this,Oi).values())t.push(i.enable());await Promise.all(t);for(const i of g(this,pi).values())i.enable()}},$A=function(){if(this.unselectAll(),g(this,ba)){x(this,ba,!1);for(const t of g(this,Oi).values())t.disable();for(const t of g(this,pi).values())t.disable()}},eb=function(t){const i=g(this,Oi).get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},UA=function(){let t=null;for(t of g(this,Ft));return t},Lu=function(){if(g(this,pi).size===0)return!0;if(g(this,pi).size===1)for(const t of g(this,pi).values())return t.isEmpty();return!1},tb=function(t){for(const i of g(this,Ft))i.unselect();g(this,Ft).clear();for(const i of t)i.isEmpty()||(g(this,Ft).add(i),i.select());E(this,we,rs).call(this,{hasSelectedEditor:this.hasSelection})},Ne(Md,"TRANSLATE_SMALL",1),Ne(Md,"TRANSLATE_BIG",10);let $c=Md;var Ai,po,Tn,oh,mo,_s,rh,vo,ys,or,zl,Co,xa,Kn,Ou,tm;const as=class as{constructor(t){F(this,Kn);F(this,Ai,null);F(this,po,!1);F(this,Tn,null);F(this,oh,null);F(this,mo,null);F(this,_s,null);F(this,rh,!1);F(this,vo,null);F(this,ys,null);F(this,or,null);F(this,zl,null);F(this,Co,!1);x(this,ys,t),x(this,Co,t._uiManager.useNewAltTextFlow),g(as,xa)||x(as,xa,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){as._l10n??(as._l10n=t)}async render(){const t=x(this,Tn,document.createElement("button"));t.className="altText",t.tabIndex="0";const i=x(this,oh,document.createElement("span"));t.append(i),g(this,Co)?(t.classList.add("new"),t.setAttribute("data-l10n-id",g(as,xa).missing),i.setAttribute("data-l10n-id",g(as,xa)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=g(this,ys)._uiManager._signal;t.addEventListener("contextmenu",vn,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const n=o=>{o.preventDefault(),g(this,ys)._uiManager.editAltText(g(this,ys)),g(this,Co)&&g(this,ys)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:g(this,Kn,Ou)}})};return t.addEventListener("click",n,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(x(this,rh,!0),n(o))},{signal:s}),await E(this,Kn,tm).call(this),t}finish(){g(this,Tn)&&(g(this,Tn).focus({focusVisible:g(this,rh)}),x(this,rh,!1))}isEmpty(){return g(this,Co)?g(this,Ai)===null:!g(this,Ai)&&!g(this,po)}hasData(){return g(this,Co)?g(this,Ai)!==null||!!g(this,or):this.isEmpty()}get guessedText(){return g(this,or)}async setGuessedText(t){g(this,Ai)===null&&(x(this,or,t),x(this,zl,await as._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),E(this,Kn,tm).call(this))}toggleAltTextBadge(t=!1){var i;if(!g(this,Co)||g(this,Ai)){(i=g(this,vo))==null||i.remove(),x(this,vo,null);return}if(!g(this,vo)){const s=x(this,vo,document.createElement("div"));s.className="noAltTextBadge",g(this,ys).div.append(s)}g(this,vo).classList.toggle("hidden",!t)}serialize(t){let i=g(this,Ai);return!t&&g(this,or)===i&&(i=g(this,zl)),{altText:i,decorative:g(this,po),guessedText:g(this,or),textWithDisclaimer:g(this,zl)}}get data(){return{altText:g(this,Ai),decorative:g(this,po)}}set data({altText:t,decorative:i,guessedText:s,textWithDisclaimer:n,cancel:o=!1}){s&&(x(this,or,s),x(this,zl,n)),!(g(this,Ai)===t&&g(this,po)===i)&&(o||(x(this,Ai,t),x(this,po,i)),E(this,Kn,tm).call(this))}toggle(t=!1){g(this,Tn)&&(!t&&g(this,_s)&&(clearTimeout(g(this,_s)),x(this,_s,null)),g(this,Tn).disabled=!t)}shown(){g(this,ys)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:g(this,Kn,Ou)}})}destroy(){var t,i;(t=g(this,Tn))==null||t.remove(),x(this,Tn,null),x(this,oh,null),x(this,mo,null),(i=g(this,vo))==null||i.remove(),x(this,vo,null)}};Ai=new WeakMap,po=new WeakMap,Tn=new WeakMap,oh=new WeakMap,mo=new WeakMap,_s=new WeakMap,rh=new WeakMap,vo=new WeakMap,ys=new WeakMap,or=new WeakMap,zl=new WeakMap,Co=new WeakMap,xa=new WeakMap,Kn=new WeakSet,Ou=function(){return g(this,Ai)&&"added"||g(this,Ai)===null&&this.guessedText&&"review"||"missing"},tm=async function(){var n,o,r;const t=g(this,Tn);if(!t)return;if(g(this,Co)){if(t.classList.toggle("done",!!g(this,Ai)),t.setAttribute("data-l10n-id",g(as,xa)[g(this,Kn,Ou)]),(n=g(this,oh))==null||n.setAttribute("data-l10n-id",g(as,xa)[`${g(this,Kn,Ou)}-label`]),!g(this,Ai)){(o=g(this,mo))==null||o.remove();return}}else{if(!g(this,Ai)&&!g(this,po)){t.classList.remove("done"),(r=g(this,mo))==null||r.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=g(this,mo);if(!i){x(this,mo,i=document.createElement("span")),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${g(this,ys).id}`;const a=100,l=g(this,ys)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(g(this,_s)),x(this,_s,null)},{once:!0}),t.addEventListener("mouseenter",()=>{x(this,_s,setTimeout(()=>{x(this,_s,null),g(this,mo).classList.add("show"),g(this,ys)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),t.addEventListener("mouseleave",()=>{var c;g(this,_s)&&(clearTimeout(g(this,_s)),x(this,_s,null)),(c=g(this,mo))==null||c.classList.remove("show")},{signal:l})}g(this,po)?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=g(this,Ai)),i.parentNode||t.append(i);const s=g(this,ys).getImageForAltText();s==null||s.setAttribute("aria-describedby",i.id)},F(as,xa,null),Ne(as,"_l10n",null);let Um=as;var Wl,Dn,Kt,ah,$l,Ni,Ul,Ra,ef,jl,Ea,tf,Kl,rr,wo,lh,ch,an,sf,Av,Xe,ib,nf,sb,nb,jA,KA,ob,rb,ab,qA,lb,YA,XA,QA,cb,Nu;const Rt=class Rt{constructor(t){F(this,Xe);F(this,Wl,null);F(this,Dn,null);F(this,Kt,null);F(this,ah,!1);F(this,$l,!1);F(this,Ni,null);F(this,Ul,null);F(this,Ra,null);F(this,ef,"");F(this,jl,!1);F(this,Ea,null);F(this,tf,!1);F(this,Kl,!1);F(this,rr,!1);F(this,wo,null);F(this,lh,0);F(this,ch,0);F(this,an,null);Ne(this,"_editToolbar",null);Ne(this,"_initialOptions",Object.create(null));Ne(this,"_initialData",null);Ne(this,"_isVisible",!0);Ne(this,"_uiManager",null);Ne(this,"_focusEventsAllowed",!0);F(this,sf,!1);F(this,Av,Rt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:i,rawDims:{pageWidth:s,pageHeight:n,pageX:o,pageY:r}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,n],this.pageTranslation=[o,r];const[a,l]=this.parentDimensions;this.x=t.x/a,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Rt.prototype._resizeWithKeyboard,i=$c.TRANSLATE_SMALL,s=$c.TRANSLATE_BIG;return ut(this,"_resizerKeyboardManager",new hp([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],Rt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ut(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new VL({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(Rt._l10n??(Rt._l10n=t),Rt._l10nResizer||(Rt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Rt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Rt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){Nt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return g(this,sf)}set _isDraggable(t){var i;x(this,sf,t),(i=this.div)==null||i.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=g(this,Av)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):E(this,Xe,Nu).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(g(this,jl)?x(this,jl,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const i=t.relatedTarget;i!=null&&i.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,s,n){const[o,r]=this.parentDimensions;[s,n]=this.screenToPageTranslation(s,n),this.x=(t+s)/o,this.y=(i+n)/r,this.fixAndSetPosition()}translate(t,i){E(this,Xe,ib).call(this,this.parentDimensions,t,i)}translateInPage(t,i){g(this,Ea)||x(this,Ea,[this.x,this.y]),E(this,Xe,ib).call(this,this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}drag(t,i){g(this,Ea)||x(this,Ea,[this.x,this.y]);const[s,n]=this.parentDimensions;if(this.x+=t/s,this.y+=i/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:r}=this;const[a,l]=this.getBaseTranslation();o+=a,r+=l,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*r).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!g(this,Ea)&&(g(this,Ea)[0]!==this.x||g(this,Ea)[1]!==this.y)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:s}=Rt,n=s/t,o=s/i;switch(this.rotation){case 90:return[-n,o];case 180:return[n,o];case 270:return[n,-o];default:return[-n,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[i,s]=this.pageDimensions;let{x:n,y:o,width:r,height:a}=this;if(r*=i,a*=s,n*=i,o*=s,this._mustFixPosition)switch(t){case 0:n=Math.max(0,Math.min(i-r,n)),o=Math.max(0,Math.min(s-a,o));break;case 90:n=Math.max(0,Math.min(i-a,n)),o=Math.min(s,Math.max(r,o));break;case 180:n=Math.min(i,Math.max(r,n)),o=Math.min(s,Math.max(a,o));break;case 270:n=Math.min(i,Math.max(a,n)),o=Math.max(0,Math.min(s-r,o));break}this.x=n/=i,this.y=o/=s;const[l,c]=this.getBaseTranslation();n+=l,o+=c;const{style:d}=this.div;d.left=`${(100*n).toFixed(2)}%`,d.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,i){var s;return E(s=Rt,nf,sb).call(s,t,i,this.parentRotation)}pageTranslationToScreen(t,i){var s;return E(s=Rt,nf,sb).call(s,t,i,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,s]}=this;return[i*t,s*t]}setDims(t,i){const[s,n]=this.parentDimensions;this.div.style.width=`${(100*t/s).toFixed(2)}%`,g(this,$l)||(this.div.style.height=`${(100*i/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:i,width:s}=t,n=s.endsWith("%"),o=!g(this,$l)&&i.endsWith("%");if(n&&o)return;const[r,a]=this.parentDimensions;n||(t.width=`${(100*parseFloat(s)/r).toFixed(2)}%`),!g(this,$l)&&!o&&(t.height=`${(100*parseFloat(i)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=g(this,Kt))==null||t.finish()}async addEditToolbar(){return this._editToolbar||g(this,Kl)?this._editToolbar:(this._editToolbar=new jw(this),this.div.append(this._editToolbar.render()),g(this,Kt)&&await this._editToolbar.addAltText(g(this,Kt)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=g(this,Kt))==null||t.destroy())}addContainer(t){var s;const i=(s=this._editToolbar)==null?void 0:s.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){g(this,Kt)||(Um.initialize(Rt._l10n),x(this,Kt,new Um(this)),g(this,Wl)&&(g(this,Kt).data=g(this,Wl),x(this,Wl,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=g(this,Kt))==null?void 0:t.data}set altTextData(t){g(this,Kt)&&(g(this,Kt).data=t)}get guessedAltText(){var t;return(t=g(this,Kt))==null?void 0:t.guessedText}async setGuessedAltText(t){var i;await((i=g(this,Kt))==null?void 0:i.setGuessedText(t))}serializeAltText(t){var i;return(i=g(this,Kt))==null?void 0:i.serialize(t)}hasAltText(){return!!g(this,Kt)&&!g(this,Kt).isEmpty()}hasAltTextData(){var t;return((t=g(this,Kt))==null?void 0:t.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=g(this,ah)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),E(this,Xe,lb).call(this);const[t,i]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*i/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/i).toFixed(2)}%`);const[s,n]=this.getInitialTranslation();return this.translate(s,n),$m(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:i}=gs.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(x(this,jl,!0),this._isDraggable){E(this,Xe,qA).call(this,t);return}E(this,Xe,ab).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){g(this,wo)&&clearTimeout(g(this,wo)),x(this,wo,setTimeout(()=>{var t;x(this,wo,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,i,s){t.changeParent(this),this.x=i,this.y=s,this.fixAndSetPosition()}getRect(t,i,s=this.rotation){const n=this.parentScale,[o,r]=this.pageDimensions,[a,l]=this.pageTranslation,c=t/n,d=i/n,h=this.x*o,u=this.y*r,f=this.width*o,p=this.height*r;switch(s){case 0:return[h+c+a,r-u-d-p+l,h+c+f+a,r-u-d+l];case 90:return[h+d+a,r-u+c+l,h+d+p+a,r-u+c+f+l];case 180:return[h-c-f+a,r-u+d+l,h-c+a,r-u+d+p+l];case 270:return[h-d-p+a,r-u-c-f+l,h-d+a,r-u-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[s,n,o,r]=t,a=o-s,l=r-n;switch(this.rotation){case 0:return[s,i-r,a,l];case 90:return[s,i-n,l,a];case 180:return[o,i-n,a,l];case 270:return[o,i-r,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){x(this,Kl,!0)}disableEditMode(){x(this,Kl,!1)}isInEditMode(){return g(this,Kl)}shouldGetKeyboardEvents(){return g(this,rr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){E(this,Xe,lb).call(this)}rotate(t){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,i=null){Nt("An editor must be serializable")}static async deserialize(t,i,s){const n=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:s});n.rotation=t.rotation,x(n,Wl,t.accessibilityData);const[o,r]=n.pageDimensions,[a,l,c,d]=n.getRectInCurrentCoords(t.rect,r);return n.x=a/o,n.y=l/r,n.width=c/o,n.height=d/r,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t;if((t=g(this,Ra))==null||t.abort(),x(this,Ra,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),g(this,wo)&&(clearTimeout(g(this,wo)),x(this,wo,null)),E(this,Xe,Nu).call(this),this.removeEditToolbar(),g(this,an)){for(const i of g(this,an).values())clearTimeout(i);x(this,an,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,Xe,jA).call(this),g(this,Ni).classList.remove("hidden"),$m(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),x(this,Ul,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const i=g(this,Ni).children;if(!g(this,Dn)){x(this,Dn,Array.from(i));const r=E(this,Xe,YA).bind(this),a=E(this,Xe,XA).bind(this),l=this._uiManager._signal;for(const c of g(this,Dn)){const d=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",r,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",E(this,Xe,QA).bind(this,d),{signal:l}),c.setAttribute("data-l10n-id",Rt._l10nResizer[d])}}const s=g(this,Dn)[0];let n=0;for(const r of i){if(r===s)break;n++}const o=(360-this.rotation+this.parentRotation)%360/90*(g(this,Dn).length/4);if(o!==n){if(o<n)for(let a=0;a<n-o;a++)g(this,Ni).append(g(this,Ni).firstChild);else if(o>n)for(let a=0;a<o-n;a++)g(this,Ni).firstChild.before(g(this,Ni).lastChild);let r=0;for(const a of i){const c=g(this,Dn)[r++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",Rt._l10nResizer[c])}}E(this,Xe,cb).call(this,0),x(this,rr,!0),g(this,Ni).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,i){g(this,rr)&&E(this,Xe,rb).call(this,g(this,ef),{movementX:t,movementY:i})}_stopResizingWithKeyboard(){E(this,Xe,Nu).call(this),this.div.focus()}select(){var t,i,s;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var n,o;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(i=this._editToolbar)==null||i.show(),(s=g(this,Kt))==null||s.toggleAltTextBadge(!1)}unselect(){var t,i,s,n,o;(t=g(this,Ni))==null||t.classList.add("hidden"),(i=this.div)==null||i.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(n=this._editToolbar)==null||n.hide(),(o=g(this,Kt))==null||o.toggleAltTextBadge(!0)}updateParams(t,i){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return g(this,tf)}set isEditing(t){x(this,tf,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,i){x(this,$l,!0);const s=t/i,{style:n}=this.div;n.aspectRatio=s,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){g(this,an)||x(this,an,new Map);const{action:s}=t;let n=g(this,an).get(s);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),g(this,an).delete(s),g(this,an).size===0&&x(this,an,null)},Rt._telemetryTimeout),g(this,an).set(s,n);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),x(this,ah,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,ah,!0)}renderAnnotationElement(t){let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const s=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),s.before(i)}return i}resetAnnotationElement(t){const{firstChild:i}=t.container;(i==null?void 0:i.nodeName)==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}};Wl=new WeakMap,Dn=new WeakMap,Kt=new WeakMap,ah=new WeakMap,$l=new WeakMap,Ni=new WeakMap,Ul=new WeakMap,Ra=new WeakMap,ef=new WeakMap,jl=new WeakMap,Ea=new WeakMap,tf=new WeakMap,Kl=new WeakMap,rr=new WeakMap,wo=new WeakMap,lh=new WeakMap,ch=new WeakMap,an=new WeakMap,sf=new WeakMap,Av=new WeakMap,Xe=new WeakSet,ib=function([t,i],s,n){[s,n]=this.screenToPageTranslation(s,n),this.x+=s/t,this.y+=n/i,this.fixAndSetPosition()},nf=new WeakSet,sb=function(t,i,s){switch(s){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}},nb=function(t){switch(t){case 90:{const[i,s]=this.pageDimensions;return[0,-i/s,s/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,s]=this.pageDimensions;return[0,i/s,-s/i,0]}default:return[1,0,0,1]}},jA=function(){if(g(this,Ni))return;x(this,Ni,document.createElement("div")),g(this,Ni).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const s of t){const n=document.createElement("div");g(this,Ni).append(n),n.classList.add("resizer",s),n.setAttribute("data-resizer-name",s),n.addEventListener("pointerdown",E(this,Xe,KA).bind(this,s),{signal:i}),n.addEventListener("contextmenu",vn,{signal:i}),n.tabIndex=-1}this.div.prepend(g(this,Ni))},KA=function(t,i){var p;i.preventDefault();const{isMac:s}=gs.platform;if(i.button!==0||i.ctrlKey&&s)return;(p=g(this,Kt))==null||p.toggle(!1);const n=this._isDraggable;this._isDraggable=!1;const o=new AbortController,r=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,Xe,rb).bind(this,t),{passive:!0,capture:!0,signal:r}),window.addEventListener("contextmenu",vn,{signal:r});const a=this.x,l=this.y,c=this.width,d=this.height,h=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const f=()=>{var m;o.abort(),this.parent.togglePointerEvents(!0),(m=g(this,Kt))==null||m.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=h,this.div.style.cursor=u,E(this,Xe,ob).call(this,a,l,c,d)};window.addEventListener("pointerup",f,{signal:r}),window.addEventListener("blur",f,{signal:r})},ob=function(t,i,s,n){const o=this.x,r=this.y,a=this.width,l=this.height;o===t&&r===i&&a===s&&l===n||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=o,this.y=r;const[c,d]=this.parentDimensions;this.setDims(c*a,d*l),this.fixAndSetPosition()},undo:()=>{this.width=s,this.height=n,this.x=t,this.y=i;const[c,d]=this.parentDimensions;this.setDims(c*s,d*n),this.fixAndSetPosition()},mustExec:!0})},rb=function(t,i){const[s,n]=this.parentDimensions,o=this.x,r=this.y,a=this.width,l=this.height,c=Rt.MIN_SIZE/s,d=Rt.MIN_SIZE/n,h=ee=>Math.round(ee*1e4)/1e4,u=E(this,Xe,nb).call(this,this.rotation),f=(ee,Y)=>[u[0]*ee+u[2]*Y,u[1]*ee+u[3]*Y],p=E(this,Xe,nb).call(this,360-this.rotation),m=(ee,Y)=>[p[0]*ee+p[2]*Y,p[1]*ee+p[3]*Y];let v,C,w=!1,S=!1;switch(t){case"topLeft":w=!0,v=(ee,Y)=>[0,0],C=(ee,Y)=>[ee,Y];break;case"topMiddle":v=(ee,Y)=>[ee/2,0],C=(ee,Y)=>[ee/2,Y];break;case"topRight":w=!0,v=(ee,Y)=>[ee,0],C=(ee,Y)=>[0,Y];break;case"middleRight":S=!0,v=(ee,Y)=>[ee,Y/2],C=(ee,Y)=>[0,Y/2];break;case"bottomRight":w=!0,v=(ee,Y)=>[ee,Y],C=(ee,Y)=>[0,0];break;case"bottomMiddle":v=(ee,Y)=>[ee/2,Y],C=(ee,Y)=>[ee/2,0];break;case"bottomLeft":w=!0,v=(ee,Y)=>[0,Y],C=(ee,Y)=>[ee,0];break;case"middleLeft":S=!0,v=(ee,Y)=>[0,Y/2],C=(ee,Y)=>[ee,Y/2];break}const y=v(a,l),R=C(a,l);let A=f(...R);const P=h(o+A[0]),T=h(r+A[1]);let M=1,N=1,[_,L]=this.screenToPageTranslation(i.movementX,i.movementY);if([_,L]=m(_/s,L/n),w){const ee=Math.hypot(a,l);M=N=Math.max(Math.min(Math.hypot(R[0]-y[0]-_,R[1]-y[1]-L)/ee,1/a,1/l),c/a,d/l)}else S?M=Math.max(c,Math.min(1,Math.abs(R[0]-y[0]-_)))/a:N=Math.max(d,Math.min(1,Math.abs(R[1]-y[1]-L)))/l;const z=h(a*M),q=h(l*N);A=f(...C(z,q));const B=P-A[0],Z=T-A[1];this.width=z,this.height=q,this.x=B,this.y=Z,this.setDims(s*z,n*q),this.fixAndSetPosition()},ab=function(t){const{isMac:i}=gs.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)},qA=function(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();const s=new AbortController,n=this._uiManager.combinedSignal(s);if(i){this.div.classList.add("moving"),x(this,lh,t.clientX),x(this,ch,t.clientY);const r=a=>{const{clientX:l,clientY:c}=a,[d,h]=this.screenToPageTranslation(l-g(this,lh),c-g(this,ch));x(this,lh,l),x(this,ch,c),this._uiManager.dragSelectedEditors(d,h)};window.addEventListener("pointermove",r,{passive:!0,capture:!0,signal:n})}const o=()=>{s.abort(),i&&this.div.classList.remove("moving"),x(this,jl,!1),this._uiManager.endDragSession()||E(this,Xe,ab).call(this,t)};window.addEventListener("pointerup",o,{signal:n}),window.addEventListener("blur",o,{signal:n})},lb=function(){if(g(this,Ra)||!this.div)return;x(this,Ra,new AbortController);const t=this._uiManager.combinedSignal(g(this,Ra));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},YA=function(t){Rt._resizerKeyboardManager.exec(this,t)},XA=function(t){var i;g(this,rr)&&((i=t.relatedTarget)==null?void 0:i.parentNode)!==g(this,Ni)&&E(this,Xe,Nu).call(this)},QA=function(t){x(this,ef,g(this,rr)?t:"")},cb=function(t){if(g(this,Dn))for(const i of g(this,Dn))i.tabIndex=t},Nu=function(){if(x(this,rr,!1),E(this,Xe,cb).call(this,-1),g(this,Ul)){const{savedX:t,savedY:i,savedWidth:s,savedHeight:n}=g(this,Ul);E(this,Xe,ob).call(this,t,i,s,n),x(this,Ul,null)}},F(Rt,nf),Ne(Rt,"_l10n",null),Ne(Rt,"_l10nResizer",null),Ne(Rt,"_borderLineWidth",-1),Ne(Rt,"_colorManager",new Yw),Ne(Rt,"_zIndex",1),Ne(Rt,"_telemetryTimeout",1e3);let Tt=Rt;class VL extends Tt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const sx=3285377520,Qs=4294901760,to=65535;class JA{constructor(t){this.h1=t?t&4294967295:sx,this.h2=t?t&4294967295:sx}update(t){let i,s;if(typeof t=="string"){i=new Uint8Array(t.length*2),s=0;for(let m=0,v=t.length;m<v;m++){const C=t.charCodeAt(m);C<=255?i[s++]=C:(i[s++]=C>>>8,i[s++]=C&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),s=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=s>>2,o=s-n*4,r=new Uint32Array(i.buffer,0,n);let a=0,l=0,c=this.h1,d=this.h2;const h=3432918353,u=461845907,f=h&to,p=u&to;for(let m=0;m<n;m++)m&1?(a=r[m],a=a*h&Qs|a*f&to,a=a<<15|a>>>17,a=a*u&Qs|a*p&to,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=r[m],l=l*h&Qs|l*f&to,l=l<<15|l>>>17,l=l*u&Qs|l*p&to,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,o){case 3:a^=i[n*4+2]<<16;case 2:a^=i[n*4+1]<<8;case 1:a^=i[n*4],a=a*h&Qs|a*f&to,a=a<<15|a>>>17,a=a*u&Qs|a*p&to,n&1?c^=a:d^=a}this.h1=c,this.h2=d}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&Qs|t*36045&to,i=i*4283543511&Qs|((i<<16|t>>>16)*2950163797&Qs)>>>16,t^=i>>>1,t=t*444984403&Qs|t*60499&to,i=i*3301882366&Qs|((i<<16|t>>>16)*3120437893&Qs)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const db=Object.freeze({map:null,hash:"",transfer:void 0});var ql,Yl,Fi,Fv,ZA;class gS{constructor(){F(this,Fv);F(this,ql,!1);F(this,Yl,null);F(this,Fi,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const s=g(this,Fi).get(t);return s===void 0?i:Object.assign(i,s)}getRawValue(t){return g(this,Fi).get(t)}remove(t){if(g(this,Fi).delete(t),g(this,Fi).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const i of g(this,Fi).values())if(i instanceof Tt)return;this.onAnnotationEditor(null)}}setValue(t,i){const s=g(this,Fi).get(t);let n=!1;if(s!==void 0)for(const[o,r]of Object.entries(i))s[o]!==r&&(n=!0,s[o]=r);else n=!0,g(this,Fi).set(t,i);n&&E(this,Fv,ZA).call(this),i instanceof Tt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type)}has(t){return g(this,Fi).has(t)}getAll(){return g(this,Fi).size>0?aS(g(this,Fi)):null}setAll(t){for(const[i,s]of Object.entries(t))this.setValue(i,s)}get size(){return g(this,Fi).size}resetModified(){g(this,ql)&&(x(this,ql,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new eF(this)}get serializable(){if(g(this,Fi).size===0)return db;const t=new Map,i=new JA,s=[],n=Object.create(null);let o=!1;for(const[r,a]of g(this,Fi)){const l=a instanceof Tt?a.serialize(!1,n):a;l&&(t.set(r,l),i.update(`${r}:${JSON.stringify(l)}`),o||(o=!!l.bitmap))}if(o)for(const r of t.values())r.bitmap&&s.push(r.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:s}:db}get editorStats(){let t=null;const i=new Map;for(const s of g(this,Fi).values()){if(!(s instanceof Tt))continue;const n=s.telemetryFinalData;if(!n)continue;const{type:o}=n;i.has(o)||i.set(o,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const r=t[o]||(t[o]=new Map);for(const[a,l]of Object.entries(n)){if(a==="type")continue;let c=r.get(a);c||(c=new Map,r.set(a,c));const d=c.get(l)??0;c.set(l,d+1)}}for(const[s,n]of i)t[s]=n.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){x(this,Yl,null)}get modifiedIds(){if(g(this,Yl))return g(this,Yl);const t=[];for(const i of g(this,Fi).values())!(i instanceof Tt)||!i.annotationElementId||!i.serialize()||t.push(i.annotationElementId);return x(this,Yl,{ids:new Set(t),hash:t.join(",")})}}ql=new WeakMap,Yl=new WeakMap,Fi=new WeakMap,Fv=new WeakSet,ZA=function(){g(this,ql)||(x(this,ql,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var of;class eF extends gS{constructor(i){super();F(this,of);const{map:s,hash:n,transfer:o}=i.serializable,r=structuredClone(s,o?{transfer:o}:null);x(this,of,{map:r,hash:n,transfer:o})}get print(){Nt("Should not call PrintAnnotationStorage.print")}get serializable(){return g(this,of)}get modifiedIds(){return ut(this,"modifiedIds",{ids:new Set,hash:""})}}of=new WeakMap;var dh;class zL{constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){F(this,dh,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),g(this,dh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:i}){if(!(!t||g(this,dh).has(t.loadedName))){if(wi(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:n,style:o}=t,r=new FontFace(s,n,o);this.addNativeFontFace(r);try{await r.load(),g(this,dh).add(s),i==null||i(t)}catch{Ze(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}return}Nt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(n){throw Ze(`Failed to load font '${s.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const n=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){var i;const t=!!((i=this._document)!=null&&i.fonts);return ut(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(is||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),ut(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function i(){for(wi(!n.done,"completeRequest() cannot be called twice."),n.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,n={done:!1,complete:i,callback:t};return s.push(n),n}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ut(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function s(y,R){return y.charCodeAt(R)<<24|y.charCodeAt(R+1)<<16|y.charCodeAt(R+2)<<8|y.charCodeAt(R+3)&255}function n(y,R,A,P){const T=y.substring(0,R),M=y.substring(R+A);return T+P+M}let o,r;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function d(y,R){if(++c>30){Ze("Load test font never loaded."),R();return}if(l.font="30px "+y,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(d.bind(null,y,R))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let u=this._loadTestFont;u=n(u,976,h.length,h);const p=16,m=1482184792;let v=s(u,p);for(o=0,r=h.length-3;o<r;o+=4)v=v-m+s(h,o)|0;o<h.length&&(v=v-m+s(h+"XXX",o)|0),u=n(u,p,4,AL(v));const C=`url(data:font/opentype;base64,${btoa(u)});`,w=`@font-face {font-family:"${h}";src:${C}}`;this.insertRule(w);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const y of[t.loadedName,h]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=y,S.append(R)}this._document.body.append(S),d(h,()=>{S.remove(),i.complete()})}}dh=new WeakMap;class WL{constructor(t,{disableFontFace:i=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this.disableFontFace=i===!0,this._inspectFont=s}createNativeFontFace(){var i;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(i=this._inspectFont)==null||i.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${IL(this.data)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];let s;try{s=t.get(this.loadedName+"_path_"+i)}catch(o){Ze(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(s)||s.length===0)return this.compiledGlyphs[i]=function(o,r){};const n=[];for(let o=0,r=s.length;o<r;)switch(s[o++]){case Ko.BEZIER_CURVE_TO:{const[a,l,c,d,h,u]=s.slice(o,o+6);n.push(f=>f.bezierCurveTo(a,l,c,d,h,u)),o+=6}break;case Ko.MOVE_TO:{const[a,l]=s.slice(o,o+2);n.push(c=>c.moveTo(a,l)),o+=2}break;case Ko.LINE_TO:{const[a,l]=s.slice(o,o+2);n.push(c=>c.lineTo(a,l)),o+=2}break;case Ko.QUADRATIC_CURVE_TO:{const[a,l,c,d]=s.slice(o,o+4);n.push(h=>h.quadraticCurveTo(a,l,c,d)),o+=4}break;case Ko.RESTORE:n.push(a=>a.restore());break;case Ko.SAVE:n.push(a=>a.save());break;case Ko.SCALE:wi(n.length===2,"Scale command is only valid at the third position.");break;case Ko.TRANSFORM:{const[a,l,c,d,h,u]=s.slice(o,o+6);n.push(f=>f.transform(a,l,c,d,h,u)),o+=6}break;case Ko.TRANSLATE:{const[a,l]=s.slice(o,o+2);n.push(c=>c.translate(a,l)),o+=2}break}return this.compiledGlyphs[i]=function(r,a){n[0](r),n[1](r),r.scale(a,-a);for(let l=2,c=n.length;l<c;l++)n[l](r)}}}var rf;class tF{constructor({enableHWA:t=!1}){F(this,rf,!1);x(this,rf,t)}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,i);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!g(this,rf)})}}reset(t,i,s){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){Nt("Abstract method `_createCanvas` called.")}}rf=new WeakMap;class $L extends tF{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const s=this._document.createElement("canvas");return s.width=t,s.height=i,s}}class iF{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){Nt("Abstract method `_fetch` called.")}}class sF extends iF{async _fetch(t){const i=await iC(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):tC(i)}}class nF{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,s,n,o){return"none"}destroy(t=!1){}}var Xl,Ql,bo,ar,Qi,Pv,Jl,Se,Yi,vd,Cd,im,wd,oF,hb,bd,Hu,Gu,ub,Bu;class UL extends nF{constructor({docId:i,ownerDocument:s=globalThis.document}){super();F(this,Se);F(this,Xl);F(this,Ql);F(this,bo);F(this,ar);F(this,Qi);F(this,Pv);F(this,Jl,0);x(this,ar,i),x(this,Qi,s)}addFilter(i){if(!i)return"none";let s=g(this,Se,Yi).get(i);if(s)return s;const[n,o,r]=E(this,Se,im).call(this,i),a=i.length===1?n:`${n}${o}${r}`;if(s=g(this,Se,Yi).get(a),s)return g(this,Se,Yi).set(i,s),s;const l=`g_${g(this,ar)}_transfer_map_${os(this,Jl)._++}`,c=E(this,Se,wd).call(this,l);g(this,Se,Yi).set(i,c),g(this,Se,Yi).set(a,c);const d=E(this,Se,bd).call(this,l);return E(this,Se,Gu).call(this,n,o,r,d),c}addHCMFilter(i,s){var p;const n=`${i}-${s}`,o="base";let r=g(this,Se,vd).get(o);if((r==null?void 0:r.key)===n||(r?((p=r.filter)==null||p.remove(),r.key=n,r.url="none",r.filter=null):(r={key:n,url:"none",filter:null},g(this,Se,vd).set(o,r)),!i||!s))return r.url;const a=E(this,Se,Bu).call(this,i);i=ke.makeHexColor(...a);const l=E(this,Se,Bu).call(this,s);if(s=ke.makeHexColor(...l),g(this,Se,Cd).style.color="",i==="#000000"&&s==="#ffffff"||i===s)return r.url;const c=new Array(256);for(let m=0;m<=255;m++){const v=m/255;c[m]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}const d=c.join(","),h=`g_${g(this,ar)}_hcm_filter`,u=r.filter=E(this,Se,bd).call(this,h);E(this,Se,Gu).call(this,d,d,d,u),E(this,Se,hb).call(this,u);const f=(m,v)=>{const C=a[m]/255,w=l[m]/255,S=new Array(v+1);for(let y=0;y<=v;y++)S[y]=C+y/v*(w-C);return S.join(",")};return E(this,Se,Gu).call(this,f(0,5),f(1,5),f(2,5),u),r.url=E(this,Se,wd).call(this,h),r.url}addAlphaFilter(i){let s=g(this,Se,Yi).get(i);if(s)return s;const[n]=E(this,Se,im).call(this,[i]),o=`alpha_${n}`;if(s=g(this,Se,Yi).get(o),s)return g(this,Se,Yi).set(i,s),s;const r=`g_${g(this,ar)}_alpha_map_${os(this,Jl)._++}`,a=E(this,Se,wd).call(this,r);g(this,Se,Yi).set(i,a),g(this,Se,Yi).set(o,a);const l=E(this,Se,bd).call(this,r);return E(this,Se,ub).call(this,n,l),a}addLuminosityFilter(i){let s=g(this,Se,Yi).get(i||"luminosity");if(s)return s;let n,o;if(i?([n]=E(this,Se,im).call(this,[i]),o=`luminosity_${n}`):o="luminosity",s=g(this,Se,Yi).get(o),s)return g(this,Se,Yi).set(i,s),s;const r=`g_${g(this,ar)}_luminosity_map_${os(this,Jl)._++}`,a=E(this,Se,wd).call(this,r);g(this,Se,Yi).set(i,a),g(this,Se,Yi).set(o,a);const l=E(this,Se,bd).call(this,r);return E(this,Se,oF).call(this,l),i&&E(this,Se,ub).call(this,n,l),a}addHighlightHCMFilter(i,s,n,o,r){var w;const a=`${s}-${n}-${o}-${r}`;let l=g(this,Se,vd).get(i);if((l==null?void 0:l.key)===a||(l?((w=l.filter)==null||w.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},g(this,Se,vd).set(i,l)),!s||!n))return l.url;const[c,d]=[s,n].map(E(this,Se,Bu).bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),u=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[f,p]=[o,r].map(E(this,Se,Bu).bind(this));u<h&&([h,u,f,p]=[u,h,p,f]),g(this,Se,Cd).style.color="";const m=(S,y,R)=>{const A=new Array(256),P=(u-h)/R,T=S/255,M=(y-S)/(255*R);let N=0;for(let _=0;_<=R;_++){const L=Math.round(h+_*P),z=T+_*M;for(let q=N;q<=L;q++)A[q]=z;N=L+1}for(let _=N;_<256;_++)A[_]=A[N-1];return A.join(",")},v=`g_${g(this,ar)}_hcm_${i}_filter`,C=l.filter=E(this,Se,bd).call(this,v);return E(this,Se,hb).call(this,C),E(this,Se,Gu).call(this,m(f[0],p[0],5),m(f[1],p[1],5),m(f[2],p[2],5),C),l.url=E(this,Se,wd).call(this,v),l.url}destroy(i=!1){i&&g(this,Se,vd).size!==0||(g(this,bo)&&(g(this,bo).parentNode.parentNode.remove(),x(this,bo,null)),g(this,Ql)&&(g(this,Ql).clear(),x(this,Ql,null)),x(this,Jl,0))}}Xl=new WeakMap,Ql=new WeakMap,bo=new WeakMap,ar=new WeakMap,Qi=new WeakMap,Pv=new WeakMap,Jl=new WeakMap,Se=new WeakSet,Yi=function(){return g(this,Ql)||x(this,Ql,new Map)},vd=function(){return g(this,Pv)||x(this,Pv,new Map)},Cd=function(){if(!g(this,bo)){const i=g(this,Qi).createElement("div"),{style:s}=i;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const n=g(this,Qi).createElementNS(Xo,"svg");n.setAttribute("width",0),n.setAttribute("height",0),x(this,bo,g(this,Qi).createElementNS(Xo,"defs")),i.append(n),n.append(g(this,bo)),g(this,Qi).body.append(i)}return g(this,bo)},im=function(i){if(i.length===1){const c=i[0],d=new Array(256);for(let u=0;u<256;u++)d[u]=c[u]/255;const h=d.join(",");return[h,h,h]}const[s,n,o]=i,r=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)r[c]=s[c]/255,a[c]=n[c]/255,l[c]=o[c]/255;return[r.join(","),a.join(","),l.join(",")]},wd=function(i){if(g(this,Xl)===void 0){x(this,Xl,"");const s=g(this,Qi).URL;s!==g(this,Qi).baseURI&&(sC(s)?Ze('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,Xl,s.split("#",1)[0]))}return`url(${g(this,Xl)}#${i})`},oF=function(i){const s=g(this,Qi).createElementNS(Xo,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),i.append(s)},hb=function(i){const s=g(this,Qi).createElementNS(Xo,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),i.append(s)},bd=function(i){const s=g(this,Qi).createElementNS(Xo,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",i),g(this,Se,Cd).append(s),s},Hu=function(i,s,n){const o=g(this,Qi).createElementNS(Xo,s);o.setAttribute("type","discrete"),o.setAttribute("tableValues",n),i.append(o)},Gu=function(i,s,n,o){const r=g(this,Qi).createElementNS(Xo,"feComponentTransfer");o.append(r),E(this,Se,Hu).call(this,r,"feFuncR",i),E(this,Se,Hu).call(this,r,"feFuncG",s),E(this,Se,Hu).call(this,r,"feFuncB",n)},ub=function(i,s){const n=g(this,Qi).createElementNS(Xo,"feComponentTransfer");s.append(n),E(this,Se,Hu).call(this,n,"feFuncA",i)},Bu=function(i){return g(this,Se,Cd).style.color=i,uS(getComputedStyle(g(this,Se,Cd)).getPropertyValue("color"))};class rF{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){Nt("Abstract method `_fetch` called.")}}class aF extends rF{async _fetch(t){const i=await iC(t,"arraybuffer");return new Uint8Array(i)}}if(is){var gb=Promise.withResolvers(),ng=null;(async()=>{const t=await Al(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),i=await Al(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),s=await Al(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),n=await Al(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url);let o,r;return new Map(Object.entries({fs:t,http:i,https:s,url:n,canvas:o,path2d:r}))})().then(t=>{ng=t,gb.resolve()},t=>{Ze(`loadPackages: ${t}`),ng=new Map,gb.resolve()})}class Ja{static get promise(){return gb.promise}static get(t){return ng==null?void 0:ng.get(t)}}async function lF(e){const i=await Ja.get("fs").promises.readFile(e);return new Uint8Array(i)}class jL extends nF{}class KL extends tF{_createCanvas(t,i){return Ja.get("canvas").createCanvas(t,i)}}class qL extends iF{async _fetch(t){return lF(t)}}class YL extends rF{async _fetch(t){return lF(t)}}const cs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function fb(e,t){if(!t)return;const i=t[2]-t[0],s=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],i,s),e.clip(n)}class fS{getPattern(){Nt("Abstract method `getPattern` called.")}}class XL extends fS{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let i;this._type==="axial"?i=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(i=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)i.addColorStop(s[0],s[1]);return i}getPattern(t,i,s,n){let o;if(n===cs.STROKE||n===cs.FILL){const r=i.current.getClippedPathBoundingBox(n,Yt(t))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,l=Math.ceil(r[3]-r[1])||1,c=i.cachedCanvases.getCanvas("pattern",a,l),d=c.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-r[0],-r[1]),s=ke.transform(s,[1,0,0,1,r[0],r[1]]),d.transform(...i.baseTransform),this.matrix&&d.transform(...this.matrix),fb(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),o=t.createPattern(c.canvas,"no-repeat");const h=new DOMMatrix(s);o.setTransform(h)}else fb(t,this._bbox),o=this._createGradient(t);return o}}function MC(e,t,i,s,n,o,r,a){const l=t.coords,c=t.colors,d=e.data,h=e.width*4;let u;l[i+1]>l[s+1]&&(u=i,i=s,s=u,u=o,o=r,r=u),l[s+1]>l[n+1]&&(u=s,s=n,n=u,u=r,r=a,a=u),l[i+1]>l[s+1]&&(u=i,i=s,s=u,u=o,o=r,r=u);const f=(l[i]+t.offsetX)*t.scaleX,p=(l[i+1]+t.offsetY)*t.scaleY,m=(l[s]+t.offsetX)*t.scaleX,v=(l[s+1]+t.offsetY)*t.scaleY,C=(l[n]+t.offsetX)*t.scaleX,w=(l[n+1]+t.offsetY)*t.scaleY;if(p>=w)return;const S=c[o],y=c[o+1],R=c[o+2],A=c[r],P=c[r+1],T=c[r+2],M=c[a],N=c[a+1],_=c[a+2],L=Math.round(p),z=Math.round(w);let q,B,Z,ee,Y,ye,De,Pe;for(let Q=L;Q<=z;Q++){if(Q<v){const oe=Q<p?0:(p-Q)/(p-v);q=f-(f-m)*oe,B=S-(S-A)*oe,Z=y-(y-P)*oe,ee=R-(R-T)*oe}else{let oe;Q>w?oe=1:v===w?oe=0:oe=(v-Q)/(v-w),q=m-(m-C)*oe,B=A-(A-M)*oe,Z=P-(P-N)*oe,ee=T-(T-_)*oe}let te;Q<p?te=0:Q>w?te=1:te=(p-Q)/(p-w),Y=f-(f-C)*te,ye=S-(S-M)*te,De=y-(y-N)*te,Pe=R-(R-_)*te;const ie=Math.round(Math.min(q,Y)),ae=Math.round(Math.max(q,Y));let U=h*Q+ie*4;for(let oe=ie;oe<=ae;oe++)te=(q-oe)/(q-Y),te<0?te=0:te>1&&(te=1),d[U++]=B-(B-ye)*te|0,d[U++]=Z-(Z-De)*te|0,d[U++]=ee-(ee-Pe)*te|0,d[U++]=255}}function QL(e,t,i){const s=t.coords,n=t.colors;let o,r;switch(t.type){case"lattice":const a=t.verticesPerRow,l=Math.floor(s.length/a)-1,c=a-1;for(o=0;o<l;o++){let d=o*a;for(let h=0;h<c;h++,d++)MC(e,i,s[d],s[d+1],s[d+a],n[d],n[d+1],n[d+a]),MC(e,i,s[d+a+1],s[d+1],s[d+a],n[d+a+1],n[d+1],n[d+a])}break;case"triangles":for(o=0,r=s.length;o<r;o+=3)MC(e,i,s[o],s[o+1],s[o+2],n[o],n[o+1],n[o+2]);break;default:throw new Error("illegal figure")}}class JL extends fS{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,i,s){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),u=Math.min(Math.ceil(Math.abs(d*t[1]*1.1)),3e3),f=c/h,p=d/u,m={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/f,scaleY:1/p},v=h+4,C=u+4,w=s.getCanvas("mesh",v,C),S=w.context,y=S.createImageData(h,u);if(i){const A=y.data;for(let P=0,T=A.length;P<T;P+=4)A[P]=i[0],A[P+1]=i[1],A[P+2]=i[2],A[P+3]=255}for(const A of this._figures)QL(y,A,m);return S.putImageData(y,2,2),{canvas:w.canvas,offsetX:a-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}getPattern(t,i,s,n){fb(t,this._bbox);let o;if(n===cs.SHADING)o=ke.singularValueDecompose2dScale(Yt(t));else if(o=ke.singularValueDecompose2dScale(i.baseTransform),this.matrix){const a=ke.singularValueDecompose2dScale(this.matrix);o=[o[0]*a[0],o[1]*a[1]]}const r=this._createMeshCanvas(o,n===cs.SHADING?null:this._background,i.cachedCanvases);return n!==cs.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}}class ZL extends fS{getPattern(){return"hotpink"}}function eO(e){switch(e[0]){case"RadialAxial":return new XL(e);case"Mesh":return new JL(e);case"Dummy":return new ZL}throw new Error(`Unknown IR type: ${e[0]}`)}const nx={COLORED:1,UNCOLORED:2},Tv=class Tv{constructor(t,i,s,n,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=i,this.ctx=s,this.canvasGraphicsFactory=n,this.baseTransform=o}createPatternCanvas(t){const{bbox:i,operatorList:s,paintType:n,tilingType:o,color:r,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),Zv("TilingType: "+o);const d=i[0],h=i[1],u=i[2],f=i[3],p=u-d,m=f-h,v=ke.singularValueDecompose2dScale(this.matrix),C=ke.singularValueDecompose2dScale(this.baseTransform),w=v[0]*C[0],S=v[1]*C[1];let y=p,R=m,A=!1,P=!1;const T=Math.ceil(l*w),M=Math.ceil(c*S),N=Math.ceil(p*w),_=Math.ceil(m*S);T>=N?y=l:A=!0,M>=_?R=c:P=!0;const L=this.getSizeAndScale(y,this.ctx.canvas.width,w),z=this.getSizeAndScale(R,this.ctx.canvas.height,S),q=t.cachedCanvases.getCanvas("pattern",L.size,z.size),B=q.context,Z=a.createCanvasGraphics(B);if(Z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Z,n,r),B.translate(-L.scale*d,-z.scale*h),Z.transform(L.scale,0,0,z.scale,0,0),B.save(),this.clipBbox(Z,d,h,u,f),Z.baseTransform=Yt(Z.ctx),Z.executeOperatorList(s),Z.endDrawing(),B.restore(),A||P){const ee=q.canvas;A&&(y=l),P&&(R=c);const Y=this.getSizeAndScale(y,this.ctx.canvas.width,w),ye=this.getSizeAndScale(R,this.ctx.canvas.height,S),De=Y.size,Pe=ye.size,Q=t.cachedCanvases.getCanvas("pattern-workaround",De,Pe),te=Q.context,ie=A?Math.floor(p/l):0,ae=P?Math.floor(m/c):0;for(let U=0;U<=ie;U++)for(let oe=0;oe<=ae;oe++)te.drawImage(ee,De*U,Pe*oe,De,Pe,0,0,De,Pe);return{canvas:Q.canvas,scaleX:Y.scale,scaleY:ye.scale,offsetX:d,offsetY:h}}return{canvas:q.canvas,scaleX:L.scale,scaleY:z.scale,offsetX:d,offsetY:h}}getSizeAndScale(t,i,s){const n=Math.max(Tv.MAX_PATTERN_SIZE,i);let o=Math.ceil(t*s);return o>=n?o=n:s=o/t,{scale:s,size:o}}clipBbox(t,i,s,n,o){const r=n-i,a=o-s;t.ctx.rect(i,s,r,a),t.current.updateRectMinMax(Yt(t.ctx),[i,s,n,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,s){const n=t.ctx,o=t.current;switch(i){case nx.COLORED:const r=this.ctx;n.fillStyle=r.fillStyle,n.strokeStyle=r.strokeStyle,o.fillColor=r.fillStyle,o.strokeColor=r.strokeStyle;break;case nx.UNCOLORED:const a=ke.makeHexColor(s[0],s[1],s[2]);n.fillStyle=a,n.strokeStyle=a,o.fillColor=a,o.strokeColor=a;break;default:throw new EL(`Unsupported paint type: ${i}`)}}getPattern(t,i,s,n){let o=s;n!==cs.SHADING&&(o=ke.transform(o,i.baseTransform),this.matrix&&(o=ke.transform(o,this.matrix)));const r=this.createPatternCanvas(i);let a=new DOMMatrix(o);a=a.translate(r.offsetX,r.offsetY),a=a.scale(1/r.scaleX,1/r.scaleY);const l=t.createPattern(r.canvas,"repeat");return l.setTransform(a),l}};Ne(Tv,"MAX_PATTERN_SIZE",3e3);let pb=Tv;function tO({src:e,srcPos:t=0,dest:i,width:s,height:n,nonBlackColor:o=4294967295,inverseDecode:r=!1}){const a=gs.isLittleEndian?4278190080:255,[l,c]=r?[o,a]:[a,o],d=s>>3,h=s&7,u=e.length;i=new Uint32Array(i.buffer);let f=0;for(let p=0;p<n;p++){for(const v=t+d;t<v;t++){const C=t<u?e[t]:255;i[f++]=C&128?c:l,i[f++]=C&64?c:l,i[f++]=C&32?c:l,i[f++]=C&16?c:l,i[f++]=C&8?c:l,i[f++]=C&4?c:l,i[f++]=C&2?c:l,i[f++]=C&1?c:l}if(h===0)continue;const m=t<u?e[t++]:255;for(let v=0;v<h;v++)i[f++]=m&1<<7-v?c:l}return{srcPos:t,destPos:f}}const ox=16,rx=100,iO=15,ax=10,lx=1e3,Rs=16;function sO(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(s,n){t.translate(s,n),this.__originalTranslate(s,n)},e.scale=function(s,n){t.scale(s,n),this.__originalScale(s,n)},e.transform=function(s,n,o,r,a,l){t.transform(s,n,o,r,a,l),this.__originalTransform(s,n,o,r,a,l)},e.setTransform=function(s,n,o,r,a,l){t.setTransform(s,n,o,r,a,l),this.__originalSetTransform(s,n,o,r,a,l)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(s){t.rotate(s),this.__originalRotate(s)},e.clip=function(s){t.clip(s),this.__originalClip(s)},e.moveTo=function(i,s){t.moveTo(i,s),this.__originalMoveTo(i,s)},e.lineTo=function(i,s){t.lineTo(i,s),this.__originalLineTo(i,s)},e.bezierCurveTo=function(i,s,n,o,r,a){t.bezierCurveTo(i,s,n,o,r,a),this.__originalBezierCurveTo(i,s,n,o,r,a)},e.rect=function(i,s,n,o){t.rect(i,s,n,o),this.__originalRect(i,s,n,o)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class nO{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,s){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,i,s)):(n=this.canvasFactory.create(i,s),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function Dp(e,t,i,s,n,o,r,a,l,c){const[d,h,u,f,p,m]=Yt(e);if(h===0&&u===0){const w=r*d+p,S=Math.round(w),y=a*f+m,R=Math.round(y),A=(r+l)*d+p,P=Math.abs(Math.round(A)-S)||1,T=(a+c)*f+m,M=Math.abs(Math.round(T)-R)||1;return e.setTransform(Math.sign(d),0,0,Math.sign(f),S,R),e.drawImage(t,i,s,n,o,0,0,P,M),e.setTransform(d,h,u,f,p,m),[P,M]}if(d===0&&f===0){const w=a*u+p,S=Math.round(w),y=r*h+m,R=Math.round(y),A=(a+c)*u+p,P=Math.abs(Math.round(A)-S)||1,T=(r+l)*h+m,M=Math.abs(Math.round(T)-R)||1;return e.setTransform(0,Math.sign(h),Math.sign(u),0,S,R),e.drawImage(t,i,s,n,o,0,0,M,P),e.setTransform(d,h,u,f,p,m),[M,P]}e.drawImage(t,i,s,n,o,r,a,l,c);const v=Math.hypot(d,h),C=Math.hypot(u,f);return[v*l,C*c]}function oO(e){const{width:t,height:i}=e;if(t>lx||i>lx)return null;const s=1e3,n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let r=new Uint8Array(o*(i+1)),a,l,c;const d=t+7&-8;let h=new Uint8Array(d*i),u=0;for(const C of e.data){let w=128;for(;w>0;)h[u++]=C&w?0:255,w>>=1}let f=0;for(u=0,h[u]!==0&&(r[0]=1,++f),l=1;l<t;l++)h[u]!==h[u+1]&&(r[l]=h[u]?2:1,++f),u++;for(h[u]!==0&&(r[l]=2,++f),a=1;a<i;a++){u=a*d,c=a*o,h[u-d]!==h[u]&&(r[c]=h[u]?1:8,++f);let C=(h[u]?4:0)+(h[u-d]?8:0);for(l=1;l<t;l++)C=(C>>2)+(h[u+1]?4:0)+(h[u-d+1]?8:0),n[C]&&(r[c+l]=n[C],++f),u++;if(h[u-d]!==h[u]&&(r[c+l]=h[u]?2:4,++f),f>s)return null}for(u=d*(i-1),c=a*o,h[u]!==0&&(r[c]=8,++f),l=1;l<t;l++)h[u]!==h[u+1]&&(r[c+l]=h[u]?4:8,++f),u++;if(h[u]!==0&&(r[c+l]=4,++f),f>s)return null;const p=new Int32Array([0,o,-1,0,-o,0,0,0,1]),m=new Path2D;for(a=0;f&&a<=i;a++){let C=a*o;const w=C+t;for(;C<w&&!r[C];)C++;if(C===w)continue;m.moveTo(C%o,a);const S=C;let y=r[C];do{const R=p[y];do C+=R;while(!r[C]);const A=r[C];A!==5&&A!==10?(y=A,r[C]=0):(y=A&51*y>>4,r[C]&=y>>2|y<<2),m.lineTo(C%o,C/o|0),r[C]||--f}while(S!==C);--a}return h=null,r=null,function(C){C.save(),C.scale(1/t,-1/i),C.translate(0,-i),C.fill(m),C.beginPath(),C.restore()}}class cx{constructor(t,i){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=EA,this.textMatrixScale=1,this.fontMatrix=Vw,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=qi.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,i])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,i){this.x=t,this.y=i}updatePathMinMax(t,i,s){[i,s]=ke.applyTransform([i,s],t),this.minX=Math.min(this.minX,i),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,i),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(t,i){const s=ke.applyTransform(i,t),n=ke.applyTransform(i.slice(2),t),o=ke.applyTransform([i[0],i[3]],t),r=ke.applyTransform([i[2],i[1]],t);this.minX=Math.min(this.minX,s[0],n[0],o[0],r[0]),this.minY=Math.min(this.minY,s[1],n[1],o[1],r[1]),this.maxX=Math.max(this.maxX,s[0],n[0],o[0],r[0]),this.maxY=Math.max(this.maxY,s[1],n[1],o[1],r[1])}updateScalingPathMinMax(t,i){ke.scaleMinMax(t,i),this.minX=Math.min(this.minX,i[0]),this.minY=Math.min(this.minY,i[1]),this.maxX=Math.max(this.maxX,i[2]),this.maxY=Math.max(this.maxY,i[3])}updateCurvePathMinMax(t,i,s,n,o,r,a,l,c,d){const h=ke.bezierBoundingBox(i,s,n,o,r,a,l,c,d);d||this.updateRectMinMax(t,h)}getPathBoundingBox(t=cs.FILL,i=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(t===cs.STROKE){i||Nt("Stroke bounding box must include transform.");const n=ke.singularValueDecompose2dScale(i),o=n[0]*this.lineWidth/2,r=n[1]*this.lineWidth/2;s[0]-=o,s[1]-=r,s[2]+=o,s[3]+=r}return s}updateClipFromPath(){const t=ke.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=cs.FILL,i=null){return ke.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function dx(e,t){if(typeof ImageData<"u"&&t instanceof ImageData){e.putImageData(t,0,0);return}const i=t.height,s=t.width,n=i%Rs,o=(i-n)/Rs,r=n===0?o:o+1,a=e.createImageData(s,Rs);let l=0,c;const d=t.data,h=a.data;let u,f,p,m;if(t.kind===Yp.GRAYSCALE_1BPP){const v=d.byteLength,C=new Uint32Array(h.buffer,0,h.byteLength>>2),w=C.length,S=s+7>>3,y=4294967295,R=gs.isLittleEndian?4278190080:255;for(u=0;u<r;u++){for(p=u<o?Rs:n,c=0,f=0;f<p;f++){const A=v-l;let P=0;const T=A>S?s:A*8-7,M=T&-8;let N=0,_=0;for(;P<M;P+=8)_=d[l++],C[c++]=_&128?y:R,C[c++]=_&64?y:R,C[c++]=_&32?y:R,C[c++]=_&16?y:R,C[c++]=_&8?y:R,C[c++]=_&4?y:R,C[c++]=_&2?y:R,C[c++]=_&1?y:R;for(;P<T;P++)N===0&&(_=d[l++],N=128),C[c++]=_&N?y:R,N>>=1}for(;c<w;)C[c++]=0;e.putImageData(a,0,u*Rs)}}else if(t.kind===Yp.RGBA_32BPP){for(f=0,m=s*Rs*4,u=0;u<o;u++)h.set(d.subarray(l,l+m)),l+=m,e.putImageData(a,0,f),f+=Rs;u<r&&(m=s*n*4,h.set(d.subarray(l,l+m)),e.putImageData(a,0,f))}else if(t.kind===Yp.RGB_24BPP)for(p=Rs,m=s*p,u=0;u<r;u++){for(u>=o&&(p=n,m=s*p),c=0,f=m;f--;)h[c++]=d[l++],h[c++]=d[l++],h[c++]=d[l++],h[c++]=255;e.putImageData(a,0,u*Rs)}else throw new Error(`bad image kind: ${t.kind}`)}function hx(e,t){if(t.bitmap){e.drawImage(t.bitmap,0,0);return}const i=t.height,s=t.width,n=i%Rs,o=(i-n)/Rs,r=n===0?o:o+1,a=e.createImageData(s,Rs);let l=0;const c=t.data,d=a.data;for(let h=0;h<r;h++){const u=h<o?Rs:n;({srcPos:l}=tO({src:c,srcPos:l,dest:d,width:s,height:u,nonBlackColor:0})),e.putImageData(a,0,h*Rs)}}function Eu(e,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)e[s]!==void 0&&(t[s]=e[s]);e.setLineDash!==void 0&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function Mp(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",e.setLineDash!==void 0&&(e.setLineDash([]),e.lineDashOffset=0),!is){const{filter:t}=e;t!=="none"&&t!==""&&(e.filter="none")}}function ux(e,t){if(t)return!0;const i=ke.singularValueDecompose2dScale(e);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*Qa.PDF_TO_CSS_UNITS);return i[0]<=s&&i[1]<=s}const rO=["butt","round","square"],aO=["miter","round","bevel"],lO={},gx={};var ol,mb,vb;const f0=class f0{constructor(t,i,s,n,o,{optionalContentConfig:r,markedContentStack:a=null},l,c){F(this,ol);this.ctx=t,this.current=new cx(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=s,this.canvasFactory=n,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=r,this.cachedCanvases=new nO(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,i=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):i}beginDrawing({transform:t,viewport:i,transparency:s=!1,background:n=null}){const o=this.ctx.canvas.width,r=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,o,r),this.ctx.fillStyle=a,s){const l=this.cachedCanvases.getCanvas("transparent",o,r);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Yt(this.compositeCtx))}this.ctx.save(),Mp(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=Yt(this.ctx)}executeOperatorList(t,i,s,n){const o=t.argsArray,r=t.fnArray;let a=i||0;const l=o.length;if(l===a)return a;const c=l-a>ax&&typeof s=="function",d=c?Date.now()+iO:0;let h=0;const u=this.commonObjs,f=this.objs;let p;for(;;){if(n!==void 0&&a===n.nextBreakPoint)return n.breakIt(a,s),a;if(p=r[a],p!==Rn.dependency)this[p].apply(this,o[a]);else for(const m of o[a]){const v=m.startsWith("g_")?u:f;if(!v.has(m))return v.get(m,s),a}if(a++,a===l)return a;if(c&&++h>ax){if(Date.now()>d)return s(),a;h=0}}}endDrawing(){E(this,ol,mb).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),E(this,ol,vb).call(this)}_scaleImage(t,i){const s=t.width??t.displayWidth,n=t.height??t.displayHeight;let o=Math.max(Math.hypot(i[0],i[1]),1),r=Math.max(Math.hypot(i[2],i[3]),1),a=s,l=n,c="prescale1",d,h;for(;o>2&&a>1||r>2&&l>1;){let u=a,f=l;o>2&&a>1&&(u=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),o/=a/u),r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,r/=l/f),d=this.cachedCanvases.getCanvas(c,u,f),h=d.context,h.clearRect(0,0,u,f),h.drawImage(t,0,0,a,l,0,0,u,f),t=d.canvas,a=u,l=f,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:l}}_createMaskCanvas(t){const i=this.ctx,{width:s,height:n}=t,o=this.current.fillColor,r=this.current.patternFill,a=Yt(i);let l,c,d,h;if((t.bitmap||t.data)&&t.count>1){const T=t.bitmap||t.data.buffer;c=JSON.stringify(r?a:[a.slice(0,4),o]),l=this._cachedBitmapsMap.get(T),l||(l=new Map,this._cachedBitmapsMap.set(T,l));const M=l.get(c);if(M&&!r){const N=Math.round(Math.min(a[0],a[2])+a[4]),_=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:M,offsetX:N,offsetY:_}}d=M}d||(h=this.cachedCanvases.getCanvas("maskCanvas",s,n),hx(h.context,t));let u=ke.transform(a,[1/s,0,0,-1/n,0,0]);u=ke.transform(u,[1,0,0,1,0,-n]);const[f,p,m,v]=ke.getAxialAlignedBoundingBox([0,0,s,n],u),C=Math.round(m-f)||1,w=Math.round(v-p)||1,S=this.cachedCanvases.getCanvas("fillCanvas",C,w),y=S.context,R=f,A=p;y.translate(-R,-A),y.transform(...u),d||(d=this._scaleImage(h.canvas,qo(y)),d=d.img,l&&r&&l.set(c,d)),y.imageSmoothingEnabled=ux(Yt(y),t.interpolate),Dp(y,d,0,0,d.width,d.height,0,0,s,n),y.globalCompositeOperation="source-in";const P=ke.transform(qo(y),[1,0,0,1,-R,-A]);return y.fillStyle=r?o.getPattern(i,this,P,cs.FILL):o,y.fillRect(0,0,s,n),l&&!r&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,S.canvas)),{canvas:S.canvas,offsetX:Math.round(R),offsetY:Math.round(A)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=rO[t]}setLineJoin(t){this.ctx.lineJoin=aO[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,i){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=i)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[i,s]of t)switch(i){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,i=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(s,t,i);this.suspendedCtx=this.ctx,this.ctx=n.context;const o=this.ctx;o.setTransform(...Yt(this.suspendedCtx)),Eu(this.suspendedCtx,o),sO(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Eu(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,s,n){const o=n[0],r=n[1],a=n[2]-o,l=n[3]-r;a===0||l===0||(this.genericComposeSMask(i.context,s,a,l,i.subtype,i.backdrop,i.transferMap,o,r,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,i,s,n,o,r,a,l,c,d,h){let u=t.canvas,f=l-d,p=c-h;if(r){const v=ke.makeHexColor(...r);if(f<0||p<0||f+s>u.width||p+n>u.height){const C=this.cachedCanvases.getCanvas("maskExtension",s,n),w=C.context;w.drawImage(u,-f,-p),w.globalCompositeOperation="destination-atop",w.fillStyle=v,w.fillRect(0,0,s,n),w.globalCompositeOperation="source-over",u=C.canvas,f=p=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(f,p,s,n),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=v,t.fillRect(f,p,s,n),t.restore()}}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),o==="Alpha"&&a?i.filter=this.filterFactory.addAlphaFilter(a):o==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(a));const m=new Path2D;m.rect(l,c,s,n),i.clip(m),i.globalCompositeOperation="destination-in",i.drawImage(u,f,p,s,n,l,c,s,n),i.restore()}save(){this.inSMaskMode?(Eu(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Eu(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,i,s,n,o,r){this.ctx.transform(t,i,s,n,o,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,s){const n=this.ctx,o=this.current;let r=o.x,a=o.y,l,c;const d=Yt(n),h=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,u=h?s.slice(0):null;for(let f=0,p=0,m=t.length;f<m;f++)switch(t[f]|0){case Rn.rectangle:r=i[p++],a=i[p++];const v=i[p++],C=i[p++],w=r+v,S=a+C;n.moveTo(r,a),v===0||C===0?n.lineTo(w,S):(n.lineTo(w,a),n.lineTo(w,S),n.lineTo(r,S)),h||o.updateRectMinMax(d,[r,a,w,S]),n.closePath();break;case Rn.moveTo:r=i[p++],a=i[p++],n.moveTo(r,a),h||o.updatePathMinMax(d,r,a);break;case Rn.lineTo:r=i[p++],a=i[p++],n.lineTo(r,a),h||o.updatePathMinMax(d,r,a);break;case Rn.curveTo:l=r,c=a,r=i[p+4],a=i[p+5],n.bezierCurveTo(i[p],i[p+1],i[p+2],i[p+3],r,a),o.updateCurvePathMinMax(d,l,c,i[p],i[p+1],i[p+2],i[p+3],r,a,u),p+=6;break;case Rn.curveTo2:l=r,c=a,n.bezierCurveTo(r,a,i[p],i[p+1],i[p+2],i[p+3]),o.updateCurvePathMinMax(d,l,c,r,a,i[p],i[p+1],i[p+2],i[p+3],u),r=i[p+2],a=i[p+3],p+=4;break;case Rn.curveTo3:l=r,c=a,r=i[p+2],a=i[p+3],n.bezierCurveTo(i[p],i[p+1],r,a,r,a),o.updateCurvePathMinMax(d,l,c,i[p],i[p+1],r,a,r,a,u),p+=4;break;case Rn.closePath:n.closePath();break}h&&o.updateScalingPathMinMax(d,u),o.setCurrentPoint(r,a)}closePath(){this.ctx.closePath()}stroke(t=!0){const i=this.ctx,s=this.current.strokeColor;i.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(i.save(),i.strokeStyle=s.getPattern(i,this,qo(i),cs.STROKE),this.rescaleAndStroke(!1),i.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),i.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const i=this.ctx,s=this.current.fillColor,n=this.current.patternFill;let o=!1;n&&(i.save(),i.fillStyle=s.getPattern(i,this,qo(i),cs.FILL),o=!0);const r=this.current.getClippedPathBoundingBox();this.contentVisible&&r!==null&&(this.pendingEOFill?(i.fill("evenodd"),this.pendingEOFill=!1):i.fill()),o&&i.restore(),t&&this.consumePath(r)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=lO}eoClip(){this.pendingClip=gx}beginText(){this.current.textMatrix=EA,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,i=this.ctx;if(t===void 0){i.beginPath();return}i.save(),i.beginPath();for(const s of t)i.setTransform(...s.transform),i.translate(s.x,s.y),s.addToPath(i,s.fontSize);i.restore(),i.clip(),i.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,i){var d;const s=this.commonObjs.get(t),n=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=s.fontMatrix||Vw,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&Ze("Invalid font matrix for font "+t),i<0?(i=-i,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=i,s.isType3Font)return;const o=s.loadedName||"sans-serif",r=((d=s.systemFontInfo)==null?void 0:d.css)||`"${o}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const l=s.italic?"italic":"normal";let c=i;i<ox?c=ox:i>rx&&(c=rx),this.current.fontSizeScale=i/c,this.ctx.font=`${l} ${a} ${c}px ${r}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,i){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,i){this.setLeading(-i),this.moveText(t,i)}setTextMatrix(t,i,s,n,o,r){this.current.textMatrix=[t,i,s,n,o,r],this.current.textMatrixScale=Math.hypot(t,i),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,i,s,n){const o=this.ctx,r=this.current,a=r.font,l=r.textRenderingMode,c=r.fontSize/r.fontSizeScale,d=l&qi.FILL_STROKE_MASK,h=!!(l&qi.ADD_TO_PATH_FLAG),u=r.patternFill&&!a.missingFile;let f;(a.disableFontFace||h||u)&&(f=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||u?(o.save(),o.translate(i,s),o.beginPath(),f(o,c),n&&o.setTransform(...n),(d===qi.FILL||d===qi.FILL_STROKE)&&o.fill(),(d===qi.STROKE||d===qi.FILL_STROKE)&&o.stroke(),o.restore()):((d===qi.FILL||d===qi.FILL_STROKE)&&o.fillText(t,i,s),(d===qi.STROKE||d===qi.FILL_STROKE)&&o.strokeText(t,i,s)),h&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Yt(o),x:i,y:s,fontSize:c,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let n=3;n<i.length;n+=4)if(i[n]>0&&i[n]<255){s=!0;break}return ut(this,"isFontSubpixelAAEnabled",s)}showText(t){const i=this.current,s=i.font;if(s.isType3Font)return this.showType3Text(t);const n=i.fontSize;if(n===0)return;const o=this.ctx,r=i.fontSizeScale,a=i.charSpacing,l=i.wordSpacing,c=i.fontDirection,d=i.textHScale*c,h=t.length,u=s.vertical,f=u?1:-1,p=s.defaultVMetrics,m=n*i.fontMatrix[0],v=i.textRenderingMode===qi.FILL&&!s.disableFontFace&&!i.patternFill;o.save(),o.transform(...i.textMatrix),o.translate(i.x,i.y+i.textRise),c>0?o.scale(d,-1):o.scale(d,1);let C;if(i.patternFill){o.save();const A=i.fillColor.getPattern(o,this,qo(o),cs.FILL);C=Yt(o),o.restore(),o.fillStyle=A}let w=i.lineWidth;const S=i.textMatrixScale;if(S===0||w===0){const A=i.textRenderingMode&qi.FILL_STROKE_MASK;(A===qi.STROKE||A===qi.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=S;if(r!==1&&(o.scale(r,r),w/=r),o.lineWidth=w,s.isInvalidPDFjsFont){const A=[];let P=0;for(const T of t)A.push(T.unicode),P+=T.width;o.fillText(A.join(""),0,0),i.x+=P*m*d,o.restore(),this.compose();return}let y=0,R;for(R=0;R<h;++R){const A=t[R];if(typeof A=="number"){y+=f*A*n/1e3;continue}let P=!1;const T=(A.isSpace?l:0)+a,M=A.fontChar,N=A.accent;let _,L,z=A.width;if(u){const B=A.vmetric||p,Z=-(A.vmetric?B[1]:z*.5)*m,ee=B[2]*m;z=B?-B[0]:z,_=Z/r,L=(y+ee)/r}else _=y/r,L=0;if(s.remeasure&&z>0){const B=o.measureText(M).width*1e3/n*r;if(z<B&&this.isFontSubpixelAAEnabled){const Z=z/B;P=!0,o.save(),o.scale(Z,1),_/=Z}else z!==B&&(_+=(z-B)/2e3*n/r)}if(this.contentVisible&&(A.isInFont||s.missingFile)){if(v&&!N)o.fillText(M,_,L);else if(this.paintChar(M,_,L,C),N){const B=_+n*N.offset.x/r,Z=L-n*N.offset.y/r;this.paintChar(N.fontChar,B,Z,C)}}const q=u?z*m-T*c:z*m+T*c;y+=q,P&&o.restore()}u?i.y-=y:i.x+=y*d,o.restore(),this.compose()}showType3Text(t){const i=this.ctx,s=this.current,n=s.font,o=s.fontSize,r=s.fontDirection,a=n.vertical?1:-1,l=s.charSpacing,c=s.wordSpacing,d=s.textHScale*r,h=s.fontMatrix||Vw,u=t.length,f=s.textRenderingMode===qi.INVISIBLE;let p,m,v,C;if(!(f||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),i.transform(...s.textMatrix),i.translate(s.x,s.y),i.scale(d,r),p=0;p<u;++p){if(m=t[p],typeof m=="number"){C=a*m*o/1e3,this.ctx.translate(C,0),s.x+=C*d;continue}const w=(m.isSpace?c:0)+l,S=n.charProcOperatorList[m.operatorListId];if(!S){Ze(`Type3 character "${m.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=m,this.save(),i.scale(o,o),i.transform(...h),this.executeOperatorList(S),this.restore()),v=ke.applyTransform([m.width,0],h)[0]*o+w,i.translate(v,0),s.x+=v*d}i.restore(),this.processingType3=null}}setCharWidth(t,i){}setCharWidthAndBounds(t,i,s,n,o,r){this.ctx.rect(s,n,o-s,r-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let i;if(t[0]==="TilingPattern"){const s=t[1],n=this.baseTransform||Yt(this.ctx),o={createCanvasGraphics:r=>new f0(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new pb(t,s,this.ctx,o,n)}else i=this._getPattern(t[1],t[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,i,s){this.ctx.strokeStyle=this.current.strokeColor=ke.makeHexColor(t,i,s)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,i,s){this.ctx.fillStyle=this.current.fillColor=ke.makeHexColor(t,i,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=eO(this.getObject(t)),this.cachedPatterns.set(t,s)),i&&(s.matrix=i),s}shadingFill(t){if(!this.contentVisible)return;const i=this.ctx;this.save();const s=this._getPattern(t);i.fillStyle=s.getPattern(i,this,qo(i),cs.SHADING);const n=qo(i);if(n){const{width:o,height:r}=i.canvas,[a,l,c,d]=ke.getAxialAlignedBoundingBox([0,0,o,r],n);this.ctx.fillRect(a,l,c-a,d-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Nt("Should not call beginInlineImage")}beginImageData(){Nt("Should not call beginImageData")}paintFormXObjectBegin(t,i){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Yt(this.ctx),i)){const s=i[2]-i[0],n=i[3]-i[1];this.ctx.rect(i[0],i[1],s,n),this.current.updateRectMinMax(Yt(this.ctx),i),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;t.isolated||Zv("TODO: Support non-isolated groups."),t.knockout&&Ze("Knockout groups not supported.");const s=Yt(i);if(t.matrix&&i.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=ke.getAxialAlignedBoundingBox(t.bbox,Yt(i));const o=[0,0,i.canvas.width,i.canvas.height];n=ke.intersect(n,o)||[0,0,0,0];const r=Math.floor(n[0]),a=Math.floor(n[1]),l=Math.max(Math.ceil(n[2])-r,1),c=Math.max(Math.ceil(n[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(d,l,c),u=h.context;u.translate(-r,-a),u.transform(...s),t.smask?this.smaskStack.push({canvas:h.canvas,context:u,offsetX:r,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(i.setTransform(1,0,0,1,0,0),i.translate(r,a),i.save()),Eu(i,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=Yt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const o=ke.getAxialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],n);this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,i,s,n,o){if(E(this,ol,mb).call(this),Mp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const r=i[2]-i[0],a=i[3]-i[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=i[0],s[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=r,i[3]=a;const[l,c]=ke.singularValueDecompose2dScale(Yt(this.ctx)),{viewportScale:d}=this,h=Math.ceil(r*this.outputScaleX*d),u=Math.ceil(a*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,u);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,a*c),Mp(this.ctx)}else Mp(this.ctx),this.endPath(),this.ctx.rect(i[0],i[1],r,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new cx(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),E(this,ol,vb).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const i=t.count;t=this.getObject(t.data,t),t.count=i;const s=this.ctx,n=this.processingType3;if(n&&(n.compiled===void 0&&(n.compiled=oO(t)),n.compiled)){n.compiled(s);return}const o=this._createMaskCanvas(t),r=o.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(r,o.offsetX,o.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,s=0,n=0,o,r){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const l=Yt(a);a.transform(i,s,n,o,0,0);const c=this._createMaskCanvas(t);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let d=0,h=r.length;d<h;d+=2){const u=ke.transform(l,[i,s,n,o,r[d],r[d+1]]),[f,p]=ke.applyTransform([0,0],u);a.drawImage(c.canvas,f,p)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const i=this.ctx,s=this.current.fillColor,n=this.current.patternFill;for(const o of t){const{data:r,width:a,height:l,transform:c}=o,d=this.cachedCanvases.getCanvas("maskCanvas",a,l),h=d.context;h.save();const u=this.getObject(r,o);hx(h,u),h.globalCompositeOperation="source-in",h.fillStyle=n?s.getPattern(h,this,qo(i),cs.FILL):s,h.fillRect(0,0,a,l),h.restore(),i.save(),i.transform(...c),i.scale(1,-1),Dp(i,d.canvas,0,0,a,l,0,-1,1,1),i.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const i=this.getObject(t);if(!i){Ze("Dependent image isn't ready yet");return}this.paintInlineImageXObject(i)}paintImageXObjectRepeat(t,i,s,n){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){Ze("Dependent image isn't ready yet");return}const r=o.width,a=o.height,l=[];for(let c=0,d=n.length;c<d;c+=2)l.push({transform:[i,0,0,s,n[c],n[c+1]],x:0,y:0,w:r,h:a});this.paintInlineImageXObjectGroup(o,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:s,height:n}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,n),r=o.context;return r.filter=this.current.transferMaps,r.drawImage(i,0,0),r.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const i=t.width,s=t.height,n=this.ctx;if(this.save(),!is){const{filter:a}=n;a!=="none"&&a!==""&&(n.filter="none")}n.scale(1/i,-1/s);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const l=this.cachedCanvases.getCanvas("inlineImage",i,s).context;dx(l,t),o=this.applyTransferMapsToCanvas(l)}const r=this._scaleImage(o,qo(n));n.imageSmoothingEnabled=ux(Yt(n),t.interpolate),Dp(n,r.img,0,0,r.paintWidth,r.paintHeight,0,-s,i,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,i){if(!this.contentVisible)return;const s=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const o=t.width,r=t.height,l=this.cachedCanvases.getCanvas("inlineImage",o,r).context;dx(l,t),n=this.applyTransferMapsToCanvas(l)}for(const o of i)s.save(),s.transform(...o.transform),s.scale(1,-1),Dp(s,n,o.x,o.y,o.w,o.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,i){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(i||(this.pendingClip===gx?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Yt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,n)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:s,c:n,d:o}=this.ctx.getTransform();let r,a;if(s===0&&n===0){const l=Math.abs(i),c=Math.abs(o);if(l===c)if(t===0)r=a=1/l;else{const d=l*t;r=a=d<1?1/d:1}else if(t===0)r=1/l,a=1/c;else{const d=l*t,h=c*t;r=d<1?1/d:1,a=h<1?1/h:1}}else{const l=Math.abs(i*o-s*n),c=Math.hypot(i,s),d=Math.hypot(n,o);if(t===0)r=d/l,a=c/l;else{const h=t*l;r=d>h?d/h:1,a=c>h?c/h:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:i}=this,{lineWidth:s}=this.current,[n,o]=this.getScaleForStroking();if(i.lineWidth=s||1,n===1&&o===1){i.stroke();return}const r=i.getLineDash();if(t&&i.save(),i.scale(n,o),r.length>0){const a=Math.max(n,o);i.setLineDash(r.map(l=>l/a)),i.lineDashOffset/=a}i.stroke(),t&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};ol=new WeakSet,mb=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},vb=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}};let _d=f0;for(const e in Rn)_d.prototype[e]!==void 0&&(_d.prototype[Rn[e]]=_d.prototype[e]);var af,lf;class Pr{static get workerPort(){return g(this,af)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");x(this,af,t)}static get workerSrc(){return g(this,lf)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");x(this,lf,t)}}af=new WeakMap,lf=new WeakMap,F(Pr,af,null),F(Pr,lf,"");const Ip={DATA:1,ERROR:2},ci={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ds(e){switch(e instanceof Error||typeof e=="object"&&e!==null||Nt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new nd(e.message);case"MissingPDFException":return new sd(e.message);case"PasswordException":return new zw(e.message,e.code);case"UnexpectedResponseException":return new eC(e.message,e.status);case"UnknownErrorException":return new Ww(e.message,e.details);default:return new Ww(e.message,e.toString())}}var hh,pn,cF,dF,hF,sm;class Vu{constructor(t,i,s){F(this,pn);F(this,hh,new AbortController);this.sourceName=t,this.targetName=i,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",E(this,pn,cF).bind(this),{signal:g(this,hh).signal})}on(t,i){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=i}send(t,i,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},s)}sendWithPromise(t,i,s){const n=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[n]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:i},s)}catch(r){o.reject(r)}return o.promise}sendWithStream(t,i,s,n){const o=this.streamId++,r=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const d=Promise.withResolvers();return this.streamControllers[o]={controller:c,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:r,targetName:a,action:t,streamId:o,data:i,desiredSize:c.desiredSize},n),d.promise},pull:c=>{const d=Promise.withResolvers();return this.streamControllers[o].pullCall=d,l.postMessage({sourceName:r,targetName:a,stream:ci.PULL,streamId:o,desiredSize:c.desiredSize}),d.promise},cancel:c=>{wi(c instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[o].cancelCall=d,this.streamControllers[o].isClosed=!0,l.postMessage({sourceName:r,targetName:a,stream:ci.CANCEL,streamId:o,reason:Ds(c)}),d.promise}},s)}destroy(){var t;(t=g(this,hh))==null||t.abort(),x(this,hh,null)}}hh=new WeakMap,pn=new WeakSet,cF=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){E(this,pn,hF).call(this,t);return}if(t.callback){const s=t.callbackId,n=this.callbackCapabilities[s];if(!n)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Ip.DATA)n.resolve(t.data);else if(t.callback===Ip.ERROR)n.reject(Ds(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,n=t.sourceName,o=this.comObj;new Promise(function(r){r(i(t.data))}).then(function(r){o.postMessage({sourceName:s,targetName:n,callback:Ip.DATA,callbackId:t.callbackId,data:r})},function(r){o.postMessage({sourceName:s,targetName:n,callback:Ip.ERROR,callbackId:t.callbackId,reason:Ds(r)})});return}if(t.streamId){E(this,pn,dF).call(this,t);return}i(t.data)},dF=function(t){const i=t.streamId,s=this.sourceName,n=t.sourceName,o=this.comObj,r=this,a=this.actionHandler[t.action],l={enqueue(c,d=1,h){if(this.isCancelled)return;const u=this.desiredSize;this.desiredSize-=d,u>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:n,stream:ci.ENQUEUE,streamId:i,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:n,stream:ci.CLOSE,streamId:i}),delete r.streamSinks[i])},error(c){wi(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:n,stream:ci.ERROR,streamId:i,reason:Ds(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[i]=l,new Promise(function(c){c(a(t.data,l))}).then(function(){o.postMessage({sourceName:s,targetName:n,stream:ci.START_COMPLETE,streamId:i,success:!0})},function(c){o.postMessage({sourceName:s,targetName:n,stream:ci.START_COMPLETE,streamId:i,reason:Ds(c)})})},hF=function(t){const i=t.streamId,s=this.sourceName,n=t.sourceName,o=this.comObj,r=this.streamControllers[i],a=this.streamSinks[i];switch(t.stream){case ci.START_COMPLETE:t.success?r.startCall.resolve():r.startCall.reject(Ds(t.reason));break;case ci.PULL_COMPLETE:t.success?r.pullCall.resolve():r.pullCall.reject(Ds(t.reason));break;case ci.PULL:if(!a){o.postMessage({sourceName:s,targetName:n,stream:ci.PULL_COMPLETE,streamId:i,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,new Promise(function(l){var c;l((c=a.onPull)==null?void 0:c.call(a))}).then(function(){o.postMessage({sourceName:s,targetName:n,stream:ci.PULL_COMPLETE,streamId:i,success:!0})},function(l){o.postMessage({sourceName:s,targetName:n,stream:ci.PULL_COMPLETE,streamId:i,reason:Ds(l)})});break;case ci.ENQUEUE:if(wi(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case ci.CLOSE:if(wi(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),E(this,pn,sm).call(this,r,i);break;case ci.ERROR:wi(r,"error should have stream controller"),r.controller.error(Ds(t.reason)),E(this,pn,sm).call(this,r,i);break;case ci.CANCEL_COMPLETE:t.success?r.cancelCall.resolve():r.cancelCall.reject(Ds(t.reason)),E(this,pn,sm).call(this,r,i);break;case ci.CANCEL:if(!a)break;new Promise(function(l){var c;l((c=a.onCancel)==null?void 0:c.call(a,Ds(t.reason)))}).then(function(){o.postMessage({sourceName:s,targetName:n,stream:ci.CANCEL_COMPLETE,streamId:i,success:!0})},function(l){o.postMessage({sourceName:s,targetName:n,stream:ci.CANCEL_COMPLETE,streamId:i,reason:Ds(l)})}),a.sinkCapability.reject(Ds(t.reason)),a.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}},sm=async function(t,i){var s,n,o;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(n=t.pullCall)==null?void 0:n.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[i]};var Zl,cf;class cO{constructor({parsedData:t,rawData:i}){F(this,Zl);F(this,cf);x(this,Zl,t),x(this,cf,i)}getRaw(){return g(this,cf)}get(t){return g(this,Zl).get(t)??null}getAll(){return aS(g(this,Zl))}has(t){return g(this,Zl).has(t)}}Zl=new WeakMap,cf=new WeakMap;const yd=Symbol("INTERNAL");var df,hf,uf,uh;class dO{constructor(t,{name:i,intent:s,usage:n,rbGroups:o}){F(this,df,!1);F(this,hf,!1);F(this,uf,!1);F(this,uh,!0);x(this,df,!!(t&Vs.DISPLAY)),x(this,hf,!!(t&Vs.PRINT)),this.name=i,this.intent=s,this.usage=n,this.rbGroups=o}get visible(){if(g(this,uf))return g(this,uh);if(!g(this,uh))return!1;const{print:t,view:i}=this.usage;return g(this,df)?(i==null?void 0:i.viewState)!=="OFF":g(this,hf)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,i,s=!1){t!==yd&&Nt("Internal method `_setVisible` called."),x(this,uf,s),x(this,uh,i)}}df=new WeakMap,hf=new WeakMap,uf=new WeakMap,uh=new WeakMap;var Aa,Pt,gh,fh,gf,Cb;class hO{constructor(t,i=Vs.DISPLAY){F(this,gf);F(this,Aa,null);F(this,Pt,new Map);F(this,gh,null);F(this,fh,null);if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,x(this,fh,t.order);for(const s of t.groups)g(this,Pt).set(s.id,new dO(i,s));if(t.baseState==="OFF")for(const s of g(this,Pt).values())s._setVisible(yd,!1);for(const s of t.on)g(this,Pt).get(s)._setVisible(yd,!0);for(const s of t.off)g(this,Pt).get(s)._setVisible(yd,!1);x(this,gh,this.getHash())}}isVisible(t){if(g(this,Pt).size===0)return!0;if(!t)return Zv("Optional content group not defined."),!0;if(t.type==="OCG")return g(this,Pt).has(t.id)?g(this,Pt).get(t.id).visible:(Ze(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return E(this,gf,Cb).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!g(this,Pt).has(i))return Ze(`Optional content group not found: ${i}`),!0;if(g(this,Pt).get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!g(this,Pt).has(i))return Ze(`Optional content group not found: ${i}`),!0;if(!g(this,Pt).get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!g(this,Pt).has(i))return Ze(`Optional content group not found: ${i}`),!0;if(!g(this,Pt).get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!g(this,Pt).has(i))return Ze(`Optional content group not found: ${i}`),!0;if(g(this,Pt).get(i).visible)return!1}return!0}return Ze(`Unknown optional content policy ${t.policy}.`),!0}return Ze(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,s=!0){var o;const n=g(this,Pt).get(t);if(!n){Ze(`Optional content group not found: ${t}`);return}if(s&&i&&n.rbGroups.length)for(const r of n.rbGroups)for(const a of r)a!==t&&((o=g(this,Pt).get(a))==null||o._setVisible(yd,!1,!0));n._setVisible(yd,!!i,!0),x(this,Aa,null)}setOCGState({state:t,preserveRB:i}){let s;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":s=n;continue}const o=g(this,Pt).get(n);if(o)switch(s){case"ON":this.setVisibility(n,!0,i);break;case"OFF":this.setVisibility(n,!1,i);break;case"Toggle":this.setVisibility(n,!o.visible,i);break}}x(this,Aa,null)}get hasInitialVisibility(){return g(this,gh)===null||this.getHash()===g(this,gh)}getOrder(){return g(this,Pt).size?g(this,fh)?g(this,fh).slice():[...g(this,Pt).keys()]:null}getGroups(){return g(this,Pt).size>0?aS(g(this,Pt)):null}getGroup(t){return g(this,Pt).get(t)||null}getHash(){if(g(this,Aa)!==null)return g(this,Aa);const t=new JA;for(const[i,s]of g(this,Pt))t.update(`${i}:${s.visible}`);return x(this,Aa,t.hexdigest())}}Aa=new WeakMap,Pt=new WeakMap,gh=new WeakMap,fh=new WeakMap,gf=new WeakSet,Cb=function(t){const i=t.length;if(i<2)return!0;const s=t[0];for(let n=1;n<i;n++){const o=t[n];let r;if(Array.isArray(o))r=E(this,gf,Cb).call(this,o);else if(g(this,Pt).has(o))r=g(this,Pt).get(o).visible;else return Ze(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return s==="And"};class uO{constructor(t,{disableRange:i=!1,disableStream:s=!1}){wi(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:o,progressiveDone:r,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=a,(o==null?void 0:o.length)>0){const l=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!i,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),t.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:i}){const s=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const n=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});wi(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var i,s,n,o;t.total===void 0?(s=(i=this._rangeReaders[0])==null?void 0:i.onProgress)==null||s.call(i,{loaded:t.loaded}):(o=(n=this._fullRequestReader)==null?void 0:n.onProgress)==null||o.call(n,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const i=this._rangeReaders.indexOf(t);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){wi(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new gO(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new fO(this,t,i);return this._pdfDataRangeTransport.requestDataRange(t,i),this._rangeReaders.push(s),s}cancelAllRequests(t){var i;(i=this._fullRequestReader)==null||i.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class gO{constructor(t,i,s=!1,n=null){this._stream=t,this._done=s||!1,this._filename=dS(n)?n:null,this._queuedChunks=i||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class fO{constructor(t,i,s){this._stream=t,this._begin=i,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function pO(e){let t=!0,i=s("filename\\*","i").exec(e);if(i){i=i[1];let d=a(i);return d=unescape(d),d=l(d),d=c(d),o(d)}if(i=r(e),i){const d=c(i);return o(d)}if(i=s("filename","i").exec(e),i){i=i[1];let d=a(i);return d=c(d),o(d)}function s(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function n(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const u=new TextDecoder(d,{fatal:!0}),f=tC(h);h=u.decode(f),t=!1}catch{}}return h}function o(d){return t&&/[\x80-\xff]/.test(d)&&(d=n("utf-8",d),t&&(d=n("iso-8859-1",d))),d}function r(d){const h=[];let u;const f=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(u=f.exec(d))!==null;){let[,m,v,C]=u;if(m=parseInt(m,10),m in h){if(m===0)break;continue}h[m]=[v,C]}const p=[];for(let m=0;m<h.length&&m in h;++m){let[v,C]=h[m];C=a(C),v&&(C=unescape(C),m===0&&(C=l(C))),p.push(C)}return p.join("")}function a(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let u=0;u<h.length;++u){const f=h[u].indexOf('"');f!==-1&&(h[u]=h[u].slice(0,f),h.length=u+1),h[u]=h[u].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function l(d){const h=d.indexOf("'");if(h===-1)return d;const u=d.slice(0,h),p=d.slice(h+1).replace(/^[^']*'/,"");return n(u,p)}function c(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,u,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,v){return String.fromCharCode(parseInt(v,16))}),n(u,p);try{p=atob(p)}catch{}return n(u,p)})}return""}function pS(e,t){const i=new Headers;if(!e||!t||typeof t!="object")return i;for(const s in t){const n=t[s];n!==void 0&&i.append(s,n)}return i}function mS({responseHeaders:e,isHttp:t,rangeChunkSize:i,disableRange:s}){const n={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(e.get("Content-Length"),10);return!Number.isInteger(o)||(n.suggestedLength=o,o<=2*i)||s||!t||e.get("Accept-Ranges")!=="bytes"||(e.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function vS(e){const t=e.get("Content-Disposition");if(t){let i=pO(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(dS(i))return i}return null}function nC(e,t){return e===404||e===0&&t.startsWith("file:")?new sd('Missing PDF "'+t+'".'):new eC(`Unexpected server response (${e}) while retrieving PDF "${t}".`,e)}function uF(e){return e===200||e===206}function gF(e,t,i){return{method:"GET",headers:e,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function fF(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(Ze(`getArrayBuffer - unexpected data format: ${e}`),new Uint8Array(e).buffer)}class fx{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=pS(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return wi(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new mO(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new vO(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var i;(i=this._fullRequestReader)==null||i.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class mO{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const i=t.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;const s=new Headers(t.headers),n=i.url;fetch(n,gF(s,this._withCredentials,this._abortController)).then(o=>{if(!uF(o.status))throw nC(o.status,n);this._reader=o.body.getReader(),this._headersCapability.resolve();const r=o.headers,{allowRangeRequests:a,suggestedLength:l}=mS({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=vS(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new nd("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:fF(t),done:!1})}cancel(t){var i;(i=this._reader)==null||i.cancel(t),this._abortController.abort()}}class vO{constructor(t,i,s){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${i}-${s-1}`);const r=n.url;fetch(r,gF(o,this._withCredentials,this._abortController)).then(a=>{if(!uF(a.status))throw nC(a.status,r);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:fF(t),done:!1})}cancel(t){var i;(i=this._reader)==null||i.cancel(t),this._abortController.abort()}}const IC=200,kC=206;function CO(e){const t=e.response;return typeof t!="string"?t:tC(t).buffer}class wO{constructor({url:t,httpHeaders:i,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=pS(this.isHttp,i),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,i,s){const n={begin:t,end:i};for(const o in s)n[o]=s[o];return this.request(n)}requestFull(t){return this.request(t)}request(t){const i=new XMLHttpRequest,s=this.currXhrId++,n=this.pendingRequests[s]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const[o,r]of this.headers)i.setRequestHeader(o,r);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=kC):n.expectedStatus=IC,i.responseType="arraybuffer",t.onError&&(i.onerror=function(o){t.onError(i.status)}),i.onreadystatechange=this.onStateChange.bind(this,s),i.onprogress=this.onProgress.bind(this,s),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,i.send(null),s}onProgress(t,i){var n;const s=this.pendingRequests[t];s&&((n=s.onProgress)==null||n.call(s,i))}onStateChange(t,i){var l,c,d;const s=this.pendingRequests[t];if(!s)return;const n=s.xhr;if(n.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){(l=s.onError)==null||l.call(s,n.status);return}const o=n.status||IC;if(!(o===IC&&s.expectedStatus===kC)&&o!==s.expectedStatus){(c=s.onError)==null||c.call(s,n.status);return}const a=CO(n);if(o===kC){const h=n.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);s.onDone({begin:parseInt(u[1],10),chunk:a})}else a?s.onDone({begin:0,chunk:a}):(d=s.onError)==null||d.call(s,n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const i=this.pendingRequests[t].xhr;delete this.pendingRequests[t],i.abort()}}class bO{constructor(t){this._source=t,this._manager=new wO(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const i=this._rangeRequestReaders.indexOf(t);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return wi(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new yO(this._manager,this._source),this._fullRequestReader}getRangeReader(t,i){const s=new SO(this._manager,t,i);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var i;(i=this._fullRequestReader)==null||i.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class yO{constructor(t,i){this._manager=t;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=i.url,this._fullRequestId=t.requestFull(s),this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,i=this._manager.getRequestXhr(t),s=new Headers(i.getAllResponseHeaders().trim().split(/[\r\n]+/).map(r=>{const[a,...l]=r.split(": ");return[a,l.join(": ")]})),{allowRangeRequests:n,suggestedLength:o}=mS({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=vS(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=nC(t,this._url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var i;(i=this.onProgress)==null||i.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class SO{constructor(t,i,s){this._manager=t;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(i,s,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const i=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=nC(t,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var i;this.isStreamingSupported||(i=this.onProgress)==null||i.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const xO=/^[a-z][a-z0-9\-+.]+:/i;function RO(e){if(xO.test(e))return new URL(e);const t=Ja.get("url");return new URL(t.pathToFileURL(e))}function pF(e,t,i){return e.protocol==="http:"?Ja.get("http").request(e,{headers:t},i):Ja.get("https").request(e,{headers:t},i)}class EO{constructor(t){this.source=t,this.url=RO(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=pS(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return wi(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new PO(this):new AO(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=this.isFsUrl?new TO(this,t,i):new FO(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var i;(i=this._fullRequestReader)==null||i.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class mF{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=t.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new nd("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class vF{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class AO extends mF{constructor(t){super(t);const i=Object.fromEntries(t.headers),s=n=>{if(n.statusCode===404){const l=new sd(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(n);const o=new Headers(this._readableStream.headers),{allowRangeRequests:r,suggestedLength:a}=mS({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=a||this._contentLength,this._filename=vS(o)};this._request=pF(this._url,i,s),this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class FO extends vF{constructor(t,i,s){super(t);const n=Object.fromEntries(t.headers);n.Range=`bytes=${i}-${s-1}`;const o=r=>{if(r.statusCode===404){const a=new sd(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(r)};this._request=pF(this._url,n,o),this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class PO extends mF{constructor(t){super(t);const i=Ja.get("fs");i.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new sd(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class TO extends vF{constructor(t,i,s){super(t);const n=Ja.get("fs");this._setReadableStream(n.createReadStream(this._url,{start:i,end:s-1}))}}const DO=1e5,vs=30,MO=.8;var zR,Fa,Ss,ff,pf,ec,lr,mf,vf,tc,ph,mh,Pa,vh,Cf,Ch,ic,wf,bf,sc,nc,yf,Ta,wh,jr,CF,wF,wb,qs,nm,bb,bF,yF;const fi=class fi{constructor({textContentSource:t,container:i,viewport:s}){F(this,jr);F(this,Fa,Promise.withResolvers());F(this,Ss,null);F(this,ff,!1);F(this,pf,!!((zR=globalThis.FontInspector)!=null&&zR.enabled));F(this,ec,null);F(this,lr,null);F(this,mf,0);F(this,vf,0);F(this,tc,null);F(this,ph,null);F(this,mh,0);F(this,Pa,0);F(this,vh,Object.create(null));F(this,Cf,[]);F(this,Ch,null);F(this,ic,[]);F(this,wf,new WeakMap);F(this,bf,null);var l;if(t instanceof ReadableStream)x(this,Ch,t);else if(typeof t=="object")x(this,Ch,new ReadableStream({start(c){c.enqueue(t),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,Ss,x(this,ph,i)),x(this,Pa,s.scale*(globalThis.devicePixelRatio||1)),x(this,mh,s.rotation),x(this,lr,{div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:o,pageX:r,pageY:a}=s.rawDims;x(this,bf,[1,0,0,-1,-r,a+o]),x(this,vf,n),x(this,mf,o),E(l=fi,qs,bF).call(l),Wc(i,s),g(this,Fa).promise.finally(()=>{g(fi,wh).delete(this),x(this,lr,null),x(this,vh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=gs.platform;return ut(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{g(this,tc).read().then(({value:i,done:s})=>{if(s){g(this,Fa).resolve();return}g(this,ec)??x(this,ec,i.lang),Object.assign(g(this,vh),i.styles),E(this,jr,CF).call(this,i.items),t()},g(this,Fa).reject)};return x(this,tc,g(this,Ch).getReader()),g(fi,wh).add(this),t(),g(this,Fa).promise}update({viewport:t,onBefore:i=null}){var o;const s=t.scale*(globalThis.devicePixelRatio||1),n=t.rotation;if(n!==g(this,mh)&&(i==null||i(),x(this,mh,n),Wc(g(this,ph),{rotation:n})),s!==g(this,Pa)){i==null||i(),x(this,Pa,s);const r={div:null,properties:null,ctx:E(o=fi,qs,nm).call(o,g(this,ec))};for(const a of g(this,ic))r.properties=g(this,wf).get(a),r.div=a,E(this,jr,wb).call(this,r)}}cancel(){var i;const t=new nd("TextLayer task cancelled.");(i=g(this,tc))==null||i.cancel(t).catch(()=>{}),x(this,tc,null),g(this,Fa).reject(t)}get textDivs(){return g(this,ic)}get textContentItemsStr(){return g(this,Cf)}static cleanup(){if(!(g(this,wh).size>0)){g(this,sc).clear();for(const{canvas:t}of g(this,nc).values())t.remove();g(this,nc).clear()}}};Fa=new WeakMap,Ss=new WeakMap,ff=new WeakMap,pf=new WeakMap,ec=new WeakMap,lr=new WeakMap,mf=new WeakMap,vf=new WeakMap,tc=new WeakMap,ph=new WeakMap,mh=new WeakMap,Pa=new WeakMap,vh=new WeakMap,Cf=new WeakMap,Ch=new WeakMap,ic=new WeakMap,wf=new WeakMap,bf=new WeakMap,sc=new WeakMap,nc=new WeakMap,yf=new WeakMap,Ta=new WeakMap,wh=new WeakMap,jr=new WeakSet,CF=function(t){var n,o;if(g(this,ff))return;(o=g(this,lr)).ctx??(o.ctx=E(n=fi,qs,nm).call(n,g(this,ec)));const i=g(this,ic),s=g(this,Cf);for(const r of t){if(i.length>DO){Ze("Ignoring additional textDivs for performance reasons."),x(this,ff,!0);return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const a=g(this,Ss);x(this,Ss,document.createElement("span")),g(this,Ss).classList.add("markedContent"),r.id!==null&&g(this,Ss).setAttribute("id",`${r.id}`),a.append(g(this,Ss))}else r.type==="endMarkedContent"&&x(this,Ss,g(this,Ss).parentNode);continue}s.push(r.str),E(this,jr,wF).call(this,r)}},wF=function(t){var m;const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};g(this,ic).push(i);const n=ke.transform(g(this,bf),t.transform);let o=Math.atan2(n[1],n[0]);const r=g(this,vh)[t.fontName];r.vertical&&(o+=Math.PI/2);let a=g(this,pf)&&r.fontSubstitution||r.fontFamily;a=fi.fontFamilyMap.get(a)||a;const l=Math.hypot(n[2],n[3]),c=l*E(m=fi,qs,yF).call(m,a,g(this,ec));let d,h;o===0?(d=n[4],h=n[5]-c):(d=n[4]+c*Math.sin(o),h=n[5]-c*Math.cos(o));const u="calc(var(--scale-factor)*",f=i.style;g(this,Ss)===g(this,ph)?(f.left=`${(100*d/g(this,vf)).toFixed(2)}%`,f.top=`${(100*h/g(this,mf)).toFixed(2)}%`):(f.left=`${u}${d.toFixed(2)}px)`,f.top=`${u}${h.toFixed(2)}px)`),f.fontSize=`${u}${(g(fi,Ta)*l).toFixed(2)}px)`,f.fontFamily=a,s.fontSize=l,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,g(this,pf)&&(i.dataset.fontName=r.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const v=Math.abs(t.transform[0]),C=Math.abs(t.transform[3]);v!==C&&Math.max(v,C)/Math.min(v,C)>1.5&&(p=!0)}if(p&&(s.canvasWidth=r.vertical?t.height:t.width),g(this,wf).set(i,s),g(this,lr).div=i,g(this,lr).properties=s,E(this,jr,wb).call(this,g(this,lr)),s.hasText&&g(this,Ss).append(i),s.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),g(this,Ss).append(v)}},wb=function(t){var a;const{div:i,properties:s,ctx:n}=t,{style:o}=i;let r="";if(g(fi,Ta)>1&&(r=`scale(${1/g(fi,Ta)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=o,{canvasWidth:c,fontSize:d}=s;E(a=fi,qs,bb).call(a,n,d*g(this,Pa),l);const{width:h}=n.measureText(i.textContent);h>0&&(r=`scaleX(${c*g(this,Pa)/h}) ${r}`)}s.angle!==0&&(r=`rotate(${s.angle}deg) ${r}`),r.length>0&&(o.transform=r)},qs=new WeakSet,nm=function(t=null){let i=g(this,nc).get(t||(t=""));if(!i){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),i=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),g(this,nc).set(t,i),g(this,yf).set(i,{size:0,family:""})}return i},bb=function(t,i,s){const n=g(this,yf).get(t);i===n.size&&s===n.family||(t.font=`${i}px ${s}`,n.size=i,n.family=s)},bF=function(){if(g(this,Ta)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),x(this,Ta,t.getBoundingClientRect().height),t.remove()},yF=function(t,i){const s=g(this,sc).get(t);if(s)return s;const n=E(this,qs,nm).call(this,i);n.canvas.width=n.canvas.height=vs,E(this,qs,bb).call(this,n,vs,t);const o=n.measureText("");let r=o.fontBoundingBoxAscent,a=Math.abs(o.fontBoundingBoxDescent);if(r){const d=r/(r+a);return g(this,sc).set(t,d),n.canvas.width=n.canvas.height=0,d}n.strokeStyle="red",n.clearRect(0,0,vs,vs),n.strokeText("g",0,0);let l=n.getImageData(0,0,vs,vs).data;a=0;for(let d=l.length-1-3;d>=0;d-=4)if(l[d]>0){a=Math.ceil(d/4/vs);break}n.clearRect(0,0,vs,vs),n.strokeText("A",0,vs),l=n.getImageData(0,0,vs,vs).data,r=0;for(let d=0,h=l.length;d<h;d+=4)if(l[d]>0){r=vs-Math.floor(d/4/vs);break}n.canvas.width=n.canvas.height=0;const c=r?r/(r+a):MO;return g(this,sc).set(t,c),c},F(fi,qs),F(fi,sc,new Map),F(fi,nc,new Map),F(fi,yf,new WeakMap),F(fi,Ta,null),F(fi,wh,new Set);let yg=fi;class Sg{static textContent(t){const i=[],s={items:i,styles:Object.create(null)};function n(o){var l;if(!o)return;let r=null;const a=o.name;if(a==="#text")r=o.value;else if(Sg.shouldBuildText(a))(l=o==null?void 0:o.attributes)!=null&&l.textContent?r=o.attributes.textContent:o.value&&(r=o.value);else return;if(r!==null&&i.push({str:r}),!!o.children)for(const c of o.children)n(c)}return n(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const IO=65536,kO=100,_O=5e3,LO=is?KL:$L,OO=is?qL:sF,NO=is?jL:UL,HO=is?YL:aF;function GO(e={}){typeof e=="string"||e instanceof URL?e={url:e}:(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const t=new yb,{docId:i}=t,s=e.url?BO(e.url):null,n=e.data?VO(e.data):null,o=e.httpHeaders||null,r=e.withCredentials===!0,a=e.password??null,l=e.range instanceof SF?e.range:null,c=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:IO;let d=e.worker instanceof Ld?e.worker:null;const h=e.verbosity,u=typeof e.docBaseUrl=="string"&&!sC(e.docBaseUrl)?e.docBaseUrl:null,f=typeof e.cMapUrl=="string"?e.cMapUrl:null,p=e.cMapPacked!==!1,m=e.CMapReaderFactory||OO,v=typeof e.standardFontDataUrl=="string"?e.standardFontDataUrl:null,C=e.StandardFontDataFactory||HO,w=e.stopAtErrors!==!0,S=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,y=e.isEvalSupported!==!1,R=typeof e.isOffscreenCanvasSupported=="boolean"?e.isOffscreenCanvasSupported:!is,A=typeof e.isChrome=="boolean"?e.isChrome:!gs.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),P=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,T=typeof e.disableFontFace=="boolean"?e.disableFontFace:is,M=e.fontExtraProperties===!0,N=e.enableXfa===!0,_=e.ownerDocument||globalThis.document,L=e.disableRange===!0,z=e.disableStream===!0,q=e.disableAutoFetch===!0,B=e.pdfBug===!0,Z=e.CanvasFactory||LO,ee=e.FilterFactory||NO,Y=e.enableHWA===!0,ye=l?l.length:e.length??NaN,De=typeof e.useSystemFonts=="boolean"?e.useSystemFonts:!is&&!T,Pe=typeof e.useWorkerFetch=="boolean"?e.useWorkerFetch:m===sF&&C===aF&&f&&v&&_u(f,document.baseURI)&&_u(v,document.baseURI);e.canvasFactory&&ix("`canvasFactory`-instance option, please use `CanvasFactory` instead."),e.filterFactory&&ix("`filterFactory`-instance option, please use `FilterFactory` instead.");const Q=null;yL(h);const te={canvasFactory:new Z({ownerDocument:_,enableHWA:Y}),filterFactory:new ee({docId:i,ownerDocument:_}),cMapReaderFactory:Pe?null:new m({baseUrl:f,isCompressed:p}),standardFontDataFactory:Pe?null:new C({baseUrl:v})};if(!d){const U={verbosity:h,port:Pr.workerPort};d=U.port?Ld.fromPort(U):new Ld(U),t._worker=d}const ie={docId:i,apiVersion:"4.8.69",data:n,password:a,disableAutoFetch:q,rangeChunkSize:c,length:ye,docBaseUrl:u,enableXfa:N,evaluatorOptions:{maxImageSize:S,disableFontFace:T,ignoreErrors:w,isEvalSupported:y,isOffscreenCanvasSupported:R,isChrome:A,canvasMaxAreaInBytes:P,fontExtraProperties:M,useSystemFonts:De,cMapUrl:Pe?f:null,standardFontDataUrl:Pe?v:null}},ae={disableFontFace:T,fontExtraProperties:M,ownerDocument:_,pdfBug:B,styleElement:Q,loadingParams:{disableAutoFetch:q,enableXfa:N}};return d.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const U=d.messageHandler.sendWithPromise("GetDocRequest",ie,n?[n.buffer]:null);let oe;if(l)oe=new uO(l,{disableRange:L,disableStream:z});else if(!n){if(!s)throw new Error("getDocument - no `url` parameter provided.");let Ae;is?Ae=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&_u(s)?fx:EO:Ae=_u(s)?fx:bO,oe=new Ae({url:s,length:ye,httpHeaders:o,withCredentials:r,rangeChunkSize:c,disableRange:L,disableStream:z})}return U.then(Ae=>{if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Ce=new Vu(i,Ae,d.port),Qe=new UO(Ce,t,oe,ae,te);t._transport=Qe,Ce.send("Ready",null)})}).catch(t._capability.reject),t}function BO(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(is&&typeof e=="string")return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function VO(e){if(is&&typeof Buffer<"u"&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if(typeof e=="string")return tC(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||typeof e=="object"&&!isNaN(e==null?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function px(e){return typeof e=="object"&&Number.isInteger(e==null?void 0:e.num)&&e.num>=0&&Number.isInteger(e==null?void 0:e.gen)&&e.gen>=0}var Dv;const Mv=class Mv{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${os(Mv,Dv)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,i,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((i=this._transport)==null?void 0:i.destroy())}catch(n){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,n}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Dv=new WeakMap,F(Mv,Dv,0);let yb=Mv;class SF{constructor(t,i,s=!1,n=null){this.length=t,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,i){for(const s of this._rangeListeners)s(t,i)}onDataProgress(t,i){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,i)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const i of this._progressiveReadListeners)i(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,i){Nt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class zO{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ut(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Da,cr,un,Sd,om;class WO{constructor(t,i,s,n=!1){F(this,un);F(this,Da,null);F(this,cr,!1);this._pageIndex=t,this._pageInfo=i,this._transport=s,this._stats=n?new tx:null,this._pdfBug=n,this.commonObjs=s.commonObjs,this.objs=new xF,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:s=0,offsetY:n=0,dontFlip:o=!1}={}){return new dp({viewBox:this.view,scale:t,rotation:i,offsetX:s,offsetY:n,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ut(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:i,intent:s="display",annotationMode:n=da.ENABLE,transform:o=null,background:r=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:d=null,isEditing:h=!1}){var y,R;(y=this._stats)==null||y.time("Overall");const u=this._transport.getRenderingIntent(s,n,d,h),{renderingIntent:f,cacheKey:p}=u;x(this,cr,!1),E(this,un,om).call(this),a||(a=this._transport.getOptionalContentConfig(f));let m=this._intentStates.get(p);m||(m=Object.create(null),this._intentStates.set(p,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const v=!!(f&Vs.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(u));const C=A=>{var P;m.renderTasks.delete(w),(this._maybeCleanupAfterRender||v)&&x(this,cr,!0),E(this,un,Sd).call(this,!v),A?(w.capability.reject(A),this._abortOperatorList({intentState:m,reason:A instanceof Error?A:new Error(A)})):w.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new xb({callback:C,params:{canvasContext:t,viewport:i,transform:o,background:r},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:c});(m.renderTasks||(m.renderTasks=new Set)).add(w);const S=w.task;return Promise.all([m.displayReadyCapability.promise,a]).then(([A,P])=>{var T;if(this.destroyed){C();return}if((T=this._stats)==null||T.time("Rendering"),!(P.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:A,optionalContentConfig:P}),w.operatorListChanged()}).catch(C),S}getOperatorList({intent:t="display",annotationMode:i=da.ENABLE,printAnnotationStorage:s=null,isEditing:n=!1}={}){var c;function o(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const r=this._transport.getRenderingIntent(t,i,s,n,!0);let a=this._intentStates.get(r.cacheKey);a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=o,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(r)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Sg.textContent(s));const i=this.streamTextContent(t);return new Promise(function(s,n){function o(){r.read().then(function({value:l,done:c}){if(c){s(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),o()},n)}const r=i.getReader(),a={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const s of i.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),x(this,cr,!1),E(this,un,om).call(this),Promise.all(t)}cleanup(t=!1){x(this,cr,!0);const i=E(this,un,Sd).call(this,!1);return t&&i&&this._stats&&(this._stats=new tx),i}_startRenderPage(t,i){var n,o;const s=this._intentStates.get(i);s&&((n=this._stats)==null||n.timeEnd("Page Request"),(o=s.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,i){for(let s=0,n=t.length;s<n;s++)i.operatorList.fnArray.push(t.fnArray[s]),i.operatorList.argsArray.push(t.argsArray[s]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const s of i.renderTasks)s.operatorListChanged();t.lastChunk&&E(this,un,Sd).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:s,modifiedIds:n}){const{map:o,transfer:r}=s,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:o,modifiedIds:n},r).getReader(),c=this._intentStates.get(i);c.streamReader=l;const d=()=>{l.read().then(({value:h,done:u})=>{if(u){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),d())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const u of c.renderTasks)u.operatorListChanged();E(this,un,Sd).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:t,reason:i,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(i instanceof cS){let n=kO;i.extraDelay>0&&i.extraDelay<1e3&&(n+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},n);return}}if(t.streamReader.cancel(new nd(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[n,o]of this._intentStates)if(o===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}Da=new WeakMap,cr=new WeakMap,un=new WeakSet,Sd=function(t=!1){if(E(this,un,om).call(this),!g(this,cr)||this.destroyed)return!1;if(t)return x(this,Da,setTimeout(()=>{x(this,Da,null),E(this,un,Sd).call(this,!1)},_O)),!1;for(const{renderTasks:i,operatorList:s}of this._intentStates.values())if(i.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,cr,!1),!0},om=function(){g(this,Da)&&(clearTimeout(g(this,Da)),x(this,Da,null))};var dr,Iv;class $O{constructor(){F(this,dr,new Map);F(this,Iv,Promise.resolve())}postMessage(t,i){const s={data:structuredClone(t,i?{transfer:i}:null)};g(this,Iv).then(()=>{for(const[n]of g(this,dr))n.call(this,s)})}addEventListener(t,i,s=null){let n=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:o}=s;if(o.aborted){Ze("LoopbackPort - cannot use an `aborted` signal.");return}const r=()=>this.removeEventListener(t,i);n=()=>o.removeEventListener("abort",r),o.addEventListener("abort",r)}g(this,dr).set(i,n)}removeEventListener(t,i){const s=g(this,dr).get(i);s==null||s(),g(this,dr).delete(i)}terminate(){for(const[,t]of g(this,dr))t==null||t();g(this,dr).clear()}}dr=new WeakMap,Iv=new WeakMap;var kv,oc,rc,bh,rm,yh,am;const Gt=class Gt{constructor({name:t=null,port:i=null,verbosity:s=SL()}={}){F(this,bh);var n;if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,i){if((n=g(Gt,rc))!=null&&n.has(i))throw new Error("Cannot use more than one PDFWorker per port.");(g(Gt,rc)||x(Gt,rc,new WeakMap)).set(i,this),this._initializeFromPort(i);return}this._initialize()}get promise(){return is?Promise.all([Ja.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Vu("main","worker",t),this._messageHandler.on("ready",function(){}),E(this,bh,rm).call(this)}_initialize(){if(g(Gt,oc)||g(Gt,yh,am)){this._setupFakeWorker();return}let{workerSrc:t}=Gt;try{Gt._isSameOrigin(window.location.href,t)||(t=Gt._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),s=new Vu("main","worker",i),n=()=>{o.abort(),s.destroy(),i.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;i.addEventListener("error",()=>{this._webWorker||n()},{signal:o.signal}),s.on("test",a=>{if(o.abort(),this.destroyed||!a){n();return}this._messageHandler=s,this._port=i,this._webWorker=i,E(this,bh,rm).call(this)}),s.on("ready",a=>{if(o.abort(),this.destroyed){n();return}try{r()}catch{this._setupFakeWorker()}});const r=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};r();return}catch{Zv("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){g(Gt,oc)||(Ze("Setting up fake worker."),x(Gt,oc,!0)),Gt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const i=new $O;this._port=i;const s=`fake${os(Gt,kv)._++}`,n=new Vu(s+"_worker",s,i);t.setup(n,i),this._messageHandler=new Vu(s,s+"_worker",i),E(this,bh,rm).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=g(Gt,rc))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var s;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const i=(s=g(this,rc))==null?void 0:s.get(t.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new Gt(t)}static get workerSrc(){if(Pr.workerSrc)return Pr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ut(this,"_setupFakeWorkerGlobal",(async()=>g(this,yh,am)?g(this,yh,am):(await import(this.workerSrc)).WorkerMessageHandler)())}};kv=new WeakMap,oc=new WeakMap,rc=new WeakMap,bh=new WeakSet,rm=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},yh=new WeakSet,am=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},F(Gt,yh),F(Gt,kv,0),F(Gt,oc,!1),F(Gt,rc),is&&(x(Gt,oc,!0),Pr.workerSrc||(Pr.workerSrc="./pdf.worker.mjs")),Gt._isSameOrigin=(t,i)=>{let s;try{if(s=new URL(t),!s.origin||s.origin==="null")return!1}catch{return!1}const n=new URL(i,s);return s.origin===n.origin},Gt._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))};let Ld=Gt;var hr,yo,Sh,xh,So,ac,zu;class UO{constructor(t,i,s,n,o){F(this,ac);F(this,hr,new Map);F(this,yo,new Map);F(this,Sh,new Map);F(this,xh,new Map);F(this,So,null);this.messageHandler=t,this.loadingTask=i,this.commonObjs=new xF,this.fontLoader=new zL({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ut(this,"annotationStorage",new gS)}getRenderingIntent(t,i=da.ENABLE,s=null,n=!1,o=!1){let r=Vs.DISPLAY,a=db;switch(t){case"any":r=Vs.ANY;break;case"display":break;case"print":r=Vs.PRINT;break;default:Ze(`getRenderingIntent - invalid intent: ${t}`)}const l=r&Vs.PRINT&&s instanceof eF?s:this.annotationStorage;switch(i){case da.DISABLE:r+=Vs.ANNOTATIONS_DISABLE;break;case da.ENABLE:break;case da.ENABLE_FORMS:r+=Vs.ANNOTATIONS_FORMS;break;case da.ENABLE_STORAGE:r+=Vs.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Ze(`getRenderingIntent - invalid annotationMode: ${i}`)}n&&(r+=Vs.IS_EDITING),o&&(r+=Vs.OPLIST);const{ids:c,hash:d}=l.modifiedIds,h=[r,a.hash,d];return{renderingIntent:r,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=g(this,So))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of g(this,yo).values())t.push(n._destroy());g(this,yo).clear(),g(this,Sh).clear(),g(this,xh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{var n;this.commonObjs.clear(),this.fontLoader.clear(),g(this,hr).clear(),this.filterFactory.destroy(),yg.cleanup(),(n=this._networkStream)==null||n.cancelAllRequests(new nd("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(s,n)=>{wi(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},n.onPull=()=>{this._fullReader.read().then(function({value:o,done:r}){if(r){n.close();return}wi(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{n.error(o)})},n.onCancel=o=>{this._fullReader.cancel(o),n.ready.catch(r=>{if(!this.destroyed)throw r})}}),t.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:o,contentLength:r}=this._fullReader;return(!n||!o)&&(this._lastProgress&&((a=i.onProgress)==null||a.call(i,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=i.onProgress)==null||c.call(i,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:n,isRangeSupported:o,contentLength:r}}),t.on("GetRangeReader",(s,n)=>{wi(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){n.close();return}n.onPull=()=>{o.read().then(function({value:r,done:a}){if(a){n.close();return}wi(r instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{o.cancel(r),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,i._capability.resolve(new zO(s,this))}),t.on("DocException",function(s){let n;switch(s.name){case"PasswordException":n=new zw(s.message,s.code);break;case"InvalidPDFException":n=new AA(s.message);break;case"MissingPDFException":n=new sd(s.message);break;case"UnexpectedResponseException":n=new eC(s.message,s.status);break;case"UnknownErrorException":n=new Ww(s.message,s.details);break;default:Nt("DocException - expected a valid Error.")}i._capability.reject(n)}),t.on("PasswordRequest",s=>{if(x(this,So,Promise.withResolvers()),i.onPassword){const n=o=>{o instanceof Error?g(this,So).reject(o):g(this,So).resolve({password:o})};try{i.onPassword(n,s.code)}catch(o){g(this,So).reject(o)}}else g(this,So).reject(new zw(s.message,s.code));return g(this,So).promise}),t.on("DataLoaded",s=>{var n;(n=i.onProgress)==null||n.call(i,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;g(this,yo).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,n,o])=>{var r;if(this.destroyed||this.commonObjs.has(s))return null;switch(n){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:c}=this._params;if("error"in o){const f=o.error;Ze(`Error during font loading: ${f}`),this.commonObjs.resolve(s,f);break}const d=c&&((r=globalThis.FontInspector)!=null&&r.enabled)?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,h=new WL(o,{disableFontFace:a,inspectFont:d});this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!l&&h.data&&(h.data=null),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:u}=o;wi(u,"The imageRef must be defined.");for(const f of g(this,yo).values())for(const[,p]of f.objs)if((p==null?void 0:p.ref)===u)return p.dataLen?(this.commonObjs.resolve(s,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([s,n,o,r])=>{var l;if(this.destroyed)return;const a=g(this,yo).get(n);if(!a.objs.has(s)){if(a._intentStates.size===0){(l=r==null?void 0:r.bitmap)==null||l.close();return}switch(o){case"Image":a.objs.resolve(s,r),(r==null?void 0:r.dataLen)>vL&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(s,r);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{var n;this.destroyed||(n=i.onProgress)==null||n.call(i,{loaded:s.loaded,total:s.total})}),t.on("FetchBuiltInCMap",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(s)}),t.on("FetchStandardFontData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&Ze("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=t-1,s=g(this,Sh).get(i);if(s)return s;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&g(this,xh).set(o.refStr,t);const r=new WO(i,o,this,this._params.pdfBug);return g(this,yo).set(i,r),r});return g(this,Sh).set(i,n),n}getPageIndex(t){return px(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:i})}getFieldObjects(){return E(this,ac,zu).call(this,"GetFieldObjects")}hasJSActions(){return E(this,ac,zu).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return E(this,ac,zu).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return E(this,ac,zu).call(this,"GetOptionalContentConfig").then(i=>new hO(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=g(this,hr).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,null).then(n=>{var o,r;return{info:n[0],metadata:n[1]?new cO(n[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((r=this._fullReader)==null?void 0:r.contentLength)??null}});return g(this,hr).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of g(this,yo).values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),g(this,hr).clear(),this.filterFactory.destroy(!0),yg.cleanup()}}cachedPageNumber(t){if(!px(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return g(this,xh).get(i)??null}}hr=new WeakMap,yo=new WeakMap,Sh=new WeakMap,xh=new WeakMap,So=new WeakMap,ac=new WeakSet,zu=function(t,i=null){const s=g(this,hr).get(t);if(s)return s;const n=this.messageHandler.sendWithPromise(t,i);return g(this,hr).set(t,n),n};const kp=Symbol("INITIAL_DATA");var Mn,Sf,Sb;class xF{constructor(){F(this,Sf);F(this,Mn,Object.create(null))}get(t,i=null){if(i){const n=E(this,Sf,Sb).call(this,t);return n.promise.then(()=>i(n.data)),null}const s=g(this,Mn)[t];if(!s||s.data===kp)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const i=g(this,Mn)[t];return!!i&&i.data!==kp}resolve(t,i=null){const s=E(this,Sf,Sb).call(this,t);s.data=i,s.resolve()}clear(){var t;for(const i in g(this,Mn)){const{data:s}=g(this,Mn)[i];(t=s==null?void 0:s.bitmap)==null||t.close()}x(this,Mn,Object.create(null))}*[Symbol.iterator](){for(const t in g(this,Mn)){const{data:i}=g(this,Mn)[t];i!==kp&&(yield[t,i])}}}Mn=new WeakMap,Sf=new WeakSet,Sb=function(t){var i;return(i=g(this,Mn))[t]||(i[t]={...Promise.withResolvers(),data:kp})};var Ma;class jO{constructor(t){F(this,Ma,null);x(this,Ma,t),this.onContinue=null}get promise(){return g(this,Ma).capability.promise}cancel(t=0){g(this,Ma).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=g(this,Ma).operatorList;if(!t)return!1;const{annotationCanvasMap:i}=g(this,Ma);return t.form||t.canvas&&(i==null?void 0:i.size)>0}}Ma=new WeakMap;var Ia,lc;const Rl=class Rl{constructor({callback:t,params:i,objs:s,commonObjs:n,annotationCanvasMap:o,operatorList:r,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:u=null}){F(this,Ia,null);this.callback=t,this.params=i,this.objs=s,this.commonObjs=n,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new jO(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){var a,l;if(this.cancelled)return;if(this._canvas){if(g(Rl,lc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");g(Rl,lc).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:n,transform:o,background:r}=this.params;this.gfx=new _d(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:n,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(t=null,i=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),g(this,Ia)&&(window.cancelAnimationFrame(g(this,Ia)),x(this,Ia,null)),g(Rl,lc).delete(this._canvas),this.callback(t||new cS(`Rendering cancelled, page ${this._pageIndex+1}`,i))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,Ia,window.requestAnimationFrame(()=>{x(this,Ia,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),g(Rl,lc).delete(this._canvas),this.callback())))}};Ia=new WeakMap,lc=new WeakMap,F(Rl,lc,new WeakSet);let xb=Rl;const KO="4.8.69",qO="3634dab10";function mx(e){return Math.floor(Math.max(0,Math.min(1,e))*255).toString(16).padStart(2,"0")}function Au(e){return Math.max(0,Math.min(255,255*e))}class vx{static CMYK_G([t,i,s,n]){return["G",1-Math.min(1,.3*t+.59*s+.11*i+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Au(t),[t,t,t]}static G_HTML([t]){const i=mx(t);return`#${i}${i}${i}`}static RGB_G([t,i,s]){return["G",.3*t+.59*i+.11*s]}static RGB_rgb(t){return t.map(Au)}static RGB_HTML(t){return`#${t.map(mx).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,s,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,s+n),1-Math.min(1,i+n)]}static CMYK_rgb([t,i,s,n]){return[Au(1-Math.min(1,t+n)),Au(1-Math.min(1,s+n)),Au(1-Math.min(1,i+n))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,s]){const n=1-t,o=1-i,r=1-s,a=Math.min(n,o,r);return["CMYK",n,o,r,a]}}class YO{create(t,i,s=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),s||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${i}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${i}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Nt("Abstract method `_createSVG` called.")}}class CS extends YO{_createSVG(t){return document.createElementNS(Xo,t)}}class RF{static setupStorage(t,i,s,n,o){const r=n.getValue(i,{value:null});switch(s.name){case"textarea":if(r.value!==null&&(t.textContent=r.value),o==="print")break;t.addEventListener("input",a=>{n.setValue(i,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(r.value===s.attributes.xfaOn?t.setAttribute("checked",!0):r.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",a=>{n.setValue(i,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(r.value!==null&&t.setAttribute("value",r.value),o==="print")break;t.addEventListener("input",a=>{n.setValue(i,{value:a.target.value})})}break;case"select":if(r.value!==null){t.setAttribute("value",r.value);for(const a of s.children)a.attributes.value===r.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;n.setValue(i,{value:c})});break}}static setAttributes({html:t,element:i,storage:s=null,intent:n,linkService:o}){const{attributes:r}=i,a=t instanceof HTMLAnchorElement;r.type==="radio"&&(r.name=`${r.name}-${n}`);for(const[l,c]of Object.entries(r))if(c!=null)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,c)}a&&o.addLinkAttributes(t,r.href,r.newWindow),s&&r.dataId&&this.setupStorage(t,r.dataId,i,s)}static render(t){var h,u;const i=t.annotationStorage,s=t.linkService,n=t.xfaHtml,o=t.intent||"display",r=document.createElement(n.name);n.attributes&&this.setAttributes({html:r,element:n,intent:o,linkService:s});const a=o!=="richText",l=t.div;if(l.append(r),t.viewport){const f=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=f}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(n.children.length===0){if(n.value){const f=document.createTextNode(n.value);r.append(f),a&&Sg.shouldBuildText(n.name)&&c.push(f)}return{textDivs:c}}const d=[[n,-1,r]];for(;d.length>0;){const[f,p,m]=d.at(-1);if(p+1===f.children.length){d.pop();continue}const v=f.children[++d.at(-1)[1]];if(v===null)continue;const{name:C}=v;if(C==="#text"){const S=document.createTextNode(v.value);c.push(S),m.append(S);continue}const w=(h=v==null?void 0:v.attributes)!=null&&h.xmlns?document.createElementNS(v.attributes.xmlns,C):document.createElement(C);if(m.append(w),v.attributes&&this.setAttributes({html:w,element:v,storage:i,intent:o,linkService:s}),((u=v.children)==null?void 0:u.length)>0)d.push([v,-1,w]);else if(v.value){const S=document.createTextNode(v.value);a&&Sg.shouldBuildText(C)&&c.push(S),w.append(S)}}for(const f of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const up=1e3,XO=9,Uc=new WeakSet;function _r(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class QO{static create(t){switch(t.data.annotationType){case gi.LINK:return new EF(t);case gi.TEXT:return new JO(t);case gi.WIDGET:switch(t.data.fieldType){case"Tx":return new ZO(t);case"Btn":return t.data.radioButton?new PF(t):t.data.checkBox?new t2(t):new i2(t);case"Ch":return new s2(t);case"Sig":return new e2(t)}return new od(t);case gi.POPUP:return new Eb(t);case gi.FREETEXT:return new kF(t);case gi.LINE:return new o2(t);case gi.SQUARE:return new r2(t);case gi.CIRCLE:return new a2(t);case gi.POLYLINE:return new _F(t);case gi.CARET:return new c2(t);case gi.INK:return new wS(t);case gi.POLYGON:return new l2(t);case gi.HIGHLIGHT:return new LF(t);case gi.UNDERLINE:return new d2(t);case gi.SQUIGGLY:return new h2(t);case gi.STRIKEOUT:return new u2(t);case gi.STAMP:return new OF(t);case gi.FILEATTACHMENT:return new g2(t);default:return new ai(t)}}}var cc,Rh,Eh,xf,Rb;const p0=class p0{constructor(t,{isRenderable:i=!1,ignoreBorder:s=!1,createQuadrilaterals:n=!1}={}){F(this,xf);F(this,cc,null);F(this,Rh,!1);F(this,Eh,null);this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,i&&(this.container=this._createContainer(s)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:i,richText:s}){return!!(t!=null&&t.str||i!=null&&i.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return p0._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;g(this,cc)||x(this,cc,{rect:this.data.rect.slice(0)});const{rect:i}=t;i&&E(this,xf,Rb).call(this,i),(s=g(this,Eh))==null||s.popup.updateEdited(t)}resetEdited(){var t;g(this,cc)&&(E(this,xf,Rb).call(this,g(this,cc).rect),(t=g(this,Eh))==null||t.popup.resetEdited(),x(this,cc,null))}_createContainer(t){const{data:i,parent:{page:s,viewport:n}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",i.id),this instanceof od||(o.tabIndex=up);const{style:r}=o;if(r.zIndex=this.parent.zIndex++,i.alternativeText&&(o.title=i.alternativeText),i.noRotate&&o.classList.add("norotate"),!i.rect||this instanceof Eb){const{rotation:m}=i;return!i.hasOwnCanvas&&m!==0&&this.setRotation(m,o),o}const{width:a,height:l}=_r(i.rect);if(!t&&i.borderStyle.width>0){r.borderWidth=`${i.borderStyle.width}px`;const m=i.borderStyle.horizontalCornerRadius,v=i.borderStyle.verticalCornerRadius;if(m>0||v>0){const w=`calc(${m}px * var(--scale-factor)) / calc(${v}px * var(--scale-factor))`;r.borderRadius=w}else if(this instanceof PF){const w=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;r.borderRadius=w}switch(i.borderStyle.style){case Ru.SOLID:r.borderStyle="solid";break;case Ru.DASHED:r.borderStyle="dashed";break;case Ru.BEVELED:Ze("Unimplemented border style: beveled");break;case Ru.INSET:Ze("Unimplemented border style: inset");break;case Ru.UNDERLINE:r.borderBottomStyle="solid";break}const C=i.borderColor||null;C?(x(this,Rh,!0),r.borderColor=ke.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):r.borderWidth=0}const c=ke.normalizeRect([i.rect[0],s.view[3]-i.rect[1]+s.view[1],i.rect[2],s.view[3]-i.rect[3]+s.view[1]]),{pageWidth:d,pageHeight:h,pageX:u,pageY:f}=n.rawDims;r.left=`${100*(c[0]-u)/d}%`,r.top=`${100*(c[1]-f)/h}%`;const{rotation:p}=i;return i.hasOwnCanvas||p===0?(r.width=`${100*a/d}%`,r.height=`${100*l/h}%`):this.setRotation(p,o),o}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:n}=this.parent.viewport.rawDims,{width:o,height:r}=_r(this.data.rect);let a,l;t%180===0?(a=100*o/s,l=100*r/n):(a=100*r/s,l=100*o/n),i.style.width=`${a}%`,i.style.height=`${l}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,s,n)=>{const o=n.detail[i],r=o[0],a=o.slice(1);n.target.style[s]=vx[`${r}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:vx[`${r}_rgb`](a)})};return ut(this,"_commonActions",{display:i=>{const{display:s}=i.detail,n=s%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:s===1||s===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:s}=i.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const s=i.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,i){const s=this._commonActions;for(const n of Object.keys(i.detail)){const o=t[n]||s[n];o==null||o(i)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const s=this._commonActions;for(const[n,o]of Object.entries(i)){const r=s[n];if(r){const a={detail:{[n]:o},target:t};r(a),delete i[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,s,n,o]=this.data.rect.map(m=>Math.fround(m));if(t.length===8){const[m,v,C,w]=t.subarray(2,6);if(n===m&&o===v&&i===C&&s===w)return}const{style:r}=this.container;let a;if(g(this,Rh)){const{borderColor:m,borderWidth:v}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const l=n-i,c=o-s,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const u=d.createElement("defs");h.append(u);const f=d.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),u.append(f);for(let m=2,v=t.length;m<v;m+=8){const C=t[m],w=t[m+1],S=t[m+2],y=t[m+3],R=d.createElement("rect"),A=(S-i)/l,P=(o-w)/c,T=(C-S)/l,M=(w-y)/c;R.setAttribute("x",A),R.setAttribute("y",P),R.setAttribute("width",T),R.setAttribute("height",M),f.append(R),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${A}" y="${P}" width="${T}" height="${M}"/>`)}g(this,Rh)&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{data:t}=this,i=x(this,Eh,new Eb({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}render(){Nt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const s=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:o,id:r,exportValues:a}of n){if(o===-1||r===i)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${r}"]`);if(c&&!Uc.has(c)){Ze(`_getElementsByName - element not allowed: ${r}`);continue}s.push({id:r,exportValue:l,domElement:c})}return s}for(const n of document.getElementsByName(t)){const{exportValue:o}=n,r=n.getAttribute("data-element-id");r!==i&&Uc.has(n)&&s.push({id:r,exportValue:o,domElement:n})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i})})}};cc=new WeakMap,Rh=new WeakMap,Eh=new WeakMap,xf=new WeakSet,Rb=function(t){const{container:{style:i},data:{rect:s,rotation:n},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:r,pageX:a,pageY:l}}}}=this;s==null||s.splice(0,4,...t);const{width:c,height:d}=_r(t);i.left=`${100*(t[0]-a)/o}%`,i.top=`${100*(r-t[3]+l)/r}%`,n===0?(i.width=`${100*c/o}%`,i.height=`${100*d/r}%`):this.setRotation(n)};let ai=p0;var Ws,vl,AF,FF;class EF extends ai{constructor(i,s=null){super(i,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});F(this,Ws);this.isTooltipOnly=i.data.isTooltipOnly}render(){const{data:i,linkService:s}=this,n=document.createElement("a");n.setAttribute("data-element-id",i.id);let o=!1;return i.url?(s.addLinkAttributes(n,i.url,i.newWindow),o=!0):i.action?(this._bindNamedAction(n,i.action),o=!0):i.attachment?(E(this,Ws,AF).call(this,n,i.attachment,i.attachmentDest),o=!0):i.setOCGState?(E(this,Ws,FF).call(this,n,i.setOCGState),o=!0):i.dest?(this._bindLink(n,i.dest),o=!0):(i.actions&&(i.actions.Action||i.actions["Mouse Up"]||i.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,i),o=!0),i.resetForm?(this._bindResetFormAction(n,i.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(n,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(n),this.container}_bindLink(i,s){i.href=this.linkService.getDestinationHash(s),i.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&E(this,Ws,vl).call(this)}_bindNamedAction(i,s){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeNamedAction(s),!1),E(this,Ws,vl).call(this)}_bindJSAction(i,s){i.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(s.actions)){const r=n.get(o);r&&(i[r]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:o}}),!1})}i.onclick||(i.onclick=()=>!1),E(this,Ws,vl).call(this)}_bindResetFormAction(i,s){const n=i.onclick;if(n||(i.href=this.linkService.getAnchorUrl("")),E(this,Ws,vl).call(this),!this._fieldObjects){Ze('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(i.onclick=()=>!1);return}i.onclick=()=>{var h;n==null||n();const{fields:o,refs:r,include:a}=s,l=[];if(o.length!==0||r.length!==0){const u=new Set(r);for(const f of o){const p=this._fieldObjects[f]||[];for(const{id:m}of p)u.add(m)}for(const f of Object.values(this._fieldObjects))for(const p of f)u.has(p.id)===a&&l.push(p)}else for(const u of Object.values(this._fieldObjects))l.push(...u);const c=this.annotationStorage,d=[];for(const u of l){const{id:f}=u;switch(d.push(f),u.type){case"text":{const m=u.defaultValue||"";c.setValue(f,{value:m});break}case"checkbox":case"radiobutton":{const m=u.defaultValue===u.exportValues;c.setValue(f,{value:m});break}case"combobox":case"listbox":{const m=u.defaultValue||"";c.setValue(f,{value:m});break}default:continue}const p=document.querySelector(`[data-element-id="${f}"]`);if(p){if(!Uc.has(p)){Ze(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Ws=new WeakSet,vl=function(){this.container.setAttribute("data-internal-link","")},AF=function(i,s,n=null){i.href=this.linkService.getAnchorUrl(""),s.description&&(i.title=s.description),i.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(s.content,s.filename,n),!1},E(this,Ws,vl).call(this)},FF=function(i,s){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeSetOCGState(s),!1),E(this,Ws,vl).call(this)};class JO extends ai{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class od extends ai{render(){return this.container}showElementAndHideCanvas(t){var i;this.data.hasOwnCanvas&&(((i=t.previousSibling)==null?void 0:i.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return gs.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,s,n,o){s.includes("mouse")?t.addEventListener(s,r=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:o(r),shift:r.shiftKey,modifier:this._getKeyModifier(r)}})}):t.addEventListener(s,r=>{var a;if(s==="blur"){if(!i.focused||!r.relatedTarget)return;i.focused=!1}else if(s==="focus"){if(i.focused)return;i.focused=!0}o&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:o(r)}}))})}_setEventListeners(t,i,s,n){var o,r,a;for(const[l,c]of s)(c==="Action"||(o=this.data.actions)!=null&&o[c])&&((c==="Focus"||c==="Blur")&&(i||(i={focused:!1})),this._setEventListener(t,i,l,c,n),c==="Focus"&&!((r=this.data.actions)!=null&&r.Blur)?this._setEventListener(t,i,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":ke.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||XO,o=t.style;let r;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(c/(PC*n))||1,h=c/d;r=Math.min(n,l(h/PC))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);r=Math.min(n,l(c/PC))}o.fontSize=`calc(${r}px * var(--scale-factor))`,o.color=ke.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class ZO extends od{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,s,n){const o=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[i]=s),o.setValue(r.id,{[n]:s})}render(){var n,o;const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(i,{value:this.data.fieldValue});let a=r.value||"";const l=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=r.formattedValue||((n=this.data.textContent)==null?void 0:n.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=c??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",c??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Uc.add(s),s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=up,this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",u=>{t.setValue(i,{value:u.target.value}),this.setPropertyOnSiblings(s,"value",u.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue??"";s.value=d.userValue=f,d.formattedValue=null});let h=u=>{const{formattedValue:f}=d;f!=null&&(u.target.value=f),u.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",f=>{var m;if(d.focused)return;const{target:p}=f;d.userValue&&(p.value=d.userValue),d.lastCommittedValue=p.value,d.commitKey=1,(m=this.data.actions)!=null&&m.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",f=>{this.showElementAndHideCanvas(f.target);const p={value(m){d.userValue=m.detail.value??"",t.setValue(i,{value:d.userValue.toString()}),m.target.value=d.userValue},formattedValue(m){const{formattedValue:v}=m.detail;d.formattedValue=v,v!=null&&m.target!==document.activeElement&&(m.target.value=v),t.setValue(i,{formattedValue:v})},selRange(m){m.target.setSelectionRange(...m.detail.selRange)},charLimit:m=>{var S;const{charLimit:v}=m.detail,{target:C}=m;if(v===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",v);let w=d.userValue;!w||w.length<=v||(w=w.slice(0,v),C.value=d.userValue=w,t.setValue(i,{value:w}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(p,f)}),s.addEventListener("keydown",f=>{var v;d.commitKey=1;let p=-1;if(f.key==="Escape"?p=0:f.key==="Enter"&&!this.data.multiLine?p=2:f.key==="Tab"&&(d.commitKey=3),p===-1)return;const{value:m}=f.target;d.lastCommittedValue!==m&&(d.lastCommittedValue=m,d.userValue=m,(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:m,willCommit:!0,commitKey:p,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}))});const u=h;h=null,s.addEventListener("blur",f=>{var m,v;if(!d.focused||!f.relatedTarget)return;(m=this.data.actions)!=null&&m.Blur||(d.focused=!1);const{value:p}=f.target;d.userValue=p,d.lastCommittedValue!==p&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:p,willCommit:!0,commitKey:d.commitKey,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}})),u(f)}),(o=this.data.actions)!=null&&o.Keystroke&&s.addEventListener("beforeinput",f=>{var R;d.lastCommittedValue=null;const{data:p,target:m}=f,{value:v,selectionStart:C,selectionEnd:w}=m;let S=C,y=w;switch(f.inputType){case"deleteWordBackward":{const A=v.substring(0,C).match(/\w*[^\w]*$/);A&&(S-=A[0].length);break}case"deleteWordForward":{const A=v.substring(C).match(/^[^\w]*\w*/);A&&(y+=A[0].length);break}case"deleteContentBackward":C===w&&(S-=1);break;case"deleteContentForward":C===w&&(y+=1);break}f.preventDefault(),(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:v,change:p||"",willCommit:!1,selStart:S,selEnd:y}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.value)}if(h&&s.addEventListener("blur",h),this.data.comb){const f=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${f}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class e2 extends od{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class t2 extends od{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,s=i.id;let n=t.getValue(s,{value:i.exportValue===i.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(s,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Uc.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=i.fieldName,n&&o.setAttribute("checked",!0),o.setAttribute("exportValue",i.exportValue),o.tabIndex=up,o.addEventListener("change",r=>{const{name:a,checked:l}=r.target;for(const c of this._getElementsByName(a,s)){const d=l&&c.exportValue===i.exportValue;c.domElement&&(c.domElement.checked=d),t.setValue(c.id,{value:d})}t.setValue(s,{value:l})}),o.addEventListener("resetform",r=>{const a=i.defaultFieldValue||"Off";r.target.checked=a===i.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",r=>{const a={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,r)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],r=>r.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class PF extends od{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,s=i.id;let n=t.getValue(s,{value:i.fieldValue===i.buttonValue}).value;if(typeof n=="string"&&(n=n!==i.buttonValue,t.setValue(s,{value:n})),n)for(const r of this._getElementsByName(i.fieldName,s))t.setValue(r.id,{value:!1});const o=document.createElement("input");if(Uc.add(o),o.setAttribute("data-element-id",s),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=i.fieldName,n&&o.setAttribute("checked",!0),o.tabIndex=up,o.addEventListener("change",r=>{const{name:a,checked:l}=r.target;for(const c of this._getElementsByName(a,s))t.setValue(c.id,{value:!1});t.setValue(s,{value:l})}),o.addEventListener("resetform",r=>{const a=i.defaultFieldValue;r.target.checked=a!=null&&a===i.buttonValue}),this.enableScripting&&this.hasJSActions){const r=i.buttonValue;o.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const d=r===c.detail.value;for(const h of this._getElementsByName(c.target.name)){const u=d&&h.id===s;h.domElement&&(h.domElement.checked=u),t.setValue(h.id,{value:u})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class i2 extends EF{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class s2 extends od{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,s=t.getValue(i,{value:this.data.fieldValue}),n=document.createElement("select");Uc.add(n),n.setAttribute("data-element-id",i),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=up;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const u of n.options)u.selected=u.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,s.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),o=!1),n.append(h)}let r=null;if(o){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),n.prepend(d),r=()=>{d.remove(),n.removeEventListener("input",r),r=null},n.addEventListener("input",r)}const a=d=>{const h=d?"value":"textContent",{options:u,multiple:f}=n;return f?Array.prototype.filter.call(u,p=>p.selected).map(p=>p[h]):u.selectedIndex===-1?null:u[u.selectedIndex][h]};let l=a(!1);const c=d=>{const h=d.target.options;return Array.prototype.map.call(h,u=>({displayValue:u.textContent,exportValue:u.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",d=>{const h={value(u){r==null||r();const f=u.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(const m of n.options)m.selected=p.has(m.value);t.setValue(i,{value:a(!0)}),l=a(!1)},multipleSelection(u){n.multiple=!0},remove(u){const f=n.options,p=u.detail.remove;f[p].selected=!1,n.remove(p),f.length>0&&Array.prototype.findIndex.call(f,v=>v.selected)===-1&&(f[0].selected=!0),t.setValue(i,{value:a(!0),items:c(u)}),l=a(!1)},clear(u){for(;n.length!==0;)n.remove(0);t.setValue(i,{value:null,items:[]}),l=a(!1)},insert(u){const{index:f,displayValue:p,exportValue:m}=u.detail.insert,v=n.children[f],C=document.createElement("option");C.textContent=p,C.value=m,v?v.before(C):n.append(C),t.setValue(i,{value:a(!0),items:c(u)}),l=a(!1)},items(u){const{items:f}=u.detail;for(;n.length!==0;)n.remove(0);for(const p of f){const{displayValue:m,exportValue:v}=p,C=document.createElement("option");C.textContent=m,C.value=v,n.append(C)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(i,{value:a(!0),items:c(u)}),l=a(!1)},indices(u){const f=new Set(u.detail.indices);for(const p of u.target.options)p.selected=f.has(p.index);t.setValue(i,{value:a(!0)}),l=a(!1)},editable(u){u.target.disabled=!u.detail.editable}};this._dispatchEventFromSandbox(h,d)}),n.addEventListener("input",d=>{var f;const h=a(!0),u=a(!1);t.setValue(i,{value:h}),d.preventDefault(),(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:l,change:u,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):n.addEventListener("input",function(d){t.setValue(i,{value:a(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Eb extends ai{constructor(t){const{data:i,elements:s}=t;super(t,{isRenderable:ai._hasPopupData(i)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new n2({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),i=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${lS}${s}`).join(",")),this.container}}var Ah,_v,Lv,Fh,dc,Jt,ur,Ph,Rf,Ef,Th,gr,In,fr,Af,pr,Ff,hc,uc,It,lm,Ab,TF,DF,MF,IF,cm,dm,Fb;class n2{constructor({container:t,color:i,elements:s,titleObj:n,modificationDate:o,contentsObj:r,richText:a,parent:l,rect:c,parentRect:d,open:h}){F(this,It);F(this,Ah,E(this,It,MF).bind(this));F(this,_v,E(this,It,Fb).bind(this));F(this,Lv,E(this,It,dm).bind(this));F(this,Fh,E(this,It,cm).bind(this));F(this,dc,null);F(this,Jt,null);F(this,ur,null);F(this,Ph,null);F(this,Rf,null);F(this,Ef,null);F(this,Th,null);F(this,gr,!1);F(this,In,null);F(this,fr,null);F(this,Af,null);F(this,pr,null);F(this,Ff,null);F(this,hc,null);F(this,uc,!1);var u;x(this,Jt,t),x(this,Ff,n),x(this,ur,r),x(this,pr,a),x(this,Ef,l),x(this,dc,i),x(this,Af,c),x(this,Th,d),x(this,Rf,s),x(this,Ph,hS.toDateObject(o)),this.trigger=s.flatMap(f=>f.getElementsToTriggerPopup());for(const f of this.trigger)f.addEventListener("click",g(this,Fh)),f.addEventListener("mouseenter",g(this,Lv)),f.addEventListener("mouseleave",g(this,_v)),f.classList.add("popupTriggerArea");for(const f of s)(u=f.container)==null||u.addEventListener("keydown",g(this,Ah));g(this,Jt).hidden=!0,h&&E(this,It,cm).call(this)}render(){if(g(this,In))return;const t=x(this,In,document.createElement("div"));if(t.className="popup",g(this,dc)){const o=t.style.outlineColor=ke.makeHexColor(...g(this,dc));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:t.style.backgroundColor=ke.makeHexColor(...g(this,dc).map(a=>Math.floor(.7*(255-a)+a)))}const i=document.createElement("span");i.className="header";const s=document.createElement("h1");if(i.append(s),{dir:s.dir,str:s.textContent}=g(this,Ff),t.append(i),g(this,Ph)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:g(this,Ph).valueOf()})),i.append(o)}const n=g(this,It,lm);if(n)RF.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(g(this,ur));t.append(o)}g(this,Jt).append(t)}_formatContents({str:t,dir:i}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=i;const n=t.split(/(?:\r\n?|\n)/);for(let o=0,r=n.length;o<r;++o){const a=n[o];s.append(document.createTextNode(a)),o<r-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:i}){var s;g(this,hc)||x(this,hc,{contentsObj:g(this,ur),richText:g(this,pr)}),t&&x(this,fr,null),i&&(x(this,pr,E(this,It,DF).call(this,i)),x(this,ur,null)),(s=g(this,In))==null||s.remove(),x(this,In,null)}resetEdited(){var t;g(this,hc)&&({contentsObj:os(this,ur)._,richText:os(this,pr)._}=g(this,hc),x(this,hc,null),(t=g(this,In))==null||t.remove(),x(this,In,null),x(this,fr,null))}forceHide(){x(this,uc,this.isVisible),g(this,uc)&&(g(this,Jt).hidden=!0)}maybeShow(){g(this,uc)&&(g(this,In)||E(this,It,dm).call(this),x(this,uc,!1),g(this,Jt).hidden=!1)}get isVisible(){return g(this,Jt).hidden===!1}}Ah=new WeakMap,_v=new WeakMap,Lv=new WeakMap,Fh=new WeakMap,dc=new WeakMap,Jt=new WeakMap,ur=new WeakMap,Ph=new WeakMap,Rf=new WeakMap,Ef=new WeakMap,Th=new WeakMap,gr=new WeakMap,In=new WeakMap,fr=new WeakMap,Af=new WeakMap,pr=new WeakMap,Ff=new WeakMap,hc=new WeakMap,uc=new WeakMap,It=new WeakSet,lm=function(){const t=g(this,pr),i=g(this,ur);return t!=null&&t.str&&(!(i!=null&&i.str)||i.str===t.str)&&g(this,pr).html||null},Ab=function(){var t,i,s;return((s=(i=(t=g(this,It,lm))==null?void 0:t.attributes)==null?void 0:i.style)==null?void 0:s.fontSize)||0},TF=function(){var t,i,s;return((s=(i=(t=g(this,It,lm))==null?void 0:t.attributes)==null?void 0:i.style)==null?void 0:s.color)||null},DF=function(t){const i=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},n={style:{color:g(this,It,TF),fontSize:g(this,It,Ab)?`calc(${g(this,It,Ab)}px * var(--scale-factor))`:""}};for(const o of t.split(`
`))i.push({name:"span",value:o,attributes:n});return s},MF=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&g(this,gr))&&E(this,It,cm).call(this)},IF=function(){if(g(this,fr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:n,pageY:o}}}=g(this,Ef);let r=!!g(this,Th),a=r?g(this,Th):g(this,Af);for(const p of g(this,Rf))if(!a||ke.intersect(p.data.rect,a)!==null){a=p.data.rect,r=!0;break}const l=ke.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),d=r?a[2]-a[0]+5:0,h=l[0]+d,u=l[1];x(this,fr,[100*(h-n)/i,100*(u-o)/s]);const{style:f}=g(this,Jt);f.left=`${g(this,fr)[0]}%`,f.top=`${g(this,fr)[1]}%`},cm=function(){x(this,gr,!g(this,gr)),g(this,gr)?(E(this,It,dm).call(this),g(this,Jt).addEventListener("click",g(this,Fh)),g(this,Jt).addEventListener("keydown",g(this,Ah))):(E(this,It,Fb).call(this),g(this,Jt).removeEventListener("click",g(this,Fh)),g(this,Jt).removeEventListener("keydown",g(this,Ah)))},dm=function(){g(this,In)||this.render(),this.isVisible?g(this,gr)&&g(this,Jt).classList.add("focused"):(E(this,It,IF).call(this),g(this,Jt).hidden=!1,g(this,Jt).style.zIndex=parseInt(g(this,Jt).style.zIndex)+1e3)},Fb=function(){g(this,Jt).classList.remove("focused"),!(g(this,gr)||!this.isVisible)&&(g(this,Jt).hidden=!0,g(this,Jt).style.zIndex=parseInt(g(this,Jt).style.zIndex)-1e3)};class kF extends ai{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=qe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const s=document.createElement("span");s.textContent=i,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Pf;class o2 extends ai{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});F(this,Pf,null)}render(){this.container.classList.add("lineAnnotation");const i=this.data,{width:s,height:n}=_r(i.rect),o=this.svgFactory.create(s,n,!0),r=x(this,Pf,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),r.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),r.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),r.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),r.setAttribute("stroke-width",i.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),o.append(r),this.container.append(o),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,Pf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pf=new WeakMap;var Tf;class r2 extends ai{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});F(this,Tf,null)}render(){this.container.classList.add("squareAnnotation");const i=this.data,{width:s,height:n}=_r(i.rect),o=this.svgFactory.create(s,n,!0),r=i.borderStyle.width,a=x(this,Tf,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",s-r),a.setAttribute("height",n-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,Tf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tf=new WeakMap;var Df;class a2 extends ai{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});F(this,Df,null)}render(){this.container.classList.add("circleAnnotation");const i=this.data,{width:s,height:n}=_r(i.rect),o=this.svgFactory.create(s,n,!0),r=i.borderStyle.width,a=x(this,Df,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",n/2),a.setAttribute("rx",s/2-r/2),a.setAttribute("ry",n/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!i.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,Df)}addHighlightArea(){this.container.classList.add("highlightArea")}}Df=new WeakMap;var Mf;class _F extends ai{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});F(this,Mf,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:i,vertices:s,borderStyle:n,popupRef:o}}=this;if(!s)return this.container;const{width:r,height:a}=_r(i),l=this.svgFactory.create(r,a,!0);let c=[];for(let h=0,u=s.length;h<u;h+=2){const f=s[h]-i[0],p=i[3]-s[h+1];c.push(`${f},${p}`)}c=c.join(" ");const d=x(this,Mf,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",c),d.setAttribute("stroke-width",n.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,Mf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mf=new WeakMap;class l2 extends _F{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class c2 extends ai{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var If;class wS extends ai{constructor(i){super(i,{isRenderable:!0,ignoreBorder:!0});F(this,If,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?qe.HIGHLIGHT:qe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:i,inkLists:s,borderStyle:n,popupRef:o}}=this,{width:r,height:a}=_r(i),l=this.svgFactory.create(r,a,!0);for(const c of s){let d=[];for(let u=0,f=c.length;u<f;u+=2){const p=c[u]-i[0],m=i[3]-c[u+1];d.push(`${p},${m}`)}d=d.join(" ");const h=this.svgFactory.createElement(this.svgElementName);g(this,If).push(h),h.setAttribute("points",d),h.setAttribute("stroke-width",n.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return g(this,If)}addHighlightArea(){this.container.classList.add("highlightArea")}}If=new WeakMap;class LF extends ai{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=qe.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class d2 extends ai{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class h2 extends ai{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class u2 extends ai{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class OF extends ai{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=qe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var kf,_f,Pb;class g2 extends ai{constructor(i){var n;super(i,{isRenderable:!0});F(this,_f);F(this,kf,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:i,data:s}=this;let n;s.hasAppearance||s.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),n.addEventListener("dblclick",E(this,_f,Pb).bind(this)),x(this,kf,n);const{isMac:o}=gs.platform;return i.addEventListener("keydown",r=>{r.key==="Enter"&&(o?r.metaKey:r.ctrlKey)&&E(this,_f,Pb).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),i.append(n),i}getElementsToTriggerPopup(){return g(this,kf)}addHighlightArea(){this.container.classList.add("highlightArea")}}kf=new WeakMap,_f=new WeakSet,Pb=function(){var i;(i=this.downloadManager)==null||i.openOrDownloadData(this.content,this.filename)};var Lf,gc,fc,Of,Qc,NF,Tb;class f2{constructor({div:t,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:n,page:o,viewport:r,structTreeLayer:a}){F(this,Qc);F(this,Lf,null);F(this,gc,null);F(this,fc,new Map);F(this,Of,null);this.div=t,x(this,Lf,i),x(this,gc,s),x(this,Of,a||null),this.page=o,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return g(this,fc).size>0}async render(t){var r;const{annotations:i}=t,s=this.div;Wc(s,this.viewport);const n=new Map,o={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new CS,annotationStorage:t.annotationStorage||new gS,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of i){if(a.noHTML)continue;const l=a.annotationType===gi.POPUP;if(l){const h=n.get(a.id);if(!h)continue;o.elements=h}else{const{width:h,height:u}=_r(a.rect);if(h<=0||u<=0)continue}o.data=a;const c=QO.create(o);if(!c.isRenderable)continue;if(!l&&a.popupRef){const h=n.get(a.popupRef);h?h.push(c):n.set(a.popupRef,[c])}const d=c.render();a.hidden&&(d.style.visibility="hidden"),await E(this,Qc,NF).call(this,d,a.id),c._isEditable&&(g(this,fc).set(c.data.id,c),(r=this._annotationEditorUIManager)==null||r.renderAnnotationElement(c))}E(this,Qc,Tb).call(this)}update({viewport:t}){const i=this.div;this.viewport=t,Wc(i,{rotation:t.rotation}),E(this,Qc,Tb).call(this),i.hidden=!1}getEditableAnnotations(){return Array.from(g(this,fc).values())}getEditableAnnotation(t){return g(this,fc).get(t)}}Lf=new WeakMap,gc=new WeakMap,fc=new WeakMap,Of=new WeakMap,Qc=new WeakSet,NF=async function(t,i){var r,a;const s=t.firstChild||t,n=s.id=`${lS}${i}`,o=await((r=g(this,Of))==null?void 0:r.getAriaAttributes(n));if(o)for(const[l,c]of o)s.setAttribute(l,c);this.div.append(t),(a=g(this,Lf))==null||a.moveElementInDOM(this.div,t,s,!1)},Tb=function(){if(!g(this,gc))return;const t=this.div;for(const[i,s]of g(this,gc)){const n=t.querySelector(`[data-annotation-id="${i}"]`);if(!n)continue;s.className="annotationContent";const{firstChild:o}=n;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):n.append(s)}g(this,gc).clear()};const _p=/\r\n?|\n/g;var kn,Ls,Nf,pc,Os,ui,HF,GF,BF,hm,Br,um,gm,VF,Mb,zF;const kt=class kt extends Tt{constructor(i){super({...i,name:"freeTextEditor"});F(this,ui);F(this,kn);F(this,Ls,"");F(this,Nf,`${this.id}-editor`);F(this,pc,null);F(this,Os);x(this,kn,i.color||kt._defaultColor||Tt._defaultLineColor),x(this,Os,i.fontSize||kt._defaultFontSize)}static get _keyboardManager(){const i=kt.prototype,s=r=>r.isEmpty(),n=$c.TRANSLATE_SMALL,o=$c.TRANSLATE_BIG;return ut(this,"_keyboardManager",new hp([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],i.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],i.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],i._translateEmpty,{args:[-n,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],i._translateEmpty,{args:[-o,0],checker:s}],[["ArrowRight","mac+ArrowRight"],i._translateEmpty,{args:[n,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],i._translateEmpty,{args:[o,0],checker:s}],[["ArrowUp","mac+ArrowUp"],i._translateEmpty,{args:[0,-n],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],i._translateEmpty,{args:[0,-o],checker:s}],[["ArrowDown","mac+ArrowDown"],i._translateEmpty,{args:[0,n],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],i._translateEmpty,{args:[0,o],checker:s}]]))}static initialize(i,s){Tt.initialize(i,s);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(i,s){switch(i){case ze.FREETEXT_SIZE:kt._defaultFontSize=s;break;case ze.FREETEXT_COLOR:kt._defaultColor=s;break}}updateParams(i,s){switch(i){case ze.FREETEXT_SIZE:E(this,ui,HF).call(this,s);break;case ze.FREETEXT_COLOR:E(this,ui,GF).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ze.FREETEXT_SIZE,kt._defaultFontSize],[ze.FREETEXT_COLOR,kt._defaultColor||Tt._defaultLineColor]]}get propertiesToUpdate(){return[[ze.FREETEXT_SIZE,g(this,Os)],[ze.FREETEXT_COLOR,g(this,kn)]]}_translateEmpty(i,s){this._uiManager.translateSelectedEditors(i,s,!0)}getInitialTranslation(){const i=this.parentScale;return[-kt._internalPadding*i,-(kt._internalPadding+g(this,Os))*i]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(qe.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,pc,new AbortController);const i=this._uiManager.combinedSignal(g(this,pc));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:i}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:i}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:i}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:i}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:i})}disableEditMode(){var i;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",g(this,Nf)),this._isDraggable=!0,(i=g(this,pc))==null||i.abort(),x(this,pc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(i){this._focusEventsAllowed&&(super.focusin(i),i.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var i;this.width||(this.enableEditMode(),this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const i=g(this,Ls),s=x(this,Ls,E(this,ui,BF).call(this).trimEnd());if(i===s)return;const n=o=>{if(x(this,Ls,o),!o){this.remove();return}E(this,ui,gm).call(this),this._uiManager.rebuild(this),E(this,ui,hm).call(this)};this.addCommands({cmd:()=>{n(s)},undo:()=>{n(i)},mustExec:!1}),E(this,ui,hm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(i){this.enterInEditMode()}keydown(i){i.target===this.div&&i.key==="Enter"&&(this.enterInEditMode(),i.preventDefault())}editorDivKeydown(i){kt._keyboardManager.exec(this,i)}editorDivFocus(i){this.isEditing=!0}editorDivBlur(i){this.isEditing=!1}editorDivInput(i){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let i,s;this.width&&(i=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",g(this,Nf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${g(this,Os)}px * var(--scale-factor))`,n.color=g(this,kn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),$m(this,this.div,["dblclick","keydown"]),this.width){const[o,r]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[d,h]=this.pageDimensions,[u,f]=this.pageTranslation;let p,m;switch(this.rotation){case 0:p=i+(a[0]-u)/d,m=s+this.height-(a[1]-f)/h;break;case 90:p=i+(a[0]-u)/d,m=s-(a[1]-f)/h,[l,c]=[c,-l];break;case 180:p=i-this.width+(a[0]-u)/d,m=s-(a[1]-f)/h,[l,c]=[-l,-c];break;case 270:p=i+(a[0]-u-this.height*h)/d,m=s+(a[1]-f-this.width*d)/h,[l,c]=[-c,l];break}this.setAt(p*o,m*r,l,c)}else this.setAt(i*o,s*r,this.width*o,this.height*r);E(this,ui,gm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(i){var p,m,v;const s=i.clipboardData||window.clipboardData,{types:n}=s;if(n.length===1&&n[0]==="text/plain")return;i.preventDefault();const o=E(p=kt,Br,Mb).call(p,s.getData("text")||"").replaceAll(_p,`
`);if(!o)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const a=r.getRangeAt(0);if(!o.includes(`
`)){a.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:l,startOffset:c}=a,d=[],h=[];if(l.nodeType===Node.TEXT_NODE){const C=l.parentElement;if(h.push(l.nodeValue.slice(c).replaceAll(_p,"")),C!==this.editorDiv){let w=d;for(const S of this.editorDiv.childNodes){if(S===C){w=h;continue}w.push(E(m=kt,Br,um).call(m,S))}}d.push(l.nodeValue.slice(0,c).replaceAll(_p,""))}else if(l===this.editorDiv){let C=d,w=0;for(const S of this.editorDiv.childNodes)w++===c&&(C=h),C.push(E(v=kt,Br,um).call(v,S))}x(this,Ls,`${d.join(`
`)}${o}${h.join(`
`)}`),E(this,ui,gm).call(this);const u=new Range;let f=d.reduce((C,w)=>C+w.length,0);for(const{firstChild:C}of this.editorDiv.childNodes)if(C.nodeType===Node.TEXT_NODE){const w=C.nodeValue.length;if(f<=w){u.setStart(C,f),u.setEnd(C,f);break}f-=w}r.removeAllRanges(),r.addRange(u)}get contentDiv(){return this.editorDiv}static async deserialize(i,s,n){var a;let o=null;if(i instanceof kF){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:d,rotation:h,id:u,popupRef:f},textContent:p,textPosition:m,parent:{page:{pageNumber:v}}}=i;if(!p||p.length===0)return null;o=i={annotationType:qe.FREETEXT,color:Array.from(c),fontSize:l,value:p.join(`
`),position:m,pageIndex:v-1,rect:d.slice(0),rotation:h,id:u,deleted:!1,popupRef:f}}const r=await super.deserialize(i,s,n);return x(r,Os,i.fontSize),x(r,kn,ke.makeHexColor(...i.color)),x(r,Ls,E(a=kt,Br,Mb).call(a,i.value)),r.annotationElementId=i.id||null,r._initialData=o,r}serialize(i=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=kt._internalPadding*this.parentScale,n=this.getRect(s,s),o=Tt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:g(this,kn)),r={annotationType:qe.FREETEXT,color:o,fontSize:g(this,Os),value:E(this,ui,VF).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return i?r:this.annotationElementId&&!E(this,ui,zF).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(i){const s=super.renderAnnotationElement(i);if(this.deleted)return s;const{style:n}=s;n.fontSize=`calc(${g(this,Os)}px * var(--scale-factor))`,n.color=g(this,kn),s.replaceChildren();for(const r of g(this,Ls).split(`
`)){const a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),s.append(a)}const o=kt._internalPadding*this.parentScale;return i.updateEdited({rect:this.getRect(o,o),popupContent:g(this,Ls)}),s}resetAnnotationElement(i){super.resetAnnotationElement(i),i.resetEdited()}};kn=new WeakMap,Ls=new WeakMap,Nf=new WeakMap,pc=new WeakMap,Os=new WeakMap,ui=new WeakSet,HF=function(i){const s=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-g(this,Os))*this.parentScale),x(this,Os,o),E(this,ui,hm).call(this)},n=g(this,Os);this.addCommands({cmd:s.bind(this,i),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},GF=function(i){const s=o=>{x(this,kn,this.editorDiv.style.color=o)},n=g(this,kn);this.addCommands({cmd:s.bind(this,i),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},BF=function(){var n;const i=[];this.editorDiv.normalize();let s=null;for(const o of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(i.push(E(n=kt,Br,um).call(n,o)),s=o);return i.join(`
`)},hm=function(){const[i,s]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:o,div:r}=this,a=r.style.display,l=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",o.div.append(this.div),n=r.getBoundingClientRect(),r.remove(),r.style.display=a,r.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=n.width/i,this.height=n.height/s):(this.width=n.height/i,this.height=n.width/s),this.fixAndSetPosition()},Br=new WeakSet,um=function(i){return(i.nodeType===Node.TEXT_NODE?i.nodeValue:i.innerText).replaceAll(_p,"")},gm=function(){if(this.editorDiv.replaceChildren(),!!g(this,Ls))for(const i of g(this,Ls).split(`
`)){const s=document.createElement("div");s.append(i?document.createTextNode(i):document.createElement("br")),this.editorDiv.append(s)}},VF=function(){return g(this,Ls).replaceAll("Â "," ")},Mb=function(i){return i.replaceAll(" ","Â ")},zF=function(i){const{value:s,fontSize:n,color:o,pageIndex:r}=this._initialData;return this._hasBeenMoved||i.value!==s||i.fontSize!==n||i.color.some((a,l)=>a!==o[l])||i.pageIndex!==r},F(kt,Br),Ne(kt,"_freeTextDefaultContent",""),Ne(kt,"_internalPadding",0),Ne(kt,"_defaultColor",null),Ne(kt,"_defaultFontSize",10),Ne(kt,"_type","freetext"),Ne(kt,"_editorType",qe.FREETEXT);let Db=kt;class WF{toSVGPath(){Nt("Abstract method `toSVGPath` must be implemented.")}get box(){Nt("Abstract getter `box` must be implemented.")}serialize(t,i){Nt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Nt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Nt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Ns,_n,Dh,Mh,xo,it,mc,vc,Hf,Gf,Ih,kh,ka,Bf,Ov,Nv,bi,Wu,$F,UF,jF,KF,qF,YF;const Zo=class Zo{constructor({x:t,y:i},s,n,o,r,a=0){F(this,bi);F(this,Ns);F(this,_n,[]);F(this,Dh);F(this,Mh);F(this,xo,[]);F(this,it,new Float64Array(18));F(this,mc);F(this,vc);F(this,Hf);F(this,Gf);F(this,Ih);F(this,kh);F(this,ka,[]);x(this,Ns,s),x(this,kh,o*n),x(this,Mh,r),g(this,it).set([NaN,NaN,NaN,NaN,t,i],6),x(this,Dh,a),x(this,Gf,g(Zo,Bf)*n),x(this,Hf,g(Zo,Nv)*n),x(this,Ih,n),g(this,ka).push(t,i)}isEmpty(){return isNaN(g(this,it)[8])}add({x:t,y:i}){var M;x(this,mc,t),x(this,vc,i);const[s,n,o,r]=g(this,Ns);let[a,l,c,d]=g(this,it).subarray(8,12);const h=t-c,u=i-d,f=Math.hypot(h,u);if(f<g(this,Hf))return!1;const p=f-g(this,Gf),m=p/f,v=m*h,C=m*u;let w=a,S=l;a=c,l=d,c+=v,d+=C,(M=g(this,ka))==null||M.push(t,i);const y=-C/p,R=v/p,A=y*g(this,kh),P=R*g(this,kh);return g(this,it).set(g(this,it).subarray(2,8),0),g(this,it).set([c+A,d+P],4),g(this,it).set(g(this,it).subarray(14,18),12),g(this,it).set([c-A,d-P],16),isNaN(g(this,it)[6])?(g(this,xo).length===0&&(g(this,it).set([a+A,l+P],2),g(this,xo).push(NaN,NaN,NaN,NaN,(a+A-s)/o,(l+P-n)/r),g(this,it).set([a-A,l-P],14),g(this,_n).push(NaN,NaN,NaN,NaN,(a-A-s)/o,(l-P-n)/r)),g(this,it).set([w,S,a,l,c,d],6),!this.isEmpty()):(g(this,it).set([w,S,a,l,c,d],6),Math.abs(Math.atan2(S-l,w-a)-Math.atan2(C,v))<Math.PI/2?([a,l,c,d]=g(this,it).subarray(2,6),g(this,xo).push(NaN,NaN,NaN,NaN,((a+c)/2-s)/o,((l+d)/2-n)/r),[a,l,w,S]=g(this,it).subarray(14,18),g(this,_n).push(NaN,NaN,NaN,NaN,((w+a)/2-s)/o,((S+l)/2-n)/r),!0):([w,S,a,l,c,d]=g(this,it).subarray(0,6),g(this,xo).push(((w+5*a)/6-s)/o,((S+5*l)/6-n)/r,((5*a+c)/6-s)/o,((5*l+d)/6-n)/r,((a+c)/2-s)/o,((l+d)/2-n)/r),[c,d,a,l,w,S]=g(this,it).subarray(12,18),g(this,_n).push(((w+5*a)/6-s)/o,((S+5*l)/6-n)/r,((5*a+c)/6-s)/o,((5*l+d)/6-n)/r,((a+c)/2-s)/o,((l+d)/2-n)/r),!0))}toSVGPath(){if(this.isEmpty())return"";const t=g(this,xo),i=g(this,_n);if(isNaN(g(this,it)[6])&&!this.isEmpty())return E(this,bi,$F).call(this);const s=[];s.push(`M${t[4]} ${t[5]}`);for(let n=6;n<t.length;n+=6)isNaN(t[n])?s.push(`L${t[n+4]} ${t[n+5]}`):s.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);E(this,bi,jF).call(this,s);for(let n=i.length-6;n>=6;n-=6)isNaN(i[n])?s.push(`L${i[n+4]} ${i[n+5]}`):s.push(`C${i[n]} ${i[n+1]} ${i[n+2]} ${i[n+3]} ${i[n+4]} ${i[n+5]}`);return E(this,bi,UF).call(this,s),s.join(" ")}newFreeDrawOutline(t,i,s,n,o,r){return new XF(t,i,s,n,o,r)}getOutlines(){var h;const t=g(this,xo),i=g(this,_n),s=g(this,it),[n,o,r,a]=g(this,Ns),l=new Float64Array((((h=g(this,ka))==null?void 0:h.length)??0)+2);for(let u=0,f=l.length-2;u<f;u+=2)l[u]=(g(this,ka)[u]-n)/r,l[u+1]=(g(this,ka)[u+1]-o)/a;if(l[l.length-2]=(g(this,mc)-n)/r,l[l.length-1]=(g(this,vc)-o)/a,isNaN(s[6])&&!this.isEmpty())return E(this,bi,KF).call(this,l);const c=new Float64Array(g(this,xo).length+24+g(this,_n).length);let d=t.length;for(let u=0;u<d;u+=2){if(isNaN(t[u])){c[u]=c[u+1]=NaN;continue}c[u]=t[u],c[u+1]=t[u+1]}d=E(this,bi,YF).call(this,c,d);for(let u=i.length-6;u>=6;u-=6)for(let f=0;f<6;f+=2){if(isNaN(i[u+f])){c[d]=c[d+1]=NaN,d+=2;continue}c[d]=i[u+f],c[d+1]=i[u+f+1],d+=2}return E(this,bi,qF).call(this,c,d),this.newFreeDrawOutline(c,l,g(this,Ns),g(this,Ih),g(this,Dh),g(this,Mh))}};Ns=new WeakMap,_n=new WeakMap,Dh=new WeakMap,Mh=new WeakMap,xo=new WeakMap,it=new WeakMap,mc=new WeakMap,vc=new WeakMap,Hf=new WeakMap,Gf=new WeakMap,Ih=new WeakMap,kh=new WeakMap,ka=new WeakMap,Bf=new WeakMap,Ov=new WeakMap,Nv=new WeakMap,bi=new WeakSet,Wu=function(){const t=g(this,it).subarray(4,6),i=g(this,it).subarray(16,18),[s,n,o,r]=g(this,Ns);return[(g(this,mc)+(t[0]-i[0])/2-s)/o,(g(this,vc)+(t[1]-i[1])/2-n)/r,(g(this,mc)+(i[0]-t[0])/2-s)/o,(g(this,vc)+(i[1]-t[1])/2-n)/r]},$F=function(){const[t,i,s,n]=g(this,Ns),[o,r,a,l]=E(this,bi,Wu).call(this);return`M${(g(this,it)[2]-t)/s} ${(g(this,it)[3]-i)/n} L${(g(this,it)[4]-t)/s} ${(g(this,it)[5]-i)/n} L${o} ${r} L${a} ${l} L${(g(this,it)[16]-t)/s} ${(g(this,it)[17]-i)/n} L${(g(this,it)[14]-t)/s} ${(g(this,it)[15]-i)/n} Z`},UF=function(t){const i=g(this,_n);t.push(`L${i[4]} ${i[5]} Z`)},jF=function(t){const[i,s,n,o]=g(this,Ns),r=g(this,it).subarray(4,6),a=g(this,it).subarray(16,18),[l,c,d,h]=E(this,bi,Wu).call(this);t.push(`L${(r[0]-i)/n} ${(r[1]-s)/o} L${l} ${c} L${d} ${h} L${(a[0]-i)/n} ${(a[1]-s)/o}`)},KF=function(t){const i=g(this,it),[s,n,o,r]=g(this,Ns),[a,l,c,d]=E(this,bi,Wu).call(this),h=new Float64Array(36);return h.set([NaN,NaN,NaN,NaN,(i[2]-s)/o,(i[3]-n)/r,NaN,NaN,NaN,NaN,(i[4]-s)/o,(i[5]-n)/r,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,(i[16]-s)/o,(i[17]-n)/r,NaN,NaN,NaN,NaN,(i[14]-s)/o,(i[15]-n)/r],0),this.newFreeDrawOutline(h,t,g(this,Ns),g(this,Ih),g(this,Dh),g(this,Mh))},qF=function(t,i){const s=g(this,_n);return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],i),i+=6},YF=function(t,i){const s=g(this,it).subarray(4,6),n=g(this,it).subarray(16,18),[o,r,a,l]=g(this,Ns),[c,d,h,u]=E(this,bi,Wu).call(this);return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/a,(s[1]-r)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(n[0]-o)/a,(n[1]-r)/l],i),i+=24},F(Zo,Bf,8),F(Zo,Ov,2),F(Zo,Nv,g(Zo,Bf)+g(Zo,Ov));let jm=Zo;var _h,Cc,mr,Vf,Hs,zf,ti,Fs,$u,Uu,QF;class XF extends WF{constructor(i,s,n,o,r,a){super();F(this,Fs);F(this,_h);F(this,Cc,null);F(this,mr);F(this,Vf);F(this,Hs);F(this,zf);F(this,ti);x(this,ti,i),x(this,Hs,s),x(this,_h,n),x(this,zf,o),x(this,mr,r),x(this,Vf,a),E(this,Fs,QF).call(this,a);const{x:l,y:c,width:d,height:h}=g(this,Cc);for(let u=0,f=i.length;u<f;u+=2)i[u]=(i[u]-l)/d,i[u+1]=(i[u+1]-c)/h;for(let u=0,f=s.length;u<f;u+=2)s[u]=(s[u]-l)/d,s[u+1]=(s[u+1]-c)/h}toSVGPath(){const i=[`M${g(this,ti)[4]} ${g(this,ti)[5]}`];for(let s=6,n=g(this,ti).length;s<n;s+=6){if(isNaN(g(this,ti)[s])){i.push(`L${g(this,ti)[s+4]} ${g(this,ti)[s+5]}`);continue}i.push(`C${g(this,ti)[s]} ${g(this,ti)[s+1]} ${g(this,ti)[s+2]} ${g(this,ti)[s+3]} ${g(this,ti)[s+4]} ${g(this,ti)[s+5]}`)}return i.push("Z"),i.join(" ")}serialize([i,s,n,o],r){const a=n-i,l=o-s;let c,d;switch(r){case 0:c=E(this,Fs,$u).call(this,g(this,ti),i,o,a,-l),d=E(this,Fs,$u).call(this,g(this,Hs),i,o,a,-l);break;case 90:c=E(this,Fs,Uu).call(this,g(this,ti),i,s,a,l),d=E(this,Fs,Uu).call(this,g(this,Hs),i,s,a,l);break;case 180:c=E(this,Fs,$u).call(this,g(this,ti),n,s,-a,l),d=E(this,Fs,$u).call(this,g(this,Hs),n,s,-a,l);break;case 270:c=E(this,Fs,Uu).call(this,g(this,ti),n,o,-a,-l),d=E(this,Fs,Uu).call(this,g(this,Hs),n,o,-a,-l);break}return{outline:Array.from(c),points:[Array.from(d)]}}get box(){return g(this,Cc)}newOutliner(i,s,n,o,r,a=0){return new jm(i,s,n,o,r,a)}getNewOutline(i,s){const{x:n,y:o,width:r,height:a}=g(this,Cc),[l,c,d,h]=g(this,_h),u=r*d,f=a*h,p=n*d+l,m=o*h+c,v=this.newOutliner({x:g(this,Hs)[0]*u+p,y:g(this,Hs)[1]*f+m},g(this,_h),g(this,zf),i,g(this,Vf),s??g(this,mr));for(let C=2;C<g(this,Hs).length;C+=2)v.add({x:g(this,Hs)[C]*u+p,y:g(this,Hs)[C+1]*f+m});return v.getOutlines()}get mustRemoveSelfIntersections(){return!0}}_h=new WeakMap,Cc=new WeakMap,mr=new WeakMap,Vf=new WeakMap,Hs=new WeakMap,zf=new WeakMap,ti=new WeakMap,Fs=new WeakSet,$u=function(i,s,n,o,r){const a=new Float64Array(i.length);for(let l=0,c=i.length;l<c;l+=2)a[l]=s+i[l]*o,a[l+1]=n+i[l+1]*r;return a},Uu=function(i,s,n,o,r){const a=new Float64Array(i.length);for(let l=0,c=i.length;l<c;l+=2)a[l]=s+i[l+1]*o,a[l+1]=n+i[l]*r;return a},QF=function(i){const s=g(this,ti);let n=s[4],o=s[5],r=n,a=o,l=n,c=o,d=n,h=o;const u=i?Math.max:Math.min;for(let C=6,w=s.length;C<w;C+=6){if(isNaN(s[C]))r=Math.min(r,s[C+4]),a=Math.min(a,s[C+5]),l=Math.max(l,s[C+4]),c=Math.max(c,s[C+5]),h<s[C+5]?(d=s[C+4],h=s[C+5]):h===s[C+5]&&(d=u(d,s[C+4]));else{const S=ke.bezierBoundingBox(n,o,...s.slice(C,C+6));r=Math.min(r,S[0]),a=Math.min(a,S[1]),l=Math.max(l,S[2]),c=Math.max(c,S[3]),h<S[3]?(d=S[2],h=S[3]):h===S[3]&&(d=u(d,S[2]))}n=s[C+4],o=s[C+5]}const f=r-g(this,mr),p=a-g(this,mr),m=l-r+2*g(this,mr),v=c-a+2*g(this,mr);x(this,Cc,{x:f,y:p,width:m,height:v,lastPoint:[d,h]})};var Wf,_a,Ln,ms,JF,fm,ZF,eP,Ib;class Cx{constructor(t,i=0,s=0,n=!0){F(this,ms);F(this,Wf);F(this,_a,[]);F(this,Ln,[]);let o=1/0,r=-1/0,a=1/0,l=-1/0;const c=10**-4;for(const{x:v,y:C,width:w,height:S}of t){const y=Math.floor((v-i)/c)*c,R=Math.ceil((v+w+i)/c)*c,A=Math.floor((C-i)/c)*c,P=Math.ceil((C+S+i)/c)*c,T=[y,A,P,!0],M=[R,A,P,!1];g(this,_a).push(T,M),o=Math.min(o,y),r=Math.max(r,R),a=Math.min(a,A),l=Math.max(l,P)}const d=r-o+2*s,h=l-a+2*s,u=o-s,f=a-s,p=g(this,_a).at(n?-1:-2),m=[p[0],p[2]];for(const v of g(this,_a)){const[C,w,S]=v;v[0]=(C-u)/d,v[1]=(w-f)/h,v[2]=(S-f)/h}x(this,Wf,{x:u,y:f,width:d,height:h,lastPoint:m})}getOutlines(){g(this,_a).sort((i,s)=>i[0]-s[0]||i[1]-s[1]||i[2]-s[2]);const t=[];for(const i of g(this,_a))i[3]?(t.push(...E(this,ms,Ib).call(this,i)),E(this,ms,ZF).call(this,i)):(E(this,ms,eP).call(this,i),t.push(...E(this,ms,Ib).call(this,i)));return E(this,ms,JF).call(this,t)}}Wf=new WeakMap,_a=new WeakMap,Ln=new WeakMap,ms=new WeakSet,JF=function(t){const i=[],s=new Set;for(const r of t){const[a,l,c]=r;i.push([a,l,r],[a,c,r])}i.sort((r,a)=>r[1]-a[1]||r[0]-a[0]);for(let r=0,a=i.length;r<a;r+=2){const l=i[r][2],c=i[r+1][2];l.push(c),c.push(l),s.add(l),s.add(c)}const n=[];let o;for(;s.size>0;){const r=s.values().next().value;let[a,l,c,d,h]=r;s.delete(r);let u=a,f=l;for(o=[a,c],n.push(o);;){let p;if(s.has(d))p=d;else if(s.has(h))p=h;else break;s.delete(p),[a,l,c,d,h]=p,u!==a&&(o.push(u,f,a,f===l?l:c),u=a),f=f===l?c:l}o.push(u,f)}return new p2(n,g(this,Wf))},fm=function(t){const i=g(this,Ln);let s=0,n=i.length-1;for(;s<=n;){const o=s+n>>1,r=i[o][0];if(r===t)return o;r<t?s=o+1:n=o-1}return n+1},ZF=function([,t,i]){const s=E(this,ms,fm).call(this,t);g(this,Ln).splice(s,0,[t,i])},eP=function([,t,i]){const s=E(this,ms,fm).call(this,t);for(let n=s;n<g(this,Ln).length;n++){const[o,r]=g(this,Ln)[n];if(o!==t)break;if(o===t&&r===i){g(this,Ln).splice(n,1);return}}for(let n=s-1;n>=0;n--){const[o,r]=g(this,Ln)[n];if(o!==t)break;if(o===t&&r===i){g(this,Ln).splice(n,1);return}}},Ib=function(t){const[i,s,n]=t,o=[[i,s,n]],r=E(this,ms,fm).call(this,n);for(let a=0;a<r;a++){const[l,c]=g(this,Ln)[a];for(let d=0,h=o.length;d<h;d++){const[,u,f]=o[d];if(!(c<=u||f<=l)){if(u>=l){if(f>c)o[d][1]=c;else{if(h===1)return[];o.splice(d,1),d--,h--}continue}o[d][2]=l,f>c&&o.push([i,c,f])}}}return o};var $f,Lh;class p2 extends WF{constructor(i,s){super();F(this,$f);F(this,Lh);x(this,Lh,i),x(this,$f,s)}toSVGPath(){const i=[];for(const s of g(this,Lh)){let[n,o]=s;i.push(`M${n} ${o}`);for(let r=2;r<s.length;r+=2){const a=s[r],l=s[r+1];a===n?(i.push(`V${l}`),o=l):l===o&&(i.push(`H${a}`),n=a)}i.push("Z")}return i.join(" ")}serialize([i,s,n,o],r){const a=[],l=n-i,c=o-s;for(const d of g(this,Lh)){const h=new Array(d.length);for(let u=0;u<d.length;u+=2)h[u]=i+d[u]*l,h[u+1]=o-d[u+1]*c;a.push(h)}return a}get box(){return g(this,$f)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}$f=new WeakMap,Lh=new WeakMap;class kb extends jm{newFreeDrawOutline(t,i,s,n,o,r){return new m2(t,i,s,n,o,r)}get classNamesForDrawing(){return["highlight","free"]}}class m2 extends XF{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,i,s,n,o,r=0){return new kb(t,i,s,n,o,r)}}var On,wc,Oh,mi,Uf,Nh,jf,Kf,La,Nn,Hh,qf,Dt,_b,Lb,Ob,Cl,tP,oa;const ws=class ws{constructor({editor:t=null,uiManager:i=null}){F(this,Dt);F(this,On,null);F(this,wc,null);F(this,Oh);F(this,mi,null);F(this,Uf,!1);F(this,Nh,!1);F(this,jf,null);F(this,Kf);F(this,La,null);F(this,Nn,null);F(this,Hh);var s;t?(x(this,Nh,!1),x(this,Hh,ze.HIGHLIGHT_COLOR),x(this,jf,t)):(x(this,Nh,!0),x(this,Hh,ze.HIGHLIGHT_DEFAULT_COLOR)),x(this,Nn,(t==null?void 0:t._uiManager)||i),x(this,Kf,g(this,Nn)._eventBus),x(this,Oh,(t==null?void 0:t.color)||((s=g(this,Nn))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),g(ws,qf)||x(ws,qf,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ut(this,"_keyboardManager",new hp([[["Escape","mac+Escape"],ws.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ws.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ws.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ws.prototype._moveToPrevious],[["Home","mac+Home"],ws.prototype._moveToBeginning],[["End","mac+End"],ws.prototype._moveToEnd]]))}renderButton(){const t=x(this,On,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const i=g(this,Nn)._signal;t.addEventListener("click",E(this,Dt,Cl).bind(this),{signal:i}),t.addEventListener("keydown",E(this,Dt,Ob).bind(this),{signal:i});const s=x(this,wc,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=g(this,Oh),t.append(s),t}renderMainDropdown(){const t=x(this,mi,E(this,Dt,_b).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===g(this,On)){E(this,Dt,Cl).call(this,t);return}const i=t.target.getAttribute("data-color");i&&E(this,Dt,Lb).call(this,i,t)}_moveToNext(t){var i,s;if(!g(this,Dt,oa)){E(this,Dt,Cl).call(this,t);return}if(t.target===g(this,On)){(i=g(this,mi).firstChild)==null||i.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var i,s;if(t.target===((i=g(this,mi))==null?void 0:i.firstChild)||t.target===g(this,On)){g(this,Dt,oa)&&this._hideDropdownFromKeyboard();return}g(this,Dt,oa)||E(this,Dt,Cl).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var i;if(!g(this,Dt,oa)){E(this,Dt,Cl).call(this,t);return}(i=g(this,mi).firstChild)==null||i.focus()}_moveToEnd(t){var i;if(!g(this,Dt,oa)){E(this,Dt,Cl).call(this,t);return}(i=g(this,mi).lastChild)==null||i.focus()}hideDropdown(){var t,i;(t=g(this,mi))==null||t.classList.add("hidden"),(i=g(this,La))==null||i.abort(),x(this,La,null)}_hideDropdownFromKeyboard(){var t;if(!g(this,Nh)){if(!g(this,Dt,oa)){(t=g(this,jf))==null||t.unselect();return}this.hideDropdown(),g(this,On).focus({preventScroll:!0,focusVisible:g(this,Uf)})}}updateColor(t){if(g(this,wc)&&(g(this,wc).style.backgroundColor=t),!g(this,mi))return;const i=g(this,Nn).highlightColors.values();for(const s of g(this,mi).children)s.setAttribute("aria-selected",i.next().value===t)}destroy(){var t,i;(t=g(this,On))==null||t.remove(),x(this,On,null),x(this,wc,null),(i=g(this,mi))==null||i.remove(),x(this,mi,null)}};On=new WeakMap,wc=new WeakMap,Oh=new WeakMap,mi=new WeakMap,Uf=new WeakMap,Nh=new WeakMap,jf=new WeakMap,Kf=new WeakMap,La=new WeakMap,Nn=new WeakMap,Hh=new WeakMap,qf=new WeakMap,Dt=new WeakSet,_b=function(){const t=document.createElement("div"),i=g(this,Nn)._signal;t.addEventListener("contextmenu",vn,{signal:i}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,n]of g(this,Nn).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",n),o.title=s,o.setAttribute("data-l10n-id",g(ws,qf)[s]);const r=document.createElement("span");o.append(r),r.className="swatch",r.style.backgroundColor=n,o.setAttribute("aria-selected",n===g(this,Oh)),o.addEventListener("click",E(this,Dt,Lb).bind(this,n),{signal:i}),t.append(o)}return t.addEventListener("keydown",E(this,Dt,Ob).bind(this),{signal:i}),t},Lb=function(t,i){i.stopPropagation(),g(this,Kf).dispatch("switchannotationeditorparams",{source:this,type:g(this,Hh),value:t})},Ob=function(t){ws._keyboardManager.exec(this,t)},Cl=function(t){if(g(this,Dt,oa)){this.hideDropdown();return}if(x(this,Uf,t.detail===0),g(this,La)||(x(this,La,new AbortController),window.addEventListener("pointerdown",E(this,Dt,tP).bind(this),{signal:g(this,Nn).combinedSignal(g(this,La))})),g(this,mi)){g(this,mi).classList.remove("hidden");return}const i=x(this,mi,E(this,Dt,_b).call(this));g(this,On).append(i)},tP=function(t){var i;(i=g(this,mi))!=null&&i.contains(t.target)||this.hideDropdown()},oa=function(){return g(this,mi)&&!g(this,mi).classList.contains("hidden")},F(ws,qf,null);let Km=ws;var Gh,Yf,vr,bc,Bh,ln,Xf,Qf,yc,Hn,Ji,xs,Vh,Cr,vi,zh,cn,Jf,Ke,Nb,pm,iP,sP,nP,Hb,wl,gn,xd,oP,mm,ju,rP,aP,lP,cP,dP;const St=class St extends Tt{constructor(i){super({...i,name:"highlightEditor"});F(this,Ke);F(this,Gh,null);F(this,Yf,0);F(this,vr);F(this,bc,null);F(this,Bh,null);F(this,ln,null);F(this,Xf,null);F(this,Qf,0);F(this,yc,null);F(this,Hn,null);F(this,Ji,null);F(this,xs,!1);F(this,Vh,null);F(this,Cr);F(this,vi,null);F(this,zh,"");F(this,cn);F(this,Jf,"");this.color=i.color||St._defaultColor,x(this,cn,i.thickness||St._defaultThickness),x(this,Cr,i.opacity||St._defaultOpacity),x(this,vr,i.boxes||null),x(this,Jf,i.methodOfCreation||""),x(this,zh,i.text||""),this._isDraggable=!1,i.highlightId>-1?(x(this,xs,!0),E(this,Ke,pm).call(this,i),E(this,Ke,wl).call(this)):g(this,vr)&&(x(this,Gh,i.anchorNode),x(this,Yf,i.anchorOffset),x(this,Xf,i.focusNode),x(this,Qf,i.focusOffset),E(this,Ke,Nb).call(this),E(this,Ke,wl).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const i=St.prototype;return ut(this,"_keyboardManager",new hp([[["ArrowLeft","mac+ArrowLeft"],i._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],i._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],i._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],i._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:g(this,xs)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:g(this,cn),methodOfCreation:g(this,Jf)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(i){return{numberOfColors:i.get("color").size}}static initialize(i,s){var n;Tt.initialize(i,s),St._defaultColor||(St._defaultColor=((n=s.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(i,s){switch(i){case ze.HIGHLIGHT_DEFAULT_COLOR:St._defaultColor=s;break;case ze.HIGHLIGHT_THICKNESS:St._defaultThickness=s;break}}translateInPage(i,s){}get toolbarPosition(){return g(this,Vh)}updateParams(i,s){switch(i){case ze.HIGHLIGHT_COLOR:E(this,Ke,iP).call(this,s);break;case ze.HIGHLIGHT_THICKNESS:E(this,Ke,sP).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ze.HIGHLIGHT_DEFAULT_COLOR,St._defaultColor],[ze.HIGHLIGHT_THICKNESS,St._defaultThickness]]}get propertiesToUpdate(){return[[ze.HIGHLIGHT_COLOR,this.color||St._defaultColor],[ze.HIGHLIGHT_THICKNESS,g(this,cn)||St._defaultThickness],[ze.HIGHLIGHT_FREE,g(this,xs)]]}async addEditToolbar(){const i=await super.addEditToolbar();return i?(this._uiManager.highlightColors&&(x(this,Bh,new Km({editor:this})),i.addColorPicker(g(this,Bh))),i):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,Ke,ju).call(this))}getBaseTranslation(){return[0,0]}getRect(i,s){return super.getRect(i,s,E(this,Ke,ju).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){E(this,Ke,Hb).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Ke,wl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(i){var n;let s=!1;this.parent&&!i?E(this,Ke,Hb).call(this):i&&(E(this,Ke,wl).call(this,i),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(i),this.show(this._isVisible),s&&this.select()}rotate(i){var o,r,a;const{drawLayer:s}=this.parent;let n;g(this,xs)?(i=(i-this.rotation+360)%360,n=E(o=St,gn,xd).call(o,g(this,Hn).box,i)):n=E(r=St,gn,xd).call(r,this,i),s.rotate(g(this,Ji),i),s.rotate(g(this,vi),i),s.updateBox(g(this,Ji),n),s.updateBox(g(this,vi),E(a=St,gn,xd).call(a,g(this,ln).box,i))}render(){if(this.div)return this.div;const i=super.render();g(this,zh)&&(i.setAttribute("aria-label",g(this,zh)),i.setAttribute("role","mark")),g(this,xs)?i.classList.add("free"):this.div.addEventListener("keydown",E(this,Ke,oP).bind(this),{signal:this._uiManager._signal});const s=x(this,yc,document.createElement("div"));i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=g(this,bc);const[n,o]=this.parentDimensions;return this.setDims(this.width*n,this.height*o),$m(this,g(this,yc),["pointerover","pointerleave"]),this.enableEditing(),i}pointerover(){this.isSelected||this.parent.drawLayer.addClass(g(this,vi),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(g(this,vi),"hovered")}_moveCaret(i){switch(this.parent.unselect(this),i){case 0:case 2:E(this,Ke,mm).call(this,!0);break;case 1:case 3:E(this,Ke,mm).call(this,!1);break}}select(){var i,s;super.select(),g(this,vi)&&((i=this.parent)==null||i.drawLayer.removeClass(g(this,vi),"hovered"),(s=this.parent)==null||s.drawLayer.addClass(g(this,vi),"selected"))}unselect(){var i;super.unselect(),g(this,vi)&&((i=this.parent)==null||i.drawLayer.removeClass(g(this,vi),"selected"),g(this,xs)||E(this,Ke,mm).call(this,!1))}get _mustFixPosition(){return!g(this,xs)}show(i=this._isVisible){super.show(i),this.parent&&(this.parent.drawLayer.show(g(this,Ji),i),this.parent.drawLayer.show(g(this,vi),i))}static startHighlighting(i,s,{target:n,x:o,y:r}){const{x:a,y:l,width:c,height:d}=n.getBoundingClientRect(),h=new AbortController,u=i.combinedSignal(h),f=m=>{m.preventDefault(),m.stopPropagation()},p=m=>{h.abort(),E(this,gn,cP).call(this,i,m)};window.addEventListener("blur",p,{signal:u}),window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("pointerdown",f,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",vn,{signal:u}),n.addEventListener("pointermove",E(this,gn,lP).bind(this,i),{signal:u}),this._freeHighlight=new kb({x:o,y:r},[a,l,c,d],i.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=i.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(i,s,n){var m,v,C,w;let o=null;if(i instanceof LF){const{data:{quadPoints:S,rect:y,rotation:R,id:A,color:P,opacity:T,popupRef:M},parent:{page:{pageNumber:N}}}=i;o=i={annotationType:qe.HIGHLIGHT,color:Array.from(P),opacity:T,quadPoints:S,boxes:null,pageIndex:N-1,rect:y.slice(0),rotation:R,id:A,deleted:!1,popupRef:M}}else if(i instanceof wS){const{data:{inkLists:S,rect:y,rotation:R,id:A,color:P,borderStyle:{rawWidth:T},popupRef:M},parent:{page:{pageNumber:N}}}=i;o=i={annotationType:qe.HIGHLIGHT,color:Array.from(P),thickness:T,inkLists:S,boxes:null,pageIndex:N-1,rect:y.slice(0),rotation:R,id:A,deleted:!1,popupRef:M}}const{color:r,quadPoints:a,inkLists:l,opacity:c}=i,d=await super.deserialize(i,s,n);d.color=ke.makeHexColor(...r),x(d,Cr,c||1),l&&x(d,cn,i.thickness),d.annotationElementId=i.id||null,d._initialData=o;const[h,u]=d.pageDimensions,[f,p]=d.pageTranslation;if(a){const S=x(d,vr,[]);for(let y=0;y<a.length;y+=8)S.push({x:(a[y]-f)/h,y:1-(a[y+1]-p)/u,width:(a[y+2]-a[y])/h,height:(a[y+1]-a[y+5])/u});E(m=d,Ke,Nb).call(m),E(v=d,Ke,wl).call(v),d.rotate(d.rotation)}else if(l){x(d,xs,!0);const S=l[0],y={x:S[0]-f,y:u-(S[1]-p)},R=new kb(y,[0,0,h,u],1,g(d,cn)/2,!0,.001);for(let T=0,M=S.length;T<M;T+=2)y.x=S[T]-f,y.y=u-(S[T+1]-p),R.add(y);const{id:A,clipPathId:P}=s.drawLayer.draw(R,d.color,d._defaultOpacity,!0);E(C=d,Ke,pm).call(C,{highlightOutlines:R.getOutlines(),highlightId:A,clipPathId:P}),E(w=d,Ke,wl).call(w)}return d}serialize(i=!1){if(this.isEmpty()||i)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),n=Tt._colorManager.convert(this.color),o={annotationType:qe.HIGHLIGHT,color:n,opacity:g(this,Cr),thickness:g(this,cn),quadPoints:E(this,Ke,rP).call(this),outlines:E(this,Ke,aP).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:E(this,Ke,ju).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!E(this,Ke,dP).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(i){return i.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Gh=new WeakMap,Yf=new WeakMap,vr=new WeakMap,bc=new WeakMap,Bh=new WeakMap,ln=new WeakMap,Xf=new WeakMap,Qf=new WeakMap,yc=new WeakMap,Hn=new WeakMap,Ji=new WeakMap,xs=new WeakMap,Vh=new WeakMap,Cr=new WeakMap,vi=new WeakMap,zh=new WeakMap,cn=new WeakMap,Jf=new WeakMap,Ke=new WeakSet,Nb=function(){const i=new Cx(g(this,vr),.001);x(this,Hn,i.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=g(this,Hn).box;const s=new Cx(g(this,vr),.0025,.001,this._uiManager.direction==="ltr");x(this,ln,s.getOutlines());const{lastPoint:n}=g(this,ln).box;x(this,Vh,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},pm=function({highlightOutlines:i,highlightId:s,clipPathId:n}){var h,u;if(x(this,Hn,i),x(this,ln,i.getNewOutline(g(this,cn)/2+1.5,.0025)),s>=0)x(this,Ji,s),x(this,bc,n),this.parent.drawLayer.finalizeLine(s,i),x(this,vi,this.parent.drawLayer.drawOutline(g(this,ln)));else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(g(this,Ji),i),this.parent.drawLayer.updateBox(g(this,Ji),E(h=St,gn,xd).call(h,g(this,Hn).box,(f-this.rotation+360)%360)),this.parent.drawLayer.updateLine(g(this,vi),g(this,ln)),this.parent.drawLayer.updateBox(g(this,vi),E(u=St,gn,xd).call(u,g(this,ln).box,f))}const{x:r,y:a,width:l,height:c}=i.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=l,this.height=c;break;case 90:{const[f,p]=this.parentDimensions;this.x=a,this.y=1-r,this.width=l*p/f,this.height=c*f/p;break}case 180:this.x=1-r,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[f,p]=this.parentDimensions;this.x=1-a,this.y=r,this.width=l*p/f,this.height=c*f/p;break}}const{lastPoint:d}=g(this,ln).box;x(this,Vh,[(d[0]-r)/l,(d[1]-a)/c])},iP=function(i){const s=(r,a)=>{var l,c,d;this.color=r,(l=this.parent)==null||l.drawLayer.changeColor(g(this,Ji),r),(c=g(this,Bh))==null||c.updateColor(r),x(this,Cr,a),(d=this.parent)==null||d.drawLayer.changeOpacity(g(this,Ji),a)},n=this.color,o=g(this,Cr);this.addCommands({cmd:s.bind(this,i,St._defaultOpacity),undo:s.bind(this,n,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(i)},!0)},sP=function(i){const s=g(this,cn),n=o=>{x(this,cn,o),E(this,Ke,nP).call(this,o)};this.addCommands({cmd:n.bind(this,i),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:i},!0)},nP=function(i){if(!g(this,xs))return;E(this,Ke,pm).call(this,{highlightOutlines:g(this,Hn).getNewOutline(i/2)}),this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)},Hb=function(){g(this,Ji)===null||!this.parent||(this.parent.drawLayer.remove(g(this,Ji)),x(this,Ji,null),this.parent.drawLayer.remove(g(this,vi)),x(this,vi,null))},wl=function(i=this.parent){g(this,Ji)===null&&({id:os(this,Ji)._,clipPathId:os(this,bc)._}=i.drawLayer.draw(g(this,Hn),this.color,g(this,Cr)),x(this,vi,i.drawLayer.drawOutline(g(this,ln))),g(this,yc)&&(g(this,yc).style.clipPath=g(this,bc)))},gn=new WeakSet,xd=function({x:i,y:s,width:n,height:o},r){switch(r){case 90:return{x:1-s-o,y:i,width:o,height:n};case 180:return{x:1-i-n,y:1-s-o,width:n,height:o};case 270:return{x:s,y:1-i-n,width:o,height:n}}return{x:i,y:s,width:n,height:o}},oP=function(i){St._keyboardManager.exec(this,i)},mm=function(i){if(!g(this,Gh))return;const s=window.getSelection();i?s.setPosition(g(this,Gh),g(this,Yf)):s.setPosition(g(this,Xf),g(this,Qf))},ju=function(){return g(this,xs)?this.rotation:0},rP=function(){if(g(this,xs))return null;const[i,s]=this.pageDimensions,[n,o]=this.pageTranslation,r=g(this,vr),a=new Float32Array(r.length*8);let l=0;for(const{x:c,y:d,width:h,height:u}of r){const f=c*i+n,p=(1-d-u)*s+o;a[l]=a[l+4]=f,a[l+1]=a[l+3]=p,a[l+2]=a[l+6]=f+h*i,a[l+5]=a[l+7]=p+u*s,l+=8}return a},aP=function(i){return g(this,Hn).serialize(i,E(this,Ke,ju).call(this))},lP=function(i,s){this._freeHighlight.add(s)&&i.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},cP=function(i,s){this._freeHighlight.isEmpty()?i.drawLayer.remove(this._freeHighlightId):i.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},dP=function(i){const{color:s}=this._initialData;return i.color.some((n,o)=>n!==s[o])},F(St,gn),Ne(St,"_defaultColor",null),Ne(St,"_defaultOpacity",1),Ne(St,"_defaultThickness",12),Ne(St,"_type","highlight"),Ne(St,"_editorType",qe.HIGHLIGHT),Ne(St,"_freeHighlightId",-1),Ne(St,"_freeHighlight",null),Ne(St,"_freeHighlightClipId","");let qm=St;var Sc,xc,Ro,wr,dn,Rc,Ec,Ac,br,Wh,Fc,Pc,Oa,pe,hP,uP,gP,fP,Bb,pP,Vb,mP,vP,CP,wP,bP,bl,zb,Wb,$b,vm,Cm,Rd,Ub,wm,Kr,yP,jb,SP,xP,Kb,bm,Ku;const jt=class jt extends Tt{constructor(i){super({...i,name:"inkEditor"});F(this,pe);F(this,Sc,0);F(this,xc,0);F(this,Ro,null);F(this,wr,new Path2D);F(this,dn,!1);F(this,Rc,null);F(this,Ec,!1);F(this,Ac,!1);F(this,br,null);F(this,Wh,null);F(this,Fc,0);F(this,Pc,0);F(this,Oa,null);this.color=i.color||null,this.thickness=i.thickness||null,this.opacity=i.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(i,s){Tt.initialize(i,s)}static updateDefaultParams(i,s){switch(i){case ze.INK_THICKNESS:jt._defaultThickness=s;break;case ze.INK_COLOR:jt._defaultColor=s;break;case ze.INK_OPACITY:jt._defaultOpacity=s/100;break}}updateParams(i,s){switch(i){case ze.INK_THICKNESS:E(this,pe,hP).call(this,s);break;case ze.INK_COLOR:E(this,pe,uP).call(this,s);break;case ze.INK_OPACITY:E(this,pe,gP).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ze.INK_THICKNESS,jt._defaultThickness],[ze.INK_COLOR,jt._defaultColor||Tt._defaultLineColor],[ze.INK_OPACITY,Math.round(jt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[ze.INK_THICKNESS,this.thickness||jt._defaultThickness],[ze.INK_COLOR,this.color||jt._defaultColor||Tt._defaultLineColor],[ze.INK_OPACITY,Math.round(100*(this.opacity??jt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(E(this,pe,vm).call(this),E(this,pe,Cm).call(this)),this.isAttachedToDOM||(this.parent.add(this),E(this,pe,Rd).call(this)),E(this,pe,Ku).call(this)))}remove(){var i;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,g(this,Ro)&&(clearTimeout(g(this,Ro)),x(this,Ro,null)),(i=g(this,br))==null||i.disconnect(),x(this,br,null),super.remove())}setParent(i){!this.parent&&i?this._uiManager.removeShouldRescale(this):this.parent&&i===null&&this._uiManager.addShouldRescale(this),super.setParent(i)}onScaleChanging(){const[i,s]=this.parentDimensions,n=this.width*i,o=this.height*s;this.setDimensions(n,o)}enableEditMode(){g(this,dn)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,E(this,pe,zb).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),E(this,pe,Wb).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){g(this,dn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),x(this,dn,!0),this.div.classList.add("disabled"),E(this,pe,Ku).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(i){this._focusEventsAllowed&&(super.focusin(i),this.enableEditMode())}canvasPointerdown(i){i.button!==0||!this.isInEditMode()||g(this,dn)||(this.setInForeground(),i.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),E(this,pe,pP).call(this,i.offsetX,i.offsetY))}canvasPointermove(i){i.preventDefault(),E(this,pe,Vb).call(this,i.offsetX,i.offsetY)}canvasPointerup(i){i.preventDefault(),E(this,pe,$b).call(this,i)}canvasPointerleave(i){E(this,pe,$b).call(this,i)}get isResizable(){return!this.isEmpty()&&g(this,dn)}render(){if(this.div)return this.div;let i,s;this.width&&(i=this.x,s=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,o,r,a]=E(this,pe,fP).call(this);if(this.setAt(n,o,0,0),this.setDims(r,a),E(this,pe,vm).call(this),this.width){const[l,c]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*c),this.setAt(i*l,s*c,this.width*l,this.height*c),x(this,Ac,!0),E(this,pe,Rd).call(this),this.setDims(this.width*l,this.height*c),E(this,pe,bl).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return E(this,pe,Cm).call(this),this.div}setDimensions(i,s){const n=Math.round(i),o=Math.round(s);if(g(this,Fc)===n&&g(this,Pc)===o)return;x(this,Fc,n),x(this,Pc,o),this.canvas.style.visibility="hidden";const[r,a]=this.parentDimensions;this.width=i/r,this.height=s/a,this.fixAndSetPosition(),g(this,dn)&&E(this,pe,Ub).call(this,i,s),E(this,pe,Rd).call(this),E(this,pe,bl).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(i,s,n){var v,C,w;if(i instanceof wS)return null;const o=await super.deserialize(i,s,n);o.thickness=i.thickness,o.color=ke.makeHexColor(...i.color),o.opacity=i.opacity;const[r,a]=o.pageDimensions,l=o.width*r,c=o.height*a,d=o.parentScale,h=i.thickness/2;x(o,dn,!0),x(o,Fc,Math.round(l)),x(o,Pc,Math.round(c));const{paths:u,rect:f,rotation:p}=i;for(let{bezier:S}of u){S=E(v=jt,Kr,SP).call(v,S,f,p);const y=[];o.paths.push(y);let R=d*(S[0]-h),A=d*(S[1]-h);for(let T=2,M=S.length;T<M;T+=6){const N=d*(S[T]-h),_=d*(S[T+1]-h),L=d*(S[T+2]-h),z=d*(S[T+3]-h),q=d*(S[T+4]-h),B=d*(S[T+5]-h);y.push([[R,A],[N,_],[L,z],[q,B]]),R=q,A=B}const P=E(this,Kr,yP).call(this,y);o.bezierPath2D.push(P)}const m=E(C=o,pe,Kb).call(C);return x(o,xc,Math.max(Tt.MIN_SIZE,m[2]-m[0])),x(o,Sc,Math.max(Tt.MIN_SIZE,m[3]-m[1])),E(w=o,pe,Ub).call(w,l,c),o}serialize(){if(this.isEmpty())return null;const i=this.getRect(0,0),s=Tt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:qe.INK,color:s,thickness:this.thickness,opacity:this.opacity,paths:E(this,pe,xP).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,i),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Sc=new WeakMap,xc=new WeakMap,Ro=new WeakMap,wr=new WeakMap,dn=new WeakMap,Rc=new WeakMap,Ec=new WeakMap,Ac=new WeakMap,br=new WeakMap,Wh=new WeakMap,Fc=new WeakMap,Pc=new WeakMap,Oa=new WeakMap,pe=new WeakSet,hP=function(i){const s=o=>{this.thickness=o,E(this,pe,Ku).call(this)},n=this.thickness;this.addCommands({cmd:s.bind(this,i),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},uP=function(i){const s=o=>{this.color=o,E(this,pe,bl).call(this)},n=this.color;this.addCommands({cmd:s.bind(this,i),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},gP=function(i){const s=o=>{this.opacity=o,E(this,pe,bl).call(this)};i/=100;const n=this.opacity;this.addCommands({cmd:s.bind(this,i),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},fP=function(){const{parentRotation:i,parentDimensions:[s,n]}=this;switch(i){case 90:return[0,n,n,s];case 180:return[s,n,s,n];case 270:return[s,0,n,s];default:return[0,0,s,n]}},Bb=function(){const{ctx:i,color:s,opacity:n,thickness:o,parentScale:r,scaleFactor:a}=this;i.lineWidth=o*r/a,i.lineCap="round",i.lineJoin="round",i.miterLimit=10,i.strokeStyle=`${s}${HL(n)}`},pP=function(i,s){this.canvas.addEventListener("contextmenu",vn,{signal:this._uiManager._signal}),E(this,pe,Wb).call(this),x(this,Rc,new AbortController);const n=this._uiManager.combinedSignal(g(this,Rc));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:n}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:n}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:n}),this.isEditing=!0,g(this,Ac)||(x(this,Ac,!0),E(this,pe,Rd).call(this),this.thickness||(this.thickness=jt._defaultThickness),this.color||(this.color=jt._defaultColor||Tt._defaultLineColor),this.opacity??(this.opacity=jt._defaultOpacity)),this.currentPath.push([i,s]),x(this,Ec,!1),E(this,pe,Bb).call(this),x(this,Oa,()=>{E(this,pe,CP).call(this),g(this,Oa)&&window.requestAnimationFrame(g(this,Oa))}),window.requestAnimationFrame(g(this,Oa))},Vb=function(i,s){const[n,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&i===n&&s===o)return;const r=this.currentPath;let a=g(this,wr);if(r.push([i,s]),x(this,Ec,!0),r.length<=2){a.moveTo(...r[0]),a.lineTo(i,s);return}r.length===3&&(x(this,wr,a=new Path2D),a.moveTo(...r[0])),E(this,pe,wP).call(this,a,...r.at(-3),...r.at(-2),i,s)},mP=function(){if(this.currentPath.length===0)return;const i=this.currentPath.at(-1);g(this,wr).lineTo(...i)},vP=function(i,s){x(this,Oa,null),i=Math.min(Math.max(i,0),this.canvas.width),s=Math.min(Math.max(s,0),this.canvas.height),E(this,pe,Vb).call(this,i,s),E(this,pe,mP).call(this);let n;if(this.currentPath.length!==1)n=E(this,pe,bP).call(this);else{const c=[i,s];n=[[c,c.slice(),c.slice(),c]]}const o=g(this,wr),r=this.currentPath;this.currentPath=[],x(this,wr,new Path2D);const a=()=>{this.allRawPaths.push(r),this.paths.push(n),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(E(this,pe,vm).call(this),E(this,pe,Cm).call(this)),E(this,pe,Ku).call(this))};this.addCommands({cmd:a,undo:l,mustExec:!0})},CP=function(){if(!g(this,Ec))return;x(this,Ec,!1);const i=Math.ceil(this.thickness*this.parentScale),s=this.currentPath.slice(-3),n=s.map(a=>a[0]),o=s.map(a=>a[1]);Math.min(...n)-i,Math.max(...n)+i,Math.min(...o)-i,Math.max(...o)+i;const{ctx:r}=this;r.save(),r.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)r.stroke(a);r.stroke(g(this,wr)),r.restore()},wP=function(i,s,n,o,r,a,l){const c=(s+o)/2,d=(n+r)/2,h=(o+a)/2,u=(r+l)/2;i.bezierCurveTo(c+2*(o-c)/3,d+2*(r-d)/3,h+2*(o-h)/3,u+2*(r-u)/3,h,u)},bP=function(){const i=this.currentPath;if(i.length<=2)return[[i[0],i[0],i.at(-1),i.at(-1)]];const s=[];let n,[o,r]=i[0];for(n=1;n<i.length-2;n++){const[f,p]=i[n],[m,v]=i[n+1],C=(f+m)/2,w=(p+v)/2,S=[o+2*(f-o)/3,r+2*(p-r)/3],y=[C+2*(f-C)/3,w+2*(p-w)/3];s.push([[o,r],S,y,[C,w]]),[o,r]=[C,w]}const[a,l]=i[n],[c,d]=i[n+1],h=[o+2*(a-o)/3,r+2*(l-r)/3],u=[c+2*(a-c)/3,d+2*(l-d)/3];return s.push([[o,r],h,u,[c,d]]),s},bl=function(){if(this.isEmpty()){E(this,pe,wm).call(this);return}E(this,pe,Bb).call(this);const{canvas:i,ctx:s}=this;s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,i.width,i.height),E(this,pe,wm).call(this);for(const n of this.bezierPath2D)s.stroke(n)},zb=function(){if(g(this,Wh))return;x(this,Wh,new AbortController);const i=this._uiManager.combinedSignal(g(this,Wh));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:i})},Wb=function(){var i;(i=this.pointerdownAC)==null||i.abort(),this.pointerdownAC=null},$b=function(i){var s;(s=g(this,Rc))==null||s.abort(),x(this,Rc,null),E(this,pe,zb).call(this),g(this,Ro)&&clearTimeout(g(this,Ro)),x(this,Ro,setTimeout(()=>{x(this,Ro,null),this.canvas.removeEventListener("contextmenu",vn)},10)),E(this,pe,vP).call(this,i.offsetX,i.offsetY),this.addToAnnotationStorage(),this.setInBackground()},vm=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Cm=function(){x(this,br,new ResizeObserver(i=>{const s=i[0].contentRect;s.width&&s.height&&this.setDimensions(s.width,s.height)})),g(this,br).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var i;(i=g(this,br))==null||i.disconnect(),x(this,br,null)},{once:!0})},Rd=function(){if(!g(this,Ac))return;const[i,s]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*i),this.canvas.height=Math.ceil(this.height*s),E(this,pe,wm).call(this)},Ub=function(i,s){const n=E(this,pe,bm).call(this),o=(i-n)/g(this,xc),r=(s-n)/g(this,Sc);this.scaleFactor=Math.min(o,r)},wm=function(){const i=E(this,pe,bm).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+i,this.translationY*this.scaleFactor+i)},Kr=new WeakSet,yP=function(i){const s=new Path2D;for(let n=0,o=i.length;n<o;n++){const[r,a,l,c]=i[n];n===0&&s.moveTo(...r),s.bezierCurveTo(a[0],a[1],l[0],l[1],c[0],c[1])}return s},jb=function(i,s,n){const[o,r,a,l]=s;switch(n){case 0:for(let c=0,d=i.length;c<d;c+=2)i[c]+=o,i[c+1]=l-i[c+1];break;case 90:for(let c=0,d=i.length;c<d;c+=2){const h=i[c];i[c]=i[c+1]+o,i[c+1]=h+r}break;case 180:for(let c=0,d=i.length;c<d;c+=2)i[c]=a-i[c],i[c+1]+=r;break;case 270:for(let c=0,d=i.length;c<d;c+=2){const h=i[c];i[c]=a-i[c+1],i[c+1]=l-h}break;default:throw new Error("Invalid rotation")}return i},SP=function(i,s,n){const[o,r,a,l]=s;switch(n){case 0:for(let c=0,d=i.length;c<d;c+=2)i[c]-=o,i[c+1]=l-i[c+1];break;case 90:for(let c=0,d=i.length;c<d;c+=2){const h=i[c];i[c]=i[c+1]-r,i[c+1]=h-o}break;case 180:for(let c=0,d=i.length;c<d;c+=2)i[c]=a-i[c],i[c+1]-=r;break;case 270:for(let c=0,d=i.length;c<d;c+=2){const h=i[c];i[c]=l-i[c+1],i[c+1]=a-h}break;default:throw new Error("Invalid rotation")}return i},xP=function(i,s,n,o){var d,h;const r=[],a=this.thickness/2,l=i*s+a,c=i*n+a;for(const u of this.paths){const f=[],p=[];for(let m=0,v=u.length;m<v;m++){const[C,w,S,y]=u[m];if(C[0]===y[0]&&C[1]===y[1]&&v===1){const z=i*C[0]+l,q=i*C[1]+c;f.push(z,q),p.push(z,q);break}const R=i*C[0]+l,A=i*C[1]+c,P=i*w[0]+l,T=i*w[1]+c,M=i*S[0]+l,N=i*S[1]+c,_=i*y[0]+l,L=i*y[1]+c;m===0&&(f.push(R,A),p.push(R,A)),f.push(P,T,M,N,_,L),p.push(P,T),m===v-1&&p.push(_,L)}r.push({bezier:E(d=jt,Kr,jb).call(d,f,o,this.rotation),points:E(h=jt,Kr,jb).call(h,p,o,this.rotation)})}return r},Kb=function(){let i=1/0,s=-1/0,n=1/0,o=-1/0;for(const r of this.paths)for(const[a,l,c,d]of r){const h=ke.bezierBoundingBox(...a,...l,...c,...d);i=Math.min(i,h[0]),n=Math.min(n,h[1]),s=Math.max(s,h[2]),o=Math.max(o,h[3])}return[i,n,s,o]},bm=function(){return g(this,dn)?Math.ceil(this.thickness*this.parentScale):0},Ku=function(i=!1){if(this.isEmpty())return;if(!g(this,dn)){E(this,pe,bl).call(this);return}const s=E(this,pe,Kb).call(this),n=E(this,pe,bm).call(this);x(this,xc,Math.max(Tt.MIN_SIZE,s[2]-s[0])),x(this,Sc,Math.max(Tt.MIN_SIZE,s[3]-s[1]));const o=Math.ceil(n+g(this,xc)*this.scaleFactor),r=Math.ceil(n+g(this,Sc)*this.scaleFactor),[a,l]=this.parentDimensions;this.width=o/a,this.height=r/l,this.setAspectRatio(o,r);const c=this.translationX,d=this.translationY;this.translationX=-s[0],this.translationY=-s[1],E(this,pe,Rd).call(this),E(this,pe,bl).call(this),x(this,Fc,o),x(this,Pc,r),this.setDims(o,r);const h=i?n/this.scaleFactor/2:0;this.translate(c-this.translationX-h,d-this.translationY-h)},F(jt,Kr),Ne(jt,"_defaultColor",null),Ne(jt,"_defaultOpacity",1),Ne(jt,"_defaultThickness",1),Ne(jt,"_type","ink"),Ne(jt,"_editorType",qe.INK);let Gb=jt;var qt,Hi,Na,yr,Ha,$h,Eo,Sr,Ao,Gs,Uh,lt,qu,Yu,ym,Yb,RP,Sm,Xb,xm,EP,AP;const pg=class pg extends Tt{constructor(i){super({...i,name:"stampEditor"});F(this,lt);F(this,qt,null);F(this,Hi,null);F(this,Na,null);F(this,yr,null);F(this,Ha,null);F(this,$h,"");F(this,Eo,null);F(this,Sr,null);F(this,Ao,null);F(this,Gs,!1);F(this,Uh,!1);x(this,yr,i.bitmapUrl),x(this,Ha,i.bitmapFile)}static initialize(i,s){Tt.initialize(i,s)}static get supportedTypes(){return ut(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return ut(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(i){return this.supportedTypes.includes(i)}static paste(i,s){s.pasteEditor(qe.STAMP,{bitmapFile:i.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var i;return{type:"stamp",hasAltText:!!((i=this.altTextData)!=null&&i.altText)}}static computeTelemetryFinalData(i){const s=i.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(i=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:r,height:a}=i||this.copyCanvas(null,null,!0).imageData,l=await n.guess({name:"altText",request:{data:o,width:r,height:a,channels:o.length/(r*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),s&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var i,s;g(this,Hi)&&(x(this,qt,null),this._uiManager.imageManager.deleteId(g(this,Hi)),(i=g(this,Eo))==null||i.remove(),x(this,Eo,null),(s=g(this,Sr))==null||s.disconnect(),x(this,Sr,null),g(this,Ao)&&(clearTimeout(g(this,Ao)),x(this,Ao,null))),super.remove()}rebuild(){if(!this.parent){g(this,Hi)&&E(this,lt,ym).call(this);return}super.rebuild(),this.div!==null&&(g(this,Hi)&&g(this,Eo)===null&&E(this,lt,ym).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(g(this,Na)||g(this,qt)||g(this,yr)||g(this,Ha)||g(this,Hi))}get isResizable(){return!0}render(){if(this.div)return this.div;let i,s;if(this.width&&(i=this.x,s=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),g(this,qt)?E(this,lt,Yb).call(this):E(this,lt,ym).call(this),this.width&&!this.annotationElementId){const[n,o]=this.parentDimensions;this.setAt(i*n,s*o,this.width*n,this.height*o)}return this.div}copyCanvas(i,s,n=!1){var f;i||(i=224);const{width:o,height:r}=g(this,qt),a=new Uw;let l=g(this,qt),c=o,d=r,h=null;if(s){if(o>s||r>s){const T=Math.min(s/o,s/r);c=Math.floor(o*T),d=Math.floor(r*T)}h=document.createElement("canvas");const p=h.width=Math.ceil(c*a.sx),m=h.height=Math.ceil(d*a.sy);g(this,Gs)||(l=E(this,lt,Sm).call(this,p,m));const v=h.getContext("2d");v.filter=this._uiManager.hcmFilter;let C="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":(f=window.matchMedia)!=null&&f.call(window,"(prefers-color-scheme: dark)").matches&&(C="#8f8f9d",w="#42414d");const S=15,y=S*a.sx,R=S*a.sy,A=new OffscreenCanvas(y*2,R*2),P=A.getContext("2d");P.fillStyle=C,P.fillRect(0,0,y*2,R*2),P.fillStyle=w,P.fillRect(0,0,y,R),P.fillRect(y,R,y,R),v.fillStyle=v.createPattern(A,"repeat"),v.fillRect(0,0,p,m),v.drawImage(l,0,0,l.width,l.height,0,0,p,m)}let u=null;if(n){let p,m;if(a.symmetric&&l.width<i&&l.height<i)p=l.width,m=l.height;else if(l=g(this,qt),o>i||r>i){const w=Math.min(i/o,i/r);p=Math.floor(o*w),m=Math.floor(r*w),g(this,Gs)||(l=E(this,lt,Sm).call(this,p,m))}const C=new OffscreenCanvas(p,m).getContext("2d",{willReadFrequently:!0});C.drawImage(l,0,0,l.width,l.height,0,0,p,m),u={width:p,height:m,data:C.getImageData(0,0,p,m).data}}return{canvas:h,width:c,height:d,imageData:u}}getImageForAltText(){return g(this,Eo)}static async deserialize(i,s,n){var m;let o=null;if(i instanceof OF){const{data:{rect:v,rotation:C,id:w,structParent:S,popupRef:y},container:R,parent:{page:{pageNumber:A}}}=i,P=R.querySelector("canvas"),T=n.imageManager.getFromCanvas(R.id,P);P.remove();const M=((m=await s._structTree.getAriaAttributes(`${lS}${w}`))==null?void 0:m.get("aria-label"))||"";o=i={annotationType:qe.STAMP,bitmapId:T.id,bitmap:T.bitmap,pageIndex:A-1,rect:v.slice(0),rotation:C,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:M},isSvg:!1,structParent:S,popupRef:y}}const r=await super.deserialize(i,s,n),{rect:a,bitmap:l,bitmapUrl:c,bitmapId:d,isSvg:h,accessibilityData:u}=i;d&&n.imageManager.isValidId(d)?(x(r,Hi,d),l&&x(r,qt,l)):x(r,yr,c),x(r,Gs,h);const[f,p]=r.pageDimensions;return r.width=(a[2]-a[0])/f,r.height=(a[3]-a[1])/p,r.annotationElementId=i.id||null,u&&(r.altTextData=u),r._initialData=o,x(r,Uh,!!o),r}serialize(i=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:qe.STAMP,bitmapId:g(this,Hi),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:g(this,Gs),structTreeParentId:this._structTreeParentId};if(i)return n.bitmapUrl=E(this,lt,xm).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n;const{decorative:o,altText:r}=this.serializeAltText(!1);if(!o&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const l=E(this,lt,AP).call(this,n);if(l.isSame)return null;l.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,s===null)return n;s.stamps||(s.stamps=new Map);const a=g(this,Gs)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!s.stamps.has(g(this,Hi)))s.stamps.set(g(this,Hi),{area:a,serialized:n}),n.bitmap=E(this,lt,xm).call(this,!1);else if(g(this,Gs)){const l=s.stamps.get(g(this,Hi));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=E(this,lt,xm).call(this,!1))}return n}renderAnnotationElement(i){return i.updateEdited({rect:this.getRect(0,0)}),null}};qt=new WeakMap,Hi=new WeakMap,Na=new WeakMap,yr=new WeakMap,Ha=new WeakMap,$h=new WeakMap,Eo=new WeakMap,Sr=new WeakMap,Ao=new WeakMap,Gs=new WeakMap,Uh=new WeakMap,lt=new WeakSet,qu=function(i,s=!1){if(!i){this.remove();return}x(this,qt,i.bitmap),s||(x(this,Hi,i.id),x(this,Gs,i.isSvg)),i.file&&x(this,$h,i.file.name),E(this,lt,Yb).call(this)},Yu=function(){if(x(this,Na,null),this._uiManager.enableWaiting(!1),!!g(this,Eo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&g(this,qt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&g(this,qt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},ym=function(){if(g(this,Hi)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(g(this,Hi)).then(n=>E(this,lt,qu).call(this,n,!0)).finally(()=>E(this,lt,Yu).call(this));return}if(g(this,yr)){const n=g(this,yr);x(this,yr,null),this._uiManager.enableWaiting(!0),x(this,Na,this._uiManager.imageManager.getFromUrl(n).then(o=>E(this,lt,qu).call(this,o)).finally(()=>E(this,lt,Yu).call(this)));return}if(g(this,Ha)){const n=g(this,Ha);x(this,Ha,null),this._uiManager.enableWaiting(!0),x(this,Na,this._uiManager.imageManager.getFromFile(n).then(o=>E(this,lt,qu).call(this,o)).finally(()=>E(this,lt,Yu).call(this)));return}const i=document.createElement("input");i.type="file",i.accept=pg.supportedTypesStr;const s=this._uiManager._signal;x(this,Na,new Promise(n=>{i.addEventListener("change",async()=>{if(!i.files||i.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(i.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,lt,qu).call(this,o)}n()},{signal:s}),i.addEventListener("cancel",()=>{this.remove(),n()},{signal:s})}).finally(()=>E(this,lt,Yu).call(this))),i.click()},Yb=function(){const{div:i}=this;let{width:s,height:n}=g(this,qt);const[o,r]=this.pageDimensions,a=.75;if(this.width)s=this.width*o,n=this.height*r;else if(s>a*o||n>a*r){const h=Math.min(a*o/s,a*r/n);s*=h,n*=h}const[l,c]=this.parentDimensions;this.setDims(s*l/o,n*c/r),this._uiManager.enableWaiting(!1);const d=x(this,Eo,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(i.hidden=!1),E(this,lt,Xb).call(this,s,n),E(this,lt,EP).call(this),g(this,Uh)||(this.parent.addUndoableEditor(this),x(this,Uh,!0)),this._reportTelemetry({action:"inserted_image"}),g(this,$h)&&d.setAttribute("aria-label",g(this,$h))},RP=function(i,s){var a;const[n,o]=this.parentDimensions;this.width=i/n,this.height=s/o,(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,g(this,Ao)!==null&&clearTimeout(g(this,Ao)),x(this,Ao,setTimeout(()=>{x(this,Ao,null),E(this,lt,Xb).call(this,i,s)},200))},Sm=function(i,s){const{width:n,height:o}=g(this,qt);let r=n,a=o,l=g(this,qt);for(;r>2*i||a>2*s;){const c=r,d=a;r>2*i&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(r,a);h.getContext("2d").drawImage(l,0,0,c,d,0,0,r,a),l=h.transferToImageBitmap()}return l},Xb=function(i,s){const n=new Uw,o=Math.ceil(i*n.sx),r=Math.ceil(s*n.sy),a=g(this,Eo);if(!a||a.width===o&&a.height===r)return;a.width=o,a.height=r;const l=g(this,Gs)?g(this,qt):E(this,lt,Sm).call(this,o,r),c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,o,r)},xm=function(i){if(i){if(g(this,Gs)){const o=this._uiManager.imageManager.getSvgUrl(g(this,Hi));if(o)return o}const s=document.createElement("canvas");return{width:s.width,height:s.height}=g(this,qt),s.getContext("2d").drawImage(g(this,qt),0,0),s.toDataURL()}if(g(this,Gs)){const[s,n]=this.pageDimensions,o=Math.round(this.width*s*Qa.PDF_TO_CSS_UNITS),r=Math.round(this.height*n*Qa.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(o,r);return a.getContext("2d").drawImage(g(this,qt),0,0,g(this,qt).width,g(this,qt).height,0,0,o,r),a.transferToImageBitmap()}return structuredClone(g(this,qt))},EP=function(){this._uiManager._signal&&(x(this,Sr,new ResizeObserver(i=>{const s=i[0].contentRect;s.width&&s.height&&E(this,lt,RP).call(this,s.width,s.height)})),g(this,Sr).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var i;(i=g(this,Sr))==null||i.disconnect(),x(this,Sr,null)},{once:!0}))},AP=function(i){var c;const{rect:s,pageIndex:n,accessibilityData:{altText:o}}=this._initialData,r=i.rect.every((d,h)=>Math.abs(d-s[h])<1),a=i.pageIndex===n,l=(((c=i.accessibilityData)==null?void 0:c.alt)||"")===o;return{isSame:r&&a&&l,isSameAltText:l}},Ne(pg,"_type","stamp"),Ne(pg,"_editorType",qe.STAMP);let qb=pg;var Tc,jh,Fo,Ga,xr,Bs,Ba,Kh,qh,Zi,Rr,He,Va,Ui,FP,Jb,Zb,ey,Rm;const Sn=class Sn{constructor({uiManager:t,pageIndex:i,div:s,structTreeLayer:n,accessibilityManager:o,annotationLayer:r,drawLayer:a,textLayer:l,viewport:c,l10n:d}){F(this,Ui);F(this,Tc);F(this,jh,!1);F(this,Fo,null);F(this,Ga,null);F(this,xr,null);F(this,Bs,new Map);F(this,Ba,!1);F(this,Kh,!1);F(this,qh,!1);F(this,Zi,null);F(this,Rr,null);F(this,He);const h=[...g(Sn,Va).values()];if(!Sn._initialized){Sn._initialized=!0;for(const u of h)u.initialize(d,t)}t.registerEditorTypes(h),x(this,He,t),this.pageIndex=i,this.div=s,x(this,Tc,o),x(this,Fo,r),this.viewport=c,x(this,Zi,l),this.drawLayer=a,this._structTree=n,g(this,He).addLayer(this)}get isEmpty(){return g(this,Bs).size===0}get isInvisible(){return this.isEmpty&&g(this,He).getMode()===qe.NONE}updateToolbar(t){g(this,He).updateToolbar(t)}updateMode(t=g(this,He).getMode()){switch(E(this,Ui,Rm).call(this),t){case qe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case qe.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case qe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;for(const s of g(Sn,Va).values())i.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var i;return t===((i=g(this,Zi))==null?void 0:i.div)}addInkEditorIfNeeded(t){if(g(this,He).getMode()!==qe.INK)return;if(!t){for(const s of g(this,Bs).values())if(s.isEmpty()){s.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){g(this,He).setEditingState(t)}addCommands(t){g(this,He).addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var i;(i=g(this,Fo))==null||i.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of g(this,Bs).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(g(this,He).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!g(this,Fo))return;const i=g(this,Fo).getEditableAnnotations();for(const s of i){if(s.hide(),g(this,He).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const n=await this.deserialize(s);n&&(this.addOrRebuild(n),n.enableEditing())}}disable(){var n;x(this,qh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,i=new Map;for(const o of g(this,Bs).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else i.set(o.annotationElementId,o);(n=this.getEditableAnnotation(o.annotationElementId))==null||n.show(),o.remove()}if(g(this,Fo)){const o=g(this,Fo).getEditableAnnotations();for(const r of o){const{id:a}=r.data;if(g(this,He).isDeletedAnnotationElement(a))continue;let l=i.get(a);if(l){l.resetAnnotationElement(r),l.show(!1),r.show();continue}l=t.get(a),l&&(g(this,He).addChangedExistingAnnotation(l),l.renderAnnotationElement(r)&&l.show(!1)),r.show()}}E(this,Ui,Rm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const o of g(Sn,Va).values())s.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,qh,!1)}getEditableAnnotation(t){var i;return((i=g(this,Fo))==null?void 0:i.getEditableAnnotation(t))||null}setActiveEditor(t){g(this,He).getActive()!==t&&g(this,He).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=g(this,Zi))!=null&&t.div&&!g(this,Rr)){x(this,Rr,new AbortController);const i=g(this,He).combinedSignal(g(this,Rr));g(this,Zi).div.addEventListener("pointerdown",E(this,Ui,FP).bind(this),{signal:i}),g(this,Zi).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=g(this,Zi))!=null&&t.div&&g(this,Rr)&&(g(this,Rr).abort(),x(this,Rr,null),g(this,Zi).div.classList.remove("highlighting"))}enableClick(){if(g(this,Ga))return;x(this,Ga,new AbortController);const t=g(this,He).combinedSignal(g(this,Ga));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){var t;(t=g(this,Ga))==null||t.abort(),x(this,Ga,null)}attach(t){g(this,Bs).set(t.id,t);const{annotationElementId:i}=t;i&&g(this,He).isDeletedAnnotationElement(i)&&g(this,He).removeDeletedAnnotationElement(t)}detach(t){var i;g(this,Bs).delete(t.id),(i=g(this,Tc))==null||i.removePointerInTextLayer(t.contentDiv),!g(this,qh)&&t.annotationElementId&&g(this,He).addDeletedAnnotationElement(t)}remove(t){this.detach(t),g(this,He).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,g(this,Kh)||this.addInkEditorIfNeeded(!1)}changeParent(t){var i;t.parent!==this&&(t.parent&&t.annotationElementId&&(g(this,He).addDeletedAnnotationElement(t.annotationElementId),Tt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(i=t.parent)==null||i.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),g(this,He).addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),g(this,He).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!g(this,xr)&&(t._focusEventsAllowed=!1,x(this,xr,setTimeout(()=>{x(this,xr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:g(this,He)._signal}),i.focus())},0))),t._structTreeParentId=(s=g(this,Tc))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getNextId(){return g(this,He).getId()}combinedSignal(t){return g(this,He).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=g(this,Ui,Jb))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,i){g(this,He).updateToolbar(t),g(this,He).updateMode(t);const{offsetX:s,offsetY:n}=E(this,Ui,ey).call(this),o=this.getNextId(),r=E(this,Ui,Zb).call(this,{parent:this,id:o,x:s,y:n,uiManager:g(this,He),isCentered:!0,...i});r&&this.add(r)}async deserialize(t){var i;return await((i=g(Sn,Va).get(t.annotationType??t.annotationEditorType))==null?void 0:i.deserialize(t,this,g(this,He)))||null}createAndAddNewEditor(t,i,s={}){const n=this.getNextId(),o=E(this,Ui,Zb).call(this,{parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:g(this,He),isCentered:i,...s});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(E(this,Ui,ey).call(this),!0)}setSelected(t){g(this,He).setSelected(t)}toggleSelected(t){g(this,He).toggleSelected(t)}unselect(t){g(this,He).unselect(t)}pointerup(t){const{isMac:i}=gs.platform;if(!(t.button!==0||t.ctrlKey&&i)&&t.target===this.div&&g(this,Ba)){if(x(this,Ba,!1),!g(this,jh)){x(this,jh,!0);return}if(g(this,He).getMode()===qe.STAMP){g(this,He).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(g(this,He).getMode()===qe.HIGHLIGHT&&this.enableTextSelection(),g(this,Ba)){x(this,Ba,!1);return}const{isMac:i}=gs.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;x(this,Ba,!0);const s=g(this,He).getActive();x(this,jh,!s||s.isEmpty())}findNewParent(t,i,s){const n=g(this,He).findParent(i,s);return n===null||n===this?!1:(n.changeParent(t),!0)}destroy(){var t,i;((t=g(this,He).getActive())==null?void 0:t.parent)===this&&(g(this,He).commitOrRemove(),g(this,He).setActiveEditor(null)),g(this,xr)&&(clearTimeout(g(this,xr)),x(this,xr,null));for(const s of g(this,Bs).values())(i=g(this,Tc))==null||i.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,g(this,Bs).clear(),g(this,He).removeLayer(this)}render({viewport:t}){this.viewport=t,Wc(this.div,t);for(const i of g(this,He).getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){g(this,He).commitOrRemove(),E(this,Ui,Rm).call(this);const i=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Wc(this.div,{rotation:s}),i!==s)for(const n of g(this,Bs).values())n.rotate(s);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return g(this,He).viewParameters.realScale}};Tc=new WeakMap,jh=new WeakMap,Fo=new WeakMap,Ga=new WeakMap,xr=new WeakMap,Bs=new WeakMap,Ba=new WeakMap,Kh=new WeakMap,qh=new WeakMap,Zi=new WeakMap,Rr=new WeakMap,He=new WeakMap,Va=new WeakMap,Ui=new WeakSet,FP=function(t){g(this,He).unselectAll();const{target:i}=t;if(i===g(this,Zi).div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&g(this,Zi).div.contains(i)){const{isMac:s}=gs.platform;if(t.button!==0||t.ctrlKey&&s)return;g(this,He).showAllEditors("highlight",!0,!0),g(this,Zi).div.classList.add("free"),this.toggleDrawing(),qm.startHighlighting(this,g(this,He).direction==="ltr",{target:g(this,Zi).div,x:t.x,y:t.y}),g(this,Zi).div.addEventListener("pointerup",()=>{g(this,Zi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:g(this,He)._signal}),t.preventDefault()}},Jb=function(){return g(Sn,Va).get(g(this,He).getMode())},Zb=function(t){const i=g(this,Ui,Jb);return i?new i.prototype.constructor(t):null},ey=function(){const{x:t,y:i,width:s,height:n}=this.div.getBoundingClientRect(),o=Math.max(0,t),r=Math.max(0,i),a=Math.min(window.innerWidth,t+s),l=Math.min(window.innerHeight,i+n),c=(o+a)/2-t,d=(r+l)/2-i,[h,u]=this.viewport.rotation%180===0?[c,d]:[d,c];return{offsetX:h,offsetY:u}},Rm=function(){x(this,Kh,!0);for(const t of g(this,Bs).values())t.isEmpty()&&t.remove();x(this,Kh,!1)},Ne(Sn,"_initialized",!1),F(Sn,Va,new Map([Db,Gb,qb,qm].map(t=>[t._editorType,t])));let Qb=Sn;var Po,Zf,di,Er,ep,iy,Jc,sy,PP;const Li=class Li{constructor({pageIndex:t}){F(this,Jc);F(this,Po,null);F(this,Zf,0);F(this,di,new Map);F(this,Er,new Map);this.pageIndex=t}setParent(t){if(!g(this,Po)){x(this,Po,t);return}if(g(this,Po)!==t){if(g(this,di).size>0)for(const i of g(this,di).values())i.remove(),t.append(i);x(this,Po,t)}}static get _svgFactory(){return ut(this,"_svgFactory",new CS)}draw(t,i,s,n=!1){const o=os(this,Zf)._++,r=E(this,Jc,sy).call(this,t.box);r.classList.add(...t.classNamesForDrawing);const a=Li._svgFactory.createElement("defs");r.append(a);const l=Li._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${o}`;l.setAttribute("id",c),l.setAttribute("d",t.toSVGPath()),n&&g(this,Er).set(o,l);const d=E(this,Jc,PP).call(this,a,c),h=Li._svgFactory.createElement("use");return r.append(h),r.setAttribute("fill",i),r.setAttribute("fill-opacity",s),h.setAttribute("href",`#${c}`),g(this,di).set(o,r),{id:o,clipPathId:`url(#${d})`}}drawOutline(t){const i=os(this,Zf)._++,s=E(this,Jc,sy).call(this,t.box);s.classList.add(...t.classNamesForOutlining);const n=Li._svgFactory.createElement("defs");s.append(n);const o=Li._svgFactory.createElement("path");n.append(o);const r=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",r),o.setAttribute("d",t.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let a;if(t.mustRemoveSelfIntersections){const d=Li._svgFactory.createElement("mask");n.append(d),a=`mask_p${this.pageIndex}_${i}`,d.setAttribute("id",a),d.setAttribute("maskUnits","objectBoundingBox");const h=Li._svgFactory.createElement("rect");d.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");const u=Li._svgFactory.createElement("use");d.append(u),u.setAttribute("href",`#${r}`),u.setAttribute("stroke","none"),u.setAttribute("fill","black"),u.setAttribute("fill-rule","nonzero"),u.classList.add("mask")}const l=Li._svgFactory.createElement("use");s.append(l),l.setAttribute("href",`#${r}`),a&&l.setAttribute("mask",`url(#${a})`);const c=l.cloneNode();return s.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),g(this,di).set(i,s),i}finalizeLine(t,i){const s=g(this,Er).get(t);g(this,Er).delete(t),this.updateBox(t,i.box),s.setAttribute("d",i.toSVGPath())}updateLine(t,i){g(this,di).get(t).firstChild.firstChild.setAttribute("d",i.toSVGPath())}updatePath(t,i){g(this,Er).get(t).setAttribute("d",i.toSVGPath())}updateBox(t,i){var s;E(s=Li,ep,iy).call(s,g(this,di).get(t),i)}show(t,i){g(this,di).get(t).classList.toggle("hidden",!i)}rotate(t,i){g(this,di).get(t).setAttribute("data-main-rotation",i)}changeColor(t,i){g(this,di).get(t).setAttribute("fill",i)}changeOpacity(t,i){g(this,di).get(t).setAttribute("fill-opacity",i)}addClass(t,i){g(this,di).get(t).classList.add(i)}removeClass(t,i){g(this,di).get(t).classList.remove(i)}getSVGRoot(t){return g(this,di).get(t)}remove(t){g(this,Er).delete(t),g(this,Po)!==null&&(g(this,di).get(t).remove(),g(this,di).delete(t))}destroy(){x(this,Po,null);for(const t of g(this,di).values())t.remove();g(this,di).clear(),g(this,Er).clear()}};Po=new WeakMap,Zf=new WeakMap,di=new WeakMap,Er=new WeakMap,ep=new WeakSet,iy=function(t,{x:i=0,y:s=0,width:n=1,height:o=1}={}){const{style:r}=t;r.top=`${100*s}%`,r.left=`${100*i}%`,r.width=`${100*n}%`,r.height=`${100*o}%`},Jc=new WeakSet,sy=function(t){var s;const i=Li._svgFactory.create(1,1,!0);return g(this,Po).append(i),i.setAttribute("aria-hidden",!0),E(s=Li,ep,iy).call(s,i,t),i},PP=function(t,i){const s=Li._svgFactory.createElement("clipPath");t.append(s);const n=`clip_${i}`;s.setAttribute("id",n),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Li._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${i}`),o.classList.add("clip"),n},F(Li,ep);let ty=Li;var v2=Ue.AbortException,C2=Ue.AnnotationEditorLayer,w2=Ue.AnnotationEditorParamsType,b2=Ue.AnnotationEditorType,y2=Ue.AnnotationEditorUIManager,S2=Ue.AnnotationLayer,x2=Ue.AnnotationMode,R2=Ue.ColorPicker,E2=Ue.DOMSVGFactory,A2=Ue.DrawLayer,F2=Ue.FeatureTest,P2=Ue.GlobalWorkerOptions,T2=Ue.ImageKind,D2=Ue.InvalidPDFException,M2=Ue.MissingPDFException,I2=Ue.OPS,k2=Ue.OutputScale,_2=Ue.PDFDataRangeTransport,L2=Ue.PDFDateString,O2=Ue.PDFWorker,N2=Ue.PasswordResponses,H2=Ue.PermissionFlag,G2=Ue.PixelsPerInch,B2=Ue.RenderingCancelledException,V2=Ue.TextLayer,z2=Ue.UnexpectedResponseException,W2=Ue.Util,$2=Ue.VerbosityLevel,U2=Ue.XfaLayer,j2=Ue.build,K2=Ue.createValidAbsoluteUrl,q2=Ue.fetchData,Y2=Ue.getDocument,X2=Ue.getFilenameFromUrl,Q2=Ue.getPdfFilenameFromUrl,J2=Ue.getXfaPageViewport,Z2=Ue.isDataScheme,eN=Ue.isPdfFile,tN=Ue.noContextMenu,iN=Ue.normalizeUnicode,sN=Ue.setLayerDimensions,nN=Ue.shadow,oN=Ue.version;const TP=Object.freeze(Object.defineProperty({__proto__:null,AbortException:v2,AnnotationEditorLayer:C2,AnnotationEditorParamsType:w2,AnnotationEditorType:b2,AnnotationEditorUIManager:y2,AnnotationLayer:S2,AnnotationMode:x2,ColorPicker:R2,DOMSVGFactory:E2,DrawLayer:A2,FeatureTest:F2,GlobalWorkerOptions:P2,ImageKind:T2,InvalidPDFException:D2,MissingPDFException:M2,OPS:I2,OutputScale:k2,PDFDataRangeTransport:_2,PDFDateString:L2,PDFWorker:O2,PasswordResponses:N2,PermissionFlag:H2,PixelsPerInch:G2,RenderingCancelledException:B2,TextLayer:V2,UnexpectedResponseException:z2,Util:W2,VerbosityLevel:$2,XfaLayer:U2,build:j2,createValidAbsoluteUrl:K2,fetchData:q2,getDocument:Y2,getFilenameFromUrl:X2,getPdfFilenameFromUrl:Q2,getXfaPageViewport:J2,isDataScheme:Z2,isPdfFile:eN,noContextMenu:tN,normalizeUnicode:iN,setLayerDimensions:sN,shadow:nN,version:oN},Symbol.toStringTag,{value:"Module"}));var _C=XE(()=>TP),rN=W(`<div class="relative w-[280px] max-w-full rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 bg-gray-50
  dark:bg-gray-900 cursor-pointer"><div class="absolute top-1 right-1 z-10
           flex gap-1 text-[11px]
           bg-white/80 dark:bg-gray-800/80
           backdrop-blur
           rounded-md shadow px-1.5 py-1"><a target="_blank" title="Má» PDF">ð</a> <button title="Táº£i xuá»ng">â¬</button></div> <canvas class="block w-full h-auto bg-white"></canvas> <div class="px-2 py-1 text-[10px] text-gray-500 truncate">Nháº¥n Äá» xem toÃ n mÃ n hÃ¬nh</div></div>`);function aN(e,t){ft(t,!1);let i=ce(t,"url",8),s=ce(t,"onOpen",8),n=re(),o=re(),r,a=1;const l=window.innerWidth<768;_C(_C().GlobalWorkerOptions.workerSrc=new URL(""+new URL("pdf.worker.min-GB3t0DcA.mjs",import.meta.url).href,import.meta.url).toString());async function c(){r||(r=await _C().getDocument(i()).promise);const v=await r.getPage(a),C=v.getViewport({scale:1}),w=b(o).clientWidth;let S;l?S=w/C.width:S=1;const y=v.getViewport({scale:S}),R=b(n).getContext("2d");hs(n,b(n).width=y.width),hs(n,b(n).height=y.height),await v.render({canvasContext:R,viewport:y}).promise}Mi(c);async function d(v){v.stopPropagation();const w=await(await fetch(i())).blob(),S=document.createElement("a");S.href=URL.createObjectURL(w),S.download=i().split("/").pop()||"file.pdf",S.click(),URL.revokeObjectURL(S.href)}vt();var h=rN(),u=D(h),f=D(u),p=k(f,2),m=k(u,2);ns(m,v=>O(n,v),()=>b(n)),ns(h,v=>O(o,v),()=>b(o)),xe(()=>Ci(f,"href",i())),$("click",p,d),$("click",u,Ic(function(v){Kv.call(this,t,v)})),$("click",h,()=>{var v;return(v=s())==null?void 0:v(i())}),I(e,h),pt()}var LC=XE(()=>TP),lN=W(`<div class="fixed inset-0 z-50
         bg-black/60 backdrop-blur-sm
         flex items-center justify-center"><div class="relative w-full h-full md:w-[90vw] md:h-[90vh]
           bg-white dark:bg-gray-900
           rounded-none md:rounded-xl
           flex flex-col"><div class="flex items-center justify-between
             px-3 py-2 border-b dark:border-gray-700"><span class="text-sm font-medium truncate"> </span> <div class="flex gap-2 text-sm"><button>â</button> <button>â</button> <a download="" title="Download">â¬</a> <button>â</button></div></div> <div class="flex-1 overflow-auto bg-gray-100 dark:bg-gray-800"><div class="flex justify-center p-4"><canvas class="bg-white shadow"></canvas></div></div></div></div>`);function cN(e,t){ft(t,!1);let i=ce(t,"url",8),s=ce(t,"onClose",8),n=re(),o=1,r=re(1.3),a;LC(LC().GlobalWorkerOptions.workerSrc=new URL(""+new URL("pdf.worker.min-GB3t0DcA.mjs",import.meta.url).href,import.meta.url).toString());async function l(){a||(a=await LC().getDocument(i()).promise);const T=await a.getPage(o),M=T.getViewport({scale:b(r)}),N=b(n).getContext("2d");hs(n,b(n).width=M.width),hs(n,b(n).height=M.height),await T.render({canvasContext:N,viewport:M}).promise}function c(){var T;(T=s())==null||T()}function d(T){T.key==="Escape"&&c()}Mi(()=>{document.body.style.overflow="hidden",window.addEventListener("keydown",d),l()}),Yr(()=>{document.body.style.overflow="",window.removeEventListener("keydown",d)}),vt();var h=lN(),u=D(h),f=D(u),p=D(f),m=D(p),v=k(p,2),C=D(v),w=k(C,2),S=k(w,2),y=k(S,2),R=k(f,2),A=D(R),P=D(A);ns(P,T=>O(n,T),()=>b(n)),xe(T=>{Be(m,T),Ci(S,"href",i())},[()=>(ve(i()),X(()=>i().split("/").pop()))]),$("click",C,()=>{O(r,b(r)+.1),l()}),$("click",w,()=>{O(r,b(r)-.1),l()}),$("click",y,c),$("click",h,Rk(c)),I(e,h),pt()}const SY=(e,t="noname",i="application/json")=>{const s=new Blob([e],{type:i}),n=URL.createObjectURL(s),o=document.createElement("a");o.href=n,o.download=t,o.click(),URL.revokeObjectURL(n)};function dN(e){if(!e)return"empty";if(typeof e=="object"){if(Array.isArray(e.urls)&&e.urls.length>1)return"gallery";if(Array.isArray(e.urls)&&e.urls.length===1)return"image"}if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")||t.startsWith("["))try{const s=JSON.parse(t);if(Array.isArray(s==null?void 0:s.urls))return s.urls.length>1?"gallery":"image"}catch{}const i=t.toLowerCase();if(/\.(jpg|jpeg|png|gif|webp)$/.test(i))return"image";if(/\.(mp4|webm|mov|ogg)$/.test(i))return"video";if(/\.pdf$/.test(i))return"pdf";if(/\.[a-z0-9]{2,5}$/.test(i))return"file"}return"text"}var hN=W("<!> <span>Album áº£nh</span>",1),uN=W("<!> <span>HÃ¬nh áº£nh</span>",1),gN=W("<!> <span>Video</span>",1),fN=W("<!> <span>PDF</span>",1),pN=W("<!> <span>Tá»p ÄÃ­nh kÃ¨m</span>",1),mN=W("<!> <span> </span>",1),vN=W("<div><!></div>");function DP(e,t){ft(t,!1);const i=re();let s=ce(t,"preview",8,""),n=ce(t,"className",8,""),o=ce(t,"showIcon",8,!0);Lt(()=>ve(s()),()=>{O(i,dN(s()))}),Ys(),vt();var r=vN(),a=D(r);{var l=d=>{var h=hN(),u=K(h);{var f=p=>{Uk(p,{size:"14",class:"text-blue-500 shrink-0"})};ne(u,p=>{o()&&p(f)})}I(d,h)},c=d=>{var h=de(),u=K(h);{var f=m=>{var v=uN(),C=K(v);{var w=S=>{nA(S,{size:"14",class:"text-blue-500 shrink-0"})};ne(C,S=>{o()&&S(w)})}I(m,v)},p=m=>{var v=de(),C=K(v);{var w=y=>{var R=gN(),A=K(R);{var P=T=>{r_(T,{size:"14",class:"text-purple-500 shrink-0"})};ne(A,T=>{o()&&T(P)})}I(y,R)},S=y=>{var R=de(),A=K(R);{var P=M=>{var N=fN(),_=K(N);{var L=z=>{Wk(z,{size:"14",class:"text-red-500 shrink-0"})};ne(_,z=>{o()&&z(L)})}I(M,N)},T=M=>{var N=de(),_=K(N);{var L=q=>{var B=pN(),Z=K(B);{var ee=Y=>{$k(Y,{size:"14",class:"text-gray-500 shrink-0"})};ne(Z,Y=>{o()&&Y(ee)})}I(q,B)},z=q=>{var B=mN(),Z=K(B);{var ee=De=>{Xk(De,{size:"14",class:"text-gray-400 shrink-0"})};ne(Z,De=>{o()&&De(ee)})}var Y=k(Z,2),ye=D(Y);xe(()=>Be(ye,s()||"No messages yet")),I(q,B)};ne(_,q=>{b(i)==="file"?q(L):q(z,!1)},!0)}I(M,N)};ne(A,M=>{b(i)==="pdf"?M(P):M(T,!1)},!0)}I(y,R)};ne(C,y=>{b(i)==="video"?y(w):y(S,!1)},!0)}I(m,v)};ne(u,m=>{b(i)==="image"?m(f):m(p,!1)},!0)}I(d,h)};ne(a,d=>{b(i)==="gallery"?d(l):d(c,!1)})}xe(()=>Vt(r,1,`text-[12px] text-gray-500 truncate mt-0.5 flex items-center gap-1 ${n()}`)),I(e,r),pt()}var CN=W('<div><div><p class="whitespace-pre-line leading-snug svelte-13g6337"> </p> <p class="absolute bottom-1 right-2 text-[9px] opacity-60 svelte-13g6337"> </p></div></div>'),wN=W('<p class="text-[10px] opacity-60 mb-1 svelte-13g6337"> </p>'),bN=W(`<div class="mb-1 px-3 py-2
           text-[11px]
           rounded-md
           border-l-4 border-blue-500
           bg-gray-100 svelte-13g6337"><div class="font-semibold leading-tight text-gray-800 svelte-13g6337"> </div> <!></div>`),yN=W('<p class="whitespace-pre-line leading-snug svelte-13g6337"> </p>'),SN=W('<video class="rounded-md mt-1 max-h-64 w-full bg-black svelte-13g6337" controls playsinline="" webkit-playsinline="" preload="metadata"></video>',2),xN=W('<img class="rounded-md mt-1 max-h-64 cursor-pointer svelte-13g6337"/>'),RN=W(`<a target="_blank" class="flex items-center gap-2 mt-2 px-3 py-2 rounded-md
             bg-gray-100 dark:bg-gray-700 text-sm svelte-13g6337"> </a>`),EN=W("<img/>"),AN=W("<div></div>"),FN=W('<img class="rounded-md cursor-pointer object-cover aspect-square svelte-13g6337"/>'),PN=W(`<div class="flex items-center justify-center
                 bg-black/60 text-white text-sm rounded-md svelte-13g6337"> </div>`),TN=W('<div class="grid grid-cols-3 gap-1 mt-1 svelte-13g6337"><!> <!></div>'),DN=W('<span class="flex gap-1 px-1 rounded svelte-13g6337"><span class="svelte-13g6337"> </span> <span class="text-[10px] text-gray-600 dark:text-gray-300 font-semibold svelte-13g6337"> </span></span>'),MN=W("<div></div>"),IN=W('<div class="w-3 h-3 bg-blue-500 rounded-full svelte-13g6337"></div>'),kN=W(`<div class="absolute inset-0 rounded-2xl
           bg-blue-500/10
           pointer-events-none
           z-10 svelte-13g6337"></div> <div class="absolute top-2 right-2
           w-5 h-5 rounded-full
           border border-blue-500
           bg-white
           flex items-center justify-center
           z-20 svelte-13g6337"><!></div>`,1),_N=W('<div><div><!> <!> <!> <!> <!> <p class="text-[9px] text-right opacity-60 mt-1 svelte-13g6337"> </p> <!> <!></div> <div class="opacity-0 group-hover:opacity-100 ml-1 self-end transition svelte-13g6337"><!></div></div>'),LN=W('<div class="h-px bg-gray-200 my-1 svelte-13g6337"></div> <button class="menu-item flex items-center gap-2 text-amber-600 hover:bg-amber-50 svelte-13g6337"><!> <span class="svelte-13g6337">Thu há»i tin nháº¯n</span></button> <button class="menu-item flex items-center gap-2 text-red-600 hover:bg-red-50 svelte-13g6337"><!> <span class="svelte-13g6337">XoÃ¡ tin nháº¯n</span></button>',1),ON=W('<div class="h-px bg-gray-200 my-1 svelte-13g6337"></div> <div class="px-3 py-2 text-xs text-gray-500 svelte-13g6337">ÄÃ£ chá»n <span class="font-semibold text-gray-700 svelte-13g6337"> </span> tin nháº¯n</div> <button class="menu-item flex items-center gap-2 text-blue-600 hover:bg-blue-50 svelte-13g6337"><!> <span class="svelte-13g6337">Bá» chá»n</span></button>',1),NN=W(`<div class="context-menu fixed z-50
           w-[180px]
           bg-white
           border border-gray-300
           rounded-lg shadow-xl text-sm svelte-13g6337"><button class="menu-item flex items-center gap-2 svelte-13g6337"><!> <span class="svelte-13g6337">Chia sáº» tin nháº¯n</span></button> <button class="menu-item flex items-center gap-2 svelte-13g6337"><!> <span class="svelte-13g6337">Tráº£ lá»i</span></button> <button class="menu-item flex items-center gap-2 svelte-13g6337"><!> <span class="svelte-13g6337">Sao chÃ©p</span></button> <button class="menu-item flex items-center gap-2 svelte-13g6337"><!> <span class="svelte-13g6337">Chá»n nhiá»u</span></button> <!> <!></div>`),HN=W("<!> <!> <!> <!>",1);function MP(e,t){ft(t,!1);const i=()=>ht(zn,"$selectedMessageIds",n),s=()=>ht($a,"$selectionMode",n),[n,o]=Xs(),r=re(),a=re(),l=re(),c=re();let d=re(!1),h=re(null);zn.subscribe(H=>{H.size===0&&$a.set(!1)});let u=ce(t,"onShareMessage",8,null),f=ce(t,"msg",8),p=ce(t,"myId",8),m=ce(t,"previousMsg",8,null),v=re(),C=re(),w=null;const S=450;let y=re(null),R=re({x:0,y:0}),A=re(!1),P=re([]),T=re(0);const M=String(f().from)===String(p()),N=m()&&m().from===f().from,_=H=>/\.pdf$/i.test(H),L=H=>/\.(mp4|webm|mov|ogg)$/i.test(H),z=H=>!L(H)&&/\.(jpg|jpeg|png|gif|webp)$/i.test(H);function q(H){$a.set(!0),zn.update(le=>{const Fe=new Set(le);return Fe.add(H),Fe})}function B(H){zn.update(le=>{const Fe=new Set(le);return Fe.has(H)?Fe.delete(H):Fe.add(H),Fe})}function Z(){zn.set(new Set),$a.set(!1),Ce()}function ee(H){var le;B(H==null?void 0:H.id),(le=u())==null||le(H),Ce()}function Y(H){const le="https://render-server-ezuf.onrender.com";return H&&(H.startsWith("http")?H.replace(/^http:\/\/localhost:\d+/,le):`${le}/${H.replace(/^\/+/,"")}`)}function ye(H){H.stopPropagation(),De(f().reply_to.id)}Mi(()=>{var H,le,Fe,mt;if(b(v))return(H=b(v))==null||H.addEventListener("touchstart",U,{passive:!0}),(le=b(v))==null||le.addEventListener("touchmove",Ae,{passive:!0}),(Fe=b(v))==null||Fe.addEventListener("touchend",oe,{passive:!0}),b(C)&&((mt=b(C))==null||mt.addEventListener("touchstart",ye,{passive:!0})),()=>{var nt,j,ge,Re;(nt=b(v))==null||nt.removeEventListener("touchstart",U),(j=b(v))==null||j.removeEventListener("touchmove",Ae),(ge=b(v))==null||ge.removeEventListener("touchend",oe),(Re=b(C))==null||Re.removeEventListener("touchstart",ye)}});async function De(H){if(!H)return;let le=document.getElementById(`msg-${H}`);if(le){Pe(le);return}let Fe=0;for(;!le&&Fe<1e3;){Fe++;const mt=ii(Vn);if(!mt.length)break;const nt=mt[0];Cg(ii($n),{firstMsg:nt}),await zc(),await new Promise(j=>setTimeout(j,80)),le=document.getElementById(`msg-${H}`)}le?Pe(le):console.warn("â KhÃ´ng tÃ¬m tháº¥y message gá»c:",H)}function Pe(H){H.scrollIntoView({behavior:"smooth",block:"center"}),H.classList.add("flash-highlight"),setTimeout(()=>{H.classList.remove("flash-highlight")},1200)}async function Q(H){try{if(!(H!=null&&H.message))return;await navigator.clipboard.writeText(H.message),console.log("Copied message:",H.message)}catch(le){console.error("Copy failed",le)}finally{Ce()}}function te(H=[]){const le={};for(const Fe of H)le[Fe]=(le[Fe]||0)+1;return Object.entries(le).sort((Fe,mt)=>mt[1]-Fe[1])}function ie(H,le){const mt=M?180:150,nt=8,j=window.innerWidth,ge=window.innerHeight;H+180>j&&(H=j-180-nt),le+mt>ge&&(le=ge-mt-nt),H<nt&&(H=nt),le<nt&&(le=nt),O(y,f()),O(R,{x:H,y:le})}function ae(H){H.preventDefault(),ie(H.clientX,H.clientY)}function U(H){if(H.touches.length!==1)return;const le=H.touches[0];w=setTimeout(()=>{ie(le.clientX,le.clientY)},S)}function oe(){clearTimeout(w),w=null}function Ae(){clearTimeout(w),w=null}function Ce(){O(y,null)}function Qe(H){xn.set({id:H.id,senderId:H.from,content:H.message,type:H.type}),Ce()}function je(H){H.target.closest(".context-menu")||Ce()}function Je(H){H.key==="Escape"&&Ce()}window.addEventListener("click",je),window.addEventListener("keydown",Je),Lt(()=>ve(f()),()=>{console.log("msg: ",f())}),Lt(()=>(ve(f()),ve(p())),()=>{console.log("msg.from === myId: ",f().message,f().from,p())}),Lt(()=>(i(),ve(f())),()=>{O(r,i().has(f().id))}),Lt(()=>ve(f()),()=>{var H;O(a,f().type==="media"?Y(((H=f().media)==null?void 0:H.url)||f().message):null)}),Lt(()=>(ve(f()),b(a)),()=>{var H,le;O(l,f().type==="media"?{url:b(a),name:((H=f().media)==null?void 0:H.name)||((le=b(a))==null?void 0:le.split("/").pop())}:null)}),Lt(()=>ve(f()),()=>{O(c,(()=>{if(f().type!=="album"||!f().message)return null;try{const H=typeof f().message=="string"?JSON.parse(f().message):f().message;return{urls:(H.urls||[]).map(Y),fullUrls:(H.fullUrls||H.urls||[]).map(Y)}}catch{return console.warn("â Invalid album message:",f().message),null}})())}),Ys(),vt();var tt=HN(),ct=K(tt);{var st=H=>{var le=CN(),Fe=D(le),mt=D(Fe),nt=D(mt),j=k(mt,2),ge=D(j);xe(Re=>{Vt(le,1,`w-full flex ${M?"justify-end":"justify-start"} select-none`,"svelte-13g6337"),Vt(Fe,1,`relative max-w-[68%]
             px-3 py-2 pb-4
             text-sm
             rounded-2xl
             border border-dashed
             italic
             text-gray-400
             bg-gray-50
             ${M?"rounded-br-md":"rounded-bl-md"}
             ${N?"mt-[2px]":"mt-2"}`,"svelte-13g6337"),Be(nt,M?"ð« Báº¡n ÄÃ£ thu há»i tin nháº¯n":"ð« Tin nháº¯n ÄÃ£ ÄÆ°á»£c thu há»i"),Be(ge,Re)},[()=>(ve(Tp),ve(f()),X(()=>Tp(f().time||f().created_at)))]),$("contextmenu",Fe,Re=>Re.preventDefault()),I(H,le)},be=H=>{var le=_N(),Fe=D(le),mt=D(Fe);{var nt=rt=>{var yt=wN(),ki=D(yt);xe(()=>Be(ki,(ve(f()),X(()=>M?"Báº¡n":f().fromName||"User "+f().from)))),I(rt,yt)};ne(mt,rt=>{N||rt(nt)})}var j=k(mt,2);{var ge=rt=>{var yt=bN(),ki=D(yt),Uo=D(ki),Zn=k(ki,2);{let _t=Mr(()=>(ve(f()),X(()=>{var li;return(li=f())==null?void 0:li.reply_to.content})));DP(Zn,{get preview(){return b(_t)}})}ns(yt,_t=>O(C,_t),()=>b(C)),xe(_t=>Be(Uo,_t),[()=>(ve(f()),ve(p()),X(()=>f().reply_to.sender_id===String(p())?"Báº¡n":f().fromName||"User "+f().from))]),$("click",yt,Ic(()=>De(f().reply_to.id))),I(rt,yt)};ne(j,rt=>{ve(f()),X(()=>{var yt,ki;return(ki=(yt=f())==null?void 0:yt.reply_to)==null?void 0:ki.id})&&rt(ge)})}var Re=k(j,2);{var me=rt=>{var yt=yN(),ki=D(yt);xe(()=>Be(ki,(ve(f()),X(()=>f().message)))),I(rt,yt)};ne(Re,rt=>{ve(f()),X(()=>f().type==="text")&&rt(me)})}var _e=k(Re,2);{var Me=rt=>{var yt=de(),ki=K(yt);{var Uo=_t=>{var li=SN();li.muted=!0,xe(()=>Ci(li,"src",(b(l),X(()=>b(l).url)))),I(_t,li)},Zn=_t=>{var li=de(),eo=K(li);{var Jr=yi=>{aN(yi,{get url(){return b(l),X(()=>b(l).url)},onOpen:ji=>{O(h,ji),O(d,!0)}})},gl=yi=>{var ji=de(),bu=K(ji);{var yu=dd=>{var fl=xN();xe(()=>Ci(fl,"src",(b(l),X(()=>b(l).url)))),$("click",fl,()=>{O(P,[b(l).url]),O(A,!0)}),I(dd,fl)},OM=dd=>{var fl=RN(),NM=D(fl);xe(()=>{Ci(fl,"href",(b(l),X(()=>b(l).url))),Be(NM,`ð ${b(l),X(()=>b(l).name)??""}`)}),I(dd,fl)};ne(bu,dd=>{b(l),X(()=>z(b(l).url))?dd(yu):dd(OM,!1)},!0)}I(yi,ji)};ne(eo,yi=>{b(l),X(()=>_(b(l).url))?yi(Jr):yi(gl,!1)},!0)}I(_t,li)};ne(ki,_t=>{b(l),X(()=>L(b(l).url))?_t(Uo):_t(Zn,!1)})}I(rt,yt)};ne(_e,rt=>{ve(f()),X(()=>f().type==="media")&&rt(Me)})}var Ee=k(_e,2);{var Ie=rt=>{var yt=de(),ki=K(yt);{var Uo=_t=>{var li=AN();let eo;hi(li,5,()=>(b(c),X(()=>b(c).urls)),ds,(Jr,gl,yi)=>{var ji=EN();xe(()=>{Ci(ji,"src",b(gl)),Vt(ji,1,`rounded-md cursor-pointer object-cover
            ${b(c),X(()=>b(c).urls.length===3&&yi===0?"col-span-2 row-span-2 aspect-square":"aspect-square")??""}
            ${b(c),X(()=>b(c).urls.length===5&&yi===0?"col-span-2 row-span-2 aspect-square":"")??""}`,"svelte-13g6337")}),$("click",ji,()=>{O(P,b(c).fullUrls),O(T,yi),O(A,!0)}),I(Jr,ji)}),xe(()=>eo=Vt(li,1,"grid gap-1 mt-1 svelte-13g6337",null,eo,{"grid-cols-1":b(c).urls.length===1,"grid-cols-2":b(c).urls.length===2,"grid-cols-3":b(c).urls.length>=3})),I(_t,li)},Zn=_t=>{var li=TN(),eo=D(li);hi(eo,1,()=>(b(c),X(()=>b(c).urls.slice(0,6))),ds,(yi,ji,bu)=>{var yu=FN();xe(()=>Ci(yu,"src",b(ji))),$("click",yu,()=>{O(P,b(c).fullUrls),O(T,bu),O(A,!0)}),I(yi,yu)});var Jr=k(eo,2);{var gl=yi=>{var ji=PN(),bu=D(ji);xe(()=>Be(bu,`+${b(c),X(()=>b(c).urls.length-6)??""}`)),I(yi,ji)};ne(Jr,yi=>{b(c),X(()=>b(c).urls.length>6)&&yi(gl)})}I(_t,li)};ne(ki,_t=>{b(c),X(()=>b(c).urls.length<6)?_t(Uo):_t(Zn,!1)})}I(rt,yt)};ne(Ee,rt=>{ve(f()),b(c),X(()=>f().type==="album"&&b(c))&&rt(Ie)})}var Ye=k(Ee,2),ot=D(Ye),Ut=k(Ye,2);{var ei=rt=>{var yt=MN();hi(yt,5,()=>(ve(f()),X(()=>te(f().reactions))),ds,(ki,Uo)=>{var Zn=Sl(()=>YR(b(Uo),2));let _t=()=>b(Zn)[0],li=()=>b(Zn)[1];var eo=DN(),Jr=D(eo),gl=D(Jr),yi=k(Jr,2),ji=D(yi);xe(()=>{Be(gl,_t()),Be(ji,li())}),I(ki,eo)}),xe(()=>Vt(yt,1,`absolute -bottom-2
          ${M?"right-2":"left-2"}
          flex gap-1 px-1.5 py-[2px]
          rounded-full shadow-md
          bg-white dark:bg-gray-800
          border dark:border-gray-700
          text-[11px] z-10`,"svelte-13g6337")),I(rt,yt)};ne(Ut,rt=>{ve(f()),X(()=>{var yt;return(yt=f().reactions)==null?void 0:yt.length})&&rt(ei)})}var bt=k(Ut,2);{var Ii=rt=>{var yt=kN(),ki=k(K(yt),2),Uo=D(ki);{var Zn=_t=>{var li=IN();I(_t,li)};ne(Uo,_t=>{b(r)&&_t(Zn)})}I(rt,yt)};ne(bt,rt=>{s()&&rt(Ii)})}ns(Fe,rt=>O(v,rt),()=>b(v));var bn=k(Fe,2),wu=D(bn);mL(wu,{get messageId(){return ve(f()),X(()=>f().id)},get fromMe(){return M},onSelect:({messageId:rt,reaction:yt})=>{Un({type:"reaction",messageId:rt,reaction:yt})}}),xe(rt=>{Vt(le,1,`w-full flex ${M?"justify-end":"justify-start"} select-none group ${M?"khang":"hau"}`,"svelte-13g6337"),Ci(Fe,"id",(ve(f()),X(()=>"msg-"+f().id))),Vt(Fe,1,`relative max-w-[68%] px-3 py-2 pb-4 text-sm shadow-md rounded-2xl
    ${M?"bg-gradient-to-br from-blue-200 to-blue-300 text-gray-800 rounded-br-md":"bg-white dark:bg-gray-800  text-gray-800 dark:text-gray-200   border border-gray-200 dark:border-gray-700  rounded-bl-md"}
    ${N?"mt-[2px]":"mt-2"}`,"svelte-13g6337"),Be(ot,rt)},[()=>(ve(Tp),ve(f()),X(()=>Tp(f().time||f().created_at)))]),$("click",Fe,Ic(()=>{s()&&B(f().id)})),$("contextmenu",Fe,ae),I(H,le)};ne(ct,H=>{ve(f()),X(()=>f().status===1)?H(st):H(be,!1)})}var Ve=k(ct,2);{var Te=H=>{var le=NN(),Fe=D(le),mt=D(Fe);sA(mt,{size:"16"});var nt=k(Fe,2),j=D(nt);e_(j,{size:"16"});var ge=k(nt,2),Re=D(ge);Gk(Re,{size:"16"});var me=k(ge,2),_e=D(me);o_(_e,{size:"16"});var Me=k(me,2);{var Ee=ot=>{var Ut=LN(),ei=k(K(Ut),2),bt=D(ei);O0(bt,{size:"16"});var Ii=k(ei,2),bn=D(Ii);aA(bn,{size:"16"}),$("click",ei,()=>{Un({type:"recall",messageId:b(y).id}),Ce()}),$("click",Ii,()=>{Un({type:"delete",messageId:b(y).id}),Ce()}),I(ot,Ut)};ne(Me,ot=>{b(y),ve(p()),X(()=>String(b(y).from)===String(p()))&&ot(Ee)})}var Ie=k(Me,2);{var Ye=ot=>{var Ut=ON(),ei=k(K(Ut),2),bt=k(D(ei)),Ii=D(bt),bn=k(ei,2),wu=D(bn);O0(wu,{size:"16"}),xe(()=>Be(Ii,(i(),X(()=>i().size)))),$("click",bn,Z),I(ot,Ut)};ne(Ie,ot=>{s()&&ot(Ye)})}xe(()=>qn(le,`top:${b(R),X(()=>b(R).y)??""}px; left:${b(R),X(()=>b(R).x)??""}px`)),$("click",Fe,()=>ee(b(y))),$("click",nt,()=>Qe(b(y))),$("click",ge,()=>Q(b(y))),$("click",me,()=>{q(b(y).id),Ce()}),$("click",le,Ic(function(ot){Kv.call(this,t,ot)})),I(H,le)};ne(Ve,H=>{b(y)&&H(Te)})}var We=k(Ve,2);{var Qt=H=>{dL(H,{get images(){return b(P)},index:0,onClose:()=>O(A,!1)})};ne(We,H=>{b(A)&&H(Qt)})}var $t=k(We,2);{var se=H=>{cN(H,{get url(){return b(h)},onClose:()=>O(d,!1)})};ne($t,H=>{b(d)&&H(se)})}I(e,tt),pt(),o()}var GN=W('<span class="text-[11px] text-gray-400 whitespace-nowrap"> </span>'),BN=W("<div></div>"),VN=W('<span class="absolute right-2 bottom-2 text-[10px] px-1.5 py-0.5 rounded bg-blue-100 text-blue-600">GROUP</span>'),zN=W(`<div><div class="w-10 h-10 rounded-full flex items-center justify-center
      bg-gray-200 text-gray-600 font-semibold text-lg uppercase"> </div> <div class="flex-1 min-w-0"><div class="flex items-center justify-between"><span class="font-medium text-gray-800 truncate"> </span> <!></div> <!></div> <!> <!></div>`);function bS(e,t){ft(t,!1);const i=re();let s=ce(t,"conversation",8),n=ce(t,"selectedId",8),o=ce(t,"onSelect",8,()=>{});function r(R){return R?new Date(R).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}Lt(()=>(ve(n()),ve(s())),()=>{O(i,n()===s().conversationId)}),Ys(),vt();var a=zN();a.__click=()=>o()(s());var l=D(a),c=D(l),d=k(l,2),h=D(d),u=D(h),f=D(u),p=k(u,2);{var m=R=>{var A=GN(),P=D(A);xe(T=>Be(P,T),[()=>(ve(s()),X(()=>r(s().lastMessageAt)))]),I(R,A)};ne(p,R=>{ve(s()),X(()=>s().lastMessageAt)&&R(m)})}var v=k(h,2);DP(v,{get preview(){return ve(s()),X(()=>s().lastMessagePreview)}});var C=k(d,2);{var w=R=>{var A=BN();xe(()=>Vt(A,1,`
        w-3 h-3 rounded-full absolute left-2 bottom-2
        ${ve(s()),X(()=>s().online?"bg-green-500":"bg-gray-300")??""}
      `)),I(R,A)};ne(C,R=>{ve(s()),X(()=>s().type==="direct")&&R(w)})}var S=k(C,2);{var y=R=>{var A=VN();I(R,A)};ne(S,R=>{ve(s()),X(()=>s().type==="group")&&R(y)})}xe(R=>{Vt(a,1,`p-2 rounded-md mb-1 cursor-pointer transition select-none relative
    flex items-center gap-3 border border-transparent
    hover:bg-blue-50 active:scale-[0.98]
    ${b(i)?"bg-blue-100 border-blue-300 shadow-sm":""}
  `),Be(c,R),Be(f,(ve(s()),X(()=>s().title)))},[()=>(ve(s()),X(()=>{var R,A;return((A=(R=s())==null?void 0:R.title)==null?void 0:A.charAt(0))??"?"}))]),I(e,a),pt()}ap(["click"]);var jc=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const s=t?this.allAsyncListeners:this.allSyncListeners;let n=s.get(e);return!n&&i&&(n=new Set,s.set(e,n)),n}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const s=this.getListeners(e,i,!1);s&&(s.delete(t),s.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}const{frameworkOverrides:s}=this,n=a=>{const l=s?()=>s.wrapIncoming(a):a;t?this.dispatchAsync(l):l()},o=this.getListeners(i,t,!1);if(((o==null?void 0:o.size)??0)>0){const a=new Set(o);for(const l of a)o!=null&&o.has(l)&&n(()=>l(e))}const r=this.getGlobalListeners(t);if(r.size>0){const a=new Set(r);for(const l of a)n(()=>l(i,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];for(const t of e)t()}};function Lr(e){return e==null||e===""?null:e}function fe(e){return e!=null&&e!==""}function Ht(e){return!fe(e)}function ny(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function xg(e,t){const i=e?JSON.stringify(e):null,s=t?JSON.stringify(t):null;return i===s}function WN(e,t,i=!1){const s=e==null,n=t==null;if(e!=null&&e.toNumber&&(e=e.toNumber()),t!=null&&t.toNumber&&(t=t.toNumber()),s&&n)return 0;if(s)return-1;if(n)return 1;function o(r,a){return r>a?1:r<a?-1:0}if(typeof e!="string"||!i)return o(e,t);try{return e.localeCompare(t)}catch{return o(e,t)}}var $N=/[&<>"']/g,UN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function mu(e){return(e==null?void 0:e.toString().toString())??null}function og(e){var t;return((t=mu(e))==null?void 0:t.replace($N,i=>UN[i]))??null}function no(e){return e.eRootDiv.getRootNode()}function Wt(e){return no(e).activeElement}function Pi(e){const{gos:t,eRootDiv:i}=e;let s=null;const n=t.get("getDocument");return n&&fe(n)?s=n():i&&(s=i.ownerDocument),s&&fe(s)?s:document}function IP(e){const t=Wt(e);return t===null||t===Pi(e).body}function kP(e){return Pi(e).defaultView||window}function yS(e){let t=null,i=null;try{t=Pi(e).fullscreenElement}catch{}finally{t||(t=no(e));const s=t.querySelector("body");s?i=s:t instanceof ShadowRoot?i=t:t instanceof Document?i=t==null?void 0:t.documentElement:i=t}return i}function jN(e){const t=yS(e);return(t==null?void 0:t.clientWidth)??(window.innerWidth||-1)}function KN(e){const t=yS(e);return(t==null?void 0:t.clientHeight)??(window.innerHeight||-1)}function Jn(e,t,i){i==null||typeof i=="string"&&i==""?_P(e,t):wn(e,t,i)}function wn(e,t,i){e.setAttribute(LP(t),i.toString())}function _P(e,t){e.removeAttribute(LP(t))}function LP(e){return`aria-${e}`}function Za(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function qN(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function YN(e){return e.getAttribute("aria-label")}function su(e,t){Jn(e,"label",t)}function Rg(e,t){Jn(e,"labelledby",t)}function OP(e,t){Jn(e,"live",t)}function XN(e,t){Jn(e,"atomic",t)}function QN(e,t){Jn(e,"relevant",t)}function JN(e,t){Jn(e,"invalid",t)}function ZN(e,t){Jn(e,"disabled",t)}function NP(e,t){Jn(e,"hidden",t)}function oy(e,t){wn(e,"expanded",t)}function eH(e,t){wn(e,"setsize",t)}function tH(e,t){wn(e,"posinset",t)}function iH(e,t){wn(e,"multiselectable",t)}function sH(e,t){wn(e,"rowcount",t)}function Ym(e,t){wn(e,"rowindex",t)}function nH(e,t){wn(e,"rowspan",t)}function oH(e,t){wn(e,"colcount",t)}function HP(e,t){wn(e,"colindex",t)}function rH(e,t){wn(e,"colspan",t)}function aH(e,t){wn(e,"sort",t)}function lH(e){_P(e,"sort")}function GP(e,t){Jn(e,"selected",t)}function cH(e,t){Jn(e,"controls",t)}function dH(e,t){cH(e,t.id),Rg(t,e.id)}function wx(e,t){Jn(e,"owns",t)}function oC(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var hH="[tabindex], input, select, button, textarea, [href]",BP="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function rg(e){return!e||!e.matches("input, select, button, textarea")||!e.matches(BP)?!1:Wo(e)}function Ot(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-hidden",!t),s||NP(e,!t)}function uH(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-invisible",!t),s||NP(e,!t)}function Eg(e,t){const i="disabled",s=t?o=>o.setAttribute(i,""):o=>o.removeAttribute(i);s(e);const n=e.querySelectorAll("input")??[];for(const o of n)s(o)}function _c(e,t,i){let s=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof i=="number"){if(++s>i)break}else if(e===i)break}return!1}function rd(e){const{height:t,width:i,borderTopWidth:s,borderRightWidth:n,borderBottomWidth:o,borderLeftWidth:r,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:d,marginTop:h,marginRight:u,marginBottom:f,marginLeft:p,boxSizing:m}=window.getComputedStyle(e),v=Number.parseFloat;return{height:v(t||"0"),width:v(i||"0"),borderTopWidth:v(s||"0"),borderRightWidth:v(n||"0"),borderBottomWidth:v(o||"0"),borderLeftWidth:v(r||"0"),paddingTop:v(a||"0"),paddingRight:v(l||"0"),paddingBottom:v(c||"0"),paddingLeft:v(d||"0"),marginTop:v(h||"0"),marginRight:v(u||"0"),marginBottom:v(f||"0"),marginLeft:v(p||"0"),boxSizing:m}}function SS(e){const t=rd(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom-t.borderTopWidth-t.borderBottomWidth:t.height}function Ag(e){const t=rd(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight-t.borderLeftWidth-t.borderRightWidth:t.width}function VP(e){const{height:t,marginBottom:i,marginTop:s}=rd(e);return Math.floor(t+i+s)}function Xm(e){const{width:t,marginLeft:i,marginRight:s}=rd(e);return Math.floor(t+i+s)}function zP(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:s,borderRightWidth:n,borderBottomWidth:o}=rd(e);return{top:t.top+(i||0),left:t.left+(s||0),right:t.right+(n||0),bottom:t.bottom+(o||0)}}function Qm(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i)),i}function Jm(e,t,i){i&&(t*=-1),e.scrollLeft=t}function Wi(e){for(;e!=null&&e.firstChild;)e.firstChild.remove()}function jn(e){e!=null&&e.parentNode&&e.remove()}function WP(e){return!!e.offsetParent}function Wo(e){return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!WP(e)||window.getComputedStyle(e).visibility!=="visible")}function xS(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function $P(e,t,i){i&&i.nextSibling===t||(e.firstChild?i?i.nextSibling?e.insertBefore(t,i.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t):e.appendChild(t))}function UP(e,t){for(let i=0;i<t.length;i++){const s=t[i],n=e.children[i];n!==s&&e.insertBefore(s,n)}}function gH(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}function gp(e,t){if(t)for(const i of Object.keys(t)){const s=t[i];if(!(i!=null&&i.length)||s==null)continue;const n=gH(i),o=s.toString(),r=o.replace(/\s*!important/g,""),a=r.length!=o.length?"important":void 0;e.style.setProperty(n,r,a)}}function Em(e){return()=>{const t=e();return t?RS(t)||jP(t):!0}}function RS(e){return e.clientWidth<e.scrollWidth}function jP(e){return e.clientHeight<e.scrollHeight}function Zm(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Oo(e,t)}function Oo(e,t){t=ES(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function ag(e,t){t=ES(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function ES(e){return typeof e=="number"?`${e}px`:e}function AS(e){return e instanceof Node||e instanceof HTMLElement}function $s(e,t,i){i==null||i===""?e.removeAttribute(t):e.setAttribute(t,i.toString())}function ll(e,t,i){const n=kP(e).ResizeObserver,o=n?new n(i):null;return o==null||o.observe(t),()=>o==null?void 0:o.disconnect()}function Xr(e,t){const i=kP(e);i.requestAnimationFrame?i.requestAnimationFrame(t):i.webkitRequestAnimationFrame?i.webkitRequestAnimationFrame(t):i.setTimeout(t,0)}var KP="data-ref",OC;function bx(){return OC??(OC=document.createTextNode(" ")),OC.cloneNode()}function fp(e){const{attrs:t,children:i,cls:s,ref:n,role:o,tag:r}=e,a=document.createElement(r);if(s&&(a.className=s),n&&a.setAttribute(KP,n),o&&a.setAttribute("role",o),t)for(const l of Object.keys(t))a.setAttribute(l,t[l]);if(i)if(typeof i=="string")a.textContent=i;else{let l=!0;for(const c of i)c&&(typeof c=="string"?(a.appendChild(document.createTextNode(c)),l=!1):typeof c=="function"?a.appendChild(c()):(l&&(a.appendChild(bx()),l=!1),a.append(fp(c)),a.appendChild(bx())))}return a}var fH=["touchstart","touchend","touchmove","touchcancel","scroll"],pH=["wheel"],NC={},qP=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof NC[i]=="boolean")return NC[i];const s=document.createElement(e[i]||"div");return i="on"+i,NC[i]=i in s}})();function mH(e,t){return!t||!e?!1:CH(t).indexOf(e)>=0}function vH(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function CH(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():vH(t)}function wH(e,t,i){const s=bH(t);let n;s!=null&&(n={passive:s}),e.addEventListener(t,i,n)}var bH=e=>{const t=fH.includes(e),i=pH.includes(e);if(t)return!0;if(i)return!1};function YP(e,t,i){if(i===0)return!1;const s=Math.abs(e.clientX-t.clientX),n=Math.abs(e.clientY-t.clientY);return Math.max(s,n)<=i}var lg=(e,t)=>{const i=e.identifier;for(let s=0,n=t.length;s<n;++s){const o=t[s];if(o.identifier===i)return o}return null};function Fg(e,t){return e.gos.isElementInThisInstance(t.target)}function yH(e,t,i){const n=e.getBoundingClientRect().height,o=jN(i)-2,r=KN(i)-2;if(!e.offsetParent)return;const l=zP(e.offsetParent),{clientY:c,clientX:d}=t;let h=c-l.top-n/2,u=d-l.left-10;const f=Pi(i),p=f.defaultView||window,m=p.pageYOffset||f.documentElement.scrollTop,v=p.pageXOffset||f.documentElement.scrollLeft;o>0&&u+e.clientWidth>o+v&&(u=o+v-e.clientWidth),u<0&&(u=0),r>0&&h+e.clientHeight>r+m&&(h=r+m-e.clientHeight),h<0&&(h=0),e.style.left=`${u}px`,e.style.top=`${h}px`}var Am=(e,...t)=>{for(const i of t){const[s,n,o,r]=i;s.addEventListener(n,o,r),e.push(i)}},FS=e=>{if(e){for(const[t,i,s,n]of e)t.removeEventListener(i,s,n);e.length=0}},aa=e=>{e.cancelable&&e.preventDefault()};function SH(e,t){return t}function XP(e){return(e==null?void 0:e.getLocaleTextFunc())??SH}function xH(e,t,i,s){const n=t[i];return e.getLocaleTextFunc()(i,typeof n=="function"?n(s):n,s)}function RH(e){return(t,i,s)=>e({key:t,defaultValue:i,variableValues:s})}function EH(e){return(t,i,s)=>{let n=e==null?void 0:e[t];if(n&&(s!=null&&s.length)){let o=0;for(;!(o>=s.length||n.indexOf("${variable}")===-1);)n=n.replace("${variable}",s[o++])}return n??i}}var $o=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new jc),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){var s;(s=this.localEventService)==null||s.removeEventListener(e,t,i)}dispatchLocalEvent(e){var t;(t=this.localEventService)==null||t.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const s of Object.keys(t)){const n=t[s];n&&i.push(this._setupListener(e,s,n))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;let s;if(AH(e))e.__addEventListener(t,i),s=()=>(e.__removeEventListener(t,i),null);else{const n=FH(e);e instanceof HTMLElement?wH(e,t,i):n?e.addListener(t,i):e.addEventListener(t,i),s=n?()=>(e.removeListener(t,i),null):()=>(e.removeEventListener(t,i),null)}return this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==s),null)}setupPropertyListener(e,t){const{gos:i}=this;i.addPropertyEventListener(e,t);const s=()=>(i.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==s),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupPropertyListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,s=n=>{if(n.changeSet){if(n.changeSet&&n.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=n.changeSet.id}const o={type:"propertyChanged",changeSet:n.changeSet,source:n.source};t(o)};for(const n of e)this.setupPropertyListener(n,s)}getLocaleTextFunc(){return XP(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function AH(e){return e.__addEventListener!==void 0}function FH(e){return e.eventServiceType==="global"}var V=class extends $o{},yx={};function PS(e,t){yx[t]||(e(),yx[t]=!0)}var PH={pending:!1,funcs:[]},TH={pending:!1,funcs:[]};function ry(e,t="setTimeout",i){const s=t==="raf"?TH:PH;if(s.funcs.push(e),s.pending)return;s.pending=!0;const n=()=>{const o=s.funcs.slice();s.funcs.length=0,s.pending=!1;for(const r of o)r()};t==="raf"?Xr(i,n):window.setTimeout(n,0)}function Vi(e,t,i){let s;return function(...n){const o=this;window.clearTimeout(s),s=window.setTimeout(function(){e.isAlive()&&t.apply(o,n)},i)}}function Sx(e,t){let i=0;return function(...s){const n=this,o=Date.now();o-i<t||(i=o,e.apply(n,s))}}function DH(e,t,i,s=100){const n=Date.now();let o=null,r=!1;const a=()=>{o!=null&&(window.clearInterval(o),o=null)};e.addDestroyFunc(a);const l=()=>{const c=Date.now()-n>s;(t()||c)&&(i(),r=!0,a())};l(),r||(o=window.setInterval(l,10))}var QP=new Set(["__proto__","constructor","prototype"]);function MH(e,t){if(e!=null){if(Array.isArray(e)){for(let i=0;i<e.length;i++)t(i.toString(),e[i]);return}for(const i of Object.keys(e).filter(s=>!QP.has(s)))t(i,e[i])}}function fs(e,t,i=!0,s=!1){fe(t)&&MH(t,(n,o)=>{let r=e[n];r!==o&&(s&&r==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(r={},e[n]=r),xx(o)&&xx(r)&&!Array.isArray(r)?fs(r,o,i,s):(i||o!==void 0)&&(e[n]=o))})}function xx(e){return typeof e=="object"&&e!==null}var TS=class Qo{static applyGlobalGridOptions(t){if(!Qo.gridOptions)return{...t};let i={};return fs(i,Qo.gridOptions,!0,!0),Qo.mergeStrategy==="deep"?fs(i,t,!0,!0):i={...i,...t},Qo.gridOptions.context&&(i.context=Qo.gridOptions.context),t.context&&(Qo.mergeStrategy==="deep"&&i.context&&fs(t.context,i.context,!0,!0),i.context=t.context),i}static applyGlobalGridOption(t,i){if(Qo.mergeStrategy==="deep"){const s=IH(t);if(s&&typeof s=="object"&&typeof i=="object")return Qo.applyGlobalGridOptions({[t]:i})[t]}return i}};TS.gridOptions=void 0;TS.mergeStrategy="shallow";var DS=TS;function IH(e){var t;return(t=DS.gridOptions)==null?void 0:t[e]}var kH={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1,enableFilterHandlers:!1},JP="https://www.ag-grid.com";function el(e,t,...i){e.get("debug")&&console.log("AG Grid: "+t,...i)}function cg(e,...t){PS(()=>console.warn("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function Od(e,...t){PS(()=>console.error("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}var ZP=new Set,ev={},Nd={},Fm,eT=!1,tT=!1,_H=!1;function LH(e){const[t,i]=e.version.split(".")||[],[s,n]=Fm.split(".")||[];return t===s&&i===n}function OH(e){var s;Fm||(Fm=e.version);const t=n=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${n} Please update all modules to the same version.`;e.version?LH(e)||Od(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${Fm}.`)):Od(t(`'${e.moduleName}' is incompatible.`));const i=(s=e.validate)==null?void 0:s.call(e);i&&!i.isValid&&Od(`${i.message}`)}function Pg(e,t,i=!1){i||(eT=!0),OH(e);const s=e.rowModels??["all"];ZP.add(e);let n;t!==void 0?(tT=!0,Nd[t]===void 0&&(Nd[t]={}),n=Nd[t]):n=ev;for(const o of s)n[o]===void 0&&(n[o]={}),n[o][e.moduleName]=e;if(e.dependsOn)for(const o of e.dependsOn)Pg(o,t,i)}function NH(e){delete Nd[e]}function ay(e,t,i){const s=n=>{var o,r,a;return!!((o=ev[n])!=null&&o[e])||!!((a=(r=Nd[t])==null?void 0:r[n])!=null&&a[e])};return s(i)||s("all")}function MS(){return tT}function HH(e,t){const i=Nd[e]??{};return[...Object.values(ev.all??{}),...Object.values(i.all??{}),...Object.values(ev[t]??{}),...Object.values(i[t]??{})]}function GH(){return new Set(ZP)}function BH(){return eT}function VH(){return _H}var zH=class{static register(e){Pg(e,void 0)}static registerModules(e){for(const t of e)Pg(t,void 0)}},ue="34.3.1",Rx=2e3,Ex=100,iT="_version_",Pm=null,Hd=`${JP}/javascript-data-grid`;function WH(e){Pm=e}function $H(e){Hd=e}function sT(e,t,i){return(Pm==null?void 0:Pm(e,t))??[qH(e,t,i)]}function IS(e,t,i,s,n){e(`${s?"warning":"error"} #${t}`,...sT(t,i,n))}function UH(e){if(!e)return String(e);const t={};for(const i of Object.keys(e))typeof e[i]!="object"&&typeof e[i]!="function"&&(t[i]=e[i]);return JSON.stringify(t)}function jH(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=UH(e)),t}function tv(e){return e===void 0?"undefined":e===null?"null":e}function ly(e,t){return`${e}?${t.toString()}`}function KH(e,t,i){const s=Array.from(t.entries()).sort((o,r)=>r[1].length-o[1].length);let n=ly(e,t);for(const[o,r]of s){if(o===iT)continue;const a=n.length-i;if(a<=0)break;const l="...",c=a+l.length,d=r.length-c>Ex?r.slice(0,r.length-c)+l:r.slice(0,Ex)+l;t.set(o,d),n=ly(e,t)}return n}function nT(e,t){const i=new URLSearchParams;if(i.append(iT,ue),t)for(const o of Object.keys(t))i.append(o,jH(t[o]));const s=`${Hd}/errors/${e}`,n=ly(s,i);return n.length<=Rx?n:KH(s,i,Rx)}var qH=(e,t,i)=>{const s=nT(e,t);return`${`${i?i+` 
`:""}Visit ${s}`}${i?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function J(...e){IS(cg,e[0],e[1],!0)}function At(...e){IS(Od,e[0],e[1],!1)}function Xu(e,t,i){IS(Od,e,t,!1,i)}function YH(e,t){const i=t[0];return`error #${i} `+sT(i,t[1],e).join(" ")}function No(...e){return YH(void 0,e)}function oT(e,t){return e.get("rowModelType")===t}function oi(e,t){return oT(e,"clientSide")}function vu(e,t){return oT(e,"serverSide")}function $i(e,t){return e.get("domLayout")===t}function Lc(e){return sv(e)!==void 0}function rT(e){return typeof e.get("getRowHeight")=="function"}function XH(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function tl(e,t,i=!1,s){const{gos:n,environment:o}=e;if(s==null&&(s=o.getDefaultRowHeight()),rT(n)){if(i)return{height:s,estimated:!0};const l={node:t,data:t.data},c=n.getCallback("getRowHeight")(l);if(cy(c))return c===0&&J(23),{height:Math.max(1,c),estimated:!1}}if(t.detail&&n.get("masterDetail"))return QH(n);const r=n.get("rowHeight");return{height:r&&cy(r)?r:s,estimated:!1}}function QH(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return cy(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function Oc(e){const{environment:t,gos:i}=e,s=i.get("rowHeight");if(!s||Ht(s))return t.getDefaultRowHeight();const n=t.refreshRowHeightVariable();return n!==-1?n:(J(24),t.getDefaultRowHeight())}function cy(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function aT(e,t,i){const s=t[e.getDomDataKey()];return s?s[i]:void 0}function Kc(e,t,i,s){const n=e.getDomDataKey();let o=t[n];Ht(o)&&(o={},t[n]=o),o[i]=s}function Gd(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function lT(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||$i(e,"print"))}function Mo(e){const t=e.get("autoGroupColumnDef");return!(t!=null&&t.comparator)&&!e.get("treeData")}function dy(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function cT(e){return e.get("grandTotalRow")}function dT(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function hT(e,t,i){return!!t.group&&!t.footer&&dT(e,i)}function nu(e){const t=e.getCallback("getRowId");return t===void 0?t:i=>{let s=t(i);return typeof s!="string"&&(PS(()=>J(25,{id:s}),"getRowIdString"),s=String(s)),s}}function JH(e,t){const i=e.get("groupHideParentOfSingleChild");return!!(i===!0||i==="leafGroupsOnly"&&t.leafGroup||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")&&t.leafGroup)}function ZH(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function Bd(e){return(e==null?void 0:e.checkboxes)??!0}function Tm(e){return(e==null?void 0:e.mode)==="multiRow"&&(e.headerCheckbox??!0)}function iv(e){if(typeof e=="object")return e.checkboxLocation??"selectionColumn"}function HC(e){return(e==null?void 0:e.hideDisabledCheckboxes)??!1}function eG(e){return typeof e.get("rowSelection")!="string"}function $r(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function uT(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const i=e.get("suppressRowClickSelection"),s=e.get("suppressRowDeselection");return i&&s?!1:i?"enableDeselection":s?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function tG(e){const t=uT(e);return t===!0||t==="enableSelection"}function iG(e){const t=uT(e);return t===!0||t==="enableDeselection"}function hy(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t==null?void 0:t.isRowSelectable}function sv(e){const t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t==null?void 0:t.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function Tg(e){return sv(e)==="multiRow"}function sG(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):(t==null?void 0:t.enableSelectionWithoutKeys)??!1}function nv(e){const t=e.get("rowSelection");if(typeof t=="string"){const i=e.get("groupSelectsChildren"),s=e.get("groupSelectsFiltered");return i&&s?"filteredDescendants":i?"descendants":"self"}return(t==null?void 0:t.mode)==="multiRow"?t.groupSelects:void 0}function gT(e,t=!0){const i=e.get("rowSelection");return typeof i!="object"?t?"all":void 0:i.mode==="multiRow"?i.selectAll:"all"}function nG(e){const t=e.get("rowSelection");return typeof t=="string"?!1:(t==null?void 0:t.mode)==="multiRow"?t.ctrlASelectsRows??!1:!1}function Dg(e){const t=nv(e);return t==="descendants"||t==="filteredDescendants"}function Ax(e){const t=e.get("rowSelection");return typeof t=="object"&&t.masterSelects||"self"}function oG(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function Us(e){return e.get("columnMenu")==="legacy"}function rG(e){return!Us(e)}function aG(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function Le(e,t){return e.addCommon(t)}function Fx({gos:e},t){return t.button===2||t.ctrlKey&&e.get("allowContextMenuWithControlKey")}var lG={resizable:!0,sortable:!0},cG=0;function fT(){return cG++}function il(e){return e instanceof ad}var ad=class extends V{constructor(e,t,i,s){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=s,this.isColumn=!0,this.instanceId=fT(),this.autoHeaderHeight=null,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new jc,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=og(i)}destroy(){var e;super.destroy(),(e=this.beans.rowSpanSvc)==null||e.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:i,colFlex:s}}=this;t==null||t.initCol(this);const n=e.hide;n!==void 0?this.visible=!n:this.visible=!e.initialHide,i==null||i.initCol(this),s==null||s.initCol(this)}setColDef(e,t,i){var n;const s=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),s&&((n=this.beans.rowSpanSvc)==null||n.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",i)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:i}}=this,s=e.get("suppressFieldDotNotation");this.fieldContainsDots=fe(t)&&t.includes(".")&&!s,this.tooltipFieldContainsDots=fe(i)&&i.includes(".")&&!s}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){var e;(e=this.beans.tooltipSvc)==null||e.initCol(this)}initRowSpan(){var e;this.colDef.spanRows&&((e=this.beans.rowSpanSvc)==null||e.register(this))}addPivotListener(){const e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;!e||!t||this.addManagedListeners(t,{colDefChanged:i=>{const s=e.recreateColDef(this.colDef);this.setColDef(s,s,i.source)}})}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=e.width,s=e.initialWidth;return i!=null?t=i:s!=null?t=s:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){var t;return((t=this.beans.showRowGroupCols)==null?void 0:t.isRowGroupDisplayed(this,e))??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){var s,n,o;this.frameworkEventListenerService=(n=(s=this.beans.frameworkOverrides).createLocalEventListenerWrapper)==null?void 0:n.call(s,this.frameworkEventListenerService,this.colEventSvc);const i=((o=this.frameworkEventListenerService)==null?void 0:o.wrap(e,t))??t;this.colEventSvc.addEventListener(e,i)}removeEventListener(e,t){var s;const i=((s=this.frameworkEventListenerService)==null?void 0:s.unwrap(e,t))??t;this.colEventSvc.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return Le(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){var t;return((t=this.beans.cellNavigation)==null?void 0:t.isSuppressNavigable(this,e))??!1}isCellEditable(e){var t;return((t=this.beans.editSvc)==null?void 0:t.isCellEditable({rowNode:e,column:this}))??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){var t;return((t=this.beans.selectionSvc)==null?void 0:t.isCellCheckboxSelection(this,e))??!1}isSuppressPaste(e){var t;return this.isColumnFunc(e,((t=this.colDef)==null?void 0:t.suppressPaste)??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??lG[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const i=this.createColumnFunctionCallbackParams(e);return t(i)}return!1}createColumnEvent(e,t){return Le(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Ht(this.sort)}isSorting(){return fe(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){var e;return J(261),!!((e=this.beans.colHover)!=null&&e.isHovered(this))}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const i=e===!0;this.visible!==i&&(this.visible=i,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e!=null&&e.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!(e!=null&&e.isPadding()))return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return Le(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Ht(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(Ht(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchColEvent(e,t,i){const s=this.createColumnEvent(e,t);i&&fs(s,i),this.colEventSvc.dispatchEvent(s)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function es(e){return e instanceof Dm}var Dm=class extends V{constructor(e,t,i,s){super(),this.colGroupDef=e,this.groupId=t,this.padding=i,this.level=s,this.isColumn=!1,this.expandable=!1,this.instanceId=fT(),this.expandableListenerRemoveCallback=null,this.expanded=!!(e!=null&&e.openByDefault)}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)il(t)?e(t):es(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){if(this.children)for(const t of this.children)il(t)?e.push(t):es(t)&&t.addLeafColumns(e)}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);for(const t of this.getLeafColumns())t.__addEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=()=>{for(const t of this.getLeafColumns())t.__removeEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const s=this.findChildrenRemovingPadding();for(let o=0,r=s.length;o<r;o++){const a=s[o];if(!a.isVisible())continue;const l=a.getColumnGroupShow();l==="open"?(e=!0,i=!0):l==="closed"?(t=!0,i=!0):(e=!0,t=!0)}const n=e&&t&&i;this.expandable!==n&&(this.expandable=n,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{for(const s of i)es(s)&&s.isPadding()?t(s.children):e.push(s)};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},dG={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function Px(e,t,i){const s={},n=e.gos;return Object.assign(s,n.get("defaultColGroupDef")),Object.assign(s,t),n.validateColDef(s,i),s}var hG=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=ny(e);let i=0;for(;;){let s=e??t;if(s?i!==0&&(s+="_"+i):s=i,!this.existingKeys[s]){const n=String(s);return e&&i>0&&J(273,{providedId:e,usedId:n}),this.existingKeys[n]=!0,n}i++}}};function Mt(e){if(e!=null&&e.length)return e[e.length-1]}function cl(e,t,i){if(e===t)return!0;if(!e||!t)return e==null&&t==null;const s=e.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(e[n]!==t[n]&&!(i!=null&&i(e[n],t[n])))return!1;return!0}function Fu(e,t){if(e)for(const i of e)t(i)}function Qn(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function Tx(e,t,i){for(let s=0;s<t.length;s++)Qn(e,t[s]);for(let s=t.length-1;s>=0;s--)e.splice(i,0,t[s])}var rC="ag-Grid-AutoColumn",pT="ag-Grid-SelectionColumn",mT="ag-Grid-RowNumbersColumn";function vT(e){const t=[],i=s=>{for(let n=0;n<s.length;n++){const o=s[n];il(o)?t.push(o):es(o)&&i(o.getChildren())}};return i(e),t}function er(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}function ov(e,t,i){const s={};if(!t)return;Nr(null,t,o=>{s[o.getInstanceId()]=o}),i&&Nr(null,i,o=>{s[o.getInstanceId()]=null});const n=Object.values(s).filter(o=>o!=null);e.context.destroyBeans(n)}function kS(e){return e.getId().startsWith(rC)}function Qr(e){const t=typeof e=="string"?e:"getColId"in e?e.getColId():e.colId;return(t==null?void 0:t.startsWith(pT))??!1}function Or(e){const t=typeof e=="string"?e:"getColId"in e?e.getColId():e.colId;return(t==null?void 0:t.startsWith(mT))??!1}function uG(e){return Qr(e)||Or(e)}function rv(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function gG(e,t){return cl(e,t,(i,s)=>i.getColId()===s.getColId())}function fG(e){e.map={};for(const t of e.list)e.map[t.getId()]=t}function Vd(e){return e==="optionsUpdated"?"gridOptionsChanged":e}function dg(e,t){const i=e===t,s=e.getColDef()===t,n=e.getColId()==t;return i||s||n}var pG=(e,t)=>(i,s)=>{const n={value1:void 0,value2:void 0};let o=!1;return e&&(e[i]!==void 0&&(n.value1=e[i],o=!0),fe(s)&&e[s]!==void 0&&(n.value2=e[s],o=!0)),!o&&t&&(t[i]!==void 0&&(n.value1=t[i]),fe(s)&&t[s]!==void 0&&(n.value2=t[s])),n},mG=(e,t)=>{es(e)&&e.setupExpandable(),e.originalParent=t};function vG(e,t=null,i,s,n){const o=new hG,{existingCols:r,existingGroups:a,existingColKeys:l}=CG(s);o.addExistingKeys(l);const c=CT(e,t,0,i,r,o,a,n),{colGroupSvc:d}=e,h=(d==null?void 0:d.findMaxDepth(c,0))??0,u=d?d.balanceColumnTree(c,0,h,o):c;return Nr(null,u,mG),{columnTree:u,treeDepth:h}}function CG(e){const t=[],i=[],s=[];return e&&Nr(null,e,n=>{if(es(n)){const o=n;i.push(o)}else{const o=n;s.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:i,existingColKeys:s}}function CT(e,t,i,s,n,o,r,a){if(!t)return[];const{colGroupSvc:l}=e,c=new Array(t.length);for(let d=0;d<c.length;d++){const h=t[d];l&&RG(h)?c[d]=l.createProvidedColumnGroup(s,h,i,n,o,r,a):c[d]=wG(e,s,h,n,o,a)}return c}function wG(e,t,i,s,n,o){var l;const r=yG(i,s);r&&(s==null||s.splice(r.idx,1));let a=r==null?void 0:r.column;if(a){const c=uy(e,i,a.getColId());a.setColDef(c,i,o),bG(e,a,c,o)}else{const c=n.getUniqueKey(i.colId,i.field),d=uy(e,i,c);a=new ad(d,i,c,t),e.context.createBean(a)}return(l=e.dataTypeSvc)==null||l.addColumnListeners(a),a}function wT(e,t,i,s,n,o,r,a){const{sortSvc:l,pinnedCols:c,colFlex:d}=e;i!==void 0&&t.setVisible(!i,a),l&&(l.updateColSort(t,s,a),n!==void 0&&l.setColSortIndex(t,n)),o!==void 0&&(c==null||c.setColPinned(t,o)),r!==void 0&&(d==null||d.setColFlex(t,r))}function bG(e,t,i,s){wT(e,t,i.hide,i.sort,i.sortIndex,i.pinned,i.flex,s);const n=t.getFlex();if(!(n!=null&&n>0))if(i.width!=null)t.setActualWidth(i.width,s);else{const o=t.getActualWidth();t.setActualWidth(o,s)}}function yG(e,t){if(t)for(let i=0;i<t.length;i++){const s=t[i].getUserProvidedColDef();if(!s)continue;if(e.colId!=null){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(e.field!=null){if(s.field===e.field)return{idx:i,column:t[i]};continue}if(s===e)return{idx:i,column:t[i]}}}function uy(e,t,i,s){const{gos:n,dataTypeSvc:o}=e,r={},a=n.get("defaultColDef");fs(r,a,!1,!0);const l=SG(e,r,t,i);l&&xG(e,l,r);const c=r.cellDataType;fs(r,t,!1,!0),c!==void 0&&(r.cellDataType=c);const d=n.get("autoGroupColumnDef"),h=Mo(n);return t.rowGroup&&d&&h&&fs(r,{sort:d.sort,initialSort:d.initialSort},!1,!0),o&&(o.postProcess(r),o.validateColDef(r)),n.validateColDef(r,i,s),r}function SG(e,t,i,s){var r;const n=(r=e.dataTypeSvc)==null?void 0:r.updateColDefAndGetColumnType(t,i,s),o=i.type??n??t.type;return t.type=o,o?rv(o):void 0}function xG(e,t,i){if(!t.length)return;const s=Object.assign({},dG),n=e.gos.get("columnTypes")||{};for(const o of Object.keys(n)){const r=n[o];o in s?J(34,{key:o}):(r.type&&J(35),s[o]=r)}for(const o of t){const r=s[o.trim()];r?fs(i,r,!1,!0):J(36,{t:o})}}function RG(e){return e.children!==void 0}function Nr(e,t,i){if(t)for(let s=0;s<t.length;s++){const n=t[s];es(n)&&Nr(n,n.getChildren(),i),i(n,e)}}function bT(e,t){const i=[],s=[],n=[];return e.forEach(r=>{const a=r.getColDef().lockPosition;a==="right"?n.push(r):a==="left"||a===!0?i.push(r):s.push(r)}),t.get("enableRtl")?[...n,...s,...i]:[...i,...s,...n]}function yT(e,t){let i=!0;return Nr(null,t,s=>{if(!es(s))return;const n=s,o=n.getColGroupDef();if(!(o==null?void 0:o.marryChildren))return;const a=[];for(const u of n.getLeafColumns()){const f=e.indexOf(u);a.push(f)}const l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),d=l-c,h=n.getLeafColumns().length-1;d>h&&(i=!1)}),i}function ST(e,t){if(!e||e.length==0)return;const i=t(e[0]);for(let s=1;s<e.length;s++)if(i!==t(e[s]))return;return i}function xT(e,t,i){if(!t.length)return;const s=t.length===1?t[0]:null,n=ST(t,o=>o.getPinned());e.dispatchEvent({type:"columnPinned",pinned:n??null,columns:t,column:s,source:i})}function EG(e,t,i){if(!t.length)return;const s=t.length===1?t[0]:null,n=ST(t,o=>o.isVisible());e.dispatchEvent({type:"columnVisible",visible:n,columns:t,column:s,source:i})}function AG(e,t,i,s){e.dispatchEvent({type:t,columns:i,column:i&&i.length==1?i[0]:null,source:s})}function ou(e,t,i,s,n=null){t!=null&&t.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:n,finished:i,source:s})}function Yn(e,t,i){var R;const{colModel:s,rowGroupColsSvc:n,pivotColsSvc:o,autoColSvc:r,selectionColSvc:a,colAnimation:l,visibleCols:c,pivotResultCols:d,environment:h,valueColsSvc:u,eventSvc:f,gos:p}=e,m=s.getColDefCols()??[],v=a==null?void 0:a.getColumns();if(!m.length&&!(v!=null&&v.length))return!1;if(t!=null&&t.state&&!t.state.forEach)return J(32),!1;const C=(A,P,T,M,N)=>{if(!A)return;const _=pG(P,t.defaultState),L=_("flex").value1;if(wT(e,A,_("hide").value1,_("sort").value1,_("sortIndex").value1,_("pinned").value1,L,i),L==null){const z=_("width").value1;if(z!=null){const q=A.getColDef().minWidth??h.getDefaultColumnMinWidth();q!=null&&z>=q&&A.setActualWidth(z,i)}}N||!A.isPrimary()||(u==null||u.syncColumnWithState(A,i,_),n==null||n.syncColumnWithState(A,i,_,T),o==null||o.syncColumnWithState(A,i,_,M))},w=(A,P,T)=>{var Pe,Q;const M=RT(e,i),N=P.slice(),_={},L={},z=[],q=[],B=[];let Z=0;const ee=(n==null?void 0:n.columns.slice())??[],Y=(o==null?void 0:o.columns.slice())??[];for(const te of A){const ie=te.colId;if(ie.startsWith(rC)){z.push(te),B.push(te);continue}if(Qr(ie)){q.push(te),B.push(te);continue}const U=T(ie);U?(C(U,te,_,L,!1),Qn(N,U)):(B.push(te),Z+=1)}const ye=te=>C(te,null,_,L,!1);N.forEach(ye),n==null||n.sortColumns(Dx.bind(n,_,ee)),o==null||o.sortColumns(Dx.bind(o,L,Y)),s.refreshCols(!1,i);const De=(te,ie,ae=[])=>{for(const U of ie){const oe=te(U.colId);Qn(ae,oe),C(oe,U,null,null,!0)}ae.forEach(ye)};return De(te=>(r==null?void 0:r.getColumn(te))??null,z,(Pe=r==null?void 0:r.getColumns())==null?void 0:Pe.slice()),De(te=>(a==null?void 0:a.getColumn(te))??null,q,(Q=a==null?void 0:a.getColumns())==null?void 0:Q.slice()),PG(t,s,p),c.refresh(i),f.dispatchEvent({type:"columnEverythingChanged",source:i}),M(),{unmatchedAndAutoStates:B,unmatchedCount:Z}};l==null||l.start();let{unmatchedAndAutoStates:S,unmatchedCount:y}=w(t.state||[],m,A=>s.getColDefCol(A));if(S.length>0||fe(t.defaultState)){const A=((R=d==null?void 0:d.getPivotResultCols())==null?void 0:R.list)??[];y=w(S,A,P=>(d==null?void 0:d.getPivotResultCol(P))??null).unmatchedCount}return l==null||l.finish(),y===0}function FG(e,t){var w,S;const{colModel:i,autoColSvc:s,selectionColSvc:n,eventSvc:o,gos:r}=e,a=i.getColDefCols();if(!(a!=null&&a.length))return;const l=i.getColDefColTree(),c=vT(l),d=[];let h=1e3,u=1e3;const f=y=>{const R=ET(y);Ht(R.rowGroupIndex)&&R.rowGroup&&(R.rowGroupIndex=h++),Ht(R.pivotIndex)&&R.pivot&&(R.pivotIndex=u++),d.push(R)};(w=s==null?void 0:s.getColumns())==null||w.forEach(f),(S=n==null?void 0:n.getColumns())==null||S.forEach(f),c==null||c.forEach(f),Yn(e,{state:d},t);const p=(s==null?void 0:s.getColumns())??[],C=[...(n==null?void 0:n.getColumns())??[],...p,...a].map(y=>({colId:y.colId}));Yn(e,{state:C,applyOrder:!0},t),o.dispatchEvent(Le(r,{type:"columnsReset",source:t}))}function RT(e,t){const{rowGroupColsSvc:i,pivotColsSvc:s,valueColsSvc:n,colModel:o,sortSvc:r,eventSvc:a}=e,l={rowGroupColumns:(i==null?void 0:i.columns.slice())??[],pivotColumns:(s==null?void 0:s.columns.slice())??[],valueColumns:(n==null?void 0:n.columns.slice())??[]},c=av(e),d={};for(const h of c)d[h.colId]=h;return()=>{const h=(A,P,T,M)=>{const N=P.map(M),_=T.map(M);if(cl(N,_))return;const z=new Set(P);for(const B of T)z.delete(B)||z.add(B);const q=[...z];a.dispatchEvent({type:A,columns:q,column:q.length===1?q[0]:null,source:t})},u=A=>{const P=[];return o.forAllCols(T=>{const M=d[T.getColId()];M&&A(M,T)&&P.push(T)}),P},f=A=>A.getColId();h("columnRowGroupChanged",l.rowGroupColumns,(i==null?void 0:i.columns)??[],f),h("columnPivotChanged",l.pivotColumns,(s==null?void 0:s.columns)??[],f);const m=u((A,P)=>{const T=A.aggFunc!=null,M=T!=P.isValueActive(),N=T&&A.aggFunc!=P.getAggFunc();return M||N});m.length>0&&AG(a,"columnValueChanged",m,t),ou(a,u((A,P)=>A.width!=P.getActualWidth()),!0,t),xT(a,u((A,P)=>A.pinned!=P.getPinned()),t),EG(a,u((A,P)=>A.hide==P.isVisible()),t);const y=u((A,P)=>A.sort!=P.getSort()||A.sortIndex!=P.getSortIndex());y.length>0&&(r==null||r.dispatchSortChangedEvents(t,y));const R=av(e);DG(c,R,t,o,a)}}function av(e){const{colModel:t,rowGroupColsSvc:i,pivotColsSvc:s}=e,n=t.getColDefCols();if(Ht(n)||!t.isAlive())return[];const o=i==null?void 0:i.columns,r=s==null?void 0:s.columns,a=[],l=d=>{const h=d.isRowGroupActive()&&o?o.indexOf(d):null,u=d.isPivotActive()&&r?r.indexOf(d):null,f=d.isValueActive()?d.getAggFunc():null,p=d.getSort()!=null?d.getSort():null,m=d.getSortIndex()!=null?d.getSortIndex():null;a.push({colId:d.getColId(),width:d.getActualWidth(),hide:!d.isVisible(),pinned:d.getPinned(),sort:p,sortIndex:m,aggFunc:f,rowGroup:d.isRowGroupActive(),rowGroupIndex:h,pivot:d.isPivotActive(),pivotIndex:u,flex:d.getFlex()??null})};t.forAllCols(d=>l(d));const c=new Map(t.getCols().map((d,h)=>[d.getColId(),h]));return a.sort((d,h)=>{const u=c.has(d.colId)?c.get(d.colId):-1,f=c.has(h.colId)?c.get(h.colId):-1;return u-f}),a}function ET(e){const t=(p,m)=>p??m??null,i=e.getColDef(),s=t(i.sort,i.initialSort),n=t(i.sortIndex,i.initialSortIndex),o=t(i.hide,i.initialHide),r=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),l=t(i.flex,i.initialFlex);let c=t(i.rowGroupIndex,i.initialRowGroupIndex),d=t(i.rowGroup,i.initialRowGroup);c==null&&!d&&(c=null,d=null);let h=t(i.pivotIndex,i.initialPivotIndex),u=t(i.pivot,i.initialPivot);h==null&&!u&&(h=null,u=null);const f=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:s,sortIndex:n,hide:o,pinned:r,width:a,flex:l,rowGroup:d,rowGroupIndex:c,pivot:u,pivotIndex:h,aggFunc:f}}function PG(e,t,i){if(!e.applyOrder||!e.state)return;const s=[];for(const n of e.state)n.colId!=null&&s.push(n.colId);TG(t.cols,s,t,i)}function TG(e,t,i,s){if(e==null)return;let n=[];const o={};for(const a of t){if(o[a])continue;const l=e.map[a];l&&(n.push(l),o[a]=!0)}let r=0;for(const a of e.list){const l=a.getColId();if(o[l]!=null)continue;l.startsWith(rC)?n.splice(r++,0,a):n.push(a)}if(n=bT(n,s),!yT(n,i.getColTree())){J(39);return}e.list=n}function DG(e,t,i,s,n){const o={};for(const d of t)o[d.colId]=d;const r={};for(const d of e)o[d.colId]&&(r[d.colId]=!0);const a=e.filter(d=>r[d.colId]),l=t.filter(d=>r[d.colId]),c=[];l.forEach((d,h)=>{const u=a==null?void 0:a[h];if(u&&u.colId!==d.colId){const f=s.getCol(u.colId);f&&c.push(f)}}),c.length&&n.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,finished:!0,source:i})}var Dx=(e,t,i,s)=>{const n=e[i.getId()],o=e[s.getId()],r=n!=null,a=o!=null;if(r&&a)return n-o;if(r)return-1;if(a)return 1;const l=t.indexOf(i),c=t.indexOf(s),d=l>=0,h=c>=0;return d&&h?l-c:d?-1:1},MG=class extends V{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(Vd(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),Vd(e.source)))}createColsFromColDefs(e){var w,S,y;const{beans:t}=this,{valueCache:i,colAutosize:s,rowGroupColsSvc:n,pivotColsSvc:o,valueColsSvc:r,visibleCols:a,eventSvc:l,groupHierarchyColSvc:c}=t,d=this.colDefs?RT(t,e):void 0;i==null||i.expire();const h=(w=this.colDefCols)==null?void 0:w.list,u=(S=this.colDefCols)==null?void 0:S.tree,f=vG(t,this.colDefs,!0,u,e);ov(t,(y=this.colDefCols)==null?void 0:y.tree,f.columnTree);const p=f.columnTree,m=f.treeDepth,v=vT(p),C={};for(const R of v)C[R.getId()]=R;this.colDefCols={tree:p,treeDepth:m,list:v,map:C},this.createColumnsForService([c],this.colDefCols,e),n==null||n.extractCols(e,h),o==null||o.extractCols(e,h),r==null||r.extractCols(e,h),this.ready=!0,this.refreshCols(!0,e),a.refresh(e),l.dispatchEvent({type:"columnEverythingChanged",source:e}),d&&(this.changeEventsDispatching=!0,d(),this.changeEventsDispatching=!1),l.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&(s==null||s.applyAutosizeStrategy())}refreshCols(e,t){var v;if(!this.colDefCols)return;const i=(v=this.cols)==null?void 0:v.tree;this.saveColOrder();const{autoColSvc:s,selectionColSvc:n,rowNumbersSvc:o,quickFilter:r,pivotResultCols:a,showRowGroupCols:l,rowAutoHeight:c,visibleCols:d,colViewport:h,eventSvc:u}=this.beans,f=this.selectCols(a,this.colDefCols);this.createColumnsForService([s,n,o],f,t);const p=XH(this.gos,this.showingPivotResult);(!e||p)&&this.restoreColOrder(f),this.positionLockedCols(f),l==null||l.refresh(),r==null||r.refreshCols(),this.setColSpanActive(),c==null||c.setAutoHeightActive(f),d.clear(),h.clear(),!cl(i,this.cols.tree)&&u.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t,i){for(const s of e)s&&(s.createColumns(t,n=>{this.lastOrder=n(this.lastOrder),this.lastPivotOrder=n(this.lastPivotOrder)},i),s.addColumns(t))}selectCols(e,t){const i=(e==null?void 0:e.getPivotResultCols())??null;this.showingPivotResult=i!=null;const{map:s,list:n,tree:o,treeDepth:r}=i??t;return this.cols={list:n.slice(),map:{...s},tree:o.slice(),treeDepth:r},i&&(i.list.some(l=>{var c;return((c=this.cols)==null?void 0:c.map[l.getColId()])!==void 0})||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];const{valueColsSvc:e,selectionColSvc:t,gos:i}=this.beans,s=this.isPivotMode()&&!this.showingPivotResult,n=t==null?void 0:t.isSelectionColumnEnabled(),o=i.get("rowNumbers"),r=e==null?void 0:e.columns;return this.cols.list.filter(l=>{const c=kS(l);if(s){const d=r==null?void 0:r.includes(l);return c||d||n&&Qr(l)||o&&Or(l)}else return c||l.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1,e),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,i){Yn(this.beans,{state:e.map(s=>({colId:typeof s=="string"?s:s.getColId(),hide:!t}))},i)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const i=t.filter(h=>e.map[h.getId()]!=null);if(i.length===0)return;if(i.length===e.list.length){e.list=i;return}const s=h=>{const u=h.getOriginalParent();return u?u.getChildren().length>1?!0:s(u):!1};if(!i.some(h=>s(h))){const h=new Set(i);for(const u of e.list)h.has(u)||i.push(u);e.list=i;return}const n=new Map;for(let h=0;h<i.length;h++){const u=i[h];n.set(u,h)}const o=e.list.filter(h=>!n.has(h));if(o.length===0){e.list=i;return}const r=(h,u)=>{const f=u?u.getOriginalParent():h.getOriginalParent();if(!f)return null;let p=null,m=null;for(const v of f.getChildren())if(!(v===u||v===h)){if(v instanceof ad){const C=n.get(v);if(C==null)continue;(p==null||p<C)&&(p=C,m=v);continue}v.forEachLeafColumn(C=>{const w=n.get(C);w!=null&&(p==null||p<w)&&(p=w,m=C)})}return m??r(h,f)},a=[],l=new Map;for(const h of o){const u=r(h,null);if(u==null){a.push(h);continue}const f=l.get(u);f===void 0?l.set(u,h):Array.isArray(f)?f.push(h):l.set(u,[f,h])}const c=new Array(e.list.length);let d=c.length-1;for(let h=a.length-1;h>=0;h--)c[d--]=a[h];for(let h=i.length-1;h>=0;h--){const u=i[h],f=l.get(u);if(f)if(Array.isArray(f))for(let p=f.length-1;p>=0;p--){const m=f[p];c[d--]=m}else c[d--]=f;c[d--]=u}e.list=c}positionLockedCols(e){e.list=bT(e.list,this.gos)}saveColOrder(){var e,t;this.showingPivotResult?this.lastPivotOrder=((e=this.cols)==null?void 0:e.list)??null:this.lastOrder=((t=this.cols)==null?void 0:t.list)??null}getColumnDefs(e){var t,i;return this.colDefCols&&((i=this.beans.colDefFactory)==null?void 0:i.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,((t=this.cols)==null?void 0:t.list)??[],e))}setColSpanActive(){var e;this.colSpanActive=!!((e=this.cols)!=null&&e.list.some(t=>t.getColDef().colSpan!=null))}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1,t);const{visibleCols:i,eventSvc:s}=this.beans;i.refresh(t),s.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){var t;const e=(t=this.beans.pivotColsSvc)==null?void 0:t.columns;return this.pivotMode&&!!(e!=null&&e.length)}recreateColumnDefs(e){var i;if(!this.cols)return;(i=this.beans.autoColSvc)==null||i.updateColumns(e);const t=Vd(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e;ov(this.beans,(e=this.colDefCols)==null?void 0:e.tree),super.destroy()}getColTree(){var e;return((e=this.cols)==null?void 0:e.tree)??[]}getColDefColTree(){var e;return((e=this.colDefCols)==null?void 0:e.tree)??[]}getColDefCols(){var e;return((e=this.colDefCols)==null?void 0:e.list)??null}getCols(){var e;return((e=this.cols)==null?void 0:e.list)??[]}forAllCols(e){var o,r,a,l,c;const{pivotResultCols:t,autoColSvc:i,selectionColSvc:s,groupHierarchyColSvc:n}=this.beans;Fu((o=this.colDefCols)==null?void 0:o.list,e),Fu((r=i==null?void 0:i.columns)==null?void 0:r.list,e),Fu((a=s==null?void 0:s.columns)==null?void 0:a.list,e),Fu((l=n==null?void 0:n.columns)==null?void 0:l.list,e),Fu((c=t==null?void 0:t.getPivotResultCols())==null?void 0:c.list,e)}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){var t;return(t=this.colDefCols)!=null&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColById(e){var t;return((t=this.cols)==null?void 0:t.map[e])??null}getColFromCollection(e,t){if(t==null)return null;const{map:i,list:s}=t;if(typeof e=="string"&&i[e])return i[e];for(let a=0;a<s.length;a++)if(dg(s[a],e))return s[a];const{autoColSvc:n,selectionColSvc:o,groupHierarchyColSvc:r}=this.beans;return(n==null?void 0:n.getColumn(e))??(o==null?void 0:o.getColumn(e))??(r==null?void 0:r.getColumn(e))??null}},AT=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}};function pp(e,t,i){return i&&e.addDestroyFunc(()=>t.destroyBean(i)),i??e}var he=null;function Mx(e){return typeof(e==null?void 0:e.getGui)=="function"}var FT=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){var s;if(!e)return;if(e.indexOf(" ")>=0){const n=(e||"").split(" ");if(n.length>1){for(const o of n)this.toggleCss(o,t);return}}this.cssClassStates[e]!==t&&e.length&&((s=this.getGui())==null||s.classList.toggle(e,t),this.cssClassStates[e]=t)}},IG=0,mp=class extends $o{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=IG++,this.cssManager=new FT(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(i=>[i.selector,i])),e&&this.setTemplate(e)}preConstruct(){var t,i;this.wireTemplate(this.getGui());const e="component-"+((i=(t=Object.getPrototypeOf(this))==null?void 0:t.constructor)==null?void 0:i.name);for(const s of this.css??[])this.beans.environment.addGlobalCSS(s,e)}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(KP):null}applyElementsToComponent(e,t,i,s=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){const n=this[t];if(n===he)this[t]=s??e;else{const o=i==null?void 0:i[t];if(!this.suppressDataRefValidation&&!o)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${n}`)}}}createChildComponentsFromTags(e,t){const i=[];for(const s of e.childNodes??[])i.push(s);for(const s of i){if(!(s instanceof HTMLElement))continue;const n=this.createComponentFromElement(s,o=>{const r=o.getGui();if(r)for(const a of s.attributes??[])r.setAttribute(a.name,a.value)},t);if(n){if(n.addItems&&s.children.length){this.createChildComponentsFromTags(s,t);const o=Array.prototype.slice.call(s.children);n.addItems(o)}this.swapComponentForNode(n,e,s)}else s.childNodes&&this.createChildComponentsFromTags(s,t)}}createComponentFromElement(e,t,i){const s=e.nodeName,n=this.getDataRefAttribute(e),o=s.indexOf("AG-")===0,r=o?this.componentSelectors.get(s):null;let a=null;if(r){const l=i&&n?i[n]:void 0;a=new r.component(l),a.setParentComponent(this),this.createBean(a,null,t)}else if(o)throw new Error(`selector: ${s}`);return this.applyElementsToComponent(e,n,i,a),a}swapComponentForNode(e,t,i){const s=e.getGui();t.replaceChild(s,i),t.insertBefore(document.createComment(i.nodeName),s),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui());for(const i of e)i.setAttribute("tabindex",t.toString())}setTemplate(e,t,i){let s;typeof e=="string"||e==null?s=xS(e):s=fp(e),this.setTemplateFromElement(s,t,i)}setTemplateFromElement(e,t,i,s=!1){if(this.eGui=e,this.suppressDataRefValidation=s,t)for(let n=0;n<t.length;n++){const o=t[n];this.componentSelectors.set(o.selector,o)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let i=t;return e==null?null:(i||(i=this.eGui),AS(e)?{element:e,parent:i}:{element:e.getGui(),parent:i})}prependChild(e,t){const{element:i,parent:s}=this.getContainerAndElement(e,t)||{};!i||!s||s.insertAdjacentElement("afterbegin",i)}appendChild(e,t){const{element:i,parent:s}=this.getContainerAndElement(e,t)||{};!i||!s||s.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;uH(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;Ot(this.eGui,e,{skipAriaHidden:i});const s={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(s)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}},xt=class extends mp{};function PT(e){return typeof e=="object"&&!!e.component}function kG(e,t){return new Xt(i=>{i(window.setInterval(e,t))})}var Xt=class Qu{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(i=>this.onDone(i),i=>this.onReject(i))}static all(t){return t.length?new Qu(i=>{let s=t.length;const n=new Array(s);t.forEach((o,r)=>{o.then(a=>{n[r]=a,s--,s===0&&i(n)})})}):Qu.resolve()}static resolve(t=null){return new Qu(i=>i(t))}then(t){return new Qu(i=>{this.status===1?i(t(this.resolution)):this.waiters.push(s=>i(t(s)))})}onDone(t){this.status=1,this.resolution=t;for(const i of this.waiters)i(t)}onReject(t){}};function _G(e){return e?e.prototype&&"getGui"in e.prototype:!1}function TT(e,t,i,s){const{name:n}=i;let o,r,a,l,c,d;if(t){const h=t,u=h[n+"Selector"],f=u?u(s):null,p=m=>{typeof m=="string"?o=m:m!=null&&m!==!0&&(e.isFrameworkComponent(m)?a=m:r=m)};f?(p(f.component),l=f.params,c=f.popup,d=f.popupPosition):p(h[n])}return{compName:o,jsComp:r,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:d}}var LG=class extends V{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,i,s=!1){return this.getCompDetails(this.gridOptions,e,t,i,s)}getCompDetails(e,t,i,s,n=!1){var S;const{name:o,cellRenderer:r}=t;let{compName:a,jsComp:l,fwComp:c,paramsFromSelector:d,popupFromSelector:h,popupPositionFromSelector:u}=TT(this.beans.frameworkOverrides,e,t,s),f,p;const m=y=>{const R=this.registry.getUserComponent(o,y);R&&(l=R.componentFromFramework?void 0:R.component,c=R.componentFromFramework?R.component:void 0,f=R.params,p=R.processParams)};if(a!=null&&m(a),l==null&&c==null&&i!=null&&m(i),l&&r&&!_G(l)&&(l=(S=this.agCompUtils)==null?void 0:S.adaptFunction(t,l)),!l&&!c){const{validation:y}=this.beans;n&&(a!==i||!i)?a?y!=null&&y.isProvidedUserComp(a)||At(50,{compName:a}):i?y||At(260,{...this.gos.getModuleErrorParams(),propName:o,compName:i}):At(216,{name:o}):i&&!y&&At(146,{comp:i});return}const v=this.mergeParams(e,t,s,d,f,p),C=l==null,w=l??c;return{componentFromFramework:C,componentClass:w,params:v,type:t,popupFromSelector:h,popupPositionFromSelector:u,newAgStackInstance:()=>this.newAgStackInstance(w,C,v,t)}}newAgStackInstance(e,t,i,s){var a;const n=!t;let o;n?o=new e:o=this.frameworkCompWrapper.wrap(e,s.mandatoryMethods,s.optionalMethods,s),this.createBean(o);const r=(a=o.init)==null?void 0:a.call(o,i);return r==null?Xt.resolve(o):r.then(()=>o)}mergeParams(e,t,i,s=null,n,o){const r={...i,...n},a=e,l=a==null?void 0:a[t.name+"Params"];if(typeof l=="function"){const c=l(i);fs(r,c)}else typeof l=="object"&&fs(r,l);return fs(r,s),o?o(r):r}},OG={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},NG={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},HG={name:"headerComponent",optionalMethods:["refresh"]},GG={name:"innerHeaderComponent"},BG={name:"innerHeaderGroupComponent"},VG={name:"headerGroupComponent"},zG={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},WG={name:"loadingCellRenderer",cellRenderer:!0},$G={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},UG={name:"loadingOverlayComponent",optionalMethods:["refresh"]},jG={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},KG={name:"tooltipComponent"},_S={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},qG={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},YG={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},XG={name:"loadingCellRenderer",cellRenderer:!0},QG={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},JG={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function ZG(e,t){return e.getCompDetailsFromGridOptions(NG,"agDragAndDropImage",t,!0)}function eB(e,t,i){return e.getCompDetails(t,HG,"agColumnHeader",i)}function tB(e,t,i){return e.getCompDetails(t,GG,void 0,i)}function iB(e,t){const i=t.columnGroup.getColGroupDef();return e.getCompDetails(i,VG,"agColumnGroupHeader",t)}function sB(e,t,i){return e.getCompDetails(t,BG,void 0,i)}function nB(e,t){return e.getCompDetailsFromGridOptions(YG,void 0,t,!0)}function oB(e,t){return e.getCompDetailsFromGridOptions(XG,"agLoadingCellRenderer",t,!0)}function rB(e,t){return e.getCompDetailsFromGridOptions(QG,"agGroupRowRenderer",t,!0)}function aB(e,t){return e.getCompDetailsFromGridOptions(JG,"agDetailCellRenderer",t,!0)}function Ix(e,t,i){return e.getCompDetails(t,zG,void 0,i)}function kx(e,t,i){return e.getCompDetails(t,WG,"agSkeletonCellRenderer",i,!0)}function DT(e,t,i){return e.getCompDetails(t,$G,"agCellEditor",i,!0)}function lB(e,t,i,s){const n=t.filter;return PT(n)&&(t={filter:n.component,filterParams:t.filterParams}),e.getCompDetails(t,_S,s,i,!0)}function cB(e,t,i){return e.getCompDetails(t,OG,"agDateInput",i,!0)}function dB(e,t){return e.getCompDetailsFromGridOptions(UG,"agLoadingOverlay",t,!0)}function hB(e,t){return e.getCompDetailsFromGridOptions(jG,"agNoRowsOverlay",t,!0)}function uB(e,t){return e.getCompDetails(t.colDef,KG,"agTooltipComponent",t,!0)}function gB(e,t,i,s){return e.getCompDetails(t,qG,s,i)}function MT(e,t){return TT(e,t,_S)}function GC(e,t,i){return e.mergeParams(t,_S,i)}function Mg(e){const t=e;return(t==null?void 0:t.getFrameworkComponentInstance)!=null?t.getFrameworkComponentInstance():e}function fB(e){return typeof e=="object"&&!!e.getComp}var G={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},LS=class extends mp{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;(e==null?void 0:e.isAlive())&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},BC,VC,zC,WC,gy,fy,$C;function dl(){return BC===void 0&&(BC=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),BC}function IT(){return VC===void 0&&(VC=/(firefox)/i.test(navigator.userAgent)),VC}function kT(){return zC===void 0&&(zC=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),zC}function Nc(){return WC===void 0&&(WC=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),WC}function py(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return t===-1&&(i===null||i===""&&!IT())?null:t.toString()}function pB(){if($C!==void 0)return $C;if(!document.body)return-1;let e=1e6;const t=IT()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const s=e*2;if(i.style.height=s+"px",s>t||i.clientHeight!==s)break;e=s}return i.remove(),$C=e,e}function mB(){return fy==null&&_T(),fy}function _T(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;i===0&&t.clientWidth===0&&(i=null),t.parentNode&&t.remove(),i!=null&&(fy=i,gy=i===0)}function LT(){return gy==null&&_T(),gy}var OS="T",vB=new RegExp(`[${OS} ]`),CB=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${OS}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function Io(e,t){return e.toString().padStart(t,"0")}function Ks(e,t=!0,i=OS){if(!e)return null;let s=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(n=>Io(n,2)).join("-");return t&&(s+=i+[e.getHours(),e.getMinutes(),e.getSeconds()].map(n=>Io(n,2)).join(":")),s}function Lp(e,t=!0){return e?t?[String(e.getFullYear()),String(e.getMonth()+1),Io(e.getDate(),2),Io(e.getHours(),2),`:${Io(e.getMinutes(),2)}`,`:${Io(e.getSeconds(),2)}`]:[e.getFullYear(),e.getMonth()+1,Io(e.getDate(),2)].map(String):null}var UC=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},_x=["January","February","March","April","May","June","July","August","September","October","November","December"],jC=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function my(e,t){if(t==null)return Ks(e,!1);const i=Io(e.getFullYear(),4),s={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>_x[e.getMonth()],MMM:()=>_x[e.getMonth()].slice(0,3),MM:()=>Io(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${UC(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${UC(e.getDate())}`,DD:()=>Io(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>jC[e.getDay()],ddd:()=>jC[e.getDay()].slice(0,3),dd:()=>jC[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${UC(e.getDay())}`,d:()=>`${e.getDay()}`},n=new RegExp(Object.keys(s).join("|"),"g");return t.replace(n,o=>o in s?s[o]():o)}function Mm(e,t=!1){return!!Ts(e,t)}function wB(e){return Mm(e,!0)}function Ts(e,t=!1,i){if(!e||!i&&!CB.test(e))return null;const[s,n]=e.split(vB);if(!s)return null;const o=s.split("-").map(f=>Number.parseInt(f,10));if(o.filter(f=>!isNaN(f)).length!==3)return null;const[r,a,l]=o,c=new Date(r,a-1,l);if(c.getFullYear()!==r||c.getMonth()!==a-1||c.getDate()!==l||!n&&t)return null;if(!n||n==="00:00:00")return c;const[d,h,u]=n.split(":").map(f=>Number.parseInt(f,10));if(d>=0&&d<24)c.setHours(d);else if(t)return null;if(h>=0&&h<60)c.setMinutes(h);else if(t)return null;if(u>=0&&u<60)c.setSeconds(u);else if(t)return null;return c}function vy(e){const{inputValue:t,allSuggestions:i,hideIrrelevant:s,filterByPercentageOfBestMatch:n}=e;let o=(i??[]).map((l,c)=>({value:l,relevance:bB(t,l),idx:c}));if(o.sort((l,c)=>l.relevance-c.relevance),s&&(o=o.filter(l=>l.relevance<Math.max(l.value.length,t.length))),o.length>0&&n&&n>0){const c=o[0].relevance*n;o=o.filter(d=>c-d.relevance<0)}const r=[],a=[];for(const l of o)r.push(l.value),a.push(l.idx);return{values:r,indices:a}}function bB(e,t){e.length<t.length&&([e,t]=[t,e]);let i=[],s=[];const n=e.length,o=t.length;for(let a=0;a<=o;a++)i[a]=a;let r=0;for(let a=1;a<=n;a++){s[0]=a;for(let l=1;l<=o;l++){const c=e[a-1],d=t[l-1];if(c.toLocaleLowerCase()===d.toLocaleLowerCase())++r,c===d&&++r,a>1&&l>1&&e[a-2].toLocaleLowerCase()===t[l-2].toLocaleLowerCase()&&(++r,e[a-2]===t[l-2]&&++r),a<n/2-10&&++r,s[l]=i[l-1];else{const h=s[l-1],u=i[l],f=i[l-1];s[l]=1+Math.min(h,u,f)}}[i,s]=[s,i]}return i[o]/(r+1)}function OT(e){var i;return e.altKey||e.ctrlKey||e.metaKey?!1:((i=e.key)==null?void 0:i.length)===1}var Cy=!1,lv=0;function yB(e){lv>0||(e.addEventListener("keydown",cv),e.addEventListener("mousedown",cv))}function SB(e){lv>0||(e.removeEventListener("keydown",cv),e.removeEventListener("mousedown",cv))}function cv(e){const t=Cy,i=e.type==="keydown";i&&(e.ctrlKey||e.metaKey||e.altKey)||t!==i&&(Cy=i)}function xB(e){const t=Pi(e);return yB(t),lv++,()=>{lv--,SB(t)}}function RB(){return Cy}function zd(e,t,i=!1){const s=hH;let n=BP;t&&(n+=", "+t),i&&(n+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(e.querySelectorAll(s)).filter(l=>Wo(l)),r=Array.prototype.slice.apply(e.querySelectorAll(n));return r.length?((l,c)=>l.filter(d=>c.indexOf(d)===-1))(o,r):o}function qc(e,t=!1,i=!1,s=!1){const n=zd(e,s?".ag-tab-guard":null,i),o=t?Mt(n):n[0];return o?(o.focus({preventScroll:!0}),!0):!1}function ld(e,t,i,s){const n=zd(t,i?':not([tabindex="-1"])':null),o=Wt(e);let r;i?r=n.findIndex(l=>l.contains(o)):r=n.indexOf(o);const a=r+(s?-1:1);return a<0||a>=n.length?null:n[a]}function NT(e,t=5){let i=0;for(;e&&py(e)===null&&++i<=t;)e=e.parentElement;return py(e)===null?null:e}var EB=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",AB=class extends mp{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(EB)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:s,disabled:n}=this.config;n!=null&&this.setDisabled(n),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;Wi(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?(Ot(t,!1),Za(t,"presentation")):(Ot(t,!0),Za(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(Zm(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return Eg(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},HT=class extends AB{constructor(e,t,i,s){super(e,t,i),this.className=s}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),i!=null&&this.onValueChange(i),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();i==null||i==""||YN(e)!==null?Rg(e,""):Rg(e,t??"")}setAriaLabel(e){return su(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Oo(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function FB(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}var Fl=class extends HT{constructor(e,t,i="text",s="input"){super(e,(e==null?void 0:e.template)??FB(s),[],t),this.inputType=i,this.displayFieldTag=s,this.eLabel=he,this.eWrapper=he,this.eInput=he}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:e,eWrapper:t,eInput:i,className:s}=this;e.classList.add(`${s}-label`),t.classList.add(`${s}-input-wrapper`),i.classList.add(`${s}-input`),this.addCss("ag-input-field"),i.id=i.id||`ag-${this.getCompId()}-input`;const{inputName:n,inputWidth:o}=this.config;n!=null&&this.setInputName(n),o!=null&&this.setInputWidth(o),this.addInputListeners(),this.activateTabIndex([i])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){this.displayFieldTag==="input"&&(this.inputType=e,$s(this.eInput,"type",e))}getInputElement(){return this.eInput}setInputWidth(e){return Zm(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return $s(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return su(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Eg(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)$s(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";$s(this.eInput,"autocomplete",t)}return this}},NS=class extends Fl{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;const i=this.eInput;i.checked=e,i.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const s=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:s.id,name:s.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},HS={selector:"AG-CHECKBOX",component:NS},PB=class extends NS{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},cd=class extends Fl{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const i=this.eInput;return i.value!==e&&(i.value=fe(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=i=>{OT(i)&&i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:i=>{var n;const s=(n=i.clipboardData)==null?void 0:n.getData("text");s!=null&&s.split("").some(o=>!e.test(o))&&i.preventDefault()}})}},aC={selector:"AG-INPUT-TEXT-FIELD",component:cd},TB=class extends Fl{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},DB={selector:"AG-INPUT-TEXT-AREA",component:TB},GS=class extends cd{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const o=Number.parseFloat(e.value),r=isNaN(o)?"":this.normalizeValue(o.toString());this.value!==r&&this.setValue(r)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:i,max:s,step:n}=this.config;typeof t=="number"&&this.setPrecision(t),typeof i=="number"&&this.setMin(i),typeof s=="number"&&this.setMax(s),typeof n=="number"&&this.setStep(n)}onWheel(e){Wt(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return e===""?"":(this.precision!=null&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){const i=this.precision;if(i==null)return e;if(t){const n=Number.parseFloat(e).toFixed(i);return Number.parseFloat(n).toString()}const s=String(e).split(".");if(s.length>1){if(s[1].length<=i)return e;if(i>0)return`${s[0]}.${s[1].slice(0,i)}`}return s[0]}setMin(e){return this.min===e?this:(this.min=e,$s(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,$s(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,$s(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(fe(i)){let s=this.isScientificNotation(i);if(s&&this.eInput.validity.valid)return e(i);if(!s){i=this.adjustPrecision(i);const n=this.normalizeValue(i);s=i!=n}if(s)return t(i)}return e(i)}getValue(){const e=this.eInput;if(!e.validity.valid)return;const t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},MB={selector:"AG-INPUT-NUMBER-FIELD",component:GS},IB=class extends cd{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=dl();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){Wt(this.beans)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?Ks(e??null,!!this.includeTime)??void 0:e;return this.min===t?this:(this.min=t,$s(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?Ks(e??null,!!this.includeTime)??void 0:e;return this.max===t?this:(this.max=t,$s(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,$s(this.eInput,"step",e),this)}setIncludeTime(e){return this.includeTime===e?this:(this.includeTime=e,super.setInputType(e?"datetime-local":"date"),e&&this.setStep(1),this)}getDate(){if(this.eInput.validity.valid)return Ts(this.getValue())??void 0}setDate(e,t){this.setValue(Ks(e??null,this.includeTime),t)}},GT={selector:"AG-INPUT-DATE-FIELD",component:IB},kB=".ag-list-item{align-items:center;display:flex;height:var(--ag-list-item-height);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}",_B="ag-active-item",LB=(e,t)=>({tag:"div",cls:`ag-list-item ag-${e}-list-item`,attrs:{role:"option"},children:[{tag:"span",ref:"eText",children:t}]}),OB=class extends mp{constructor(e,t,i){super(LB(e,t)),this.label=t,this.value=i,this.eText=he}postConstruct(){this.createTooltip(),this.addEventListeners()}setHighlighted(e){const t=this.getGui();t.classList.toggle(_B,e),GP(t,e),this.dispatchLocalEvent({type:"itemHighlighted",highlighted:e})}getHeight(){return this.getGui().clientHeight}setIndex(e,t){const i=this.getGui();tH(i,e),eH(i,t)}createTooltip(){const e={getTooltipValue:()=>this.label,getGui:()=>this.getGui(),getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>RS(this.eText)},t=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("highlightTooltipFeature",!1,e,this));t&&(this.tooltipFeature=t)}addEventListeners(){const e=this.getParentComponent();e&&(this.addGuiEventListener("mouseover",()=>{e.highlightItem(this)}),this.addGuiEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation(),e.setValue(this.value)}))}},NB=class extends mp{constructor(e="default"){super({tag:"div",cls:`ag-list ag-${e}-list`}),this.cssIdentifier=e,this.options=[],this.listItems=[],this.highlightedItem=null,this.registerCSS(kB)}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()})}handleKeyDown(e){const t=e.key;switch(t){case G.ENTER:if(!this.highlightedItem)this.setValue(this.getValue());else{const i=this.listItems.indexOf(this.highlightedItem);this.setValueByIndex(i)}break;case G.DOWN:case G.UP:e.preventDefault(),this.navigate(t);break;case G.PAGE_DOWN:case G.PAGE_UP:case G.PAGE_HOME:case G.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}addOptions(e){for(const t of e)this.addOption(t);return this}addOption(e){const{value:t,text:i}=e,s=i??t;return this.options.push({value:t,text:s}),this.renderOption(t,s),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0);for(const e of this.listItems)e.destroy();Wi(this.getGui()),this.listItems=[],this.refreshAriaRole()}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const i=this.options.findIndex(s=>s.value===e);if(i!==-1){const s=this.options[i];this.value=s.value,this.displayValue=s.text,this.highlightItem(this.listItems[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.listItems[e])}highlightItem(e){const t=e.getGui();if(!Wo(t))return;this.clearHighlighted(),e.setHighlighted(!0),this.highlightedItem=e;const i=this.getGui(),{scrollTop:s,clientHeight:n}=i,{offsetTop:o,offsetHeight:r}=t;(o+r>s+n||o<s)&&t.scrollIntoView({block:"nearest"})}hideItemTooltip(){var e,t;(t=(e=this.highlightedItem)==null?void 0:e.tooltipFeature)==null||t.attemptToHideTooltip()}destroy(){this.hideItemTooltip(),super.destroy()}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}clearHighlighted(){var e;(e=this.highlightedItem)==null||e.setHighlighted(!1),this.highlightedItem=null}renderOption(e,t){const i=new OB(this.cssIdentifier,t,e);i.setParentComponent(this);const s=this.createManagedBean(i);this.listItems.push(s),this.getGui().appendChild(s.getGui())}navigate(e){const t=e===G.DOWN;let i;const{listItems:s,highlightedItem:n}=this;if(!n)i=t?s[0]:Mt(s);else{let r=s.indexOf(n)+(t?1:-1);r=Math.min(Math.max(r,0),s.length-1),i=s[r]}this.highlightItem(i)}navigateToPage(e){const{listItems:t,highlightedItem:i}=this;if(!i||t.length===0)return;const s=t.indexOf(i),n=this.options.length-1,o=t[0].getHeight(),r=Math.floor(this.getGui().clientHeight/o);let a=-1;e===G.PAGE_HOME?a=0:e===G.PAGE_END?a=n:e===G.PAGE_DOWN?a=Math.min(s+r,n):e===G.PAGE_UP&&(a=Math.max(s-r,0)),a!==-1&&this.highlightItem(t[a])}refreshAriaRole(){Za(this.getGui(),this.options.length===0?"presentation":"listbox")}updateIndices(){this.refreshAriaRole();const e=this.listItems,t=e.length;e.forEach((i,s)=>{i.setIndex(s+1,t)})}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},HB=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}",GB={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},BB=class extends HT{constructor(e){if(super(e,(e==null?void 0:e.template)||GB,(e==null?void 0:e.agComponents)||[],e==null?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=he,this.eWrapper=he,this.eDisplayField=he,this.eIcon=he,this.registerCSS(HB),this.ariaRole=e==null?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:s,minPickerWidth:n,maxPickerWidth:o}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!s,i!=null&&this.setPickerMaxHeight(i),n!=null&&this.setPickerMinWidth(n),o!=null&&this.setPickerMaxWidth(o)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:s}=this.config;if(i){const n=this.beans.iconSvc.createIconNoSpan(i);n&&this.eIcon.appendChild(n)}s!=null&&this.setInputWidth(s)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),oy(e,!1),this.ariaRole&&Za(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(e==null?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case G.UP:case G.DOWN:case G.ENTER:case G.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case G.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:i,pickerAriaLabelValue:s,modalPicker:n=!0},maxPickerHeight:o,minPickerWidth:r,maxPickerWidth:a,variableWidth:l,beans:c,eWrapper:d}=this,h={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{const m=IP(c);this.beforeHidePicker(),m&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,s),anchorToElement:d};e.style.position="absolute";const u=c.popupSvc,f=u.addPopup(h);l?(r&&(e.style.minWidth=r),e.style.width=ES(Xm(d)),a&&(e.style.maxWidth=a)):Zm(e,a??Xm(d));const p=o??`${SS(u.getPopupParent())}px`;return e.style.setProperty("max-height",p),this.alignPickerToComponent(),f.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:i,gos:s},eWrapper:n,pickerComponent:o}=this,r=s.get("enableRtl")?"right":"left";i.positionPopupByComponent({type:t,eventSource:n,ePopup:o.getGui(),position:"under",alignSide:r,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();oy(t,e);const i=this.eWrapper.classList;i.toggle("ag-picker-expanded",e),i.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(e){return Zm(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},VB=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}",BS=class extends BB{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...e}),this.registerCSS(VB)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:Em(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),i&&t==null&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new NB("select"));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),i=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",i),dH(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:s=>{s==null||s.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}beforeHidePicker(){var e;(e=this.listComponent)==null||e.hideItemTooltip(),super.beforeHidePicker()}onKeyDown(e){var i;const{key:t}=e;switch(t===G.TAB&&this.hidePicker(),t){case G.ENTER:case G.UP:case G.DOWN:case G.PAGE_UP:case G.PAGE_DOWN:case G.PAGE_HOME:case G.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(i=this.listComponent)==null||i.handleKeyDown(e):super.onKeyDown(e);break;case G.ESCAPE:super.onKeyDown(e);break;case G.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){for(const t of e)this.addOption(t);return this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this.setValue(void 0,!0),this}setValue(e,t,i){const{listComponent:s,config:{placeholder:n},eDisplayField:o,tooltipFeature:r}=this;if(this.value===e||!s)return this;if(i||s.setValue(e,!0),s.getValue()===this.getValue())return this;let l=s.getDisplayValue();return l==null&&n&&(l=n),o.textContent=l,r==null||r.setTooltipAndRefresh(l??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},zB={selector:"AG-SELECT",component:BS},WB=':where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',WR,$R,VS=typeof window!="object"||!(($R=(WR=window==null?void 0:window.document)==null?void 0:WR.fonts)!=null&&$R.forEach),ru=(e,t,i,s,n,o)=>{if(VS)return;s&&(e=`@layer ${CSS.escape(s)} { ${e} }`);let r=Wd.map.get(t);if(r||(r=[],Wd.map.set(t,r)),r.some(d=>d.css===e))return;const a=document.createElement("style");o&&a.setAttribute("nonce",o),a.dataset.agGlobalCss=i,a.textContent=e;const l={css:e,el:a,priority:n};let c;for(const d of r){if(d.priority>n)break;c=d}if(c){c.el.insertAdjacentElement("afterend",a);const d=r.indexOf(c);r.splice(d+1,0,l)}else t.insertBefore(a,t.querySelector(":not(title, meta)")),r.push(l)},BT=(e,t,i,s)=>{ru(WB,e,"shared",t,0,i),s==null||s.forEach((n,o)=>n.forEach(r=>ru(r,e,o,t,0,i)))},$B=e=>{Wd.grids.add(e)},UB=e=>{if(Wd.grids.delete(e),Wd.grids.size===0){Wd.map=new WeakMap;for(const t of document.head.querySelectorAll("style[data-ag-global-css]"))t.remove()}},Lx,Wd=(Lx=typeof window=="object"?window:{}).agStyleInjectionState??(Lx.agStyleInjectionState={map:new WeakMap,grids:new Set}),Ho=e=>new VT(e),la="$default",jB=0,VT=class{constructor({feature:e,params:t,modeParams:i={},css:s,cssImports:n}){this.feature=e,this.css=s,this.cssImports=n,this.modeParams={[la]:{...i[la]??{},...t??{}},...i}}use(e,t,i){let s=this._inject;if(s==null){let{css:n}=this;if(n){const o=`ag-theme-${this.feature??"part"}-${++jB}`;typeof n=="function"&&(n=n()),n=`:where(.${o}) {
${n}
}
`;for(const r of this.cssImports??[])n=`@import url(${JSON.stringify(r)});
${n}`;s={css:n,class:o}}else s=!1;this._inject=s}return s&&e&&ru(s.css,e,s.class,t,1,i),s?s.class:!1}},KB=e=>e.replace(/[A-Z]/g,t=>`-${t}`).toLowerCase(),zT=e=>`--ag-${KB(e)}`,Go=e=>`var(${zT(e)})`,qB=(e,t,i)=>Math.max(t,Math.min(i,e)),YB=e=>{const t=new Map;return i=>{const s=i;return t.has(s)||t.set(s,e(i)),t.get(s)}},oo=e=>({ref:"accentColor",mix:e}),Zs=e=>({ref:"foregroundColor",mix:e}),hn=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),XB=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),As={ref:"backgroundColor"},Pd={ref:"foregroundColor"},Tr={ref:"accentColor"},dv={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:Zs(.15),chromeBackgroundColor:hn(.02),browserColorScheme:"light"},QB={...dv,textColor:Pd,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:oo(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:As,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Tr,toggleButtonOffBackgroundColor:hn(.3),toggleButtonSwitchBackgroundColor:As,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}}},JB=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],ZB=YB(e=>(e=e.toLowerCase(),JB.find(t=>e.endsWith(t.toLowerCase()))??"length")),lC=e=>typeof e=="object"&&(e!=null&&e.ref)?Go(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,zS=e=>{if(typeof e=="string")return e;if(e&&"ref"in e){const t=Go(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?Go(e.onto):"transparent"}, ${t} ${qB(e.mix*100,0,100)}%)`}return!1},eV=lC,Td=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,i=>i[0]==="-"?i:" "+Go(i)+" ")})`:e&&"ref"in e?Go(e.ref):!1,tV=lC,wy=(e,t)=>typeof e=="string"?e:e===!0?wy({},t):e===!1?t==="columnBorder"?wy({color:"transparent"},t):"none":e&&"ref"in e?Go(e.ref):WT(e.style??"solid")+" "+Td(e.width??{ref:"borderWidth"})+" "+zS(e.color??{ref:"borderColor"}),iV=e=>typeof e=="string"?e:e===!1?"none":e&&"ref"in e?Go(e.ref):[Td(e.offsetX??0),Td(e.offsetY??0),Td(e.radius??0),Td(e.spread??0),zS(e.color??{ref:"foregroundColor"})].join(" "),WT=lC,$T=e=>typeof e=="string"?e.includes(",")?e:Ox(e):e&&"googleFont"in e?$T(e.googleFont):e&&"ref"in e?Go(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),Ox(t))).join(", "):!1,Ox=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),sV=lC,UT=e=>typeof e=="string"?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?UT({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):e&&"ref"in e?Go(e.ref):!1,nV=(e,t,i)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&i.warn(104,{value:e,param:t}),`${e}s`):e&&"ref"in e?Go(e.ref):!1,oV={color:zS,colorScheme:eV,length:Td,scale:tV,border:wy,borderStyle:WT,shadow:iV,image:UT,fontFamily:$T,fontWeight:sV,duration:nV},rV=(e,t,i)=>{const s=ZB(e);return oV[s](t,e,i)},aV=e=>new jT(e),jT=class KT{constructor(t,i=[]){this.themeLogger=t,this.parts=i}withPart(t){return typeof t=="function"&&(t=t()),t instanceof VT?new KT(this.themeLogger,[...this.parts,t]):(this.themeLogger.preInitErr(259,"Invalid part",{part:t}),this)}withoutPart(t){return this.withPart(Ho({feature:t}))}withParams(t,i=la){return this.withPart(Ho({modeParams:{[i]:t}}))}_startUse({styleContainer:t,cssLayer:i,nonce:s,loadThemeGoogleFonts:n,moduleCss:o}){if(VS)return;cV(),BT(t,i,s,o);const r=lV(this);if(r.length>0)for(const a of r)n&&dV(a,s);for(const a of this.parts)a.use(t,i,s)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=Nx(this.parts).map(t=>t.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let t=this._paramsCache;if(!t){const i={[la]:{...QB}};for(const s of Nx(this.parts))for(const n of Object.keys(s.modeParams)){const o=s.modeParams[n];if(o){const r=i[n]??(i[n]={}),a=new Set;for(const l of Object.keys(o)){const c=o[l];c!==void 0&&(r[l]=c,a.add(l))}if(n===la)for(const l of Object.keys(i)){const c=i[l];if(l!==la)for(const d of a)delete c[d]}}}this._paramsCache=t=i}return t}_getPerInstanceCss(t){const i="##SELECTOR##";let s=this._paramsCssCache;if(!s){let n="",o="";const r=this._getModeParams();for(const l of Object.keys(r)){const c=r[l];if(l!==la){const h=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(l):l}"]) & {
`;n+=h,o+=h}for(const d of Object.keys(c).sort()){const h=c[d],u=rV(d,h,this.themeLogger);if(u===!1)this.themeLogger.error(107,{key:d,value:h});else{const f=zT(d),p=f.replace("--ag-","--ag-inherited-");n+=`	${f}: var(${p}, ${u});
`,o+=`	${p}: var(${f});
`}}l!==la&&(n+=`}
`,o+=`}
`)}let a=`${i} {
${n}}
`;a+=`:has(> ${i}):not(${i}) {
${o}}
`,this._paramsCssCache=s=a}return s.replaceAll(i,`:where(.${t})`)}},Nx=e=>{const t=new Map;for(const s of e)t.set(s.feature,s);const i=[];for(const s of e)(!s.feature||t.get(s.feature)===s)&&i.push(s);return i},lV=e=>{const t=new Set,i=o=>{if(Array.isArray(o))o.forEach(i);else{const r=o==null?void 0:o.googleFont;typeof r=="string"&&t.add(r)}};return Object.values(e._getModeParams()).flatMap(o=>Object.values(o)).forEach(i),Array.from(t).sort()},Hx=!1,cV=()=>{if(!Hx){Hx=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},dV=async(e,t)=>{const i=`@import url('https://${hV}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;ru(i,document.head,`googleFont:${e}`,void 0,0,t)},hV="fonts.googleapis.com",uV=1,gV=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=uV++,e!=null&&e.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){this.id=e.id,this.beans.context=this,this.destroyCallback=e.destroyCallback;for(const t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];for(const t of e.beanClasses){const i=new t;i.beanName?this.beans[i.beanName]=i:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(i)}for(const t of e.derivedBeans??[]){const{beanName:i,bean:s}=t(this);this.beans[i]=s,this.createdBeans.push(s)}e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){var s,n,o,r;const i=this.beans;for(const a of e)(s=a.preWireBeans)==null||s.call(a,i),(n=a.wireBeans)==null||n.call(a,i);for(const a of e)(o=a.preConstruct)==null||o.call(a);t&&e.forEach(t);for(const a of e)(r=a.postConstruct)==null||r.call(a)}getBeans(){return this.beans}getBean(e){return this.beans[e]}getId(){return this.id}destroy(){var t;if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[],(t=this.destroyCallback)==null||t.call(this)}destroyBean(e){var t;(t=e==null?void 0:e.destroy)==null||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},fV=0,pV=class extends $o{constructor(){super(...arguments),this.beanName="environment",this.paramsClass=`ag-theme-params-${++fV}`,this.globalCSS=[]}wireBeans(e){this.eRootDiv=e.eRootDiv}postConstruct(){const{gos:e,eRootDiv:t}=this;e.setInstanceDomData(t),this.eStyleContainer=e.get("themeStyleContainer")??(t.getRootNode()===document?document.head:t),this.cssLayer=e.get("themeCssLayer"),this.styleNonce=e.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.initVariables(),this.addDestroyFunc(()=>UB(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(e,t=[]){const{theme:i}=this;let s;i?s=`${this.paramsClass} ${i._getCssClass()}`:s=this.applyLegacyThemeClasses();for(const n of Array.from(e.classList))n.startsWith("ag-theme-")&&e.classList.remove(n);if(s){const n=e.className;e.className=`${n}${n?" ":""}${s}${t!=null&&t.length?" "+t.join(" "):""}`}}applyLegacyThemeClasses(){let e="";this.mutationObserver.disconnect();let t=this.eRootDiv;for(;t;){let i=!1;for(const s of Array.from(t.classList))s.startsWith("ag-theme-")&&(i=!0,e=e?`${e} ${s}`:s);i&&this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}return e}addGlobalCSS(e,t){this.theme?ru(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}handleThemeChange(){const{gos:e,theme:t}=this,i=e.get("theme");let s;if(i==="legacy")s=void 0;else{const n=i??this.getDefaultTheme();n instanceof jT?s=n:this.themeError(n)}s!==t&&this.handleNewTheme(s),this.postProcessThemeChange(s,i)}handleNewTheme(e){const{gos:t,eRootDiv:i,globalCSS:s}=this,n=this.getAdditionalCss();if(e){$B(this),BT(this.eStyleContainer,this.cssLayer,this.styleNonce,n);for(const[r,a]of s)ru(r,this.eStyleContainer,a,this.cssLayer,0,this.styleNonce);s.length=0}this.theme=e,e==null||e._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:n});let o=this.eParamsStyle;if(!o){o=this.eParamsStyle=fp({tag:"style"});const r=t.get("styleNonce");r&&o.setAttribute("nonce",r),i.appendChild(o)}VS||(o.textContent=(e==null?void 0:e._getPerInstanceCss(this.paramsClass))||""),this.applyThemeClasses(i),this.fireStylesChangedEvent("themeChanged")}},mV=class extends $o{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(e){if(e){this.dynamicBeans??(this.dynamicBeans={});for(const t of Object.keys(e))this.dynamicBeans[t]=e[t]}}createDynamicBean(e,t,...i){if(!this.dynamicBeans)throw new Error(this.getDynamicError(e,!0));const s=this.dynamicBeans[e];if(s==null){if(t)throw new Error(this.getDynamicError(e,!1));return}return new s(...i)}},vV=class extends $o{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new jc}addListener(e,t,i){this.globalSvc.addEventListener(e,t,i)}removeListener(e,t,i){this.globalSvc.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchEvent(e){this.globalSvc.dispatchEvent(this.gos.addCommon(e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(this.gos.addCommon(e))}},qT=class extends $o{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){const i="title",s=this.ctrl.getGui();s&&(e!=null&&(e!=""||t)?s.setAttribute(i,e):s.removeAttribute(i))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){if(this.tooltipManager==null){const e=this.beans.registry.createDynamicBean("tooltipStateManager",!0,this.ctrl,()=>this.tooltip);e&&(this.tooltipManager=this.createBean(e,this.beans.context))}}attemptToShowTooltip(){var e;(e=this.tooltipManager)==null||e.prepareToShowTooltip()}attemptToHideTooltip(){var e;(e=this.tooltipManager)==null||e.hideTooltip()}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},CV=1e3,wV=1e3,Gx=100,Bx,Op=!1,bV=class extends $o{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){var t,i,s,n;return e==="show"?((i=(t=this.tooltipCtrl).getTooltipShowDelayOverride)==null?void 0:i.call(t))??this.getGridOptionsTooltipDelay("tooltipShowDelay"):((n=(s=this.tooltipCtrl).getTooltipHideDelayOverride)==null?void 0:n.call(s))??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Nc()&&(Op?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},Gx):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var n;const t=e.relatedTarget,i=this.tooltipCtrl.getGui(),s=(n=this.tooltipComp)==null?void 0:n.getGui();this.isInteractingWithTooltip||i.contains(t)||this.interactionEnabled&&(s!=null&&s.contains(t))||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||Op)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-Bx<CV}setToDoNothing(e){!e&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.clearEventHandlers(),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){var n,o;const e=this.getTooltipValue(),t=this.tooltipCtrl;if(!fe(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip()){this.setToDoNothing();return}const i=this.gos.addCommon({location:((n=t.getLocation)==null?void 0:n.call(t))??"UNKNOWN",value:e,hideTooltipCallback:()=>this.hideTooltip(!0),...(o=t.getAdditionalParams)==null?void 0:o.call(t)});this.state=2,this.tooltipInstanceCount++;const s=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.createTooltipComp(i,s)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),Bx=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){var r;if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(t);return}const s=t.getGui();this.tooltipComp=t,s.classList.contains("ag-tooltip")||s.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&s.classList.add("ag-tooltip-animate"),this.interactionEnabled&&s.classList.add("ag-tooltip-interactive");const n=this.getLocaleTextFunc(),o=(r=this.popupSvc)==null?void 0:r.addPopup({eChild:s,ariaLabel:n("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const a=()=>this.setToDoNothing();[this.onBodyScrollEventCallback]=this.addManagedEventListeners({bodyScroll:a}),this.setEventHandlers(a)}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(s,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Pi(this.beans),{keydown:a=>{s.contains(a==null?void 0:a.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(s,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:s,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var i;const e=(i=this.tooltipComp)==null?void 0:i.getGui(),t=Wt(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){var t,i;const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?(t=this.popupSvc)==null||t.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):(i=this.popupSvc)==null||i.positionPopupByComponent({...e,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=this.tooltipTrigger===0?wV:0;window.setTimeout(()=>{e(),this.destroyBean(t)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){for(const e of[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener])e&&e();this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Op=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},Gx)}unlockService(){Op=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}},yV=class extends qT{constructor(e,t,i){super(e,i),this.highlightTracker=t,this.onHighlight=this.onHighlight.bind(this)}postConstruct(){super.postConstruct(),this.wireHighlightListeners()}wireHighlightListeners(){this.addManagedPropertyListener("tooltipTrigger",({currentValue:e})=>{this.setTooltipMode(e)}),this.setTooltipMode(this.gos.get("tooltipTrigger")),this.highlightTracker.addEventListener("itemHighlighted",this.onHighlight)}onHighlight(e){this.tooltipMode===1&&(e.highlighted?this.attemptToShowTooltip():this.attemptToHideTooltip())}setTooltipMode(e="focus"){this.tooltipMode=e==="focus"?1:0}destroy(){this.highlightTracker.removeEventListener("itemHighlighted",this.onHighlight),super.destroy()}},Np=0,SV=200,xV=class extends $o{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}getPopupParent(){const e=this.gos.get("popupParent");return e||this.getDefaultPopupParent()}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:s,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e,e.type,e.ePopup,null,e.mouseEvent)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,eventSource:o,alignSide:r="left",position:a="over",type:l}=e,c=o.getBoundingClientRect(),d=this.getParentRect();this.setAlignedTo(o,t);const h=()=>{let u=c.left-d.left;r==="right"&&(u-=t.offsetWidth-c.width);let f;return a==="over"?(f=c.top-d.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,c,d,e.nudgeY||0)==="under"?f=c.top-d.top+c.height:f=c.top-t.offsetHeight-(s||0)*2-d.top),{x:u,y:f}};this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,updatePosition:h,postProcessCallback:()=>this.callPostProcessPopup(e,l,t,o,null)})}shouldRenderUnderOrAbove(e,t,i,s){const n=i.bottom-t.bottom,o=t.top-i.top,r=e.offsetHeight+s;return n>r?"under":o>r||o>n?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const s=this.popupList[i],{alignedToElement:n}=s;if(!n)return;const o=["right","left","over","above","under"];for(const r of o)n.classList.remove(`ag-has-popup-positioned-${r}`),e.classList.remove(`ag-popup-positioned-${r}`);t&&(n.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){const i=this.getPopupIndex(t);if(i!==-1){const s=this.popupList[i];s.alignedToElement=e}}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:s,nudgeY:n,skipObserver:o,updatePosition:r}=e,a={width:0,height:0},l=(c=!1)=>{let{x:d,y:h}=r();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,s&&(d+=s),n&&(h+=n),i&&(d=this.keepXYWithinBounds(t,d,1),h=this.keepXYWithinBounds(t,h,0)),t.style.left=`${d}px`,t.style.top=`${h}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!o){const c=ll(this.beans,t,()=>l(!0));setTimeout(()=>c(),SV)}}getParentRect(){const e=Pi(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),zP(t)}keepXYWithinBounds(e,t,i){const s=i===0,n=s?"clientHeight":"clientWidth",o=s?"top":"left",r=s?"height":"width",a=s?"scrollTop":"scrollLeft",l=Pi(this.beans),c=l.documentElement,d=this.getPopupParent(),h=e.getBoundingClientRect(),u=d.getBoundingClientRect(),f=l.documentElement.getBoundingClientRect(),p=d===l.body,m=Math.ceil(h[r]);let C=p?(s?VP:Xm)(c)+c[a]:d[n];p&&(C-=Math.abs(f[o]-u[o]));const w=C-m;return Math.min(Math.max(t,0),Math.max(w,0))}addPopup(e){const{eChild:t,ariaLabel:i,ariaOwns:s,alwaysOnTop:n,positionCallback:o,anchorToElement:r}=e,a=this.getPopupIndex(t);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(t);const l=this.createPopupWrapper(t,!!n,i,s),c=this.addEventListenersToPopup({...e,wrapperEl:l});return o&&o(),this.addPopupToPopupList(t,l,c,r),{hideFunc:c}}initialisePopupPosition(e){const i=this.getPopupParent().getBoundingClientRect();fe(e.style.top)||(e.style.top=`${i.top*-1}px`),fe(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,t,i,s){const n=this.getPopupParent(),{environment:o,gos:r}=this.beans,a=fp({tag:"div"});return o.applyThemeClasses(a),a.classList.add("ag-popup"),e.classList.add(r.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Za(e,"dialog"),i?su(e,i):s&&(e.id||(e.id=`popup-component-${Np}`),wx(s,e.id)),a.appendChild(e),n.appendChild(a),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),a}addEventListenersToPopup(e){const t=this.beans,i=Pi(t),{wrapperEl:s,eChild:n,closedCallback:o,afterGuiAttached:r,closeOnEsc:a,modal:l,ariaOwns:c}=e;let d=!1;const h=m=>{if(!s.contains(Wt(t)))return;m.key===G.ESCAPE&&!this.isStopPropagation(m)&&p({keyboardEvent:m})},u=m=>p({mouseEvent:m}),f=m=>p({touchEvent:m}),p=(m={})=>{const{mouseEvent:v,touchEvent:C,keyboardEvent:w,forceHide:S}=m;!S&&(this.isEventFromCurrentPopup({mouseEvent:v,touchEvent:C},n)||d)||(d=!0,s.remove(),i.removeEventListener("keydown",h),i.removeEventListener("mousedown",u),i.removeEventListener("touchstart",f),i.removeEventListener("contextmenu",u),this.eventSvc.removeListener("dragStarted",u),o&&o(v||C||w),this.removePopupFromPopupList(n,c))};return r&&r({hidePopup:p}),window.setTimeout(()=>{a&&i.addEventListener("keydown",h),l&&(i.addEventListener("mousedown",u),this.eventSvc.addListener("dragStarted",u),i.addEventListener("touchstart",f),i.addEventListener("contextmenu",u))},0),p}addPopupToPopupList(e,t,i,s){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:Np,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(e,s),Np=Np+1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const s=this.popupList[i];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then(o=>o&&o()),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!t)return;const n=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:s.hideFunc});return s.stopAnchoringPromise=n,s.isAnchored=!0,n}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&wx(t,null),this.popupList=this.popupList.filter(i=>i.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:s,ePopup:n}=e,o=s.getBoundingClientRect(),r=h=>Number.parseInt(h.substring(0,h.length-1),10),a=(h,u)=>{const f=i[h]-o[h],p=r(n.style[h]);return{initialDiff:f,lastDiff:f,initial:p,last:p,direction:u}},l=a("top",0),c=a("left",1),d=this.beans.frameworkOverrides;return new Xt(h=>{d.wrapIncoming(()=>{kG(()=>{const u=t.getBoundingClientRect(),f=s.getBoundingClientRect();if(f.top==0&&f.left==0&&f.height==0&&f.width==0){e.hidePopup();return}const m=(v,C)=>{const w=r(n.style[C]);v.last!==w&&(v.initial=w,v.last=w);const S=u[C]-f[C];if(S!=v.lastDiff){const y=this.keepXYWithinBounds(n,v.initial+v.initialDiff-S,v.direction);n.style[C]=`${y}px`,v.last=y}v.lastDiff=S};m(l,"top"),m(c,"left")},200).then(u=>{h(()=>{u!=null&&window.clearInterval(u)})})},"popupPositioning")})}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:s}=e,n=i||s;if(!n)return!1;const o=this.getPopupIndex(t);if(o===-1)return!1;for(let r=o;r<this.popupList.length;r++){const a=this.popupList[r];if(mH(a.element,n))return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){const t=Pi(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),s=i.length,n=this.getWrapper(e);if(!n||s<=1||!t.contains(e))return;const o=[],r=[];for(const u of i)u!==n&&(u.classList.contains("ag-always-on-top")?r.push(u):o.push(u));const a=[],l=r.length,h=n.classList.contains("ag-always-on-top")||!l?[...o,...r,n]:[...o,n,...r];for(let u=0;u<=s;u++){const f=h[u];if(i[u]===h[u]||f===n)continue;const p=f.querySelectorAll("div");for(const m of p)m.scrollTop!==0&&a.push([m,m.scrollTop]);u===0?t.insertAdjacentElement("afterbegin",f):h[u-1].insertAdjacentElement("afterend",f)}for(;a.length;){const u=a.pop();u[0].scrollTop=u[1]}}},RV=class extends LS{constructor(){super({tag:"div",cls:"ag-tooltip"})}init(e){const{value:t}=e,i=this.getGui();i.textContent=mu(t);const s=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();i.classList.add(`ag-${s}-tooltip`)}},YT=(e,t)=>{if(t!=null&&(e!=null&&e.setPointerCapture))try{return e.setPointerCapture(t),e.hasPointerCapture(t)}catch{}return!1},EV=(e,t)=>{if(typeof PointerEvent>"u"||!(t instanceof PointerEvent))return null;const i=t.pointerId;if(!YT(e,i))return null;const s={eElement:e,pointerId:i,onLost(n){FV(s,n)}};return e.addEventListener("lostpointercapture",s.onLost),s},AV=e=>{if(!e)return;XT(e);const{eElement:t,pointerId:i}=e;if(t){try{t.releasePointerCapture(i)}catch{}e.eElement=null}},XT=e=>{const{eElement:t,onLost:i}=e;t&&i&&(t.removeEventListener("lostpointercapture",i),e.onLost=null)},FV=(e,t)=>{XT(e);const{eElement:i,pointerId:s}=e;i&&t.pointerId===s&&YT(i,s)},Js,To,Yo=e=>{if(!To)To=new WeakSet;else if(To.has(e))return!1;return To.add(e),!0},PV=class extends $o{constructor(){super(...arguments),this.beanName="dragSvc",this.dragging=!1,this.drag=null,this.dragSources=[]}get startTarget(){var e;return((e=this.drag)==null?void 0:e.start.target)??null}isPointer(){return!!(Js!=null&&Js.has(no(this.beans)))}hasPointerCapture(){var t,i,s;const e=(t=this.drag)==null?void 0:t.pointerCapture;return!!(e&&((s=(i=this.beans.eRootDiv).hasPointerCapture)!=null&&s.call(i,e.pointerId)))}destroy(){this.drag&&this.cancelDrag();const e=this.dragSources;for(const t of e)Vx(t);e.length=0,super.destroy()}removeDragSource(e){const t=this.dragSources;for(let i=0,s=t.length;i<s;++i){const n=t[i];if(n.params===e){t.splice(i,1),Vx(n);break}}}addDragSource(e){if(!this.isAlive())return;const{eElement:t,includeTouch:i}=e,s=[];let n;if(i){const c=t.style;c&&(n=c.touchAction,c.touchAction="none")}const o={handlers:s,params:e,oldTouchAction:n};this.dragSources.push(o),Am(s,[t,"pointerdown",c=>this.onPointerDown(e,c),{passive:!1}],[t,"mousedown",c=>this.onMouseDown(e,c)]);const l=this.gos.get("suppressTouch");i&&!l&&Am(s,[t,"touchstart",d=>this.onTouchStart(e,d),{passive:!1}])}cancelDrag(e){var i,s;const t=this.drag;e??(e=t==null?void 0:t.eElement),e&&this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),(s=t==null?void 0:(i=t.params).onDragCancel)==null||s.call(i),this.destroyDrag()}shouldPreventMouseEvent(e){const t=e.type;return(t==="mousemove"||t==="pointermove")&&e.cancelable&&Fg(this.beans,e)&&!rg(qC(e))}initDrag(e,...t){this.drag=e;const i=this.beans,s=a=>this.onScroll(a),n=a=>this.onKeyDown(a),o=no(i),r=Pi(i);Am(e.handlers,[o,"contextmenu",aa],[o,"keydown",n],[r,"scroll",s,{capture:!0}],[r.defaultView||window,"scroll",s],...t)}destroyDrag(){this.dragging=!1;const e=this.drag;if(e){const t=e.rootEl;(Js==null?void 0:Js.get(t))===e&&(Js==null||Js.delete(t)),this.drag=null,AV(e.pointerCapture),FS(e.handlers)}}onPointerDown(e,t){if(this.isPointer())return;const i=this.beans;if(To!=null&&To.has(t))return;const s=t.pointerType;if(s==="touch"&&(i.gos.get("suppressTouch")||!e.includeTouch||(e.stopPropagationForTouch&&t.stopPropagation(),rg(qC(t))))||!t.isPrimary||s==="mouse"&&t.button!==0)return;this.destroyDrag();const n=no(i),o=e.eElement,r=t.pointerId,a=new KC(n,e,t,r);Js??(Js=new WeakMap),Js.set(n,a);const l=h=>{h.pointerId===r&&this.onMouseOrPointerMove(h)},c=h=>{h.pointerId===r&&this.onMouseOrPointerUp(h)},d=h=>{h.pointerId===r&&Yo(h)&&this.cancelDrag()};this.initDrag(a,[n,"pointerup",c],[n,"pointercancel",d],[n,"pointermove",l,{passive:!1}],[n,"touchmove",aa,{passive:!1}],[o,"mousemove",aa,{passive:!1}]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):Yo(t)}onTouchStart(e,t){if(this.gos.get("suppressTouch")||!e.includeTouch||!Yo(t)||rg(qC(t)))return;if(e.stopPropagationForTouch&&t.stopPropagation(),this.isPointer()){aa(t);return}this.destroyDrag();const s=this.beans,n=no(s),o=new KC(n,e,t.touches[0]),r=c=>this.onTouchMove(c),a=c=>this.onTouchUp(c),l=t.target??e.eElement;this.initDrag(o,[no(s),"touchmove",aa,{passive:!1}],[l,"touchmove",r,{passive:!0}],[l,"touchend",a,{passive:!0}],[l,"touchcancel",a,{passive:!0}]),e.dragStartPixels===0&&this.onMove(o.start)}onMouseDown(e,t){if(t.button!==0||To!=null&&To.has(t)||this.isPointer())return;const i=this.beans;this.destroyDrag();const s=new KC(no(i),e,t),n=a=>this.onMouseOrPointerMove(a),o=a=>this.onMouseOrPointerUp(a),r=no(i);this.initDrag(s,[r,"mousemove",n],[r,"mouseup",o]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):Yo(t)}onScroll(e){var s;if(!Yo(e))return;const t=this.drag,i=t==null?void 0:t.lastDrag;i&&this.dragging&&((s=t.params)==null||s.onDragging(i))}onMouseOrPointerMove(e){var t;Yo(e)&&(dl()&&((t=Pi(this.beans).getSelection())==null||t.removeAllRanges()),this.shouldPreventMouseEvent(e)&&aa(e),this.onMove(e))}onTouchMove(e){const t=this.drag;if(!t||!Yo(e))return;const i=lg(t.start,e.touches);i&&(e.preventDefault(),this.onMove(i))}onMove(e){const t=this.drag;if(!t)return;t.lastDrag=e;const i=t.params;if(!this.dragging){const s=t.start,o=i.dragStartPixels??4;if(YP(e,s,o)||(this.dragging=!0,i.capturePointer&&(t.pointerCapture=EV(this.beans.eRootDiv,e)),this.eventSvc.dispatchEvent({type:"dragStarted",target:i.eElement}),i.onDragStart(s),this.drag!==t)||(i.onDragging(s),this.drag!==t))return}i.onDragging(e)}onTouchUp(e){const t=this.drag;t&&Yo(e)&&this.onUp(lg(t.start,e.changedTouches))}onMouseOrPointerUp(e){Yo(e)&&this.onUp(e)}onUp(e){const t=this.drag;t&&(e||(e=t.lastDrag),e&&this.dragging&&(this.dragging=!1,t.params.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t.params.eElement})),this.destroyDrag())}onKeyDown(e){e.key===G.ESCAPE&&this.cancelDrag()}},Vx=e=>{FS(e.handlers);const t=e.oldTouchAction;if(t!=null){const i=e.params.eElement.style;i&&(i.touchAction=t)}},KC=class{constructor(e,t,i,s=null){this.rootEl=e,this.params=t,this.start=i,this.pointerId=s,this.handlers=[],this.lastDrag=null,this.pointerCapture=null,this.eElement=t.eElement}},qC=e=>{const t=e.target;return t instanceof Element?t:null},TV=class extends $o{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageParent=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.lastDropTarget=null}addDragSource(e,t=!1){const i={capturePointer:!0,dragSource:e,eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:s=>this.onDragStart(e,s),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push(i),this.beans.dragSvc.addDragSource(i)}setDragImageCompIcon(e,t=!1){const i=this.dragImageComp;i&&(t||this.dragImageLastIcon!==e)&&(this.dragImageLastIcon=e,i.setIcon(e,t))}removeDragSource(e){var n;const{dragSourceAndParamsList:t,beans:i}=this,s=t.find(o=>o.dragSource===e);s&&((n=i.dragSvc)==null||n.removeDragSource(s),Qn(t,s))}destroy(){const{dragSourceAndParamsList:e,dropTargets:t,beans:i}=this,s=i.dragSvc;for(const n of e)s==null||s.removeDragSource(n);e.length=0,t.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){const e=this.lastMouseEvent;e&&this.onDragging(e,!0)}onDragStart(e,t){var s;this.lastMouseEvent=t,this.dragSource=e,this.dragItem=e.getDragItem();const i=e.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=t.clientX-i.left,this.dragInitialSourcePointerOffsetY=t.clientY-i.top,(s=e.onDragStarted)==null||s.call(e),this.createAndUpdateDragImageComp(e)}onDragStop(e){var s,n;const{dragSource:t,lastDropTarget:i}=this;if((s=t==null?void 0:t.onDragStopped)==null||s.call(t),i){const o=this.dropTargetEvent(i,e,!1);(n=i.onDragStop)==null||n.call(i,o)}this.clearDragAndDropProperties()}onDragCancel(){var s,n;const{dragSource:e,lastDropTarget:t,lastMouseEvent:i}=this;if((s=e==null?void 0:e.onDragCancelled)==null||s.call(e),t&&i){const o=this.dropTargetEvent(t,i,!1);(n=t.onDragCancel)==null||n.call(t,o)}this.clearDragAndDropProperties()}onDragging(e,t=!1){var a,l,c;this.positionDragImageComp(e);const i=this.findCurrentDropTarget(e),{lastDropTarget:s,dragSource:n,dragItem:o}=this;let r=!1;if(i!==s){if(r=!0,s){const d=this.dropTargetEvent(s,e,t);(a=s.onDragLeave)==null||a.call(s,d)}if(s!==null&&!i?this.handleExit(n,o):s===null&&i&&this.handleEnter(n,o),i){const d=this.dropTargetEvent(i,e,t);(l=i.onDragEnter)==null||l.call(i,d)}this.lastDropTarget=i}else if(i){const d=this.dropTargetEvent(i,e,t);(c=i.onDragging)==null||c.call(i,d),d!=null&&d.changed&&(r=!0)}this.lastMouseEvent=e,r&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageParent=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.dragSource=null}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let s=!1;const n=(a,l)=>{for(const c of l){const{width:d,height:h,left:u,right:f,top:p,bottom:m}=c.getBoundingClientRect();if(d===0||h===0)return!1;const v=a.clientX>=u&&a.clientX<f,C=a.clientY>=p&&a.clientY<m;if(!v||!C)return!1}return!0};for(const a of i)if(n(e,a)){s=!0;break}const{eElement:o,type:r}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(o)?!1:s&&t.isInterestedIn(r,o)}findCurrentDropTarget(e){const t=this.dropTargets.filter(o=>this.isMouseOnDropTarget(e,o)),i=t.length;if(i===0)return null;if(i===1)return t[0];const n=no(this.beans).elementsFromPoint(e.clientX,e.clientY);for(const o of n)for(const r of t)if(this.getAllContainersFromDropTarget(r).flatMap(l=>l).indexOf(o)!==-1)return r;return null}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.find(t=>t.external&&t.getContainer()===e)||null}dropTargetEvent(e,t,i){const{dragSource:s,dragItem:n,lastDraggingEvent:o,lastMouseEvent:r,dragInitialSourcePointerOffsetX:a,dragInitialSourcePointerOffsetY:l}=this,c=e.getContainer(),d=c.getBoundingClientRect(),{clientX:h,clientY:u}=t,f=h-((r==null?void 0:r.clientX)||0),p=u-((r==null?void 0:r.clientY)||0),m=this.createEvent({event:t,x:h-d.left,y:u-d.top,vDirection:p>0?"down":p<0?"up":null,hDirection:f<0?"left":f>0?"right":null,initialSourcePointerOffsetX:a,initialSourcePointerOffsetY:l,dragSource:s,fromNudge:i,dragItem:n,dropZoneTarget:c,dropTarget:(o==null?void 0:o.dropTarget)??null,changed:!!(o!=null&&o.changed)});return this.lastDraggingEvent=m,m}positionDragImageComp(e){var i;const t=(i=this.dragImageComp)==null?void 0:i.getGui();t&&yH(t,e,this.beans)}removeDragImageComp(e){var t;this.dragImageComp===e&&(this.dragImageComp=null),e&&((t=e.getGui())==null||t.remove(),this.destroyBean(e))}createAndUpdateDragImageComp(e){const t=this.createDragImageComp(e)??null;this.dragImageCompPromise=t,t==null||t.then(i=>{if(t!==this.dragImageCompPromise||!this.lastMouseEvent||!this.isAlive()){this.destroyBean(i);return}this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;const s=this.dragImageComp;s!==i&&(this.dragImageComp=i,this.removeDragImageComp(s)),i&&(this.appendDragImageComp(i),this.updateDragImageComp())})}appendDragImageComp(e){var n;const t=e.getGui(),i=t.style;i.position="absolute",i.zIndex="9999",(n=this.beans.dragSvc)!=null&&n.hasPointerCapture()&&(i.pointerEvents="none"),this.gos.setInstanceDomData(t),this.beans.environment.applyThemeClasses(t),i.top="20px",i.left="20px";const s=yS(this.beans);this.dragImageParent=s,s?s.appendChild(t):this.warnNoBody()}updateDragImageComp(){var r;const{dragImageComp:e,dragSource:t,lastDropTarget:i,lastDraggingEvent:s,dragImageLastLabel:n}=this;if(!e)return;this.setDragImageCompIcon(((r=i==null?void 0:i.getIconName)==null?void 0:r.call(i,s))??null);let o=t==null?void 0:t.dragItemName;typeof o=="function"&&(o=o(s)),o||(o=""),n!==o&&(this.dragImageLastLabel=o,e.setLabel(o))}},DV=class extends TV{createEvent(e){return Le(this.gos,e)}createDragImageComp(e){const{gos:t,beans:i}=this,s=ZG(i.userCompFactory,Le(t,{dragSource:e}));return s==null?void 0:s.newAgStackInstance()}handleEnter(e,t){var i;(i=e==null?void 0:e.onGridEnter)==null||i.call(e,t)}handleExit(e,t){var i;(i=e==null?void 0:e.onGridExit)==null||i.call(e,t)}warnNoBody(){J(54)}isDropZoneWithinThisGrid(e){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(e.dropZoneTarget)}registerGridDropTarget(e,t){const i={getContainer:e,isInterestedIn:s=>s===1||s===0,getIconName:()=>"notAllowed"};this.addDropTarget(i),t.addDestroyFunc(()=>this.removeDropTarget(i))}};function QT(e,t){return e+"_"+t}function ni(e){return e instanceof Ig}var Ig=class extends V{constructor(e,t,i,s){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=i,this.pinned=s,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=og(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return QT(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){for(const e of this.displayedChildren)ni(e)&&e.checkLeft();if(this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=Mt(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;for(const t of this.displayedChildren??[])e+=t.getActualWidth();return e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;for(const t of this.displayedChildren)t.isResizable()&&(e=!0);return e}getMinWidth(){let e=0;for(const t of this.displayedChildren)e+=t.getMinWidth();return e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!!((e=this.getColGroupDef())!=null&&e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){for(const t of this.displayedChildren??[])il(t)?e.push(t):ni(t)&&t.addDisplayedLeafColumns(e)}addLeafColumns(e){for(const t of this.children??[])il(t)?e.push(t):ni(t)&&t.addLeafColumns(e)}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!(e!=null&&e.isPadding())?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){var i;this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}for(const s of this.children??[]){if(ni(s)&&!((i=s.displayedChildren)!=null&&i.length))continue;switch(s.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(s);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(s);break;default:this.displayedChildren.push(s);break}}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},by="row-group-",WS="t-",$S="b-",MV=0,sl=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this._leafs=void 0,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=MV++,this.alreadyRendered=!1,this.hovered=!1,this.__selected=!1,this.beans=e}get allLeafChildren(){var t,i;const e=this._leafs;return e===void 0?((i=(t=this.beans.groupStage)==null?void 0:t.loadLeafs)==null?void 0:i.call(t,this))??null:e}set allLeafChildren(e){this._leafs=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){var a,l,c;const{valueCache:i,eventSvc:s}=this.beans,n=this.data;this.data=e,i==null||i.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();const o=this.createDataChangedEvent(e,n,t);if((a=this.__localEventService)==null||a.dispatchEvent(o),this.sibling){this.sibling.data=e;const d=this.sibling.createDataChangedEvent(e,n,t);(l=this.sibling.__localEventService)==null||l.dispatchEvent(d)}s.dispatchEvent({type:"rowNodeDataChanged",node:this});const r=this.pinnedSibling;r&&(r.data=e,(c=r.__localEventService)==null||c.dispatchEvent(r.createDataChangedEvent(e,n,t)),s.dispatchEvent({type:"rowNodeDataChanged",node:r}))}updateDataOnDetailNode(){const e=this.detailNode;e&&(e.data=this.data)}createDataChangedEvent(e,t,i){return{type:"dataChanged",node:this,oldData:t,newData:e,update:i}}getRowIndexString(){return this.rowIndex==null?(At(13),null):this.rowPinned==="top"?WS+this.rowIndex:this.rowPinned==="bottom"?$S+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){var r,a;const{selectionSvc:i}=this.beans,s=(r=i==null?void 0:i.createDaemonNode)==null?void 0:r.call(i,this),n=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),i&&(i.updateRowSelectable(this),i.syncInRowNode(this,s));const o=this.createDataChangedEvent(e,n,!1);(a=this.__localEventService)==null||a.dispatchEvent(o)}setId(e){var i;const t=nu(this.beans.gos);if(t)if(this.data){const s=((i=this.parent)==null?void 0:i.getRoute())??[];this.id=t({data:this.data,parentKeys:s.length>0?s:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(by)&&At(14,{groupPrefix:by})}else this.id=void 0;else this.id=e}setRowTop(e){if(this.oldRowTop=this.rowTop,this.rowTop===e)return;this.rowTop=e,this.dispatchRowEvent("topChanged");const t=e!==null;this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,i){var s;(s=this.beans.expansionSvc)==null||s.setExpanded(this,e,t,i)}setDataValue(e,t,i){var d;const{colModel:s,valueSvc:n,gos:o,editSvc:r}=this.beans,a=typeof e!="string"?e:s.getCol(e)??s.getColDefCol(e);if(!a)return!1;const l=n.getValueForDisplay(a,this,void 0,void 0,"api").value;if(o.get("readOnlyEdit")){const{beans:{eventSvc:h},data:u,rowIndex:f,rowPinned:p}=this;return h.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:f,rowPinned:p,column:a,colDef:a.colDef,data:u,node:this,oldValue:l,newValue:t,value:t,source:i}),!1}if(r&&!r.committing){const h=r.setDataValue({rowNode:this,column:a},t,i);if(h!=null)return h}const c=n.setValue(this,a,t,i);return this.dispatchCellChangedEvent(a,t,l),c&&((d=this.pinnedSibling)==null||d.dispatchCellChangedEvent(a,t,l)),c}updateHasChildren(){var i;let e=this.group&&!this.footer||!!((i=this.childrenAfterGroup)!=null&&i.length);const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,i){var n;const s={type:"cellChanged",node:this,column:e,newValue:t,oldValue:i};(n=this.__localEventService)==null||n.dispatchEvent(s)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){var e;return((e=this.beans.expansionSvc)==null?void 0:e.isExpandable(this))??!1}isSelected(){if(this.footer)return this.sibling.isSelected();const e=this.rowPinned&&this.pinnedSibling;return e?e.isSelected():this.__selected}depthFirstSearch(e){const t=this.childrenAfterGroup;if(t)for(let i=0,s=t.length;i<s;++i)t[i].depthFirstSearch(e);e(this)}dispatchRowEvent(e){var t;(t=this.__localEventService)==null||t.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,i="api"){var s;(s=this.beans.selectionSvc)==null||s.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:i})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){(this.__localEventService??(this.__localEventService=new jc)).addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){var n,o,r,a;(n=this.beans.validation)==null||n.checkRowEvents(e);const i=this.__localEventService??(this.__localEventService=new jc);this.frameworkEventListenerService=(r=(o=this.beans.frameworkOverrides).createLocalEventListenerWrapper)==null?void 0:r.call(o,this.frameworkEventListenerService,i);const s=((a=this.frameworkEventListenerService)==null?void 0:a.wrap(e,t))??t;i.addEventListener(e,s)}removeEventListener(e,t){var s;const i=((s=this.frameworkEventListenerService)==null?void 0:s.unwrap(e,t))??t;this.removeLocalListener(e,i)}removeLocalListener(e,t){const i=this.__localEventService;i&&(i.removeEventListener(e,t),i.noRegisteredListenersExist()&&(this.__localEventService=null))}isFullWidthCell(){if(J(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const e=[];let t=this;for(;(t==null?void 0:t.key)!=null;)e.push(t.key),t=t.parent;return e.reverse()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){var t;const e=this.childStore;return e?e.getFirstNode():((t=this.childrenAfterSort)==null?void 0:t[0])??null}};function IV(e,t,i){return Le(t,{type:i,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var kV=new Set(["__autoHeights","__checkAutoHeightsDebounced","__localEventService","__objectId","_leafs","childStore","oldRowTop","sticky","treeNodeFlags","treeParent"]),_V=(e,t)=>{const i=new sl(t);for(const s of Object.keys(e))kV.has(s)||(i[s]=e[s]);return i.oldRowTop=null,i},JT=e=>{for(;e!=null&&e.length;){const t=e[0];if(t.data)return t;e=t.childrenAfterGroup}},ZT={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},LV=new Set(Object.values(ZT));function ea(e,t){const i=e.filterUi;if(!i)return null;if(i.created)return i.promise;if(t)return null;const s=i.create(i.refreshed),n=i;return n.created=!0,n.promise=s,s}function OV(e,t,i,s,n,o,r){var a;return(a=t.refresh)==null||a.call(t,{...i,model:s,source:o,additionalEventAttributes:r}),e().then(l=>{if(l){const{filter:c,filterParams:d}=l;eD(c,d,s,n,o,r)}})}function eD(e,t,i,s,n,o){var r;(r=e==null?void 0:e.refresh)==null||r.call(e,{...t,model:i,state:s,source:n,additionalEventAttributes:o})}function tD(e,t,i){const s=e();s!=null&&s.created&&s.promise.then(n=>{const o=t();eD(n,s.filterParams,o,i()??{model:o},"ui")})}function zx(e,t,i,s,n,o,r){let a,l=!1,c;switch(e){case"apply":{const d=s();c=(d==null?void 0:d.model)??null,r&&(c=r(c)),a={state:d==null?void 0:d.state,model:c},l=!0;break}case"clear":{a={model:null};break}case"reset":{a={model:null},l=!0,c=null;break}case"cancel":{a={model:i()};break}}n(a),l?o(c):tD(t,i,s)}function Si(e,t){return e[t]??null}function ri(e){return fp(e)}function NV(e){return{tag:"div",cls:e}}var HV=class extends xt{constructor(e){const{className:t="ag-filter-apply-panel"}=e??{};super(NV(t)),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){const i=this.buttons;if(this.buttons=e,i===e)return;const s=this.getGui();Wi(s);let n;this.destroyListeners();const o=document.createDocumentFragment(),r=this.className,a=({type:c,label:d})=>{const h=C=>{this.dispatchLocalEvent({type:c,event:C})};["apply","clear","reset","cancel"].includes(c)||J(75);const u=c==="apply",p=ri({tag:"button",attrs:{type:u&&t?"submit":"button"},ref:`${c}FilterButton`,cls:`ag-button ag-standard-button ${r}-button${u?" "+r+"-apply-button":""}`,children:d});this.activateTabIndex([p]),u&&(n=p);const m=C=>{C.key===G.ENTER&&(C.preventDefault(),h(C))},v=this.listeners;p.addEventListener("click",h),v.push(()=>p.removeEventListener("click",h)),p.addEventListener("keydown",m),v.push(()=>p.removeEventListener("keydown",m)),o.append(p)};for(const c of e)a(c);this.eApply=n;const l=this.validationTooltipFeature;n&&!l?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3})):!n&&l&&(this.validationTooltipFeature=this.destroyBean(l)),s.append(o)}getApplyButton(){return this.eApply}updateValidity(e,t=null){var s;const i=this.eApply;i&&(Eg(i,e===!1),this.validationMessage=t??null,(s=this.validationTooltipFeature)==null||s.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){for(const e of this.listeners)e();this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}},GV={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:e=>`(${e[0]}, ${e[1]})`,filterSummaryTextQuote:e=>`"${e[0]}"`};function ha(e,t,i){return xH(e,GV,t,i)}function US(e,t){const{debounceMs:i}=e;return cC(e)?(i!=null&&J(71),0):i??t}function cC(e){var t;return(((t=e.buttons)==null?void 0:t.indexOf("apply"))??-1)>=0}var BV=class extends xt{constructor(e,t,i,s,n,o){super(),this.column=e,this.wrapper=t,this.eventParent=i,this.updateModel=s,this.isGlobalButtons=n,this.enableGlobalButtonCheck=o,this.hidePopup=null,this.applyActive=!1}postConstruct(){const{comp:e,params:t}=this.wrapper,i=t,s=i.useForm,n=s?"form":"div";this.setTemplate({tag:n,cls:"ag-filter-wrapper"}),s&&this.addManagedElementListeners(this.getGui(),{submit:o=>{o==null||o.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=i,this.resetButtonsPanel(i),this.addManagedListeners(this.eventParent,{filterParamsChanged:({column:o,params:r})=>{o===this.column&&this.resetButtonsPanel(r,this.params)},filterStateChanged:({column:o,state:r})=>{var a;o===this.column&&((a=this.eButtons)==null||a.updateValidity(r.valid!==!1))},filterAction:({column:o,action:r,event:a})=>{o===this.column&&this.afterAction(r,a)},...this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:o})=>{if(o!==this.isGlobalButtons){this.isGlobalButtons=o;const r=this.params;this.resetButtonsPanel(r,r,!0)}}}:void 0})}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,i){const{buttons:s,readOnly:n}=t??{},{buttons:o,readOnly:r,useForm:a}=e;if(!i&&n===r&&xg(s,o))return;const l=o&&o.length>0&&!e.readOnly&&!this.isGlobalButtons;let c=this.eButtons;if(l){const d=o.map(h=>{const u=`${h}Filter`;return{type:h,label:ha(this,u)}});if(this.applyActive=cC(this.params),!c){c=this.createBean(new HV),this.appendChild(c.getGui());const h=this.column,u=f=>({event:p})=>{this.updateModel(h,f,{fromButtons:!0}),this.afterAction(f,p)};c==null||c.addManagedListeners(c,{apply:u("apply"),clear:u("clear"),reset:u("reset"),cancel:u("cancel")}),this.eButtons=c}c.updateButtons(d,a)}else this.applyActive=!1,c&&(jn(c.getGui()),this.eButtons=this.destroyBean(c))}close(e){const t=this.hidePopup;if(!t)return;const i=e,s=i==null?void 0:i.key;let n;(s===G.ENTER||s===G.SPACE)&&(n={keyboardEvent:i}),t(n),this.hidePopup=null}afterAction(e,t){const{params:i,applyActive:s}=this,n=i==null?void 0:i.closeOnApply;switch(e){case"apply":{t==null||t.preventDefault(),n&&s&&this.close(t);break}case"reset":{n&&s&&this.close();break}case"cancel":{n&&this.close(t);break}}}handleKeyDown(e){!e.defaultPrevented&&e.key===G.ENTER&&this.applyActive&&(this.updateModel(this.column,"apply",{fromButtons:!0}),this.afterAction("apply",e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},VV={tag:"div",cls:"ag-filter"},zV=class extends xt{constructor(e,t,i){super(VV),this.column=e,this.source=t,this.enableGlobalButtonCheck=i,this.wrapper=null}postConstruct(){var e;(e=this.beans.colFilter)==null||e.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return this.wrapper!=null}getFilter(){var e;return((e=this.wrapper)==null?void 0:e.then(t=>t.comp))??null}afterInit(){var e;return((e=this.wrapper)==null?void 0:e.then(()=>{}))??Xt.resolve()}afterGuiAttached(e){var t;this.afterGuiAttachedParams=e,(t=this.wrapper)==null||t.then(i=>{var s,n,o;(s=this.comp)==null||s.afterGuiAttached(e),(o=(n=i==null?void 0:i.comp)==null?void 0:n.afterGuiAttached)==null||o.call(n,e)})}afterGuiDetached(){var e;(e=this.wrapper)==null||e.then(t=>{var i,s;(s=(i=t==null?void 0:t.comp)==null?void 0:i.afterGuiDetached)==null||s.call(i)})}createFilter(e){const{column:t,source:i,beans:{colFilter:s}}=this,n=s.getFilterUiForDisplay(t)??null;this.wrapper=n,n==null||n.then(o=>{var c;if(!o)return;const{isHandler:r,comp:a}=o;let l;if(r){const d=!!this.enableGlobalButtonCheck,h=this.createBean(new BV(t,o,s,s.updateModel.bind(s),d&&s.isGlobalButtons,d));this.comp=h,l=h.getGui()}else l=a.getGui(),fe(l)||J(69,{guiFromFilter:l});this.appendChild(l),e?this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()}):(c=a.afterGuiAttached)==null||c.call(a,this.afterGuiAttachedParams)})}onFilterDestroyed(e){const{source:t,column:i}=e;(t==="api"||t==="paramsUpdated")&&i.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(Wi(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){var e;(e=this.beans.colFilter)==null||e.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},Wx={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},$x=["january","february","march","april","may","june","july","august","september","october","november","december"];function WV(e,t){return e==null?-1:t==null?1:Number.parseFloat(e)-Number.parseFloat(t)}function Ux(e){return e instanceof Date&&!isNaN(e.getTime())}var yy={number:()=>{},boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>t===!1,numberOfInputs:0}]}),date:()=>({isValidDate:Ux}),dateString:({dataTypeDefinition:e})=>({comparator:(t,i)=>{const s=e.dateParser(i);return i==null||s<t?-1:s>t?1:0},isValidDate:t=>typeof t=="string"&&Ux(e.dateParser(t))}),dateTime:e=>yy.date(e),dateTimeString:e=>yy.dateString(e),object:()=>{},text:()=>{}},Sy={number:()=>({comparator:WV}),boolean:({t:e})=>({valueFormatter:t=>fe(t.value)?e(String(t.value),t.value?"True":"False"):e("blanks","(Blanks)")}),date:({formatValue:e,t})=>({valueFormatter:i=>{const s=e(i);return fe(s)?s:t("blanks","(Blanks)")},treeList:!0,treeListFormatter:(i,s)=>{if(i==="NaN")return t("invalidDate","Invalid Date");if(s===1&&i!=null){const n=$x[Number(i)-1];return t(n,Wx[n])}return i??t("blanks","(Blanks)")},treeListPathGetter:i=>Lp(i,!1)}),dateString:({formatValue:e,dataTypeDefinition:t,t:i})=>({valueFormatter:s=>{const n=e(s);return fe(n)?n:i("blanks","(Blanks)")},treeList:!0,treeListPathGetter:s=>Lp(t.dateParser(s??void 0),!1),treeListFormatter:(s,n)=>{if(n===1&&s!=null){const o=$x[Number(s)-1];return i(o,Wx[o])}return s??i("blanks","(Blanks)")}}),dateTime:e=>{const t=Sy.date(e);return t.treeListPathGetter=Lp,t},dateTimeString(e){const t=e.dataTypeDefinition.dateParser,i=Sy.dateString(e);return i.treeListPathGetter=s=>Lp(t(s??void 0)),i},object:({formatValue:e,t})=>({valueFormatter:i=>{const s=e(i);return fe(s)?s:t("blanks","(Blanks)")}}),text:()=>{}};function $V(e,t,i,s,n,o,r){let a=t,l=i;const c=e==="agSetColumnFilter";!l&&s.baseDataType==="object"&&!c&&(l=({column:f,node:p})=>n({column:f,node:p,value:o.valueSvc.getValue(f,p)}));const h=(c?Sy:yy)[s.baseDataType],u=h({dataTypeDefinition:s,formatValue:n,t:r});return a=typeof t=="object"?{...u,...t}:u,{filterParams:a,filterValueGetter:l}}var UV={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},jV={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};function KV(e,t=!1){return(t?jV:UV)[e??"text"]}var iD="ag-resizer-wrapper",ta=(e,t)=>({tag:"div",ref:`${e}Resizer`,cls:`ag-resizer ag-resizer-${t}`}),qV={tag:"div",cls:iD,children:[ta("eTopLeft","topLeft"),ta("eTop","top"),ta("eTopRight","topRight"),ta("eRight","right"),ta("eBottomRight","bottomRight"),ta("eBottom","bottom"),ta("eBottomLeft","bottomLeft"),ta("eLeft","left")]},YV=class extends V{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){const{clientHeight:t,clientWidth:i}=this.offsetParent,s=i/2-this.getWidth()/2,n=t/2-this.getHeight()/2;this.offsetElement(s,n,e)}initialisePosition(e){if(this.positioned)return;const{centered:t,forcePopupParentAsOffsetParent:i,minWidth:s,width:n,minHeight:o,height:r,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let c=0,d=0;const h=Wo(this.element);if(h){const u=this.findBoundaryElement(),f=window.getComputedStyle(u);if(f.minWidth!=null){const p=u.offsetWidth-this.element.offsetWidth;d=Number.parseInt(f.minWidth,10)-p}if(f.minHeight!=null){const p=u.offsetHeight-this.element.offsetHeight;c=Number.parseInt(f.minHeight,10)-p}}if(this.minHeight=o||c,this.minWidth=s||d,n&&this.setWidth(n),r&&this.setHeight(r),(!n||!r)&&this.refreshSize(),t)this.center(e);else if(a||l)this.offsetElement(a,l,e);else if(h&&i){let u=this.boundaryEl,f=!0;if(u||(u=this.findBoundaryElement(),f=!1),u){const p=Number.parseFloat(u.style.top),m=Number.parseFloat(u.style.left);f?this.offsetElement(isNaN(m)?0:m,isNaN(p)?0:p,e):this.setPosition(m,p)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){var s,n;if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?((s=this.dragSvc)==null||s.addDragSource(i),this.moveElementDragListener=i):((n=this.dragSvc)==null||n.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{var r;const s=!!e[t],n=this.getResizerElement(t),o={dragStartPixels:0,eElement:n,onDragStart:a=>this.onResizeStart(a,t),onDragging:this.onResize.bind(this),onDragStop:a=>this.onResizeEnd(a,t)};(s||!this.isAlive()&&!s)&&(s?((r=this.dragSvc)==null||r.addDragSource(o),this.resizeListeners.push(o),n.style.pointerEvents="all"):n.style.pointerEvents="none",this.resizable[t]=s)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let s=!1;if(typeof e=="string"&&e.includes("%"))ag(i,e),e=VP(i),s=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const n=this.getAvailableHeight();n&&e>n&&(e=n)}this.getHeight()!==e&&(s?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?ag(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:Number.parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const s=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:s.top,r=e?0:n.top;let a=0;if(t){const c=this.element.parentElement;if(c){const{bottom:d}=c.getBoundingClientRect();a=d-s.bottom}}return i+r-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let s=!1;if(typeof e=="string"&&e.includes("%"))Oo(t,e),e=Xm(t),s=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:n}=this.offsetParent,o=i?this.position.x:this.element.getBoundingClientRect().left;n&&e+o>n&&(e=n-o)}this.getWidth()!==e&&(s?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Oo(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:Number.parseFloat(e)))}offsetElement(e=0,t=0,i){var o;const{forcePopupParentAsOffsetParent:s}=this.config,n=s?this.boundaryEl:this.element;n&&((o=this.popupSvc)==null||o.positionPopup({ePopup:n,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t}),postProcessCallback:i}),this.setPosition(Number.parseFloat(n.style.left),Number.parseFloat(n.style.top)))}constrainSizeToAvailableHeight(e){var i,s;if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};e&&this.popupSvc?((i=this.resizeObserverSubscriber)==null||i.call(this),this.resizeObserverSubscriber=ll(this.beans,(s=this.popupSvc)==null?void 0:s.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:s,anywhereWithin:n,topBuffer:o}=e,r=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!i,!!n,r)?0:r,c=this.shouldSkipY(t,!!s,o,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,i,s){const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:n.left;let l=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=r.right;return l?!0:(t?l=s<0&&e.clientX>a+o.left||s>0&&e.clientX<a+o.left:i?l=s<0&&e.clientX>r.right||s>0&&e.clientX<a+o.left:l=s<0&&e.clientX>r.right||s>0&&e.clientX<r.right,l)}shouldSkipY(e,t,i=0,s){const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:n.top;let l=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=r.bottom;return l?!0:(t?l=s<0&&e.clientY>a+o.top+i||s>0&&e.clientY<a+o.top:l=s<0&&e.clientY>r.bottom||s>0&&e.clientY<r.bottom,l)}createResizeMap(){const e=t=>({element:this.element.querySelector(`[data-ref=${t}Resizer]`)});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;const e=this.element;e&&(e.appendChild(ri(qV)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${iD}`);e==null||e.remove(),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:s}=this.config;!i&&!s&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let s=0;s<e.length;s++){const n=e[s],o=!!n.style.flex&&n.style.flex!=="0 0 auto";if(n===this.element)continue;let r=this.minHeight||0,a=this.minWidth||0;if(o){const l=window.getComputedStyle(n);l.minHeight&&(r=Number.parseInt(l.minHeight,10)),l.minWidth&&(a=Number.parseInt(l.minWidth,10))}else r=n.offsetHeight,a=n.offsetWidth;t+=r,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let s=0;s<i.length;s++){const n=i[s];n!==t&&(e?n.style.height=`${n.offsetHeight}px`:n.style.width=`${n.offsetWidth}px`,n.style.flex="0 0 auto",n===this.element&&(t=i[s+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:s,isRight:n,isBottom:o,isLeft:r}=this.currentResizer,a=n||r,l=o||s,{movementX:c,movementY:d}=this.calculateMouseMovement({e,isLeft:r,isTop:s}),h=this.position.x,u=this.position.y;let f=0,p=0;if(a&&c){const m=r?-1:1,v=this.getWidth(),C=v+c*m;let w=!1;r&&(f=v-C,(h+f<=0||C<=this.minWidth)&&(w=!0,f=0)),w||this.setWidth(C)}if(l&&d){const m=s?-1:1,v=this.getHeight(),C=v+d*m;let w=!1;s?(p=v-C,(u+p<=0||C<=this.minHeight)&&(w=!0,p=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&v<C&&this.getMinSizeOfSiblings().height+C>this.element.parentElement.offsetHeight&&(w=!0),w||this.setHeight(C)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&f||p)&&this.offsetElement(h+f,u+p)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());const{movementX:n,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(t+n,i+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){var e;for(;this.resizeListeners.length;){const t=this.resizeListeners.pop();(e=this.dragSvc)==null||e.removeDragSource(t)}}destroy(){var e;super.destroy(),this.moveElementDragListener&&((e=this.dragSvc)==null||e.removeDragSource(this.moveElementDragListener)),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},sD="__ag_Grid_Stop_Propagation";function Yc(e){e[sD]=!0}function Hr(e){return e[sD]===!0}var XV="ag-focus-managed",Cu=class extends V{constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;const s=ld(this.beans,this.eFocusable,!1,i.shiftKey);s&&(s.focus(),i.preventDefault())},...t}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:i}}=this;e.classList.add(XV),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),i&&this.addManagedElementListeners(e,{focusout:i})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||Hr(t))return;const{callbacks:i}=this;if(i.shouldStopEventPropagation(t)){Yc(t);return}t.key===G.TAB?i.onTabKeyDown(t):i.handleKeyDown&&i.handleKeyDown(t)}})}},QV=class extends xt{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){const e={tag:"div",cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new Cu(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new YV(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){const t=e;this.setParams(t),this.setModelIntoUi(t.state.model,!0).then(()=>this.updateUiVisibility())}refresh(e){const t=e,i=this.params;this.params=t,t.source==="colDef"&&this.updateParams(t,i);const n=t.state,o=this.state;return this.state=n,(n.model!==o.model||n.state!==o.state)&&this.setModelIntoUi(n.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=cC(e),this.setupApplyDebounced()}doesFilterPass(e){J(283);const{getHandler:t,model:i,column:s}=this.params;return t().doesFilterPass({...e,model:i,handlerParams:this.beans.colFilter.getHandlerParams(s)})}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return J(284),this.params.model!=null}setupApplyDebounced(){const e=US(this.params,this.defaultDebounceMs),t=Vi(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return J(285),this.params.model}setModel(e){J(286);const{beans:t,params:i}=this;return t.colFilter.setModelForColumnLegacy(i.column,e)}applyModel(e="api"){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){const{params:t,state:i}=this,s=!this.areModelsEqual(t.model,i.model);return s&&t.onAction("apply",e),s}onNewRowsLoaded(){}onUiChanged(e,t=!1){this.updateUiVisibility();const i=this.getModelFromUi(),s={model:i,state:this.getState(),valid:this.canApply(i)};this.state=s;const n=this.params;n.onStateChange(s),n.onUiChange(this.getUiChangeEventParams()),this.gos.get("enableFilterHandlers")||this.eventSvc.dispatchEvent({type:"filterModified",column:n.column,filterInstance:this}),e??(e=this.applyActive?void 0:"debounce"),e==="immediately"?this.doApplyModel({afterFloatingFilter:t,afterDataChange:!1}):e==="debounce"&&this.applyDebounced()}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=e==null?void 0:e.container,this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:i}=this;if(!t)return;const s=e==="floatingFilter"||e==="columnFilter";s?(t.restoreLastSize(),t.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(s)}afterGuiDetached(){var e;this.checkApplyDebounce(),(e=this.positionableFeature)==null||e.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e){return ha(this,e)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||e==null&&t==null?!0:e==null||t==null?!1:this.areNonNullModelsEqual(e,t)}};function nD(e){return!!e.operator}function JV(e,t,i){if(t==null)return null;let s=null;const{compName:n,jsComp:o,fwComp:r}=MT(e,t);return n?s={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[n]:o==null&&r==null&&t.filter===!0&&(s=i()),s}var Gn={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},jS=class extends V{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=t.autoHeight?Gn.AUTO_HEIGHT:t.print?Gn.PRINT:Gn.NORMAL;this.view.updateLayoutClasses(i,t)}},ia="Viewport",jx="fakeVScrollComp",YC=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],Kx=100,XC=150,ZV=class extends V{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=Vi(this,()=>this.lastScrollSource[1]=null,XC),this.resetLastVScrollDebounced=Vi(this,()=>this.lastScrollSource[0]=null,XC)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,i=>{this.centerRowsCtrl=i.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,ia)});for(const e of YC){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?Vi(this,this.onVScroll.bind(this,ia),Kx):this.onVScroll.bind(this,ia),s=t?Vi(this,this.onVScroll.bind(this,jx),Kx):this.onVScroll.bind(this,jx);this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,s)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...YC,ia]){if(this.lastScrollSource[1]===t)continue;const i=this.getViewportForSource(t);Jm(i,e,this.enableRtl)}}getViewportForSource(e){return e===ia?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const s=Qm(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(s),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===ia?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:i}=this;i==null||i.setScrollTop(t),this.nextScrollTop=t,e===ia?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,i!=null&&i.active?i.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},XC)}shouldBlockScrollUpdate(e,t,i=!1){return i&&!Nc()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=SS(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const e=this.scrollLeft;let t=!1;for(const i of YC)if(this.getViewportForSource(i).scrollLeft!==e){t=!0;break}t&&this.onHScroll(ia)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const s=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:s:e=Math.min(Math.max(e,0),s)),Jm(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:i,lastScrollTop:s}=this;return{top:s,bottom:s+i}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:i}=this.beans,s=i.getRowCount();let n=-1;for(let o=0;o<s;o++){const r=i.getRow(o);if(typeof e=="function"){if(r&&e(r)){n=o;break}}else if(e===r||e===r.data){n=o;break}}n>=0&&this.ensureIndexVisible(n,t)}ensureIndexVisible(e,t,i=0){if($i(this.gos,"print"))return;const{rowModel:s}=this.beans,n=s.getRowCount();if(typeof e!="number"||e<0||e>=n){J(88,{index:e});return}this.clearRetryListeners();const{frameworkOverrides:o,pageBounds:r,rowContainerHeight:a,rowRenderer:l}=this.beans;o.wrapIncoming(()=>{var p,m;const c=this.ctrlsSvc.getGridBodyCtrl(),d=s.getRow(e);let h,u,f=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:v,stickyBottomHeight:C}=c,w=d.rowTop,S=d.rowHeight,y=r.getPixelOffset(),R=d.rowTop-y,A=R+d.rowHeight,P=this.getVScrollPosition(),T=a.divStretchOffset,M=P.top+T,N=P.bottom+T,_=N-M,L=a.getScrollPositionForPixel(R),z=a.getScrollPositionForPixel(A-_),q=Math.min((L+z)/2,R),B=M+v>R,Z=N-C<A;let ee=null;t==="top"?ee=L-v:t==="bottom"?ee=z+C:t==="middle"?ee=q:B?ee=L-v:Z&&(z-L>_?ee=L-v:ee=z+C),ee!==null&&(this.setVerticalScrollPosition(ee),l.redraw({afterScroll:!0})),h=w!==d.rowTop||S!==d.rowHeight,u=v!==c.stickyTopHeight||C!==c.stickyBottomHeight,f++}while((h||u)&&f<10);if((p=this.animationFrameSvc)==null||p.flushAllFrames(),i<10&&(d!=null&&d.stub||!((m=this.beans.rowAutoHeight)!=null&&m.areRowsMeasured()))){const v=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const C=this.getVScrollPosition().top;v!==C&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(e>=s.getRowCount())&&this.ensureIndexVisible(e,t,i+1)}})}})}clearRetryListeners(){for(const e of this.clearRetryListenerFncs)e();this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){const{colModel:i,frameworkOverrides:s}=this.beans,n=i.getCol(e);if(!n||n.isPinned()||!this.visibleCols.isColDisplayed(n))return;const o=this.getPositionedHorizontalScroll(n,t);s.wrapIncoming(()=>{var r;o!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(o),this.centerRowsCtrl.onHorizontalViewportChanged(),(r=this.animationFrameSvc)==null||r.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:s}=this.isColumnOutsideViewport(e),n=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let a=(r?i:s)||n,l=r?s:i;t!=="auto"&&(a=t==="start",l=t==="end");const c=t==="middle";if(a||l||c){const{colLeft:d,colMiddle:h,colRight:u}=this.getColumnBounds(e);return c?h-o/2:a?r?u:d:r?d-o:u-o}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:s,colRight:n}=this.getColumnBounds(e),o=this.enableRtl,r=o?t>n:i<n,a=o?i<s:t>s;return{columnBeforeStart:r,columnAfterEnd:a}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleCols.bodyWidth,s=e.getActualWidth(),n=e.getLeft(),o=t?-1:1,r=t?i-n:n,a=r+s*o,l=r+s/2*o;return{colLeft:r,colMiddle:l,colRight:a}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),i=t,s=e+t;return{start:i,end:s,width:e}}},KS=class extends V{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=$i(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:i}=this.beans,s=t.bodyWidth,n=t.getColsLeftWidth(),o=t.getDisplayedColumnsRightWidth();let r;e?r=s+n+o:(r=s,this.addSpacer&&(this.gos.get("enableRtl")?n:o)===0&&i.verticalScrollShowing&&(r+=i.getScrollbarWidth())),this.callback(r)}},ez=class extends V{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:i}=this,s=()=>{Xr(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(s),i.registerBodyViewportResizeListener(s)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;e==null||e.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const i=this.centerContainerCtrl.getCenterWidth();i!==this.centerWidth&&(this.centerWidth=i,t==null||t.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.eBodyViewport,t=SS(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function Im(e,t,i,s){var o;const n=(o=t.getColDef().cellRendererParams)==null?void 0:o.suppressMouseEventHandling;return oD(e,t,i,s,n)}function tz(e,t,i,s){const n=t==null?void 0:t.suppressMouseEventHandling;return oD(e,void 0,i,s,n)}function oD(e,t,i,s,n){return n?n(Le(e,{column:t,node:i,event:s})):!1}function rD(e,t,i){let s=t;for(;s;){const n=aT(e,s,i);if(n)return n;s=s.parentElement}return null}var hv="cellCtrl";function qS(e,t){return rD(e,t,hv)}var uv="renderedRow";function iz(e,t){return rD(e,t,uv)}function xy(e,t,i,s,n){const o=s?s.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const r=Le(e,{event:t,editing:n,column:s,node:i,data:i.data,colDef:s.getColDef()});return!!(o&&o(r))}function sz(e){const{pinnedRowModel:t,rowModel:i}=e,[s,n]=[(t==null?void 0:t.isEmpty("top"))??!0,(t==null?void 0:t.isEmpty("bottom"))??!0],o=s?null:"top";let r,a;n?(r=null,a=i.getRowCount()-1):(r="bottom",a=(t==null?void 0:t.getPinnedBottomRowCount())??-1);const{visibleCols:l,rangeSvc:c}=e,d=l.allCols;!c||!(d!=null&&d.length)||c.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:a,rowEndPinned:r})}var nz=65,oz=67,rz=86,az=68,lz=90,cz=89;function dz(e){const{keyCode:t}=e;let i;switch(t){case nz:i=G.A;break;case oz:i=G.C;break;case rz:i=G.V;break;case az:i=G.D;break;case lz:i=G.Z;break;case cz:i=G.Y;break;default:i=e.code}return i}var hz=class extends V{constructor(e){super(),this.element=e}postConstruct(){var e;this.addKeyboardListeners(),this.addMouseListeners(),(e=this.beans.touchSvc)==null||e.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){const t=["dblclick","contextmenu","mouseover","mouseout","click",qP("touchstart")?"touchstart":"mousedown"];for(const i of t){const s=this.processMouseEvent.bind(this,i);this.addManagedElementListeners(this.element,{[i]:s})}}processMouseEvent(e,t){var n;if(!Fg(this.beans,t)||Hr(t))return;const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(i!=null&&i.column&&i.dispatchCellContextMenuEvent(t),(n=this.beans.contextMenuSvc)==null||n.handleContextMenuMouseEvent(t,void 0,s,i)):(i&&i.onMouseEvent(e,t),s&&s.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:qS(t,e),rowCtrl:iz(t,e)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):s!=null&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,e,t))}processCellKeyboardEvent(e,t,i){var o,r;const s=((o=this.editSvc)==null?void 0:o.isEditing(e,{withOpenEditor:!0}))??!1;!xy(this.gos,i,e.rowNode,e.column,s)&&t==="keydown"&&(!s&&((r=this.beans.navigation)!=null&&r.handlePageScrollingKey(i))||e.onKeyDown(i),this.doGridOperations(i,s),OT(i)&&e.processCharacter(i)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const{rowNode:s}=e,{focusSvc:n,navigation:o}=this.beans,r=n.getFocusedCell(),a=r==null?void 0:r.column;if(!xy(this.gos,i,s,a,!1)){const c=i.key;if(t==="keydown")switch(c){case G.PAGE_HOME:case G.PAGE_END:case G.PAGE_UP:case G.PAGE_DOWN:o==null||o.handlePageScrollingKey(i,!0);break;case G.LEFT:case G.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case G.UP:case G.DOWN:e.onKeyboardNavigate(i);break;case G.TAB:e.onTabKeyDown(i);break}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!Fg(this.beans,e))return;const i=dz(e),{clipboardSvc:s,undoRedo:n}=this.beans;if(i===G.A)return this.onCtrlAndA(e);if(i===G.C)return this.onCtrlAndC(s,e);if(i===G.D)return this.onCtrlAndD(s,e);if(i===G.V)return this.onCtrlAndV(s,e);if(i===G.X)return this.onCtrlAndX(s,e);if(i===G.Y)return this.onCtrlAndY(n);if(i===G.Z)return this.onCtrlAndZ(n,e)}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:i,selectionSvc:s},gos:n}=this;i&&$r(n)&&!nG(n)&&t.isRowsToRender()?sz(this.beans):s&&s.selectAllRowNodes({source:"keyboardSelectAll",selectAll:gT(n)}),e.preventDefault()}onCtrlAndC(e,t){var s;if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:i}=this.getControlsForEventTarget(t.target);(s=this.editSvc)!=null&&s.isEditing(i,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){var s;if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:i}=this.getControlsForEventTarget(t.target);(s=this.editSvc)!=null&&s.isEditing(i,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){var s;const{cellCtrl:i}=this.getControlsForEventTarget(t.target);(s=this.editSvc)!=null&&s.isEditing(i,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e==null||e.redo("ui")}},aD=class extends V{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,i=t!=null?`${t}px`:"";this.eContainer.style.height=i,this.eViewport&&(this.eViewport.style.height=i)}},Hp=e=>e.topRowCtrls,Gp=e=>e.getStickyTopRowCtrls(),Bp=e=>e.getStickyBottomRowCtrls(),Vp=e=>e.bottomRowCtrls,zp=e=>e.allRowCtrls,QC=e=>e.getCtrls("top"),JC=e=>e.getCtrls("center"),ZC=e=>e.getCtrls("bottom"),uz={center:{type:"center",name:"center-cols",getRowCtrls:zp,getSpannedRowCtrls:JC},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:zp,getSpannedRowCtrls:JC},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:zp,getSpannedRowCtrls:JC},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:zp},topCenter:{type:"center",name:"floating-top",getRowCtrls:Hp,getSpannedRowCtrls:QC},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Hp,getSpannedRowCtrls:QC},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Hp,getSpannedRowCtrls:QC},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:Hp},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:Gp},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Gp},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Gp},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:Gp},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:Bp},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Bp},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Bp},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:Bp},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:Vp,getSpannedRowCtrls:ZC},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Vp,getSpannedRowCtrls:ZC},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Vp,getSpannedRowCtrls:ZC},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:Vp}};function lD(e){return`ag-${vp(e).name}-viewport`}function km(e){const t=vp(e);return t.container??`ag-${t.name}-container`}function gz(e){return`ag-${vp(e).name}-spanned-cells-container`}function vp(e){return uz[e]}var fz=["topCenter","topLeft","topRight"],pz=["bottomCenter","bottomLeft","bottomRight"],mz=["center","left","right"],vz=["center","left","right","fullWidth"],Cz=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],wz=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],bz=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],cD=["stickyTopCenter","stickyTopLeft","stickyTopRight"],dD=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],yz=[...cD,"stickyTopFullWidth",...dD,"stickyBottomFullWidth"],Sz=[...fz,...pz,...mz,...cD,...dD],xz=class extends V{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=vp(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new ez(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,i,s){this.comp=e,this.eContainer=t,this.eSpannedContainer=i,this.eViewport=s,this.createManagedBean(new hz(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:n,rangeSvc:o}=this.beans,r=()=>this.onPinnedWidthChanged();this.forContainers(wz,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(n==null?void 0:n.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:r})}),this.forContainers(bz,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(n==null?void 0:n.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:r})}),this.forContainers(vz,()=>this.createManagedBean(new aD(this.eContainer,this.name==="center"?s:void 0))),o&&this.forContainers(Sz,()=>this.createManagedBean(o.createDragListenerFeature(this.eContainer))),this.forContainers(Cz,()=>this.createManagedBean(new KS(a=>this.comp.setContainerWidth(`${a}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i,displayedColumnsWidthChanged:i,displayedRowsChanged:s=>this.onDisplayedRowsChanged(s.afterScroll)}),i(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const s=this.options.getSpannedRowCtrls(e);s&&this.comp.setSpannedRowCtrls(s,!1)}})}listenOnDomOrder(){if(yz.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const i=this.gos.get("ensureDomOrder"),s=$i(this.gos,"print");this.comp.setDomOrder(i||s)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=i=>{e.dragging&&i.cancelable&&i.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return Ag(this.eViewport)}getCenterViewportScrollLeft(){return Qm(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=ll(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return WP(this.eViewport)}getViewportScrollLeft(){return Qm(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||RS(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Jm(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const i=$i(this.gos,"print"),n=this.gos.get("embedFullWidthRows")||i,o=t.filter(r=>{const a=r.isFullWidth();return this.options.fullWidth?!n&&a:n||!a});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},hD="ag-force-vertical-scroll",Rz="ag-selectable",Ez="ag-column-moving",Az=class extends V{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,i,s,n,o,r){var a,l;this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=s,this.eBottom=n,this.eStickyTop=o,this.eStickyBottom=r,this.eCenterColsViewport=i.querySelector(`.${lD("center")}`),this.eFullWidthContainer=i.querySelector(`.${km("fullWidth")}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${km("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=r.querySelector(`.${km("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",c=>this.setCellTextSelection(c.currentValue)),this.createManagedBean(new jS(this.comp)),this.scrollFeature=this.createManagedBean(new ZV(i)),(a=this.beans.rowDragSvc)==null||a.setupRowDrag(i,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,i,n,o,r]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),(l=this.filterManager)==null||l.setupAdvFilterHeaderComp(s),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),i=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:i,rowResizeEnded:i}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t=e.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const i=t&&e.getScrollbarWidth()||0,s=LT()?16:0,n=`calc(100% + ${i+s}px)`;Xr(this.beans,()=>this.comp.setBodyViewportWidth(n)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t}=this;let i=this.gos.get("treeData");if(!i){const s=t.isPivotMode();i=(e?e.columns.length:0)>=(s?2:1)}this.comp.setGridRootRole(i?"treegrid":"grid")}addFocusListeners(e){for(const t of e)this.addManagedElementListeners(t,{focusin:i=>{const{target:s}=i,n=_c(s,"ag-root",t);t.classList.toggle("ag-has-focus",!n)},focusout:i=>{const{target:s,relatedTarget:n}=i,o=t.contains(n),r=_c(n,"ag-root",t);_c(s,"ag-root",t)||(!o||r)&&t.classList.remove("ag-has-focus")}})}setColumnMovingCss(e){this.comp.setColumnMovingCss(Ez,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(Rz,e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){var e;(e=this.beans.editSvc)==null||e.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){var n,o;const e=(((n=this.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:n.getRowCount())??0)+(((o=this.filterManager)==null?void 0:o.getHeaderRowCount())??0),{rowModel:t}=this.beans,i=t.isLastRowIndexKnown()?t.getRowCount():-1,s=i===-1?-1:e+i;this.comp.setRowCount(s)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?hD:null,i=$i(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&jP(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let i=t.sizesMeasured;const s=()=>{const n=i&&Gd(this.gos)&&!e.stretching,o=n?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(o,n)};s(),this.addManagedEventListeners({heightScaleChanged:s}),this.addManagedPropertyListener("animateRows",s),this.addManagedEventListeners({gridStylesChanged:()=>{!i&&t.sizesMeasured&&(i=!0,s())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:i,eTop:s,eBottom:n,beans:{popupSvc:o,touchSvc:r}}=this,a=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:a}),r==null||r.mockBodyContextMenu(this,a),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,o)});const l=this.onStickyWheel.bind(this);for(const d of[t,i,s,n])this.addManagedElementListeners(d,{wheel:l});const c=this.onHorizontalWheel.bind(this);for(const d of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(d).eContainer,{wheel:c});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:s}=e;(s||Math.abs(t)>Math.abs(i))&&Fg(this.beans,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){const{deltaX:t,deltaY:i,shiftKey:s}=e;(s||Math.abs(t)>Math.abs(i))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){var n;if(!e&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:s}=e||t;(s===this.eBodyViewport||s===this.ctrlsSvc.get("center").eViewport)&&((n=this.beans.contextMenuSvc)==null||n.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody,source:"ui"}))}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e!=null&&e.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,i=e==null?void 0:e.getPinnedTopTotalHeight(),s=e==null?void 0:e.getPinnedBottomTotalHeight(),n=t.getPinnedRowBorderWidth(),o=t.getRowBorderWidth(),r=n-o,a=i?r+i:0,l=s?r+s:0;this.comp.setTopHeight(a),this.comp.setBottomHeight(l),this.comp.setTopInvisible(a<=0),this.comp.setBottomInvisible(l<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){var n,o;const t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(((n=this.filterManager)==null?void 0:n.getHeaderHeight())??0),i=((o=this.pinnedRowModel)==null?void 0:o.getPinnedTopTotalHeight())??0;let s=0;t>0&&(s+=t),i>0&&(s+=i),s>0&&(s+=1),this.comp.setStickyTopTop(`${s}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:i}=this,s=(e==null?void 0:e.getPinnedBottomTotalHeight())??0,o=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,r=s+o;i.setStickyBottomBottom(`${r}px`)}};function Fz(e,t){var i;return((i=qS(e,t.target))==null?void 0:i.getFocusedCellPosition())??null}function qx(e,t){const i=$i(e.gos,"normal"),s=t;let n,o;s.clientX!=null||s.clientY!=null?(n=s.clientX,o=s.clientY):(n=s.x,o=s.y);const{pageFirstPixel:r}=e.pageBounds.getCurrentPagePixelRange();if(o+=r,i){const a=e.ctrlsSvc.getScrollFeature(),l=a.getVScrollPosition(),c=a.getHScrollPosition();n+=c.left,o+=l.top}return{x:n,y:o}}var uD=class extends xt{constructor(e,t){super(),this.direction=t,this.eViewport=he,this.eContainer=he,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",kT()||Nc())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=LT(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),i=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),Xr(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;DH(this,()=>Wo(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},Pz={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},Tz=class extends uD{constructor(){super(Pz,"horizontal"),this.eLeftSpacer=he,this.eRightSpacer=he,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new KS(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){var t;if(!this.invisibleScrollbar)return;const e=((t=this.beans.pinnedRowModel)==null?void 0:t.getPinnedBottomTotalHeight())??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,s=this.scrollVisibleSvc.getScrollbarWidth();i&&(t+=s),Oo(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=s);let n=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(n+=s),Oo(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=s)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),s=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,o=i?0:s===0&&t?16:s,r=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),ag(this.getGui(),o),ag(this.eViewport,o),ag(this.eContainer,o),o||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(r,100):r()}getScrollPosition(){return Qm(this.eViewport,this.enableRtl)}setScrollPosition(e){Wo(this.eViewport)||this.attemptSettingScrollPosition(e),Jm(this.eViewport,e,this.enableRtl)}},Dz={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:Tz},Mz={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},Iz=class extends uD{constructor(){super(Mz,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new aD(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,i=this.invisibleScrollbar,s=t&&e.getScrollbarWidth()||0,n=s===0&&i?16:s;this.toggleCss("ag-scrollbar-invisible",i),Oo(this.getGui(),n),Oo(this.eViewport,n),Oo(this.eContainer,n),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const i=e.getGridBodyCtrl().eBodyViewport,s=this.getScrollPosition(),n=i.scrollTop;s!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!Wo(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}},kz={selector:"AG-FAKE-VERTICAL-SCROLL",component:Iz},_z="ag-column-first",Lz="ag-column-last";function gD(e,t,i,s){return Ht(e)?[]:Nz(e.headerClass,e,t,i,s)}function fD(e,t,i){e.toggleCss(_z,i.isColAtEdge(t,"first")),e.toggleCss(Lz,i.isColAtEdge(t,"last"))}function Oz(e,t,i,s){return Le(t,{colDef:e,column:i,columnGroup:s})}function Nz(e,t,i,s,n){if(Ht(e))return[];let o;if(typeof e=="function"){const r=Oz(t,i,s,n);o=e(r)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}function Hz(e,t,i){t.addManagedElementListeners(i,{keydown:s=>{if(!s.defaultPrevented&&s.key===G.TAB){const n=s.shiftKey;ld(e,i,!1,n)||au(e,n)&&s.preventDefault()}}})}function Gz(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function Hc(e){var t;return e.gos.get("suppressHeaderFocus")||!!((t=e.overlays)!=null&&t.isExclusive())}function dC(e){var t;return e.gos.get("suppressCellFocus")||!!((t=e.overlays)!=null&&t.isExclusive())}function au(e,t,i=!1){const s=e.ctrlsSvc.get("gridCtrl");return!i&&s.focusNextInnerContainer(t)?!0:((i||!t&&!s.isDetailGrid())&&s.forceFocusOutOfContainer(t),!1)}function _o(e){var t;return((t=e.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:t.getRowCount())??0}function YS(e){const t=[],i=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const s of i){if(!s)continue;const n=s.getGroupRowCount()||0;for(let o=0;o<n;o++){const r=s.getGroupRowCtrlAtIndex(o),a=t[o];if(r){const l=Bz(e,r);(a==null||l>a)&&(t[o]=l)}}}return t}function Bz(e,t){let s=e.colModel.isPivotMode()?zz(e):mD(e);const n=t.getHeaderCellCtrls();for(const o of n){const{column:r}=o,a=r.getAutoHeaderHeight();a!=null&&a>s&&r.isAutoHeaderHeight()&&(s=a)}return s}function XS(e){let i=e.colModel.isPivotMode()?Vz(e):Cp(e);return e.colModel.forAllCols(s=>{const n=s.getAutoHeaderHeight();n!=null&&n>i&&s.isAutoHeaderHeight()&&(i=n)}),i}function Cp(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function pD(e){return e.gos.get("floatingFiltersHeight")??Cp(e)}function mD(e){return e.gos.get("groupHeaderHeight")??Cp(e)}function Vz(e){return e.gos.get("pivotHeaderHeight")??Cp(e)}function zz(e){return e.gos.get("pivotGroupHeaderHeight")??mD(e)}function Wz(e,t){return e.headerRowIndex===t.headerRowIndex&&e.column===t.column}var $z=class extends V{setComp(e,t,i){this.comp=e,this.eGui=t;const{beans:s}=this,{headerNavigation:n,touchSvc:o,ctrlsSvc:r}=s;n&&this.createManagedBean(new Cu(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,s),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,s)}),this.onPivotModeChanged(s),this.setupHeaderHeight();const a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),o==null||o.mockHeaderContextMenu(this,a),r.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>Xr(this.beans,()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){var o;const{beans:e}=this;let t=0;const i=YS(e).reduce((r,a)=>r+a,0),s=XS(e);if((o=e.filterManager)!=null&&o.hasFloatingFilters()&&(t+=pD(e)),t+=i,t+=s,this.headerHeight===t)return;this.headerHeight=t;const n=`${t+1}px`;this.comp.setHeightAndMinHeight(n),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const i=e.visibleCols.allCols.some(s=>s.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",i)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,s=i!==t?"LEFT":"RIGHT",{beans:n}=this,{headerNavigation:o,focusSvc:r}=n;(o.navigateHorizontally(s,!0,e)||!i&&r.focusOverlay(!1)||au(n,i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:i}=this.beans;switch(e.key){case G.LEFT:t="LEFT";case G.RIGHT:{fe(t)||(t="RIGHT"),i.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case G.UP:t="UP";case G.DOWN:{fe(t)||(t="DOWN"),i.navigateVertically(t,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:i,beans:s}=this;!t&&i.contains(Wt(s))||i.contains(t)||(s.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,i){var r;const{menuSvc:s,ctrlsSvc:n}=this.beans;if(!e&&!i||!(s!=null&&s.isHeaderContextMenuEnabled()))return;const{target:o}=e??t;(o===this.eGui||o===((r=n.getHeaderRowContainerCtrl())==null?void 0:r.eViewport))&&s.showHeaderContextMenu(void 0,e,i)}},QS=class extends xt{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},Uz={tag:"div",cls:"ag-header-cell",role:"columnheader",children:[{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"},{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"}]},jz=class extends QS{constructor(e){super(Uz,e),this.eResize=he,this.eHeaderCompWrapper=he,this.headerCompVersion=0}postConstruct(){const e=this.getGui(),t=()=>{const s=this.ctrl.getSelectAllGui();s&&(this.eResize.insertAdjacentElement("afterend",s),this.addDestroyFunc(()=>s.remove()))},i={setWidth:s=>e.style.width=s,toggleCss:(s,n)=>this.toggleCss(s,n),setUserStyles:s=>gp(e,s),setAriaSort:s=>s?aH(e,s):lH(e),setUserCompDetails:s=>this.setUserCompDetails(s),getUserCompInstance:()=>this.headerComp,refreshSelectAllGui:t,removeSelectAllGui:()=>{var s;return(s=this.ctrl.getSelectAllGui())==null?void 0:s.remove()}};this.ctrl.setComp(i,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0),t()}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){var e;this.headerComp&&((e=this.headerCompGui)==null||e.remove(),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const t=this.headerCompVersion;e.newAgStackInstance().then(i=>this.afterCompCreated(t,i))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},Kz={tag:"div",cls:"ag-header-group-cell",role:"columnheader",children:[{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"},{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"}]},qz=class extends QS{constructor(e){super(Kz,e),this.eResize=he,this.eHeaderCompWrapper=he}postConstruct(){const e=this.getGui(),t=(s,n)=>n!=null?e.setAttribute(s,n):e.removeAttribute(s),i={toggleCss:(s,n)=>this.toggleCss(s,n),setUserStyles:s=>gp(e,s),setHeaderWrapperHidden:s=>{s?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:s=>{s!=null?this.eHeaderCompWrapper.style.setProperty("max-height",`${s}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",s!=null)},setResizableDisplayed:s=>Ot(this.eResize,s),setWidth:s=>e.style.width=s,setAriaExpanded:s=>t("aria-expanded",s),setUserCompDetails:s=>this.setUserCompDetails(s),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(i,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){const t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}const i=this.getGui(),s=e.getGui();this.eHeaderCompWrapper.appendChild(s),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(i)}},Yz={tag:"div",cls:"ag-header-cell ag-floating-filter",role:"gridcell",children:[{tag:"div",ref:"eFloatingFilterBody",role:"presentation"},{tag:"div",ref:"eButtonWrapper",cls:"ag-floating-filter-button ag-hidden",role:"presentation",children:[{tag:"button",ref:"eButtonShowMainFilter",cls:"ag-button ag-floating-filter-button-button",attrs:{type:"button",tabindex:"-1"}}]}]},Xz=class extends QS{constructor(e){super(Yz,e),this.eFloatingFilterBody=he,this.eButtonWrapper=he,this.eButtonShowMainFilter=he}postConstruct(){const e=this.getGui(),t={toggleCss:(i,s)=>this.toggleCss(i,s),setUserStyles:i=>gp(e,i),addOrRemoveBodyCssClass:(i,s)=>this.eFloatingFilterBody.classList.toggle(i,s),setButtonWrapperDisplayed:i=>Ot(this.eButtonWrapper,i),setCompDetails:i=>this.setCompDetails(i),getFloatingFilterComp:()=>this.compPromise,setWidth:i=>e.style.width=i,setMenuIcon:i=>this.eButtonShowMainFilter.appendChild(i)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.floatingFilterComp.getGui().remove(),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},Qz=class extends xt{constructor(e){super({tag:"div",cls:e.headerRowClass,role:"row"}),this.ctrl=e,this.headerComps={}}postConstruct(){this.getGui().setAttribute("tabindex",String(this.gos.get("tabIndex"))),Ym(this.getGui(),this.ctrl.getAriaRowIndex());const t={setHeight:i=>this.getGui().style.height=i,setTop:i=>this.getGui().style.top=i,setHeaderCtrls:(i,s)=>this.setHeaderCtrls(i,s),setWidth:i=>this.getGui().style.width=i,setRowIndex:i=>Ym(this.getGui(),i)};this.ctrl.setComp(t,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;const i=this.headerComps;this.headerComps={};for(const s of e){const n=s.instanceId;let o=i[n];delete i[n],o==null&&(o=this.createHeaderComp(s),this.getGui().appendChild(o.getGui())),this.headerComps[n]=o}if(Object.values(i).forEach(s=>{s.getGui().remove(),this.destroyBean(s)}),t){const s=Object.values(this.headerComps);s.sort((o,r)=>{const a=o.getCtrl().column.getLeft(),l=r.getCtrl().column.getLeft();return a-l});const n=s.map(o=>o.getGui());UP(this.getGui(),n)}}createHeaderComp(e){let t;switch(this.ctrl.type){case"group":t=new qz(e);break;case"filter":t=new Xz(e);break;default:t=new jz(e);break}return this.createBean(t),t.setParentComponent(this),t}},JS=class extends V{constructor(e,t,i,s){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=s,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?Mt(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,i=e.get("suppressColumnMoveAnimation"),s=fe(this.columnOrGroup.getOldLeft());(t==null?void 0:t.isActive())&&s&&!i?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),i=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=i,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===i&&this.setLeft(i)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:i,visibleCols:s}=this.beans;if(!$i(i,"print")||e.getPinned()==="left")return t;const o=s.getColsLeftWidth();if(e.getPinned()==="right"){const r=s.bodyWidth;return o+r+t}return o+t}setLeft(e){if(fe(e)&&(this.eCell.style.left=`${e}px`),ni(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&rH(this.ariaEl,t.length)}}},Jz=0,vD="headerCtrl",ZS=class extends V{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=e.getUniqueId()+"-"+Jz++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}setComp(e,t,i,s,n){t.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(e,t,i,s,n),this.reAttemptToFocus&&(this.reAttemptToFocus=!1,this.focus(this.lastFocusEvent??void 0))}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.beans.focusSvc.focusedHeader,s=i.getDefinition(),n=s==null?void 0:s.suppressHeaderKeyboardEvent;if(!fe(n))return!1;const o=Le(this.gos,{colDef:s,column:i,headerRowIndex:t,event:e});return!!n(o)}getWrapperHasFocus(){return Wt(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let i;if(typeof t=="function"){const s=this.getHeaderClassParams();i=t(s)}else i=t;i&&this.comp.setUserStyles(i)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:i,compBean:s}=e,{beans:n}=this,o=h=>{if(!this.isAlive()||!s.isAlive())return;const{paddingTop:u,paddingBottom:f,borderBottomWidth:p,borderTopWidth:m}=rd(this.eGui),v=u+f+p+m,w=t.offsetHeight+v;if(h<5){const S=Pi(n),y=!(S!=null&&S.contains(t)),R=w==0;if(y||R){ry(()=>o(h+1),"raf",n);return}}this.setColHeaderHeight(this.column,w)};let r=!1,a;const l=()=>{const h=this.column.isAutoHeaderHeight();h&&!r&&c(),!h&&r&&d()},c=()=>{r=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),o(0),a=ll(this.beans,t,()=>o(0))},d=()=>{r=!1,a&&a(),this.comp.toggleCss("ag-header-cell-auto-height",!1),a=void 0};l(),s.addDestroyFunc(()=>d()),s.addManagedListeners(this.column,{widthChanged:()=>r&&o(0)}),s.addManagedEventListeners({sortChanged:()=>{r&&window.setTimeout(()=>o(0))}}),i&&i(l)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:i,eGui:s}=this;!e||!t||!s||(fD(e,t,i.visibleCols),HP(s,i.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=Hc(this.beans);this.eGui&&$s(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){var o;const t=Wt(this.beans),i=e.key===G.LEFT||e.key===G.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),!i))return;const n=e.key===G.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const r=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(r,e.shiftKey),(o=this.resizeFeature)==null||o.toggleColumnResizing(!0)}else this.moveHeader(n)}moveHeader(e){var t;(t=this.beans.colMoves)==null||t.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:i}=this.beans;return i?i.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:i}=this;let s=e.key===G.LEFT!==t.get("enableRtl");const n=i.getPinned(),o=t.get("enableRtl");return n&&o!==(n==="right")&&(s=!s),(s?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var e;(e=this.resizeFeature)==null||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case G.PAGE_DOWN:case G.PAGE_UP:case G.PAGE_HOME:case G.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=vD,{eGui:i,gos:s}=this;Kc(s,i,t,this),e.addDestroyFunc(()=>Kc(s,i,t,null))}focus(e){if(!this.isAlive())return!1;const{eGui:t}=this;return t?(t.focus(),this.lastFocusEvent=e||null):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){var e;this.dragSource&&((e=this.beans.dragAndDrop)==null||e.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){const s=e??t,{menuSvc:n,gos:o}=this.beans;o.get("preventDefaultOnContextMenu")&&s.preventDefault(),n!=null&&n.isHeaderContextMenuEnabled(i)&&n.showHeaderContextMenu(i,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:i}=this;e.isColumn?i.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):i.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},Zz=class extends ZS{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(e,t,i,s,n){this.comp=e;const{rowCtrl:o,column:r,beans:a}=this,{colResize:l,context:c,colHover:d,rangeSvc:h}=a,u=pp(this,c,n);this.setGui(t,u),this.updateState(),this.setupWidth(u),this.setupMovingCss(u),this.setupMenuClass(u),this.setupSortableClass(u),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:s,checkMeasuringCallback:p=>this.setRefreshFunction("measuring",p),compBean:u}),this.addColumnHoverListener(u),this.setupFilterClass(u),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(u),this.setupSelectAll(u),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=u.createManagedBean(l.createResizeFeature(o.pinned,r,i,e,this)):Ot(i,!1),d==null||d.createHoverFeature(u,[r],t),h==null||h.createRangeHighlightFeature(u,r,e),u.createManagedBean(new JS(r,t,a)),u.createManagedBean(new Cu(t,{shouldStopEventPropagation:p=>this.shouldStopEventPropagation(p),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(u),u.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),u.addManagedListeners(r,{colDefChanged:()=>this.refresh()}),u.addManagedListeners(r,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const f=()=>this.checkDisplayName();u.addManagedEventListeners({columnValueChanged:f,columnRowGroupChanged:f,columnPivotChanged:f,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),u.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){var i;(i=this.beans.colResize)==null||i.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return Le(t.gos,{colDef:i,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return eB(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:i,gos:s}=this.beans;return Le(s,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!(e!=null&&e.isHeaderFilterButtonEnabled(this.column)),enableFilterIcon:!!i&&(!this.openFilterEnabled||Us(this.gos)),showColumnMenu:(o,r)=>{e==null||e.showColumnMenu({column:this.column,buttonElement:o,positionBy:"button",onClosedCallback:r})},showColumnMenuAfterMouseClick:(o,r)=>{e==null||e.showColumnMenu({column:this.column,mouseEvent:o,positionBy:"mouse",onClosedCallback:r})},showFilter:o=>{e==null||e.showFilterMenu({column:this.column,buttonElement:o,containerType:"columnFilter",positionBy:"button"})},progressSort:o=>{t==null||t.progressSort(this.column,!!o,"uiColumnSorted")},setSort:(o,r)=>{t==null||t.setSortForColumn(this.column,o,!!r,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(o,r)=>{s.assertModuleRegistered("Tooltip",3),this.setupTooltip(o,r)}})}setupSelectAll(e){var i;const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createOptionalManagedBean(t.createSelectAllFeature(this.column)),(i=this.selectAllFeature)==null||i.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{var n;const s=t.createSelectAllFeature(this.column);s&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(s),(n=this.selectAllFeature)==null||n.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!s&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){var e;return(e=this.selectAllFeature)==null?void 0:e.getCheckboxGui()}handleKeyDown(e){var t;super.handleKeyDown(e),e.key===G.SPACE&&((t=this.selectAllFeature)==null||t.onSpaceKeyDown(e)),e.key===G.ENTER&&this.onEnterKeyDown(e),e.key===G.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){var t;e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&((t=this.beans.sortSvc)==null||t.progressSort(this.column,e.shiftKey,"uiColumnSorted"))}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();Yx(i)&&i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),RB()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){var i;this.tooltipFeature=(i=this.beans.tooltipSvc)==null?void 0:i.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),i=gD(t,this.gos,this.column,null),s=this.userHeaderClasses;this.userHeaderClasses=new Set(i);for(const n of i)s.has(n)?s.delete(n):this.comp.toggleCss(n,!0);for(const n of s)this.comp.toggleCss(n,!1)};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){var t;this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=((t=this.beans.colMoves)==null?void 0:t.setDragSourceForHeader(e,this.column,this.displayName))??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!(e!=null&&e.isColumnMenuInHeaderEnabled(this.column)),this.openFilterEnabled=!!(e!=null&&e.isFilterMenuInHeaderEnabled(this.column)),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria();for(const e of Object.values(this.refreshFunctions))e()}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const i=this.column.getActualWidth();this.comp.setWidth(`${i}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{var i;(i=this.comp)==null||i.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const i=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",i),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,i=e===1;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){var u;const{eGui:e,column:t,comp:i,beans:s}=this,n=YS(this.beans),o=n.reduce((f,p)=>f+p,0)===0;if(i.toggleCss("ag-header-parent-hidden",o),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),i.toggleCss("ag-header-span-height",!1),i.toggleCss("ag-header-span-total",!1);return}const{numberOfParents:r,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();i.toggleCss("ag-header-span-height",r>0);const l=XS(s);if(r===0){i.toggleCss("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${l}px`);return}i.toggleCss("ag-header-span-total",a);const c=(((u=this.column.getFirstRealParent())==null?void 0:u.getLevel())??-1)+1,d=n.length-c;let h=0;for(let f=0;f<d;f++)h+=n[n.length-1-f];e.style.setProperty("top",`${-h}px`),e.style.setProperty("height",`${l+h}px`)}refreshAriaSort(){var e;if(this.sortable){const t=this.getLocaleTextFunc(),i=((e=this.beans.sortSvc)==null?void 0:e.getDisplaySortForColumn(this.column))||null;this.comp.setAriaSort(qN(i)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!Us(this.gos)){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){var t;if(!this.eGui.contains(Wt(this.beans)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((i,s)=>i==="filter"?-1:s.charCodeAt(0)-i.charCodeAt(0)).map(i=>this.ariaDescriptionProperties.get(i)).join(". ");(t=this.beans.ariaAnnounce)==null||t.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){var t;(t=this.beans.colHover)==null||t.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=n=>this.handleMouseOverChange(n.type==="mouseenter"),i=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},s=n=>this.handleContextMenuMouseEvent(n,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:i,contextmenu:s})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return Yx(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function Yx(e){return typeof(e==null?void 0:e.getAnchorElementForMenu)=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var eW=0,ew=class extends V{constructor(e,t,i){super(),this.rowIndex=e,this.pinned=t,this.type=i,this.instanceId=eW++,this.comp=null,this.allCtrls=[];let s="ag-header-row-column";i==="group"?s="ag-header-row-group":i==="filter"&&(s="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${s}`}setRowIndex(e){var t;this.rowIndex=e,(t=this.comp)==null||t.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=$i(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(e=>e.eGui!=null):!1}setComp(e,t,i=!0){this.comp=e,t=pp(this,this.beans.context,t),i&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),i=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:i,virtualColumnsChanged:s=>this.onVirtualColumnsChanged(s.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",i),e.addManagedPropertyListener("ensureDomOrder",s=>this.isEnsureDomOrder=s.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=$i(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0;const t=YS(this.beans);for(let n=0;n<t.length;n++){if(n===this.rowIndex&&this.type==="group")return{topOffset:e,rowHeight:t[n]};e+=t[n]}const i=XS(this.beans);if(this.type==="column")return{topOffset:e,rowHeight:i};e+=i;const s=pD(this.beans);return{topOffset:e,rowHeight:s}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;const t=this.getUpdatedHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const s of t)this.recycleAndCreateHeaderCtrls(s,this.ctrlsById,e);const i=s=>{const{focusSvc:n,visibleCols:o}=this.beans;return n.isHeaderWrapperFocused(s)?o.isVisible(s.column):!1};if(e)for(const[s,n]of e)i(n)?this.ctrlsById.set(s,n):this.destroyBean(n);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,i){if(e.isEmptyGroup())return;const s=e.getUniqueId();let n;if(i&&(n=i.get(s),i.delete(s)),n&&n.column!=e&&(this.destroyBean(n),n=void 0),n==null)switch(this.type){case"filter":{n=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":n=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:n=this.createBean(new Zz(e,this));break}t.set(s,n)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const e=[];for(const t of["left",null,"right"])e.push(...this.getComponentsToRender(t));return e}getComponentsToRender(e=this.pinned){return this.type==="group"?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){const i=this.allCtrls.find(n=>n.column==e);return i?i.focus(t):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},tW=class extends V{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:i,ctrlsSvc:s,colModel:n,colMoves:o}=this.beans;this.setupCenterWidth(),i==null||i.setupHeaderPinnedWidth(this),this.setupDragAndDrop(o,this.eViewport);const r=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:r,advancedFilterEnabledChanged:r});const a=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;s.register(a,this),n.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,filterManager:i,visibleCols:s}=this.beans;let n=0;const o=t.getFocusHeaderToUseAfterRefresh(),r=()=>{const h=s.headerGroupRowCount;n=h,e||(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls));const u=this.groupsRowCtrls.length;if(u!==h){if(u>h){for(let f=h;f<u;f++)this.destroyBean(this.groupsRowCtrls[f]);this.groupsRowCtrls.length=h;return}for(let f=u;f<h;f++){const p=this.createBean(new ew(f,this.pinned,"group"));this.groupsRowCtrls.push(p)}}},a=()=>{const h=n++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}this.columnsRowCtrl==null||!e?(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new ew(h,this.pinned,"column"))):this.columnsRowCtrl.rowIndex!==h&&this.columnsRowCtrl.setRowIndex(h)},l=()=>{this.includeFloatingFilter=!!(i!=null&&i.hasFloatingFilters())&&!this.hidden;const h=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){h();return}e||h();const u=n++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==u&&this.filtersRowCtrl.setRowIndex(u):this.filtersRowCtrl=this.createBean(new ew(u,this.pinned,"filter"))},c=this.getAllCtrls();r(),a(),l();const d=this.getAllCtrls();this.comp.setCtrls(d),this.restoreFocusOnHeader(t,o),c.length!==d.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){const t=i=>i==null?void 0:i.getHeaderCellCtrls().find(s=>s.column===e);if(il(e))return t(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let i=0;i<this.groupsRowCtrls.length;i++){const s=t(this.groupsRowCtrls[i]);if(s)return s}}getHtmlElementForColumnHeader(e){var t;return((t=this.getHeaderCtrlForColumn(e))==null?void 0:t.eGui)??null}getRowType(e){var t;return(t=this.getAllCtrls()[e])==null?void 0:t.type}focusHeader(e,t,i){const n=this.getAllCtrls()[e];return n?n.focusHeader(t,i):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const i=e==null?void 0:e.createBodyDropTarget(this.pinned,t);i&&this.createManagedBean(i)}restoreFocusOnHeader(e,t){if(!t)return;const{column:i}=t;i.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t,scroll:!1})}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new KS(e=>this.comp.setCenterWidth(`${e}px`),!0))}},iW=class extends V{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(Qx(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,i){var s;(s=this.activeMenuFactory)==null||s.showMenuAfterContextMenuEvent(e,t,i)}hidePopupMenu(){var e,t;(e=this.beans.contextMenuSvc)==null||e.hideActiveMenu(),(t=this.activeMenuFactory)==null||t.hideActiveMenu()}hideFilterMenu(){var e;(e=Qx(this.beans))==null||e.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){var i;const{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!((i=this.activeMenuFactory)!=null&&i.isMenuEnabled(e))&&(Us(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!!((t=this.beans.filterManager)!=null&&t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&il(e)?e.getColDef():e==null?void 0:e.getColGroupDef();return!(t!=null&&t.suppressHeaderContextMenu)&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Nc()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!Us(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!!((t=this.beans.filterManager)!=null&&t.isFilterAllowed(e))&&!Us(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return Us(e)?e.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(e,t,i,s){const{positionBy:n,onClosedCallback:o}=t,r=t.column;if(n==="button"){const{buttonElement:a}=t;e==null||e.showMenuAfterButtonClick(r,a,i,o,s)}else if(n==="mouse"){const{mouseEvent:a}=t;e==null||e.showMenuAfterMouseEvent(r,a,i,o,s)}else if(r){const a=this.beans,l=a.ctrlsSvc;l.getScrollFeature().ensureColumnVisible(r,"auto"),Xr(a,()=>{var d;const c=(d=l.getHeaderRowContainerCtrl(r.getPinned()))==null?void 0:d.getHeaderCtrlForColumn(r);c&&(e==null||e.showMenuAfterButtonClick(r,c.getAnchorElementForMenu(s),i,o,s))})}}};function Xx(e,t,i){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",i))}function Qx(e){const{enterpriseMenuFactory:t,filterMenuFactory:i,gos:s}=e;return t&&Us(s)?t:i}var hC=class extends LS{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange(()=>e.validate())}destroy(){this.errorMessages=null}},CD=class extends xt{constructor(){super()}},sW={tag:"span",cls:"ag-overlay-loading-center"},nW=class extends CD{init(){var t;const e=Lr((t=this.gos.get("overlayLoadingTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??sW),!e){const s=this.getLocaleTextFunc()("loadingOoo","Loading...");this.getGui().textContent=s,this.beans.ariaAnnounce.announceValue(s,"overlay")}}},oW={tag:"span",cls:"ag-overlay-no-rows-center"},rW=class extends CD{init(){var t;const e=Lr((t=this.gos.get("overlayNoRowsTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??oW),!e){const s=this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=s,this.beans.ariaAnnounce.announceValue(s,"overlay")}}};function aW(e,t,i){const s=fn(e,t,i);if(s){const{className:o}=s;if(typeof o=="string"&&o.includes("ag-icon")||typeof o=="object"&&o["ag-icon"])return s}const n=ri({tag:"span"});return n.appendChild(s),n}function fn(e,t,i){var o;let s=null;e==="smallDown"?J(262):e==="smallLeft"?J(263):e==="smallRight"&&J(264);const n=i==null?void 0:i.getColDef().icons;if(n&&(s=n[e]),t.gos&&!s){const r=t.gos.get("icons");r&&(s=r[e])}if(s){let r;if(typeof s=="function")r=s();else if(typeof s=="string")r=s;else{J(38,{iconName:e});return}if(typeof r=="string")return xS(r);if(AS(r))return r;J(133,{iconName:e});return}else{const r=t.registry.getIcon(e);return r||(o=t.validation)==null||o.validateIcon(e),ri({tag:"span",cls:`ag-icon ag-icon-${r??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var lW=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}",cW={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},dW=class extends xt{constructor(){super(),this.dragSource=null,this.eIcon=he,this.eLabel=he,this.eGhost=he,this.registerCSS(lW)}postConstruct(){const e=t=>aW(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(cW),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eGhost:i,eIcon:s,dragSource:n,dropIconMap:o,gos:r}=this;Wi(s);let a=null;e||(e=n!=null&&n.getDefaultIconName?n.getDefaultIconName():"notAllowed"),a=o[e],i.classList.toggle("ag-dnd-ghost-not-allowed",e==="notAllowed"),s.classList.toggle("ag-shake-left-to-right",t),!(a===o.hide&&r.get("suppressDragLeaveHidesColumns"))&&a&&s.appendChild(a)}setLabel(e){this.eLabel.textContent=e}},hW=".ag-checkbox-cell{height:100%}",uW={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},gW=class extends xt{constructor(){super(uW,[HS]),this.eCheckbox=he,this.registerCSS(hW)}init(e){this.refresh(e);const{eCheckbox:t,beans:i}=this,s=t.getInputElement();s.setAttribute("tabindex","-1"),OP(s,"polite"),this.addManagedListeners(s,{click:n=>{if(Yc(n),t.isDisabled())return;const o=t.getValue();this.onCheckboxChanged(o)},dblclick:n=>{Yc(n)}}),this.addManagedElementListeners(e.eGridCell,{keydown:n=>{if(n.key===G.SPACE&&!t.isDisabled()){e.eGridCell===Wt(i)&&t.toggle();const o=t.getValue();this.onCheckboxChanged(o),n.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,i=!0;const{value:s,column:n,node:o}=e;if(o.group&&n)if(typeof s=="boolean")t=s;else{const h=n.getColId();h.startsWith(rC)?t=s==null||s===""?void 0:s==="true":o.aggData&&o.aggData[h]!==void 0||o.sourceRowIndex>=0?t=s??void 0:i=!1}else t=s??void 0;const{eCheckbox:r}=this;if(!i){r.setDisplayed(!1);return}r.setValue(t);const a=e.disabled??!(n!=null&&n.isCellEditable(o));r.setDisabled(a);const l=this.getLocaleTextFunc(),c=oC(l,t),d=a?c:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${c})`;r.setInputAriaLabel(d)}onCheckboxChanged(e){var r,a,l,c;const{params:t}=this,{column:i,node:s,value:n}=t;(a=(r=this.beans)==null?void 0:r.editSvc)==null||a.setEditingCells([{column:i,colId:i.getColId(),rowIndex:s.rowIndex,rowPinned:s.rowPinned,state:"changed",oldValue:n,newValue:n}],{update:!0,forceRefreshOfEditCellsOnly:!0});const o=s.setDataValue(i,e,"renderer");(c=this.beans.editSvc)==null||c.stopEditing({rowNode:s,column:i},{source:(l=this.beans.editSvc)!=null&&l.isBatchEditing()?"ui":"api"}),o||this.updateCheckbox(t)}},Jx=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){const{all:t,visible:i,order:s}=this;t.has(e)||(t.add(e),i.add(e),s.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),Qn(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(const t of this.visible)if(t.id==e)return t}clear(){const{all:e,visible:t,order:i,queued:s}=this;e.clear(),s.clear(),t.clear(),i.length=0}sort(){const{sortSvc:e,rowNodeSorter:t,gos:i}=this.beans,s=(e==null?void 0:e.getSortOptions())??[],n=mW(this.order);if(this.order.sort((r,a)=>{var l,c;return(((l=r.pinnedSibling)==null?void 0:l.rowIndex)??0)-(((c=a.pinnedSibling)==null?void 0:c.rowIndex)??0)}),this.order=(t==null?void 0:t.doFullSort(this.order,s))??this.order,!n)return;const o=cT(i);o==="bottom"||o==="pinnedBottom"?this.order.push(n):this.order.unshift(n)}hide(e){const{all:t,visible:i}=this;t.forEach(s=>e(s)?i.delete(s):i.add(s)),this.order=Array.from(i),this.sort()}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function wD(e){var i;if(e.level===-1)return!0;const t=e.parent;return(i=t==null?void 0:t.childrenAfterSort)!=null&&i.some(s=>s==e)?wD(t):!1}function tw(e,t){const{gos:i,rowModel:s,filterManager:n}=e;return vu(i)?!s.getRowNode(t.id):n!=null&&n.isAnyFilterPresent()?!wD(t):i.get("pivotMode")?!t.group:!1}function fW(e){return!!e.footer&&e.level===-1}function pW(e){return!!e.pinnedSibling&&fW(e.pinnedSibling)}function mW(e){var i;const t=e.findIndex(pW);if(t>-1)return(i=e.splice(t,1))==null?void 0:i[0]}var Zx=class extends V{postConstruct(){const{gos:e,beans:t}=this;this.top=new Jx(t,"top"),this.bottom=new Jx(t,"bottom");const i=n=>tw(t,n.pinnedSibling),s=()=>{const n=e.get("isRowPinned");n&&e.get("enableRowPinning")&&t.rowModel.forEachNode(o=>this.pinRow(o,n(o)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:({keepRenderedRows:n})=>{this.tryToEmptyQueues(),this.pinGrandTotalRow(),this.forContainers(r=>r.hide(i));const o=this.refreshRowPositions();(!n||o)&&this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(CW),this.refreshRowPositions()},rowNodeDataChanged:({node:n})=>{const o=e.get("isRowPinnable");((o==null?void 0:o(n))??!0)||this.pinRow(n,null)},firstDataRendered:s}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(n=>n.hide(i)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",({currentValue:n})=>{this._grandTotalPinned=n==="pinnedBottom"?"bottom":n==="pinnedTop"?"top":null}),this.addManagedPropertyListener("isRowPinned",s)}destroy(){this.reset(!1),super.destroy()}reset(e=!0){this.forContainers(t=>{const i=[];t.forEach(s=>i.push(s)),i.forEach(s=>this.pinRow(s,null)),t.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,i){var r;if(e.footer&&e.level>-1)return;if(e.footer&&e.level===-1){this._grandTotalPinned=t,bW(this.beans);return}const s=e.rowPinned??((r=e.pinnedSibling)==null?void 0:r.rowPinned);if(s!=null&&t!=null&&t!=s){const a=e.rowPinned?e:e.pinnedSibling,l=e.rowPinned?e.pinnedSibling:e;this.pinRow(a,null,i),this.pinRow(l,t,i);return}const o=i&&wW(this.beans,e,i);if(o){o.forEach(a=>this.pinRow(a,t));return}if(t==null){const a=e.rowPinned?e:e.pinnedSibling,l=this.findPinnedRowNode(a);if(!l)return;l.delete(a);const c=a.pinnedSibling;iw(a),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(c)}else{const a=eR(this.beans,e,t),l=this.getContainer(t);l.add(a),tw(this.beans,e)&&l.hide(c=>tw(this.beans,c.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return this.getContainer(e).size()===0}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0;const i=s=>{if(s.rowHeightEstimated){const n=tl(this.beans,s);s.setRowTop(t),s.setRowHeight(n.height),t+=n.height,e=!0}};return this.bottom.forEach(i),t=0,this.top.forEach(i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){return tR(this.top)}getPinnedBottomTotalHeight(){return tR(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){const e=t=>{const i=[];return this.forEachPinnedRow(t,s=>i.push(s.pinnedSibling.id)),i};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers((t,i)=>{for(const s of e[i]){const n=this.beans.rowModel.getRowNode(s);n?this.pinRow(n,i):t.queue(s)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{const i=new Set;e.forEachQueued(s=>{const n=this.beans.rowModel.getRowNode(s);n&&i.add(n)});for(const s of i)e.unqueue(s.id),this.pinRow(s,t)})}pinGrandTotalRow(){var a;const{gos:e,beans:t,_grandTotalPinned:i}=this,s=t.rowModel;if(!oi(e))return;const n=(a=s.rootNode)==null?void 0:a.sibling;if(!n)return;const o=n.pinnedSibling,r=o&&this.findPinnedRowNode(o);if(i){if(r&&r.floating!==i&&(r.delete(o),iw(o)),!r||r.floating!==i){const l=eR(t,n,i);this.getContainer(i).add(l)}}else{if(!r)return;r.delete(o),iw(o)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers(t=>t.forEach(i=>i.setRowHeight(i.rowHeight,!0)))}getContainer(e){return e==="top"?this.top:this.bottom}findPinnedRowNode(e){if(this.top.has(e))return this.top;if(this.bottom.has(e))return this.bottom}refreshRowPositions(e){const t=s=>vW(this.beans,s);if(e)return t(this.getContainer(e));let i=!1;return this.forContainers(s=>{const n=t(s);i||(i=n)}),i}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),e==null||e.dispatchRowEvent("rowPinned")}};function vW(e,t){let i=0,s=!1;return t.forEach((n,o)=>{if(s||(s=n.rowTop!==i),n.setRowTop(i),n.rowHeightEstimated||n.rowHeight==null){const r=tl(e,n).height;s||(s=n.rowHeight!==r),n.setRowHeight(r)}n.setRowIndex(o),i+=n.rowHeight}),s}function eR(e,t,i){if(t.pinnedSibling)return t.pinnedSibling;const s=_V(t,e);s.setRowTop(null),s.setRowIndex(null),s.rowPinned=i;const n=i==="top"?WS:$S;return s.id=`${n}${i}-${t.id}`,s.pinnedSibling=t,t.pinnedSibling=s,s}function iw(e){if(!e.pinnedSibling)return;e.rowPinned=null,e.setRowTop(null),e.setRowIndex(null);const t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function CW(e){const t=new Set;e.forEach(i=>{i.group&&t.add(i)}),t.forEach(i=>e.delete(i))}function wW(e,t,i){var o;const{rowSpanSvc:s}=e,n=(i&&(s==null?void 0:s.isCellSpanning(i,t)))??!1;if(i&&n)return(o=s==null?void 0:s.getCellSpan(i,t))==null?void 0:o.spannedNodes}function tR(e){const t=e.size();if(t===0)return 0;const i=e.getByIndex(t-1);return i===void 0?0:i.rowTop+i.rowHeight}function bW({gos:e,rowModel:t}){oi(e)&&t.refreshModel({step:"map"})}var iR=class extends V{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",t=>this.setPinnedRowData(t.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",t=>this.setPinnedRowData(t.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return this.getCache(e).order.length===0}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){const t=i=>{i.setRowHeight(i.rowHeight,!0)};Pu(this.pinnedBottomRows,t),Pu(this.pinnedTopRows,t)}}ensureRowHeightsValid(){let e=!1,t=0;const i=s=>{if(s.rowHeightEstimated){const n=tl(this.beans,s);s.setRowTop(t),s.setRowHeight(n.height),t+=n.height,e=!0}};return Pu(this.pinnedBottomRows,i),t=0,Pu(this.pinnedTopRows,i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){var d;const i=this.getCache(t);if(e===void 0){i.order.length=0,i.cache={};return}const s=nu(this.gos),n=t==="top"?WS:$S,o=new Set(i.order),r=[],a=new Set;let l=0,c=-1;for(const h of e){const u=(s==null?void 0:s({data:h,level:0,rowPinned:t}))??n+this.nextId++;if(a.has(u)){J(96,{id:u,data:h});continue}c++,a.add(u),r.push(u);const f=hg(i,u);if(f!==void 0)f.data!==h&&f.updateData(h),l+=this.setRowTopAndRowIndex(f,l,c),o.delete(u);else{const p=new sl(this.beans);p.id=u,p.data=h,p.rowPinned=t,l+=this.setRowTopAndRowIndex(p,l,c),i.cache[u]=p,i.order.push(u)}}for(const h of o)(d=hg(i,h))==null||d.clearRowTopAndRowIndex(),delete i.cache[h];i.order=r}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(tl(this.beans,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return sR(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return sR(this.pinnedBottomRows)}getPinnedTopRowCount(){return Ey(this.pinnedTopRows)}getPinnedBottomRowCount(){return Ey(this.pinnedBottomRows)}getPinnedTopRow(e){return Ry(this.pinnedTopRows,e)}getPinnedBottomRow(e){return Ry(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return hg(this.getCache(t),e)}forEachPinnedRow(e,t){return Pu(this.getCache(e),t)}getCache(e){return e==="top"?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function sR(e){const t=Ey(e);if(t===0)return 0;const i=Ry(e,t-1);return i===void 0?0:i.rowTop+i.rowHeight}function hg(e,t){return e.cache[t]}function Ry(e,t){return hg(e,e.order[t])}function Pu(e,t){e.order.forEach((i,s)=>{const n=hg(e,i);n&&t(n,s)})}function Ey(e){return e.order.length}var yW=class extends V{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){const{gos:e}=this,t=()=>{const i=e.get("enableRowPinning"),s=cT(e),o=!!i||(s==="pinnedBottom"||s==="pinnedTop"),r=o?this.inner instanceof iR:this.inner instanceof Zx;this.inner&&r&&this.destroyBean(this.inner),(r||!this.inner)&&(this.inner=this.createManagedBean(o?new Zx:new iR))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,i){return this.inner.pinRow(e,t,i)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}};function wp(e){return!!(e.rowPinned&&e.pinnedSibling)}function en(e,t,i,s){const n=t==="top";if(!i)return en(e,t,n?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),s);if(!s){const l=n?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return en(e,t,i,n?e.getPinnedTopRow(l-1):e.getPinnedBottomRow(l-1))}let o=!1,r=!1;const a=[];return e.forEachPinnedRow(t,l=>{if(l===i&&!o){o=!0,a.push(l);return}if(o&&l===s){r=!0,a.push(l);return}o&&!r&&a.push(l)}),a}var SW={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},xW=class extends xt{constructor(){super(SW,[HS]),this.eCheckbox=he}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:i}=this,s=t.isSelected(),n=oC(e,s),[o,r]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],a=e(o,r);i.setValue(s,!0),i.setInputAriaLabel(`${a} (${n})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:Yc,click:s=>{var n;Yc(s),(n=this.beans.selectionSvc)==null||n.handleSelectionEvent(s,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:s,previousValue:n})=>{const o=typeof s=="object"?HC(s):void 0,r=typeof n=="object"?HC(n):void 0;o!==r&&this.onSelectableChanged()}),hy(this.gos)||typeof this.getIsVisible()=="function"){const s=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:s}),this.addManagedListeners(this.rowNode,{dataChanged:s,cellChanged:s}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:i,gos:s}=this,n=t.selectable,o=this.getIsVisible();let r;if(typeof o=="function"){const h=i==null?void 0:i.callbackParams;if(!e)r=o({...h,node:t,data:t.data});else{const u=e.createColumnFunctionCallbackParams(t);r=o({...h,...u})}}else r=o??!1;const a=n&&!r||!n&&r,l=n||r,c=s.get("rowSelection"),d=c&&typeof c!="string"?!HC(c):!!(e!=null&&e.getColDef().showDisabledCheckboxes);this.setVisible(l&&(a?d:!0)),this.setDisplayed(l&&(a?d:!0)),l&&this.eCheckbox.setDisabled(a),i!=null&&i.removeHidden&&this.setDisplayed(l)}getIsVisible(){var i,s;const e=this.overrides;if(e)return e.isVisible;const t=this.gos.get("rowSelection");return t&&typeof t!="string"?Bd(t):(s=(i=this.column)==null?void 0:i.getColDef())==null?void 0:s.checkboxSelection}},RW=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.getNodesInRange(e,t)??[]}return this.cachedRange}isInRange(e){return this.rootId===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(e){if(this.rootId)return this.getRowNode(this.rootId);if(e)return this.setRoot(e),e}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t;const{rowModel:i,pinnedRowModel:s}=this;return t??(t=i.getRowNode(e)),s!=null&&s.isManual()&&(t??(t=s.getPinnedRowById(e,"top")),t??(t=s.getPinnedRowById(e,"bottom"))),t}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const i=t[0].id===this.rootId,s=t.findIndex(n=>n.id===e.id);if(s>-1){const n=t.slice(0,s),o=t.slice(s+1);return this.setEndRange(e),i?{keep:n,discard:o}:{keep:o,discard:n}}else return{keep:t,discard:[]}}extend(e,t=!1){const i=this.getRoot();if(i==null){const n=this.getRange().slice();return t&&e.depthFirstSearch(o=>!o.group&&n.push(o)),n.push(e),this.setRoot(e),{keep:n,discard:[]}}const s=this.getNodesInRange(i,e);if(!s)return this.setRoot(e),{keep:[e],discard:[]};if(s.find(n=>n.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const n=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:n}}}getNodesInRange(e,t){const{pinnedRowModel:i,rowModel:s}=this;if(!(i!=null&&i.isManual()))return s.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&!t.rowPinned)return en(i,"top",e,void 0).concat(s.getNodesInRangeForSelection(s.getRow(0),t)??[]);if(e.rowPinned==="bottom"&&!t.rowPinned){const n=en(i,"bottom",void 0,e),o=s.getRowCount(),r=s.getRow(o-1);return(s.getNodesInRangeForSelection(t,r)??[]).concat(n)}if(!e.rowPinned&&!t.rowPinned)return s.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&t.rowPinned==="top")return en(i,"top",e,t);if(e.rowPinned==="bottom"&&t.rowPinned==="top"){const n=en(i,"top",t,void 0),o=en(i,"bottom",void 0,e),r=s.getRow(0),a=s.getRow(s.getRowCount()-1);return n.concat(s.getNodesInRangeForSelection(r,a)??[]).concat(o)}if(!e.rowPinned&&t.rowPinned==="top")return en(i,"top",t,void 0).concat(s.getNodesInRangeForSelection(s.getRow(0),e)??[]);if(e.rowPinned==="top"&&t.rowPinned==="bottom"){const n=en(i,"top",e,void 0),o=en(i,"bottom",void 0,t),r=s.getRow(0),a=s.getRow(s.getRowCount()-1);return n.concat(s.getNodesInRangeForSelection(r,a)??[]).concat(o)}if(e.rowPinned==="bottom"&&t.rowPinned==="bottom")return en(i,"bottom",e,t);if(!e.rowPinned&&t.rowPinned==="bottom"){const n=en(i,"bottom",void 0,t),o=s.getRow(s.getRowCount());return(s.getNodesInRangeForSelection(e,o)??[]).concat(n)}return null}},EW=class extends V{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(Wt(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new NS);this.cbSelectAll=t,t.addCss("ag-header-select-all"),Za(t.getGui(),"presentation"),this.showOrHideSelectAll();const i=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:i,paginationChanged:i,modelUpdated:i}),this.addManagedPropertyListener("rowSelection",({currentValue:s,previousValue:n})=>{const o=r=>typeof r=="string"||!r||r.mode==="singleRow"?void 0:r.selectAll;o(s)!==o(n)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source==="uiColumnMoved")}showOrHideSelectAll(e=!1){const t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,i=this.cbSelectAll,s=t.getSelectAllState(e);i.setValue(s);const n=t.hasNodesToSelect(e);i.setDisabled(!n),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){const t=this.getLocaleTextFunc(),{headerCellCtrl:i,cbSelectAll:s,cbSelectAllVisible:n}=this,o=s.getValue(),r=oC(t,o),a=t("ariaRowSelectAll","Press Space to toggle all rows selection");i.setAriaDescriptionProperty("selectAll",n?`${a} (${r})`:null),s.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||i.announceAriaDescription()}checkSelectionType(e){return Tg(this.gos)?!0:(J(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:i}=this.beans;return oi(t)||vu(t)?!0:(J(129,{feature:e,rowModel:i.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let i="uiSelectAll";t==="currentPage"?i="uiSelectAllCurrentPage":t==="filtered"&&(i="uiSelectAllFiltered");const s={source:i,selectAll:t},n=this.beans.selectionSvc;e?n.selectAllRowNodes(s):n.deselectAllRowNodes(s)}isCheckboxSelection(){const{column:e,gos:t,beans:i}=this,o=typeof t.get("rowSelection")=="object"?"headerCheckbox":"headerCheckboxSelection";return bD(i,e)&&this.checkRightRowModelType(o)&&this.checkSelectionType(o)}getSelectAllMode(){const e=gT(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:i}=this.column.getColDef();return t?"currentPage":i?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function bD({gos:e,selectionColSvc:t},i){const s=e.get("rowSelection"),n=i.getColDef(),{headerCheckboxSelection:o}=n;let r=!1;if(typeof s=="object"){const l=Qr(i),c=kS(i);(iv(s)==="autoGroupColumn"&&c||l&&(t!=null&&t.isSelectionColumnEnabled()))&&(r=Tm(s))}else typeof o=="function"?r=o(Le(e,{column:i,colDef:n})):r=!!o;return r}var AW=class extends V{postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new RW(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{const i=hy(e);i!==this.isRowSelectable&&(this.isRowSelectable=i,this.updateSelectable())}),this.isRowSelectable=hy(e),this.addManagedEventListeners({cellValueChanged:i=>this.updateRowSelectable(i.node),rowNodeDataChanged:i=>this.updateRowSelectable(i.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new xW}createSelectAllFeature(e){if(bD(this.beans,e))return new EW(e)}isMultiSelect(){return Tg(this.gos)}onRowCtrlSelected(e,t,i){const s=!!e.rowNode.isSelected();e.forEachGui(i,n=>{n.rowComp.toggleCss("ag-row-selected",s);const o=n.element;GP(o,s),o.contains(Wt(this.beans))&&t(n)})}announceAriaRowSelection(e){var o,r;if(this.isRowSelectionBlocked(e))return;const t=e.isSelected(),i=(o=this.beans.editSvc)==null?void 0:o.isEditing({rowNode:e});if(!e.selectable||i)return;const n=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);(r=this.beans.ariaAnnounce)==null||r.announceValue(n,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!wp(e)||!Lc(this.gos)}updateRowSelectable(e,t){var s;const i=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:((s=this.isRowSelectable)==null?void 0:s.call(this,e))??!0;return this.setRowSelectable(e,i,t),i}setRowSelectable(e,t,i){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),i)return;if(Dg(this.gos)){const n=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:n??!1,source:"selectableChanged"});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){var s;let t=!1,i=!1;if(!((s=e.childrenAfterGroup)!=null&&s.length))return e.selectable?e.__selected:null;for(let n=0;n<e.childrenAfterGroup.length;n++){const o=e.childrenAfterGroup[n];let r=o.isSelected();if(!o.selectable){const a=this.calculateSelectedFromChildren(o);if(a===null)continue;r=a}switch(r){case!0:t=!0;break;case!1:i=!0;break;default:return}}if(!(t&&i))return t?!0:i?!1:e.selectable?e.__selected:null}selectRowNode(e,t,i,s="api"){const n=!e.selectable&&t,o=e.__selected===t;if(n||o)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const r=e.sibling;r&&r.footer&&r.__localEventService&&r.dispatchRowEvent("rowSelected");const a=e.pinnedSibling;return a!=null&&a.rowPinned&&a.__localEventService&&a.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent({...IV(e,this.gos,"rowSelected"),event:i||null,source:s}),!0}isCellCheckboxSelection(e,t){const i=this.gos.get("rowSelection");if(i&&typeof i!="string"){const s=Qr(e)&&Bd(i);return e.isColumnFunc(t,s)}else return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,i,s){const{gos:n,selectionCtx:o}=this,r=e.isSelected(),a=Dg(n),l=tG(n),c=iG(n),d=this.isMultiSelect(),h=s==="rowClicked";if(h&&!(l||c))return null;if(t&&i&&d){const u=o.getRoot();if(u)if(u.isSelected()){const f=o.isInRange(e)?o.truncate(e):o.extend(e,a);return{deselect:f.discard,select:f.keep,reset:!1}}else{const f=o.extend(e,a);return{select:[],deselect:f.keep,reset:!1}}else return null}else if(t&&d){const u=o.selectAll?this.beans.rowModel.getRow(0):void 0,f=o.getRoot(u),p=o.isInRange(e)?o.truncate(e):o.extend(e,a);return{select:p.keep,deselect:p.discard,reset:o.selectAll||!!(f&&!f.isSelected())}}else if(i){if(h){const u=!r;return u&&!l||!u&&!c?null:(o.setRoot(e),{node:e,newValue:u,clearSelection:!1})}return o.setRoot(e),{node:e,newValue:!r,clearSelection:!d}}else{o.setRoot(e);const u=sG(n),f=nv(n)==="filteredDescendants",p=h&&(!u||!l);if(f&&r===void 0&&oi(n))return{node:e,newValue:!1,checkFilteredNodes:!0,clearSelection:!d||p};if(h){const m=r?!u:l;return m===r&&!p||m&&!l||!m&&!c?null:{node:e,newValue:m,clearSelection:!d||p,keepDescendants:e.group&&a}}return{node:e,newValue:!r,clearSelection:!d||p}}}},sw={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},FW=class extends V{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:s,focusTrapActive:n,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:r,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:d,onTabKeyDown:h,handleKeyDown:u,isEmpty:f,eFocusableElement:p}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=s,this.providedFocusInnerElement=a,this.eFocusableElement=p,this.focusTrapActive=!!n,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!r,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=d,this.providedOnTabKeyDown=h,this.providedHandleKeyDown=u,this.providedIsEmpty=f}postConstruct(){this.createManagedBean(new Cu(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards();for(const e of[this.eTopGuard,this.eBottomGuard])this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():zd(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){var l;const t=Pi(this.beans),i=zd(t.body,null,!0),s=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(s===-1)return;let n,o;e?(n=0,o=s):(n=s+1,o=i.length);const r=i.slice(n,o),a=this.gos.get("tabIndex");r.sort((c,d)=>{const h=Number.parseInt(c.getAttribute("tabindex")||"0"),u=Number.parseInt(d.getAttribute("tabindex")||"0");return u===a?1:h===a?-1:h===0?1:u===0?-1:h-u}),(l=r[e?r.length-1:0])==null||l.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=zd(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return ld(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},PW=class extends V{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:s}=this,n=[t,i],o={setTabIndex:v=>{for(const C of n)v!=null?C.setAttribute("tabindex",v):C.removeAttribute("tabindex")}};this.addTabGuards(t,i);const{focusTrapActive:r=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:d,onTabKeyDown:h,shouldStopEventPropagation:u,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:m}=e;this.tabGuardCtrl=this.createManagedBean(new FW({comp:o,focusTrapActive:r,eTopGuard:t,eBottomGuard:i,eFocusableElement:s,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:d,onTabKeyDown:h,shouldStopEventPropagation:u,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:m}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=Pi(this.beans).createElement("div"),i=e==="top"?sw.TAB_GUARD_TOP:sw.TAB_GUARD_BOTTOM;return t.classList.add(sw.TAB_GUARD,i),Za(t,"presentation"),t}addTabGuards(e,t){const i=this.eFocusableElement;i.insertAdjacentElement("afterbegin",e),i.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];Wi(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){AS(t)||(t=t.getGui());const{eBottomGuard:s}=this;s?s.insertAdjacentElement("beforebegin",t):e(t,i)}destroy(){const{eTopGuard:e,eBottomGuard:t}=this;jn(e),jn(t),super.destroy()}},yD=class extends xt{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new PW(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},TW=500,DW=550,Wp,MW=e=>{if(!Wp)Wp=new WeakSet;else if(Wp.has(e))return!1;return Wp.add(e),!0},yl=class{constructor(e,t=!1){this.eElement=e,this.preventClick=t,this.startListener=null,this.handlers=[],this.eventSvc=void 0,this.touchStart=null,this.lastTapTime=null,this.longPressTimer=0,this.moved=!1}addEventListener(e,t){let i=this.eventSvc;if(!i){if(i===null)return;this.eventSvc=i=new jc;const s=this.onTouchStart.bind(this);this.startListener=s,this.eElement.addEventListener("touchstart",s,{passive:!0})}i.addEventListener(e,t)}removeEventListener(e,t){var i;(i=this.eventSvc)==null||i.removeEventListener(e,t)}onTouchStart(e){if(this.touchStart||!MW(e))return;const t=e.touches[0];this.touchStart=t;const i=this.handlers;if(!i.length){const s=this.eElement,n=s.ownerDocument,o=this.onTouchMove.bind(this),r=this.onTouchEnd.bind(this),a=this.onTouchCancel.bind(this),l={passive:!0},c={passive:!1};Am(i,[s,"touchmove",o,l],[n,"touchcancel",a,l],[n,"touchend",r,c],[n,"contextmenu",aa,c])}this.clearLongPress(),this.longPressTimer=window.setTimeout(()=>{var s;this.longPressTimer=0,this.touchStart===t&&!this.moved&&(this.moved=!0,(s=this.eventSvc)==null||s.dispatchEvent({type:"longTap",touchStart:t,touchEvent:e}))},DW)}onTouchMove(e){const{moved:t,touchStart:i}=this;if(!t&&i){const s=lg(i,e.touches);s&&!YP(s,i,4)&&(this.clearLongPress(),this.moved=!0)}}onTouchEnd(e){var i;const t=this.touchStart;!t||!lg(t,e.changedTouches)||(this.moved||((i=this.eventSvc)==null||i.dispatchEvent({type:"tap",touchStart:t}),this.checkDoubleTap(t)),this.preventClick&&aa(e),this.cancel())}onTouchCancel(e){const t=this.touchStart;!t||!lg(t,e.changedTouches)||(this.lastTapTime=null,this.cancel())}checkDoubleTap(e){var s;let t=Date.now();const i=this.lastTapTime;i&&t-i>TW&&((s=this.eventSvc)==null||s.dispatchEvent({type:"doubleTap",touchStart:e}),t=null),this.lastTapTime=t}cancel(){this.clearLongPress(),FS(this.handlers),this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer),this.longPressTimer=0,this.moved=!1}destroy(){const e=this.startListener;e&&(this.startListener=null,this.eElement.removeEventListener("touchstart",e)),this.cancel(),this.eElement=null,this.eventSvc=null}},IW=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.includes("x"),this.scrollVertically=e.scrollAxis.includes("y"),this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}get scrolling(){return this.tickingInterval!==null}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const s=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=e.clientX<s.left+n,this.tickRight=e.clientX>s.right-n,this.tickUp=e.clientY<s.top+n&&!i,this.tickDown=e.clientY>s.bottom-n&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},kW=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${JP}/${this.frameworkName}-data-grid`,$H(this.baseDocLink)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return this.baseDocLink+(e?"/"+e:"")}};function _W(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var LW=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],nR=Object.fromEntries(LW.map((e,t)=>[e,t]));function OW(e,t){const i=(e.beanName?nR[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,s=(t.beanName?nR[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return i-s}function NW(e,t){return(e==null?void 0:e.beanName)==="gridDestroySvc"?-1:(t==null?void 0:t.beanName)==="gridDestroySvc"?1:0}var HW={tag:"div",cls:"ag-pinned-left-header",role:"rowgroup"},GW={tag:"div",cls:"ag-pinned-right-header",role:"rowgroup"},BW={tag:"div",cls:"ag-header-viewport",role:"rowgroup",attrs:{tabindex:"-1"},children:[{tag:"div",ref:"eCenterContainer",cls:"ag-header-container",role:"presentation"}]},nw=class extends xt{constructor(e){super(),this.eCenterContainer=he,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();const e={setDisplayed:i=>this.setDisplayed(i),setCtrls:i=>this.setCtrls(i),setCenterWidth:i=>this.eCenterContainer.style.width=i,setViewportScrollLeft:i=>this.getGui().scrollLeft=i,setPinnedContainerWidth:i=>{const s=this.getGui();s.style.width=i,s.style.maxWidth=i,s.style.minWidth=i}};this.createManagedBean(new tW(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e=this.pinned=="left",t=this.pinned=="right",i=e?HW:t?GW:BW;this.setTemplate(i),this.eRowContainer=this.eCenterContainer!==he?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),e.getGui().remove()}setCtrls(e){const t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let i;const s=n=>{const o=n.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),i&&$P(this.eRowContainer,o,i),i=o};for(const n of e){const o=n.instanceId,r=t[o];delete t[o];const a=r||this.createBean(new Qz(n));this.headerRowComps[o]=a,this.rowCompsList.push(a),s(a)}for(const n of Object.values(t))this.destroyRowComp(n)}},VW={tag:"div",cls:"ag-header",role:"presentation"},zW=class extends xt{constructor(){super(VW)}postConstruct(){const e={toggleCss:(s,n)=>this.toggleCss(s,n),setHeightAndMinHeight:s=>{this.getGui().style.height=s,this.getGui().style.minHeight=s}};this.createManagedBean(new $z).setComp(e,this.getGui(),this.getFocusableElement());const i=s=>{this.createManagedBean(s),this.appendChild(s)};i(new nw("left")),i(new nw(null)),i(new nw("right"))}},WW={selector:"AG-HEADER-ROOT",component:zW},$W=class extends xt{constructor(e,t,i,s,n){super(),this.cellCtrl=t,this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.gos=e.gos,this.column=t.column,this.rowNode=t.rowNode,this.eRow=s;const o=ri({tag:"div",role:t.getCellAriaRole(),attrs:{"comp-id":`${this.getCompId()}`,"col-id":t.column.colIdSanitised}});this.eCell=o;let r;t.isCellSpanning()?(r=ri({tag:"div",cls:"ag-spanned-cell-wrapper",role:"presentation"}),r.appendChild(o),this.setTemplateFromElement(r)):this.setTemplateFromElement(o),this.cellCssManager=new FT(()=>o),this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);const a={toggleCss:(l,c)=>this.cellCssManager.toggleCss(l,c),setUserStyles:l=>gp(o,l),getFocusableElement:()=>o,setIncludeSelection:l=>this.includeSelection=l,setIncludeRowDrag:l=>this.includeRowDrag=l,setIncludeDndSource:l=>this.includeDndSource=l,setRenderDetails:(l,c,d)=>this.setRenderDetails(l,c,d),setEditDetails:(l,c,d)=>this.setEditDetails(l,c,d),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue(),refreshEditStyles:(l,c)=>this.refreshEditStyles(l,c)};t.setComp(a,o,r,this.eCellWrapper,i,n,void 0)}getParentOfValue(){return this.eCellValue??this.eCellWrapper??this.eCell}setRenderDetails(e,t,i){var o;if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;const n=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(i||n)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t)),(o=this.rowDraggingComp)==null||o.refreshVisibility()}setEditDetails(e,t,i){e?this.createCellEditorInstance(e,t,i):this.destroyEditor()}removeControls(){const e=this.beans.context;this.checkboxSelectionComp=e.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=e.destroyBean(this.dndSourceComp),this.rowDraggingComp=e.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const t=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=t||this.forceWrapper,s=i&&this.eCellWrapper==null;s&&(this.eCellWrapper=ri({tag:"div",cls:"ag-cell-wrapper",role:"presentation"}),this.eCell.appendChild(this.eCellWrapper));const n=!i&&this.eCellWrapper!=null;n&&(jn(this.eCellWrapper),this.eCellWrapper=void 0),this.cellCssManager.toggleCss("ag-cell-value",!i);const o=!e&&i,r=o&&this.eCellValue==null;if(r){const c=this.cellCtrl.getCellValueClass();this.eCellValue=ri({tag:"span",cls:c,role:"presentation"}),this.eCellWrapper.appendChild(this.eCellValue)}const a=!o&&this.eCellValue!=null;a&&(jn(this.eCellValue),this.eCellValue=void 0);const l=s||n||r||a;return l&&this.removeControls(),!e&&t&&this.addControls(),l}addControls(){const{cellCtrl:e,eCellWrapper:t,eCellValue:i,includeRowDrag:s,includeDndSource:n,includeSelection:o}=this,r=a=>{a&&t.insertBefore(a.getGui(),i)};s&&this.rowDraggingComp==null&&(this.rowDraggingComp=e.createRowDragComp(),r(this.rowDraggingComp)),n&&this.dndSourceComp==null&&(this.dndSourceComp=e.createDndSource(),r(this.dndSourceComp)),o&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=e.createSelectionCheckbox(),r(this.checkboxSelectionComp))}createCellEditorInstance(e,t,i){const s=this.editorVersion,n=e.newAgStackInstance(),{params:o}=e;n.then(a=>this.afterCellEditorCreated(s,a,o,t,i)),Ht(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const t=this.getParentOfValue();Wi(t);const i=mu(e);i!=null&&(t.textContent=i)}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),jn(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){var i,s;const{context:e}=this.beans;(((i=this.cellEditorPopupWrapper)==null?void 0:i.getGui().contains(Wt(this.beans)))||this.cellCtrl.hasBrowserFocus())&&this.eCell.focus({preventScroll:!0}),(s=this.hideEditorPopup)==null||s.call(this),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),jn(this.cellEditorGui),this.cellCtrl.disableEditorTooltipFeature(),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){var i;if(((i=this.cellRenderer)==null?void 0:i.refresh)==null||this.cellRendererClass!==e.componentClass)return!1;const t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){var o;const t=this.rendererVersion,i=r=>a=>{if(this.rendererVersion!==t||!this.isAlive())return;const c=r.newAgStackInstance(),d=this.afterCellRendererCreated.bind(this,t,r.componentClass);c==null||c.then(d)},{animationFrameSvc:s}=this.beans;let n;if(s!=null&&s.active&&this.firstRender?n=(r,a=!1)=>{s.createTask(i(r),this.rowNode.rowIndex,"p2",r.componentFromFramework,a)}:n=r=>i(r)(),(o=e.params)!=null&&o.deferRender&&!this.cellCtrl.rowNode.group){const{loadingComp:r,onReady:a}=this.cellCtrl.getDeferLoadingCellRenderer();r&&(n(r),a.then(()=>n(e,!0)))}else n(e)}afterCellRendererCreated(e,t,i){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(i);return}this.cellRenderer=i,this.cellRendererClass=t;const n=i.getGui();if(this.cellRendererGui=n,n!=null){const o=this.getParentOfValue();Wi(o),o.appendChild(n)}}afterCellEditorCreated(e,t,i,s,n){var c,d,h;const o=e!==this.editorVersion,{context:r}=this.beans;if(o){r.destroyBean(t);return}if((c=t.isCancelBeforeStart)==null?void 0:c.call(t)){r.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){J(97,{colId:this.column.getId()}),r.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();const l=s||((d=t.isPopup)==null?void 0:d.call(t));l?this.addPopupCellEditor(i,n):this.addInCellEditor(),this.refreshEditStyles(!0,l),(h=t.afterGuiAttached)==null||h.call(t),this.cellCtrl.enableEditorTooltipFeature(t),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){const{cellCssManager:i}=this;i.toggleCss("ag-cell-inline-editing",e&&!t),i.toggleCss("ag-cell-popup-editing",e&&!!t),i.toggleCss("ag-cell-not-inline-editing",!e||!!t)}addInCellEditor(){const{eCell:e}=this;e.contains(Wt(this.beans))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),Wi(this.getParentOfValue()),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){var y;const{gos:i,context:s,popupSvc:n,editSvc:o}=this.beans;i.get("editType")==="fullRow"&&J(98);const r=this.cellEditorPopupWrapper=s.createBean(o.createPopupEditorWrapper(e)),{cellEditor:a,cellEditorGui:l,eCell:c,rowNode:d,column:h,cellCtrl:u}=this,f=r.getGui();l&&f.appendChild(l);const p=i.get("stopEditingWhenCellsLoseFocus"),m=t??((y=a.getPopupPosition)==null?void 0:y.call(a))??"over",v=i.get("enableRtl"),C={ePopup:f,column:h,rowNode:d,type:"popupCellEditor",eventSource:c,position:m,alignSide:v?"right":"left",keepWithinBounds:!0},w=n.positionPopupByComponent.bind(n,C),S=n.addPopup({modal:p,eChild:f,closeOnEsc:!0,closedCallback:()=>{u.onPopupEditorClosed()},anchorToElement:c,positionCallback:w,ariaOwns:c});S&&(this.hideEditorPopup=S.hideFunc)}detach(){this.getGui().remove()}destroy(){this.destroyRenderer(),this.destroyEditor(),this.removeControls(),super.destroy()}},UW=class extends xt{constructor(e,t,i){super(),this.cellComps=new Map,this.beans=t,this.rowCtrl=e;const s=ri({tag:"div",role:"row",attrs:{"comp-id":`${this.getCompId()}`}});this.setInitialStyle(s,i),this.setTemplateFromElement(s);const n=s.style;this.domOrder=this.rowCtrl.getDomOrder();const o={setDomOrder:r=>this.domOrder=r,setCellCtrls:r=>this.setCellCtrls(r),showFullWidth:r=>this.showFullWidth(r),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,getFullWidthCellRendererParams:()=>this.fullWidthCellRendererParams,toggleCss:(r,a)=>this.toggleCss(r,a),setUserStyles:r=>gp(s,r),setTop:r=>n.top=r,setTransform:r=>n.transform=r,setRowIndex:r=>s.setAttribute("row-index",r),setRowId:r=>s.setAttribute("row-id",r),setRowBusinessKey:r=>s.setAttribute("row-business-key",r),refreshFullWidth:r=>{var l,c;const a=r();return this.fullWidthCellRendererParams=a,((c=(l=this.fullWidthCellRenderer)==null?void 0:l.refresh)==null?void 0:c.call(l,a))??!1}};e.setComp(o,this.getGui(),i,void 0),this.addDestroyFunc(()=>{e.unsetComp(i)})}setInitialStyle(e,t){const i=this.rowCtrl.getInitialTransform(t);if(i)e.style.setProperty("transform",i);else{const s=this.rowCtrl.getInitialRowTop(t);s&&e.style.setProperty("top",s)}}showFullWidth(e){const t=s=>{if(this.isAlive()){const n=s.getGui();this.getGui().appendChild(n),this.rowCtrl.setupDetailRowAutoHeight(n),this.setFullWidthRowComp(s,e.params)}else this.beans.context.destroyBean(s)};e.newAgStackInstance().then(t)}setCellCtrls(e){const t=new Map(this.cellComps);for(const i of e){const s=i.instanceId;this.cellComps.has(s)?t.delete(s):this.newCellComp(i)}this.destroyCells(t),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const t=[];for(const i of e){const s=this.cellComps.get(i.instanceId);s&&t.push(s.getGui())}UP(this.getGui(),t)}newCellComp(e){var s;const t=((s=this.beans.editSvc)==null?void 0:s.isEditing(e,{withOpenEditor:!0}))??!1,i=new $W(this.beans,e,this.rowCtrl.printLayout,this.getGui(),t);this.cellComps.set(e.instanceId,i),this.getGui().appendChild(i.getGui())}destroy(){super.destroy(),this.destroyCells(this.cellComps)}setFullWidthRowComp(e,t){this.fullWidthCellRenderer=e,this.fullWidthCellRendererParams=t,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer),this.fullWidthCellRendererParams=void 0})}destroyCells(e){for(const t of e.values()){if(!t)return;const i=t.cellCtrl.instanceId;if(this.cellComps.get(i)!==t)return;t.detach(),t.destroy(),this.cellComps.delete(i)}}};function jW(e,t,i){const s=!!i.gos.get("enableCellSpan")&&!!t.getSpannedRowCtrls,n={tag:"div",ref:"eContainer",cls:km(e),role:"rowgroup"};if(t.type==="center"||s){const o={tag:"div",ref:"eSpannedContainer",cls:`ag-spanning-container ${gz(e)}`,role:"presentation"};return n.role="presentation",{tag:"div",ref:"eViewport",cls:`ag-viewport ${lD(e)}`,role:"rowgroup",children:[n,s?o:null]}}return n}var KW=class extends xt{constructor(e){super(),this.eViewport=he,this.eContainer=he,this.eSpannedContainer=he,this.rowCompsNoSpan={},this.rowCompsWithSpan={},this.name=e==null?void 0:e.name,this.options=vp(this.name)}postConstruct(){this.setTemplate(jW(this.name,this.options,this.beans));const e={setHorizontalScroll:i=>this.eViewport.scrollLeft=i,setViewportHeight:i=>this.eViewport.style.height=i,setRowCtrls:({rowCtrls:i})=>this.setRowCtrls(i),setSpannedRowCtrls:i=>this.setRowCtrls(i,!0),setDomOrder:i=>{this.domOrder=i},setContainerWidth:i=>{this.eContainer.style.width=i,this.eSpannedContainer&&(this.eSpannedContainer.style.width=i)},setOffsetTop:i=>{const s=`translateY(${i})`;this.eContainer.style.transform=s,this.eSpannedContainer&&(this.eSpannedContainer.style.transform=s)}};this.createManagedBean(new xz(this.name)).setComp(e,this.eContainer,this.eSpannedContainer,this.eViewport)}destroy(){this.setRowCtrls([]),this.setRowCtrls([],!0),super.destroy(),this.lastPlacedElement=null}setRowCtrls(e,t){const{beans:i,options:s}=this,n=t?this.eSpannedContainer:this.eContainer,o=t?{...this.rowCompsWithSpan}:{...this.rowCompsNoSpan},r={};t?this.rowCompsWithSpan=r:this.rowCompsNoSpan=r,this.lastPlacedElement=null;const a=[];for(const l of e){const c=l.instanceId,d=o[c];let h;if(d)h=d,delete o[c];else{if(!l.rowNode.displayed)continue;h=new UW(l,i,s.type)}r[c]=h,a.push([h,!d])}this.removeOldRows(Object.values(o)),this.addRowNodes(a,n)}addRowNodes(e,t){const{domOrder:i}=this;for(const[s,n]of e){const o=s.getGui();i?this.ensureDomOrder(o,t):n&&t.appendChild(o)}}removeOldRows(e){for(const t of e)t.getGui().remove(),t.destroy()}ensureDomOrder(e,t){$P(t,e,this.lastPlacedElement),this.lastPlacedElement=e}},qW={selector:"AG-ROW-CONTAINER",component:KW};function Tu(e,t){return t.map(i=>{const s=`e${i[0].toUpperCase()+i.substring(1)}RowContainer`;return e[s]={name:i},{tag:"ag-row-container",ref:s,attrs:{name:i}}})}function YW(e){const t={},i={tag:"div",ref:"eGridRoot",cls:"ag-root ag-unselectable",children:[{tag:"ag-header-root"},{tag:"div",ref:"eTop",cls:"ag-floating-top",role:"presentation",children:Tu(t,["topLeft","topCenter","topRight","topFullWidth"])},{tag:"div",ref:"eBody",cls:"ag-body",role:"presentation",children:[{tag:"div",ref:"eBodyViewport",cls:"ag-body-viewport",role:"presentation",children:Tu(t,["left","center","right","fullWidth"])},{tag:"ag-fake-vertical-scroll"}]},{tag:"div",ref:"eStickyTop",cls:"ag-sticky-top",role:"presentation",children:Tu(t,["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])},{tag:"div",ref:"eStickyBottom",cls:"ag-sticky-bottom",role:"presentation",children:Tu(t,["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])},{tag:"div",ref:"eBottom",cls:"ag-floating-bottom",role:"presentation",children:Tu(t,["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])},{tag:"ag-fake-horizontal-scroll"},e?{tag:"ag-overlay-wrapper"}:null]};return{paramsMap:t,elementParams:i}}var XW=class extends xt{constructor(){super(...arguments),this.eGridRoot=he,this.eBodyViewport=he,this.eStickyTop=he,this.eStickyBottom=he,this.eTop=he,this.eBottom=he,this.eBody=he}postConstruct(){const{overlays:e,rangeSvc:t}=this.beans,i=e==null?void 0:e.getOverlayWrapperSelector(),{paramsMap:s,elementParams:n}=YW(!!i);this.setTemplate(n,[...i?[i]:[],Dz,kz,WW,qW],s);const o=(a,l)=>{const c=`${a}px`;l.style.minHeight=c,l.style.height=c},r={setRowAnimationCssOnBodyViewport:(a,l)=>this.setRowAnimationCssOnBodyViewport(a,l),setColumnCount:a=>oH(this.getGui(),a),setRowCount:a=>sH(this.getGui(),a),setTopHeight:a=>o(a,this.eTop),setBottomHeight:a=>o(a,this.eBottom),setTopInvisible:a=>this.eTop.classList.toggle("ag-invisible",a),setBottomInvisible:a=>this.eBottom.classList.toggle("ag-invisible",a),setStickyTopHeight:a=>this.eStickyTop.style.height=a,setStickyTopTop:a=>this.eStickyTop.style.top=a,setStickyTopWidth:a=>this.eStickyTop.style.width=a,setStickyBottomHeight:a=>{this.eStickyBottom.style.height=a,this.eStickyBottom.classList.toggle("ag-invisible",a==="0px")},setStickyBottomBottom:a=>this.eStickyBottom.style.bottom=a,setStickyBottomWidth:a=>this.eStickyBottom.style.width=a,setColumnMovingCss:(a,l)=>this.toggleCss(a,l),updateLayoutClasses:(a,l)=>{const c=[this.eBodyViewport.classList,this.eBody.classList];for(const d of c)d.toggle(Gn.AUTO_HEIGHT,l.autoHeight),d.toggle(Gn.NORMAL,l.normal),d.toggle(Gn.PRINT,l.print);this.toggleCss(Gn.AUTO_HEIGHT,l.autoHeight),this.toggleCss(Gn.NORMAL,l.normal),this.toggleCss(Gn.PRINT,l.print)},setAlwaysVerticalScrollClass:(a,l)=>this.eBodyViewport.classList.toggle(hD,l),registerBodyViewportResizeListener:a=>{const l=ll(this.beans,this.eBodyViewport,a);this.addDestroyFunc(()=>l())},setPinnedTopBottomOverflowY:a=>this.eTop.style.overflowY=this.eBottom.style.overflowY=a,setCellSelectableCss:(a,l)=>{for(const c of[this.eTop,this.eBodyViewport,this.eBottom])c.classList.toggle(a,l)},setBodyViewportWidth:a=>this.eBodyViewport.style.width=a,setGridRootRole:a=>Za(this.eGridRoot,a)};this.ctrl=this.createManagedBean(new Az),this.ctrl.setComp(r,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(t&&$r(this.gos)||Tg(this.gos))&&iH(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){const i=this.eBodyViewport.classList;i.toggle("ag-row-animation",t),i.toggle("ag-row-no-animation",!t)}},QW={selector:"AG-GRID-BODY",component:XW},JW=class extends V{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getId());const{dragAndDrop:s,ctrlsSvc:n}=this.beans;s==null||s.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new jS(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const o=ll(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>o()),n.register("gridCtrl",this)}isDetailGrid(){var t;const e=NT(this.getGui());return((t=e==null?void 0:e.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}getOptionalSelectors(){var t,i,s,n,o;const e=this.beans;return{paginationSelector:(t=e.pagination)==null?void 0:t.getPaginationSelector(),gridHeaderDropZonesSelector:(i=e.registry)==null?void 0:i.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:(s=e.sideBar)==null?void 0:s.getSelector(),statusBarSelector:(n=e.registry)==null?void 0:n.getSelector("AG-STATUS-BAR"),watermarkSelector:(o=e.licenseManager)==null?void 0:o.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){const{view:t}=this;if(e===!1)t.setCursor(null);else{const i=e===1?"ew-resize":"ns-resize";t.setCursor(i)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:s}=this.getNextFocusableIndex(t,e);if(s<0||s>=t.length)return!1;if(s===0){if(i>0){const{visibleCols:n,focusSvc:o}=this.beans,r=n.allCols,a=Mt(r);if(o.focusGridView({column:a,backwards:!0}))return!0}return!1}return this.focusContainer(t[s],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t!=null&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),{focusSvc:s,visibleCols:n}=this.beans,o=n.allCols;if(e){if(i.length>1)return this.focusContainer(Mt(i),e);const r=Mt(o);if(s.focusGridView({column:r,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||Hc(this.beans)){if(s.focusGridView({column:o[0],backwards:e}))return!0;for(let r=1;r<i.length;r++)if(qc(i[r].getGui(),e))return!0;return!1}return s.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){var o;const t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:s}=this.getNextFocusableIndex(t,e);if(s===-1||i<0||i>=t.length)return;const n=t[i];(o=n.setAllowFocus)==null||o.call(n,!0),setTimeout(()=>{var r;(r=n.setAllowFocus)==null||r.call(n,!1)})}isFocusable(){var t,i;const e=this.beans;return!dC(e)||!Hc(e)||!!((i=(t=e.sideBar)==null?void 0:t.comp)!=null&&i.isDisplayed())}getNextFocusableIndex(e,t){const i=Wt(this.beans),s=e.findIndex(o=>o.getGui().contains(i)),n=s+(t?-1:1);return{indexWithFocus:s,nextIndex:n}}focusContainer(e,t){var s,n;(s=e.setAllowFocus)==null||s.call(e,!0);const i=qc(e.getGui(),t,!1,!0);return(n=e.setAllowFocus)==null||n.call(e,!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},ZW=class extends yD{constructor(e){super(),this.gridBody=he,this.sideBar=he,this.pagination=he,this.rootWrapperBody=he,this.eGridDiv=e}postConstruct(){const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:o=>this.addCss(o),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:o=>{this.getGui().style.userSelect=o??"",this.getGui().style.webkitUserSelect=o??""},setCursor:o=>{this.getGui().style.cursor=o??""}},t=this.createManagedBean(new JW),i=t.getOptionalSelectors(),s=this.createTemplate(i),n=[QW,...Object.values(i).filter(o=>!!o)];this.setTemplate(s,n),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>t.focusInnerElement(o),forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:()=>!t.isFocusable()})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{e.remove(),el(this.gos,"Grid removed from DOM")})}updateLayoutClasses(e,t){const i=this.rootWrapperBody.classList,{AUTO_HEIGHT:s,NORMAL:n,PRINT:o}=Gn,{autoHeight:r,normal:a,print:l}=t;i.toggle(s,r),i.toggle(n,a),i.toggle(o,l),this.toggleCss(s,r),this.toggleCss(n,a),this.toggleCss(o,l)}createTemplate(e){const t=e.gridHeaderDropZonesSelector?{tag:"ag-grid-header-drop-zones"}:null,i=e.sideBarSelector?{tag:"ag-side-bar",ref:"sideBar"}:null,s=e.statusBarSelector?{tag:"ag-status-bar"}:null,n=e.watermarkSelector?{tag:"ag-watermark"}:null,o=e.paginationSelector?{tag:"ag-pagination",ref:"pagination"}:null;return{tag:"div",cls:"ag-root-wrapper",role:"presentation",children:[t,{tag:"div",ref:"rootWrapperBody",cls:"ag-root-wrapper-body",role:"presentation",children:[{tag:"ag-grid-body",ref:"gridBody"},i]},s,o,n]}}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){var t;if(!e&&((t=this.pagination)!=null&&t.isDisplayed())){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){const e=[this.gridBody];for(const t of[this.sideBar,this.pagination])t&&e.push(t);return e.filter(t=>Wo(t.getGui()))}},Ge=(e,t)=>{for(const i of Object.keys(t))t[i]=e;return t},oR={dispatchEvent:"CommunityCore",...Ge("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...Ge("GridState",{getState:0,setState:0}),...Ge("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...Ge("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...Ge("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...Ge("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...Ge("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...Ge("ValueCache",{expireValueCache:0}),...Ge("CellApi",{getCellValue:0}),...Ge("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...Ge("Sort",{onSortChanged:0}),...Ge("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...Ge("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...Ge("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...Ge("HighlightChanges",{flashCells:0}),...Ge("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),...Ge("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...Ge("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...Ge("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...Ge("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...Ge("ColumnResize",{setColumnWidths:0}),...Ge("ColumnHover",{isColumnHovered:0}),...Ge("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),...Ge("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),...Ge("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...Ge("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...Ge("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),...Ge("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...Ge("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...Ge("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...Ge("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0}),...Ge("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...Ge("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0}),...Ge("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...Ge("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...Ge("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...Ge("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...Ge("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...Ge("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...Ge("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...Ge("ContextMenu",{showContextMenu:0}),...Ge("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...Ge("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...Ge("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...Ge("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...Ge("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...Ge("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0}),...Ge("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...Ge("StatusBar",{getStatusPanel:0}),...Ge("AiToolkit",{getStructuredSchema:0})},ow={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},e$=(e,t)=>e.eventSvc.dispatchEvent(t),SD=class{};Reflect.defineProperty(SD,"name",{value:"GridApi"});var t$=class extends V{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new SD,this.fns={...ow,dispatchEvent:e$},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(oR))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){var n;const{fns:i,beans:s}=this;i!==ow&&(i[e]=((n=s==null?void 0:s.validation)==null?void 0:n.validateApiFunction(e,t))??t)}makeApi(e){return{[e]:(...t)=>{const{beans:i,fns:{[e]:s}}=this;return s?s(i,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:s}=this;if(!t)J(26,{fnName:e,preDestroyLink:s});else{const n=oR[e];i.assertModuleRegistered(n,`api.${e}`)&&J(27,{fnName:e,module:n})}}destroy(){super.destroy(),this.fns=ow,this.beans=null}};function i$(e){return e.context.getId()}function s$(e){e.gridDestroySvc.destroy()}function n$(e){return e.gridDestroySvc.destroyCalled}function o$(e,t){return e.gos.get(t)}function r$(e,t,i){xD(e,{[t]:i})}function xD(e,t){e.gos.updateGridOptions({options:t})}function a$(e,t){const i=t.replace(/Module$/,"");return e.gos.isModuleRegistered(i)}var l$={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}},c$=class extends xt{constructor(e,t,i){super(l$),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(fn("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:i,eCell:s,gos:n}=this,o=i.getColDef().dndSourceOnRowDrag,r=e.dataTransfer;if(r.setDragImage(s,0,0),o){const a=Le(n,{rowNode:t,dragEvent:e});o(a)}else try{const a=JSON.stringify(t.data);r.setData("application/json",a),r.setData("text/plain",a)}catch{}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};function d$(e,t){var i,s;(s=(i=e.rowDragSvc)==null?void 0:i.rowDragFeature)==null||s.addRowDropZone(t)}function h$(e,t){var s,n;const i=(s=e.dragAndDrop)==null?void 0:s.findExternalZone(t.getContainer());i&&((n=e.dragAndDrop)==null||n.removeDropTarget(i))}function u$(e,t){var i,s;return(s=(i=e.rowDragSvc)==null?void 0:i.rowDragFeature)==null?void 0:s.getRowDropZone(t)}function g$(e){const t=e.rowDropHighlightSvc;return t?{row:t.row,dropIndicatorPosition:t.position}:{row:null,dropIndicatorPosition:"none"}}function f$(e,t){const i=e.rowDropHighlightSvc;if(!i)return;const s=t==null?void 0:t.row;let n=t==null?void 0:t.dropIndicatorPosition;n!=="above"&&n!=="below"&&n!=="inside"&&(n="none");const o=s==null?void 0:s.rowIndex;o==null||n==="none"?i.clear():i.set(s,n)}var p$=class extends PV{shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(e)}},m$=class extends V{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:i}=this.beans;return i.addDragSource(t),()=>i.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},v$={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},C$=class extends xt{constructor(e,t,i,s,n,o=!1){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=s,this.dragStartPixels=n,this.alwaysVisible=o,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){const{beans:e,customGui:t}=this;t?this.setDragElement(t,this.dragStartPixels):(this.setTemplate(v$),this.getGui().appendChild(fn("rowDrag",e,null)),this.addDragSource()),this.alwaysVisible||this.initCellDrag()}initCellDrag(){const{beans:e,gos:t,rowNode:i}=this,s=this.refreshVisibility.bind(this);this.addManagedPropertyListener("suppressRowDrag",s),this.addManagedListeners(i,{dataChanged:s,cellChanged:s}),this.addManagedListeners(e.eventSvc,t.get("rowDragManaged")?{sortChanged:s,filterChanged:s,columnRowGroupChanged:s,newColumnsLoaded:s}:{newColumnsLoaded:s})}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}refreshVisibility(){if(this.alwaysVisible)return;const e={skipAriaHidden:!0};if(this.isNeverDisplayed()){this.setDisplayed(!1,e);return}const t=this.column;let i=typeof(t==null?void 0:t.getColDef().rowDrag)=="function",s=!t||this.isCustomGui()||t.isRowDrag(this.rowNode);s&&this.rowNode.footer&&this.gos.get("rowDragManaged")&&(s=!1,i=!0),this.setDisplayed(i||s,e),this.setVisible(s,e)}isNeverDisplayed(){var i,s;const{gos:e,beans:t}=this;return!!(e.get("suppressRowDrag")||e.get("rowDragManaged")&&((i=t.rowDragSvc.rowDragFeature)!=null&&i.shouldPreventRowMove())&&!((s=t.dragAndDrop)!=null&&s.hasExternalDropZones()))}getSelectedNodes(){var s;const e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];const i=((s=this.beans.selectionSvc)==null?void 0:s.getSelectedNodes())??[];return i.indexOf(e)!==-1?i:[e]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){if(this.dragSource&&this.removeDragSource(),this.gos.get("rowDragManaged")&&this.rowNode.footer)return;const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:s=>{s==null||s.preventDefault()}})[0]);const i=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:s=>{var a,l;const n=(s==null?void 0:s.dragItem)||this.getDragItem(),o=(((a=s==null?void 0:s.dropTarget)==null?void 0:a.rows.length)??((l=n.rowNodes)==null?void 0:l.length))||1,r=this.getRowDragText(this.column);return r?r(n,o):o===1?this.cellValueFn():`${o} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},_m=class{constructor(){this.reordered=!1,this.removals=new Set,this.updates=new Set,this.adds=new Set}};function w$(e){const{rowIndex:t,rowPinned:i,column:s}=e;return`${t}.${i??"null"}.${s.getId()}`}function RD(e,t){const i=e.column===t.column,s=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return i&&s&&n}function b$(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(fe(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function y$(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}function S$(e){let t=0,i;const{pinnedRowModel:s,rowModel:n,pageBounds:o}=e;return s!=null&&s.getPinnedTopRowCount()?i="top":n.getRowCount()?(i=null,t=o.getFirstRow()):s!=null&&s.getPinnedBottomRowCount()&&(i="bottom"),i===void 0?null:{rowIndex:t,rowPinned:i}}function x$(e){let t,i=null;const{pinnedRowModel:s,pageBounds:n}=e,o=s==null?void 0:s.getPinnedBottomRowCount(),r=s==null?void 0:s.getPinnedTopRowCount();return o?(i="bottom",t=o-1):e.rowModel.getRowCount()?t=n.getLastRow():r&&(i="top",t=r-1),t===void 0?null:{rowIndex:t,rowPinned:i}}function Ur(e,t){var i,s;switch(t.rowPinned){case"top":return(i=e.pinnedRowModel)==null?void 0:i.getPinnedTopRow(t.rowIndex);case"bottom":return(s=e.pinnedRowModel)==null?void 0:s.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function Dd(e,t){var n;const i=(n=e.spannedRowRenderer)==null?void 0:n.getCellByPosition(t);if(i)return i;const s=e.rowRenderer.getRowByPosition(t);return s?s.getCellCtrl(t.column):null}function R$(e,t,i){const{rowModel:s,pinnedRowModel:n}=e;let o;return o??(o=s==null?void 0:s.getRowNode(t)),i?o??(o=n==null?void 0:n.getPinnedRowById(t,i)):(o??(o=n==null?void 0:n.getPinnedRowById(t,"top")),o??(o=n==null?void 0:n.getPinnedRowById(t,"bottom"))),o}function gv(e,t,i=!1){const{rowIndex:s,rowPinned:n}=t,{pageBounds:o,pinnedRowModel:r,rowModel:a}=e;if(s===0)return n==="top"?null:n==="bottom"&&a.isRowsToRender()?{rowIndex:o.getLastRow(),rowPinned:null}:r!=null&&r.isRowsToRender("top")?{rowIndex:r.getPinnedTopRowCount()-1,rowPinned:"top"}:null;if(i){const l=n?void 0:a.getRow(s);return ED(e,l,!0)??{rowIndex:s-1,rowPinned:n}}return{rowIndex:s-1,rowPinned:n}}function rR(e,t,i=!1){const{rowIndex:s,rowPinned:n}=t,{pageBounds:o,pinnedRowModel:r,rowModel:a}=e;if(E$(e,t))return n==="bottom"?null:n==="top"&&a.isRowsToRender()?{rowIndex:o.getFirstRow(),rowPinned:null}:r!=null&&r.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;if(i){const l=n?void 0:a.getRow(s);return ED(e,l)??{rowIndex:s+1,rowPinned:n}}return{rowIndex:s+1,rowPinned:n}}function ED(e,t,i=!1){const{gos:s,rowRenderer:n}=e;if(!(t!=null&&t.sticky)||!lT(s))return;const o=n.getStickyTopRowCtrls(),r=n.getStickyBottomRowCtrls(),a=!r.some(h=>h.rowNode.rowIndex===t.rowIndex),l=a?o:r,c=(i?-1:1)*(a?-1:1);let d;for(let h=0;h<l.length;h++)if(l[h].rowNode.rowIndex===t.rowIndex){d=l[h+c];break}return d?{rowIndex:d.rowNode.rowIndex,rowPinned:null}:void 0}function E$(e,t){const{rowPinned:i,rowIndex:s}=t,{pinnedRowModel:n,pageBounds:o}=e;return i==="top"?((n==null?void 0:n.getPinnedTopRowCount())??0)-1<=s:i==="bottom"?((n==null?void 0:n.getPinnedBottomRowCount())??0)-1<=s:o.getLastRow()<=s}var kg=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:i,children:s}=e;if(s)for(let n=0;n<s.length;++n)this.depthFirstSearchChangedPath(s[n],t);t(i)}depthFirstSearchEverything(e,t,i){const s=e.childrenAfterGroup;if(s)for(let n=0,o=s.length;n<o;++n){const r=s[n];r.childrenAfterGroup?this.depthFirstSearchEverything(r,t,i):i&&t(r)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const s={rowNode:t,children:null};this.mapToItems[t.id]=s,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;){this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={});for(const s of t)this.nodeIdsToColumns[i.id][s.getId()]=!0;i=i.parent}}linkPathItems(e,t){let i=e;for(let s=0;s<t;s++){const n=this.mapToItems[i.id],o=this.mapToItems[i.parent.id];o.children||(o.children=[]),o.children.push(n),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>i[n.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>!i[n.getId()])}},A$=class{constructor(e,t){this.beans=e,this.groupThrottled=!1,this.scrollChanged=!1,this.scrollChanging=!1,this.oldVScroll=null,this.groupTimer=null,this.groupTarget=null,this.onGroupThrottle=()=>{var s;this.groupTimer=null,this.groupThrottled=!0,(s=this.beans.dragAndDrop)==null||s.nudge()};const i=()=>t.scrollFeature.getVScrollPosition().top;this.autoScroll=new IW({scrollContainer:t.eBodyViewport,scrollAxis:"y",getVerticalPosition:i,setVerticalPosition:s=>t.scrollFeature.setVerticalScrollPosition(s),onScrollCallback:()=>{var o;const s=i();if(this.oldVScroll!==s){this.oldVScroll=s,this.scrollChanging=!0;return}const n=this.scrollChanging;this.scrollChanged=n,this.scrollChanging=!1,n&&((o=this.beans.dragAndDrop)==null||o.nudge(),this.scrollChanged=!1)}})}updateGroup(e,t){var i,s;this.groupTarget&&this.groupTarget!==e&&this.clearGroup(),e&&(t&&this.groupThrottled&&!e.expanded&&((i=e.childrenAfterSort)!=null&&i.length)&&e.isExpandable()&&e.setExpanded(!0,void 0,!0),e.expanded&&((s=e.childrenAfterSort)!=null&&s.length)&&(this.groupThrottled=!0,this.groupTarget=e))}startGroup(e){this.groupTarget=e,this.groupTimer===null&&(this.groupTimer=window.setTimeout(this.onGroupThrottle,this.beans.gos.get("rowDragInsertDelay")))}clearGroup(){this.groupThrottled=!1,this.groupTarget=null;const e=this.groupTimer;e!==null&&(this.groupTimer=null,window.clearTimeout(e))}clear(){this.clearGroup(),this.autoScroll.ensureCleared(),this.oldVScroll=null,this.scrollChanged=!1,this.scrollChanging=!1}},F$=class extends V{constructor(e){super(),this.eContainer=e,this.lastDraggingEvent=null,this.nudger=null}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,t=>{this.nudger=new A$(e,t.gridBodyCtrl)})}destroy(){var e;super.destroy(),(e=this.nudger)==null||e.clear(),this.nudger=null,this.lastDraggingEvent=null,this.eContainer=null}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(e){var t;return((t=e==null?void 0:e.dropTarget)==null?void 0:t.allowed)===!1||this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){const{rowGroupColsSvc:e,filterManager:t,sortSvc:i}=this.beans;return!!(((e==null?void 0:e.columns)??[]).length||(t==null?void 0:t.isAnyFilterPresent())||(i==null?void 0:i.isSortActive()))}getRowNodes(e){var i;if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const s=(i=this.beans.selectionSvc)==null?void 0:i.getSelectedNodes();if(s&&s.indexOf(t)>=0)return s.slice().sort(D$)}return[t]}onDragEnter(e){this.dragging(e,!0)}onDragging(e){this.dragging(e,!1)}dragging(e,t){var r,a,l,c;const{lastDraggingEvent:i,beans:s}=this;if(t){const d=this.getRowNodes(e);e.dragItem.rowNodes=d,cR(d,!0)}this.lastDraggingEvent=e;const n=e.fromNudge,o=this.makeRowsDrop(i,e,n,!1);(r=s.rowDropHighlightSvc)==null||r.fromDrag(e),t&&this.dispatchGridEvent("rowDragEnter",e),this.dispatchGridEvent("rowDragMove",e),o!=null&&o.rowDragManaged&&o.moved&&o.allowed&&o.sameGrid&&!o.suppressMoveWhenRowDragging&&(!n&&!((a=this.nudger)!=null&&a.autoScroll.scrolling)||(l=this.nudger)!=null&&l.scrollChanged)&&this.dropRows(o),(c=this.nudger)==null||c.autoScroll.check(e.event)}isFromThisGrid(e){return e.dragSource.dragSourceDomDataKey===this.gos.getDomDataKey()}makeRowsDrop(e,t,i,s){var S,y;const{beans:n,gos:o}=this,r=this.newRowsDrop(t,s),a=n.rowModel;if(t.dropTarget=r,t.changed=!1,!r)return null;let{sameGrid:l,rootNode:c,source:d,target:h,rows:u}=r;h??(h=a.getRow(a.getRowCount()-1)??null);const f=!!((S=this.beans.groupStage)!=null&&S.treeData)&&l;let p=null;if(h!=null&&h.footer){const R=Lm(a,-1,h)??Lm(a,1,h);p=h.sibling??c,h=R??null}h!=null&&h.detail&&(h=h.parent),r.moved&&(r.moved=d!==h);let m=.5;if(h&&(l&&r.moved&&(p||!f)?m=d.rowIndex>h.rowIndex?-.5:.5:m=(r.y-h.rowTop-h.rowHeight/2)/h.rowHeight||0),!f&&l&&h&&r.moved&&oi(o)){const R=M$(a,r);R&&(m=d.rowIndex>R.rowIndex?-.5:.5,h=R,r.moved&&(r.moved=d!==h))}const v=this.nudger;v==null||v.updateGroup(h,i),f&&!p&&v&&(!h||m>=.5&&h.rowIndex===n.pageBounds.getLastRow()?p=c:r.moved&&this.targetShouldBeParent(h,m,u)&&(v.groupThrottled&&(p=h),!i&&(!p||h&&!h.expanded&&((y=h.childrenAfterSort)!=null&&y.length))&&v.startGroup(h)),p??(p=(h==null?void 0:h.parent)??c));let C=!1;if(p){if(p===h&&p!==c){const R=p.expanded?Lm(a,1,h):null;(R==null?void 0:R.parent)===p?(h=R,m=-.5):C=!0}if(h&&!C){let R=h;for(;R&&R!==c&&R!==p;)h=R,R=R.parent}}r.target=h,r.newParent=p,r.moved&&(r.moved=d!==h);const w=m<0?"above":"below";return r.position=r.moved?C?"inside":w:"none",this.validateRowsDrop(r,f,w,s),t.changed||(t.changed=T$(e==null?void 0:e.dropTarget,r)),r}newRowsDrop(e,t){const{beans:i,gos:s}=this,n=i.rowModel.rootNode,o=oi(s)?s.get("rowDragManaged"):!1,r=s.get("suppressMoveWhenRowDragging"),a=this.isFromThisGrid(e);let{rowNode:l,rowNodes:c}=e.dragItem;if(c||(c=l?[l]:[]),l||(l=c[0]),!l||!n)return null;const d=this.beans.dragAndDrop.isDropZoneWithinThisGrid(e);let h=!0;o&&(!c.length||this.shouldPreventRowMove()||(r||!a)&&!d)&&(h=!1);const u=qx(i,e).y,f=this.getOverNode(u);return{api:i.gridApi,context:i.gridOptions.context,draggingEvent:e,rowDragManaged:o,suppressMoveWhenRowDragging:r,sameGrid:a,withinGrid:d,rootNode:n,moved:l!==f,y:u,overNode:f,overIndex:(f==null?void 0:f.rowIndex)??-1,position:"none",source:l,target:f??null,newParent:null,rows:c,allowed:h,highlight:!t&&o&&r&&(d||!a)}}validateRowsDrop(e,t,i,s){const{rowDragManaged:n,suppressMoveWhenRowDragging:o}=e;t||(e.newParent=null),o&&!e.moved&&(e.allowed=!1);const r=(!n||e.allowed)&&this.gos.get("isRowValidDropPosition");if(r){t&&e.newParent&&aR(e.rows,e.newParent)&&(e.newParent=null);const a=r(e);if(!a)e.allowed=!1;else if(typeof a=="object"){a.rows!==void 0&&(e.rows=a.rows??[]),t&&a.newParent!==void 0&&(e.newParent=a.newParent),a.target!==void 0&&(e.target=a.target),a.position&&(e.position=a.position),a.allowed!==void 0?e.allowed=a.allowed:n||(e.allowed=!0);const l=e.draggingEvent;a.changed&&l&&(l.changed=!0),!s&&a.highlight!==void 0&&(e.highlight=a.highlight)}}n&&(e.rows=this.filterRows(e)),t&&e.newParent&&aR(e.rows,e.newParent)&&(e.newParent=null),o&&(!e.rows.length||e.position==="none")&&(e.allowed=!1),(!e.allowed||!e.newParent)&&e.position==="inside"&&(e.position=i)}targetShouldBeParent(e,t,i){const s=e.rowIndex,n=.25;if(t<-.5+n)return!1;if(t<.5-n)return!0;let o,r=s+1;const a=this.beans.rowModel;do o=a.getRow(r++);while(o!=null&&o.footer);const l=e.childrenAfterGroup;if(o&&o.parent===e&&(l!=null&&l.length)){const c=new Set(i);for(const d of l)if(d.rowIndex!==null&&!c.has(d))return!0}return!1}addRowDropZone(e){if(!e.getContainer()){J(55);return}const t=this.beans.dragAndDrop;if(t.findExternalZone(e.getContainer())){J(56);return}const i=e.fromGrid?e:{getContainer:e.getContainer,onDragEnter:e.onDragEnter&&(n=>e.onDragEnter(this.rowDragEvent("rowDragEnter",n))),onDragLeave:e.onDragLeave&&(n=>e.onDragLeave(this.rowDragEvent("rowDragLeave",n))),onDragging:e.onDragging&&(n=>e.onDragging(this.rowDragEvent("rowDragMove",n))),onDragStop:e.onDragStop&&(n=>e.onDragStop(this.rowDragEvent("rowDragEnd",n))),onDragCancel:e.onDragCancel&&(n=>e.onDragCancel(this.rowDragEvent("rowDragCancel",n)))},s={isInterestedIn:n=>n===2,getIconName:()=>"move",external:!0,...i};t.addDropTarget(s),this.addDestroyFunc(()=>t.removeDropTarget(s))}getRowDropZone(e){return{getContainer:this.getContainer.bind(this),onDragEnter:i=>{var s;this.onDragEnter(i),(s=e==null?void 0:e.onDragEnter)==null||s.call(e,this.rowDragEvent("rowDragEnter",i))},onDragLeave:i=>{var s;this.onDragLeave(i),(s=e==null?void 0:e.onDragLeave)==null||s.call(e,this.rowDragEvent("rowDragLeave",i))},onDragging:i=>{var s;this.onDragging(i),(s=e==null?void 0:e.onDragging)==null||s.call(e,this.rowDragEvent("rowDragMove",i))},onDragStop:i=>{var s;this.onDragStop(i),(s=e==null?void 0:e.onDragStop)==null||s.call(e,this.rowDragEvent("rowDragEnd",i))},onDragCancel:i=>{var s;this.onDragCancel(i),(s=e==null?void 0:e.onDragCancel)==null||s.call(e,this.rowDragEvent("rowDragCancel",i))},fromGrid:!0}}getOverNode(e){const{pageBounds:t,rowModel:i}=this.beans,n=e>t.getCurrentPagePixelRange().pageLastPixel?-1:i.getRowIndexAtPixel(e);return n>=0?i.getRow(n):void 0}rowDragEvent(e,t){const i=this.beans,{dragItem:s,dropTarget:n,event:o,vDirection:r}=t,a=(n==null?void 0:n.rootNode)===i.rowModel.rootNode,l=a?n.y:qx(i,t).y,c=a?n.overNode:this.getOverNode(l),d=a?n.overIndex:(c==null?void 0:c.rowIndex)??-1;return{api:i.gridApi,context:i.gridOptions.context,type:e,event:o,node:s.rowNode,nodes:s.rowNodes,overIndex:d,overNode:c,y:l,vDirection:r,rowsDrop:n}}dispatchGridEvent(e,t){const i=this.rowDragEvent(e,t);this.eventSvc.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e)}onDragStop(e){var i;const t=this.makeRowsDrop(this.lastDraggingEvent,e,!1,!0);this.dispatchGridEvent("rowDragEnd",e),t!=null&&t.allowed&&t.rowDragManaged&&(t.suppressMoveWhenRowDragging||!t.sameGrid||(i=this.nudger)!=null&&i.autoScroll.scrolling)&&this.dropRows(t),this.stopDragging(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e)}stopDragging(e){var t,i;(t=this.nudger)==null||t.clear(),(i=this.beans.rowDropHighlightSvc)==null||i.fromDrag(null),cR(e.dragItem.rowNodes,!1)}dropRows(e){return e.sameGrid?this.csrmMoveRows(e):this.csrmAddRows(e)}csrmAddRows({position:e,target:t,rows:i}){const s=nu(this.gos),n=this.beans.rowModel,o=i.filter(({data:a,rowPinned:l})=>!n.getRowNode((s==null?void 0:s({data:a,level:0,rowPinned:l}))??a.id)).map(({data:a})=>a);if(o.length===0)return!1;const r=t?lR(t)+(e==="above"?0:1):void 0;return n.updateRowData({add:o,addIndex:r}),!0}filterRows({newParent:e,rows:t}){let i;for(let s=0,n=t.length;s<n;++s){let o=!0;const r=t[s];(!r||r.footer||r.rowTop===null&&r!==this.beans.rowModel.getRowNode(r.id)||e&&r.parent!==e&&P$(r,e)||!Ay(r))&&(o=!1),o?i==null||i.push(r):i??(i=t.slice(0,s))}return i??t}csrmMoveRows({position:e,target:t,rows:i,newParent:s,rootNode:n}){let o=!1;const r=new Set;for(const u of i){s&&u.parent!==s&&(u.treeParent=s,o=!0);const f=Ay(u);f&&r.add(f)}if(!o&&r.size===0)return!1;const a=this.beans.focusSvc,l=a.getFocusedCell(),c=l&&Dd(this.beans,l);if(r.size&&this.reorderLeafChildren(r,...this.getMoveRowsBounds(r,t,e==="above"))&&(o=!0),!o)return!1;const d=this.beans.rowModel,h=new _m;return h.reordered=!0,d.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new kg(!1,n),changedRowNodes:h}),c?c.focusCell():a.clearFocusedCell(),!0}getMoveRowsBounds(e,t,i){var a,l;const s=((l=(a=this.beans.rowModel.rootNode)==null?void 0:a._leafs)==null?void 0:l.length)??0;let n=t?lR(t):-1;n<0||n>=s?n=s:i||++n;let o=n,r=Math.min(n,s-1);for(const c of e){const d=c.sourceRowIndex;d<o&&(o=d),d>r&&(r=d)}return[o,n,r]}reorderLeafChildren(e,t,i,s){var l;let n=!1;const o=(l=this.beans.rowModel.rootNode)==null?void 0:l._leafs;if(!e.size||!o)return!1;let r=t;for(let c=t;c<i;++c){const d=o[c];e.has(d)||(d.sourceRowIndex!==r&&(d.sourceRowIndex=r,o[r]=d,n=!0),++r)}let a=s;for(let c=s;c>=i;--c){const d=o[c];e.has(d)||(d.sourceRowIndex!==a&&(d.sourceRowIndex=a,o[a]=d,n=!0),--a)}for(const c of e)c.sourceRowIndex!==r&&(c.sourceRowIndex=r,o[r]=c,n=!0),++r;return n}},Lm=(e,t,i)=>{if(i){const s=e.getRowCount();let n=i.rowIndex+t;for(;n>=0&&n<s;){const o=e.getRow(n);if(!o||!o.footer&&!o.detail)return o;n+=t}}},P$=(e,t)=>{let i=t;for(;i;){if(i===e)return!0;i=i.parent}return!1},aR=(e,t)=>{for(let i=0,s=e.length;i<s;++i)if(e[i].parent!==t)return!1;return!0},lR=e=>{const t=Ay(e);return t!==void 0?t.sourceRowIndex:-1},Ay=e=>e.data?e:JT(e.childrenAfterGroup),T$=(e,t)=>e!==t&&(!e||e.sameGrid!==t.sameGrid||e.allowed!==t.allowed||e.position!==t.position||e.target!==t.target||e.source!==t.source||e.newParent!==t.newParent||!cl(e.rows,t.rows)),D$=({rowIndex:e},{rowIndex:t})=>e!==null&&t!==null?e-t:0,cR=(e,t)=>{for(let i=0,s=(e==null?void 0:e.length)||0;i<s;++i){const n=e[i];n.dragging!==t&&(n.dragging=t,n.dispatchRowEvent("draggingChanged"))}},M$=(e,t)=>{let i=null,s=t.target;if(s&&t.rows.indexOf(s)<0)return null;const n=t.source;if(!s||!n)return null;let o=s.rowIndex-n.rowIndex;const r=o<0?-1:1;o=t.suppressMoveWhenRowDragging?Math.abs(o):1;const a=new Set(t.rows);do{const l=Lm(e,r,s);if(!l)break;a.has(l)||(i=l,--o),s=l}while(o>0);return i},I$=class extends V{constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(e,t){const i=t.createManagedBean(new F$(e)),s=this.beans.dragAndDrop;s.addDropTarget(i),t.addDestroyFunc(()=>s.removeDropTarget(i)),this.rowDragFeature=i}createRowDragComp(e,t,i,s,n,o){return new C$(e,t,i,s,n,o)}createRowDragCompForRow(e,t){if($r(this.gos))return;const i=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${i("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,i,s,n,o){const r=this.gos;return r.get("rowDragManaged")&&(!oi(r)||r.get("pagination"))?void 0:this.createRowDragComp(i,e,t,s,n,o)}},k$=class extends V{constructor(){super(...arguments),this.beanName="rowDropHighlightSvc",this.uiLevel=0,this.dragging=!1,this.row=null,this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){const e=this.row,t=this.dragging;!e||(e==null?void 0:e.rowIndex)===null||this.position==="none"?this.clear():this.set(e,this.position),this.dragging=t}destroy(){this.clear(),super.destroy()}clear(){const e=this.row;this.dragging=!1,e&&(this.uiLevel=0,this.position="none",this.row=null,e.dispatchRowEvent("rowHighlightChanged"))}set(e,t){const i=e!==this.row,s=e.uiLevel,n=t!==this.position,o=s!==this.uiLevel;this.dragging=!1,(i||n||o)&&(i&&this.clear(),this.uiLevel=s,this.position=t,this.row=e,e.dispatchRowEvent("rowHighlightChanged"))}fromDrag(e){const t=e==null?void 0:e.dropTarget;if(t){const{highlight:i,target:s,position:n}=t;if(i&&s&&n!=="none"){this.set(s,n),this.dragging=!0;return}}this.dragging&&this.clear()}},AD={moduleName:"Drag",version:ue,beans:[p$]},_$={moduleName:"DragAndDrop",version:ue,dynamicBeans:{dndSourceComp:c$},icons:{rowDrag:"grip"}},FD={moduleName:"SharedDragAndDrop",version:ue,beans:[DV],dependsOn:[AD],userComponents:{agDragAndDropImage:dW},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},L$={moduleName:"RowDrag",version:ue,beans:[k$,I$],apiFunctions:{addRowDropZone:d$,removeRowDropZone:h$,getRowDropZoneParams:u$,getRowDropPositionIndicator:g$,setRowDropPositionIndicator:f$},dependsOn:[FD]},O$={moduleName:"HorizontalResize",version:ue,beans:[m$],dependsOn:[AD]},N$=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",H$=class extends V{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:i,executeLaterFuncs:s}=this;if(i.length===0&&s.length===0){e(),t();return}const n=o=>{for(;o.length;){const r=o.pop();r&&r()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),n(i)},0),window.setTimeout(()=>{t(),n(s)},200)})}};function G$(e,t,i){var s;(s=e.colMoves)==null||s.moveColumnByIndex(t,i,"api")}function B$(e,t,i){var s;(s=e.colMoves)==null||s.moveColumns(t,i,"api")}var V$=class extends V{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;if(t)for(const i of t)i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:i,pivotColsSvc:s}=this.beans;this.columnsToAggregate.length>0&&(t==null||t.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop")),this.columnsToGroup.length>0&&(i==null||i.addColumns(this.columnsToGroup,"toolPanelDragAndDrop")),this.columnsToPivot.length>0&&(s==null||s.addColumns(this.columnsToPivot,"toolPanelDragAndDrop"))}onDragCancel(){this.clearColumnsList()}};function z$(e,t){!t||t.length<=1||t.filter(s=>e.indexOf(s)<0).length>0||t.sort((s,n)=>{const o=e.indexOf(s),r=e.indexOf(n);return o-r})}function W$(e){var i;const t=[...e];for(const s of e){let n=null,o=s.getParent();for(;o!=null&&o.getDisplayedLeafColumns().length===1;)n=o,o=o.getParent();if(n!=null){const a=!!((i=n.getColGroupDef())!=null&&i.marryChildren)?n.getProvidedColumnGroup().getLeafColumns():n.getLeafColumns();for(const l of a)t.includes(l)||t.push(l)}}return t}function $$(e,t,i,s){const n=s.allCols;let o=null,r=null;for(let a=0;a<e.length;a++){const l=e[a],c=i.getProposedColumnOrder(t,l);if(!i.doesOrderPassRules(c))continue;const d=c.filter(u=>n.includes(u));if(r===null)r=d;else if(!cl(d,r))break;const h=j$(c);(o===null||h<o.fragCount)&&(o={move:l,fragCount:h})}return o}function PD(e){const{isFromHeader:t,fromLeft:i,xPosition:s,fromEnter:n,fakeEvent:o,pinned:r,gos:a,colModel:l,colMoves:c,visibleCols:d}=e;let{allMovingColumns:h}=e;t&&(h=W$(h));const u=h.slice();z$(l.getCols(),u);const f=q$({movingCols:u,draggingRight:i,xPosition:s,pinned:r,gos:a,colModel:l,visibleCols:d}),p=U$(u,l);if(f.length===0)return;const m=f[0];if(p!==null&&(t||!n)&&!o&&(!i&&m>=p||i&&m<=p))return;const C=$$(f,u,c,d);if(!C)return;const w=C.move;if(!(w>l.getCols().length-u.length))return{columns:u,toIndex:w}}function TD(e){const{columns:t,toIndex:i}=PD(e)||{},{finished:s,colMoves:n}=e;return!t||i==null?null:(n.moveColumns(t,i,"uiColumnMoved",s),s?null:{columns:t,toIndex:i})}function U$(e,t){const i=t.getCols(),s=e.map(l=>i.indexOf(l)).sort((l,c)=>l-c),n=s[0];return Mt(s)-n!==s.length-1?null:n}function j$(e){function t(s){const n=[];let o=s.getOriginalParent();for(;o!=null;)n.push(o),o=o.getOriginalParent();return n}let i=0;for(let s=0;s<e.length-1;s++){let n=t(e[s]),o=t(e[s+1]);[n,o]=n.length>o.length?[n,o]:[o,n];for(const r of n)o.indexOf(r)===-1&&i++}return i}function K$(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function q$(e){const{movingCols:t,draggingRight:i,xPosition:s,pinned:n,gos:o,colModel:r,visibleCols:a}=e;if(o.get("suppressMovableColumns")||t.some(S=>S.getColDef().suppressMovable))return[];const c=K$(a,n),d=r.getCols(),h=c.filter(S=>t.includes(S)),u=c.filter(S=>!t.includes(S)),f=d.filter(S=>!t.includes(S));let p=0,m=s;if(i){let S=0;for(const y of h)S+=y.getActualWidth();m-=S}if(m>0){for(let S=0;S<u.length;S++){const y=u[S];if(m-=y.getActualWidth(),m<0)break;p++}i&&p++}let v;if(p>0){const S=u[p-1];v=f.indexOf(S)+1}else v=f.indexOf(u[0]),v===-1&&(v=0);const C=[v],w=(S,y)=>S-y;if(i){let S=v+1;const y=d.length-1;for(;S<=y;)C.push(S),S++;C.sort(w)}else{let S=v;const y=d.length-1;let R=d[S];for(;S<=y&&c.indexOf(R)<0;)S++,C.push(S),R=d[S];S=v-1;const A=0;for(;S>=A;)C.push(S),S--;C.sort(w).reverse()}return C}function Fy(e){var c;const{pinned:t,fromKeyboard:i,gos:s,ctrlsSvc:n,useHeaderRow:o,skipScrollPadding:r}=e;let a=(c=n.getHeaderRowContainerCtrl(t))==null?void 0:c.eViewport,{x:l}=e;return a?(i&&(l-=a.getBoundingClientRect().left),s.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),t==null&&!r&&(l+=n.get("center").getCenterViewportScrollLeft()),l):0}function rw(e,t){for(const i of e)i.moving=t,i.dispatchColEvent("movingChanged","uiColumnMoved")}var dR=7,Py=100,$p=Py/2,Y$=5,X$=100,Q$=class extends V{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!fe(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,{dragItem:i}=t||{},s=(i==null?void 0:i.columns)??[];for(const n of s){const o=n.getPinned();if(n.getColDef().lockPinned){if(o==e)return"move";continue}const r=i==null?void 0:i.containerType;if(r===e||!e)return"move";if(e&&(!o||r!==e))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,i=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(i,!0,"uiColumnDragged");else{const n=t.visibleState,o=(i||[]).filter(r=>n[r.getId()]&&!r.isVisible());this.setColumnsVisible(o,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(i,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,s=!1){const{gos:n,ctrlsSvc:o}=this.beans,r=n.get("suppressMoveWhenColumnDragging");if(s&&!r){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!s&&Ht(e.hDirection))return;const a=Fy({x:e.x,pinned:this.pinned,gos:n,ctrlsSvc:o});t||this.checkCenterForScrolling(a),r?this.handleColumnDragWhileSuppressingMovement(e,t,i,a,s):this.handleColumnDragWhileAllowingMovement(e,t,i,a,s)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!(e!=null&&e.length))return;const s=e.filter(n=>!n.getColDef().lockVisible);s.length&&this.beans.colModel.setColsVisible(s,t,i)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:i}=e;this.beans.colMoves.moveColumns(t,i,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,i,s,n){const o=this.getAllMovingColumns(e,!0);if(n){const r=this.isAttemptingToPin(o);r&&this.attemptToPinColumns(o,void 0,!0);const{fromLeft:a,xPosition:l}=this.getNormalisedXPositionInfo(o,r)||{};if(a==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:l,fromEnter:t,fakeEvent:i,fromLeft:a})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,s)}}handleColumnDragWhileAllowingMovement(e,t,i,s,n){const o=this.getAllMovingColumns(e),r=this.normaliseDirection(e.hDirection)==="right",a=e.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:s,fromLeft:r,fromEnter:t,fakeEvent:i}),c=TD({...l,finished:n});c&&(this.lastMovedInfo=c)}getAllMovingColumns(e,t=!1){const i=e.dragSource.getDragItem();let s=null;t?(s=i.columnsInSplit,s||(s=i.columns)):s=i.columns;const n=o=>o.getColDef().lockPinned?o.getPinned()==this.pinned:!0;return s?s.filter(n):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:s,fromLeft:n,fromEnter:o,fakeEvent:r}=e,{gos:a,colModel:l,colMoves:c,visibleCols:d}=this.beans;return{allMovingColumns:t,isFromHeader:i,fromLeft:n,xPosition:s,pinned:this.pinned,fromEnter:o,fakeEvent:r,gos:a,colModel:l,colMoves:c,visibleCols:d}}highlightHoveredColumn(e,t){var d;const{gos:i,colModel:s}=this.beans,n=i.get("enableRtl"),o=s.getCols().filter(h=>h.isVisible()&&h.getPinned()===this.pinned);let r=null,a=null,l=null;for(const h of o){if(a=h.getActualWidth(),r=this.getNormalisedColumnLeft(h,0,n),r!=null){const u=r+a;if(r<=t&&u>=t){l=h;break}}r=null,a=null}if(l)e.indexOf(l)!==-1&&(l=null);else{for(let h=o.length-1;h>=0;h--){const u=o[h],f=o[h].getParent();if(!f){l=u;break}const p=f==null?void 0:f.getDisplayedLeafColumns();if(p.length){l=Mt(p);break}}if(!l)return;r=this.getNormalisedColumnLeft(l,0,n),a=l.getActualWidth()}if(((d=this.lastHighlightedColumn)==null?void 0:d.column)!==l&&this.clearHighlighted(),l==null||r==null||a==null)return;let c;t-r<a/2!==n?c=0:c=1,hR(l,c),this.lastHighlightedColumn={column:l,position:c}}getNormalisedXPositionInfo(e,t){const{gos:i,visibleCols:s}=this.beans,n=i.get("enableRtl"),{firstMovingCol:o,column:r,position:a}=this.getColumnMoveAndTargetInfo(e,t,n);if(!o||!r||a==null)return;const l=s.allCols,c=l.indexOf(o),d=l.indexOf(r),h=a===0!==n,u=c<d||c===d&&!h;let f=0;if(h?u&&(f-=1):u||(f+=1),d+f===c)return;const p=l[d+f];if(!p)return;const m=this.getNormalisedColumnLeft(p,20,n);return{fromLeft:u,xPosition:m}}getColumnMoveAndTargetInfo(e,t,i){const s=this.lastHighlightedColumn||{},{firstMovingCol:n,lastMovingCol:o}=J$(e);if(!n||!o||s.column||!t)return{firstMovingCol:n,...s};const a=this.getPinDirection()==="left";return{firstMovingCol:n,position:a?1:0,column:a!==i?n:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,i){const{gos:s,ctrlsSvc:n}=this.beans,o=e.getLeft();if(o==null)return null;const r=e.getActualWidth();return Fy({x:i?o+r-t:o+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:s,ctrlsSvc:n})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>dR;return t&&i||e.some(s=>s.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:s,fakeEvent:n,fromLeft:o}=e,r=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:o,fromEnter:s,fakeEvent:n}),{columns:a,toIndex:l}=PD(r)||{};a&&l!=null&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(hR(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),i=t.getCenterViewportScrollLeft(),s=i+t.getCenterWidth();let n,o;this.gos.get("enableRtl")?(n=e<i+$p,o=e>s-$p):(o=e<i+$p,n=e>s-$p),this.needToMoveRight=n,this.needToMoveLeft=o,o||n?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),X$),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){var s;let e;this.intervalCount++,e=10+this.intervalCount*Y$,e>Py&&(e=Py);let t=null;const i=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:n,dragAndDrop:o,gos:r}=this.beans;if(this.failedMoveAttempts<=dR+1||!n)return;if(o.setDragImageCompIcon("pinned"),!r.get("suppressMoveWhenColumnDragging")){const a=(s=this.lastDraggingEvent)==null?void 0:s.dragItem.columns;this.attemptToPinColumns(a,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,i=!1){const s=(e||[]).filter(r=>!r.getColDef().lockPinned);if(!s.length)return 0;i&&(t=this.getPinDirection());const{pinnedCols:n,dragAndDrop:o}=this.beans;return n==null||n.setColsPinned(s,t,"uiColumnDragged"),i&&o.nudge(),s.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function hR(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function J$(e){const t=e.length;let i,s;for(let n=0;n<t;n++){if(!i){const o=e[n];o.getLeft()!=null&&(i=o)}if(!s){const o=e[t-1-n];o.getLeft()!=null&&(s=o)}if(i&&s)break}return{firstMovingCol:i,lastMovingCol:s}}var Z$=class extends V{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,i=this.pinned;e.whenReady(this,s=>{let n;const o=s.gridBodyCtrl.eBodyViewport;switch(i){case"left":n=[[o,s.left.eContainer],[s.bottomLeft.eContainer],[s.topLeft.eContainer]];break;case"right":n=[[o,s.right.eContainer],[s.bottomRight.eContainer],[s.topRight.eContainer]];break;default:n=[[o,s.center.eViewport],[s.bottomCenter.eViewport],[s.topCenter.eViewport]];break}this.eSecondaryContainers=n}),this.moveColumnFeature=this.createManagedBean(new Q$(i)),this.bodyDropPivotTarget=this.createManagedBean(new V$(i)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},e3=class extends V{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,i){const s=this.beans.colModel.getCols();if(!s)return;const n=s[e];this.moveColumns([n],t,i)}moveColumns(e,t,i,s=!0){const{colModel:n,colAnimation:o,visibleCols:r,eventSvc:a}=this.beans,l=n.getCols();if(!l)return;if(t>l.length-e.length){J(30,{toIndex:t});return}o==null||o.start();const c=n.getColsForKeys(e);this.doesMovePassRules(c,t)&&(Tx(n.getCols(),c,t),r.refresh(i),a.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,toIndex:t,finished:s,source:i})),o==null||o.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){const{colModel:t,gos:i}=this.beans;return!(!yT(e,t.getColTree())||!(n=>{const o=c=>c?c==="left"||c===!0?-1:1:0,r=i.get("enableRtl");let a=r?1:-1,l=!0;for(const c of n){const d=o(c.getColDef().lockPosition);r?d>a&&(l=!1):d<a&&(l=!1),a=d}return l})(e))}getProposedColumnOrder(e,t){const s=this.beans.colModel.getCols().slice();return Tx(s,e,t),s}createBodyDropTarget(e,t){return new Z$(e,t)}moveHeader(e,t,i,s,n){const{ctrlsSvc:o,gos:r,colModel:a,visibleCols:l,focusSvc:c}=this.beans,d=t.getBoundingClientRect(),h=d.left,u=ni(i),f=u?d.width:i.getActualWidth(),p=e==="left"!==r.get("enableRtl"),m=Fy({x:p?h-20:h+f+20,pinned:s,fromKeyboard:!0,gos:r,ctrlsSvc:o}),v=c.focusedHeader;TD({allMovingColumns:u?i.getLeafColumns():[i],isFromHeader:!0,fromLeft:e==="right",xPosition:m,pinned:s,fromEnter:!1,fakeEvent:!1,gos:r,colModel:a,colMoves:this,visibleCols:l,finished:!0});let C;if(u){const w=i.getDisplayedLeafColumns();C=p?w[0]:Mt(w)}else C=i;if(o.getScrollFeature().ensureColumnVisible(C,"auto"),(!n.isAlive()||r.get("ensureDomOrder"))&&v){let w;if(u){const S=i.getGroupId(),y=i.getLeafColumns();if(!y.length)return;const R=y[0].getParent();if(!R)return;w=t3(R,S)}else w=i;w&&c.focusHeaderPosition({headerPosition:{...v,column:w}})}}setDragSourceForHeader(e,t,i){const{gos:s,colModel:n,dragAndDrop:o,visibleCols:r}=this.beans;let a=!s.get("suppressDragLeaveHidesColumns");const l=ni(t),c=l?t.getProvidedColumnGroup().getLeafColumns():[t],h={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:l?()=>s3(t,r.allCols):()=>i3(t),dragItemName:i,onDragStarted:()=>{a=!s.get("suppressDragLeaveHidesColumns"),rw(c,!0)},onDragStopped:()=>rw(c,!1),onDragCancelled:()=>rw(c,!1),onGridEnter:u=>{if(a){const{columns:f=[],visibleState:p}=u??{},m=l?C=>!p||p[C.getColId()]:()=>!0,v=f.filter(C=>!C.getColDef().lockVisible&&m(C));n.setColsVisible(v,!0,"uiColumnMoved")}},onGridExit:u=>{var f;if(a){const p=((f=u==null?void 0:u.columns)==null?void 0:f.filter(m=>!m.getColDef().lockVisible))||[];n.setColsVisible(p,!1,"uiColumnMoved")}}};return o.addDragSource(h,!0),h}};function t3(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function i3(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}function s3(e,t){var a;const i=e.getProvidedColumnGroup().getLeafColumns(),s={};for(const l of i)s[l.getId()]=l.isVisible();const n=[];for(const l of t)i.indexOf(l)>=0&&(n.push(l),Qn(i,l));for(const l of i)n.push(l);const o=[],r=e.getLeafColumns();for(const l of n)r.indexOf(l)!==-1&&o.push(l);return{columns:n,columnsInSplit:o,visibleState:s,containerType:(a=o[0])==null?void 0:a.pinned}}var n3={moduleName:"ColumnMove",version:ue,beans:[e3,H$],apiFunctions:{moveColumnByIndex:G$,moveColumns:B$},dependsOn:[FD],css:[N$]},o3=class extends V{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const s=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||s.push(i),this.getPreferredWidthForElements(s)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const i=document.createElement("form");i.style.position="fixed";const s=this.centerRowContainerCtrl.eContainer;for(const o of e)this.cloneItemIntoDummy(o,i);s.appendChild(i);const n=i.offsetWidth;return i.remove(),t=t??this.gos.get("autoSizePadding"),n+t}getHeaderCellForColumn(e){let t=null;for(const i of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){const s=i.getHtmlElementForColumnHeader(e);s!=null&&(t=s)}return t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const s=document.createElement("div"),n=s.classList;["ag-header-cell","ag-header-group-cell"].some(a=>i.classList.contains(a))?(n.add("ag-header","ag-header-row"),s.style.position="static"):n.add("ag-row");let r=e.parentElement;for(;r;){if(["ag-header-row","ag-row"].some(l=>r.classList.contains(l))){for(let l=0;l<r.classList.length;l++){const c=r.classList[l];c!="ag-row-position-absolute"&&n.add(c)}break}r=r.parentElement}s.appendChild(i),t.appendChild(s)}},DD={moduleName:"AutoWidth",version:ue,beans:[o3]};function r3(e,t,i=!0,s="api"){var n;(n=e.colResize)==null||n.setColumnWidths(t,!1,i,s)}var a3=class extends V{constructor(e,t,i,s){super(),this.comp=e,this.eResize=t,this.pinned=i,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const{horizontalResizeSvc:e,gos:t,colAutosize:i}=this.beans,s=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(s),!t.get("suppressAutoSize")&&i&&this.addDestroyFunc(i.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:s,groupAfterColumns:n,groupAfterStartWidth:o,groupAfterRatios:r}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=s,this.resizeTakeFromCols=n,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=r,this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){const s=this.normaliseDragChange(t),n=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(n,i,e)}getInitialValues(e){var l;const t=c=>c.reduce((d,h)=>d+h.getActualWidth(),0),i=(c,d)=>c.map(h=>h.getActualWidth()/d),s=this.getColumnsToResize(),n=t(s),o=i(s,n),r={columnsToResize:s,resizeStartWidth:n,resizeRatios:o};let a=null;if(e&&(a=((l=this.beans.colGroupSvc)==null?void 0:l.getGroupAtDirection(this.columnGroup,"After"))??null),a){const c=a.getDisplayedLeafColumns(),d=r.groupAfterColumns=c.filter(u=>u.isResizable()),h=r.groupAfterStartWidth=t(d);r.groupAfterRatios=i(d,h)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;const s={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(s,e,t,i)}resizeColumns(e,t,i,s=!0){var h;const{columnsToResize:n,resizeStartWidth:o,resizeRatios:r,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,d=[];if(d.push({columns:n,ratios:r,width:t}),a){const u=t-o;d.push({columns:a,ratios:c,width:l-u})}(h=this.beans.colResize)==null||h.resizeColumnSets({resizeSets:d,finished:s,source:i}),s&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},l3=class extends V{constructor(e,t,i,s,n){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=s,this.ctrl=n}postConstruct(){const e=[];let t,i;const s=()=>{if(Ot(this.eResize,t),!t)return;const{horizontalResizeSvc:r,colAutosize:a}=this.beans,l=r.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(l),i&&a&&e.push(a.addColumnAutosizeListeners(this.eResize,this.column))},n=()=>{for(const r of e)r();e.length=0},o=()=>{const r=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(r!==t||a!==i)&&(t=r,i=a,n(),s())};o(),this.addDestroyFunc(n),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){const{column:i,lastResizeAmount:s,resizeStartWidth:n,beans:o}=this,r=this.normaliseResizeAmount(t),a=n+r,l=[{key:i,newWidth:a}],{pinnedCols:c,ctrlsSvc:d,colResize:h}=o;if(this.column.getPinned()){const u=(c==null?void 0:c.leftWidth)??0,f=(c==null?void 0:c.rightWidth)??0,p=Ag(d.getGridBodyCtrl().eBodyViewport)-50;if(u+f+(r-s)>p)return}this.lastResizeAmount=r,h==null||h.setColumnWidths(l,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i=this.pinned!=="left",s=this.pinned==="right";return this.gos.get("enableRtl")?i&&(t*=-1):s&&(t*=-1),t}},c3=class extends V{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,i,s){const n=[],{colModel:o,gos:r,visibleCols:a}=this.beans;for(const l of e){const c=o.getColDefCol(l.key)||o.getCol(l.key);if(!c)continue;if(n.push({width:l.newWidth,ratios:[1],columns:[c]}),r.get("colResizeDefault")==="shift"&&(t=!t),t){const h=a.getColAfter(c);if(!h)continue;const u=c.getActualWidth()-l.newWidth,f=h.getActualWidth()+u;n.push({width:f,ratios:[1],columns:[h]})}}n.length!==0&&this.resizeColumnSets({resizeSets:n,finished:i,source:s})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:s}=e;if(!(!t||t.every(d=>d3(d)))){if(i){const d=t&&t.length>0?t[0].columns:null;ou(this.eventSvc,d,i,s)}return}const o=[],r=[];for(const d of t){const{width:h,columns:u,ratios:f}=d,p={},m={};for(const w of u)r.push(w);let v=!0,C=0;for(;v;){if(C++,C>1e3){At(31);break}v=!1;const w=[];let S=0,y=h;u.forEach((A,P)=>{if(m[A.getId()])y-=p[A.getId()];else{w.push(A);const M=f[P];S+=M}});const R=1/S;w.forEach((A,P)=>{const T=P===w.length-1;let M;T?M=y:(M=Math.round(f[P]*h*R),y-=M);const N=A.getMinWidth(),_=A.getMaxWidth();M<N?(M=N,m[A.getId()]=!0,v=!0):_>0&&M>_&&(M=_,m[A.getId()]=!0,v=!0),p[A.getId()]=M})}for(const w of u){const S=p[w.getId()];w.getActualWidth()!==S&&(w.setActualWidth(S,s),o.push(w))}}const a=o.length>0;let l=[];if(a){const{colFlex:d,visibleCols:h,colViewport:u}=this.beans;l=(d==null?void 0:d.refreshFlexedColumns({resizingCols:r,skipSetLeft:!0}))??[],h.setLeftValues(s),h.updateBodyWidths(),u.checkViewportColumns()}const c=r.concat(l);(a||i)&&ou(this.eventSvc,c,i,s,l)}resizeHeader(e,t,i){if(!e.isResizable())return;const s=e.getActualWidth(),n=e.getMinWidth(),o=e.getMaxWidth(),r=Math.min(Math.max(s+t,n),o);this.setColumnWidths([{key:e,newWidth:r}],i,!0,"uiColumnResized")}createResizeFeature(e,t,i,s,n){return new l3(e,t,i,s,n)}createGroupResizeFeature(e,t,i,s){return new a3(e,t,i,s)}};function d3(e){const{columns:t,width:i}=e;let s=0,n=0,o=!0;for(const l of t){const c=l.getMinWidth();s+=c||0;const d=l.getMaxWidth();d>0?n+=d:o=!1}const r=i>=s,a=!o||i<=n;return r&&a}var h3={moduleName:"ColumnResize",version:ue,beans:[c3],apiFunctions:{setColumnWidths:r3},dependsOn:[O$,DD]},u3=class extends V{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);for(const t of this.columnGroup.getLeafColumns())t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})}removeListenersOnChildrenColumns(){for(const e of this.removeChildListenersFuncs)e();this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",e===0)}},g3=class extends ZS{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(e,t,i,s,n){const{column:o,beans:r}=this,{context:a,colNames:l,colHover:c,rangeSvc:d,colResize:h}=r;this.comp=e,n=pp(this,a,n),this.setGui(t,n),this.displayName=l.getDisplayNameForColumnGroup(o,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(n),this.setupExpandable(n),this.setupTooltip(),this.setupAutoHeight({wrapperElement:s,compBean:n}),this.setupUserComp(),this.addHeaderMouseListeners(n),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const u=this.rowCtrl.pinned,f=o.getProvidedColumnGroup().getLeafColumns();c==null||c.createHoverFeature(n,f,t),d==null||d.createRangeHighlightFeature(n,o,e),n.createManagedBean(new JS(o,t,r)),n.createManagedBean(new u3(e,o)),h?this.resizeFeature=n.createManagedBean(h.createGroupResizeFeature(e,i,u,o)):e.setResizableDisplayed(!1),n.createManagedBean(new Cu(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(n,f),n.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(n),n.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.getDefinition();return Le(t.gos,{colDef:i,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");i!=null?i===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,s=Mt(t)===e;if(!i&&!s)return;const n=e.getHighlighted(),o=!!this.rowCtrl.getHeaderCellCtrls().find(l=>l.column.isMoving());let r=!1,a=!1;if(o){const l=this.beans.gos.get("enableRtl"),c=n===1,d=n===0;i&&(l?a=c:r=d),s&&(l?r=d:a=c)}this.comp.toggleCss("ag-header-highlight-before",r),this.comp.toggleCss("ag-header-highlight-after",a)}resizeHeader(e,t){const{resizeFeature:i}=this;if(!i)return;const s=i.getInitialValues(t);i.resizeColumns(s,s.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){var t;(t=this.resizeFeature)==null||t.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:i,enterpriseMenuFactory:s}=this.beans,n=this.column,o=n.getProvidedColumnGroup(),r=Le(i,{displayName:this.displayName,columnGroup:n,setExpanded:l=>{e.setColumnGroupOpened(o,l,"gridInitializing")},setTooltip:(l,c)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(l,c)},showColumnMenu:(l,c)=>s==null?void 0:s.showMenuAfterButtonClick(o,l,"columnMenu",c),showColumnMenuAfterMouseClick:(l,c)=>s==null?void 0:s.showMenuAfterMouseEvent(o,l,"columnMenu",c),eGridHeader:this.eGui}),a=iB(t,r);a&&this.comp.setUserCompDetails(a)}addHeaderMouseListeners(e){const t=n=>this.handleMouseOverChange(n.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),s=n=>this.handleContextMenuMouseEvent(n,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:i,contextmenu:s})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){var i;this.tooltipFeature=(i=this.beans.tooltipSvc)==null?void 0:i.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),i=gD(t,this.gos,null,e);e.isPadding()?(i.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(n=>n.isSpanHeaderHeight())&&i.push("ag-header-span-height")):(i.push("ag-header-group-cell-with-group"),t!=null&&t.wrapHeaderText&&i.push("ag-header-cell-wrap-text"));for(const s of i)this.comp.toggleCss(s,!0)}setupMovingCss(e){const{column:t}=this,s=t.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());for(const o of s)e.addManagedListeners(o,{movingChanged:n});n()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===G.ENTER){const i=this.column,s=!i.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(i.getProvidedColumnGroup(),s,"uiColumnExpanded")}}setDragSource(e){var t;!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=((t=this.beans.colMoves)==null?void 0:t.setDragSourceForHeader(e,this.column,this.displayName))??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function f3(e,t,i){var s;(s=e.colGroupSvc)==null||s.setColumnGroupOpened(t,i,"api")}function p3(e,t,i){var s;return((s=e.colGroupSvc)==null?void 0:s.getColumnGroup(t,i))??null}function m3(e,t){var i;return((i=e.colGroupSvc)==null?void 0:i.getProvidedColGroup(t))??null}function v3(e,t,i){return e.colNames.getDisplayNameForColumnGroup(t,i)||""}function C3(e){var t;return((t=e.colGroupSvc)==null?void 0:t.getColumnGroupState())??[]}function w3(e,t){var i;(i=e.colGroupSvc)==null||i.setColumnGroupState(t,"api")}function b3(e){var t;(t=e.colGroupSvc)==null||t.resetColumnGroupState("api")}function y3(e){return e.visibleCols.treeLeft}function S3(e){return e.visibleCols.treeCenter}function x3(e){return e.visibleCols.treeRight}function R3(e){return e.visibleCols.getAllTrees()}function E3(e,t){for(let i=0;i<t.length;i++){const s=e.indexOf(t[i]);s>=0&&(e[s]=e[e.length-1],e.pop())}}var A3=class extends V{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){const{colFlex:i,colModel:s,colGroupSvc:n,colViewport:o,selectionColSvc:r}=this.beans;t||this.buildTrees(s,n),n==null||n.updateOpenClosedVisibility(),this.leftCols=aw(this.treeLeft),this.centerCols=aw(this.treeCenter),this.rightCols=aw(this.treeRight),r==null||r.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(s),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(a=>a.isAutoHeight()),i==null||i.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(s,this.leftCols,this.rightCols,e),o.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(const t of this.allCols){let i=t.getParent();for(;i;){if(!i.isPadding()){const s=i.getProvidedColumnGroup().getLevel()+1;s>e&&(e=s);break}i=i.getParent()}}return e}updateBodyWidths(){const e=er(this.centerCols),t=er(this.leftCols),i=er(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,i,s){let n,o;this.gos.get("enableRtl")?(n=t?t[0]:null,o=i?Mt(i):null):(n=t?Mt(t):null,o=i?i[0]:null);for(const r of e.getCols())r.setLastLeftPinned(r===n,s),r.setFirstRightPinned(r===o,s)}buildTrees(e,t){const i=e.getColsToShow(),s=i.filter(l=>l.getPinned()=="left"),n=i.filter(l=>l.getPinned()=="right"),o=i.filter(l=>l.getPinned()!="left"&&l.getPinned()!="right"),r=new AT,a=l=>t?t.createColumnGroups(l):l.columns;this.treeLeft=a({columns:s,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:n,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:o,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),i=[],s=[],n=[];for(const o of t){const r=o.getPinned();r?r===!0||r==="left"?i.push(o):n.push(o):s.push(o)}this.ariaOrderColumns=i.concat(s).concat(n)}getAriaColIndex(e){let t;return ni(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){for(const e of[this.treeLeft,this.treeRight,this.treeCenter])for(const t of e)ni(t)&&t.checkLeft()}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const s=t.getCols().slice(0),n=this.gos.get("enableRtl");for(const o of[this.leftCols,this.rightCols,this.centerCols]){if(n){let r=er(o);for(const a of o)r-=a.getActualWidth(),a.setLeft(r,e)}else{let r=0;for(const a of o)a.setLeft(r,e),r+=a.getActualWidth()}E3(s,o)}for(const o of s)o.setLeft(null,e)}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,i,s){const n=[];let o=null;for(let r=0;r<t.length;r++){const a=t[r],l=t.length-r,c=Math.min(a.getColSpan(e),l),d=[a];if(c>1){const u=c-1;for(let f=1;f<=u;f++)d.push(t[r+f]);r+=u}let h;if(i){h=!1;for(const u of d)i(u)&&(h=!0)}else h=!0;h&&(n.length===0&&o&&(s&&s(a))&&n.push(o),n.push(a)),o=a}return n}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,i=t.indexOf(e);return i>0?t[i-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};Gc(this.treeCenter,!1,e),Gc(this.treeLeft,!1,e),Gc(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const s=this[t[i]];if(s.length)return e?Mt(s):s[0]}return null}getColAfter(e){const t=this.allCols,i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getColsLeftWidth(){return er(this.leftCols)}getDisplayedColumnsRightWidth(){return er(this.rightCols)}isColAtEdge(e,t){const i=this.allCols;if(!i.length)return!1;const s=t==="first";let n;if(ni(e)){const o=e.getDisplayedLeafColumns();if(!o.length)return!1;n=s?o[0]:Mt(o)}else n=e;return(s?i[0]:Mt(i))===n}};function Gc(e,t,i){if(e)for(let s=0;s<e.length;s++){const n=e[s];if(ni(n)){const o=t?n.getDisplayedChildren():n.getChildren();Gc(o,t,i)}i(n)}}function aw(e){const t=[];return Gc(e,!0,i=>{il(i)&&t.push(i)}),t}var F3=class extends V{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[],t=this.beans.colModel.getColTree();return Nr(null,t,i=>{es(i)&&e.push({groupId:i.getGroupId(),open:i.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const i=[];Nr(null,t,s=>{if(es(s)){const n=s.getColGroupDef(),o={groupId:s.getGroupId(),open:n?n.openByDefault:void 0};i.push(o)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){const{colModel:i,colAnimation:s,visibleCols:n,eventSvc:o}=this.beans;if(!i.getColTree().length)return;s==null||s.start();const a=[];for(const l of e){const c=l.groupId,d=l.open,h=this.getProvidedColGroup(c);h&&h.isExpanded()!==d&&(h.setExpanded(d),a.push(h))}n.refresh(t,!0),a.length&&o.dispatchEvent({type:"columnGroupOpened",columnGroup:a.length===1?a[0]:void 0,columnGroups:a}),s==null||s.finish()}setColumnGroupOpened(e,t,i){let s;es(e)?s=e.getId():s=e||"",this.setColumnGroupState([{groupId:s,open:t}],i)}getProvidedColGroup(e){let t=null;return Nr(null,this.beans.colModel.getColTree(),i=>{es(i)&&i.getId()===e&&(t=i)}),t}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),s=e.getDisplayedLeafColumns(),n=t==="After"?Mt(s):s[0],o=`getCol${t}`;for(;;){const r=this.beans.visibleCols[o](n);if(!r)return null;const a=this.getColGroupAtLevel(r,i);if(a!==e)return a}}getColGroupAtLevel(e,t){let i=e.getParent(),s,n;for(;s=i.getProvidedColumnGroup().getLevel(),n=i.getPaddingLevel(),!(s+n<=t);)i=i.getParent();return i}updateOpenClosedVisibility(){const e=this.beans.visibleCols.getAllTrees();Gc(e,!1,t=>{ni(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(ni(e))return e;const i=this.beans.visibleCols.getAllTrees(),s=typeof t=="number";let n=null;return Gc(i,!1,o=>{if(ni(o)){const r=o;let a;s?a=e===r.getGroupId()&&t===r.getPartId():a=e===r.getGroupId(),a&&(n=r)}}),n}createColumnGroups(e){const{columns:t,idCreator:i,pinned:s,oldDisplayedGroups:n,isStandaloneStructure:o}=e,r=this.mapOldGroupsById(n),a=[];let l=t;for(;l.length;){const c=l;l=[];let d=0;const h=u=>{const f=d;d=u;const p=c[f],v=(ni(p)?p.getProvidedColumnGroup():p).getOriginalParent();if(v==null){for(let w=f;w<u;w++)a.push(c[w]);return}const C=this.createColumnGroup(v,i,r,s,o);for(let w=f;w<u;w++)C.addChild(c[w]);l.push(C)};for(let u=1;u<c.length;u++){const f=c[u],m=(ni(f)?f.getProvidedColumnGroup():f).getOriginalParent(),v=c[d],w=(ni(v)?v.getProvidedColumnGroup():v).getOriginalParent();m!==w&&h(u)}d<c.length&&h(c.length)}return o||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,i,s,n,o,r){const a=n.getUniqueKey(t.groupId||null,null),l=Px(this.beans,t,a),c=new Dm(l,a,!1,i);this.createBean(c);const d=this.findExistingGroup(t,o);d&&o.splice(d.idx,1);const h=d==null?void 0:d.group;h&&c.setExpanded(h.isExpanded());const u=CT(this.beans,l.children,i+1,e,s,n,o,r);return c.setChildren(u),c}balanceColumnTree(e,t,i,s){const n=[];for(let o=0;o<e.length;o++){const r=e[o];if(es(r)){const a=r,l=this.balanceColumnTree(a.getChildren(),t+1,i,s);a.setChildren(l),n.push(a)}else{let a,l;for(let c=t;c<i;c++){const d=s.getUniqueKey(null,null),h=Px(this.beans,null,d),u=new Dm(h,d,!0,c);this.createBean(u),l&&l.setChildren([u]),l=u,a||(a=l)}if(a&&l)if(n.push(a),e.some(d=>es(d))){l.setChildren([r]);continue}else{l.setChildren(e);break}n.push(r)}}return n}findDepth(e){let t=0,i=e;for(;i!=null&&i[0]&&es(i[0]);)t++,i=i[0].getChildren();return t}findMaxDepth(e,t){let i=t;for(let s=0;s<e.length;s++){const n=e[s];if(es(n)){const o=n,r=this.findMaxDepth(o.getChildren(),t+1);i<r&&(i=r)}}return i}balanceTreeForAutoCols(e,t){const i=[];for(const s of e){let n=s;for(let o=t-1;o>=0;o--){const r=new Dm(null,`FAKE_PATH_${s.getId()}}_${o}`,!0,o);this.createBean(r),r.setChildren([n]),n.originalParent=r,n=r}t===0&&(s.originalParent=null),i.push(n)}return i}findExistingGroup(e,t){if(e.groupId!=null)for(let s=0;s<t.length;s++){const n=t[s];if(n.getColGroupDef()&&n.getId()===e.groupId)return{idx:s,group:n}}}createColumnGroup(e,t,i,s,n){const o=e.getGroupId(),r=t.getInstanceIdForKey(o),a=QT(o,r);let l=i[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),fe(l)?l.reset():(l=new Ig(e,o,r,s),n||this.createBean(l)),l}mapOldGroupsById(e){const t={},i=s=>{for(const n of s)if(ni(n)){const o=n;t[n.getUniqueId()]=o,i(o.getChildren())}};return e&&i(e),t}setupParentsIntoCols(e,t){for(const i of e??[])if(i.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),i.parent=t,ni(i)){const s=i;this.setupParentsIntoCols(s.getChildren(),s)}}},P3={moduleName:"ColumnGroup",version:ue,dynamicBeans:{headerGroupCellCtrl:g3},beans:[F3],apiFunctions:{getAllDisplayedColumnGroups:R3,getCenterDisplayedColumnGroups:S3,getColumnGroup:p3,getColumnGroupState:C3,getDisplayNameForColumnGroup:v3,getLeftDisplayedColumnGroups:y3,getProvidedColumnGroup:m3,getRightDisplayedColumnGroups:x3,resetColumnGroupState:b3,setColumnGroupOpened:f3,setColumnGroupState:w3}},T3={tag:"div",cls:"ag-skeleton-container"},D3=class extends xt{constructor(){super(T3)}init(e){const t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>Rg(e.eParentOfValue)),Rg(e.eParentOfValue,t),e.deferRender?this.setupLoading(e):e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.getLocaleTextFunc();this.getGui().textContent=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");su(this.getGui(),t)}setupLoading(e){const t=ri({tag:"div",cls:"ag-skeleton-effect"}),i=e.node.rowIndex;if(i!=null){const o=75+25*(i%2===0?Math.sin(i):Math.cos(i));t.style.width=`${o}%`}this.getGui().appendChild(t);const s=this.getLocaleTextFunc(),n=e.deferRender?s("ariaDeferSkeletonCellLoading","Cell is loading"):s("ariaSkeletonCellLoading","Row data is loading");su(this.getGui(),n)}refresh(e){return!1}},M3={moduleName:"CheckboxCellRenderer",version:ue,userComponents:{agCheckboxCellRenderer:gW}},I3={moduleName:"SkeletonCellRenderer",version:ue,userComponents:{agSkeletonCellRenderer:D3}};function k3(e,t){const i=e.colModel.getColDefCol(t);return i?i.getColDef():null}function _3(e){return e.colModel.getColumnDefs(!0)}function L3(e,t,i){return e.colNames.getDisplayNameForColumn(t,i)||""}function O3(e,t){return e.colModel.getColDefCol(t)}function N3(e){return e.colModel.getColDefCols()}function H3(e,t){return Yn(e,t,"api")}function G3(e){return av(e)}function B3(e){FG(e,"api")}function V3(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()}function z3(e){return e.visibleCols.isPinningLeft()}function W3(e){return e.visibleCols.isPinningRight()}function $3(e,t){return e.visibleCols.getColAfter(t)}function U3(e,t){return e.visibleCols.getColBefore(t)}function j3(e,t,i){e.colModel.setColsVisible(t,i,"api")}function K3(e,t,i){var s;(s=e.pinnedCols)==null||s.setColsPinned(t,i,"api")}function q3(e){return e.colModel.getCols()}function Y3(e){return e.visibleCols.leftCols}function X3(e){return e.visibleCols.centerCols}function Q3(e){return e.visibleCols.rightCols}function J3(e){return e.visibleCols.allCols}function Z3(e){return e.colViewport.getViewportColumns()}function Ty(e,t){if(!e)return;const i=e,s={};for(const n of Object.keys(i)){if(t&&t.indexOf(n)>=0||QP.has(n))continue;const o=i[n];typeof o=="object"&&o!==null&&o.constructor===Object?s[n]=Ty(o):s[n]=o}return s}var eU=class extends V{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,i,s,n=!1){var l,c;const o=e.slice();t?o.sort((d,h)=>i.indexOf(d)-i.indexOf(h)):(i||n)&&o.sort((d,h)=>s.indexOf(d)-s.indexOf(h));const r=(l=this.rowGroupColsSvc)==null?void 0:l.columns,a=(c=this.pivotColsSvc)==null?void 0:c.columns;return this.buildColumnDefs(o,r,a)}buildColumnDefs(e,t=[],i=[]){const s=[],n={};for(const o of e){const r=this.createDefFromColumn(o,t,i);let a=!0,l=r,c=o.getOriginalParent(),d=null;for(;c;){let h=null;if(c.isPadding()){c=c.getOriginalParent();continue}const u=n[c.getGroupId()];if(u){u.children.push(l),a=!1;break}if(h=this.createDefFromGroup(c),h&&(h.children=[l],n[h.groupId]=h,l=h,c=c.getOriginalParent()),c!=null&&d===c){a=!1;break}d=c}a&&s.push(l)}return s}createDefFromGroup(e){const t=Ty(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const s=Ty(e.getColDef());return s.colId=e.getColId(),s.width=e.getActualWidth(),s.rowGroup=e.isRowGroupActive(),s.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,s.pivot=e.isPivotActive(),s.pivotIndex=e.isPivotActive()?i.indexOf(e):null,s.aggFunc=e.isValueActive()?e.getAggFunc():null,s.hide=e.isVisible()?void 0:!0,s.pinned=e.isPinned()?e.getPinned():null,s.sort=e.getSort()?e.getSort():null,s.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,s}},tU=class extends V{constructor(){super(...arguments),this.beanName="colFlex",this.columnsHidden=!1}refreshFlexedColumns(e={}){const t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);const i=this.flexViewportWidth,{visibleCols:s,colDelayRenderSvc:n}=this.beans,o=s.centerCols;let r=-1;if(e.resizingCols){const m=new Set(e.resizingCols);for(let v=o.length-1;v>=0;v--)if(m.has(o[v])){r=v;break}}let a=!1;const l=o.map((m,v)=>{const C=m.getFlex(),w=C!=null&&C>0&&v>r;return a||(a=w),{col:m,isFlex:w,flex:Math.max(0,C??0),initialSize:m.getActualWidth(),min:m.getMinWidth(),max:m.getMaxWidth(),targetSize:0}});if(a?(n==null||n.hideColumns("colFlex"),this.columnsHidden=!0):this.columnsHidden&&this.revealColumns(n),!i||!a)return[];let c=l.length,d=l.reduce((m,v)=>m+v.flex,0),h=i;const u=(m,v)=>{m.frozenSize=v,m.col.setActualWidth(v,t),h-=v,d-=m.flex,c-=1},f=m=>m.frozenSize!=null;for(const m of l)m.isFlex||u(m,m.initialSize);for(;c>0;){const m=Math.round(d<1?h*d:h);let v,C=0,w=0;for(const R of l){if(f(R))continue;v=R,w+=m*(R.flex/d);const A=w-C,P=Math.round(A);R.targetSize=P,C+=P}v&&(v.targetSize+=m-C);let S=0;for(const R of l){if(f(R))continue;const A=R.targetSize,P=Math.min(Math.max(A,R.min),R.max);S+=P-A,R.violationType=P===A?void 0:P<A?"max":"min",R.targetSize=P}const y=S===0?"all":S>0?"min":"max";for(const R of l)f(R)||(y==="all"||R.violationType===y)&&u(R,R.targetSize)}e.skipSetLeft||s.setLeftValues(t),e.updateBodyWidths&&s.updateBodyWidths();const p=l.filter(m=>m.isFlex&&!m.violationType).map(m=>m.col);if(e.fireResizedEvent){const m=l.filter(C=>C.initialSize!==C.frozenSize).map(C=>C.col),v=l.filter(C=>C.flex).map(C=>C.col);ou(this.eventSvc,m,!0,t,v)}return this.revealColumns(n),p}revealColumns(e){this.columnsHidden&&(e==null||e.revealColumns("colFlex"),this.columnsHidden=!1)}initCol(e){const{flex:t,initialFlex:i}=e.colDef;t!==void 0?e.flex=t:i!==void 0&&(e.flex=i)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}};function ug(e,t,i){if(!t||!e)return;if(!i)return e[t];const s=t.split(".");let n=e;for(let o=0;o<s.length;o++){if(n==null)return;n=n[s[o]]}return n}var iU=["dateTimeString","dateString","text","number","boolean","date"],sU=class extends V{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===G.SPACE}},date({formatValue:e}){return{cellEditor:"agDateCellEditor",keyCreator:e}},dateString({formatValue:e}){return{cellEditor:"agDateStringCellEditor",keyCreator:e}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object({formatValue:e,colModel:t,colId:i}){return{cellEditorParams:{useFormatter:!0},comparator:(s,n)=>{const o=t.getColDefCol(i),r=o==null?void 0:o.getColDef();if(!o||!r)return 0;const a=s==null?"":e({column:o,node:null,value:s}),l=n==null?"":e({column:o,node:null,value:n});return a===l?0:a>l?1:-1},keyCreator:e}},text(){return{}}}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={},i={},s=d=>h=>{const{column:u,node:f,value:p}=h;let m=u.getColDef().valueFormatter;return m===d.groupSafeValueFormatter&&(m=d.valueFormatter),this.beans.valueSvc.formatValue(u,f,p,m)};for(const d of Object.keys(e)){const h=e[d],u={...h,groupSafeValueFormatter:fR(h,this.gos)};t[d]=u,i[d]=s(u)}const n=this.gos.get("dataTypeDefinitions")??{},o={};for(const d of Object.keys(n)){const h=n[d],u=this.processDataTypeDefinition(h,n,[d],e);u&&(t[d]=u,h.dataTypeMatcher&&(o[d]=h.dataTypeMatcher),i[d]=s(u))}const{valueParser:r,valueFormatter:a}=e.object,{valueParser:l,valueFormatter:c}=t.object;this.hasObjectValueParser=l!==r,this.hasObjectValueFormatter=c!==a,this.formatValueFuncs=i,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(o,e)}sortKeysInMatchers(e,t){const i={...e};for(const s of iU)delete i[s],i[s]=e[s]??t[s].dataTypeMatcher;return i}processDataTypeDefinition(e,t,i,s){let n;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let r=s[o];const a=t[o];if(r&&a&&(r=a),!gR(e,r,o))return;n=uR(r,e)}else{if(i.includes(o)){J(44);return}const r=t[o];if(!gR(e,r,o))return;const a=this.processDataTypeDefinition(r,t,[...i,o],s);if(!a)return;n=uR(a,e)}return{...n,groupSafeValueFormatter:fR(n,this.gos)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:s}=t;const{field:n}=t;if(s===void 0&&(s=e.cellDataType),(s==null||s===!0)&&(s=this.canInferCellDataType(e,t)?this.inferCellDataType(n,i):!1),!s){e.cellDataType=!1;return}const o=this.dataTypeDefinitions[s];if(!o){J(47,{cellDataType:s});return}return e.cellDataType=s,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,s,o,i),o.columnTypes}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=s=>{t.add(s.key)};e.__addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){const{gos:i}=this;if(!oi(i))return!1;const s={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(lw(t,s))return!1;const n=t.type===null?e.type:t.type;if(n){const o=i.get("columnTypes")??{};if(rv(n).some(a=>{const l=o[a.trim()];return l&&lw(l,s)}))return!1}return!lw(e,s)}inferCellDataType(e,t){if(!e)return;let i;const s=this.getInitialData();if(s){const o=e.includes(".")&&!this.gos.get("suppressFieldDotNotation");i=ug(s,e,o)}else this.initWaitForRowData(t);return i==null?void 0:Object.keys(this.dataTypeMatchers).find(o=>this.dataTypeMatchers[o](i))??"object"}getInitialData(){var t;const e=this.gos.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const i=(t=this.beans.rowModel.rootNode)==null?void 0:t._leafs;if(i!=null&&i.length)return i[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:i,eventSvc:s}=this.beans;t&&i&&(i.shouldQueueResizeOperations=!0);const[n]=this.addManagedEventListeners({rowDataUpdateStarted:o=>{const{firstRowData:r}=o;r&&(n==null||n(),this.isPendingInference=!1,this.processColumnsPendingInference(r,t),this.columnStateUpdatesPendingInference={},t&&(i==null||i.processResizeOperations()),s.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const s={},n={};for(const o of Object.keys(this.columnStateUpdatesPendingInference)){const r=this.columnStateUpdatesPendingInference[o],a=this.colModel.getCol(o);if(!a)return;const l=a.getColDef();if(!this.resetColDefIntoCol(a,"cellDataTypeInferred"))return;const c=a.getColDef();if(t&&c.type&&c.type!==l.type){const d=oU(a,r);d.rowGroup&&d.rowGroupIndex==null&&(s[o]=d),d.pivot&&d.pivotIndex==null&&(n[o]=d),i.push(d)}}t&&i.push(...this.generateColumnStateForRowGroupAndPivotIndexes(s,n)),i.length&&Yn(this.beans,{state:i},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},{rowGroupColsSvc:s,pivotColsSvc:n}=this.beans;return s==null||s.restoreColumnOrder(i,e),n==null||n.restoreColumnOrder(i,t),Object.values(i)}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const s=uy(this.beans,i,e.getColId());return e.setColDef(s,i,t),!0}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return e==="dateTime"||e==="dateTimeString"}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var s;if(t==null)return!0;const i=(s=this.getDataTypeDefinition(e))==null?void 0:s.dataTypeMatcher;return i?i(t):!0}validateColDef(e){const t=i=>J(48,{property:i});if(e.cellDataType==="object"){const{object:i}=this.dataTypeDefinitions;e.valueFormatter===i.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===i.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){var r;const t=e.cellDataType;if(!t||typeof t!="string")return;const{dataTypeDefinitions:i,beans:s,formatValueFuncs:n}=this,o=i[t];o&&((r=s.colFilter)==null||r.setColDefPropsForDataType(e,o,n[t]))}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,i,s){const n=this.formatValueFuncs[t],o=this.columnDefinitionPropsPerDataType[i.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:i,colId:s,formatValue:n});Object.assign(e,o)}getDateObjectTypeDef(e){const t=this.getLocaleTextFunc(),i=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:s=>Ts(s.newValue&&String(s.newValue)),valueFormatter:s=>s.value==null?"":!(s.value instanceof Date)||isNaN(s.value.getTime())?t("invalidDate","Invalid Date"):Ks(s.value,i)??"",dataTypeMatcher:s=>s instanceof Date}}getDateStringTypeDef(e){const t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:i=>Ts(i)??void 0,dateFormatter:i=>Ks(i??null,t)??void 0,valueParser:i=>Mm(String(i.newValue))?i.newValue:null,valueFormatter:i=>Mm(String(i.value))?String(i.value):"",dataTypeMatcher:i=>typeof i=="string"&&Mm(i)}}getDefaultDataTypes(){const e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>{var i,s;return((s=(i=t.newValue)==null?void 0:i.trim)==null?void 0:s.call(i))===""?null:Number(t.newValue)},valueFormatter:t=>t.value==null?"":typeof t.value!="number"||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:t=>typeof t=="number"},text:{baseDataType:"text",valueParser:t=>t.newValue===""?null:ny(t.newValue),dataTypeMatcher:t=>typeof t=="string"},boolean:{baseDataType:"boolean",valueParser:t=>{var i,s;return t.newValue==null?t.newValue:((s=(i=t.newValue)==null?void 0:i.trim)==null?void 0:s.call(i))===""?null:String(t.newValue).toLowerCase()==="true"},valueFormatter:t=>t.value==null?"":String(t.value),dataTypeMatcher:t=>typeof t=="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:{...this.getDateStringTypeDef("dateTimeString"),dataTypeMatcher:t=>typeof t=="string"&&wB(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>ny(t.value)??""}}}destroyColumnStateUpdateListeners(){for(const e of this.columnStateUpdateListenerDestroyFuncs)e();this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function uR(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...rv(e.columnTypes),...rv(t.columnTypes)]),i}function gR(e,t,i){return t?t.baseDataType!==e.baseDataType?(J(46),!1):!0:(J(45,{parentCellDataType:i}),!1)}function fR(e,t){if(e.valueFormatter)return i=>{var s,n;if((s=i.node)!=null&&s.group){const o=(i.colDef.pivotValueColumn??i.column).getAggFunc();if(o){if(o==="first"||o==="last")return e.valueFormatter(i);if(e.baseDataType==="number"&&o!=="count"){if(typeof i.value=="number")return e.valueFormatter(i);if(typeof i.value=="object"){if(!i.value)return;if("toNumber"in i.value)return e.valueFormatter({...i,value:i.value.toNumber()});if("value"in i.value)return e.valueFormatter({...i,value:i.value.value})}}return}}else if(t.get("groupHideOpenParents")&&i.column.isRowGroupActive()&&typeof i.value=="string"&&!((n=e.dataTypeMatcher)!=null&&n.call(e,i.value)))return;return e.valueFormatter(i)}}function nU(e,t,i,s){if(!t[i])return!1;const n=e[i];return n===null?(t[i]=!1,!1):s===void 0?!!n:n===s}function lw(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,s])=>nU(e,t,i,s))}function oU(e,t){const i=ET(e);for(const s of t)delete i[s],s==="rowGroup"?delete i.rowGroupIndex:s==="pivot"&&delete i.pivotIndex;return i}var rU={moduleName:"DataType",version:ue,beans:[sU],dependsOn:[M3]},aU={moduleName:"ColumnFlex",version:ue,beans:[tU]},MD={moduleName:"ColumnApi",version:ue,beans:[eU],apiFunctions:{getColumnDef:k3,getDisplayNameForColumn:L3,getColumn:O3,getColumns:N3,applyColumnState:H3,getColumnState:G3,resetColumnState:B3,isPinning:V3,isPinningLeft:z3,isPinningRight:W3,getDisplayedColAfter:$3,getDisplayedColBefore:U3,setColumnsVisible:j3,setColumnsPinned:K3,getAllGridColumns:q3,getDisplayedLeftColumns:Y3,getDisplayedCenterColumns:X3,getDisplayedRightColumns:Q3,getAllDisplayedColumns:J3,getAllDisplayedVirtualColumns:Z3,getColumnDefs:_3}};function lU(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(n=>n.substring(0,1).toUpperCase()+(n.length>1?n.substring(1,n.length):"")).join(" ")}var cU=class extends V{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const s=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:n}=this.beans;return i&&n?n.getHeaderName(e,s):s}getDisplayNameForProvidedColumnGroup(e,t,i){const s=t==null?void 0:t.getColGroupDef();return s?this.getHeaderName(s,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,s,n){var r;const o=e.headerValueGetter;if(o){const a=Le(this.gos,{colDef:e,column:t,columnGroup:i,providedColumnGroup:s,location:n});return typeof o=="function"?o(a):typeof o=="string"?((r=this.beans.expressionSvc)==null?void 0:r.evaluate(o,a))??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return lU(e.field)}return""}},dU=class extends V{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){const{visibleCols:s}=this,n=s.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!n)){if(this.scrollWidth=e,this.scrollPosition=t,s.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const r=s.bodyWidth;this.viewportLeft=r-t-e,this.viewportRight=r-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(i)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t];break}return i??[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||hU(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),s=this.viewportLeft-200,n=this.viewportRight+200,o=t<s&&i<s,r=t>n&&i>n;return!o&&!r}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=o=>{const r=o.getLeft();return fe(r)&&r>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:s}=this,n=s.centerCols;return s.getColsForRow(e,n,i,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){const{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;const i=s=>{const n=new Set,o={};for(const r of s){let a=r.getParent();const l=r.isSpanHeaderHeight();for(;a&&!n.has(a);){if(l&&a.isPadding()){a=a.getParent();continue}const d=a.getProvidedColumnGroup().getLevel();o[d]??(o[d]=[]),o[d].push(a),n.add(a),a=a.getParent()}}return o};this.rowsOfHeadersToRenderLeft=i(e),this.rowsOfHeadersToRenderRight=i(t),this.rowsOfHeadersToRenderCenter=i(this.headerColsWithinViewport)}extractViewport(){const e=s=>`${s.getId()}-${s.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),i=this.colsWithinViewportHash!==t;return i&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),i}};function hU(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var uU=class extends V{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class i{refresh(){return!1}getGui(){return this.eGui}init(n){const o=t(n),r=typeof o;if(r==="string"||r==="number"||r==="boolean"){this.eGui=xS("<span>"+o+"</span>");return}if(o==null){this.eGui=ri({tag:"span"});return}this.eGui=o}}return i}},gU={moduleName:"CellRendererFunction",version:ue,beans:[uU]},fU=class extends mV{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(e!=null)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:i,dynamicBeans:s,selectors:n}=e;if(i){const o=(r,a,l,c)=>{this.agGridDefaults[r]=a,(l||c)&&(this.agGridDefaultOverrides[r]={params:l,processParams:c})};for(const r of Object.keys(i)){let a=i[r];if(fB(a)&&(a=a.getComp(this.beans)),typeof a=="object"){const{classImp:l,params:c,processParams:d}=a;o(r,l,c,d)}else o(r,a)}}this.registerDynamicBeans(s);for(const o of n??[])this.selectors[o.selector]=o;if(t)for(const o of Object.keys(t))this.icons[o]=t[o]}getUserComponent(e,t){var a;const i=(l,c,d,h)=>({componentFromFramework:c,component:l,params:d,processParams:h}),{frameworkOverrides:s}=this.beans,n=s.frameworkComponent(t,this.gos.get("components"));if(n!=null)return i(n,!0);const o=this.jsComps[t];if(o){const l=s.isFrameworkComponent(o);return i(o,l)}const r=this.agGridDefaults[t];if(r){const l=this.agGridDefaultOverrides[t];return i(r,!1,l==null?void 0:l.params,l==null?void 0:l.processParams)}return(a=this.beans.validation)==null||a.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}getDynamicError(e,t){var i;return t?No(279,{name:e}):((i=this.beans.validation)==null?void 0:i.missingDynamicBean(e))??No(256)}},pU=23,mU=class extends V{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){var e,t;this.addEventListener("ready",()=>{if(this.updateReady(),this.ready){for(const i of this.readyCallbacks)i(this.params);this.readyCallbacks.length=0}},((t=(e=this.beans.frameworkOverrides).runWhenReadyAsync)==null?void 0:t.call(e))??!1)}updateReady(){const e=Object.values(this.params);this.ready=e.length===pU&&e.every(t=>(t==null?void 0:t.isAlive())??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const i=this.readyCallbacks.indexOf(t);i>=0&&this.readyCallbacks.splice(i,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},vU='.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-virtual-list-item{height:var(--ag-list-item-height);position:absolute;width:100%}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}',CU={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:As,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Tr,rangeSelectionBackgroundColor:oo(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:oo(.5),rangeHeaderHighlightColor:XB(.08),rowNumbersSelectedColor:oo(.5),rowHoverColor:oo(.08),columnHoverColor:oo(.05),selectedRowBackgroundColor:oo(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:As,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:Zs(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:Zs(.1),iconButtonActiveColor:Tr,iconButtonActiveBackgroundColor:oo(.28),iconButtonActiveIndicatorColor:Tr,menuBorder:{color:Zs(.2)},menuBackgroundColor:hn(.03),menuTextColor:hn(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:Zs(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Tr},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:Zs(.2)},panelBackgroundColor:As,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:Zs(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:Zs(.13)},selectCellBackgroundColor:Zs(.07),selectCellBorder:{color:Zs(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:As,filterPanelApplyButtonBackgroundColor:Tr,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:Pd,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:Pd,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:Zs(.15),statusBarLabelColor:Pd,statusBarLabelFontWeight:500,statusBarValueColor:Pd,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"}},wU=".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}",ID={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},bU={...ID,cellBatchEditTextColor:"#f3d0b3"},yU=()=>Ho({feature:"batchEditStyle",params:ID,css:wU}),SU=yU(),xU=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",RU={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},EU=()=>Ho({feature:"buttonStyle",params:{...RU,buttonBackgroundColor:As,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Tr}},css:xU}),AU=EU(),FU=".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",PU=()=>Ho({feature:"columnDropStyle",css:FU}),kD=PU(),TU={warn:(...e)=>{J(e[0],e[1])},error:(...e)=>{At(e[0],e[1])},preInitErr:(...e)=>{Xu(e[0],e[2],e[1])}},DU=()=>aV(TU).withParams(CU).withPart(AU).withPart(kD).withPart(SU),MU='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',IU=()=>Ho({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:As,checkboxUncheckedBorderColor:hn(.3),checkboxCheckedBackgroundColor:Tr,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:As,checkboxIndeterminateBackgroundColor:hn(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:As,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:MU}),kU=IU(),_D=()=>({...dv,...bU,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:hn(.05),rowHoverColor:oo(.15),selectedRowBackgroundColor:oo(.2),menuBackgroundColor:hn(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:Pd,findMatchColor:As,findActiveMatchColor:As,checkboxUncheckedBorderColor:hn(.4),toggleButtonOffBackgroundColor:hn(.4),rowBatchEditBackgroundColor:hn(.1)}),_U=()=>({..._D(),backgroundColor:"#1f2836"}),LU=()=>Ho({feature:"colorScheme",params:dv,modeParams:{light:dv,dark:_D(),"dark-blue":_U()}}),OU=LU(),LD={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},OD={"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>'},NU=(e={})=>{let t="";for(const i of[...Object.keys(LD),...Object.keys(OD)]){const s=HU(i,e.strokeWidth);t+=`.ag-icon-${i}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(s)}'); }
`}return t},HU=(e,t=1.5)=>{const i=OD[e];if(i)return i;const s=LD[e];if(!s)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+s+"</svg>"},GU=(e={})=>Ho({feature:"iconSet",css:()=>NU(e)}),BU=GU(),VU=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',zU=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}",WU={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},$U=()=>Ho({feature:"inputStyle",params:{...WU,inputBackgroundColor:As,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Tr},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:hn(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>VU+zU}),UU=$U(),jU='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}',KU={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},qU=()=>Ho({feature:"tabStyle",params:{...KU,tabBarBorder:!0,tabBarBackgroundColor:Zs(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:As},css:jU}),YU=qU(),XU=()=>DU().withPart(kU).withPart(OU).withPart(BU).withPart(YU).withPart(UU).withPart(kD).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),QU=XU(),JU={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},ZU={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},e5={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},pR={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},mR={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},vR={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},cw={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},CR={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0};function t5(e,t){for(const i of t.sort((s,n)=>s.moduleName.localeCompare(n.moduleName))){const s=i.css;s&&e.set(`module-${i.moduleName}`,s)}}var i5=class extends pV{constructor(){super(...arguments),this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1}initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(pR),this.getSizeEl(mR),this.getSizeEl(vR),this.getSizeEl(cw),this.getSizeEl(CR),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(CR)}getRowBorderWidth(){return this.getCSSVariablePixelValue(cw)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(pR)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(mR)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(JU)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(ZU),i=this.getCSSVariablePixelValue(e5);return e-1+i*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(vR)}refreshRowHeightVariable(){const{eRootDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),i=this.gos.get("rowHeight");if(i==null||isNaN(i)||!isFinite(i))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;const s=`${i}px`;return t!=s?(e.style.setProperty("--ag-line-height",s),i):t!=""?Number.parseFloat(t):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const i=this.measureSizeEl(e);return i==="detached"||i==="no-styles"?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const i=t.offsetWidth;return i===dw?"no-styles":(this.sizesMeasured=!0,i)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=ri({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const i=this.getMeasurementContainer();t=ri({tag:"div"});const{border:s,noWarn:n}=e;s?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${dw}px)`)):t.style.width=`var(${e.cssName}, ${dw}px)`,i.appendChild(t),this.sizeEls.set(e,t);let o=this.measureSizeEl(e);o==="no-styles"&&!n&&J(9,{variable:e});const r=ll(this.beans,t,()=>{const a=this.measureSizeEl(e);a==="detached"||a==="no-styles"||(this.lastKnownValues.set(e,a),a!==o&&(o=a,this.fireStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>r()),t}fireStylesChangedEvent(e){e==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(cw);this.eRootDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}postProcessThemeChange(e,t){e&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&At(t?106:239)}getAdditionalCss(){const e=new Map;return e.set("core",[vU]),t5(e,Array.from(GH())),e}getDefaultTheme(){return QU}themeError(e){At(240,{theme:e})}},dw=15538,s5=class extends vV{postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}};function ND(e,t,i){const s=e.visibleCols.headerGroupRowCount;if(i>=s)return{column:t,headerRowIndex:i};let n=t.getParent();for(;n&&n.getProvidedColumnGroup().getLevel()>i;)n=n.getParent();const o=t.isSpanHeaderHeight();return!n||o&&n.isPadding()?{column:t,headerRowIndex:s}:{column:n,headerRowIndex:n.getProvidedColumnGroup().getLevel()}}var n5=class extends V{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,i=>{this.gridBodyCon=i.gridBodyCtrl});const t=Pi(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let i;const{colModel:s,colGroupSvc:n,ctrlsSvc:o}=this.beans;if(typeof e=="string"?(i=s.getCol(e),i||(i=(n==null?void 0:n.getColumnGroup(e))??null)):i=e,!i)return null;const r=o.getHeaderRowContainerCtrl(),a=r==null?void 0:r.getAllCtrls(),l=Mt(a||[]).type==="filter",c=_o(this.beans)-1;let d=-1,h=i;for(;h;)d++,h=h.getParent();let u=d;return t&&l&&u===c-1&&u++,u===-1?null:{headerRowIndex:u,column:i}}navigateVertically(e,t){const{focusSvc:i,visibleCols:s}=this.beans,{focusedHeader:n}=i;if(!n)return!1;const{headerRowIndex:o}=n,r=n.column,a=_o(this.beans),l=this.getHeaderRowType(o),c=s.headerGroupRowCount;let{headerRowIndex:d,column:h,headerRowIndexWithoutSpan:u}=e==="UP"?o5(l,r,o):r5(r,o,c),f=!1;return d<0&&(d=0,h=r,f=!0),d>=a?(d=-1,this.currentHeaderRowWithoutSpan=-1):u!==void 0&&(this.currentHeaderRowWithoutSpan=u),!f&&!h?!1:i.focusHeaderPosition({headerPosition:{headerRowIndex:d,column:h},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,i){const{focusSvc:s,gos:n}=this.beans,o={...s.focusedHeader};let r,a;this.currentHeaderRowWithoutSpan!==-1?o.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=o.headerRowIndex,e==="LEFT"!==n.get("enableRtl")?(a="Before",r=this.findHeader(o,a)):(a="After",r=this.findHeader(o,a));const l=n.getCallback("tabToNextHeader");if(t&&l){const c=s.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:r,direction:a});if(c){const{headerRowIndex:d}=s.focusedHeader||{};d!=null&&d!=o.headerRowIndex&&(this.currentHeaderRowWithoutSpan=d)}return c}return r||!t?s.focusHeaderPosition({headerPosition:r,direction:a,fromTab:t,allowUserOverride:!0,event:i}):this.focusNextHeaderRow(o,a,i)}focusNextHeaderRow(e,t,i){const s=this.beans,n=e.headerRowIndex;let o=null,r;const a=_o(s),l=this.beans.visibleCols.allCols;if(t==="Before"){if(n<=0)return!1;o=Mt(l),r=n-1,this.currentHeaderRowWithoutSpan-=1}else o=l[0],r=n+1,this.currentHeaderRowWithoutSpan<a?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:c,headerRowIndex:d}=ND(this.beans,o,r);return d>=a&&(d=-1),s.focusSvc.focusHeaderPosition({headerPosition:{column:c,headerRowIndex:d},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(ni(e)){const s=e.getDisplayedLeafColumns();i=t==="Before"?Mt(s):s[0]}else i=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(i)}findHeader(e,t){const{colGroupSvc:i,visibleCols:s}=this.beans;let n=e.column;if(n instanceof Ig){const l=n.getDisplayedLeafColumns();n=t==="Before"?l[0]:l[l.length-1]}const o=t==="Before"?s.getColBefore(n):s.getColAfter(n);if(!o)return;const r=s.headerGroupRowCount;if(e.headerRowIndex>=r)return{headerRowIndex:e.headerRowIndex,column:o};const a=i==null?void 0:i.getColGroupAtLevel(o,e.headerRowIndex);return a?a.isPadding()&&o.isSpanHeaderHeight()?{headerRowIndex:s.headerGroupRowCount,column:o}:{headerRowIndex:e.headerRowIndex,column:a??o}:{headerRowIndex:o instanceof ad&&o.isSpanHeaderHeight()?s.headerGroupRowCount:e.headerRowIndex,column:o}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}};function o5(e,t,i){const s=i-1;if(e!=="filter"){const n=t instanceof ad&&t.isSpanHeaderHeight();let o=t.getParent();for(;o&&(o.getProvidedColumnGroup().getLevel()>s||n&&o.isPadding());)o=o.getParent();if(o)return n?{column:o,headerRowIndex:o.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:s}:{column:o,headerRowIndex:s,headerRowIndexWithoutSpan:s}}return{column:t,headerRowIndex:s,headerRowIndexWithoutSpan:s}}function r5(e,t,i){const s=t+1,n={column:e,headerRowIndex:s,headerRowIndexWithoutSpan:s};if(e instanceof Ig){if(s>=i)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:i,headerRowIndexWithoutSpan:s};let r=e.getDisplayedChildren()[0];if(r instanceof Ig&&r.isPadding()){const l=r.getDisplayedLeafColumns()[0];l.isSpanHeaderHeight()&&(r=l)}n.column=r,r instanceof ad&&r.isSpanHeaderHeight()&&(n.headerRowIndex=i,n.headerRowIndexWithoutSpan=s)}return n}var a5=class extends V{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(xB(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy(Wt(this.beans),vD)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){const e=Wt(this.beans);return this.isDomDataPresentInHierarchy(e,hv)?!0:this.isDomDataPresentInHierarchy(e,uv)}isDomDataPresentInHierarchy(e,t){let i=e;for(;i;){if(aT(this.gos,i,t))return!0;i=i.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:i,column:s}=e,n={rowIndex:t,rowPinned:i,column:s,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i});return o&&(n.isFullWidthCell=o.isFullWidth()),n}clearFocusedCell(){if(this.focusedCell==null)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:i,rowPinned:s,forceBrowserFocus:n=!1,preventScrollOnBrowserFocus:o=!1,sourceEvent:r}=e,a=this.colModel.getCol(t);if(!a){this.focusedCell=null;return}this.focusedCell={rowIndex:i,rowPinned:Lr(s),column:a};const l=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:"cellFocused",...l,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:n,preventScrollOnBrowserFocus:o,sourceEvent:r}),this.previousCellFocusParams=l}isCellFocused(e){return this.focusedCell==null?!1:RD(e,this.focusedCell)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;const{column:t,rowCtrl:{rowIndex:i,pinned:s}}=e,{column:n,headerRowIndex:o}=this.focusedHeader;return t===n&&i===o&&s==n.getPinned()}focusHeaderPosition(e){var c;if(this.setFocusRecovered(),Hc(this.beans))return!1;const{direction:t,fromTab:i,allowUserOverride:s,event:n,fromCell:o,rowWithoutSpanValue:r,scroll:a=!0}=e;let{headerPosition:l}=e;if(o&&((c=this.filterManager)!=null&&c.isAdvFilterHeaderActive()))return this.focusAdvancedFilter(l);if(s){const d=this.focusedHeader,h=_o(this.beans);if(i){const u=this.gos.getCallback("tabToNextHeader");u&&(l=this.getHeaderPositionFromUserFunc({userFunc:u,direction:t,currentPosition:d,headerPosition:l,headerRowCount:h}))}else{const u=this.gos.getCallback("navigateToNextHeader");if(u&&n){const f={key:n.key,previousHeaderPosition:d,nextHeaderPosition:l,headerRowCount:h,event:n};l=u(f)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:t,event:n,fromCell:o,rowWithoutSpanValue:r,scroll:a}):!1}focusHeaderPositionFromUserFunc(e){if(Hc(this.beans))return!1;const{userFunc:t,headerPosition:i,direction:s,event:n}=e,o=this.focusedHeader,r=_o(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:s,currentPosition:o,headerPosition:i,headerRowCount:r});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:s,event:n})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:i,currentPosition:s,headerPosition:n,headerRowCount:o}=e,a=t({backwards:i==="Before",previousHeaderPosition:s,nextHeaderPosition:n,headerRowCount:o});return a===!0?s:a===!1?null:a}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:i,fromCell:s,rowWithoutSpanValue:n,event:o,scroll:r=!0}=e,{column:a,headerRowIndex:l}=t,{filterManager:c,ctrlsSvc:d,headerNavigation:h}=this.beans;if(this.focusedHeader&&Wz(e.headerPosition,this.focusedHeader))return!1;if(l===-1)return c!=null&&c.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:a,event:o});r&&(h==null||h.scrollToColumn(a,i));const u=d.getHeaderRowContainerCtrl(a.getPinned()),f=(u==null?void 0:u.focusHeader(t.headerRowIndex,a,o))||!1;return h&&f&&(n!=null||s)&&(h.currentHeaderRowWithoutSpan=n??-1),f}focusFirstHeader(){var i;if((i=this.overlays)!=null&&i.isExclusive()&&this.focusOverlay())return!0;const e=this.visibleCols.allCols[0];if(!e)return!1;const t=ND(this.beans,e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){var s;if((s=this.overlays)!=null&&s.isExclusive()&&this.focusOverlay(!0))return!0;const t=_o(this.beans)-1,i=Mt(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:i},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){var t;return(t=this.filterManager)!=null&&t.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===Lr(t)}focusOverlay(e){var i,s;const t=((i=this.overlays)==null?void 0:i.isVisible())&&((s=this.overlays.eWrapper)==null?void 0:s.getGui());return!!t&&qc(t,e)}focusGridView(e){var o,r,a,l,c,d;const{backwards:t=!1,canFocusOverlay:i=!0,event:s}=e;if((o=this.overlays)!=null&&o.isExclusive())return i&&this.focusOverlay(t);if(dC(this.beans))return t&&!Hc(this.beans)?this.focusLastHeader():i&&this.focusOverlay(t)?!0:t?!1:au(this.beans,t);const n=t?x$(this.beans):S$(this.beans);if(n){const h=e.column??((r=this.focusedHeader)==null?void 0:r.column),{rowIndex:u,rowPinned:f}=n,p=Ur(this.beans,n);if(!h||!p||u==null)return!1;if(h.isSuppressNavigable(p)){const m=this.gos.get("enableRtl");let v;return!s||s.key===G.TAB?v=m?G.LEFT:G.RIGHT:v=s.key,(a=this.beans.navigation)==null||a.navigateToNextCell(null,v,{rowIndex:u,column:h,rowPinned:f||null},!0),!0}if((l=this.navigation)==null||l.ensureCellVisible({rowIndex:u,column:h,rowPinned:f}),t){const m=this.rowRenderer.getRowByPosition(n);if(m!=null&&m.isFullWidth()&&((c=this.navigation)!=null&&c.tryToFocusFullWidthRow(n,t)))return!0}return this.setFocusedCell({rowIndex:u,column:h,rowPinned:Lr(f),forceBrowserFocus:!0}),(d=this.beans.rangeSvc)==null||d.setRangeToCell({rowIndex:u,rowPinned:f,column:h}),!0}return!!(i&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){var t;return this.advFilterFocusColumn=e==null?void 0:e.column,((t=this.beans.advancedFilter)==null?void 0:t.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(e,t){var s;const i=(t?void 0:this.advFilterFocusColumn)??((s=this.visibleCols.allCols)==null?void 0:s[0]);return e?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:_o(this.beans)-1}}):this.focusGridView({column:i})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},l5=class extends V{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.horizontalScrollShowing=this.gos.get("alwaysShowHorizontalScroll")===!0,this.verticalScrollShowing=this.gos.get("alwaysShowVerticalScroll")===!0,this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;e!=null&&e.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){var i;const e=this.ctrlsSvc.get("center");if(!e||(i=this.colAnimation)!=null&&i.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),i=typeof e=="number"&&e>=0?e:mB();i!=null&&(this.scrollbarWidth=i,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},c5=class extends V{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){var s;if(this.destroyCalled)return;const{stateSvc:e,ctrlsSvc:t,context:i}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:(e==null?void 0:e.getState())??{}}),this.destroyCalled=!0,(s=t.get("gridCtrl"))==null||s.destroyGridUi(),i.destroy(),super.destroy()}},Om=new Set(["gridPreDestroyed","fillStart","pasteStart"]),d5=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"],e0=d5.reduce((e,t)=>(e[t]=aG(t),e),{}),Du=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),h5={tag:"span",cls:"ag-sort-indicator-container",children:[Du("Order","order"),Du("Asc","ascending-icon"),Du("Desc","descending-icon"),Du("Mixed","mixed-icon"),Du("None","none-icon")]},t0=class extends xt{constructor(e){super(),this.eSortOrder=he,this.eSortAsc=he,this.eSortDesc=he,this.eSortMixed=he,this.eSortNone=he,e||this.setTemplate(h5)}attachCustomElements(e,t,i,s,n){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=s,this.eSortNone=n}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),s=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:s,columnRowGroupChanged:s}),this.onSortChanged()}addInIcon(e,t,i){if(t==null)return;const s=fn(e,this.beans,i);s&&t.appendChild(s)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortNone:i,column:s,gos:n,beans:o}=this,r=o.sortSvc.getDisplaySortForColumn(s);if(e&&Ot(e,r==="asc",{skipAriaHidden:!0}),t&&Ot(t,r==="desc",{skipAriaHidden:!0}),i){const a=!s.getColDef().unSortIcon&&!n.get("unSortIcon"),l=r==null;Ot(i,!a&&l,{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:i}=this;this.addInIcon("sortUnSort",e,t);const s=t.getColDef().showRowGroup;Mo(i)&&s&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:i}=this;if(e){const s=t.sortSvc.getDisplaySortForColumn(i)==="mixed";Ot(e,s,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:i}}=this;if(!e)return;const s=i.getColumnsWithSortingOrdered(),n=i.getDisplaySortIndexForColumn(t)??-1,o=s.some(a=>i.getDisplaySortIndexForColumn(a)??!1),r=n>=0&&o;Ot(e,r,{skipAriaHidden:!0}),n>=0?e.textContent=(n+1).toString():Wi(e)}},u5={selector:"AG-SORT-INDICATOR",component:t0},_g=["asc","desc",null],g5=class extends V{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,i){const s=this.getNextSortDirection(e);this.setSortForColumn(e,s,t,i)}progressSortFromEvent(e,t){const s=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,s,"uiColumnSorted")}setSortForColumn(e,t,i,s){var d;t!=="asc"&&t!=="desc"&&(t=null);const{gos:n,showRowGroupCols:o}=this.beans,r=Mo(n);let a=[e];if(r&&e.getColDef().showRowGroup){const h=(d=o==null?void 0:o.getSourceColumnsForGroupColumn)==null?void 0:d.call(o,e),u=h==null?void 0:h.filter(f=>f.isSortable());u&&(a=[e,...u])}for(const h of a)this.setColSort(h,t,s);const l=(i||n.get("alwaysMultiSort"))&&!n.get("suppressMultiSort"),c=[];if(!l){const h=this.clearSortBarTheseColumns(a,s);c.push(...h)}this.updateSortIndex(e),c.push(...a),this.dispatchSortChangedEvents(s,c)}updateSortIndex(e){const{gos:t,colModel:i,showRowGroupCols:s}=this.beans,n=Mo(t),o=s==null?void 0:s.getShowRowGroupCol(e.getId()),r=n&&o||e,a=this.getColumnsWithSortingOrdered();i.forAllCols(d=>this.setColSortIndex(d,null));const l=a.filter(d=>n&&d.getColDef().showRowGroup?!1:d!==r);(r.getSort()?[...l,r]:l).forEach((d,h)=>this.setColSortIndex(d,h))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{t.getSort()&&(e=!0)}),e}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventSvc.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.beans.colModel.forAllCols(s=>{e.includes(s)||(s.getSort()&&i.push(s),this.setColSort(s,void 0,t))}),i}getNextSortDirection(e){const t=e.getColDef().sortingOrder??this.gos.get("sortingOrder")??_g,i=t.indexOf(e.getSort()),s=i<0,n=i==t.length-1;return s||n?t[0]:t[i+1]}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:i,rowGroupColsSvc:s}=this.beans;let n=[];if(t.forAllCols(c=>{c.getSort()&&n.push(c)}),t.isPivotMode()){const c=Mo(e);n=n.filter(d=>{const h=!!d.getAggFunc(),u=!d.isPrimary(),f=c?i==null?void 0:i.getShowRowGroupCol(d.getId()):d.getColDef().showRowGroup;return h||u||f})}const o=(s==null?void 0:s.columns.filter(c=>!!c.getSort()))??[],r={};n.forEach((c,d)=>r[c.getId()]=d),n.sort((c,d)=>{const h=c.getSortIndex(),u=d.getSortIndex();if(h!=null&&u!=null)return h-u;if(h==null&&u==null){const f=r[c.getId()],p=r[d.getId()];return f>p?1:-1}else return u==null?-1:1});const a=Mo(e)&&!!o.length;a&&(n=[...new Set(n.map(c=>(i==null?void 0:i.getShowRowGroupCol(c.getId()))??c))]);const l=new Map;if(n.forEach((c,d)=>l.set(c,d)),a)for(const c of o){const d=i.getShowRowGroupCol(c.getId());l.set(c,l.get(d))}return l}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=Mo(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){var r;const t=(r=this.beans.showRowGroupCols)==null?void 0:r.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSort();const s=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,n=s[0].getSort();return s.every(a=>a.getSort()==n)?n:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,i){let s=0;e.addManagedListeners(t,{movingChanged:()=>{s=Date.now()}}),i&&e.addManagedElementListeners(i,{click:o=>{const r=t.isMoving(),l=Date.now()-s<50;r||l||this.progressSortFromEvent(t,o)}});const n=()=>{var r;const o=t.getSort();if(e.toggleCss("ag-header-cell-sorted-asc",o==="asc"),e.toggleCss("ag-header-cell-sorted-desc",o==="desc"),e.toggleCss("ag-header-cell-sorted-none",!o),t.getColDef().showRowGroup){const a=(r=this.beans.showRowGroupCols)==null?void 0:r.getSourceColumnsForGroupColumn(t),c=!(a==null?void 0:a.every(d=>t.getSort()==d.getSort()));e.toggleCss("ag-header-cell-sorted-mixed",c)}};e.addManagedEventListeners({sortChanged:n,columnRowGroupChanged:n})}initCol(e){const{sort:t,initialSort:i,sortIndex:s,initialSortIndex:n}=e.colDef;t!==void 0?(t==="asc"||t==="desc")&&(e.sort=t):(i==="asc"||i==="desc")&&(e.sort=i),s!==void 0?s!==null&&(e.sortIndex=s):n!==null&&(e.sortIndex=n)}updateColSort(e,t,i){t!==void 0&&(t==="desc"||t==="asc"?this.setColSort(e,t,i):this.setColSort(e,void 0,i))}setColSort(e,t,i){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",i)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new t0(e)}getSortIndicatorSelector(){return u5}},$d={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"};function wR(e){return`"${e}"`}var f5=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."},rowGroupingHierarchy:{version:"34.3",message:"Use `colDef.groupHierarchy` instead."}}),p5={aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t})=>t?typeof e=="string"?$d[e]??"CustomEditor":"CustomEditor":null,cellRenderer:({cellRenderer:e})=>typeof e!="string"?null:$d[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&typeof e!="string"&&typeof e!="boolean"?"CustomFilter":typeof e=="string"?$d[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{var i;const t=["columnsMenuTab","generalMenuTab"];return(i=e.menuTabs)!=null&&i.some(s=>t.includes(s))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"},m5=()=>({autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(t,{paginationAutoPageSize:i})=>i?"colDef.autoHeight is not supported with paginationAutoPageSize.":null},cellRendererParams:{validate:t=>(t.rowGroup!=null||t.rowGroupIndex!=null||t.cellRenderer==="agGroupCellRenderer")&&"checkbox"in t.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},flex:{validate:(t,i)=>i.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(t,{rowSelection:i})=>i==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:i})=>i==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:i})=>i==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerValueGetter:{validate:t=>{const i=t.headerValueGetter;return typeof i=="function"||typeof i=="string"?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:t})=>{if(t){if(t.smallDown)return No(262);if(t.smallLeft)return No(263);if(t.smallRight)return No(264)}return null}},sortingOrder:{validate:t=>{const i=t.sortingOrder;if(Array.isArray(i)&&i.length>0){const s=i.filter(n=>!_g.includes(n));if(s.length>0)return`sortingOrder must be an array with elements from [${_g.map(tv).join()}], currently it includes [${s.map(tv).join()}]`}else if(!Array.isArray(i)||i.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${i}`;return null}},type:{validate:t=>{const i=t.type;return i instanceof Array?i.some(n=>typeof n!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof i=="string"?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(t,{suppressRowTransform:i})=>i?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(t,{rowSelection:i,cellSelection:s,suppressRowTransform:n,enableCellSpan:o,rowDragEntireRow:r,enableCellTextSelection:a})=>typeof i=="object"&&(i==null?void 0:i.mode)==="singleRow"&&i!=null&&i.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":s?"colDef.spanRows is not supported with cellSelection.":n?"colDef.spanRows is not supported with suppressRowTransform.":o?r?"colDef.spanRows is not supported with rowDragEntireRow.":a?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."},groupHierarchy:{validate(t,{groupHierarchyConfig:i={}},s){var r;const n=new Set(["year","quarter","month","formattedMonth","day","hour","minute","second"]),o=[];for(const a of t.groupHierarchy??[]){if(typeof a=="object"){(r=s.validation)==null||r.validateColDef(a);continue}!n.has(a)&&!(a in i)&&o.push(wR(a))}if(o.length>0){const a=`The following parts of colDef.groupHierarchy are not recognised: ${o.join(", ")}.`,l=`Choose one of ${[...n].map(wR).join(", ")}, or define your own parts in gridOptions.groupHierarchyConfig.`;return`${a}
${l}`}return null}}}),v5={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,headerTooltipValueGetter:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,tooltipComponentSelector:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0,rowGroupingHierarchy:void 0,groupHierarchy:void 0},C5=()=>Object.keys(v5),w5=()=>({objectName:"colDef",allProperties:C5(),docsUrl:"column-properties/",deprecations:f5(),validations:m5()}),b5=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"],y5=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers","groupHierarchyConfig"],S5=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],HD=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"],x5=["theme","rowSelection"],R5=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],GD=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows","ssrmExpandAllAffectsAllRows"],E5=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"],A5=()=>[...S5,...y5,...b5,...HD,...E5,...GD,...R5,...x5],F5=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}});function io(e,t,i){return typeof t=="number"||t==null?t==null||t>=i?null:`${e}: value should be greater than or equal to ${i}`:`${e}: value should be a number`}var P5={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},T5=()=>{const e={autoSizePadding:{validate({autoSizePadding:i}){return io("autoSizePadding",i,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:i}){return io("cacheBlockSize",i,1)}},cacheOverflowSize:{validate({cacheOverflowSize:i}){return io("cacheOverflowSize",i,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:i=>{const s=i.domLayout,n=["autoHeight","normal","print"];return s&&!n.includes(s)?`domLayout must be one of [${n.join()}], currently it's ${s}`:null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate({enableRowPinning:i,pinnedTopRowData:s,pinnedBottomRowData:n}){return i&&(s||n)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:["clientSide"],validate({enableRowPinning:i,isRowPinnable:s,pinnedTopRowData:n,pinnedBottomRowData:o}){return s&&(n||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!i&&s?"`isRowPinnable` requires `enableRowPinning` to be set.":null}},isRowPinned:{supportedRowModels:["clientSide"],validate({enableRowPinning:i,isRowPinned:s,pinnedTopRowData:n,pinnedBottomRowData:o}){return s&&(n||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!i&&s?"`isRowPinned` requires `enableRowPinning` to be set.":null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},groupHierarchyConfig:{validate({groupHierarchyConfig:i={}},s,n){var o;for(const r of Object.keys(i))(o=n.validation)==null||o.validateColDef(i[r]);return null}},icons:{validate:({icons:i})=>{if(i){if(i.smallDown)return No(262);if(i.smallLeft)return No(263);if(i.smallRight)return No(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:i}){return io("infiniteInitialRowCount",i,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},ssrmExpandAllAffectsAllRows:{validate:i=>{if(typeof i.ssrmExpandAllAffectsAllRows=="boolean"){if(i.rowModelType!=="serverSide")return"'ssrmExpandAllAffectsAllRows' is only supported with the Server Side Row Model.";if(i.ssrmExpandAllAffectsAllRows&&typeof i.getRowId!="function")return"'getRowId' callback must be provided for Server Side Row Model grouping to work correctly."}return null}},keepDetailRowsCount:{validate({keepDetailRowsCount:i}){return io("keepDetailRowsCount",i,1)}},paginationPageSize:{validate({paginationPageSize:i}){return io("paginationPageSize",i,1)}},paginationPageSizeSelector:{validate:i=>{const s=i.paginationPageSizeSelector;return typeof s=="boolean"||s==null||s.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate({rowBuffer:i}){return io("rowBuffer",i,0)}},rowClass:{validate:i=>typeof i.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate({rowSelection:i}){return i&&typeof i=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':i&&typeof i!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":i&&i.mode!=="multiRow"&&i.mode!=="singleRow"?`Selection mode "${i.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null}},rowStyle:{validate:i=>{const s=i.rowStyle;return s&&typeof s=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:i}){return io("serverSideInitialRowCount",i,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:i=>{const s=i.sortingOrder;if(Array.isArray(s)&&s.length>0){const n=s.filter(o=>!_g.includes(o));if(n.length>0)return`sortingOrder must be an array with elements from [${_g.map(tv).join()}], currently it includes [${n.map(tv).join()}]`}else if(!Array.isArray(s)||s.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${s}`;return null}},tooltipHideDelay:{validate:i=>i.tooltipHideDelay&&i.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:i=>i.tooltipShowDelay&&i.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:i=>{const s=i.rowModelType??"clientSide";switch(s){case"clientSide":{const{treeDataChildrenField:n,treeDataParentIdField:o,getDataPath:r,getRowId:a}=i;if(!n&&!o&&!r)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(n){if(r)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(o)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(o){if(!a)return"getRowId callback not provided, tree data with parent id cannot be built.";if(r)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{const n=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${s} row model.`;return i.isServerSideGroup&&i.getServerSideGroupKey?null:n}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:i}){return io("viewportRowModelBufferSize",i,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:i}){return io("viewportRowModelPageSize",i,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate({autoGroupColumnDef:i,showOpenedGroup:s}){return i!=null&&i.field&&s?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":i!=null&&i.valueGetter&&s?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}},renderingMode:{validate:i=>{const s=i.renderingMode,n=["default","legacy"];return s&&!n.includes(s)?`renderingMode must be one of [${n.join()}], currently it's ${s}`:null}},autoSizeStrategy:{validate:({autoSizeStrategy:i})=>{if(!i)return null;const s=["fitCellContents","fitGridWidth","fitProvidedWidth"],n=i.type;return n!=="fitCellContents"&&n!=="fitGridWidth"&&n!=="fitProvidedWidth"?`Invalid Auto-size strategy. \`autoSizeStrategy\` must be one of ${s.map(o=>'"'+o+'"').join(", ")}, currently it's ${n}`:n==="fitProvidedWidth"&&typeof i.width!="number"?`When using the 'fitProvidedWidth' auto-size strategy, must provide a numeric \`width\`. You provided ${i.width}`:null}}},t={};for(const i of GD)t[i]={expectedType:"boolean"};for(const i of HD)t[i]={expectedType:"number"};return fs(t,e),t},D5=()=>({objectName:"gridOptions",allProperties:[...A5(),...Object.values(e0)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:F5(),validations:T5()}),M5=0,I5=0,bR="__ag_grid_instance",k5=class extends V{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=I5++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new jc,this.globalEventHandlerFactory=e=>(t,i)=>{if(!this.isAlive())return;const s=Om.has(t);if(s&&!e||!s&&e||!_5(t))return;const n=(o,r)=>{const a=e0[o],l=this.gridOptions[a];typeof l=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>l(r))};if(this.gridReadyFired)n(t,i);else if(t==="gridReady"){n(t,i),this.gridReadyFired=!0;for(const o of this.queueEvents)n(o.eventName,o.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:i})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??kH[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return fe(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(i=>e(this.addCommon(i)))}updateGridOptions({options:e,force:t,source:i="api"}){const s={id:M5++,properties:[]},n=[],{gridOptions:o,validation:r}=this;for(const a of Object.keys(e)){const l=DS.applyGlobalGridOption(a,e[a]);r==null||r.warnOnInitialPropertyUpdate(i,a);const c=t||typeof l=="object"&&i==="api",d=o[a];if(c||d!==l){o[a]=l;const h={type:a,currentValue:l,previousValue:d,changeSet:s,source:i};n.push(h)}}this.validateGridOptions(this.gridOptions),s.properties=n.map(a=>a.type);for(const a of n)el(this,`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propEventSvc.dispatchEvent(a)}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addCommon(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const i of Object.keys(e)){const s=e[i];if(s==null||s===!1)continue;let n=t[i];typeof n=="function"&&(n=n(e,this.gridOptions,this.beans)),n&&this.assertModuleRegistered(n,i)}}validateGridOptions(e){var t;this.validateOptions(e,P5),(t=this.validation)==null||t.processGridOptions(e)}validateColDef(e,t,i){var s,n;(i||!((s=this.beans.dataTypeSvc)!=null&&s.isColPendingInference(t)))&&(this.validateOptions(e,p5),(n=this.validation)==null||n.validateColDef(e))}assertModuleRegistered(e,t){const i=Array.isArray(e)?e.some(s=>this.isModuleRegistered(s)):this.isModuleRegistered(e);return i||At(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),i}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:MS(),rowModelType:this.get("rowModelType"),isUmd:VH()}}isModuleRegistered(e){return ay(e,this.gridId,this.get("rowModelType"))}setInstanceDomData(e){e[bR]=this.instanceId}isElementInThisInstance(e){let t=e;for(;t;){const i=t[bR];if(fe(i))return i===this.instanceId;t=t.parentElement}return!1}};function _5(e){return!!e0[e]}function BD(e){const t={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:t},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:t},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:t},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var L5=BD(!0),O5=BD(!1),N5=class extends xt{constructor(){super(...arguments),this.eFilter=he,this.eFilterButton=he,this.eSortIndicator=he,this.eMenu=he,this.eLabel=he,this.eText=he,this.eSortOrder=he,this.eSortAsc=he,this.eSortDesc=he,this.eSortMixed=he,this.eSortNone=he,this.isLoadingInnerComponent=!1}refresh(e){var i,s,n;const t=this.params;if(this.params=e,this.workOutTemplate(e,!!((i=this.beans)!=null&&i.sortSvc))!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){const o={...e};fs(o,e.innerHeaderComponentParams),(n=(s=this.innerHeaderComponent).refresh)==null||n.call(s,o)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const i=e.template;return i?i!=null&&i.trim?i.trim():i:t?L5:O5}init(e){this.params=e;const{sortSvc:t,touchSvc:i,rowNumbersSvc:s,userCompFactory:n}=this.beans,o=t==null?void 0:t.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!o),this.setTemplate(this.currentTemplate,o?[o]:void 0),i==null||i.setupForHeader(this),this.setMenu(),this.setupSort(),s==null||s.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(n,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const i=tB(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then(s=>{this.isLoadingInnerComponent=!1,s&&(this.isAlive()?(this.innerHeaderComponent=s,this.eText&&this.eText.appendChild(s.getGui())):this.destroyBean(s))}))}setDisplayName(e){const{displayName:t}=e,i=this.currentDisplayName;this.currentDisplayName=t,!(!this.eText||i===t||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=mu(t))}addInIcon(e,t,i){const s=fn(e,this.beans,i);s&&t.appendChild(s)}workOutShowMenu(){var e;return this.params.enableMenu&&!!((e=this.beans.menuSvc)!=null&&e.isHeaderMenuButtonEnabled())}shouldSuppressMenuHide(){var e;return!!((e=this.beans.menuSvc)!=null&&e.isHeaderMenuButtonAlwaysShowEnabled())}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){jn(this.eMenu),this.eMenu=void 0;return}const{gos:e,eMenu:t,params:i}=this,s=Us(e);this.addInIcon(s?"menu":"menuAlt",t,i.column),t.classList.toggle("ag-header-menu-icon",!s);const n=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=n,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(n)}toggleMenuAlwaysShow(e){var t;(t=this.eMenu)==null||t.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:i}=this;t||this.toggleMenuAlwaysShow(!0),i.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){var l;const{params:t,gos:i,beans:s,eMenu:n,eFilterButton:o}=this,r=t.column,a=Us(i);if(e&&!a){if((l=s.menuSvc)!=null&&l.isFilterMenuInHeaderEnabled(r))return t.showFilter(o??n??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(n??o??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:i}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:s,eSortOrder:n,eSortAsc:o,eSortDesc:r,eSortMixed:a,eSortNone:l}=this;s.attachCustomElements(n,o,r,a,l)}this.eSortIndicator.setupSort(i),this.currentSort&&e.setupHeader(this,i,this.eLabel)}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;const i=()=>{const s=t.column.isFilterActive();Ot(e,s,{skipAriaHidden:!0})};this.configureFilter(t.enableFilterIcon,e,i,"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,i,s){if(!e)return jn(t),!1;const n=this.params.column;return this.addInIcon(s,t,n),this.addManagedListeners(n,{filterChanged:i}),i(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:i}=this;return e?t??i??this.getGui():i??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}},H5={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},G5=class extends xt{constructor(){super(H5),this.agOpened=he,this.agClosed=he,this.agLabel=he,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:i}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),i==null||i.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&J(89)}workOutInnerHeaderGroupComponent(e,t){const i=sB(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then(s=>{this.isLoadingInnerComponent=!1,s&&(this.isAlive()?(this.innerHeaderGroupComponent=s,this.agLabel.appendChild(s.getGui())):this.destroyBean(s))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:i},beans:s}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const n=l=>{if(Hr(l))return;const c=!i.isExpanded();s.colGroupSvc.setColumnGroupOpened(i.getProvidedColumnGroup(),c,"uiColumnExpanded")};this.addTouchAndClickListeners(s,t,n),this.addTouchAndClickListeners(s,e,n);const o=l=>{Yc(l)};this.addManagedElementListeners(t,{dblclick:o}),this.addManagedElementListeners(e,{dblclick:o}),this.addManagedElementListeners(this.getGui(),{dblclick:n}),this.updateIconVisibility();const r=i.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(r,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t,i){var s;(s=e.touchSvc)==null||s.setupForHeaderGroupElement(this,t,i),this.addManagedElementListeners(t,{click:i})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:i}}=this;if(i.isExpandable()){const s=i.isExpanded();Ot(e,s),Ot(t,!s)}else Ot(e,!1),Ot(t,!1)}addInIcon(e,t){const i=fn(e,this.beans,null);i&&t.appendChild(i)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:t,agClosed:i}=this;Ot(t,!1),Ot(i,!1)}}setupLabel(e){var n;const{displayName:t,columnGroup:i}=e,s=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;fe(t)&&!s&&(this.agLabel.textContent=mu(t)),this.toggleCss("ag-sticky-label",!((n=i.getColGroupDef())!=null&&n.suppressStickyLabel))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},B5={moduleName:"ColumnHeaderComp",version:ue,userComponents:{agColumnHeader:N5},icons:{menu:"menu",menuAlt:"menu-alt"}},V5={moduleName:"ColumnGroupHeaderComp",version:ue,userComponents:{agColumnGroupHeader:G5},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},z5=class extends V{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,e===0&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&J(92)}createTask(e,t,i,s,n=!1){this.verify();let o=i;s&&this.batchFrameworkComps&&(o="f1");const r={task:e,index:t,createOrder:++this.taskCount,deferred:n};this.addTaskToList(this[o],r),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((i,s)=>i.deferred!==s.deferred?i.deferred?-1:1:i.index!==s.index?t*(s.index-i.index):s.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:i,f1:s,destroyTasks:n,beans:o}=this,{ctrlsSvc:r,frameworkOverrides:a}=o,l=t.list,c=i.list,d=s.list,h=Date.now();let u=0;const f=e<=0,p=r.getScrollFeature();for(;f||u<e;){if(!p.scrollGridIfNeeded()){let v;if(l.length)this.sortTaskList(t),v=l.pop().task;else if(c.length)this.sortTaskList(i),v=c.pop().task;else if(d.length)a.wrapOutgoing(()=>{for(;(f||u<e)&&!p.scrollGridIfNeeded();){if(d.length)this.sortTaskList(s),v=d.pop().task,v();else break;u=Date.now()-h}}),v=()=>{};else if(n.length)v=n.pop();else break;v()}u=Date.now()-h}l.length||c.length||d.length||n.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);Xr(this.beans,e)}isQueueEmpty(){return!this.ticking}},W5={moduleName:"AnimationFrame",version:ue,beans:[z5]},$5=class extends V{constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(e,t){return fn(e,this.beans,t==null?void 0:t.column)}},U5=class extends V{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!Nc())return;const t=(i,s,n)=>{var a;const{rowCtrl:o,cellCtrl:r}=e.getControlsForEventTarget((n==null?void 0:n.target)??null);r!=null&&r.column&&r.dispatchCellContextMenuEvent(n??null),(a=this.beans.contextMenuSvc)==null||a.handleContextMenuMouseEvent(void 0,n,o,r)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!Nc()||qP("dblclick"))return!1;const s=Date.now(),n=s-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=s,n})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){const{gos:t,sortSvc:i,menuSvc:s}=this.beans;if(t.get("suppressTouch"))return;const{params:n,eMenu:o,eFilterButton:r}=e,a=new yl(e.getGui(),!0);e.addDestroyFunc(()=>a.destroy());const l=e.shouldSuppressMenuHide(),c=l&&fe(o)&&n.enableMenu;let d=a;if(c&&(d=new yl(o,!0),e.addDestroyFunc(()=>d.destroy())),n.enableMenu||s!=null&&s.isHeaderContextMenuEnabled(n.column)){const h=c?"tap":"longTap",u=f=>n.showColumnMenuAfterMouseClick(f.touchStart);e.addManagedListeners(d,{[h]:u}),e.addManagedListeners(a,{longTap:u})}if(n.enableSorting){const h=u=>{const f=u.touchStart.target;l&&(o!=null&&o.contains(f)||r!=null&&r.contains(f))||i==null||i.progressSort(n.column,!1,"uiColumnSorted")};e.addManagedListeners(a,{tap:h})}if(n.enableFilterButton&&r){const h=new yl(r,!0);e.addManagedListeners(h,{tap:()=>n.showFilter(r)}),e.addDestroyFunc(()=>h.destroy())}}setupForHeaderGroup(e){var i;const t=e.params;if((i=this.beans.menuSvc)!=null&&i.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){const s=new yl(t.eGridHeader,!0),n=o=>t.showColumnMenuAfterMouseClick(o.touchStart);e.addManagedListeners(s,{longTap:n}),e.addDestroyFunc(()=>s.destroy())}}setupForHeaderGroupElement(e,t,i){const s=new yl(t,!0);e.addManagedListeners(s,{tap:i}),e.addDestroyFunc(()=>s.destroy())}mockContextMenu(e,t,i){if(!Nc())return;const s=new yl(t),n=o=>{Fg(this.beans,o.touchEvent)&&i(void 0,o.touchStart,o.touchEvent)};e.addManagedListeners(s,{longTap:n}),e.addDestroyFunc(()=>s.destroy())}},j5={moduleName:"Touch",version:ue,beans:[U5]},K5=class extends V{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===G.UP,s=e===G.DOWN,n=e===G.LEFT;let o,r;const{pageBounds:a,gos:l,visibleCols:c,pinnedRowModel:d}=this.beans,{rowPinned:h}=t;if(i||s)h&&d?i?r=0:r=h==="top"?d.getPinnedTopRowCount()-1:d.getPinnedBottomRowCount()-1:r=i?a.getFirstRow():a.getLastRow(),o=t.column;else{const u=l.get("enableRtl");r=t.rowIndex,o=(n!==u?c.allCols:[...c.allCols].reverse()).find(p=>this.isCellGoodToFocusOn({rowIndex:r,rowPinned:null,column:p}))}return o?{rowIndex:r,rowPinned:h,column:o}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,s=!1;for(;!s;){switch(e){case G.UP:i=this.getCellAbove(i);break;case G.DOWN:i=this.getCellBelow(i);break;case G.RIGHT:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case G.LEFT:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,J(8,{key:e});break}i?s=this.isCellGoodToFocusOn(i):s=!0}return i}isCellGoodToFocusOn(e){const t=e.column;let i;const{pinnedRowModel:s,rowModel:n}=this.beans;switch(e.rowPinned){case"top":i=s==null?void 0:s.getPinnedTopRow(e.rowIndex);break;case"bottom":i=s==null?void 0:s.getPinnedBottomRow(e.rowIndex);break;default:i=n.getRow(e.rowIndex);break}return i?!this.isSuppressNavigable(t,i):!1}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){var s;if(!e)return null;const t=((s=this.rowSpanSvc)==null?void 0:s.getCellEnd(e))??e,i=rR(this.beans,t,!0);return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null}getCellAbove(e){var s;if(!e)return null;const t=((s=this.rowSpanSvc)==null?void 0:s.getCellStart(e))??e,i=gv(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned},!0);return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:i}=this.beans,s=t.allCols;let n=e.rowIndex,o=e.rowPinned,r=t.getColAfter(e.column);if(!r){r=s[0];const a=rR(this.beans,e,!0);if(Ht(a)||!a.rowPinned&&!((i==null?void 0:i.isRowInPage(a.rowIndex))??!0))return null;n=a?a.rowIndex:null,o=a?a.rowPinned:null}return{rowIndex:n,column:r,rowPinned:o}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:i,pagination:s}=t,n=i.allCols;let o=e.rowIndex,r=e.rowPinned,a=i.getColBefore(e.column);if(!a){a=Mt(n);const l=gv(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);if(Ht(l)||!l.rowPinned&&!((s==null?void 0:s.isRowInPage(l.rowIndex))??!0))return null;o=l?l.rowIndex:null,r=l?l.rowPinned:null}return{rowIndex:o,column:a,rowPinned:r}}isSuppressNavigable(e,t){const{suppressNavigable:i}=e.colDef;if(typeof i=="boolean")return i;if(typeof i=="function"){const s=e.createColumnFunctionCallbackParams(t);return i(s)}return!1}};function q5(e){return e.focusSvc.getFocusedCell()}function Y5(e){return e.focusSvc.clearFocusedCell()}function X5(e,t,i,s){e.focusSvc.setFocusedCell({rowIndex:t,column:i,rowPinned:s,forceBrowserFocus:!0})}function Q5(e,t){var i;return((i=e.navigation)==null?void 0:i.tabToNextCell(!1,t))??!1}function J5(e,t){var i;return((i=e.navigation)==null?void 0:i.tabToNextCell(!0,t))??!1}function Z5(e,t,i=!1){var n;const s=(n=e.headerNavigation)==null?void 0:n.getHeaderPositionForColumn(t,i);s&&e.focusSvc.focusHeaderPosition({headerPosition:s})}var e4=class extends V{constructor(){super(...arguments),this.beanName="editModelSvc",this.edits=new Map,this.cellValidations=new VD,this.rowValidations=new zD,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits({rowNode:e,column:t}){if(!this.hasEdits({rowNode:e})||!e)return;const i=this.getEditRow(e);t?i.delete(t):i.clear(),i.size===0&&this.edits.delete(e)}getEditRow(e,t={}){if(this.suspendEdits||this.edits.size===0)return;const i=e&&this.edits.get(e);if(i)return i;if(t.checkSiblings){const s=e.pinnedSibling;if(s)return this.getEditRow(s)}}getEditRowDataValue(e,{checkSiblings:t}={}){if(!e||this.edits.size===0)return;const i=this.getEditRow(e),s=e.pinnedSibling,n=t&&s&&this.getEditRow(s);if(!i&&!n)return;const o=Object.assign({},e.data),r=(a,l)=>a.forEach(({pendingValue:c},d)=>{c!==Cn&&(l[d.getColId()]=c)});return i&&r(i,o),n&&r(n,o),o}getEdit(e,t){const i=this._getEdit(e);return t&&i?{...i}:i}_getEdit(e){var t;if(!this.suspendEdits&&this.edits.size!==0)return e.rowNode&&e.column&&((t=this.getEditRow(e.rowNode))==null?void 0:t.get(e.column))}getEditMap(e=!0){if(this.suspendEdits||this.edits.size===0)return new Map;if(!e)return this.edits;const t=new Map;return this.edits.forEach((i,s)=>{const n=new Map;i.forEach(({editorState:o,...r},a)=>n.set(a,{...r})),t.set(s,n)}),t}setEditMap(e){this.edits.clear(),e.forEach((t,i)=>{const s=new Map;t.forEach((n,o)=>s.set(o,{...n})),this.edits.set(i,s)})}setEdit(e,t){(this.edits.size===0||!this.edits.has(e.rowNode))&&this.edits.set(e.rowNode,new Map);const i=this._getEdit(e),s=Object.assign({editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0},...i,...t});return this.getEditRow(e.rowNode).set(e.column,s),s}clearEditValue(e){var s;const{rowNode:t,column:i}=e;if(t)if(i){const n=this._getEdit(e);n&&(n.editorValue=void 0,n.pendingValue=n.sourceValue,n.state="changed")}else(s=this.getEditRow(t))==null||s.forEach(n=>{n.editorValue=void 0,n.pendingValue=n.sourceValue,n.state="changed"})}getState(e){var t;if(!this.suspendEdits)return(t=this.getEdit(e))==null?void 0:t.state}getEditPositions(e){if(this.suspendEdits||(e??this.edits).size===0)return[];const t=[];return(e??this.edits).forEach((i,s)=>{for(const n of i.keys()){const{editorState:o,...r}=i.get(n);t.push({rowNode:s,column:n,...r})}}),t}hasRowEdits(e,t){return this.suspendEdits||this.edits.size===0?!1:!!this.getEditRow(e,t)}hasEdits(e={},t={}){var o;if(this.suspendEdits||this.edits.size===0)return!1;const{rowNode:i,column:s}=e,{withOpenEditor:n}=t;if(i){const r=this.getEditRow(i,t);return r?s?n?((o=this.getEdit(e))==null?void 0:o.state)==="editing":r.has(s)??!1:r.size!==0?n?Array.from(r.values()).some(({state:a})=>a==="editing"):!0:!1:!1}return n?this.getEditPositions().some(({state:r})=>r==="editing"):this.edits.size>0}start(e){const t=this.getEditRow(e.rowNode)??new Map,{rowNode:i,column:s}=e;s&&!t.has(s)&&t.set(s,{editorValue:void 0,pendingValue:Cn,sourceValue:this.beans.valueSvc.getValue(s,i,!1,"api"),state:"editing",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}}),this.edits.set(i,t)}stop(e){this.hasEdits(e)&&(e?this.removeEdits(e):this.clear())}clear(){for(const e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},VD=class{constructor(){this.cellValidations=new Map}getCellValidation(e){var s,n;const{rowNode:t,column:i}=e||{};return(n=(s=this.cellValidations)==null?void 0:s.get(t))==null?void 0:n.get(i)}hasCellValidation(e){return!(e!=null&&e.rowNode)||!e.column?this.cellValidations.size>0:!!this.getCellValidation(e)}setCellValidation(e,t){const{rowNode:i,column:s}=e;this.cellValidations.has(i)||this.cellValidations.set(i,new Map),this.cellValidations.get(i).set(s,t)}clearCellValidation(e){var s;const{rowNode:t,column:i}=e;(s=this.cellValidations.get(t))==null||s.delete(i)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},zD=class{constructor(){this.rowValidations=new Map}getRowValidation(e){const{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return e!=null&&e.rowNode?!!this.getRowValidation(e):this.rowValidations.size>0}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function i0(e,t={}){var c;const{rowIndex:i,rowId:s,rowCtrl:n,rowPinned:o}=t;if(n)return n;const{rowModel:r,rowRenderer:a}=e;let{rowNode:l}=t;return l||(s?l=R$(e,s,o):i!=null&&(l=r.getRow(i))),(c=a.getRowCtrls(l?[l]:[]))==null?void 0:c[0]}function Bt(e,t={}){var d;const{cellCtrl:i,colId:s,columnId:n,column:o}=t;if(i)return i;const r=e.colModel.getCol(s??n??Dy(o)),a=t.rowCtrl??i0(e,t),l=(a==null?void 0:a.getCellCtrl(r))??void 0;if(l)return l;const c=t.rowNode??(a==null?void 0:a.rowNode);if(c)return(d=e.rowRenderer.getCellCtrls([c],[r]))==null?void 0:d[0]}function yR(e){const{editSvc:t}=e;t!=null&&t.isBatchEditing()?Ud(e):t==null||t.stopEditing(void 0,{source:"api"})}function t4(e,t,i){const{gos:s,popupSvc:n}=t;if(!s.get("stopEditingWhenCellsLoseFocus"))return;const o=r=>{const a=r.relatedTarget;if(py(a)===null){yR(t);return}let l=i.some(c=>c.contains(a))&&s.isElementInThisInstance(a);l||(l=!!n&&(n.getActivePopups().some(c=>c.contains(a))||n.isElementWithinCustomPopup(a))),l||yR(t)};for(const r of i)e.addManagedElementListeners(r,{focusout:o})}function Dy(e){if(e)return typeof e=="string"?e:e.getColId()}var Cn=Symbol("unedited");function WD(e,t={}){var n;const i=[],s=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(const o of s){const r=(n=o.comp)==null?void 0:n.getCellEditor();r&&i.push({ctrl:o,editor:Mg(r)})}return i}var i4=(e,t={})=>WD(e,t).map(i=>i.editor);function s4(e,t,i,s,n,o){var h;t.length===0&&(i!=null&&i.rowNode)&&(i!=null&&i.column)&&lu(e,i,{key:s,event:n,cellStartedEdit:o});const{valueSvc:r,editSvc:a,editModelSvc:l}=e,{rowNode:c,column:d}=i??{};for(const u of t){const{rowNode:f,column:p}=u,m=Bt(e,u);if(!m){if(f&&p){const C=r.getValue(p,f,void 0,"api"),y=((i==null?void 0:i.rowNode)===f&&(i==null?void 0:i.column)===p&&s||void 0)??(a==null?void 0:a.getCellDataValue(u,!1))??((h=r.getValueForDisplay(p,f))==null?void 0:h.value)??C??Cn;l==null||l.setEdit(u,{pendingValue:y,sourceValue:C,state:"editing"})}continue}const v=o&&c===m.rowNode&&m.column===d;lu(e,{rowNode:c,column:m.column},{key:v?s:null,event:v?n:null,cellStartedEdit:v&&o})}}function Ir({pendingValue:e,sourceValue:t}){return e===Cn&&(e=t),e!==t}function lu(e,t,i){var C,w,S,y,R,A,P,T,M,N;const s=e.gos.get("enableGroupEdit"),{key:n,event:o,cellStartedEdit:r,silent:a}=i??{},l=Bt(e,t),c=(C=l==null?void 0:l.comp)==null?void 0:C.getCellEditor(),d=UD(e,t,n,r&&!a),h=(w=e.editModelSvc)==null?void 0:w.getEdit(t);let u=d.value;if(u===void 0&&(u=h==null?void 0:h.sourceValue),(S=e.editModelSvc)==null||S.setEdit(t,{editorValue:u,state:"editing"}),c){(y=c.refresh)==null||y.call(c,d);return}const f=t.column.getColDef(),p=DT(e.userCompFactory,f,d),m=(p==null?void 0:p.popupFromSelector)!=null?p.popupFromSelector:!!f.cellEditorPopup,v=(p==null?void 0:p.popupPositionFromSelector)!=null?p.popupPositionFromSelector:f.cellEditorPopupPosition;if(jD(p.params,o),l){l.editCompDetails=p,l.onEditorAttachedFuncs.push(()=>{var L;return(L=l.rangeFeature)==null?void 0:L.unsetComp()}),(R=l.comp)==null||R.setEditDetails(p,m,v,e.gos.get("reactiveCustomComponents")),(A=l==null?void 0:l.rowCtrl)==null||A.refreshRow({suppressFlash:!0});const _=(P=e.editModelSvc)==null?void 0:P.getEdit(t,!0);!a&&!((T=_==null?void 0:_.editorState)!=null&&T.cellStartedEditing)&&((M=e.editSvc)==null||M.dispatchCellEvent(t,o,"cellEditingStarted",s?{value:u}:{}),(N=e.editModelSvc)==null||N.setEdit(t,{editorState:{cellStartedEditing:!0}}))}}function $D(e,t,i){var o,r;const s={editorValueExists:!1};if(s0(e)){const a=(o=t.getValidationErrors)==null?void 0:o.call(t);if(((a==null?void 0:a.length)??0)>0)return s}if(i!=null&&i.isCancelling)return s;if(i!=null&&i.isStopping){const a=(r=t==null?void 0:t.isCancelAfterEnd)==null?void 0:r.call(t);if(a)return{...s,isCancelAfterEnd:a}}return{editorValue:t.getValue(),editorValueExists:!0}}function UD(e,t,i,s){var w,S,y,R;const{valueSvc:n,gos:o,editSvc:r}=e,a=e.gos.get("enableGroupEdit"),l=Bt(e,t),c=((w=t.rowNode)==null?void 0:w.rowIndex)??void 0,d=r==null?void 0:r.isBatchEditing(),h=e.colModel.getCol(t.column.getId()),{rowNode:u,column:f}=t,p=(S=l.comp)==null?void 0:S.getCellEditor(),m=r==null?void 0:r.getCellDataValue(t,!1),v=m===void 0?p?(y=$D(e,p))==null?void 0:y.editorValue:void 0:m,C=v===Cn?(R=n.getValueForDisplay(h,u))==null?void 0:R.value:v;return Le(o,{value:a?v:C,eventKey:i??null,column:f,colDef:f.getColDef(),rowIndex:c,node:u,data:u.data,cellStartedEdit:s??!1,onKeyDown:l==null?void 0:l.onKeyDown.bind(l),stopEditing:A=>{r.stopEditing(t,{source:d?"ui":"api",suppressNavigateAfterEdit:A}),fv(e,t)},eGridCell:l==null?void 0:l.eGui,parseValue:A=>n.parseValue(h,u,A,l==null?void 0:l.value),formatValue:l==null?void 0:l.formatValue.bind(l),validate:()=>{r==null||r.validateEdit()}})}function My(e,t){const{editModelSvc:i}=e;i==null||i.getEditMap().forEach((s,n)=>{s.forEach((o,r)=>{!t&&(o.state==="editing"||o.pendingValue===Cn)||!Ir(o)&&(o.state!=="editing"||t)&&(i==null||i.removeEdits({rowNode:n,column:r}))})})}function n4(e,t){var c;const i=(c=t.comp)==null?void 0:c.getCellEditor();if(!(i!=null&&i.refresh))return;const{eventKey:s,cellStartedEdit:n}=t.editCompDetails.params,{column:o}=t,r=UD(e,t,s,n),a=o.getColDef(),l=DT(e.userCompFactory,a,r);i.refresh(jD(l.params,s))}function jD(e,t){var i;return t instanceof KeyboardEvent&&e.column.getColDef().cellEditor==="agNumberCellEditor"?e.suppressPreventDefault=["-","+",".","e"].includes((t==null?void 0:t.key)??"")||e.suppressPreventDefault:(i=t==null?void 0:t.preventDefault)==null||i.call(t),e}function Pl(e,t){var i,s,n;for(const o of((i=e.editModelSvc)==null?void 0:i.getEditPositions())??[]){const r=Bt(e,o);if(!r)continue;const a=(s=r.comp)==null?void 0:s.getCellEditor();if(!a)continue;const{editorValue:l,editorValueExists:c,isCancelAfterEnd:d}=$D(e,a,t);d&&((n=e.editModelSvc)==null||n.setEdit(o,{editorState:{isCancelAfterEnd:d}})),Nm(e,o,l,void 0,!c,t)}}function Nm(e,t,i,s,n,o){const{editModelSvc:r,valueSvc:a}=e;if(!r)return;const{rowNode:l,column:c}=t;if(!(l&&c))return;let d=r.getEdit(t,!0);d!=null&&d.sourceValue||(d=r.setEdit(t,{sourceValue:a.getValue(c,l,void 0,"api"),pendingValue:d?d.editorValue:Cn})),r.setEdit(t,{editorValue:n?d.sourceValue:i}),o!=null&&o.persist&&o4(e,t)}function o4(e,t){const{editModelSvc:i}=e,s=i==null?void 0:i.getEdit(t,!0);i==null||i.setEdit(t,{pendingValue:s==null?void 0:s.editorValue})}function Ud(e,t,i){var s;t||(t=(s=e.editModelSvc)==null?void 0:s.getEditPositions());for(const n of t??[])fv(e,n,i)}function fv(e,t,i){var c,d;const s=e.gos.get("enableGroupEdit"),{editModelSvc:n}=e,o=Bt(e,t),r=n==null?void 0:n.getEdit(t,!0);if(!o){r&&(n==null||n.setEdit(t,{state:"changed"}));return}const{comp:a}=o;if(a&&!a.getCellEditor()){if(o==null||o.refreshCell(),r){n==null||n.setEdit(t,{state:"changed"});const h=s?SR(i,r):{valueChanged:!1,newValue:void 0,oldValue:r.sourceValue};xR(e,t,h,i)}return}if(s0(e)){const h=(d=(c=a==null?void 0:a.getCellEditor())==null?void 0:c.getValidationErrors)==null?void 0:d.call(c),u=n==null?void 0:n.getCellValidationModel();h!=null&&h.length?u==null||u.setCellValidation(t,{errorMessages:h}):u==null||u.clearCellValidation(t)}n==null||n.setEdit(t,{state:"changed"}),a==null||a.setEditDetails(),a==null||a.refreshEditStyles(!1,!1),o==null||o.refreshCell({force:!0,suppressFlash:!0});const l=n==null?void 0:n.getEdit(t);if(l&&l.state==="changed"){const h=s?SR(i,l):{valueChanged:Ir(l)&&!(i!=null&&i.cancel),newValue:i!=null&&i.cancel||l.editorState.isCancelAfterEnd?void 0:(l==null?void 0:l.editorValue)??(r==null?void 0:r.pendingValue),oldValue:l==null?void 0:l.sourceValue};xR(e,t,h,i)}}function SR(e,t){return e!=null&&e.cancel?{valueChanged:!1,oldValue:t.sourceValue,newValue:void 0,value:t.sourceValue}:{valueChanged:!1,oldValue:t.sourceValue,newValue:t.pendingValue,value:t.sourceValue}}function xR(e,t,i,{silent:s,event:n}={}){const{editSvc:o,editModelSvc:r}=e,a=r==null?void 0:r.getEdit(t),{editorState:l}=a||{},{isCancelBeforeStart:c}=l||{};!s&&!c&&(o==null||o.dispatchCellEvent(t,n,"cellEditingStopped",i),r==null||r.setEdit(t,{editorState:{cellStoppedEditing:!0}}))}function s0(e){var r;const{gos:t,colModel:i}=e,s=!!t.get("getFullRowEditValidationErrors"),n=(r=i.getColumnDefs())==null?void 0:r.filter(a=>a.editable).some(({cellEditorParams:a})=>{const{minLength:l,maxLength:c,getValidationErrors:d,min:h,max:u}=a||{};return l!==void 0||c!==void 0||d!==void 0||h!==void 0||u!==void 0}),o=e.gridApi.getCellEditorInstances().some(a=>a.getValidationElement||a.getValidationErrors);return n||s||o}function Xc(e,t){var u,f,p,m,v,C,w,S;if(!(t||s0(e)))return;const i=WD(e),s=new VD,{ariaAnnounce:n,localeSvc:o,editModelSvc:r,gos:a}=e,l=a.get("editType")==="fullRow",d=XP(o)("ariaValidationErrorPrefix","Cell Editor Validation");for(const y of i){const{ctrl:R,editor:A}=y,{rowNode:P,column:T}=R,M=((u=A.getValidationErrors)==null?void 0:u.call(A))??[],N=((f=A.getValidationElement)==null?void 0:f.call(A,!1))||!((p=A.isPopup)!=null&&p.call(A))&&R.eGui;if(N){const _=M!=null&&M.length>0,L=_?M.join(". "):"";JN(N,_),_&&n.announceValue(`${d} ${M}`,"editorValidation"),N instanceof HTMLInputElement?N.setCustomValidity(L):N.classList.toggle("invalid",_)}(M==null?void 0:M.length)>0&&s.setCellValidation({rowNode:P,column:T},{errorMessages:M})}Pl(e,{persist:!1}),r==null||r.setCellValidationModel(s);const h=new Set;for(const{ctrl:y}of i)h.add(y.rowCtrl);if(l){const y=r4(e);r==null||r.setRowValidationModel(y)}for(const y of h.values()){(m=y.rowEditStyleFeature)==null||m.applyRowStyles();for(const R of y.getAllCellCtrls())(v=R.tooltipFeature)==null||v.refreshTooltip(!0),(C=R.editorTooltipFeature)==null||C.refreshTooltip(!0),(S=(w=R.editStyleFeature)==null?void 0:w.applyCellStyles)==null||S.call(w)}}var r4=e=>{var n;const t=new zD,i=e.gos.get("getFullRowEditValidationErrors"),s=(n=e.editModelSvc)==null?void 0:n.getEditMap();if(!s)return t;for(const o of s.keys()){const r=s.get(o);if(!r)continue;const a=[],{rowIndex:l,rowPinned:c}=o;for(const h of r.keys()){const u=r.get(h);if(!u)continue;const{editorValue:f,pendingValue:p,sourceValue:m}=u,v=f??(p===Cn?void 0:p)??m;a.push({column:h,colId:h.getColId(),rowIndex:l,rowPinned:c,oldValue:m,newValue:v})}const d=(i==null?void 0:i({editorsState:a}))??[];d.length>0&&t.setRowValidation({rowNode:o},{errorMessages:d})}return t};function a4(e){var s;Xc(e,!0);const t=(s=e.editModelSvc)==null?void 0:s.getCellValidationModel().getCellValidationMap();if(!t)return null;const i=[];return t.forEach((n,o)=>{n.forEach(({errorMessages:r},a)=>{i.push({column:a,rowIndex:o.rowIndex,rowPinned:o.rowPinned,messages:r??null})})}),i}function l4(e,t,i,{rowNode:s,column:n},o){return Le(e.gos,{type:i,node:s,data:s.data,value:o,column:n,colDef:n.getColDef(),rowPinned:s.rowPinned,event:t,rowIndex:s.rowIndex})}function c4(e,t=!1){return e===G.DELETE?!0:!t&&e===G.BACKSPACE?kT():!1}var d4=class extends V{constructor(e,t,i,s){super(),this.cellCtrl=e,this.rowNode=i,this.rowCtrl=s,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case G.ENTER:this.onEnterKeyDown(e);break;case G.F2:this.onF2KeyDown(e);break;case G.ESCAPE:this.onEscapeKeyDown(e);break;case G.TAB:this.onTabKeyDown(e);break;case G.BACKSPACE:case G.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case G.DOWN:case G.UP:case G.RIGHT:case G.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){var n,o;const{cellCtrl:i,beans:s}=this;if(!((n=s.editSvc)!=null&&n.isEditing(i,{withOpenEditor:!0}))){if(e.shiftKey&&i.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const r=i.getFocusedCellPosition();(o=s.navigation)==null||o.navigateToNextCell(e,t,r,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:i}=this.beans;if(!t)return;const s=t.extendLatestRangeInDirection(e);s&&(e.key===G.LEFT||e.key===G.RIGHT?i==null||i.ensureColumnVisible(s.column):i==null||i.ensureRowVisible(s.rowIndex))}onTabKeyDown(e){var t;(t=this.beans.navigation)==null||t.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){var c;const{cellCtrl:i,beans:s,rowNode:n}=this,{gos:o,rangeSvc:r,eventSvc:a,editSvc:l}=s;if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),c4(e,o.get("enableCellEditingOnBackspace"))&&!(l!=null&&l.isEditing(i,{withOpenEditor:!0}))){if(r&&$r(o))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const{column:d}=i,h=this.beans.valueSvc.getDeleteValue(d,n);n.setDataValue(d,h,"cellClear")}}else l!=null&&l.isEditing(i,{withOpenEditor:!0})||(c=s.editSvc)==null||c.startEditing(i,{startedEdit:!0,event:t});a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){var c;const{cellCtrl:t,beans:i}=this,{editSvc:s,navigation:n}=i,o=s==null?void 0:s.isEditing(t,{withOpenEditor:!0}),r=t.rowNode,a=s==null?void 0:s.isRowEditing(r,{withOpenEditor:!0}),l=d=>{(s==null?void 0:s.startEditing(d,{startedEdit:!0,event:e,source:"edit"}))&&e.preventDefault()};if(o||a){if(this.isCtrlEnter(e)){s==null||s.applyBulkEdit(t,((c=i==null?void 0:i.rangeSvc)==null?void 0:c.getCellRanges())||[]);return}if(Xc(i),(s==null?void 0:s.checkNavWithValidation(void 0,e))==="block-stop")return;s!=null&&s.isEditing(t,{withOpenEditor:!0})?s==null||s.stopEditing(t,{event:e,source:"edit"}):a&&!t.isCellEditable()?s==null||s.stopEditing({rowNode:r},{event:e,source:"edit"}):l(t)}else if(i.gos.get("enterNavigatesVertically")){const d=e.shiftKey?G.UP:G.DOWN;n==null||n.navigateToNextCell(null,d,t.cellPosition,!1)}else{if(s!=null&&s.hasValidationErrors())return;s!=null&&s.hasValidationErrors(t)&&s.revertSingleCellEdit(t,!0),l(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===G.ENTER}onF2KeyDown(e){const{cellCtrl:t,beans:{editSvc:i}}=this;i!=null&&i.isEditing()&&(Xc(this.beans),(i==null?void 0:i.checkNavWithValidation(void 0,e))==="block-stop")||i==null||i.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){const{cellCtrl:t,beans:{editSvc:i}}=this;(i==null?void 0:i.checkNavWithValidation(t,e))==="block-stop"&&i.revertSingleCellEdit(t),i==null||i.stopEditing(t,{event:e,cancel:!0})}processCharacter(e){var r;const i=e.target!==this.eGui,{beans:{editSvc:s},cellCtrl:n}=this;if(i||s!=null&&s.isEditing(n,{withOpenEditor:!0}))return;if(e.key===G.SPACE)this.onSpaceKeyDown(e);else if(s!=null&&s.isCellEditable(n,"ui")){if(s!=null&&s.hasValidationErrors()&&!(s!=null&&s.hasValidationErrors(n)))return;s==null||s.startEditing(n,{startedEdit:!0,event:e,source:"api"});const a=n.editCompDetails;!((r=a==null?void 0:a.params)!=null&&r.suppressPreventDefault)&&e.preventDefault()}}onSpaceKeyDown(e){var n;const{gos:t,editSvc:i}=this.beans,{rowNode:s}=this.cellCtrl;!(i!=null&&i.isEditing(this.cellCtrl,{withOpenEditor:!0}))&&Lc(t)&&((n=this.beans.selectionSvc)==null||n.handleSelectionEvent(e,s,"spaceKey")),e.preventDefault()}},h4=class extends V{constructor(e,t,i){super(),this.cellCtrl=e,this.column=i,this.beans=t}onMouseEvent(e,t){if(!Hr(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){var m;if((m=this.beans.touchSvc)!=null&&m.handleCellDoubleClick(this,e))return;const{eventSvc:t,rangeSvc:i,editSvc:s,editModelSvc:n,frameworkOverrides:o,gos:r}=this.beans,a=e.ctrlKey||e.metaKey,{cellCtrl:l}=this,{column:c,cellPosition:d,rowNode:h}=l,u=Im(r,c,h,e);i&&a&&!u&&i.getCellRangeCount(d)>1&&i.intersectLastRange(!0);const f=l.createEvent(e,"cellClicked");f.isEventHandlingSuppressed=u,t.dispatchEvent(f);const p=c.getColDef();if(p.onCellClicked&&window.setTimeout(()=>{o.wrapOutgoing(()=>{p.onCellClicked(f)})},0),!u&&(n==null?void 0:n.getState(l))!=="editing"){const v=s==null?void 0:s.isEditing(),C=(n==null?void 0:n.getCellValidationModel().getCellValidationMap().size)??0,w=(n==null?void 0:n.getRowValidationModel().getRowValidationMap().size)??0;if(v&&(C>0||w>0))return;s!=null&&s.shouldStartEditing(l,e)?s==null||s.startEditing(l,{event:e}):s!=null&&s.shouldStopEditing(l,e)&&(this.beans.gos.get("editType")==="fullRow"?s==null||s.stopEditing(l,{event:e,source:"edit"}):s==null||s.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:s}=this,{eventSvc:n,frameworkOverrides:o,editSvc:r,editModelSvc:a,gos:l}=i,c=Im(l,s.column,s.rowNode,e),d=t.getColDef(),h=s.createEvent(e,"cellDoubleClicked");if(h.isEventHandlingSuppressed=c,n.dispatchEvent(h),typeof d.onCellDoubleClicked=="function"&&window.setTimeout(()=>{o.wrapOutgoing(()=>{d.onCellDoubleClicked(h)})},0),!c&&r!=null&&r.shouldStartEditing(s,e)&&(a==null?void 0:a.getState(s))!=="editing"){const u=r==null?void 0:r.isEditing(),f=(a==null?void 0:a.getCellValidationModel().getCellValidationMap().size)??0,p=(a==null?void 0:a.getRowValidationModel().getRowValidationMap().size)??0;if(u&&(f>0||p>0))return;r==null||r.startEditing(s,{event:e})}}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:s}=e,n=e.target,{cellCtrl:o,beans:r}=this,{eventSvc:a,rangeSvc:l,rowNumbersSvc:c,focusSvc:d,gos:h,editSvc:u}=r,{column:f,rowNode:p,cellPosition:m}=o,v=Im(h,f,p,e),C=()=>{const R=o.createEvent(e,"cellMouseDown");R.isEventHandlingSuppressed=v,a.dispatchEvent(R)};if(v){C();return}if(this.isRightClickInExistingRange(e))return;const w=l&&!l.isEmpty(),S=this.containsWidget(n),y=Or(f);if(c&&y&&!c.handleMouseDownOnCell(m,e)){l&&e.preventDefault(),e.stopImmediatePropagation();return}if(!s||!w){const R=u==null?void 0:u.isEditing(o),P=h.get("enableCellTextSelection")&&e.defaultPrevented,T=(dl()||P)&&!R&&!rg(n)&&!S;o.focusCell(T,e)}if(s&&w&&!d.isCellFocused(m)){e.preventDefault();const R=d.getFocusedCell();if(R){const{column:A,rowIndex:P,rowPinned:T}=R;u!=null&&u.isEditing(R)&&(u==null||u.stopEditing(R)),d.setFocusedCell({column:A,rowIndex:P,rowPinned:T,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}if(!S){if(l){y&&e.preventDefault();const R=Fx(r,e)&&y;if(s)l.extendLatestRangeToCell(m);else if(!R){const A=t||i;l.setRangeToCell(m,A)}}C()}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.cellPosition),s=Fx(this.beans,e);if(i&&s)return!0}return!1}containsWidget(e){return _c(e,"ag-selection-checkbox",3)||_c(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),i==null||i.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),i==null||i.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,i=t.contains(e.target),s=t.contains(e.relatedTarget);return i&&s}},u4=class extends V{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();cl(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,i=e.getColSpan(t),s=[];if(i===1)s.push(e);else{let n=e;const o=e.getPinned();for(let r=0;n&&r<i&&(s.push(n),n=this.beans.visibleCols.getColAfter(n),!(!n||Ht(n)||o!==n.getPinned()));r++);}return s}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=Mt(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;const{visibleCols:t}=this.beans,i=t.getColsLeftWidth();if(this.column.getPinned()==="right"){const s=t.bodyWidth;return i+s+(e||0)}return i+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;const i=Oc(this.beans)*this.rowSpan;this.eContent.style.height=`${i}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},g4="ag-cell",f4="ag-cell-auto-height",p4="ag-cell-normal-height",m4="ag-cell-focus",v4="ag-cell-first-right-pinned",C4="ag-cell-last-left-pinned",w4="ag-cell-not-inline-editing",b4="ag-cell-wrap-text",y4=0,jd=class extends V{constructor(e,t,i,s){super(),this.column=e,this.rowNode=t,this.rowCtrl=s,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=i,this.gos=i.gos,this.editSvc=i.editSvc,this.hasEdit=!!i.editSvc;const{colId:n}=e;this.instanceId=n+"-"+y4++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){var s,n;const{beans:e}=this;this.positionFeature=new u4(this,e),this.customStyleFeature=(s=e.cellStyles)==null?void 0:s.createCellCustomStyleFeature(this,e),this.editStyleFeature=(n=e.editSvc)==null?void 0:n.createCellStyleFeature(this,e),this.mouseListener=new h4(this,e,this.column),this.keyboardListener=new d4(this,e,this.rowNode,this.rowCtrl),this.enableTooltipFeature();const{rangeSvc:t}=e;t&&$r(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(e,this)),Or(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(e,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){var i;this.tooltipFeature=(i=this.beans.tooltipSvc)==null?void 0:i.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(e){var t;this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=(t=this.beans.tooltipSvc)==null?void 0:t.setupCellEditorTooltip(this,e),Xc(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,i,s,n,o,r){var a,l,c,d,h,u,f,p,m;if(this.comp=e,this.eGui=t,this.printLayout=n,r??(r=this),this.addDomData(r),this.addFeatures(),r.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(s,r),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(a=this.positionFeature)==null||a.init(),(l=this.customStyleFeature)==null||l.setComp(e),(c=this.editStyleFeature)==null||c.setComp(e),(d=this.tooltipFeature)==null||d.refreshTooltip(),(h=this.keyboardListener)==null||h.init(),(u=this.rangeFeature)==null||u.setComp(e),(f=this.rowResizeFeature)==null||f.refreshRowResizer(),o&&this.isCellEditable()||this.hasEdit&&((p=this.editSvc)!=null&&p.isEditing(this,{withOpenEditor:!0}))?(m=this.editSvc)==null||m.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0}):this.showValue(!1,!0),this.onCompAttachedFuncs.length){for(const v of this.onCompAttachedFuncs)v();this.onCompAttachedFuncs=[]}}setupAutoHeight(e,t){var i;this.isAutoHeight=((i=this.beans.rowAutoHeight)==null?void 0:i.setupCellAutoHeight(this,e,t))??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){var l,c;const{beans:e,column:t}=this,{userCompFactory:i,ctrlsSvc:s,eventSvc:n}=e,o=t.getColDef(),r=this.createCellRendererParams();r.deferRender=!0;const a=kx(i,o,r);if((c=(l=s.getGridBodyCtrl())==null?void 0:l.scrollFeature)!=null&&c.isScrolling()){let d;const h=new Xt(f=>{d=f}),[u]=this.addManagedListeners(n,{bodyScrollEnd:()=>{d(),u()}});return{loadingComp:a,onReady:h}}return{loadingComp:a,onReady:Xt.resolve()}}showValue(e,t){var h,u,f,p;const{beans:i,column:s,rowNode:n,rangeFeature:o}=this,{userCompFactory:r}=i;let a=this.getValueToDisplay(),l;const c=n.stub&&((h=n.groupData)==null?void 0:h[s.getId()])==null,d=s.getColDef();if(c||this.isCellRenderer()){const m=this.createCellRendererParams();!c||Or(s)?l=Ix(r,d,m):l=kx(r,d,m)}if(!l&&!c&&((u=i.findSvc)!=null&&u.isMatch(n,s))){const m=this.createCellRendererParams();l=Ix(r,{...s.getColDef(),cellRenderer:"agFindCellRenderer"},m)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(n,{checkSiblings:!0})){const m=this.editSvc.prepDetailsDuringBatch(this,{compDetails:l,valueToDisplay:a});m&&(m.compDetails?l=m.compDetails:m.valueToDisplay&&(a=m.valueToDisplay))}this.comp.setRenderDetails(l,a,e),(f=this.customRowDragComp)==null||f.refreshVisibility(),!t&&o&&Xr(i,()=>o==null?void 0:o.refreshHandle()),(p=this.rowResizeFeature)==null||p.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){const e="ag-cell-value",t=this.column.getColDef().cellRenderer==="agCheckboxCellRenderer";let i="";return t&&(i=" ag-allow-overflow"),`${e}${i}`}isIncludeControl(e,t=!1){return(this.rowNode.rowPinned==null||t&&wp(this.rowNode))&&!!e}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:i}=this.beans.gridOptions,s=iv(t),n=Qr(this.column);return i==="custom"&&s!=="selectionColumn"&&n?!1:e.checkboxSelection||n&&typeof t=="object"&&Bd(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),s=this.includeDndSource!=this.isIncludeControl(e.dndSource),n=this.isAutoHeight!=this.column.isAutoHeight();return t||i||s||n}onPopupEditorClosed(){const{editSvc:e}=this.beans;e!=null&&e.isEditing(this,{withOpenEditor:!0})&&(e==null||e.stopEditing(this,{source:e!=null&&e.isBatchEditing()?"ui":"api"}))}stopEditing(e=!1){const{editSvc:t}=this.beans;return(t==null?void 0:t.stopEditing(this,{cancel:e,source:t!=null&&t.isBatchEditing()?"ui":"api"}))??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:i,rowNode:s,comp:n,eGui:o,beans:{valueSvc:r,gos:a,editSvc:l}}=this;return Le(a,{value:e,valueFormatted:t,getValue:()=>r.getValueForDisplay(i,s).value,setValue:d=>(l==null?void 0:l.setDataValue({rowNode:s,column:i},d))||s.setDataValue(i,d),formatValue:this.formatValue.bind(this),data:s.data,node:s,pinned:i.getPinned(),colDef:i.getColDef(),column:i,refreshCell:this.refreshCell.bind(this),eGridCell:o,eParentOfValue:n.getParentOfValue(),registerRowDragger:(d,h,u,f)=>this.registerRowDragger(d,h,f),setTooltip:(d,h)=>{var u;a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(d,h),(u=this.tooltipFeature)==null||u.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;if(this.refreshShouldDestroy()?(t=this.rowCtrl)==null||t.recreateCell(this):this.refreshCell(e),this.hasEdit&&this.editCompDetails){const{editSvc:i,comp:s}=this;!(s!=null&&s.getCellEditor())&&i.isEditing(this,{withOpenEditor:!0})&&i.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell({force:e,suppressFlash:t,newData:i}={}){var R;const{editStyleFeature:s,customStyleFeature:n,rowCtrl:{rowEditStyleFeature:o},beans:{cellFlashSvc:r,filterManager:a},column:l,comp:c,suppressRefreshCell:d,tooltipFeature:h}=this;if(d)return;const{field:u,valueGetter:f,showRowGroup:p,enableCellChangeFlash:m}=l.getColDef(),v=u==null&&f==null&&p==null,C=e||v||i,w=!!c,S=this.updateAndFormatValue(w),y=C||S;if(w){if(y){this.showValue(!!i,!1);const A=a==null?void 0:a.isSuppressFlashingCellsBecauseFiltering();!t&&!A&&m&&(r==null||r.flashCell(this)),(R=s==null?void 0:s.applyCellStyles)==null||R.call(s),n==null||n.applyUserStyles(),n==null||n.applyClassesFromColDef(),o==null||o.applyRowStyles()}h==null||h.refreshTooltip(),n==null||n.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,i=this.valueFormatted,{value:s,valueFormatted:n}=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode,!0);return this.value=s,this.valueFormatted=n,e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i:!0}valuesAreEqual(e,t){const i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}addDomData(e){const t=this.eGui;Kc(this.beans.gos,t,hv,this),e.addDestroyFunc(()=>Kc(this.beans.gos,t,hv,null))}createEvent(e,t){const{rowNode:i,column:s,value:n,beans:o}=this;return l4(o,e,t,{rowNode:i,column:s},n)}processCharacter(e){var t;(t=this.keyboardListener)==null||t.processCharacter(e)}onKeyDown(e){var t;(t=this.keyboardListener)==null||t.onKeyDown(e)}onMouseEvent(e,t){var i;(i=this.mouseListener)==null||i.onMouseEvent(e,t)}getColSpanningList(){var e;return((e=this.positionFeature)==null?void 0:e.getColSpanningList())??[]}onLeftChanged(){var e;this.comp&&((e=this.positionFeature)==null||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:i}=this;fD(e,t,i.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);HP(this.eGui,e)}onWidthChanged(){var e;return(e=this.positionFeature)==null?void 0:e.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){var e;this.comp&&((e=this.rangeFeature)==null||e.updateRangeBordersIfRangeCount())}onCellSelectionChanged(){var e;this.comp&&((e=this.rangeFeature)==null||e.onCellSelectionChanged())}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1,t){var s;const i=(s=this.editSvc)==null?void 0:s.allowedFocusTargetOnValidation(this);i&&i!==this||this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e,sourceEvent:t})}restoreFocus(e=!1){const{beans:{editSvc:t,focusSvc:i},comp:s}=this;if(!s||t!=null&&t.isEditing(this)||!this.isCellFocused()||!i.shouldTakeFocus())return;const n=()=>{if(!this.isAlive())return;const o=s.getFocusableElement();this.isCellFocused()&&o.focus({preventScroll:!0})};if(e){setTimeout(n,0);return}n()}onRowIndexChanged(){var e,t;this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),(e=this.rangeFeature)==null||e.onCellSelectionChanged(),(t=this.rowResizeFeature)==null||t.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(Or(this.column)&&(e=!0),$s(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss(v4,e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss(C4,e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){var n;const{beans:t}=this;if(dC(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}const i=this.isCellFocused(),s=((n=t.editSvc)==null?void 0:n.isEditing(this))??!1;if(this.comp.toggleCss(m4,i),i&&(e!=null&&e.forceBrowserFocus)){let o=this.comp.getFocusableElement();if(s){const r=zd(o,null,!0);r.length&&(o=r[0])}o.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}i&&e&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:Lr(t),column:this.column}}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss(g4,!0),e.toggleCss(w4,!0);const t=this.column.isAutoHeight()==!0;e.toggleCss(f4,t),e.toggleCss(p4,!t)}onColumnHover(){var e;(e=this.beans.colHover)==null||e.onCellColumnHover(this.column,this.comp)}onColDefChanged(){var e,t;this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),(e=this.editSvc)!=null&&e.isEditing(this)?(t=this.editSvc)==null||t.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.comp.toggleCss(b4,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu"),{beans:s}=this;s.eventSvc.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout(()=>{s.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(i)})},0)}getCellRenderer(){var e;return((e=this.comp)==null?void 0:e.getCellRenderer())??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){var e;return((e=this.eGui)==null?void 0:e.contains(Wt(this.beans)))??!1}createSelectionCheckbox(){var t;const e=(t=this.beans.selectionSvc)==null?void 0:t.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const s=this.createRowDragComp(e,t,i);s&&(this.customRowDragComp=s,this.addDestroyFunc(()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null}),s.refreshVisibility())}createRowDragComp(e,t,i){var n;const s=(n=this.beans.rowDragSvc)==null?void 0:n.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,i);if(s)return this.beans.context.createBean(s),s}cellEditorAttached(){for(const e of this.onEditorAttachedFuncs)e();this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function n0(e,t,i,s,n,o){if(i==null&&t==null)return;const r={},a={},l=(c,d)=>{for(const h of c.split(" "))h.trim()!=""&&d(h)};if(i){const c=Object.keys(i);for(let d=0;d<c.length;d++){const h=c[d],u=i[h];let f;typeof u=="string"?f=e?e.evaluate(u,s):!0:typeof u=="function"&&(f=u(s)),l(h,p=>{f?r[p]=!0:a[p]=!0})}}if(t&&o)for(const c of Object.keys(t))l(c,d=>{r[d]||(a[d]=!0)});o&&Object.keys(a).forEach(o),Object.keys(r).forEach(n)}function RR(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var S4=class extends V{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const i=this.gos,s=r=>{if(typeof r=="string")e.push(r);else if(Array.isArray(r))for(const a of r)e.push(a)},n=i.get("rowClass");n&&s(n);const o=i.getCallback("getRowClass");if(o){const r={data:t.data,node:t,rowIndex:t.rowIndex},a=o(r);s(a)}}preProcessRowClassRules(e,t){this.processRowClassRules(t,i=>{e.push(i)},()=>{})}processRowClassRules(e,t,i){const{gos:s,expressionSvc:n}=this.beans,o=Le(s,{data:e.data,node:e,rowIndex:e.rowIndex});n0(n,void 0,s.get("rowClassRules"),o,t,i)}processStylesFromGridOptions(e){const t=this.gos,i=t.get("rowStyle"),s=t.getCallback("getRowStyle");let n;if(s){const o={data:e.data,node:e,rowIndex:e.rowIndex};n=s(o)}if(n||i)return Object.assign({},i,n)}},x4=0,pv=class extends V{constructor(e,t,i,s,n){var o,r;super(),this.rowNode=e,this.useAnimationFrameForCreate=s,this.printLayout=n,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=((o=t.pagination)==null?void 0:o.getCurrentPage())??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+x4++,this.rowId=og(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=RR(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=(r=t.editSvc)==null?void 0:r.createRowStyleFeature(this,t),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=og(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,i,s){var h,u;const{context:n,focusSvc:o}=this.beans;s=pp(this,n,s);const r={rowComp:e,element:t,containerType:i,compBean:s};this.allRowGuis.push(r),this.updateGui(i,r),this.initialiseRowComp(r);const a=this.rowNode,l=this.rowType==="FullWidthLoading"||a.stub,c=!a.data&&this.beans.rowModel.getType()==="infinite";!l&&!c&&!a.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent();const d=(h=this.fullWidthGui)==null?void 0:h.element;d&&!((u=this.beans.editSvc)!=null&&u.isEditing(this))&&o.isRowFocused(a.rowIndex,a.rowPinned)&&o.shouldTakeFocus()&&setTimeout(()=>d.focus({preventScroll:!0}),0)}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";for(const i of this.allRowGuis)i.element.style.display=t}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),Lc(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const i=e.rowComp,s=this.getInitialRowClasses(e.containerType);for(const n of s)i.toggleCss(n,!0);this.executeSlideAndFadeAnimations(e),this.rowNode.group&&oy(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),Kc(t,e.element,uv,this),e.compBean.addDestroyFunc(()=>Kc(t,e.element,uv,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=og(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(ry(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(ry(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){var s;const t=(s=this.beans.rowDragSvc)==null?void 0:s.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;const i=this.createBean(t,this.beans.context);this.rowDragComps.push(i),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(n=>n!==i),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(i,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),i=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(i)}getFullWidthCellRenderers(){var e,t;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(i=>{var s;return(s=i==null?void 0:i.rowComp)==null?void 0:s.getFullWidthCellRenderer()}):[(t=(e=this.fullWidthGui)==null?void 0:e.rowComp)==null?void 0:t.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:i,beans:{visibleCols:s}}=this,n=!!e||!s.isPinningLeft(),o=!!t,r=!!i||!s.isPinningRight();return n&&o&&r}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,s=this.beans.colModel.isPivotMode(),n=hT(this.gos,this.rowNode,s);e?this.rowType="FullWidthLoading":i?this.rowType="FullWidthDetail":t?this.rowType="FullWidth":n?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:i}=this.beans;if(!(i!=null&&i.active)||e||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(i.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){var i;if(!((i=this.beans.rowSpanSvc)!=null&&i.isCellSpanning(e,this.rowNode)))return new jd(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){var t;return!((t=this.beans.rowSpanSvc)!=null&&t.isCellSpanning(e.column,this.rowNode))}createCellCtrls(e,t,i=null){const s={list:[],map:{}},n=(c,d,h)=>{h!=null?s.list.splice(h,0,d):s.list.push(d),s.map[c]=d},o=[];for(const c of t){const d=c.getInstanceId();let h=e.map[d];h&&!this.isCorrectCtrlForSpan(h)&&(h.destroy(),h=void 0),h||(h=this.getNewCellCtrl(c)),h&&n(d,h)}for(const c of e.list){const d=c.column.getInstanceId();if(s.map[d]!=null)continue;!this.isCellEligibleToBeRemoved(c,i)?o.push([d,c]):c.destroy()}if(o.length)for(const[c,d]of o){const h=s.list.findIndex(f=>f.column.getLeft()>d.column.getLeft()),u=h===-1?void 0:Math.max(h-1,0);n(c,d,u)}const{focusSvc:r,visibleCols:a}=this.beans,l=r.getFocusedCell();if(l&&l.column.getPinned()==i){const c=l.column.getInstanceId();if(!s.map[c]&&a.allCols.includes(l.column)){const h=this.createFocusedCellCtrl();if(h){const u=s.list.findIndex(p=>p.column.getLeft()>h.column.getLeft()),f=u===-1?void 0:Math.max(u-1,0);n(c,h,f)}}}return s}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,i=e.getFocusedCell();if(!i)return;const s=t==null?void 0:t.getCellSpan(i.column,this.rowNode);if(s){if(s.firstNode!==this.rowNode||!s.doesSpanContain(i))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(i.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){for(const t of this.allRowGuis){const i=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(i,e)}}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const s=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");const n=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,n,"right")}}isCellEligibleToBeRemoved(e,t){const{column:n}=e;if(n.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;const{visibleCols:o,editSvc:r}=this.beans,a=r==null?void 0:r.isEditing(e),l=e.isCellFocused();return a||l?!(o.allCols.indexOf(n)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||$i(this.gos,"print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=fe(this.rowNode.oldRowTop),{visibleCols:i}=this.beans,s=i.isPinningLeft(),n=i.isPinningRight();if(t){const{slideInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=s,o.right=n}else{const{fadeInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=s,o.right=n}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const e=(r,a)=>r?r.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(r.element,a).params):!0,t=e(this.fullWidthGui,null),i=e(this.centerGui,null),s=e(this.leftGui,"left"),n=e(this.rightGui,"right");return t&&i&&s&&n}addListeners(){const{beans:e,gos:t,rowNode:i}=this,{expansionSvc:s,eventSvc:n,context:o,rowSpanSvc:r}=e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...(s==null?void 0:s.getRowExpandedListeners(this))??{}}),i.detail&&this.addManagedListeners(i.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(i,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(n,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),r&&this.addManagedListeners(r,{spannedCellsUpdated:({pinned:a})=>{a&&!i.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,o),this.tooltipFeature=this.destroyBean(this.tooltipFeature,o),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,o)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(t.get("rowDragEntireRow")){for(const l of this.allRowGuis)this.addRowDraggerToRow(l);return}this.rowDragComps=this.destroyBeans(this.rowDragComps,o)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(const e of this.getAllCellCtrls())e.onRowIndexChanged()},cellChanged:e=>{for(const t of this.getAllCellCtrls())t.onCellChanged(e)}})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}for(const i of this.getAllCellCtrls())i.refreshCell(e);for(const i of this.allRowGuis)this.setRowCompRowId(i.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(i.rowComp);this.onRowSelected(),this.postProcessCss()}postProcessCss(){var e;this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),(e=this.rowEditStyleFeature)==null||e.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.beans.rowDropHighlightSvc,t=(e==null?void 0:e.row)===this.rowNode?e.position:"none",i=t==="above",s=t==="inside",n=t==="below",r=this.gos.get("treeData")&&(n||i),a=this.rowNode.uiLevel.toString();for(const l of this.allRowGuis){const c=l.rowComp;c.toggleCss("ag-row-highlight-above",i),c.toggleCss("ag-row-highlight-inside",s),c.toggleCss("ag-row-highlight-below",n),c.toggleCss("ag-row-highlight-indent",r),r?l.element.style.setProperty("--ag-row-highlight-level",a):l.element.style.removeProperty("--ag-row-highlight-level")}}postProcessRowDragging(){const e=this.rowNode.dragging;for(const t of this.allRowGuis)t.rowComp.toggleCss("ag-row-dragging",e)}onDisplayedColumnsChanged(){var e;this.updateColumnLists(!0),(e=this.beans.rowAutoHeight)==null||e.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Lr(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:i,column:s}=t;if(!(i.element===e.target))return;const r=this.rowNode,{focusSvc:a,navigation:l}=this.beans,c=a.getFocusedCell(),d={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:(c==null?void 0:c.column)??s};l==null||l.navigateToNextCell(e,e.key,d,!0),e.preventDefault()}onTabKeyDown(e){var a;if(e.defaultPrevented||Hr(e))return;const t=this.allRowGuis.find(l=>l.element.contains(e.target)),i=t?t.element:null,s=i===e.target,n=Wt(this.beans);let o=!1;i&&n&&(o=i.contains(n)&&n.classList.contains("ag-cell"));let r=null;!s&&!o&&(r=ld(this.beans,i,!1,e.shiftKey)),(this.isFullWidth()&&s||!r)&&((a=this.beans.navigation)==null||a.onTabKeyDown(this,e))}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var t;const e=(t=this.allRowGuis.find(i=>Wo(i.element)))==null?void 0:t.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:this.gos.get("tabIndex");for(const i of this.allRowGuis)$s(i.element,"tabindex",t)}onFullWidthRowFocused(e){var n,o,r;const t=this.rowNode,i=e?this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned:!1;let s;if(this.fullWidthGui)s=this.fullWidthGui.element;else{const a=this.beans.colModel.getCol(e==null?void 0:e.column),l=a==null?void 0:a.pinned;l?s=l==="right"?(n=this.rightGui)==null?void 0:n.element:(o=this.leftGui)==null?void 0:o.element:s=(r=this.centerGui)==null?void 0:r.element}s&&(s.classList.toggle("ag-full-width-focus",i),i&&(e!=null&&e.forceBrowserFocus)&&s.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const i={list:[],map:{}};for(const s of e.list)s!==t&&(i.list.push(s),i.map[s.column.getInstanceId()]=s);return i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){const{rowNode:i}=this;return Le(this.gos,{type:e,node:i,data:i.data,rowIndex:i.rowIndex,rowPinned:i.rowPinned,event:t})}createRowEventWithSource(e,t){const i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){if(Hr(e))return;const t=this.createRowEventWithSource("rowDoubleClicked",e);t.isEventHandlingSuppressed=this.isSuppressMouseEvent(e),this.beans.eventSvc.dispatchEvent(t)}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),i=this.getColumnForFullWidth(t);if(!(!t||!i))return{rowGui:t,column:i}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(e==null?void 0:e.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=_c(e.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(e))return;const{rangeSvc:t,focusSvc:i}=this.beans;t==null||t.removeAllCellRanges();const s=this.findFullWidthInfoForEvent(e);if(!s)return;const{rowGui:n,column:o}=s,r=n.element,a=e.target,l=this.rowNode;let c=e.defaultPrevented||dl();r&&r.contains(a)&&rg(a)&&(c=!1),i.setFocusedCell({rowIndex:l.rowIndex,column:o,rowPinned:l.rowPinned,forceBrowserFocus:c})}isSuppressMouseEvent(e){const{gos:t,rowNode:i}=this;if(this.isFullWidth()){const n=this.findFullWidthRowGui(e.target);return tz(t,n==null?void 0:n.rowComp.getFullWidthCellRendererParams(),i,e)}const s=qS(t,e.target);return s!=null&&Im(t,s.column,i,e)}onRowClick(e){if(Hr(e)||this.lastMouseDownOnDragger)return;const i=this.isSuppressMouseEvent(e),{eventSvc:s,selectionSvc:n}=this.beans,o=this.createRowEventWithSource("rowClicked",e);o.isEventHandlingSuppressed=i,s.dispatchEvent(o),!i&&(n==null||n.handleSelectionEvent(e,this.rowNode,"rowClicked"))}setupDetailRowAutoHeight(e){var t;this.rowType==="FullWidthDetail"&&((t=this.beans.masterDetailSvc)==null||t.setupDetailRowAutoHeight(this,e))}createFullWidthCompDetails(e,t){const{gos:i,rowNode:s}=this,n=Le(i,{fullWidth:!0,data:s.data,node:s,value:s.key,valueFormatted:s.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(r,a,l,c)=>this.addFullWidthRowDragging(r,a,l,c),setTooltip:(r,a)=>{i.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(r,a)}}),o=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return aB(o,n);case"FullWidthGroup":{const{value:r,valueFormatted:a}=this.beans.valueSvc.getValueForDisplay(void 0,this.rowNode,!0);return n.value=r,n.valueFormatted=a,rB(o,n)}case"FullWidthLoading":return oB(o,n);default:return nB(o,n)}}setupFullWidthRowTooltip(e,t){var i;this.fullWidthGui&&(this.tooltipFeature=(i=this.beans.tooltipSvc)==null?void 0:i.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,i="",s){const{rowDragSvc:n,context:o}=this.beans;if(!n||!this.isFullWidth())return;const r=n.createRowDragComp(()=>i,this.rowNode,void 0,e,t,s);this.createBean(r,o),this.addDestroyFunc(()=>{this.destroyBean(r,o)})}onUiLevelChanged(){const e=RR(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;for(const s of this.allRowGuis)s.rowComp.toggleCss(t,!0),s.rowComp.toggleCss(i,!1)}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();if(this.firstRowOnPage!==e){this.firstRowOnPage=e;for(const i of this.allRowGuis)i.rowComp.toggleCss("ag-row-first",e)}if(this.lastRowOnPage!==t){this.lastRowOnPage=t;for(const i of this.allRowGuis)i.rowComp.toggleCss("ag-row-last",t)}}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){var t;const e=[];if((t=this.beans.rowStyleSvc)==null||t.processClassesFromGridOptions(e,this.rowNode),!!e.length)for(const i of e)for(const s of this.allRowGuis)s.rowComp.toggleCss(i,!0)}postProcessRowClassRules(){var e;(e=this.beans.rowStyleSvc)==null||e.processRowClassRules(this.rowNode,t=>{for(const i of this.allRowGuis)i.rowComp.toggleCss(t,!0)},t=>{for(const i of this.allRowGuis)i.rowComp.toggleCss(t,!1)})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,i=>i.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){var a,l;const t=this.getPinnedForContainer(e),i=this.isFullWidth(),{rowNode:s,beans:n}=this,o=[];o.push("ag-row"),o.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&o.push("ag-opacity-zero"),o.push(s.rowIndex%2===0?"ag-row-even":"ag-row-odd"),s.isRowPinned()&&(o.push("ag-row-pinned"),(a=n.pinnedRowModel)!=null&&a.isManual()&&o.push("ag-row-pinned-manual")),!s.isRowPinned()&&s.pinnedSibling&&o.push("ag-row-pinned-source"),s.isSelected()&&o.push("ag-row-selected"),s.footer&&o.push("ag-row-footer"),o.push("ag-row-level-"+this.rowLevel),s.stub&&o.push("ag-row-loading"),i&&o.push("ag-full-width-row"),(l=n.expansionSvc)==null||l.addExpandedCss(o,s),s.dragging&&o.push("ag-row-dragging");const{rowStyleSvc:r}=n;return r&&(r.processClassesFromGridOptions(o,s),r.preProcessRowClassRules(o,s)),o.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&o.push("ag-row-first"),this.isLastRowOnPage()&&o.push("ag-row-last"),i&&(t==="left"&&o.push("ag-cell-last-left-pinned"),t==="right"&&o.push("ag-cell-first-right-pinned")),o}processStylesFromGridOptions(){var e;return((e=this.beans.rowStyleSvc)==null?void 0:e.processStylesFromGridOptions(this.rowNode))??this.emptyStyle}onRowSelected(e){var t;(t=this.beans.selectionSvc)==null||t.onRowCtrlSelected(this,i=>{(i===this.centerGui||i===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){var e;(e=this.beans.selectionSvc)==null||e.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:i}=e,{rowNode:s,beans:n,gos:o}=this;i.addManagedListeners(t,{pointerenter:r=>{r.pointerType==="mouse"&&s.dispatchRowEvent("mouseEnter")},pointerleave:r=>{r.pointerType==="mouse"&&s.dispatchRowEvent("mouseLeave")}}),i.addManagedListeners(s,{mouseEnter:()=>{var r;!((r=n.dragSvc)!=null&&r.dragging)&&!o.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),s.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(i=>i.element);for(const i of t)i.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(t.top,!0)-100,s=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(i,e),s)}forEachGui(e,t){if(e)t(e);else for(const i of this.allRowGuis)t(i)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),n=rT(this.gos)?tl(this.beans,this.rowNode).height:void 0,o=n?`${Math.min(i,n)-2}px`:void 0;this.forEachGui(e,r=>{r.element.style.height=`${t}px`,o&&r.element.style.setProperty("--ag-line-height",o)})}destroyFirstPass(e=!1){var s;this.active=!1;const{rowNode:t}=this;if(!e&&Gd(this.gos)&&!t.sticky)if(t.rowTop!=null){const o=this.roundRowTopToBounds(t.rowTop);this.setRowTop(o)}else for(const o of this.allRowGuis)o.rowComp.toggleCss("ag-opacity-zero",!0);(s=this.fullWidthGui)!=null&&s.element.contains(Wt(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);const i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i),this.beans.eventSvc.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const e=t=>{for(const i of t.list)i.destroy();return{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.toggleCss("ag-row-focus",this.rowFocused),t.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){var t;const e=((t=this.beans.pagination)==null?void 0:t.getCurrentPage())??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const i=this.beans.pageBounds.getPixelOffset();return e+i*(t?1:-1)}setRowTop(e){if(!this.printLayout&&fe(e)){const t=this.applyPaginationOffset(e),n=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(n)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let i;if(t.sticky)i=t.stickyRowTop;else{const s=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,n=this.applyPaginationOffset(s);i=t.isRowPinned()?n:this.beans.rowContainerHeight.getRealPixelPosition(n)}return i+"px"}setRowTopStyle(e){for(const t of this.allRowGuis)this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)}getCellCtrl(e,t=!1){let i=null;for(const s of this.getAllCellCtrls())s.column==e&&(i=s);if(i!=null||t)return i;for(const s of this.getAllCellCtrls())(s==null?void 0:s.getColSpanningList().indexOf(e))>=0&&(i=s);return i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){var o,r;const t=this.rowNode.getRowIndexString();if(t===null)return;const i=(((o=this.beans.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:o.getRowCount())??0)+(((r=this.beans.filterManager)==null?void 0:r.getHeaderRowCount())??0),s=this.rowNode.rowIndex%2===0,n=i+this.rowNode.rowIndex+1;this.forEachGui(e,a=>{a.rowComp.setRowIndex(t),a.rowComp.toggleCss("ag-row-even",s),a.rowComp.toggleCss("ag-row-odd",!s),Ym(a.element,n)})}},R4=class extends V{constructor(){super(),this.beanName="navigation",this.onPageDown=Sx(this.onPageDown,100),this.onPageUp=Sx(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const i=e.key,s=e.altKey,n=e.ctrlKey||e.metaKey,o=!!this.beans.rangeSvc&&e.shiftKey,r=Fz(this.gos,e);let a=!1;switch(i){case G.PAGE_HOME:case G.PAGE_END:!n&&!s&&(this.onHomeOrEndKey(i),a=!0);break;case G.LEFT:case G.RIGHT:case G.UP:case G.DOWN:if(!r)return!1;n&&!s&&!o&&(this.onCtrlUpDownLeftRight(i,r),a=!0);break;case G.PAGE_DOWN:case G.PAGE_UP:!n&&!s&&(a=this.handlePageUpDown(i,r,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===G.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:i,focusIndex:s,focusColumn:n,isAsync:o,rowPinned:r}){const{scrollFeature:a}=this.gridBodyCon;fe(i)&&!i.isPinned()&&a.ensureColumnVisible(i),fe(e)&&a.ensureIndexVisible(e,t),o||a.ensureIndexVisible(s);const{focusSvc:l,rangeSvc:c}=this.beans;l.setFocusedCell({rowIndex:s,column:n,rowPinned:r,forceBrowserFocus:!0}),c==null||c.setRangeToCell({rowIndex:s,rowPinned:r,column:n})}onPageDown(e){const t=this.beans,i=hw(t),s=this.getViewportHeight(),{pageBounds:n,rowModel:o,rowAutoHeight:r}=t,a=n.getPixelOffset(),l=i.top+s,c=o.getRowIndexAtPixel(l+a);r!=null&&r.active?this.navigateToNextPageWithAutoHeight(e,c):this.navigateToNextPage(e,c)}onPageUp(e){const t=this.beans,i=hw(t),{pageBounds:s,rowModel:n,rowAutoHeight:o}=t,r=s.getPixelOffset(),a=i.top,l=n.getRowIndexAtPixel(a+r);o!=null&&o.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t,i=!1){const{pageBounds:s,rowModel:n}=this.beans,o=this.getViewportHeight(),r=s.getFirstRow(),a=s.getLastRow(),l=s.getPixelOffset(),c=n.getRow(e.rowIndex),d=i?(c==null?void 0:c.rowHeight)-o-l:o-l,h=(c==null?void 0:c.rowTop)+d;let u=n.getRowIndexAtPixel(h+l);if(u===e.rowIndex){const p=i?-1:1;t=u=e.rowIndex+p}let f;i?(f="bottom",u<r&&(u=r),t<r&&(t=r)):(f="top",u>a&&(u=a),t>a&&(t=a)),this.isRowTallerThanView(n.getRow(u))&&(t=u,f="top"),this.navigateTo({scrollIndex:t,scrollType:f,scrollColumn:null,focusIndex:u,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const s=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const i=t?-1:1,s=this.getViewportHeight(),{pageBounds:n,rowModel:o}=this.beans,r=n.getLastRow();let a=0,l=e.rowIndex;for(;l>=0&&l<=r;){const c=o.getRow(l);if(c){const d=c.rowHeight??0;if(a+d>s)break;a+=d}l+=i}return Math.max(0,Math.min(l,r))}getViewportHeight(){const e=this.beans,t=hw(e),i=this.beans.scrollVisibleSvc.getScrollbarWidth();let s=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(s-=i),s}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),s=this.getNormalisedPosition(i),{rowIndex:n,rowPinned:o,column:r}=s??i,a=r;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:a,focusIndex:n,focusColumn:a,rowPinned:o})}onHomeOrEndKey(e){const t=e===G.PAGE_HOME,{visibleCols:i,pageBounds:s,rowModel:n}=this.beans,o=i.allCols,r=t?s.getFirstRow():s.getLastRow(),a=n.getRow(r);if(!a)return;const l=(t?o:[...o].reverse()).find(c=>!c.isSuppressNavigable(a));l&&this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:l,focusIndex:r,focusColumn:l})}onTabKeyDown(e,t){const i=t.shiftKey,s=this.tabToNextCellCommon(e,i,t),n=this.beans,{ctrlsSvc:o,pageBounds:r,focusSvc:a,gos:l}=n;if(s!==!1){s?t.preventDefault():s===null&&o.get("gridCtrl").allowFocusForNextCoreContainer(i);return}if(i){const{rowIndex:c,rowPinned:d}=e.getRowPosition();(d?c===0:c===r.getFirstRow())&&(l.get("headerHeight")===0||Hc(n)?au(n,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof jd&&e.focusCell(!0),(a.focusOverlay(!1)||au(n,i))&&t.preventDefault()}tabToNextCell(e,t){const i=this.beans,{focusSvc:s,rowRenderer:n}=i,o=s.getFocusedCell();if(!o)return!1;let r=Dd(i,o);return!r&&(r=n.getRowByPosition(o),!(r!=null&&r.isFullWidth()))?!1:!!this.tabToNextCellCommon(r,e,t,"api")}tabToNextCellCommon(e,t,i,s="ui"){var l;const{editSvc:n,focusSvc:o}=this.beans;let r;const a=e instanceof jd?e:(l=e.getAllCellCtrls())==null?void 0:l[0];return n!=null&&n.isEditing()?r=n==null?void 0:n.moveToNextCell(a,t,i,s):r=this.moveToNextCellNotEditing(e,t,i),r===null?r:r||!!o.focusedHeader}moveToNextCellNotEditing(e,t,i){const s=this.beans.visibleCols.allCols;let n;if(e instanceof pv){if(n={...e.getRowPosition(),column:t?s[0]:Mt(s)},this.gos.get("embedFullWidthRows")&&i){const r=e.findFullWidthInfoForEvent(i);r&&(n.column=r.column)}}else n=e.getFocusedCellPosition();const o=this.findNextCellToFocusOn(n,{backwards:t,startEditing:!1});if(o===!1)return null;if(o instanceof jd)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o,t);return fe(o)}findNextCellToFocusOn(e,{backwards:t,startEditing:i,skipToNextEditableCell:s}){let n=e;const o=this.beans,{cellNavigation:r,gos:a,focusSvc:l,rowRenderer:c,rangeSvc:d}=o;for(;;){e!==n&&(e=n),t||(n=this.getLastCellOfColSpan(n)),n=r.getNextTabbedCell(n,t);const h=a.getCallback("tabToNextCell");if(fe(h)){const m=h({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:n||null});if(m===!0)n=e;else{if(m===!1)return!1;n={rowIndex:m.rowIndex,column:m.column,rowPinned:m.rowPinned}}}if(!n)return null;if(n.rowIndex<0){const p=_o(o);return l.focusHeaderPosition({headerPosition:{headerRowIndex:p+n.rowIndex,column:n.column},fromCell:!0}),null}const u=a.get("editType")==="fullRow";if(i&&(!u||s)&&!this.isCellEditable(n))continue;this.ensureCellVisible(n);const f=Dd(o,n);if(!f){const p=c.getRowByPosition(n);if(!p||!p.isFullWidth()||i)continue;return{...p.getRowPosition(),column:n==null?void 0:n.column}}if(!r.isSuppressNavigable(f.column,f.rowNode))return f.setFocusedCellPosition(n),d==null||d.setRangeToCell(n),f}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:i,rowModel:s}=this.beans;return t==="top"?i==null?void 0:i.getPinnedTopRow(e):t==="bottom"?i==null?void 0:i.getPinnedBottomRow(e):s.getRow(e)}navigateToNextCell(e,t,i,s){let n=i,o=!1;const r=this.beans,{cellNavigation:a,focusSvc:l,gos:c}=r;for(;n&&(n===i||!this.isValidNavigateCell(n));)c.get("enableRtl")?t===G.LEFT&&(n=this.getLastCellOfColSpan(n)):t===G.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=a.getNextCellToFocus(t,n),o=Ht(n);if(o&&e&&e.key===G.UP&&(n={rowIndex:-1,rowPinned:null,column:i.column}),s){const h=c.getCallback("navigateToNextCell");if(fe(h)){const f=h({key:t,previousCellPosition:i,nextCellPosition:n||null,event:e});fe(f)?n={rowPinned:f.rowPinned,rowIndex:f.rowIndex,column:f.column}:n=null}}if(!n)return;if(n.rowIndex<0){const h=_o(r);l.focusHeaderPosition({headerPosition:{headerRowIndex:h+n.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}const d=this.getNormalisedPosition(n);d?this.focusPosition(d):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){var s;if(!!((s=this.beans.spannedRowRenderer)!=null&&s.getCellByPosition(e)))return e;this.ensureCellVisible(e);const i=Dd(this.beans,e);return i?(e=i.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:i,rowRenderer:s,focusSvc:n,eventSvc:o}=this.beans,r=i.allCols,a=s.getRowByPosition(e);if(!(a!=null&&a.isFullWidth()))return!1;const l=n.getFocusedCell(),c={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Mt(r):r[0])};this.focusPosition(c);const d=t??(l!=null&&b$(c,l));return o.dispatchEvent({type:"fullWidthRowFocused",rowIndex:c.rowIndex,rowPinned:c.rowPinned,column:c.column,isFullWidthCell:!0,fromBelow:d}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:i}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),i==null||i.setRangeToCell(e)}isValidNavigateCell(e){return!!Ur(this.beans,e)}getLastCellOfColSpan(e){const t=Dd(this.beans,e);if(!t)return e;const i=t.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:Mt(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=lT(this.gos),i=this.beans.rowModel.getRow(e.rowIndex),s=t&&(i==null?void 0:i.sticky),{scrollFeature:n}=this.gridBodyCon;!s&&Ht(e.rowPinned)&&n.ensureIndexVisible(e.rowIndex),e.column.isPinned()||n.ensureColumnVisible(e.column)}ensureColumnVisible(e){const t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}};function hw(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var E4={moduleName:"KeyboardNavigation",version:ue,beans:[R4,K5,n5],apiFunctions:{getFocusedCell:q5,clearFocusedCell:Y5,setFocusedCell:X5,setFocusedHeader:Z5,tabToNextCell:Q5,tabToPreviousCell:J5}},A4=class extends V{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:(e==null?void 0:e.animate)??!1,newData:(e==null?void 0:e.newData)??!1,newPage:(e==null?void 0:e.newPage)??!1,newPageSize:(e==null?void 0:e.newPageSize)??!1,keepRenderedRows:(e==null?void 0:e.keepRenderedRows)??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:i}=this.beans;t?t.calculatePages():e.calculateBounds(0,i.getRowCount()-1)}},F4=class extends V{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){var e;return((e=this.topRowBounds)==null?void 0:e.rowIndex)??-1}getLastRow(){var e;return((e=this.bottomRowBounds)==null?void 0:e.rowIndex)??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this,i=(e==null?void 0:e.rowTop)??0,s=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:i,pageLastPixel:s}}calculateBounds(e,t){const{rowModel:i}=this.beans,s=i.getRowBounds(e);s&&(s.rowIndex=e),this.topRowBounds=s;const n=i.getRowBounds(t);n&&(n.rowIndex=t),this.bottomRowBounds=n,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){var t;const e=((t=this.topRowBounds)==null?void 0:t.rowTop)??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},P4=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",T4=class extends V{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const i of this.elements)i&&(Ot(i,t),Oo(i,e))}},D4=class extends V{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:i}=this.beans,s=$i(e,"print"),n=s?0:t.getColsLeftWidth(),o=s?0:t.getDisplayedColumnsRightWidth();n!=this.leftWidth&&(this.leftWidth=n,i.dispatchEvent({type:"leftPinnedWidthChanged"})),o!=this.rightWidth&&(this.rightWidth=o,i.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.eBodyViewport,t=Ag(e);if(t<=50)return;const i=this.getPinnedColumnsOverflowingViewport(t-50),s=this.gos.getCallback("processUnpinnedColumns"),{columns:n,hasLockedPinned:o}=i;let r=n;!r.length&&!o||(s&&(r=s({columns:r,viewportWidth:t})),r!=null&&r.length&&(r=r.filter(a=>!Or(a)),this.setColsPinned(r,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new T4(e,t)}setColsPinned(e,t,i){const{colModel:s,colAnimation:n,visibleCols:o,gos:r}=this.beans;if(!s.cols||!(e!=null&&e.length))return;if($i(r,"print")){J(37);return}n==null||n.start();let a;t===!0||t==="left"?a="left":t==="right"?a="right":a=null;const l=[];for(const c of e){if(!c)continue;const d=s.getCol(c);d&&d.getPinned()!==a&&(this.setColPinned(d,a),l.push(d))}l.length&&(o.refresh(i),xT(this.eventSvc,l,i)),n==null||n.finish()}initCol(e){const{pinned:t,initialPinned:i}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,i)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;const i=e.pinned==="left",s=e.pinned==="right";e.hidden=!0;const n=()=>{const o=i?this.leftWidth:this.rightWidth;if(o==null)return;const r=o==0,a=e.hidden!==r,l=this.gos.get("enableRtl"),c=t.getScrollbarWidth(),h=t.verticalScrollShowing&&(l&&i||!l&&s)?o+c:o;e.comp.setPinnedContainerWidth(`${h}px`),e.comp.setDisplayed(!r),a&&(e.hidden=r,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:n,rightPinnedWidthChanged:n,scrollVisibilityChanged:n,scrollbarWidthChanged:n})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:s,rightWidth:n}=this,o=Ag(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(s+n+e>o)if(o>s+n)e=o-s-n;else return 0}return e}getPinnedColumnsOverflowingViewport(e){const t=this.rightWidth??0,i=this.leftWidth??0,s=t+i;let n=!1;if(s<e)return{columns:[],hasLockedPinned:n};const{visibleCols:o}=this.beans,r=[...o.leftCols],a=[...o.rightCols];let l=0,c=0;const d=0,h=[];let u=s-d-e;for(;(c<r.length||l<a.length)&&u>0;){if(l<a.length){const f=a[l++];if(f.colDef.lockPinned){n=!0;continue}u-=f.getActualWidth(),h.push(f)}if(c<r.length&&u>0){const f=r[c++];if(f.colDef.lockPinned){n=!0;continue}u-=f.getActualWidth(),h.push(f)}}return{columns:h,hasLockedPinned:n}}},M4={moduleName:"PinnedColumn",version:ue,beans:[D4],css:[P4]},I4=class extends V{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=Vi(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=Pi(e),i=this.descriptionContainer=t.createElement("div");i.classList.add("ag-aria-description-container"),OP(i,"polite"),QN(i,"additions text"),XN(i,!0),e.eGridDiv.appendChild(i)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;if(t==null||t.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}this.lastAnnouncement===t&&(t=`${t}â`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(Wi(e),e.remove()),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},k4={moduleName:"Aria",version:ue,beans:[I4]},_4=":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}",ER="ag-delay-render",L4=class extends V{constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(e){this.alreadyRevealed||this.requesters.has(e)||(this.requesters.add(e),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,t=>{t.gridBodyCtrl.eGridBody.classList.add(ER)}),this.hideRequested=!0))}revealColumns(e){if(this.alreadyRevealed||!this.isAlive()||(this.requesters.delete(e),this.requesters.size>0))return;const{renderStatus:t,ctrlsSvc:i}=this.beans;if(t){if(!t.areHeaderCellsRendered()&&this.timesRetried<5){this.timesRetried++,setTimeout(()=>this.revealColumns(e));return}this.timesRetried=0}i.getGridBodyCtrl().eGridBody.classList.remove(ER),this.alreadyRevealed=!0}},O4={moduleName:"ColumnDelayRender",version:ue,beans:[L4],css:[_4]};function N4(e){var t;(t=e.overlays)==null||t.showLoadingOverlay()}function H4(e){var t;(t=e.overlays)==null||t.showNoRowsOverlay()}function G4(e){var t;(t=e.overlays)==null||t.hideOverlay()}var B4=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}",V4={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},KD=class extends xt{constructor(){super(V4),this.eOverlayWrapper=he,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(B4)}handleKeyDown(e){if(e.key!==G.TAB||e.defaultPrevented||Hr(e))return;const t=this.beans;if(ld(t,this.eOverlayWrapper,!1,e.shiftKey))return;let s=!1;e.shiftKey?s=t.focusSvc.focusGridView({column:Mt(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):s=au(t,!1),s&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList,{AUTO_HEIGHT:s,NORMAL:n,PRINT:o}=Gn;i.toggle(s,t.autoHeight),i.toggle(n,t.normal),i.toggle(o,t.print)}postConstruct(){this.createManagedBean(new jS(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,s){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.isGridFocused()){const n=Wt(this.beans);n&&!IP(this.beans)&&(this.elToFocusAfter=n)}e.then(n=>{if(this.activePromise!==e){this.activeOverlay!==n&&(this.destroyBean(n),n=null);return}if(this.activePromise=null,!!n){if(this.activeOverlay!==n&&(this.eOverlayWrapper.appendChild(n.getGui()),this.activeOverlay=n,s)){const o=n;this.updateListenerDestroyFunc=this.addManagedPropertyListener(s,({currentValue:r})=>{var a;(a=o.refresh)==null||a.call(o,Le(this.gos,{...r??{}}))})}i&&this.isGridFocused()&&qc(this.eOverlayWrapper)}})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){var s;this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.isGridFocused()&&(t=null);const i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),Wi(this.eOverlayWrapper),(s=t==null?void 0:t.focus)==null||s.call(t,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=Wt(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},z4={selector:"AG-OVERLAY-WRAPPER",component:KD},W4=class extends V{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=oi(this.gos),this.isServerSide=!this.isClientSide&&vu(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos,t=e.get("loading");!t&&(t!==void 0||e.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){J(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return z4}getOverlayWrapperCompClass(){return KD}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}const{state:e,isClientSide:t,isServerSide:i,beans:{gos:s,colModel:n,rowModel:o}}=this;let r=this.gos.get("loading");r!==void 0&&(this.showInitialOverlay=!1),this.showInitialOverlay&&r===void 0&&!s.get("suppressLoadingOverlay")&&(r=!s.get("columnDefs")||!n.ready||!s.get("rowData")&&t),r?e!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&o.isEmpty()&&!s.get("suppressNoRowsOverlay")?e!==2&&this.doShowNoRowsOverlay():(e===1||!i&&e!==0)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay(dB(this.beans.userCompFactory,Le(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay(hB(this.beans.userCompFactory,Le(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){var n;const s=(e==null?void 0:e.newAgStackInstance())??null;(n=this.eWrapper)==null||n.showOverlay(s,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const e=this.eWrapper;if(!e)return;let t=0;if(this.state===2){const i=this.beans.ctrlsSvc.get("gridHeaderCtrl");t=(i==null?void 0:i.headerHeight)||0}this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}},$4={moduleName:"Overlay",version:ue,userComponents:{agLoadingOverlay:nW,agNoRowsOverlay:rW},apiFunctions:{showLoadingOverlay:N4,showNoRowsOverlay:H4,hideOverlay:G4},beans:[W4]},U4=class extends V{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=pB(),el(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;el(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),i=e/t;return this.maxScrollY*i}},j4=400,K4=class extends V{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{for(const o of this.getAllCellCtrls())o.onCellSelectionChanged()},t=()=>{for(const o of this.getAllCellCtrls())o.updateRangeBordersIfRangeCount()},i=()=>{this.eventSvc.addListener("cellSelectionChanged",e),this.eventSvc.addListener("columnMoved",t),this.eventSvc.addListener("columnPinned",t),this.eventSvc.addListener("columnVisible",t)},s=()=>{this.eventSvc.removeListener("cellSelectionChanged",e),this.eventSvc.removeListener("columnMoved",t),this.eventSvc.removeListener("columnPinned",t),this.eventSvc.removeListener("columnVisible",t)};this.addDestroyFunc(()=>s()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{$r(this.gos)?i():s()}),$r(this.gos)&&i()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",s=>this.onSuppressCellFocusChanged(s.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:s,previousValue:n})=>{(!n&&s||n&&!s)&&this.redrawRows()});const{stickyRowSvc:e,gos:t,showRowGroupCols:i}=this.beans;if(i&&this.addManagedPropertyListener("showOpenedGroup",()=>{const s=i.getShowRowGroupCols();s.length&&this.refreshCells({columns:s,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const s=this.gridBodyCtrl;s.setStickyTopHeight(0),s.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=$i(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new q4(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){var e;return((e=this.stickyRowFeature)==null?void 0:e.stickyTopRowCtrls)??[]}getStickyBottomRowCtrls(){var e;return((e=this.stickyRowFeature)==null?void 0:e.stickyBottomRowCtrls)??[]}updateAllRowCtrls(){var s;const e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),i=((s=this.cachedRowCtrls)==null?void 0:s.getEntries())??[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}isCellBeingRendered(e,t){var n;const i=this.rowCtrlsByRowIndex[e];return!t||!i?!!i:i.isFullWidth()?!0:!!((n=this.beans.spannedRowRenderer)==null?void 0:n.getCellByPosition({rowIndex:e,column:t,rowPinned:null}))||!!i.getCellCtrl(t)||!i.isRowRendered()}updateCellFocus(e){for(const t of this.getAllCellCtrls())t.onCellFocused(e);for(const t of this.getFullWidthRowCtrls())t.onFullWidthRowFocused(e)}onCellFocusChanged(e){if((e==null?void 0:e.rowIndex)!=null&&!e.rowPinned){const t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){for(const t of this.getAllCellCtrls())t.onSuppressCellFocusChanged(e);for(const t of this.getFullWidthRowCtrls())t.onSuppressCellFocusChanged(e)}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;if(t)for(const i of this.getAllCellCtrls())t.onFlashCells(i,e)},columnHoverChanged:()=>{for(const e of this.getAllCellCtrls())e.onColumnHover()},displayedColumnsChanged:()=>{for(const e of this.getAllCellCtrls())e.onDisplayedColumnsChanged()},displayedColumnsWidthChanged:()=>{if(this.printLayout)for(const e of this.getAllCellCtrls())e.onLeftChanged()}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(const e of this.destroyFuncsForColumnListeners)e();this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();const e=this.colModel.getCols();for(const t of e){const i=l=>{for(const c of this.getAllCellCtrls())c.column===t&&l(c)},s=()=>{i(l=>l.onLeftChanged())},n=()=>{i(l=>l.onWidthChanged())},o=()=>{i(l=>l.onFirstRightPinnedChanged())},r=()=>{i(l=>l.onLastLeftPinnedChanged())},a=()=>{i(l=>l.onColDefChanged())};t.__addEventListener("leftChanged",s),t.__addEventListener("widthChanged",n),t.__addEventListener("firstRightPinnedChanged",o),t.__addEventListener("lastLeftPinnedChanged",r),t.__addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",s),t.__removeEventListener("widthChanged",n),t.__removeEventListener("firstRightPinnedChanged",o),t.__removeEventListener("lastLeftPinnedChanged",r),t.__removeEventListener("colDefChanged",a)})}}onDomLayoutChanged(){const e=$i(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){var i;const t=[];for(const s of this.getAllRowCtrls()){const n=(i=s.getCellCtrl(e,!0))==null?void 0:i.eGui;n&&t.push(n)}return t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,i){const{pinnedRowModel:s,beans:n,printLayout:o}=this,r=Object.fromEntries(e.map(l=>[l.rowNode.id,l]));s==null||s.forEachPinnedRow(t,(l,c)=>{const d=e[c];d&&s.getPinnedRowById(d.rowNode.id,t)===void 0&&(d.destroyFirstPass(),d.destroySecondPass()),l.id in r&&i?(e[c]=r[l.id],delete r[l.id]):e[c]=new pv(l,n,!1,!1,o)});const a=(t==="top"?s==null?void 0:s.getPinnedTopRowCount():s==null?void 0:s.getPinnedBottomRowCount())??0;e.length=a}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){var i,s;if(e.sticky)(i=this.stickyRowFeature)==null||i.refreshStickyNode(e);else if((s=this.cachedRowCtrls)!=null&&s.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const n=o=>{const r=o[e.rowIndex];r&&r.rowNode===e&&(r.destroyFirstPass(),r.destroySecondPass(),o[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){const{editSvc:t}=this.beans;if(t!=null&&t.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"})),e!=null){for(const s of e??[])this.redrawRow(s,!0);this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){var a;this.getLockOnRefresh();const t=(a=this.beans.focusSvc)==null?void 0:a.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,s=e.animate&&Gd(this.gos),n=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:o,gos:r}=this;if(o){o.checkStickyRows();const l=o.extraTopHeight+o.extraBottomHeight;l&&this.updateContainerHeights(l)}this.recycleRows(n,s),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(r.get("enableRowPinning")?i:void 0),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){var s;const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),(s=this.stickyRowFeature)==null||s.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let i=this.pageBounds.getCurrentPageHeight();i===0&&(i=1),t.setModelHeight(i+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error(No(252));this.refreshInProgress=!0,(t=(e=this.beans.frameworkOverrides).getLockOnRefresh)==null||t.call(e)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,(t=(e=this.beans.frameworkOverrides).releaseLockOnRefresh)==null||t.call(e)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,i=this.findPositionToFocus(e);if(!i){t.focusHeaderPosition({headerPosition:{headerRowIndex:_o(this.beans)-1,column:e.column}});return}if(e.rowIndex!==i.rowIndex||e.rowPinned!=i.rowPinned){t.setFocusedCell({...i,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0});return}t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(Le(this.gos,{...i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}findPositionToFocus(e){const{pagination:t,pageBounds:i}=this.beans;let s=e;for(s.rowPinned==null&&t&&i&&!t.isRowInPage(s.rowIndex)&&(s={rowPinned:null,rowIndex:i.getFirstRow()});s;){if(s.rowPinned==null&&i)if(s.rowIndex<i.getFirstRow()){if(s=gv(this.beans,{rowPinned:null,rowIndex:0}),!s)return null}else s.rowIndex>i.getLastRow()&&(s={rowPinned:null,rowIndex:i.getLastRow()});const n=this.getRowByPosition(s);if(n!=null&&n.isAlive())return{...n.getRowPosition(),column:e.column};s=gv(this.beans,s)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let s=0;s<i;s++){const n=t[s].getAllCellCtrls(),o=n.length;for(let r=0;r<o;r++)e.push(n[r])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),i=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...i,...(e==null?void 0:e.getCtrls("top"))??[],...(e==null?void 0:e.getCtrls("bottom"))??[],...(e==null?void 0:e.getCtrls("center"))??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,i){const s=this.rowCtrlsByRowIndex[t];s&&s.addEventListener(e,i)}refreshCells({rowNodes:e,columns:t,force:i,suppressFlash:s}={}){const n={force:i,newData:!1,suppressFlash:s};for(const o of this.getCellCtrls(e,t))o.refreshOrDestroyCell(n);this.refreshFullWidth(e)}refreshRows(e={}){for(const t of this.getRowCtrls(e.rowNodes))t.refreshRow(e);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||(t=!0,this.redrawRow(i.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=Iy(e),i=this.getAllRowCtrls();return!e||!t?i:i.filter(s=>{const n=s.rowNode;return ky(n,t)})}getCellCtrls(e,t){let i;fe(t)&&(i={},t.forEach(n=>{const o=this.colModel.getCol(n);fe(o)&&(i[o.getId()]=!0)}));const s=[];for(const n of this.getRowCtrls(e))for(const o of n.getAllCellCtrls()){const r=o.column.getId();i&&!i[r]||s.push(o)}return s}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){var i;const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),(i=this.stickyRowFeature)==null||i.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const i of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[i].rowNode.id==null&&e.push(i);this.removeRowCtrls(e);const t={};for(const i of Object.values(this.rowCtrlsByRowIndex)){const s=i.rowNode;t[s.id]=i}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){for(const i of e){const s=this.rowCtrlsByRowIndex[i];s&&(s.destroyFirstPass(t),s.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]}}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{focusSvc:t,animationFrameSvc:i}=this.beans,{afterScroll:s}=e;let n;const o=this.stickyRowFeature;o&&(n=(t==null?void 0:t.getFocusCellToUseAfterRefresh())||void 0);const r=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;if(o){l=o.checkStickyRows();const d=o.extraTopHeight+o.extraBottomHeight;d&&this.updateContainerHeights(d)}const c=this.firstRenderedRow!==r||this.lastRenderedRow!==a;if(!(s&&!l&&!c)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,s),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(s&&!l),n!=null)){const d=t==null?void 0:t.getFocusCellToUseAfterRefresh();n!=null&&d==null&&(i==null||i.flushAllFrames(),this.restoreFocusedCell(n))}}removeRowCompsNotToDraw(e,t){const i={};for(const o of e)i[o]=!0;const n=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!i[o]);this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){var r,a;const t=[];for(let l=this.firstRenderedRow;l<=this.lastRenderedRow;l++)t.push(l);const i=this.beans.pagination,s=(a=(r=this.beans.focusSvc)==null?void 0:r.getFocusedCell())==null?void 0:a.rowIndex;s!=null&&(s<this.firstRenderedRow||s>this.lastRenderedRow)&&(!i||i.isRowInPage(s))&&s<this.rowModel.getRowCount()&&t.push(s);const n=l=>{const c=l.rowNode.rowIndex;c==null||c===s||(c<this.firstRenderedRow||c>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(l)&&t.push(c)};for(const l of Object.values(this.rowCtrlsByRowIndex))n(l);if(e)for(const l of Object.values(e))n(l);t.sort((l,c)=>l-c);const o=[];for(let l=0;l<t.length;l++){const c=t[l],d=this.rowModel.getRow(c);d&&!d.sticky&&o.push(c)}return o}recycleRows(e,t=!1,i=!1){const s=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(s,!t);for(const n of s)this.createOrUpdateRowCtrl(n,e,t,i);if(e){const{animationFrameSvc:n}=this.beans;(n==null?void 0:n.active)&&i&&!this.printLayout?n.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),i=e.isPinningRight();(this.pinningLeft!==t||i!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=i,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];for(const t of this.getFullWidthRowCtrls()){const i=t.rowNode.rowIndex;e.push(i.toString())}this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=Iy(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;const s=i.rowNode;return!(t!=null&&!ky(s,t))})}createOrUpdateRowCtrl(e,t,i,s){let n,o=this.rowCtrlsByRowIndex[e];if(o||(n=this.rowModel.getRow(e),fe(n)&&fe(t)&&t[n.id]&&n.alreadyRendered&&(o=t[n.id],t[n.id]=null)),!o)if(n||(n=this.rowModel.getRow(e)),fe(n))o=this.createRowCon(n,i,s);else return;n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o}destroyRowCtrls(e,t){const i=[];if(e){for(const s of Object.values(e))if(s){if(this.cachedRowCtrls&&s.isCacheable()){this.cachedRowCtrls.addRow(s);continue}if(s.destroyFirstPass(!t),t){const n=s.instanceId;this.zombieRowCtrls[n]=s,i.push(()=>{s.destroySecondPass(),delete this.zombieRowCtrls[n]})}else s.destroySecondPass()}}t&&(i.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>{for(const s of i)s()},j4))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=Oc(this.beans);return e*t}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:i}=this;e.updateOffset();let s,n;if(!i.isRowsToRender())s=0,n=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),s=t.getFirstRow(),n=t.getLastRow();else{const d=this.getRowBufferInPixels(),h=this.ctrlsSvc.getScrollFeature(),u=this.gos.get("suppressRowVirtualisation");let f=!1,p,m;do{const y=t.getPixelOffset(),{pageFirstPixel:R,pageLastPixel:A}=t.getCurrentPagePixelRange(),P=e.divStretchOffset,T=h.getVScrollPosition(),M=T.top,N=T.bottom;u?(p=R+P,m=A+P):(p=Math.max(M+y-d,R)+P,m=Math.min(N+y+d,A)+P),this.firstVisibleVPixel=Math.max(M+y,R)+P,this.lastVisibleVPixel=Math.min(N+y,A)+P,f=this.ensureAllRowsInRangeHaveHeightsCalculated(p,m)}while(f);let v=i.getRowIndexAtPixel(p),C=i.getRowIndexAtPixel(m);const w=t.getFirstRow(),S=t.getLastRow();v<w&&(v=w),C>S&&(C=S),s=v,n=C}const o=$i(this.gos,"normal"),r=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);o&&!r&&n-s>a&&(n=s+a);const l=s!==this.firstRenderedRow,c=n!==this.lastRenderedRow;(l||c)&&(this.firstRenderedRow=s,this.lastRenderedRow=n,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:s,lastRow:n}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,Xr(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var a,l;const i=(a=this.pinnedRowModel)==null?void 0:a.ensureRowHeightsValid(),s=(l=this.stickyRowFeature)==null?void 0:l.ensureRowHeightsValid(),{pageBounds:n,rowModel:o}=this,r=o.ensureRowHeightsValid(e,t,n.getFirstRow(),n.getLastRow());return(r||s)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),s||r||i?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){var c;const s=e.rowNode,n=this.focusSvc.isRowFocused(s.rowIndex,s.rowPinned),o=(c=this.editSvc)==null?void 0:c.isEditing(e),r=s.detail;return n||o||r?!!this.isRowPresent(s):!1}isRowPresent(e){var t;return this.rowModel.isRowPresent(e)?((t=this.beans.pagination)==null?void 0:t.isRowInPage(e.rowIndex))??!0:!1}createRowCon(e,t,i){var r,a;const s=((r=this.cachedRowCtrls)==null?void 0:r.getRow(e))??null;if(s)return s;const n=i&&!this.printLayout&&!!((a=this.beans.animationFrameSvc)!=null&&a.active);return new pv(e,this.beans,t,n,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(s=>s.rowNode),t=this.getStickyTopRowCtrls().map(s=>s.rowNode),i=this.getStickyBottomRowCtrls().map(s=>s.rowNode);return[...t,...e,...i]}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(s=>s.rowNode.rowIndex===i)||null,t||(t=this.getStickyBottomRowCtrls().find(s=>s.rowNode.rowIndex===i)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const s=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!s}},q4=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if((e==null?void 0:e.id)==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],Qn(this.entriesList,i)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],Qn(this.entriesList,e)}getEntries(){return this.entriesList}};function Iy(e){if(!e)return;const t={top:{},bottom:{},normal:{}};for(const i of e){const s=i.id;switch(i.rowPinned){case"top":t.top[s]=i;break;case"bottom":t.bottom[s]=i;break;default:t.normal[s]=i;break}}return t}function ky(e,t){const i=e.id;switch(e.rowPinned){case"top":return t.top[i]!=null;case"bottom":return t.bottom[i]!=null;default:return t.normal[i]!=null}}var Y4=class extends V{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=Mo(e),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Mo(e))}doFullSort(e,t){const i=e.map((s,n)=>({currentPos:n,rowNode:s}));return i.sort(this.compareRowNodes.bind(this,t)),i.map(s=>s.rowNode)}compareRowNodes(e,t,i){const s=t.rowNode,n=i.rowNode;for(let o=0,r=e.length;o<r;o++){const a=e[o],l=a.sort==="desc",c=this.getValue(s,a.column),d=this.getValue(n,a.column);let h;const u=this.getComparator(a,s);if(u?h=u(c,d,s,n,l):h=WN(c,d,this.isAccentedSort),!isNaN(h)&&h!==0)return a.sort==="asc"?h:h*-1}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,s=i.getColDef().comparator;if(s!=null)return s;if(!i.getColDef().showRowGroup)return;const n=!t.group&&i.getColDef().field;if(!n)return;const o=this.beans.colModel.getColDefCol(n);if(o)return o.getColDef().comparator}getValue(e,t){var a;const{valueSvc:i,colModel:s,showRowGroupCols:n,gos:o}=this.beans;if(!this.primaryColumnsSortGroups)return i.getValue(t,e,!1);if(e.rowGroupColumn===t){if(dT(o,s.isPivotActive())){const d=e.data?e:JT(e.childrenAfterGroup);return d&&i.getValue(t,d,!1)}const c=n==null?void 0:n.getShowRowGroupCol(t.getId());return c?(a=e.groupData)==null?void 0:a[c.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return i.getValue(t,e,!1)}};function X4(e){var t;(t=e.sortSvc)==null||t.onSortChanged("api")}var qD={moduleName:"Sort",version:ue,beans:[g5,Y4],apiFunctions:{onSortChanged:X4},userComponents:{agSortIndicator:t0},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}},Q4=class extends V{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:i}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),i.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),el(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,Vd(e.source))}}};function J4(e){var t;(t=e.valueCache)==null||t.expire()}function Z4(e,t){const{colKey:i,rowNode:s,useFormatter:n}=t,o=e.colModel.getColDefCol(i)??e.colModel.getCol(i);if(Ht(o))return null;const r=e.valueSvc.getValueForDisplay(o,s,n);return n?r.valueFormatted??mu(r.value):r.value}var e6="paste",t6=class extends V{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;oi(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:i}=this.beans;if(e.source===e6||t.get("suppressChangeDetection"))return;const s=e.node,n=[s],o=this.clientSideRowModel,r=o==null?void 0:o.rootNode;if(r&&!s.isRowPinned()){const a=t.get("aggregateOnlyChangedColumns"),l=new kg(a,r);l.addParentNode(s.parent,[e.column]),o.doAggregate(l),l.forEachChangedNodeDepthFirst(c=>{n.push(c),c.sibling&&n.push(c.sibling)})}i.refreshCells({rowNodes:n})}},i6=class extends V{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);At(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return At(16,{expression:e,params:t,e:i}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const i=this.createFunctionBody(e),s=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",i);return t[e]=s,s}createFunctionBody(e){return e.includes("return")?e:"return "+e+";"}},s6=class extends V{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){if(this.active){const s=this.cacheVersion;e.__cacheVersion!==s&&(e.__cacheVersion=s,e.__cacheData={}),e.__cacheData[t]=i}}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},n6={moduleName:"ValueCache",version:ue,beans:[s6],apiFunctions:{expireValueCache:J4}},o6={moduleName:"Expression",version:ue,beans:[i6]},r6={moduleName:"ChangeDetection",version:ue,beans:[t6]},a6={moduleName:"CellApi",version:ue,apiFunctions:{getCellValue:Z4}},l6=class extends V{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEditSvc=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEditSvc=!!e.editSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=vu(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=t=>this.callColumnCellValueChangedHandler(t);this.eventSvc.addListener("cellValueChanged",e,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",e,!0)),this.addManagedPropertyListener("treeData",t=>this.isTreeData=t.currentValue)}getValueForDisplay(e,t,i=!1,s=!1,n="ui"){const{showRowGroupColValueSvc:o}=this.beans,r=!e&&t.group,a=e==null?void 0:e.colDef.showRowGroup,l=!this.isTreeData||t.footer;if(o&&l&&(r||a)){const m=o.getGroupValue(t,e);if(m==null)return{value:null,valueFormatted:null};if(!i)return{value:m.value,valueFormatted:null};const v=o.formatAndPrefixGroupColValue(m,e,s);return{value:m.value,valueFormatted:v}}if(!e)return{value:t.key,valueFormatted:null};const c=t.leafGroup&&this.colModel.isPivotMode(),d=t.group&&t.expanded&&!t.footer&&!c,h=this.gos.get("groupSuppressBlankHeader")||!t.sibling,u=d&&!h,f=this.getValue(e,t,u,n),p=i&&!(s&&e.colDef.useValueFormatterForExport===!1);return{value:f,valueFormatted:p?this.formatValue(e,t,f):null}}getValue(e,t,i=!1,s="ui"){var m;if(this.initialised||this.init(),!t)return;const n=e.getColDef(),o=n.field,r=e.getColId(),a=t.data;if(this.hasEditSvc&&s==="ui"){const v=this.editSvc;if(v.isEditing()){const C=v.getCellDataValue({rowNode:t,column:e},!0);if(C!==void 0)return C}}let l;const c=n.showRowGroup;if(typeof c=="string"&&(((m=this.beans.rowGroupColsSvc)==null?void 0:m.getColumnIndex(c))??-1)>t.level)return null;const d=typeof c!="string"||!t.group,h=t.groupData&&r in t.groupData,u=!i&&t.aggData&&t.aggData[r]!==void 0,f=this.isSsrm&&i&&!!n.aggFunc,p=this.isSsrm&&t.footer&&t.field&&(n.showRowGroup===!0||n.showRowGroup===t.field);if(this.isTreeData&&u)l=t.aggData[r];else if(this.isTreeData&&n.valueGetter)l=this.executeValueGetter(n.valueGetter,a,e,t);else if(this.isTreeData&&o&&a)l=ug(a,o,e.isFieldContainsDots());else if(h)l=t.groupData[r];else if(u)l=t.aggData[r];else if(n.valueGetter&&!f){if(!d)return l;l=this.executeValueGetter(n.valueGetter,a,e,t)}else if(p)l=ug(a,t.field,e.isFieldContainsDots());else if(o&&a&&!f){if(!d)return l;l=ug(a,o,e.isFieldContainsDots())}if(this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){const v=l.substring(1);l=this.executeValueGetter(v,a,e,t)}return l}parseValue(e,t,i,s){var r;const n=e.getColDef(),o=n.valueParser;if(fe(o)){const a=Le(this.gos,{node:t,data:t==null?void 0:t.data,oldValue:s,newValue:i,colDef:n,column:e});return typeof o=="function"?o(a):(r=this.expressionSvc)==null?void 0:r.evaluate(o,a)}return i}getDeleteValue(e,t){return fe(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t).value)??null:null}formatValue(e,t,i,s,n=!0){const{expressionSvc:o}=this.beans;let r=null,a;const l=e.getColDef();if(s?a=s:n&&(a=l.valueFormatter),a){const c=t?t.data:null,d=Le(this.gos,{value:i,node:t,data:c,colDef:l,column:e});typeof a=="function"?r=a(d):r=o?o.evaluate(a,d):null}else if(l.refData)return l.refData[i]||"";return r==null&&Array.isArray(i)&&(r=i.join(", ")),r}setValue(e,t,i,s){var d,h;const n=this.colModel.getColDefCol(t);if(!e||!n)return!1;Ht(e.data)&&(e.data={});const{field:o,valueSetter:r}=n.getColDef();if(Ht(o)&&Ht(r))return J(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(n,i))return J(135),!1;const a=Le(this.gos,{node:e,data:e.data,oldValue:this.getValue(n,e,void 0,s),newValue:i,colDef:n.getColDef(),column:n});a.newValue=i;let l;if(fe(r)?typeof r=="function"?l=r(a):l=(d=this.expressionSvc)==null?void 0:d.evaluate(r,a):l=this.setValueUsingField(e.data,o,i,n.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),(h=this.valueCache)==null||h.onDataChanged();const c=this.getValue(n,e);return this.dispatchCellValueChangedEvent(e,a,c,s),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,a,c,s),!0}dispatchCellValueChangedEvent(e,t,i,s){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:i,value:i,source:s})}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,s){if(!t)return!1;let n=!1;if(!s)n=e[t]===i,n||(e[t]=i);else{const o=t.split(".");let r=e;for(;o.length>0&&r;){const a=o.shift();o.length===0?(n=r[a]===i,n||(r[a]=i)):r=r[a]}}return!n}executeValueGetterWithValueCache(e,t,i,s){const n=i.getColId(),o=this.valueCache.getValue(s,n);if(o!==void 0)return o;const r=this.executeValueGetterWithoutValueCache(e,t,i,s);return this.valueCache.setValue(s,n,r),r}executeValueGetterWithoutValueCache(e,t,i,s){var r;const n=Le(this.gos,{data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});let o;return typeof e=="function"?o=e(n):o=(r=this.expressionSvc)==null?void 0:r.evaluate(e,n),o}getValueCallback(e,t){const i=this.colModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),s=e.getColDef().keyCreator;let n=i;if(s){const o=Le(this.gos,{value:i,colDef:e.getColDef(),column:e,node:t,data:t.data});n=s(o)}return typeof n=="string"||n==null||(n=String(n),n==="[object Object]"&&J(121)),n}},c6={moduleName:"CommunityCore",version:ue,beans:[c5,t$,fU,LG,U4,A3,s5,k5,MG,F4,A4,K4,l6,a5,i5,l5,mU,Q4,cU,dU,$5],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:i$,destroy:s$,isDestroyed:n$,getGridOption:o$,setGridOption:r$,updateGridOptions:xD,isModuleRegistered:a$},dependsOn:[rU,n3,h3,qD,B5,P3,V5,$4,r6,W5,E4,M4,k4,j5,gU,aU,o6,I3,O4]},YD={AdvancedFilter:1,AiToolkit:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},uw=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],d6={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:uw,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],RowModelSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...uw,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...uw,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},h6={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function u6(e,t){const i=[];for(const s of Array.isArray(e)?e:[e]){const n=d6[s];if(n)for(const o of n){const r=h6[o];(!r||r===t)&&i.push(o)}else i.push(s)}return i}var XD=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `,g6=e=>{const t=e.map(s=>`import { ${gg(s)} } from '${YD[s]?"ag-grid-enterprise":"ag-grid-community"}';`);return e.some(s=>s==="IntegratedCharts"||s==="Sparklines")&&t.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(s=>gg(s,!0)).join(", ")} ]); 

For more info see: ${Hd}/modules/`};function gg(e,t=!1){return t&&(e==="IntegratedCharts"||e==="Sparklines")?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function f6(e,t){const i=t.filter(o=>o==="IntegratedCharts"||o==="Sparklines");let s="";return!(globalThis==null?void 0:globalThis.agCharts)&&i.length>0?s=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(o=>YD[o])&&(s=s+`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),s}function QD({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var AR=({reasonOrId:e,moduleName:t,gridScoped:i,gridId:s,rowModelType:n,additionalText:o,isUmd:r})=>{const a=u6(t,n),l=typeof e=="string"?e:C6[e];if(r)return f6(l,a);const c=a.filter(u=>u==="IntegratedCharts"||u==="Sparklines"),d=c.length>0?`${c.map(u=>gg(u)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${l} as ${a.length>1?"one of "+a.map(u=>gg(u)).join(", "):gg(a[0])} is not registered${i?" for gridId: "+s:""}. ${d} Check if you have registered the module:
`}
${g6(a)}`+(o?` 

${o}`:"")},FR=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,p6=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,m6={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e==null?void 0:e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e==null?void 0:e.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:i})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",i],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
${p6(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:i,pageSizeOptions:s})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${i?"":" the default"} paginationPageSizeSelector=[${s==null?void 0:s.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:({propertyName:e,componentName:t,agGridDefaults:i,jsComps:s})=>{const n=[],o=[...Object.keys(i??[]).filter(a=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(a)),...Object.keys(s??[]).filter(a=>!!s[a])],r=vy({inputValue:t,allSuggestions:o,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return n.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),r.length>0&&n.push(`         Did you mean: [${r.slice(0,3)}]?
`),n.push("If using a custom component check it has been registered correctly."),n},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${Hd}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({inputValue:e,allSuggestions:t})=>{const i=vy({inputValue:e,allSuggestions:t,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return[`Could not find '${e}' aggregate function. It was configured as "aggFunc: '${e}'" but it wasn't found in the list of registered aggregations.`,i.length>0?`         Did you mean: [${i.slice(0,3)}]?`:"","If using a custom aggregation function check it has been registered correctly."].join(`
`)},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:i})=>["duplicate group keys for row data, keys should be unique",e,t,...i??[]],187:({rowId:e,firstData:t,secondData:i})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",i],188:e=>`getRowId callback must be provided for Server Side Row Model ${(e==null?void 0:e.feature)||"selection"} to work correctly.`,189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:AR,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${Hd}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,229:({index:e})=>["invalid row index for ensureIndexVisible: ",e],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e==null?void 0:e.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>FR("IntegratedChartsModule"),258:()=>FR("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:i,gridId:s,rowModelType:n})=>AR({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:$d[t],gridId:s,gridScoped:i,rowModelType:n}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${Hd}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:e,parentId:t})=>`Cycle detected for row with id='${e}' and parent id='${t}'. Resetting the parent for row with id='${e}' and showing it as a root-level node.`,271:({id:e,parentId:t})=>`Parent row not found for row with id='${e}' and parent id='${t}'. Showing row with id='${e}' as a root-level node.`,272:()=>XD(),273:({providedId:e,usedId:t})=>`Provided column id '${e}' was already in use, ensure all column and group ids are unique. Using '${t}' instead.`,274:({prop:e})=>{let t=`Since v33, ${e} has been deprecated.`;switch(e){case"maxComponentCreationTimeMs":t+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":t+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":t+=" For multiple versions AgGridReact does not support children.";break}return t},275:QD,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:({colId:e})=>`'enableFilterHandlers' is set to true, but column '${e}' does not have 'filter.doesFilterPass' or 'filter.handler' set.`,278:({colId:e})=>`Unable to create filter handler for column '${e}'`,279:e=>{},280:({colId:e})=>`'name' must be provided for custom filter components for column '${e}`,281:({colId:e})=>`Filter for column '${e}' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.`,282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler(colKey)`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:({rowModelType:e})=>`Row Model '${e}' is not supported with Batch Editing`,290:({rowIndex:e,rowPinned:t})=>`Row with index '${e}' and pinned state '${t}' not found`,291:()=>"License Key being set multiple times with different values. This can result in an incorrect license key being used,",292:({colId:e})=>`The Multi Filter for column '${e}' has buttons configured against the child filters. When 'enableFilterHandlers=true', buttons must instead be provided against the parent Multi Filter params. The child filter buttons will be ignored.`};function v6(e,t){const i=m6[e];if(!i)return[`Missing error text for error id ${e}!`];const s=i(t),o=`
See ${nT(e,t)}`;return Array.isArray(s)?s.concat(o):[s,o]}var C6={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},PR=new WeakMap,TR=new WeakMap;function w6(e,t,i){if(!t)return At(11),{};let s;{const o=ri({tag:"div"});o.style.height="100%",e.appendChild(o),e=o,s=()=>e.remove()}return new y6().create(e,t,o=>{const r=new ZW(e);o.createBean(r)},void 0,i,s)}var b6=1,y6=class{create(e,t,i,s,n,o){const r=DS.applyGlobalGridOptions(t),a=r.gridId??String(b6++),l=this.getRegisteredModules(n,a,r.rowModelType),c=this.createBeansList(r.rowModelType,l,a),d=this.createProvidedBeans(e,r,n);if(!c)return;const u={providedBeanInstances:d,beanClasses:c,id:a,beanInitComparator:OW,beanDestroyComparator:NW,derivedBeans:[_W],destroyCallback:()=>{TR.delete(p),PR.delete(e),NH(a),o==null||o()}},f=new gV(u);this.registerModuleFeatures(f,l),i(f),f.getBean("syncSvc").start(),s==null||s(f);const p=f.getBean("gridApi");return PR.set(e,p),TR.set(p,e),p}getRegisteredModules(e,t,i){var s;return Pg(c6,void 0,!0),(s=e==null?void 0:e.modules)==null||s.forEach(n=>Pg(n,t)),HH(t,DR(i))}registerModuleFeatures(e,t){const i=e.getBean("registry"),s=e.getBean("apiFunctionSvc");for(const n of t){i.registerModule(n);const o=n.apiFunctions;if(o){const r=Object.keys(o);for(const a of r)s==null||s.addFunction(a,o[a])}}}createProvidedBeans(e,t,i){let s=i?i.frameworkOverrides:null;Ht(s)&&(s=new kW);const n={gridOptions:t,eGridDiv:e,eRootDiv:e,globalListener:i?i.globalListener:null,globalSyncListener:i?i.globalSyncListener:null,frameworkOverrides:s};return i!=null&&i.providedBeanInstances&&Object.assign(n,i.providedBeanInstances),n}createBeansList(e,t,i){const s={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},n=DR(e),o=s[n];if(!o){Xu(201,{rowModelType:n},`Unknown rowModelType ${n}.`);return}if(!BH()){Xu(272,void 0,XD());return}if(!e){const a=Object.entries(s).filter(([l,c])=>ay(c,i,l));if(a.length==1){const[l,c]=a[0];if(l!==n){const d={moduleName:c,rowModelType:l};Xu(275,d,QD(d));return}}}if(!ay(o,i,n)){Xu(200,{reasonOrId:`rowModelType = '${n}'`,moduleName:o,gridScoped:MS(),gridId:i,rowModelType:n},`Missing module ${o}Module for rowModelType ${n}.`);return}const r=new Set;for(const a of t)for(const l of a.beans??[])r.add(l);return Array.from(r)}};function DR(e){return e??"clientSide"}function hl(e){const t=e.rowModel;return t.getType()==="clientSide"?t:void 0}function uC(e){const t=e.rowModel;return t.getType()==="infinite"?t:void 0}function S6(e){const t=e.rowModel;return t.getType()==="serverSide"?t:void 0}var x6=class extends V{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");return t?RH(t):EH(e.get("localeText"))}};function R6(e,t=!1){const i=[],s=[],n=[],o=[],r=[],a=[],l=[],c=[],d=[];let h=0;for(let u=0;u<e.length;u++){const{colId:f,sort:p,sortIndex:m,rowGroup:v,rowGroupIndex:C,aggFunc:w,pivot:S,pivotIndex:y,pinned:R,hide:A,width:P,flex:T}=e[u];d.push(f),p&&(i[m??h++]={colId:f,sort:p}),v&&(s[C??0]=f),typeof w=="string"&&n.push({colId:f,aggFunc:w}),S&&(o[y??0]=f),R&&(R==="right"?a:r).push(f),A&&l.push(f),(T!=null||P)&&c.push({colId:f,flex:T??void 0,width:P})}return{sort:i.length?{sortModel:gw(i)}:void 0,rowGroup:s.length?{groupColIds:gw(s)}:void 0,aggregation:n.length?{aggregationModel:n}:void 0,pivot:o.length||t?{pivotMode:t,pivotColIds:gw(o)}:void 0,columnPinning:r.length||a.length?{leftColIds:r,rightColIds:a}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:c.length?{columnSizingModel:c}:void 0,columnOrder:d.length?{orderedColIds:d}:void 0}}function gw(e){return e.filter(t=>t!=null)}function E6(e){const t=[];for(const{groupId:i,open:s}of e)s&&t.push(i);return t.length?{openColumnGroupIds:t}:void 0}function fw(e){return e.get("tooltipShowMode")==="whenTruncated"}function A6(e,t){if(typeof e!="number")return"";const i=t(),s=i("thousandSeparator",","),n=i("decimalSeparator",".");return e.toString().replace(".",n).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${s}`)}var F6=class extends V{getFileName(e){const t=this.getDefaultFileExtension();return e!=null&&e.length||(e=this.getDefaultFileName()),e.includes(".")?e:`${e}.${t}`}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},P6=class{constructor(e){const{colModel:t,rowGroupColsSvc:i,colNames:s,valueSvc:n,gos:o,processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.colModel=t,this.rowGroupColsSvc=i,this.colNames=s,this.valueSvc=n,this.gos=o,this.processCellCallback=r,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,s,n){var u;const o=t===0&&hT(this.gos,n,this.colModel.isPivotMode());if(this.processRowGroupCallback&&(this.gos.get("treeData")||n.group)&&(e.isRowGroupDisplayed(((u=n.rowGroupColumn)==null?void 0:u.getColId())??"")||o))return{value:this.processRowGroupCallback(Le(this.gos,{column:e,node:n}))??""};if(this.processCellCallback)return{value:this.processCellCallback(Le(this.gos,{accumulatedRowIndex:i,column:e,node:n,value:this.valueSvc.getValueForDisplay(e,n,void 0,void 0).value,type:s,parseValue:f=>this.valueSvc.parseValue(e,n,f,this.valueSvc.getValue(e,n,void 0)),formatValue:f=>this.valueSvc.formatValue(e,n,f)??f}))??""};const r=this.gos.get("treeData"),a=this.valueSvc,l=n.level===-1&&n.footer,c=e.colDef.showRowGroup===!0&&(n.group||r);if(!l&&(o||c)){let f="",p=n;for(;p&&p.level!==-1;){const{value:m,valueFormatted:v}=a.getValueForDisplay(o?void 0:e,p,!0,!0);f=` -> ${v??m??""}${f}`,p=p.parent}return{value:f,valueFormatted:f}}const{value:d,valueFormatted:h}=a.getValueForDisplay(e,n,!0,!0);return{value:d??"",valueFormatted:h}}getHeaderName(e,t){return e?e(Le(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}};function T6(e,t){const i=document.defaultView||window;if(!i){J(52);return}const s=document.createElement("a"),n=i.URL.createObjectURL(t);s.setAttribute("href",n),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),s.remove(),i.setTimeout(()=>{i.URL.revokeObjectURL(n)},0)}var D6={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},Cs="clientSide",Ki="serverSide",gd="infinite",M6={onGroupExpandedOrCollapsed:[Cs],refreshClientSideRowModel:[Cs],isRowDataEmpty:[Cs],forEachLeafNode:[Cs],forEachNodeAfterFilter:[Cs],forEachNodeAfterFilterAndSort:[Cs],resetRowHeights:[Cs,Ki],applyTransaction:[Cs],applyTransactionAsync:[Cs],flushAsyncTransactions:[Cs],getBestCostNodeSelection:[Cs],getServerSideSelectionState:[Ki],setServerSideSelectionState:[Ki],applyServerSideTransaction:[Ki],applyServerSideTransactionAsync:[Ki],applyServerSideRowData:[Ki],retryServerSideLoads:[Ki],flushServerSideAsyncTransactions:[Ki],refreshServerSide:[Ki],getServerSideGroupLevelState:[Ki],refreshInfiniteCache:[gd],purgeInfiniteCache:[gd],getInfiniteRowCount:[gd],isLastRowIndexKnown:[gd,Ki],expandAll:[Cs,Ki],collapseAll:[Cs,Ki],onRowHeightChanged:[Cs,Ki],setRowCount:[gd,Ki],getCacheBlockState:[gd,Ki]},I6={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function k6(e,t,i){const s=I6[e];if(s){const{version:o,new:r,old:a,message:l}=s,c=a??e;return(...d)=>{const h=r?`Please use ${r} instead. `:"";return cg(`Since ${o} api.${c} is deprecated. ${h}${l??""}`),t.apply(t,d)}}const n=M6[e];return n?(...o)=>{const r=i.rowModel.getType();if(!n.includes(r)){Od(`api.${e} can only be called when gridOptions.rowModelType is ${n.join(" or ")}`);return}return t.apply(t,o)}:t}var _6={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",highlightTooltipFeature:"Tooltip",tooltipStateManager:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"},L6={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},O6={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},N6=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),H6=class extends V{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,WH(v6)}warnOnInitialPropertyUpdate(e,t){e==="api"&&D6[t]&&J(22,{key:t})}processGridOptions(e){this.processOptions(e,D5())}validateApiFunction(e,t){return k6(e,t,this.beans)}missingUserComponent(e,t,i,s){const n=$d[t];n?this.gos.assertModuleRegistered(n,`AG Grid '${e}' component: ${t}`):J(101,{propertyName:e,componentName:t,agGridDefaults:i,jsComps:s})}missingDynamicBean(e){const t=_6[e];return t?No(200,{...this.gos.getModuleErrorParams(),moduleName:t,reasonOrId:e}):void 0}checkRowEvents(e){B6.has(e)&&J(10,{eventType:e})}validateIcon(e){if(N6.has(e)&&J(43,{iconName:e}),L6[e])return;const t=O6[e];if(t){At(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:MS(),gridId:this.beans.context.getId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}J(134,{iconName:e})}isProvidedUserComp(e){return!!$d[e]}validateColDef(e){this.processOptions(e,w5())}processOptions(e,t){const{validations:i,deprecations:s,allProperties:n,propertyExceptions:o,objectName:r,docsUrl:a}=t;n&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...o??[],...Object.keys(s)],n,r,a);const l=new Set;if(Object.keys(e).forEach(d=>{const h=s[d];if(h){const{message:w,version:S}=h;l.add(`As of v${S}, ${String(d)} is deprecated. ${w??""}`)}const u=e[d];if(u==null||u===!1)return;const f=i[d];if(!f)return;const{dependencies:p,validate:m,supportedRowModels:v,expectedType:C}=f;if(C){const w=typeof u;if(w!==C){l.add(`${String(d)} should be of type '${C}' but received '${w}' (${u}).`);return}}if(v){const w=this.gridOptions.rowModelType??"clientSide";if(!v.includes(w)){l.add(`${String(d)} is not supported with the '${w}' row model. It is only valid with: ${v.join(", ")}.`);return}}if(p){const w=this.checkForRequiredDependencies(d,p,e);if(w){l.add(w);return}}if(m){const w=m(e,this.gridOptions,this.beans);if(w){l.add(w);return}}}),l.size>0)for(const d of l)cg(d)}checkForRequiredDependencies(e,t,i){const n=Object.entries(t).filter(([o,r])=>{const a=i[o];return!r.required.includes(a)});return n.length===0?null:n.map(([o,r])=>`'${String(e)}' requires '${o}' to be one of [${r.required.map(a=>a===null?"null":a===void 0?"undefined":a).join(", ")}]. ${r.reason??""}`).join(`
           `)}checkProperties(e,t,i,s,n){const o=["__ob__","__v_skip","__metadata__"],r=G6(Object.getOwnPropertyNames(e),[...o,...t,...i],i),a=Object.keys(r);for(const l of a){const c=r[l];let d=`invalid ${s} property '${l}' did you mean any of these: ${c.slice(0,8).join(", ")}.`;i.includes("context")&&(d+=`
If you are trying to annotate ${s} with application data, use the '${s}.context' property instead.`),cg(d)}if(a.length>0&&n){const l=this.beans.frameworkOverrides.getDocLink(n);cg(`to see all the valid ${s} properties please check: ${l}`)}}};function G6(e,t,i){const s={},n=e.filter(o=>!t.some(r=>r===o));if(n.length>0)for(const o of n)s[o]=vy({inputValue:o,allSuggestions:i}).values;return s}var B6=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),V6={moduleName:"Validation",version:ue,beans:[H6]};function JD(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter)}var z6=class extends V{constructor(){super(...arguments),this.beanName="filterStage",this.step="filter",this.refreshProps=["excludeChildrenWhenTreeDataFiltering"]}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){var i;const t=!!((i=this.filterManager)!=null&&i.isChildFilterPresent());this.filterNodes(t,e)}filterNodes(e,t){const i=(s,n)=>{s.hasChildren()&&e&&!n?s.childrenAfterFilter=s.childrenAfterGroup.filter(o=>{const r=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,a=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return r||a}):s.childrenAfterFilter=s.childrenAfterGroup,JD(s)};if(this.doingTreeDataFiltering()){const s=(o,r)=>{if(o.childrenAfterGroup)for(let a=0;a<o.childrenAfterGroup.length;a++){const l=o.childrenAfterGroup[a],c=r||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?s(o.childrenAfterGroup[a],c):i(l,c)}i(o,r)},n=o=>s(o,!1);t.executeFromRootNode(n)}else{const s=n=>i(n,!1);t.forEachChangedNodeDepthFirst(s,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},W6=class extends ZS{constructor(){super(...arguments),this.iconCreated=!1}wireComp(e,t,i,s,n){this.comp=e;const o=pp(this,this.beans.context,n);this.eButtonShowMainFilter=i,this.eFloatingFilterBody=s,this.setGui(t,o),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(o),this.setupLeft(o),this.setupHover(o),this.setupFocus(o),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(o),this.setupUi(),o.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(o);const r=()=>this.onColDefChanged(o);o.addManagedListeners(this.column,{colDefChanged:r}),o.addManagedEventListeners({filterSwitched:({column:a})=>{a===this.column&&r()}}),o.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return Le(t.gos,{colDef:i,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=fn("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Cu(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();su(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){var r;const{beans:t}=this;if(Wt(t)===this.eGui)return;const n=ld(t,this.eGui,null,e.shiftKey);if(n){(r=t.headerNavigation)==null||r.scrollToColumn(this.column),e.preventDefault(),n.focus();return}const o=this.findNextColumnWithFloatingFilter(e.shiftKey);o&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let i=this.column;do if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case G.UP:case G.DOWN:case G.LEFT:case G.RIGHT:if(t)return;Yc(e);case G.ENTER:t&&qc(this.eGui)&&e.preventDefault();break;case G.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),s=!!e.relatedTarget&&_c(e.relatedTarget,"ag-floating-filter");if(i&&s&&e.target===this.eGui){const n=this.lastFocusEvent,o=!!(n&&n.key===G.TAB);if(n&&o){const r=n.shiftKey;qc(this.eGui,r)}}this.focusThis()}setupHover(e){var t;(t=this.beans.colHover)==null||t.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new JS(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){var e;this.suppressFilterButton=!((e=this.beans.menuSvc)!=null&&e.isFloatingFilterButtonEnabled(this.column)),this.highlightFilterButtonWhenActive=!Us(this.gos)}setupUserComp(){var t;if(!this.active)return;const e=(t=this.beans.colFilter)==null?void 0:t.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){var t;const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;(t=this.beans.menuSvc)==null||t.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{beans:{colFilter:t},column:i,gos:s}=this,n=o=>{if((o==null?void 0:o.source)==="filterDestroyed"&&(!this.isAlive()||!(t!=null&&t.isAlive())))return;const r=this.comp.getFloatingFilterComp();r&&r.then(a=>{if(a){if(s.get("enableFilterHandlers")){const d=o;let h="filter";d!=null&&d.afterFloatingFilter?h="ui":d!=null&&d.afterDataChange?h="dataChanged":(o==null?void 0:o.source)==="api"&&(h="api"),this.updateFloatingFilterParams(this.userCompDetails,h);return}const l=t==null?void 0:t.getCurrentFloatingFilterParentModel(i),c=o?{...o,columns:o.columns??[],source:o.source==="api"?"api":"columnFilter"}:null;a.onParentModelChanged(l,c)}})};[this.destroySyncListener]=e.addManagedListeners(i,{filterChanged:n}),t!=null&&t.isFilterActive(i)&&n(null)}setupWidth(e){const t=()=>{const i=`${this.column.getActualWidth()}px`;this.comp.setWidth(i)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){var e;if(!this.suppressFilterButton&&this.comp){const t=!!((e=this.beans.filterManager)!=null&&e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const s=this.beans.colFilter,n=this.active?s==null?void 0:s.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();!o||!n?this.updateCompDetails(e,n,i):o.then(r=>{!r||s!=null&&s.areFilterCompsDifferent(this.userCompDetails??null,n)?this.updateCompDetails(e,n,i):this.updateFloatingFilterParams(n,"colDef")})}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){var s;if(!e)return;let i=e.params;(s=this.comp.getFloatingFilterComp())==null||s.then(n=>{var o;typeof(n==null?void 0:n.refresh)=="function"&&(this.gos.get("enableFilterHandlers")&&(i={...i,model:Si(((o=this.beans.colFilter)==null?void 0:o.model)??{},this.column.getColId()),source:t}),n.refresh(i))})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function $6(e,t){var s;const i=e.colModel.getCol(t);if(!i){At(12,{colKey:t});return}(s=e.menuSvc)==null||s.showColumnMenu({column:i,positionBy:"auto"})}function U6(e){var t;(t=e.menuSvc)==null||t.hidePopupMenu()}var j6={moduleName:"SharedMenu",version:ue,beans:[iW],apiFunctions:{showColumnMenu:$6,hidePopupMenu:U6}},K6=class extends xV{postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getDefaultPopupParent(){return this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i,event:s}=e,n=t.getBoundingClientRect(),o=this.getParentRect();this.setAlignedTo(t,i);let r=!1;const a=()=>{const l=this.keepXYWithinBounds(i,n.top-o.top,0),c=i.clientWidth>0?i.clientWidth:200;r||(i.style.minWidth=`${c}px`,r=!0);const h=o.right-o.left-c;let u;return this.gos.get("enableRtl")?(u=p(),u<0&&(u=f(),this.setAlignedStyles(i,"left")),u>h&&(u=0,this.setAlignedStyles(i,"right"))):(u=f(),u>h&&(u=p(),this.setAlignedStyles(i,"right")),u<0&&(u=0,this.setAlignedStyles(i,"left"))),{x:u,y:l};function f(){return n.right-o.left-2}function p(){return n.left-o.left-c}};this.positionPopup({ePopup:i,keepWithinBounds:!0,updatePosition:a,postProcessCallback:()=>this.callPostProcessPopup(e,"subMenu",i,t,s instanceof MouseEvent?s:void 0)})}callPostProcessPopup(e,t,i,s,n){const o=this.gos.getCallback("postProcessPopup");if(o){const{column:r,rowNode:a}=e;o({column:r,rowNode:a,ePopup:i,type:t,eventSource:s,mouseEvent:n})}}getActivePopups(){return this.popupList.map(e=>e.element)}handleThemeChange(e){if(e.themeChanged){const t=this.beans.environment;for(const i of this.popupList)t.applyThemeClasses(i.wrapper)}}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isStopPropagation(e){return Hr(e)}},gC={moduleName:"Popup",version:ue,beans:[K6]},q6=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function Y6(e){const t=e.filterManager;return!!(t!=null&&t.isColumnFilterPresent())||!!(t!=null&&t.isAggregateFilterPresent())}function X6(e,t){var i;return((i=e.filterManager)==null?void 0:i.getColumnFilterInstance(t))??Promise.resolve(void 0)}function Q6(e,t){var s;const i=e.colModel.getColDefCol(t);if(i)return(s=e.colFilter)==null?void 0:s.destroyFilter(i,"api")}function J6(e,t){e.frameworkOverrides.wrapIncoming(()=>{var i;return(i=e.filterManager)==null?void 0:i.setFilterModel(t)})}function Z6(e){var t;return((t=e.filterManager)==null?void 0:t.getFilterModel())??{}}function ej(e,t,i){const{gos:s,colModel:n,colFilter:o}=e;i&&!s.get("enableFilterHandlers")&&(J(288),i=!1);const r=n.getColDefCol(t);return r?(o==null?void 0:o.getModelForColumn(r,i))??null:null}function tj(e,t,i){var s;return((s=e.filterManager)==null?void 0:s.setColumnFilterModel(t,i))??Promise.resolve()}function ij(e,t){var s;const i=e.colModel.getCol(t);if(!i){At(12,{colKey:t});return}(s=e.menuSvc)==null||s.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"})}function sj(e){var t;(t=e.menuSvc)==null||t.hideFilterMenu()}function nj(e,t){var s;const i=e.colModel.getCol(t);if(!i){At(12,{colKey:t});return}return(s=e.colFilter)==null?void 0:s.getHandler(i,!0)}function oj(e,t){const{colModel:i,colFilter:s,gos:n}=e;if(!n.get("enableFilterHandlers")){J(287);return}const{colId:o,action:r}=t;if(o){const a=i.getColById(o);a&&(s==null||s.updateModel(a,r))}else s==null||s.updateAllModels(r)}var rj={filterHandler:()=>({doesFilterPass:()=>!0})},aj=class extends V{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap={...ZT},this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){var i,s;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});const e=this.gos,t={...((s=(i=e.get("initialState"))==null?void 0:i.filter)==null?void 0:s.filterModel)??{}};this.initialModel=t,this.model={...t},e.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(e,t="api",i){const{colModel:s,dataTypeSvc:n,filterManager:o}=this.beans;if(n!=null&&n.isPendingInference){this.modelUpdates.push({model:e,source:t});return}const r=[],a=this.getModel(!0);if(e){const l=new Set(Object.keys(e));this.allColumnFilters.forEach((c,d)=>{const h=e[d];r.push(this.setModelOnFilterWrapper(c,h)),l.delete(d)}),l.forEach(c=>{const d=s.getColDefCol(c)||s.getCol(c);if(!d){J(62,{colId:c});return}if(!d.isFilterAllowed()){J(63,{colId:c});return}const h=this.getOrCreateFilterWrapper(d,!0);if(!h){J(64,{colId:c});return}r.push(this.setModelOnFilterWrapper(h,e[c],!0))})}else this.model={},this.allColumnFilters.forEach(l=>{r.push(this.setModelOnFilterWrapper(l,null))});Xt.all(r).then(()=>{const l=this.getModel(!0),c=[];this.allColumnFilters.forEach((d,h)=>{const u=a?a[h]:null,f=l?l[h]:null;xg(u,f)||c.push(d.column)}),c.length>0?o==null||o.onFilterChanged({columns:c,source:t}):i&&this.updateActive("filterChanged")})}getModel(e){var o;const t={},{allColumnFilters:i,initialModel:s,beans:{colModel:n}}=this;if(i.forEach((r,a)=>{const l=this.getModelFromFilterWrapper(r);fe(l)&&(t[a]=l)}),!e)for(const r of Object.keys(s)){const a=s[r];fe(a)&&!i.has(r)&&((o=n.getCol(r))!=null&&o.isFilterAllowed())&&(t[r]=a)}return t}setState(e,t,i="api"){if(this.state.clear(),t)for(const s of Object.keys(t)){const n=t[s];this.state.set(s,{model:Si(this.model,s),state:n})}this.setModel(e,i,!0)}getState(){const e=this.state;if(!e.size)return;const t={};let i=!1;return e.forEach((s,n)=>{const o=s.state;o!=null&&(i=!0,t[n]=o)}),i?t:void 0}getModelFromFilterWrapper(e){const i=e.column.getColId();if(e.isHandler)return Si(this.model,i);const s=e.filter;return s?typeof s.getModel!="function"?(J(66),null):s.getModel():Si(this.initialModel,i)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};const{allColumnFilters:e}=this;return e.size?(e.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}updateActiveFilters(){const e=c=>c?c.isFilterActive?c.isFilterActive():(J(67),!1):!1,{colModel:t,gos:i}=this.beans,s=!!dy(i),n=c=>{if(!c.isPrimary())return!0;const h=!t.isPivotActive();return!c.isValueActive()||!h?!1:t.isPivotMode()?!0:s},o=[],r=[],a=(c,d,h)=>{d&&(n(c)?o.push(h):r.push(h))},l=[];return this.allColumnFilters.forEach(c=>{const d=c.column,h=d.getColId();if(c.isHandler)l.push(Xt.resolve().then(()=>{a(d,this.isHandlerActive(d),{colId:h,isHandler:!0,handler:c.handler,handlerParams:c.handlerParams})}));else{const u=ea(c);u&&l.push(u.then(f=>{a(d,e(f),{colId:h,isHandler:!1,comp:f})}))}}),Xt.all(l).then(()=>{this.activeAggregateFilters=o,this.activeColumnFilters=r})}updateFilterFlagInColumns(e,t){var s;const i=[];return this.allColumnFilters.forEach(n=>{const o=n.column;if(n.isHandler)i.push(Xt.resolve().then(()=>{this.setColFilterActive(o,this.isHandlerActive(o),e,t)}));else{const r=ea(n);r&&i.push(r.then(a=>{this.setColFilterActive(o,a.isFilterActive(),e,t)}))}}),(s=this.beans.groupFilter)==null||s.updateFilterFlags(e,t),Xt.all(i)}doFiltersPass(e,t,i){const{data:s,aggData:n}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,r=i?n:s,a=this.model;for(let l=0;l<o.length;l++){const c=o[l],{colId:d,isHandler:h}=c;if(d!==t)if(h){const{handler:u,handlerParams:f}=c;if(!u.doesFilterPass({node:e,data:r,model:Si(a,d),handlerParams:f}))return!1}else{const u=c.comp;if(typeof u.doesFilterPass!="function"){At(91);continue}if(!u.doesFilterPass({node:e,data:r}))return!1}}return!0}getHandlerParams(e){const t=this.allColumnFilters.get(e.getColId());return t!=null&&t.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:i}=this.beans,s=()=>{this.isAlive()&&(i==null||i.onFilterChanged(e))};t.isRefreshInProgress()?setTimeout(s,0):s()}updateBeforeFilterChanged(e={}){const{column:t,additionalEventAttributes:i}=e,s=t==null?void 0:t.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",i).then(()=>{this.allColumnFilters.forEach(n=>{var a,l,c;const{column:o,isHandler:r}=n;s!==o.getColId()&&(r&&((l=(a=n.handler).onAnyFilterChanged)==null||l.call(a)),(c=ea(n,r))==null||c.then(d=>{typeof(d==null?void 0:d.onAnyFilterChanged)=="function"&&d.onAnyFilterChanged()}))}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){const t=[];this.allColumnFilters.forEach(i=>{var o,r;const s=i.isHandler;s&&((r=(o=i.handler).onNewRowsLoaded)==null||r.call(o));const n=ea(i,s);n&&t.push(n.then(a=>{var l;(l=a.onNewRowsLoaded)==null||l.call(a)}))}),Xt.all(t).then(()=>this.updateActive(e,{afterDataChange:!0}))}updateActive(e,t){this.updateFilterFlagInColumns(e,t).then(()=>this.updateActiveFilters())}createGetValue(e,t){const{filterValueSvc:i,colModel:s}=this.beans;return(n,o)=>{const r=o?s.getCol(o):e;return r?i.getValue(r,n,t):void 0}}isFilterActive(e){const t=this.cachedFilter(e);if(t!=null&&t.isHandler)return this.isHandlerActive(e);const i=t==null?void 0:t.filter;return i?i.isFilterActive():Si(this.initialModel,e.getColId())!=null}isHandlerActive(e){const t=fe(Si(this.model,e.getColId()));if(t)return t;const i=this.beans.groupFilter;return i!=null&&i.isGroupFilter(e)?i.isFilterActive(e):!1}getOrCreateFilterUi(e){const t=this.getOrCreateFilterWrapper(e,!0);return t?ea(t):null}getFilterUiForDisplay(e){const t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;const i=ea(t);return i?i.then(s=>({comp:s,params:t.filterUi.filterParams,isHandler:t.isHandler})):null}getHandler(e,t){const i=this.getOrCreateFilterWrapper(e,t);return i!=null&&i.isHandler?i.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let i=this.cachedFilter(e);return!i&&t&&(i=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,i)),i}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e,t=!1){return this.getDefaultFilterFromDataType(()=>{var i;return(i=this.beans.dataTypeSvc)==null?void 0:i.getBaseDataType(e)},t)}getDefaultFilterFromDataType(e,t=!1){return oG(this.gos)?t?"agSetColumnFloatingFilter":"agSetColumnFilter":KV(e(),t)}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,i,s,n,o){const r=()=>{const c=this.createFilterCompParams(e,n,o),d=s(c,n);return lB(this.beans.userCompFactory,t,d,i)},a=r();return a?{compDetails:a,createFilterUi:c=>(c?r():a).newAgStackInstance()}:null}createFilterInstance(e,t,i,s){var h,u;const n=this.beans.selectableFilter;n!=null&&n.isSelectable(t)&&(t=n.getFilterDef(e,t));const{handler:o,handlerParams:r,handlerGenerator:a}=this.createHandler(e,t,i)??{},l=this.createFilterComp(e,t,i,s,!!o,"init");if(!l)return{compDetails:null,createFilterUi:null,handler:o,handlerGenerator:a,handlerParams:r};const{compDetails:c,createFilterUi:d}=l;return this.isGlobalButtons&&((u=(h=c.params)==null?void 0:h.buttons)!=null&&u.length||J(281,{colId:e.getColId()})),{compDetails:c,handler:o,handlerGenerator:a,handlerParams:r,createFilterUi:d}}createBaseFilterParams(e,t){const{filterManager:i,rowModel:s}=this.beans;return Le(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:n=>(i==null?void 0:i.doesRowPassOtherFilters(e.getColId(),n))??!0,rowModel:s})}createFilterCompParams(e,t,i,s){const n=this.filterChangedCallbackFactory(e),o=this.createBaseFilterParams(e,s);if(o.filterChangedCallback=n,o.filterModifiedCallback=s?()=>{}:r=>this.filterModified(e,r),t){const r=o,a=e.getColId(),l=Si(this.model,a);r.model=l,r.state=this.state.get(a)??{model:l},r.onModelChange=(c,d)=>{this.updateStoredModel(a,c),this.refreshHandlerAndUi(e,c,"ui",!1,d).then(()=>{n({...d,source:"columnFilter"})})},r.onStateChange=c=>{this.updateState(e,c),this.updateOrRefreshFilterUi(e)},r.onAction=(c,d,h)=>{this.updateModel(e,c,d),this.dispatchLocalEvent({type:"filterAction",column:e,action:c,event:h})},r.getHandler=()=>this.getHandler(e,!0),r.onUiChange=c=>this.filterUiChanged(e,c),r.source=i}return o}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,i){const s=t(),n={created:!0,create:t,filterParams:e.params,compDetails:e,promise:s};return s.then(i),n}createFilterWrapper(e){var a;const{compDetails:t,handler:i,handlerGenerator:s,handlerParams:n,createFilterUi:o}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),l=>l),r=e.getColId();if(i)return delete this.initialModel[r],(a=i.init)==null||a.call(i,{...n,source:"init",model:Si(this.model,r)}),{column:e,isHandler:!0,handler:i,handlerGenerator:s,handlerParams:n,filterUi:this.createFilterUiForHandler(t,o)};if(o){const l={column:e,filterUi:null,isHandler:!1};return l.filterUi=this.createFilterUiLegacy(t,o,c=>{l.filter=c??void 0}),l}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t,i){var f;const{gos:s,frameworkOverrides:n,registry:o}=this.beans;let r;const a=p=>{const m=p.filter;if(PT(m)){const v=m.handler;return v||(r=m.doesFilterPass,r?()=>({doesFilterPass:r}):void 0)}return typeof m=="string"?m:void 0},l=s.get("enableFilterHandlers"),c=l?a(t):void 0,d=p=>()=>this.createBean(o.createDynamicBean(p,!0));let h,u;if(typeof c=="string"){const p=(f=s.get("filterHandlers"))==null?void 0:f[c];p!=null?h=p:LV.has(c)&&(h=d(c),u=c)}else h=c;if(!h){let p;const{compName:m,jsComp:v,fwComp:C}=MT(n,t);m?p=m:v==null&&C==null&&t.filter===!0&&(p=i),u=this.handlerMap[p],u&&(h=d(u))}return h?{filterHandler:h,handlerNameOrCallback:r??u}:l?(oi(s)&&J(277,{colId:e.getColId()}),rj):void 0}createHandler(e,t,i){const s=this.createHandlerFunc(e,t,i);if(!s)return;const n=GC(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,"init")),{handlerNameOrCallback:o,filterHandler:r}=s,{handler:a,handlerParams:l}=this.createHandlerFromFunc(e,r,n);return{handler:a,handlerParams:l,handlerGenerator:o??r}}createHandlerFromFunc(e,t,i){const s=e.getColDef(),n=t(Le(this.gos,{column:e,colDef:s})),o=this.createHandlerParams(e,i);return{handler:n,handlerParams:o}}createHandlerParams(e,t){const i=e.getColDef(),s=e.getColId(),n=this.filterChangedCallbackFactory(e);return Le(this.gos,{colDef:i,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:o=>{var r;return((r=this.beans.filterManager)==null?void 0:r.doesRowPassOtherFilters(s,o))??!0},onModelChange:(o,r)=>{this.updateStoredModel(s,o),this.refreshHandlerAndUi(e,o,"handler",!1,r).then(()=>{n({...r,source:"columnFilter"})})},filterParams:t})}onColumnsChanged(){const e=[],{colModel:t,filterManager:i,groupFilter:s}=this.beans;this.allColumnFilters.forEach((o,r)=>{let a;o.column.isPrimary()?a=t.getColDefCol(r):a=t.getCol(r),!(a&&a===o.column)&&(e.push(o.column),this.disposeFilterWrapper(o,"columnChanged"),this.disposeColumnListener(r))});const n=s&&e.every(o=>s.isGroupFilter(o));e.length>0&&!n&&(i==null||i.onFilterChanged({columns:e,source:"api"}))}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const i=this.beans.groupFilter;return i!=null&&i.isGroupFilter(e)?i.isFilterAllowed(e):!0}getFloatingFilterCompDetails(e,t){const{userCompFactory:i,frameworkOverrides:s,selectableFilter:n}=this.beans,o=u=>{const f=this.getOrCreateFilterUi(e);f!=null&&f.then(p=>{u(Mg(p))})},r=e.getColDef(),a=n!=null&&n.isSelectable(r)?n.getFilterDef(e,r):r,l=JV(s,a,()=>this.getDefaultFloatingFilter(e))??"agReadOnlyFloatingFilter",c=this.gos.get("enableFilterHandlers"),d=GC(i,a,this.createFilterCompParams(e,c,"init",!0)),h=Le(this.gos,{column:e,filterParams:d,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:o,showParentFilter:t});if(c){const u=h,f=e.getColId(),p=this.filterChangedCallbackFactory(e);u.onUiChange=m=>this.floatingFilterUiChanged(e,m),u.model=Si(this.model,f),u.onModelChange=(m,v)=>{this.updateStoredModel(f,m),this.refreshHandlerAndUi(e,m,"floating",!0,v).then(()=>{p({...v,source:"columnFilter"})})},u.getHandler=()=>this.getHandler(e,!0),u.source="init"}return gB(i,r,h,l)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilterUi(e,t,i,s){const n="paramsUpdated";if(e.isHandler){const o=t.getColId();delete this.initialModel[o],this.state.delete(o);const r=e.filterUi,a=this.createFilterUiForHandler(i,s);e.filterUi=a;const l=this.eventSvc;r!=null&&r.created?r.promise.then(c=>{this.destroyBean(c),l.dispatchEvent({type:"filterDestroyed",source:n,column:t})}):l.dispatchEvent({type:"filterHandlerDestroyed",source:n,column:t})}else this.destroyFilter(t,n)}destroyFilter(e,t="api"){const i=e.getColId(),s=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialModel[i],s&&this.disposeFilterWrapper(s,t).then(n=>{var o;n&&this.isAlive()&&((o=this.beans.filterManager)==null||o.onFilterChanged({columns:[e],source:"api"}))})}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let i=!1;const{column:s,isHandler:n,filterUi:o}=e,r=s.getColId();n&&(i=this.isHandlerActive(s),this.destroyBean(e.handler),delete this.model[r],this.state.delete(r));const a=()=>{this.setColFilterActive(s,!1,"filterDestroyed"),this.allColumnFilters.delete(r),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:s})};if(o){if(o.created)return o.promise.then(l=>(i=n?i:!!(l!=null&&l.isFilterActive()),this.destroyBean(l),a(),i));a()}return Xt.resolve(i)}filterChangedCallbackFactory(e){return t=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:(t==null?void 0:t.source)??"columnFilter"})}}filterParamsChanged(e,t="api"){var v,C,w,S,y,R;const i=this.allColumnFilters.get(e);if(!i)return;const s=this.beans,n=i.column,o=n.getColDef(),r=n.isFilterAllowed(),a=this.getDefaultFilter(n),l=s.selectableFilter,c=l!=null&&l.isSelectable(o)?l.getFilterDef(n,o):o,d=r?this.createHandlerFunc(n,c,this.getDefaultFilter(n)):void 0,h=!!d,u=i.isHandler;if(u!=h){this.destroyFilter(n,"paramsUpdated");return}const{compDetails:f,createFilterUi:p}=(r?this.createFilterComp(n,c,a,A=>A,h,"colDef"):null)??{compDetails:null,createFilterUi:null},m=(f==null?void 0:f.params)??GC(s.userCompFactory,c,this.createFilterCompParams(n,h,"colDef"));if(u){const A=(d==null?void 0:d.handlerNameOrCallback)??(d==null?void 0:d.filterHandler),P=Si(this.model,e);if(i.handlerGenerator!=A){const T=i.handler,{handler:M,handlerParams:N}=this.createHandlerFromFunc(n,d.filterHandler,m);i.handler=M,i.handlerParams=N,i.handlerGenerator=A,delete this.model[e],(v=M.init)==null||v.call(M,{...N,source:"init",model:null}),this.destroyBean(T),P!=null&&((C=this.beans.filterManager)==null||C.onFilterChanged({columns:[n],source:t}))}else{const T=this.createHandlerParams(n,f==null?void 0:f.params);i.handlerParams=T,(S=(w=i.handler).refresh)==null||S.call(w,{...T,source:"colDef",model:P})}}if(this.areFilterCompsDifferent(((y=i.filterUi)==null?void 0:y.compDetails)??null,f)||!i.filterUi||!f){this.destroyFilterUi(i,n,f,p);return}i.filterUi.filterParams=m,(R=ea(i,u))==null||R.then(A=>{(A!=null&&A.refresh?A.refresh(m):!0)===!1?this.destroyFilterUi(i,n,f,p):this.dispatchLocalEvent({type:"filterParamsChanged",column:n,params:m})})}refreshHandlerAndUi(e,t,i,s,n){const o=this.cachedFilter(e);if(!o)return s&&this.getOrCreateFilterWrapper(e,!0),Xt.resolve();if(!o.isHandler)return Xt.resolve();const{filterUi:r,handler:a,handlerParams:l}=o;return OV(()=>{if(r){const{created:c,filterParams:d}=r;if(c)return r.promise.then(h=>h?{filter:h,filterParams:d}:void 0);r.refreshed=!0}return Xt.resolve(void 0)},a,l,t,this.state.get(e.getColId())??{model:t},i,n)}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:s}=t;return!(i===s||(i==null?void 0:i.render)&&(s==null?void 0:s.render)&&i.render===s.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e){const t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);const i=this.getOrCreateFilterUi(t);return i?new Promise(s=>{i.then(n=>{s(Mg(n))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(({model:e,source:t})=>this.setModel(e,t)),this.modelUpdates=[],this.columnModelUpdates.forEach(({key:e,model:t,resolve:i})=>{this.setModelForColumn(e,t).then(()=>i())}),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){const{state:s,model:n}=this,o=e.getColId(),r=s.get(o);return r?r.model??null:Si(n,o)}const i=this.cachedFilter(e);return i?this.getModelFromFilterWrapper(i):null}setModelForColumn(e,t){var i;if((i=this.beans.dataTypeSvc)!=null&&i.isPendingInference){let s=()=>{};const n=new Promise(o=>{s=o});return this.columnModelUpdates.push({key:e,model:t,resolve:s}),n}return new Promise(s=>{this.setModelForColumnLegacy(e,t).then(n=>s(n))})}getStateForColumn(e){return this.state.get(e)??{model:Si(this.model,e)}}setModelForColumnLegacy(e,t){const i=this.beans.colModel.getColDefCol(e),s=i?this.getOrCreateFilterWrapper(i,!0):null;return s?this.setModelOnFilterWrapper(s,t):Xt.resolve()}setColDefPropsForDataType(e,t,i){var d;const s=e.filter,n=s===!0?this.getDefaultFilterFromDataType(()=>t.baseDataType):s;if(typeof n!="string")return;let o,r;const a=this.beans,{filterParams:l,filterValueGetter:c}=e;n==="agMultiColumnFilter"?{filterParams:o,filterValueGetter:r}=((d=a.multiFilter)==null?void 0:d.getParamsForDataType(l,c,t,i))??{}:{filterParams:o,filterValueGetter:r}=$V(n,l,c,t,i,a,this.getLocaleTextFunc()),e.filterParams=o,r&&(e.filterValueGetter=r)}setColFilterActive(e,t,i,s){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",i)),e.dispatchColEvent("filterChanged",i,s)}setModelOnFilterWrapper(e,t,i){return new Xt(s=>{if(e.isHandler){const o=e.column,r=o.getColId(),a=this.model[r];if(this.updateStoredModel(r,t),i&&t===a){s();return}this.refreshHandlerAndUi(o,t,"api").then(()=>s());return}const n=ea(e);if(n){n.then(o=>{if(typeof(o==null?void 0:o.setModel)!="function"){J(65),s();return}(o.setModel(t)||Xt.resolve()).then(()=>s())});return}s()})}updateStoredModel(e,t){fe(t)?this.model[e]=t:delete this.model[e];const i=this.state.get(e),s={model:t,state:i==null?void 0:i.state};this.state.set(e,s)}filterModified(e,t){var i;(i=this.getOrCreateFilterUi(e))==null||i.then(s=>{this.eventSvc.dispatchEvent({type:"filterModified",column:e,filterInstance:s,...t})})}filterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"filterUiChanged",column:e,...t})}floatingFilterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"floatingFilterUiChanged",column:e,...t})}updateModel(e,t,i){var r;const s=e.getColId(),n=this.cachedFilter(e),o=()=>n==null?void 0:n.filterUi;zx(t,o,()=>Si(this.model,s),()=>this.state.get(s),a=>this.updateState(e,a),a=>{var l,c;return(c=(l=o())==null?void 0:l.filterParams)==null?void 0:c.onModelChange(a,i)},n!=null&&n.isHandler?(r=n.handler.processModelToApply)==null?void 0:r.bind(n.handler):void 0)}updateAllModels(e,t){const i=[];this.allColumnFilters.forEach((s,n)=>{var r;const o=this.beans.colModel.getColDefCol(n);o&&zx(e,()=>s.filterUi,()=>Si(this.model,n),()=>this.state.get(n),a=>this.updateState(o,a),a=>{this.updateStoredModel(n,a),this.dispatchLocalEvent({type:"filterAction",column:o,action:e}),i.push(this.refreshHandlerAndUi(o,a,"ui"))},s!=null&&s.isHandler?(r=s.handler.processModelToApply)==null?void 0:r.bind(s.handler):void 0)}),i.length&&Xt.all(i).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:t,columns:[]})})}updateOrRefreshFilterUi(e){const t=e.getColId();tD(()=>{var i;return(i=this.cachedFilter(e))==null?void 0:i.filterUi},()=>Si(this.model,t),()=>this.state.get(t))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:"filterStateChanged",column:e,state:t})}canApplyAll(){const{state:e,model:t,activeFilterComps:i}=this;for(const n of i)if(n.source==="COLUMN_MENU")return!1;let s=!1;for(const n of e.keys()){const o=e.get(n);if(o.valid===!1)return!1;(o.model??null)!==Si(t,n)&&(s=!0)}return s}hasUnappliedModel(e){var s;const{model:t,state:i}=this;return(((s=i.get(e))==null?void 0:s.model)??null)!==Si(t,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:e})}shouldKeepStateOnDetach(e,t){if(t==="newFiltersToolPanel")return!0;const i=this.beans.filterPanelSvc;return i!=null&&i.isActive?!!i.getState(e.getColId()):!1}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}};function lj(e){var t;return!!((t=e.filterManager)!=null&&t.isAnyFilterPresent())}function cj(e,t="api"){var i;(i=e.filterManager)==null||i.onFilterChanged({source:t})}var dj=class extends V{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:s})=>this.onAdvFilterEnabledChanged(s),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:i}=this;this.alwaysPassFilter=i.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=i.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"&&t(e)}setFilterState(e,t,i="api"){var s;this.isAdvFilterEnabled()||(s=this.colFilter)==null||s.setState(e,t,i)}setFilterModel(e,t="api",i){var s;if(this.isAdvFilterEnabled()){i||this.warnAdvFilters();return}(s=this.colFilter)==null||s.setModel(e,t)}getFilterModel(){var e;return((e=this.colFilter)==null?void 0:e.getModel())??{}}getFilterState(){var e;return(e=this.colFilter)==null?void 0:e.getState()}isColumnFilterPresent(){var e;return!!((e=this.colFilter)!=null&&e.isFilterPresent())}isAggregateFilterPresent(){var e;return!!((e=this.colFilter)!=null&&e.isAggFilterPresent())}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){var t,i;e?(t=this.colFilter)!=null&&t.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):(i=this.advancedFilter)!=null&&i.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){var e;return!!((e=this.advancedFilter)!=null&&e.isEnabled())}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){dy(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:i,columns:s=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):Xt.resolve()).then(()=>{var o;const n={source:t,type:"filterChanged",columns:s};i&&fs(n,i),this.eventSvc.dispatchEvent(n),(o=this.colFilter)==null||o.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var e;return!!((e=this.colFilter)!=null&&e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!!((e=this.quickFilter)!=null&&e.isFilterPresent())}updateAggFiltering(){this.aggFiltering=!!dy(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){var i;const{rowNode:t}=e;return(i=this.alwaysPassFilter)!=null&&i.call(this,t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip,!0))}doesRowPassFilter(e){var i;const{rowNode:t}=e;return(i=this.alwaysPassFilter)!=null&&i.call(this,t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterAllowed(e){var t;return this.isAdvFilterEnabled()?!1:!!((t=this.colFilter)!=null&&t.isFilterAllowed(e))}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){var i;if(this.isAdvFilterEnabled()){if((i=this.beans.dataTypeSvc)!=null&&i.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return this.isAdvFilterEnabled()?!1:!!((e=this.colFilter)!=null&&e.hasFloatingFilters())}getColumnFilterInstance(e){var t;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):((t=this.colFilter)==null?void 0:t.getFilterInstance(e))??Promise.resolve(void 0)}warnAdvFilters(){J(68)}setupAdvFilterHeaderComp(e){var t;(t=this.advancedFilter)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){for(const e of this.advFilterModelUpdateQueue)this.setAdvFilterModel(e);this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){var i;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):((i=this.colFilter)==null?void 0:i.setModelForColumn(e,t))??Promise.resolve()}},hj=class extends V{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){var e;(e=this.hidePopup)==null||e.call(this)}showMenuAfterMouseEvent(e,t,i,s){e&&!e.isColumn||this.showPopup(e,n=>{var o;(o=this.popupSvc)==null||o.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:n})},i,t.target,Us(this.gos),s)}showMenuAfterButtonClick(e,t,i,s){if(e&&!e.isColumn)return;let n=-1,o="left";const r=Us(this.gos);!r&&this.gos.get("enableRtl")&&(n=1,o="right");const a=r?void 0:4*n,l=r?void 0:4;this.showPopup(e,c=>{var d;(d=this.popupSvc)==null||d.positionPopupByComponent({type:i,eventSource:t,ePopup:c,nudgeX:a,nudgeY:l,alignSide:o,keepWithinBounds:!0,position:"under",column:e})},i,t,r,s)}showPopup(e,t,i,s,n,o){var m;const r=e?this.createBean(new zV(e,"COLUMN_MENU")):void 0;if(this.activeMenu=r,!(r!=null&&r.hasFilter())||!e){At(57);return}const a=ri({tag:"div",cls:`ag-menu${n?"":" ag-filter-menu"}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(a,{keydown:v=>this.trapFocusWithin(v,a)}),a.appendChild(r==null?void 0:r.getGui());let l;const c=()=>r==null?void 0:r.afterGuiDetached(),d=rG(this.gos)?s??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,h=v=>{Xx(e,!1,"contextMenu");const C=v instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),C&&s&&Wo(s)){const w=NT(s);w==null||w.focus({preventScroll:!0})}c(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e),o==null||o()},u=this.getLocaleTextFunc(),f=n&&i!=="columnFilter"?u("ariaLabelColumnMenu","Column Menu"):u("ariaLabelColumnFilter","Column Filter"),p=(m=this.popupSvc)==null?void 0:m.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:h,positionCallback:()=>t(a),anchorToElement:d,ariaLabel:f});p&&(this.hidePopup=l=p.hideFunc),r.afterInit().then(()=>{t(a),r.afterGuiAttached({container:i,hidePopup:l})}),Xx(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==G.TAB||e.defaultPrevented||ld(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),qc(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},uj=class extends V{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t,i){if(!t)return;const s=e.getColDef(),{selectableFilter:n,valueSvc:o}=this.beans,r=i??(n==null?void 0:n.getFilterValueGetter(e.getColId()))??s.filterValueGetter;return r?this.executeFilterValueGetter(r,t.data,e,t,s):o.getValue(e,t)}executeFilterValueGetter(e,t,i,s,n){const{expressionSvc:o,valueSvc:r}=this.beans,a=Le(this.gos,{data:t,node:s,column:i,colDef:n,getValue:r.getValueCallback.bind(r,s)});return typeof e=="function"?e(a):o==null?void 0:o.evaluate(e,a)}},gj={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},fj=class extends xt{constructor(){super(gj,[aC]),this.eFloatingFilterText=he}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")){const i=e,s=i.getHandler();if(s.getModelAsString){const n=s.getModelAsString(i.model);this.eFloatingFilterText.setValue(n)}}}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}refresh(e){this.init(e)}},o0=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions??t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){const i=e.filterOptions??t;this.filterOptions!==i&&(this.filterOptions=i,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){const{filterOptions:e}=this;if(e)for(const t of e){if(typeof t=="string")continue;const i=[["displayKey"],["displayName"],["predicate","test"]],s=n=>n.some(o=>t[o]!=null)?!0:(J(72,{keys:n}),!1);if(!i.every(s)){this.filterOptions=e.filter(n=>n===t)||[];continue}this.customFilterOptions[t.displayKey]=t}}getDefaultItem(e){const{filterOptions:t}=this;if(e)return e;if(t.length>=1){const i=t[0];if(typeof i=="string")return i;if(i.displayKey)return i.displayKey;J(73)}else J(74)}getCustomOption(e){return this.customFilterOptions[e]}};function fg(e,t,i){return i==null?e.splice(t):e.splice(t,i)}function mv(e){return e==null||typeof e=="string"&&e.trim().length===0}function pj(e){return e==="AND"||e==="OR"?e:"AND"}function mj(e,t,i){if(e==null)return;const{predicate:s}=e;if(s!=null&&!t.some(n=>n==null))return s(t,i)}function vj(e,t){let i=e.length;return i>t&&(e.splice(t),J(78),i=t),i}function Lg(e,t){const i=t.getCustomOption(e);if(i){const{numberOfInputs:n}=i;return n??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}var r0=class extends QV{constructor(e,t,i){super(e,"simple-filter"),this.mapValuesFromModel=t,this.defaultOptions=i,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);const t=new o0;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){this.setNumConditions(e),this.defaultJoinOperator=pj(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions();const t=this.getGui();this.isReadOnly()?t.setAttribute("tabindex","-1"):t.removeAttribute("tabindex")}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{const s=i===0?e:this.optionsFactory.defaultOption;t.setValue(s,!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOrs:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?"OR":"AND"}areNonNullModelsEqual(e,t){const i=!e.operator,s=!t.operator;if(!i&&s||i&&!s)return!1;let o;if(i){const r=e,a=t;o=this.areSimpleModelsEqual(r,a)}else{const r=e,a=t;o=r.operator===a.operator&&cl(r.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return o}setModelIntoUi(e,t){if(e==null)return this.resetUiToDefaults(t),Xt.resolve();if(e.operator){const s=e;let n=s.conditions;n==null&&(n=[],J(77));const o=vj(n,this.maxNumConditions),r=this.getNumConditions();if(o<r)this.removeConditionsAndOperators(o);else if(o>r)for(let l=r;l<o;l++)this.createJoinOperatorPanel(),this.createOption();const a=s.operator==="OR";this.eJoinAnds.forEach(l=>l.setValue(!a,!0)),this.eJoinOrs.forEach(l=>l.setValue(a,!0)),n.forEach((l,c)=>{this.eTypes[c].setValue(l.type,!0),this.setConditionIntoUi(l,c)})}else{const s=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(s.type,!0),this.setConditionIntoUi(s,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),Xt.resolve()}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(J(79),t=1),this.maxNumConditions=t;let i=e.numAlwaysVisibleConditions??1;i<1&&(J(80),i=1),i>t&&(J(81),i=t),this.numAlwaysVisibleConditions=i}createOption(){const e=this.getGui(),t=this.createManagedBean(new BS);this.eTypes.push(t),t.addCss("ag-filter-select"),e.appendChild(t.getGui());const i=this.createEValue();this.eConditionBodies.push(i),e.appendChild(i),this.putOptionsIntoDropdown(t),this.resetType(t);const s=this.getNumConditions()-1;this.forEachPositionInput(s,n=>this.resetInput(n)),this.addChangedListeners(t,s)}createJoinOperatorPanel(){const e=ri({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(e);const t=this.createJoinOperator(this.eJoinAnds,e,"and"),i=this.createJoinOperator(this.eJoinOrs,e,"or");this.getGui().appendChild(e);const s=this.eJoinPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(t,s,n),this.resetJoinOperatorOr(i,s,n),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const s=this.createManagedBean(new PB);e.push(s);const n="ag-filter-condition-operator";return s.addCss(n),s.addCss(`${n}-${i}`),t.appendChild(s.getGui()),s}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;for(const i of t)e.addOption(i);e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const i=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<i){this.removeConditionsAndOperators(i+1);const s=e+1,n=i-s;n>0&&this.removeConditionsAndOperators(s,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((s,n)=>{const o=this.isConditionDisabled(n,e);s.setDisabled(o||this.filterListOptions.length<=1),n===1&&(Eg(this.eJoinPanels[0],o),this.eJoinAnds[0].setDisabled(o),this.eJoinOrs[0].setDisabled(o))}),this.eConditionBodies.forEach((s,n)=>{Ot(s,this.isConditionBodyVisible(n))});const i=(t??this.getJoinOperator())==="OR";for(const s of this.eJoinAnds)s.setValue(!i,!0);for(const s of this.eJoinOrs)s.setValue(i,!0);this.forEachInput((s,n,o,r)=>{this.setElementDisplayed(s,n<r),this.setElementDisabled(s,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:i,eConditionBodies:s,eJoinPanels:n,eJoinAnds:o,eJoinOrs:r}=this;this.removeComponents(i,e,t),this.removeElements(s,e,t),this.removeEValues(e,t);const a=Math.max(e-1,0);this.removeElements(n,a,t),this.removeComponents(o,a,t),this.removeComponents(r,a,t)}removeElements(e,t,i){const s=fg(e,t,i);for(const n of s)jn(n)}removeComponents(e,t,i){const s=fg(e,t,i);for(const n of s)jn(n.getGui()),this.destroyBean(n)}afterGuiAttached(e){var t;if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus)){let i;if(!this.isReadOnly()){const s=this.getInputs(0)[0];s instanceof Fl&&this.isConditionBodyVisible(0)?i=s.getInputElement():i=(t=this.eTypes[0])==null?void 0:t.getFocusableElement()}(i??this.getGui()).focus({preventScroll:!0})}}afterGuiDetached(){var r;super.afterGuiDetached();const e=this.params;if((r=this.beans.colFilter)!=null&&r.shouldKeepStateOnDetach(e.column))return;e.onStateChange({model:e.model});let t=-1,i=-1,s=!1;const n=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))t===-1&&(t=a,i=a);else{const l=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),c=a<t;(l||c)&&(this.removeConditionsAndOperators(a,1),s=!0,c&&i--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(i,n),s&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getModelAsString(e){var t,i;return((i=(t=this.params.getHandler())==null?void 0:t.getModelAsString)==null?void 0:i.call(t,e))??""}getPlaceholderText(e,t){let i=this.translate(e);if(typeof this.filterPlaceholder=="function"){const s=this.eTypes[t].getValue(),n=this.translate(s);i=this.filterPlaceholder({filterOptionKey:s,filterOption:n,placeholder:i})}else typeof this.filterPlaceholder=="string"&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.getLocaleTextFunc();this.forEachInput((t,i,s,n)=>{if(!(t instanceof Fl))return;const o=i===0&&n>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd",r=i===0&&n>1?e("ariaFilterFromValue","Filter from value"):i===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,s)),t.setInputAriaLabel(r)})}setElementValue(e,t,i){e instanceof Fl&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){Mx(e)&&Ot(e.getGui(),t)}setElementDisabled(e,t){Mx(e)&&Eg(e.getGui(),t)}attachElementOnChange(e,t){e instanceof Fl&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const s=Lg(t,this.optionsFactory),n=this.getInputs(e);for(let o=0;o<n.length;o++){const r=n[o];r!=null&&i(r,o,e,s)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return Lg(t,this.optionsFactory)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(i=>i==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinAnds.forEach((t,i)=>this.resetJoinOperatorAnd(t,i,this.joinOperatorId+i)),this.eJoinOrs.forEach((t,i)=>this.resetJoinOperatorOr(t,i,this.joinOperatorId+i)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){const i=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.defaultJoinOperator==="AND",this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.defaultJoinOperator==="OR",this.translate("orCondition"),i)}resetJoinOperator(e,t,i,s,n){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(s),t)}updateJoinOperatorsDisabled(){const e=(t,i)=>this.updateJoinOperatorDisabled(t,i);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput((s,n,o)=>{o===t&&this.setElementValue(s,i[n]!=null?i[n]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,s)=>{this.setElementValue(t,i===0&&s===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,i=>{this.attachElementOnChange(i,this.listener)}))}hasInvalidInputs(){return!1}isReadOnly(){return!!this.params.readOnly}},ZD=class{constructor(e,t,i,s,n,o){this.alive=!0,this.context=e,this.eParent=n;const r=cB(t,i,s);r&&r.newAgStackInstance().then(a=>{var d,h;if(!this.alive){e.destroyBean(a);return}if(this.dateComp=a,!a)return;n.appendChild(a.getGui()),(d=a==null?void 0:a.afterGuiAttached)==null||d.call(a);const{tempValue:l,disabled:c}=this;l&&a.setDate(l),c!=null&&((h=a.setDisabled)==null||h.call(a,c)),o==null||o(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){var i;const t=this.dateComp;t?(i=t.setDisabled)==null||i.call(t,e):this.disabled=e}setDisplayed(e){Ot(this.eParent,e)}setInputPlaceholder(e){var t,i;(i=(t=this.dateComp)==null?void 0:t.setInputPlaceholder)==null||i.call(t,e)}setInputAriaLabel(e){var t,i;(i=(t=this.dateComp)==null?void 0:t.setInputAriaLabel)==null||i.call(t,e)}afterGuiAttached(e){var t,i;(i=(t=this.dateComp)==null?void 0:t.afterGuiAttached)==null||i.call(t,e)}updateParams(e){var t,i;(i=(t=this.dateComp)==null?void 0:t.refresh)==null||i.call(t,e)}},a0=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function eM(e,t){const{dateFrom:i,dateTo:s,type:n}=e||{};return[i&&Ts(i,void 0,!0)||null,s&&Ts(s,void 0,!0)||null].slice(0,Lg(n,t))}var MR=1e3,IR=1/0,Cj=class extends r0{constructor(){super("dateFilter",eM,a0),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=MR,this.maxValidYear=IR,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);const t=(l,c)=>{const d=e[l];if(d!=null)if(isNaN(d))J(82,{param:l});else return d==null?c:Number(d);return c},i=t("minValidYear",MR),s=t("maxValidYear",IR);this.minValidYear=i,this.maxValidYear=s,i>s&&J(83);const{minValidDate:n,maxValidDate:o}=e,r=n instanceof Date?n:Ts(n);this.minValidDate=r;const a=o instanceof Date?o:Ts(o);this.maxValidDate=a,r&&a&&r>a&&J(84)}createDateCompWrapper(e){const{beans:{userCompFactory:t,context:i,gos:s},params:n}=this,o=new ZD(i,t,n.colDef,Le(s,{onDateChanged:()=>this.onUiChanged(),filterParams:n,location:"filter"}),e);return this.addDestroyFunc(()=>o.destroy()),o}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){const e=ri({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,s){const n=ri({tag:"div",cls:`ag-filter-${s} ag-filter-date-${s}`});t.push(n),e.appendChild(n),i.push(this.createDateCompWrapper(n))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),fg(this.eConditionPanelsFrom,e,t),fg(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){const s=fg(e,t,i);for(const n of s)n.destroy()}isValidDateValue(e){if(e===null)return!1;const{minValidDate:t,maxValidDate:i,minValidYear:s,maxValidYear:n}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<s)return!1;if(i){if(e>i)return!1}else if(e.getUTCFullYear()>n)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((i,s,n,o)=>{n!==e||!t||s>=o||(t=t&&this.isValidDateValue(i.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),i={},s=this.getValues(e),n=this.params.useIsoSeparator?"T":" ";return s.length>0&&(i.dateFrom=Ks(s[0],!0,n)),s.length>1&&(i.dateTo=Ks(s[1],!0,n)),{dateFrom:null,dateTo:null,filterType:this.filterType,type:t,...i}}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(s=>{s.setInputPlaceholder(t),s.setInputAriaLabel(i)})}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,s,n,o)=>{s<o&&t.push(i.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}},tM=class extends V{constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){const t=e.filterParams,i=new o0;this.optionsFactory=i,i.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(i,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if(e.source==="colDef"){const t=e.filterParams,i=this.optionsFactory;i.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:i,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){const t=e.model;if(t==null)return!0;const{operator:i}=t,s=[];if(i){const r=t;s.push(...r.conditions??[])}else s.push(t);const n=i&&i==="OR"?"some":"every",o=this.params.getValue(e.node);return s[n](r=>this.individualConditionPasses(e,r,o))}getModelAsString(e,t){return this.filterModelFormatter.getModelAsString(e,t)??""}validateModel(e){const{model:t,filterParams:{filterOptions:i,maxNumConditions:s}}=e;if(t==null)return;let o=nD(t)?t.conditions:[t];const r=(i==null?void 0:i.map(d=>typeof d=="string"?d:d.displayKey))??this.defaultOptions;if(!(!o||o.every(d=>r.find(h=>h===d.type)!==void 0))){this.params={...e,model:null},e.onModelChange(null);return}let l=!1;const c=this.filterType;if((o&&!o.every(d=>d.filterType===c)||t.filterType!==c)&&(o=o.map(d=>({...d,filterType:c})),l=!0),typeof s=="number"&&o&&o.length>s&&(o=o.slice(0,s),l=!0),l){const d=o.length>1?{...t,filterType:c,conditions:o}:{...o[0],filterType:c};this.params={...e,model:d},e.onModelChange(d)}}individualConditionPasses(e,t,i){const s=this.optionsFactory,n=this.mapValuesFromModel(t,s),o=s.getCustomOption(t.type),r=mj(o,n,i);return r??(i==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(n,i,t,e))}},iM=class extends tM{evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:i,includeBlanksInGreaterThan:s,includeBlanksInLessThan:n,includeBlanksInRange:o}=this.params.filterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(i)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(s)return!0;break;case"lessThan":case"lessThanOrEqual":if(n)return!0;break;case"inRange":if(o)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const s=i.type;if(!this.isValid(t))return s==="notEqual"||s==="notBlank";const n=this.comparator(),o=e[0]!=null?n(e[0],t):0;switch(s){case"equals":return o===0;case"notEqual":return o!==0;case"greaterThan":return o>0;case"greaterThanOrEqual":return o>=0;case"lessThan":return o<0;case"lessThanOrEqual":return o<=0;case"inRange":{const r=n(e[1],t);return this.params.filterParams.inRangeInclusive?o>=0&&r<=0:o>0&&r<0}case"blank":return mv(t);case"notBlank":return!mv(t);default:return J(76,{filterModelType:s}),!0}}},sM={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},wj={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},l0=class extends V{constructor(e,t,i){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=i}getModelAsString(e,t){const i=this.getLocaleTextFunc(),s=t==="filterToolPanel";if(!e)return s?ha(this,"filterSummaryInactive"):null;if(e.operator!=null){const o=e,a=(o.conditions??[]).map(c=>this.getModelAsString(c,t)),l=o.operator==="AND"?"andCondition":"orCondition";return a.join(` ${ha(this,l)} `)}else{if(e.type==="blank"||e.type==="notBlank")return s?ha(this,e.type==="blank"?"filterSummaryBlank":"filterSummaryNotBlank"):i(e.type,e.type);{const o=e,r=this.optionsFactory.getCustomOption(o.type),{displayKey:a,displayName:l,numberOfInputs:c}=r||{};return a&&l&&c===0?i(a,l):this.conditionToString(o,s,o.type==="inRange"||c===2,a,l)}}}updateParams(e){const{optionsFactory:t,filterParams:i}=e;this.optionsFactory=t,this.filterParams=i}conditionForToolPanel(e,t,i,s,n,o){let r;const a=this.getTypeKey(e);return a&&(r=ha(this,a)),n&&o&&(r=this.getLocaleTextFunc()(n,o)),r!=null?t?`${r} ${ha(this,"filterSummaryInRangeValues",[i(),s()])}`:`${r} ${i()}`:null}getTypeKey(e){const t=this.filterTypeKeys[e];return t?`filterSummary${t}`:null}formatValue(e){const t=this.valueFormatter;return t?t(e??null)??"":String(e)}},nM=class extends l0{constructor(e,t){super(e,t,i=>{const{dataTypeSvc:s,valueSvc:n}=this.beans,o=t.column,r=s==null?void 0:s.getDateFormatterFunction(o),a=r?r(i??void 0):i;return n.formatValue(o,null,a)}),this.filterTypeKeys=sM}conditionToString(e,t,i,s,n){const{type:o}=e,r=Ts(e.dateFrom),a=Ts(e.dateTo),l=this.filterParams.inRangeFloatingFilterDateFormat,c=t?this.formatValue.bind(this):u=>my(u,l),d=()=>r!==null?c(r):"null",h=()=>a!==null?c(a):"null";if(t){const u=this.conditionForToolPanel(o,i,d,h,s,n);if(u!=null)return u}return i?`${d()}-${h()}`:r!=null?c(r):`${o}`}};function bj(e,t){const i=t;return i<e?-1:i>e?1:0}var yj=class extends iM{constructor(){super(eM,a0),this.filterType="date",this.FilterModelFormatterClass=nM}comparator(){return this.params.filterParams.comparator??bj}isValid(e){const t=this.params.filterParams.isValidDate;return!t||t(e)}},oM=class extends xt{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}const t=e.operator;let i;t?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const i=e;return this.isTypeEditable(i.type)}init(e){this.params=e;const t=this.gos.get("enableFilterHandlers");if(this.reactive=t,this.setParams(e),t){const i=e;this.onModelUpdated(i.model)}}setParams(e){const t=new o0;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){const i=this.optionsFactory.defaultOption;t||(this.lastType=i),this.readOnly=!!e.filterParams.readOnly;const s=this.isTypeEditable(i);this.setEditable(s)}refresh(e){this.params=e;const t=e,i=this.reactive;if((!i||t.source==="colDef")&&this.updateParams(e),i){const{source:s,model:n}=t;if(s==="dataChanged"||s==="ui")return;this.onModelUpdated(n)}}updateParams(e){const t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){t!=null&&t.afterFloatingFilter||t!=null&&t.afterDataChange||this.onModelUpdated(e)}hasSingleInput(e){var i;const t=(i=this.optionsFactory.getCustomOption(e))==null?void 0:i.numberOfInputs;return t==null||t==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.readOnly&&this.hasSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},Sj={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},xj=class extends oM{constructor(){super(Sj,[aC]),this.eReadOnlyText=he,this.eDateWrapper=he,this.FilterModelFormatterClass=nM,this.filterType="date",this.defaultOptions=a0}setParams(e){super.setParams(e),this.createDateComponent();const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const i=e?Ts(e.dateFrom):null;this.dateComp.setDate(i),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Ot(this.eDateWrapper,e),Ot(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){const e=this.dateComp.getDate();if(this.reactive){const t=this.params;t.onUiChange();const i=t.model,s=Ks(e),n=s==null?null:{...i??{filterType:this.filterType,type:this.lastType??this.optionsFactory.defaultOption},dateFrom:s};t.onModelChange(n,{afterFloatingFilter:!0})}else this.params.parentFilterInstance(t=>{t==null||t.onFloatingFilterChanged(this.lastType||null,e)})}getDateComponentParams(){const{filterParams:e}=this.params,t=US(e,this.defaultDebounceMs);return Le(this.gos,{onDateChanged:Vi(this,this.onDateChanged.bind(this),t),filterParams:e,location:"floatingFilter"})}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:i,params:s}=this;this.dateComp=new ZD(e,t,s.column.getColDef(),this.getDateComponentParams(),i,n=>{n.setInputAriaLabel(this.getAriaLabel(s))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},Rj={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},Ej=class extends xt{constructor(){super(Rj,[aC]),this.eDateInput=he,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){var u;const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&dl();const{minValidYear:s,maxValidYear:n,minValidDate:o,maxValidDate:r,buttons:a,includeTime:l,colDef:c}=e.filterParams||{},d=this.beans.dataTypeSvc,h=l??((u=d==null?void 0:d.getDateIncludesTimeFlag)==null?void 0:u.call(d,c.cellDataType))??!1;if(i?h?(t.type="datetime-local",t.step="1"):t.type="date":t.type="text",o&&s&&J(85),r&&n&&J(86),o&&r){const[f,p]=[o,r].map(m=>m instanceof Date?m:Ts(m));f&&p&&f.getTime()>p.getTime()&&J(87)}o?o instanceof Date?t.min=my(o):t.min=o:s&&(t.min=`${s}-01-01`),r?r instanceof Date?t.max=my(r):t.max=r:n&&(t.max=`${n}-12-31`),this.isApply=e.location==="floatingFilter"&&!!(a!=null&&a.includes("apply"))}refresh(e){this.params=e,this.setParams(e)}getDate(){return Ts(this.eDateInput.getValue())}setDate(e){var s;const t=this.params.filterParams.colDef.cellDataType,i=((s=this.beans.dataTypeSvc)==null?void 0:s.getDateIncludesTimeFlag(t))??!1;this.eDateInput.setValue(Ks(e,i))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e!=null&&e.suppressFocus||this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){var t;return((t=e==null?void 0:e.filterParams)==null?void 0:t.browserDatePicker)??!0}},c0=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function _y(e){const{allowedCharPattern:t}=e??{};return t??null}function Ly(e){return e==null||isNaN(e)?null:e}function rM(e,t){const{filter:i,filterTo:s,type:n}=e||{};return[Ly(i),Ly(s)].slice(0,Lg(n,t))}var Aj=class extends r0{constructor(){super("numberFilter",rM,c0),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}setElementValue(e,t,i){const{numberFormatter:s}=this.params,n=!i&&s?s(t??null):t;super.setElementValue(e,n)}createEValue(){const e=_y(this.params),t=ri({tag:"div",cls:"ag-filter-body",role:"presentation"});return this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,s){const n=this.createManagedBean(s?new cd({allowedCharPattern:s}):new GS);n.addCss(`ag-filter-${i}`),n.addCss("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeEValues(e,t){const i=s=>this.removeComponents(s,e,t);i(this.eValuesFrom),i(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,(i,s,n,o)=>{s<o&&t.push(Ly(this.stringToFloat(i.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}stringToFloat(e){if(typeof e=="number")return e;let t=Lr(e);t!=null&&t.trim()===""&&(t=null);const i=this.params.numberParser;return i?i(t):t==null||t.trim()==="-"?null:Number.parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},s=this.getValues(e);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{t.getInputElement().validity.valid||(e=!0)}),e}},aM=class extends l0{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=sM}conditionToString(e,t,i,s,n){const{filter:o,filterTo:r,type:a}=e,l=this.formatValue.bind(this);if(t){const c=this.conditionForToolPanel(a,i,()=>l(o),()=>l(r),s,n);if(c!=null)return c}return i?`${l(o)}-${l(r)}`:o!=null?l(o):`${a}`}},Fj=class extends iM{constructor(){super(rM,c0),this.filterType="number",this.FilterModelFormatterClass=aM}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}},lM=class extends V{constructor(e){super(),this.params=e,this.eInput=he,this.onValueChanged=()=>{}}setupGui(e){var s;this.eInput=this.createManagedBean(new cd((s=this.params)==null?void 0:s.config));const t=this.eInput.getGui();e.appendChild(t);const i=n=>this.onValueChanged(n);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t}){const{eInput:i}=this;i.setInputAriaLabel(e),t!==void 0&&i.setAutoComplete(t)}};function Oy(e){const t=e==null?void 0:e.trim();return t===""?e:t}function cM(e,t){const{filter:i,filterTo:s,type:n}=e||{};return[i||null,s||null].slice(0,Lg(n,t))}var Pj={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},dM=class extends oM{constructor(){super(...arguments),this.eFloatingFilterInputContainer=he,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(Pj)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){const t=e.browserAutoComplete??!1,{inputSvc:i,defaultDebounceMs:s,readOnly:n}=this;if(i.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=cC(e.filterParams),!n){const o=US(e.filterParams,s),r=Vi(this,this.syncUpWithParentFilter.bind(this),o);i.setValueChangedListener(r)}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,i=t.getValue();Wi(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(i,!0)}syncUpWithParentFilter(e){const t=e.key===G.ENTER,i=this.reactive;if(i&&this.params.onUiChange(),this.applyActive&&!t)return;const{inputSvc:s,params:n,lastType:o}=this;let r=s.getValue();if(n.filterParams.trimInput&&(r=Oy(r),s.setValue(r,!0)),i){const a=n,l=a.model,c=this.convertValue(r),d=c==null?null:{...l??{filterType:this.filterType,type:o??this.optionsFactory.defaultOption},filter:c};a.onModelChange(d,{afterFloatingFilter:!0})}else n.parentFilterInstance(a=>{a==null||a.onFloatingFilterChanged(o||null,r||null)})}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},Tj=class extends V{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new GS),this.eTextInput=this.createManagedBean(new cd),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),i=this.eTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,s=>this.onValueChanged(s)),this.setupListeners(i,s=>this.onValueChanged(s))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},Dj=class extends dM{constructor(){super(...arguments),this.FilterModelFormatterClass=aM,this.filterType="number",this.defaultOptions=c0}updateParams(e){_y(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return this.allowedCharPattern=_y(e.filterParams),this.allowedCharPattern?this.createManagedBean(new lM({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new Tj)}convertValue(e){return e?Number(e):null}},d0=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],Mj=class extends r0{constructor(){super("textFilter",cM,d0),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},s=this.getValues(e);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,s,n,o)=>{s<o&&t.push(Lr(i.getValue()))}),t}createEValue(){const e=ri({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:t,eValuesTo:i}=this;return this.createFromToElement(e,t,"from"),this.createFromToElement(e,i,"to"),e}createFromToElement(e,t,i){const s=this.createManagedBean(new cd);s.addCss(`ag-filter-${i}`),s.addCss("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeEValues(e,t){const i=o=>this.removeComponents(o,e,t),{eValuesFrom:s,eValuesTo:n}=this;i(s),i(n)}},hM=class extends l0{constructor(){super(...arguments),this.filterTypeKeys=wj}conditionToString(e,t,i,s,n){const{filter:o,filterTo:r,type:a}=e;if(t){const l=d=>()=>ha(this,"filterSummaryTextQuote",[d]),c=this.conditionForToolPanel(a,i,l(o),l(r),s,n);if(c!=null)return c}return i?`${o}-${r}`:o!=null?`${o}`:`${a}`}},Ij=({filterOption:e,value:t,filterText:i})=>{if(i==null)return!1;switch(e){case"contains":return t.includes(i);case"notContains":return!t.includes(i);case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return t.indexOf(i)===0;case"endsWith":{const s=t.lastIndexOf(i);return s>=0&&s===t.length-i.length}default:return!1}},kj=e=>e,_j=e=>e==null?null:e.toString().toLowerCase(),Lj=class extends tM{constructor(){super(cM,d0),this.filterType="text",this.FilterModelFormatterClass=hM}updateParams(e){super.updateParams(e);const t=e.filterParams;this.matcher=t.textMatcher??Ij,this.formatter=t.textFormatter??(t.caseSensitive?kj:_j)}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,i,s){const n=e.map(u=>this.formatter(u))||[],o=this.formatter(t),{api:r,colDef:a,column:l,context:c,filterParams:{textFormatter:d}}=this.params;if(i.type==="blank")return mv(t);if(i.type==="notBlank")return!mv(t);const h={api:r,colDef:a,column:l,context:c,node:s.node,data:s.data,filterOption:i.type,value:o,textFormatter:d};return n.some(u=>this.matcher({...h,filterText:u}))}processModelToApply(e){if(e&&this.params.filterParams.trimInput){const t=i=>{const s={...i},{filter:n,filterTo:o}=i;return n&&(s.filter=Oy(n)??null),o&&(s.filterTo=Oy(o)??null),s};return nD(e)?{...e,conditions:e.conditions.map(t)}:t(e)}return e}},Oj=class extends dM{constructor(){super(...arguments),this.FilterModelFormatterClass=hM,this.filterType="text",this.defaultOptions=d0}createFloatingFilterInputService(){return this.createManagedBean(new lM)}};function Nj(e){var t;return!!((t=e.quickFilter)!=null&&t.isFilterPresent())}function Hj(e){var t;return(t=e.quickFilter)==null?void 0:t.getText()}function Gj(e){var t;(t=e.quickFilter)==null||t.resetCache()}var Bj=class extends V{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",i=>this.setFilter(i.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){var l;const{autoColSvc:e,colModel:t,gos:i,pivotResultCols:s}=this.beans,n=t.isPivotMode(),o=e==null?void 0:e.getColumns(),r=t.getColDefCols();let a=(n&&!i.get("applyQuickFilterBeforePivotOrAgg")?(l=s==null?void 0:s.getPivotResultCols())==null?void 0:l.list:r)??[];o&&(a=a.concat(o)),this.colsToUse=i.get("includeHiddenColumnsInQuickFilter")?a:a.filter(c=>c.isVisible()||c.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassCache(e,i):this.doesRowPassNoCache(e,i))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseFilter(e){return fe(e)?e.toUpperCase():null}setFilter(e){if(e!=null&&typeof e!="string"){J(70,{newFilter:e});return}const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(i=>{const s=this.getTextForColumn(i,e);return fe(s)&&s.includes(t)})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.includes(t)}doesRowPassMatcher(e,t){let i;e?(this.checkGenerateAggText(t),i=t.quickFilterAggregateText):i=this.getAggText(t);const{quickFilterParts:s,matcher:n}=this;return n(s,i)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let i=this.beans.filterValueSvc.getValue(e,t);const s=e.getColDef();if(s.getQuickFilterText){const n=Le(this.gos,{value:i,node:t,data:t.data,column:e,colDef:s});i=s.getQuickFilterText(n)}return fe(i)?i.toString().toUpperCase():null}getAggText(e){const t=[];for(const i of this.colsToUse){const s=this.getTextForColumn(i,e);fe(s)&&t.push(s)}return t.join(`
`)}},Vj={moduleName:"ClientSideRowModelFilter",version:ue,rowModels:["clientSide"],beans:[z6]},h0={moduleName:"FilterCore",version:ue,beans:[dj],apiFunctions:{isAnyFilterPresent:lj,onFilterChanged:cj},css:[q6],dependsOn:[Vj]},uM={moduleName:"FilterValue",version:ue,beans:[uj]},fC={moduleName:"ColumnFilter",version:ue,beans:[aj,hj],dynamicBeans:{headerFilterCellCtrl:W6},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:Y6,getColumnFilterInstance:X6,destroyFilter:Q6,setFilterModel:J6,getFilterModel:Z6,getColumnFilterModel:ej,setColumnFilterModel:tj,showColumnFilter:ij,hideColumnFilter:sj,getColumnFilterHandler:nj,doFilterAction:oj},dependsOn:[h0,gC,uM,j6]},zj={moduleName:"CustomFilter",version:ue,userComponents:{agReadOnlyFloatingFilter:fj},dependsOn:[fC]},Wj={moduleName:"TextFilter",version:ue,dependsOn:[fC],userComponents:{agTextColumnFilter:{classImp:Mj,params:{useForm:!0}},agTextColumnFloatingFilter:Oj},dynamicBeans:{agTextColumnFilterHandler:Lj}},$j={moduleName:"NumberFilter",version:ue,dependsOn:[fC],userComponents:{agNumberColumnFilter:{classImp:Aj,params:{useForm:!0}},agNumberColumnFloatingFilter:Dj},dynamicBeans:{agNumberColumnFilterHandler:Fj}},Uj={moduleName:"DateFilter",version:ue,dependsOn:[fC],userComponents:{agDateColumnFilter:{classImp:Cj,params:{useForm:!0}},agDateInput:Ej,agDateColumnFloatingFilter:xj},dynamicBeans:{agDateColumnFilterHandler:yj}},jj={moduleName:"QuickFilterCore",version:ue,rowModels:["clientSide"],beans:[Bj],dependsOn:[h0,uM]},Kj={moduleName:"QuickFilter",version:ue,apiFunctions:{isQuickFilterPresent:Nj,getQuickFilter:Hj,resetQuickFilter:Gj},dependsOn:[jj]},qj={moduleName:"ExternalFilter",version:ue,dependsOn:[h0]},Yj=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",pw=(e,t,i)=>{var a,l,c;const{editModelSvc:s}=e,n=(l=(a=s==null?void 0:s.getCellValidationModel())==null?void 0:a.getCellValidation(t))==null?void 0:l.errorMessages,o=(c=s==null?void 0:s.getRowValidationModel().getRowValidation(t))==null?void 0:c.errorMessages,r=n||o;return r!=null&&r.length?r.join(i("tooltipValidationErrorSeparator",". ")):void 0},Xj=class extends V{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,i,s){e&&t.destroyBean(e);const n=this.gos,o=fw(n),{column:r,eGui:a}=t,l=r.getColDef();!s&&o&&!l.headerComponent&&(s=Em(()=>a.querySelector(".ag-header-cell-text")));const c="header",h=this.beans.colNames.getDisplayNameForColumn(r,"header",!0),u=i??h,f={getGui:()=>a,getLocation:()=>c,getTooltipValue:()=>{var m;return i??((m=l==null?void 0:l.headerTooltipValueGetter)==null?void 0:m.call(l,Le(n,{location:c,colDef:l,column:r,value:u,valueFormatted:h})))??(l==null?void 0:l.headerTooltip)},shouldDisplayTooltip:s,getAdditionalParams:()=>({column:r,colDef:r.getColDef()})};let p=this.createTooltipFeature(f);return p&&(p=t.createBean(p),t.setRefreshFunction("tooltip",()=>p.refreshTooltip())),p}setupHeaderGroupTooltip(e,t,i,s){e&&t.destroyBean(e);const n=this.gos,o=fw(n),{column:r,eGui:a}=t,l=r.getColGroupDef();!s&&o&&!(l!=null&&l.headerGroupComponent)&&(s=Em(()=>a.querySelector(".ag-header-group-text")));const c="headerGroup",h=this.beans.colNames.getDisplayNameForColumnGroup(r,"header"),u=i??h,f={getGui:()=>a,getLocation:()=>c,getTooltipValue:()=>{var m;return i??((m=l==null?void 0:l.headerTooltipValueGetter)==null?void 0:m.call(l,Le(n,{location:c,colDef:l,column:r,value:u,valueFormatted:h})))??(l==null?void 0:l.headerTooltip)},shouldDisplayTooltip:s,getAdditionalParams:()=>{const m={column:r};return l&&(m.colDef=l),m}},p=this.createTooltipFeature(f);return p&&t.createBean(p)}enableCellTooltipFeature(e,t,i){const{beans:s}=this,{gos:n,editSvc:o}=s,{column:r,rowNode:a}=e;let l="cell";const c=()=>{const f=!!!(o!=null&&o.isEditing(e))&&pw(s,e,this.getLocaleTextFunc());if(f)return l="cellEditor",f;l="cell";const p=r.getColDef(),m=a.data;if(p.tooltipField&&fe(m))return ug(m,p.tooltipField,r.isTooltipFieldContainsDots());const v=p.tooltipValueGetter;return v?v(Le(n,{location:"cell",colDef:r.getColDef(),column:r,rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,value:e.value,valueFormatted:e.valueFormatted})):null},d=fw(n);i||(d&&!e.isCellRenderer()?i=()=>{const u=!!(o!=null&&o.isEditing(e));if(!u&&pw(s,e,this.getLocaleTextFunc()))return!0;if(!r.isTooltipEnabled())return!1;const m=Em(()=>{const v=e.eGui;return v.children.length===0?v:v.querySelector(".ag-cell-value")});return!u&&m()}:i=()=>!(o!=null&&o.isEditing(e)));const h={getGui:()=>e.eGui,getLocation:()=>l,getTooltipValue:t!=null?()=>t:c,shouldDisplayTooltip:i,getAdditionalParams:()=>({column:r,colDef:r.getColDef(),rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,valueFormatted:e.valueFormatted})};return this.createTooltipFeature(h,s)}setupFullWidthRowTooltip(e,t,i,s){const n={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>i,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:s},o=this.beans,r=o.context;e&&t.destroyBean(e,r);const a=this.createTooltipFeature(n,o);if(a)return t.createBean(a,r)}setupCellEditorTooltip(e,t){var a,l;const{beans:i}=this,{context:s}=i,n=((a=t.getValidationElement)==null?void 0:a.call(t,!0))||!((l=t.isPopup)!=null&&l.call(t))&&e.eGui;if(!n)return;const o={getGui:()=>n,getTooltipValue:()=>pw(i,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{var p,m;const{editModelSvc:c}=i,d=(p=c==null?void 0:c.getRowValidationModel())==null?void 0:p.getRowValidationMap(),h=(m=c==null?void 0:c.getCellValidationModel())==null?void 0:m.getCellValidationMap(),u=!!d&&d.size>0,f=!!h&&h.size>0;return u||f}},r=this.createTooltipFeature(o,i);if(r)return e.createBean(r,s)}initCol(e){const{colDef:t}=e;e.tooltipEnabled=fe(t.tooltipField)||fe(t.tooltipValueGetter)||fe(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}},Qj=class extends bV{createTooltipComp(e,t){const i=uB(this.beans.userCompFactory,e);i==null||i.newAgStackInstance().then(t)}setEventHandlers(e){[this.onColumnMovedEventCallback]=this.addManagedEventListeners({columnMoved:e})}clearEventHandlers(){var e;(e=this.onColumnMovedEventCallback)==null||e.call(this),this.onColumnMovedEventCallback=void 0}},gM={moduleName:"Tooltip",version:ue,beans:[Xj],dynamicBeans:{tooltipFeature:qT,highlightTooltipFeature:yV,tooltipStateManager:Qj},userComponents:{agTooltipComponent:RV},dependsOn:[gC],css:[Yj]},Ed=class{constructor(e){this.cellValueChanges=e}},mw=class extends Ed{constructor(e,t,i,s){super(e),this.initialRange=t,this.finalRange=i,this.ranges=s}},Jj=10,kR=class{constructor(e){this.actionStack=[],this.maxStackSize=e||Jj,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},Zj=class extends V{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&RD(this.activeCellEdit,t),s=this.activeRowEdit!==null&&y$(this.activeRowEdit,t);if(!(i||s||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:r,column:a,oldValue:l,value:c}=e,d={rowPinned:o,rowIndex:r,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(d)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const i=e.get("undoRedoCellEditingLimit");if(i<=0)return;this.undoStack=new kR(i),this.redoStack=new kR(i),this.addListeners();const s=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:n=>{n.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:s,newColumnsLoaded:s,columnGroupOpened:s,columnRowGroupChanged:s,columnMoved:s,columnPinned:s,columnVisible:s,rowDragEnd:s}),t.whenReady(this,n=>{this.gridBodyCtrl=n.gridBodyCtrl})}getCurrentUndoStackSize(){var e;return((e=this.undoStack)==null?void 0:e.getCurrentStackSize())??0}getCurrentRedoStackSize(){var e;return((e=this.redoStack)==null?void 0:e.getCurrentStackSize())??0}undo(e){const{eventSvc:t,undoStack:i,redoStack:s}=this;t.dispatchEvent({type:"undoStarted",source:e});const n=this.undoRedo(i,s,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:n})}redo(e){const{eventSvc:t,undoStack:i,redoStack:s}=this;t.dispatchEvent({type:"redoStarted",source:e});const n=this.undoRedo(s,i,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:n})}undoRedo(e,t,i,s,n){if(!e)return!1;const o=e.pop();return o!=null&&o.cellValueChanges?(this.processAction(o,r=>r[s],n),o instanceof mw?this.processRange(o.ranges||[o[i]]):this.processCell(o.cellValueChanges),t.push(o),!0):!1}processAction(e,t,i){for(const s of e.cellValueChanges){const{rowIndex:n,rowPinned:o,columnId:r}=s,a={rowIndex:n,rowPinned:o},l=Ur(this.beans,a);l.displayed&&l.setDataValue(r,t(s),i)}}processRange(e){let t;const i=this.beans.rangeSvc;i.removeAllCellRanges(!0),e.forEach((s,n)=>{if(!s)return;const o=s.startRow,r=s.endRow;n===e.length-1&&(t={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(t));const a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:s.startColumn,columns:s.columns};i.addCellRange(a)})}processCell(e){const t=e[0],{rowIndex:i,rowPinned:s}=t,n={rowIndex:i,rowPinned:s},o=Ur(this.beans,n),r={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(r)}setLastFocusedCell(e){const{rowIndex:t,columnId:i,rowPinned:s}=e,{colModel:n,focusSvc:o,rangeSvc:r}=this.beans,a=n.getCol(i);if(!a)return;const{scrollFeature:l}=this.gridBodyCtrl;l.ensureIndexVisible(t),l.ensureColumnVisible(a);const c={rowIndex:t,column:a,rowPinned:s};o.setFocusedCell({...c,forceBrowserFocus:!0}),r==null||r.setRangeToCell(c)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new Ed(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const i=new Ed(this.cellValueChanges);this.pushActionsToUndoStack(i)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new Ed(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new mw(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:i}=this.beans;t&&$r(i)?e=new mw(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):e=new Ed(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:({changes:e})=>this.stopBigChange("batchEditing",e),bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:({changes:e})=>this.stopBigChange("bulkEditing",e)})}startBigChange(e){this.updateBigChange(e,!0)}updateBigChange(e,t){e==="bulkEditing"?this.bulkEditing=t:this.batchEditing=t}stopBigChange(e,t){if(e==="bulkEditing"&&!this.bulkEditing||e==="batchEditing"&&!this.batchEditing||(this.updateBigChange(e,!1),(t==null?void 0:t.length)===0))return;const i=new Ed(t??[]);this.pushActionsToUndoStack(i),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},e8=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{display:block;height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}",t8={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]},i8=class extends hC{constructor(){super(t8,[HS]),this.eEditor=he}initialiseEditor(e){const t=e.value??void 0,i=this.eEditor;i.setValue(t),i.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(i,{fieldValueChanged:n=>this.setAriaLabel(n.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),i=oC(t,e),s=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel(`${s} (${i})`)}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{getValidationErrors:t}=e,i=this.getValue();return t?t({value:i,internalErrors:null,cellEditorParams:e}):null}},pC=class extends hC{constructor(e){super(),this.cellEditorInput=e,this.eEditor=he}initialiseEditor(e){const{cellEditorInput:t}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[t.getTemplate()]},t.getAgComponents());const{eEditor:i}=this,{cellStartedEdit:s,eventKey:n,suppressPreventDefault:o}=e;i.getInputElement().setAttribute("title",""),t.init(i,e);let r,a=!0;s?(this.focusAfterAttached=!0,n===G.BACKSPACE||n===G.DELETE?r="":n&&n.length===1?o?a=!1:r=n:(r=t.getStartValue(),n!==G.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,r=t.getStartValue()),a&&r!=null&&i.setStartValue(r),this.addGuiEventListener("keydown",l=>{const{key:c}=l;(c===G.PAGE_UP||c===G.PAGE_DOWN)&&l.preventDefault()})}afterGuiAttached(){var s,n;const e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;dl()||t.getFocusableElement().focus();const i=t.getInputElement();this.highlightAllOnFocus?i.select():(n=(s=this.cellEditorInput).setCaret)==null||n.call(s)}focusIn(){const{eEditor:e}=this,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},s8={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},n8=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return s8}getAgComponents(){return[GT]}init(e,t){var r,a;this.eEditor=e,this.params=t;const{min:i,max:s,step:n,colDef:o}=t;i!=null&&e.setMin(i),s!=null&&e.setMax(s),n!=null&&e.setStep(n),this.includeTime=t.includeTime??((a=(r=this.getDataTypeService())==null?void 0:r.getDateIncludesTimeFlag)==null?void 0:a.call(r,o.cellDataType)),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const t=this.eEditor.getInputElement().valueAsDate,{params:i}=this,{min:s,max:n,getValidationErrors:o}=i;let r=[];const a=this.getLocaleTextFunc();if(t instanceof Date&&!isNaN(t.getTime())){if(s){const l=s instanceof Date?s:new Date(s);if(t<l){const c=l.toLocaleDateString();r.push(a("minDateValidation",`Date must be after ${c}`,[c]))}}if(n){const l=n instanceof Date?n:new Date(n);if(t>l){const c=l.toLocaleDateString();r.push(a("maxDateValidation",`Date must be before ${c}`,[c]))}}}return r.length||(r=null),o?o({value:t,cellEditorParams:i,internalErrors:r}):r}getValue(){const{eEditor:e,params:t}=this,i=e.getDate();return!fe(i)&&!fe(t.value)?t.value:i??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Ks(e,this.includeTime??!1)}},o8=class extends pC{constructor(){super(new n8(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},r8={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},a8=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return r8}getAgComponents(){return[GT]}init(e,t){var r,a;this.eEditor=e,this.params=t;const{min:i,max:s,step:n,colDef:o}=t;i!=null&&e.setMin(i),s!=null&&e.setMax(s),n!=null&&e.setStep(n),this.includeTime=t.includeTime??((a=(r=this.getDataTypeService())==null?void 0:r.getDateIncludesTimeFlag)==null?void 0:a.call(r,o.cellDataType)),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const{eEditor:e,params:t}=this,i=e.getInputElement().value,s=this.formatDate(this.parseDate(i??void 0)),{min:n,max:o,getValidationErrors:r}=t;let a=[];if(s){const l=new Date(s),c=this.getLocaleTextFunc();if(n){const d=new Date(n);if(l<d){const h=d.toLocaleDateString();a.push(c("minDateValidation",`Date must be after ${h}`,[h]))}}if(o){const d=new Date(o);if(l>d){const h=d.toLocaleDateString();a.push(c("maxDateValidation",`Date must be before ${h}`,[h]))}}}return a.length||(a=null),r?r({value:this.getValue(),cellEditorParams:t,internalErrors:a}):a}getValue(){const{params:e,eEditor:t}=this,i=this.formatDate(t.getDate());return!fe(i)&&!fe(e.value)?e.value:e.parseValue(i??"")}getStartValue(){return Ks(this.parseDate(this.params.value??void 0)??null,this.includeTime??!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Ts(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Ks(e??null,this.includeTime??!1)??void 0}},l8=class extends pC{constructor(){super(new a8(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},c8={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]},d8=class extends hC{constructor(){super(c8,[DB]),this.eEditor=he}initialiseEditor(e){const{eEditor:t}=this,{cellStartedEdit:i,eventKey:s,maxLength:n,cols:o,rows:r}=e;this.focusAfterAttached=i,t.getInputElement().setAttribute("title",""),t.setMaxLength(n||200).setCols(o||60).setRows(r||10);let a;i?(this.focusAfterAttached=!0,s===G.BACKSPACE||s===G.DELETE?a="":s&&s.length===1?a=s:(a=this.getStartValue(e),s!==G.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,a=this.getStartValue(e)),a!=null&&t.setValue(a,!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}getStartValue(e){const{value:t}=e;return(t==null?void 0:t.toString())??t}onKeyDown(e){const t=e.key;(t===G.LEFT||t===G.UP||t===G.RIGHT||t===G.DOWN||e.shiftKey&&t===G.ENTER)&&e.stopPropagation()}afterGuiAttached(){const{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:i}=this,s=this.getLocaleTextFunc();e.setInputAriaLabel(s("ariaInputEditor","Input Editor")),t&&(e.getFocusableElement().focus(),i&&e.getInputElement().select())}getValue(){const{eEditor:e,params:t}=this,{value:i}=t,s=e.getValue();return!fe(s)&&!fe(i)?i:t.parseValue(s)}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:i}=e,s=this.getLocaleTextFunc(),n=this.getValue();let o=[];return typeof n=="string"&&t!=null&&n.length>t&&o.push(s("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),i?i({value:n,internalErrors:o,cellEditorParams:e}):o}},h8={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"},u8=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return h8}getAgComponents(){return[MB]}init(e,t){this.eEditor=e,this.params=t;const{max:i,min:s,precision:n,step:o}=t;i!=null&&e.setMax(i),s!=null&&e.setMin(s),n!=null&&e.setPrecision(n),o!=null&&e.setStep(o);const r=e.getInputElement();t.preventStepping?e.addManagedElementListeners(r,{keydown:this.preventStepping}):t.showStepperButtons&&r.classList.add("ag-number-field-input-stepper")}getValidationErrors(){const{params:e}=this,{min:t,max:i,getValidationErrors:s}=e,o=this.eEditor.getInputElement().valueAsNumber,r=this.getLocaleTextFunc();let a=[];return typeof o=="number"&&(t!=null&&o<t&&a.push(r("minValueValidation",`Must be greater than or equal to ${t}.`,[String(t)])),i!=null&&o>i&&a.push(r("maxValueValidation",`Must be less than or equal to ${i}.`,[String(i)]))),a.length||(a=null),s?s({value:o,cellEditorParams:e,internalErrors:a}):a}preventStepping(e){(e.key===G.UP||e.key===G.DOWN)&&e.preventDefault()}getValue(){const{eEditor:e,params:t}=this,i=e.getValue();if(!fe(i)&&!fe(t.value))return t.value;let s=t.parseValue(i);if(s==null)return s;if(typeof s=="string"){if(s==="")return null;s=Number(s)}return isNaN(s)?null:s}getStartValue(){return this.params.value}setCaret(){dl()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},g8=class extends pC{constructor(){super(new u8(()=>this.getLocaleTextFunc()))}},f8={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]},p8=class extends hC{constructor(){super(f8,[zB]),this.eEditor=he,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}initialiseEditor(e){this.focusAfterAttached=e.cellStartedEdit;const{eEditor:t,valueSvc:i,gos:s}=this,{values:n,value:o,eventKey:r}=e;if(Ht(n)){J(58);return}this.startedByEnter=r!=null?r===G.ENTER:!1;let a=!1;n.forEach(h=>{const u={value:h},f=i.formatValue(e.column,null,h),p=f!=null;u.text=p?f:h,t.addOption(u),a=a||o===h}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:d}=e;l!=null&&t.setPickerGap(l),d!=null&&t.setPickerMaxHeight(d),c!=null&&t.setPickerMaxWidth(c),s.get("editType")!=="fullRow"&&this.addManagedListeners(this.eEditor,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eEditor.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eEditor.showPicker()})}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){const{params:e}=this,{values:t,getValidationErrors:i}=e,s=this.getValue();let n=[];if(t&&!t.includes(s)){const o=this.getLocaleTextFunc();n.push(o("invalidSelectionValidation","Invalid selection."))}else n=null;return i?i({value:s,internalErrors:n,cellEditorParams:e}):n}},m8={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"},v8=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return m8}getAgComponents(){return[aC]}init(e,t){this.eEditor=e,this.params=t;const i=t.maxLength;i!=null&&e.setMaxLength(i)}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:i}=e,s=this.getValue(),n=this.getLocaleTextFunc();let o=[];return t!=null&&typeof s=="string"&&s.length>t&&o.push(n("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),i?i({value:s,cellEditorParams:e,internalErrors:o}):o}getValue(){const{eEditor:e,params:t}=this,i=e.getValue();return!fe(i)&&!fe(t.value)?t.value:t.parseValue(i)}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){dl()&&this.eEditor.getInputElement().focus({preventScroll:!0});const e=this.eEditor,t=e.getValue(),i=fe(t)&&t.length||0;i&&e.getInputElement().setSelectionRange(i,i)}},_R=class extends pC{constructor(){super(new v8(()=>this.getLocaleTextFunc()))}};function C8(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}function w8(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()}function fM(e,t,i="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,i),"ensureVisible")}function pM(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,i),"ensureVisible")}function b8(e,t,i=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,i),"ensureVisible")}function y8(e){var t;(t=e.undoRedo)==null||t.undo("api")}function S8(e){var t;(t=e.undoRedo)==null||t.redo("api")}function x8(e,t){var i;return(i=e.editModelSvc)==null?void 0:i.getEditRowDataValue(t,{checkSiblings:!0})}function R8(e){var s;const t=(s=e.editModelSvc)==null?void 0:s.getEditMap(),i=[];return t==null||t.forEach((n,o)=>{const{rowIndex:r,rowPinned:a}=o;n.forEach((l,c)=>{const{editorValue:d,pendingValue:h,sourceValue:u,state:f}=l,p=Ir(l);let m=d??h;m===Cn&&(m=void 0);const v={newValue:m,oldValue:u,state:f,column:c,colId:c.getColId(),colKey:c.getColId(),rowIndex:r,rowPinned:a};(f==="editing"||f==="changed"&&p)&&i.push(v)})}),i}function E8(e,t=!1){var s;const{editSvc:i}=e;if(i!=null&&i.isBatchEditing()){if(t)for(const n of((s=e.editModelSvc)==null?void 0:s.getEditPositions())??[])n.state==="editing"&&i.revertSingleCellEdit(n);else Pl(e,{persist:!0});Ud(e,void 0,{cancel:t})}else i==null||i.stopEditing(void 0,{cancel:t,source:"edit",forceStop:!t,forceCancel:t})}function A8(e,t){var s;const i=Bt(e,t);return((s=e.editSvc)==null?void 0:s.isEditing(i))??!1}function F8(e,t){const{key:i,colKey:s,rowIndex:n,rowPinned:o}=t,{editSvc:r,colModel:a}=e,l=a.getCol(s);if(!l){J(12,{colKey:s});return}const d=Ur(e,{rowIndex:n,rowPinned:o||null});if(!d){J(290,{rowIndex:n,rowPinned:o});return}if(!l.isCellEditable(d))return;o==null&&pM(e,n),fM(e,s),r==null||r.startEditing({rowNode:d,column:l},{event:i?new KeyboardEvent("keydown",{key:i}):void 0,source:"api"})}function P8(e){var t;return((t=e.editSvc)==null?void 0:t.validateEdit())||null}function T8(e){var t;return((t=e.undoRedo)==null?void 0:t.getCurrentUndoStackSize())??0}function D8(e){var t;return((t=e.undoRedo)==null?void 0:t.getCurrentRedoStackSize())??0}var M8={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},I8=class extends LS{constructor(e){super(M8),this.params=e}postConstruct(){Kc(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,i=s=>{xy(this.gos,s,t.node,t.column,!0)||t.onKeyDown(s)};this.addManagedElementListeners(e,{keydown:i})}};function k8(e,{column:t},i,s,n="ui"){var c;if(i instanceof KeyboardEvent&&(i.key===G.TAB||i.key===G.ENTER||i.key===G.F2||i.key===G.BACKSPACE&&s))return!0;if((i==null?void 0:i.shiftKey)&&((c=e.rangeSvc)==null?void 0:c.getCellRanges().length)!=0)return!1;const r=t==null?void 0:t.getColDef(),a=_8(e.gos,r),l=i==null?void 0:i.type;return l==="click"&&(i==null?void 0:i.detail)===1&&a===1||l==="dblclick"&&(i==null?void 0:i.detail)===2&&a===2?!0:n==="api"?s??!1:!1}function _8(e,t){return e.get("suppressClickEdit")===!0?0:e.get("singleClickEdit")===!0||t!=null&&t.singleClickEdit?1:2}function Ny(e,{rowNode:t,column:i},s="ui"){const n=i.getColDef().editable,o=e.editModelSvc;return i.isColumnFunc(t,n)||!!o&&o.hasEdits({rowNode:t,column:i},{withOpenEditor:!0})}function L8(e,t,i="ui"){const s=Ny(e,t,i);return s===!0||i==="ui"?s:e.colModel.getCols().some(o=>Ny(e,{rowNode:t.rowNode,column:o},i))}var vv=(e,t=!1)=>{if(e!==void 0)return Ir(e)||t&&e.state==="editing"};function mM(e,t,i=!1){var s;return vv((s=e.editModelSvc)==null?void 0:s.getEdit(t),i)}var vM=(e,t,i)=>{if(e)for(let s=0,n=e.length;s<n;++s){const o=e[s];if(o.data&&(vv(t==null?void 0:t.getEdit({rowNode:o,column:i}))||vv(t==null?void 0:t.getEdit({rowNode:o.pinnedSibling,column:i})))||vM(o.childrenAfterGroup,t,i))return!0}};function CM(e,t){const{column:i,rowNode:s}=t;return e.gos.get("groupTotalRow")&&!(s!=null&&s.footer)?!1:vM(s==null?void 0:s.childrenAfterGroup,e.editModelSvc,i)}function wM(e,{rowNode:t,column:i}){var s;if(t=t.pinnedSibling,!!t)return vv((s=e.editModelSvc)==null?void 0:s.getEdit({rowNode:t,column:i}))}var O8=class extends V{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){var n;const{cellCtrl:e,editSvc:t,beans:i}=this;if(t!=null&&t.isBatchEditing()&&t.isEditing()){const o=mM(i,e)||CM(i,e)||wM(i,e);this.applyBatchingStyle(o)}else this.applyBatchingStyle(!1);const s=!!((n=this.editModelSvc)!=null&&n.getCellValidationModel().hasCellValidation(this.cellCtrl));this.cellComp.toggleCss("ag-cell-editing-error",s)}applyBatchingStyle(e){var t;this.cellComp.toggleCss("ag-cell-editing",e??!1),this.cellComp.toggleCss("ag-cell-batch-edit",(e&&((t=this.editSvc)==null?void 0:t.isBatchEditing()))??!1)}},N8=class extends V{constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){var r;const{rowCtrl:e,editModelSvc:t,beans:i}=this;let s=e.rowNode,n=t==null?void 0:t.getEditRow(s);const o=(r=this.editModelSvc)==null?void 0:r.getRowValidationModel().hasRowValidation({rowNode:s});if(!n&&s.pinnedSibling&&(s=s.pinnedSibling,n=t==null?void 0:t.getEditRow(s)),n){const a=Array.from(n.keys()).some(l=>{const c={rowNode:s,column:l};return mM(i,c,!0)||CM(i,c)||wM(i,c)});this.applyStyle(o,a);return}this.applyStyle(o)}applyStyle(e=!1,t=!1){var n,o;const i=((n=this.editSvc)==null?void 0:n.isBatchEditing())??!1,s=this.gos.get("editType")==="fullRow";(o=this.rowCtrl)==null||o.forEachGui(void 0,({rowComp:r})=>{r.toggleCss("ag-row-editing",s&&t),r.toggleCss("ag-row-batch-edit",s&&t&&i),r.toggleCss("ag-row-inline-editing",t),r.toggleCss("ag-row-not-inline-editing",!t),r.toggleCss("ag-row-editing-invalid",s&&t&&e)})}},H8=({rowModel:e,pinnedRowModel:t,editModelSvc:i},s)=>{const n=new Set;e.forEachNode(o=>s.has(o)&&n.add(o)),t==null||t.forEachPinnedRow("top",o=>s.has(o)&&n.add(o)),t==null||t.forEachPinnedRow("bottom",o=>s.has(o)&&n.add(o));for(const o of s)n.has(o)||i.removeEdits({rowNode:o});return n},G8=({editModelSvc:e},t,i)=>{var s;for(const n of t)(s=e==null?void 0:e.getEditRow(n))==null||s.forEach((o,r)=>!i.has(r)&&e.removeEdits({rowNode:n,column:r}))},B8=e=>()=>{const t=new Set(e.colModel.getCols()),i=e.editModelSvc.getEditMap(!0),s=new Set(i.keys());G8(e,H8(e,s),t)},V8=new Set(["undo","redo","paste","bulk","rangeSvc"]),z8=new Set(["ui","api"]),bM={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"},W8=new Set(Object.keys(bM)),$8=new Set(["paste","rangeSvc","renderer","cellClear","redo","undo"]),Up={cancel:!0,source:"api"},U8={cancel:!1,source:"api"},fd={checkSiblings:!0},Mu={force:!0,suppressFlash:!0},j8=class extends V{constructor(){super(...arguments),this.beanName="editSvc",this.batch=!1,this.stopping=!1,this.committing=!1}postConstruct(){const{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener("editType",({currentValue:s})=>{this.stopEditing(void 0,Up),this.createStrategy(s)});const t=B8(e),i=()=>{const s=this.model.getCellValidationModel().getCellValidationMap().size>0,n=this.model.getRowValidationModel().getRowValidationMap().size>0;return s||n?this.stopEditing(void 0,Up):this.isEditing()&&(this.isBatchEditing()?Ud(e,this.model.getEditPositions()):this.stopEditing(void 0,U8)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowExpansionStateChanged:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:i,filterChanged:i,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(e){e?(this.batch=!0,this.stopEditing(void 0,Up)):(this.stopEditing(void 0,Up),this.batch=!1)}createStrategy(e){const{beans:t,gos:i,strategy:s}=this,n=LR(i,e);if(s){if(s.beanName===n)return s;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(t.registry.createDynamicBean(n,!0))}destroyStrategy(){this.strategy&&(this.strategy.destroy(),this.strategy=this.destroyBean(this.strategy))}shouldStartEditing(e,t,i,s="ui"){const n=k8(this.beans,e,t,i,s);return n&&(this.strategy??(this.strategy=this.createStrategy())),n}shouldStopEditing(e,t,i="ui"){var s;return((s=this.strategy)==null?void 0:s.shouldStop(e,t,i))??null}shouldCancelEditing(e,t,i="ui"){var s;return((s=this.strategy)==null?void 0:s.shouldCancel(e,t,i))??null}validateEdit(){return a4(this.beans)}isEditing(e,t){return this.model.hasEdits(e,t??fd)}isRowEditing(e,t){return(e&&this.model.hasRowEdits(e,t))??!1}startEditing(e,t){const{startedEdit:i=!0,event:s=null,source:n="ui",ignoreEventKey:o=!1,silent:r}=t;if(this.strategy??(this.strategy=this.createStrategy()),!this.isCellEditable(e,"api"))return;const a=Bt(this.beans,e);if(a&&!a.comp){a.onCompAttachedFuncs.push(()=>this.startEditing(e,t));return}const l=this.shouldStartEditing(e,s,i,n);if(l===!1&&n!=="api"){this.isEditing(e)&&this.stopEditing();return}!this.batch&&this.shouldStopEditing(e,void 0,n)&&!t.continueEditing&&this.stopEditing(void 0,{source:n}),l&&this.isBatchEditing()&&this.dispatchBatchEvent("batchEditingStarted",new Map),this.strategy.start({position:e,event:s,source:n,ignoreEventKey:o,startedEdit:i,silent:r})}stopEditing(e,t){var v,C,w;const{event:i,cancel:s,source:n="ui",forceCancel:o,forceStop:r}=t||{},{beans:a,model:l}=this;if(W8.has(n)&&this.isBatchEditing())return this.bulkRefresh(e),!1;const c=this.committing?bM[n]:n;if(!(this.committing||this.isEditing(e)||this.isBatchEditing()&&l.hasEdits(e,fd))||!this.strategy||this.stopping)return!1;this.stopping=!0;const h=Bt(a,e);h&&(h.onEditorAttachedFuncs=[]);let u=l.getEditMap(!0),f=!1;const p=!s&&(!!this.shouldStopEditing(e,i,c)||this.committing&&!this.batch)||(r??!1),m=s&&!!this.shouldCancelEditing(e,i,c)||(o??!1);if(p||m){Pl(a,{persist:!0,isCancelling:m||s,isStopping:p});const S=l.getEditMap(),y=this.processEdits(S,s,n);(v=this.strategy)==null||v.stop(s,i);for(const R of y)l.clearEditValue(R);this.bulkRefresh(void 0,u);for(const R of l.getEditPositions(S)){const A=Bt(a,R),P=Ir(R);A==null||A.refreshCell({force:!0,suppressFlash:!P})}u=S,f||(f=p)}else if(i instanceof KeyboardEvent&&this.batch&&((C=this.strategy)!=null&&C.midBatchInputsAllowed(e))&&this.isEditing(e,{withOpenEditor:!0})){const{key:S}=i,y=S===G.ENTER,R=S===G.ESCAPE,A=S===G.TAB;(y||A||R)&&(y||A?Pl(a,{persist:!0}):R&&this.revertSingleCellEdit(h),this.isBatchEditing()?(w=this.strategy)==null||w.cleanupEditors():Ud(a,l.getEditPositions(),{event:i,cancel:R}),i.preventDefault(),this.bulkRefresh(e,u,{suppressFlash:!0}),u=l.getEditMap())}else Pl(a,{persist:!0}),u=l.getEditMap();return f&&e&&this.model.removeEdits(e),this.navigateAfterEdit(t,h==null?void 0:h.cellPosition),My(a),this.model.hasEdits()||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap()),this.bulkRefresh(),m&&this.beans.rowRenderer.refreshRows({rowNodes:Array.from(u.keys())}),this.isBatchEditing()&&(this.beans.rowRenderer.refreshRows({suppressFlash:!0,force:!0}),f&&p&&this.dispatchBatchEvent("batchEditingStopped",u)),this.stopping=!1,f}navigateAfterEdit(e,t){var c;if(!e||!t)return;const{event:i,suppressNavigateAfterEdit:s}=e;if(!(i instanceof KeyboardEvent)||s)return;const{key:o,shiftKey:r}=i,a=this.gos.get("enterNavigatesVerticallyAfterEdit");if(o!==G.ENTER||!a)return;const l=r?G.UP:G.DOWN;(c=this.beans.navigation)==null||c.navigateToNextCell(null,l,t,!1)}processEdits(e,t=!1,i){const s=Array.from(e.keys()),n=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,o=[];for(const r of s){const a=e.get(r);for(const l of a.keys()){const c=a.get(l),d={rowNode:r,column:l},h=Ir(c);!t&&h&&!n&&(this.setNodeDataValue(r,l,c.pendingValue,void 0,i)||o.push(d))}}return o}setNodeDataValue(e,t,i,s,n="edit"){const{beans:o}=this,r=Bt(o,{rowNode:e,column:t}),a=z8.has(n)?"edit":n;r&&(r.suppressRefreshCell=!0),this.commitNextEdit();const l=e.setDataValue(t,i,a);return r&&(r.suppressRefreshCell=!1),s&&(r==null||r.refreshCell(Mu)),l}setEditMap(e,t){var s;this.strategy??(this.strategy=this.createStrategy()),(s=this.strategy)==null||s.setEditMap(e,t),this.bulkRefresh();let i=Mu;t!=null&&t.forceRefreshOfEditCellsOnly&&(i={...K8(e),...Mu}),this.beans.rowRenderer.refreshCells(i)}dispatchEditValuesChanged({rowNode:e,column:t},i={}){if(!e||!t||!i)return;const{pendingValue:s,sourceValue:n}=i,{rowIndex:o,rowPinned:r,data:a}=e;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:e,rowIndex:o,rowPinned:r,column:t,source:"api",data:a,newValue:s,oldValue:n,value:s,colDef:t.getColDef()})}bulkRefresh(e={},t,i={}){var a;const{beans:s,gos:n}=this,{editModelSvc:o,rowModel:r}=s;oi(n)&&(e.rowNode&&e.column?this.refCell(e,this.model.getEdit(e),i):t&&((a=o==null?void 0:o.getEditMap(!1))==null||a.forEach((l,c)=>{for(const d of l.keys())this.refCell({rowNode:c,column:d},l.get(d),i)})))}refCell({rowNode:e,column:t},i,s={}){var h,u,f;const{beans:n,gos:o}=this,r=new Set([e]),a=new Set,l=e.pinnedSibling;l&&r.add(l);const c=e.sibling;c&&a.add(c);let d=e.parent;for(;d;)(h=d.sibling)!=null&&h.footer&&o.get("groupTotalRow")||!d.parent&&d.sibling&&o.get("grandTotalRow")?a.add(d.sibling):a.add(d),d=d.parent;for(const p of r)this.dispatchEditValuesChanged({rowNode:p,column:t},i);for(const p of r)(u=Bt(n,{rowNode:p,column:t}))==null||u.refreshCell(s);for(const p of a)(f=Bt(n,{rowNode:p,column:t}))==null||f.refreshCell(s)}stopAllEditing(e=!1,t="ui"){this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e,t="ui"){const{rowNode:i}=e,{gos:s,beans:n}=this;if(i.group){if(s.get("treeData")){if(!i.data&&!s.get("enableGroupEdit"))return!1}else if(!s.get("enableGroupEdit"))return!1}const o=LR(s)==="fullRow"?L8(n,e,t):Ny(n,e,t);return o&&(this.strategy??(this.strategy=this.createStrategy())),o}cellEditingInvalidCommitBlocks(){return this.gos.get("invalidEditValueMode")==="block"}checkNavWithValidation(e,t,i=!0){var s,n,o,r;if(this.hasValidationErrors(e)){const a=Bt(this.beans,e);return this.cellEditingInvalidCommitBlocks()?((s=t==null?void 0:t.preventDefault)==null||s.call(t),i&&(!(a!=null&&a.hasBrowserFocus())&&(a==null||a.focusCell()),(r=(o=(n=a==null?void 0:a.comp)==null?void 0:n.getCellEditor())==null?void 0:o.focusIn)==null||r.call(o)),"block-stop"):(a&&this.revertSingleCellEdit(a),"revert-continue")}return"continue"}revertSingleCellEdit(e,t=!1){var s,n,o,r;const i=Bt(this.beans,e);(s=i==null?void 0:i.comp)!=null&&s.getCellEditor()&&(Ud(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),lu(this.beans,e,{silent:!0}),Xc(this.beans),i==null||i.refreshCell(Mu),t&&(i==null||i.focusCell(),(r=(o=(n=i==null?void 0:i.comp)==null?void 0:n.getCellEditor())==null?void 0:o.focusIn)==null||r.call(o)))}hasValidationErrors(e){var s;Xc(this.beans);const t=Bt(this.beans,e);t&&(t.refreshCell(Mu),(s=t.rowCtrl.rowEditStyleFeature)==null||s.applyRowStyles());let i=!1;return e!=null&&e.rowNode?(i||(i=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode})),e.column&&(i||(i=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column})))):(i||(i=this.model.getCellValidationModel().getCellValidationMap().size>0),i||(i=this.model.getRowValidationModel().getRowValidationMap().size>0)),i}moveToNextCell(e,t,i,s="ui"){var a;let n;const o=this.isEditing(),r=o&&this.checkNavWithValidation(void 0,i)==="block-stop";return e instanceof jd&&o&&(n=(a=this.strategy)==null?void 0:a.moveToNextEditingCell(e,t,i,s,r)),n===null||(n=n||!!this.beans.focusSvc.focusedHeader,n===!1&&!r&&this.stopEditing()),n}getCellDataValue({rowNode:e,column:t},i=!0){if(!e||!t)return;let s=this.model.getEdit({rowNode:e,column:t});const n=e.pinnedSibling;if(n){const r=this.model.getEdit({rowNode:n,column:t});r&&(s=r)}const o=i?(s==null?void 0:s.editorValue)??(s==null?void 0:s.pendingValue):s==null?void 0:s.pendingValue;return o===Cn||!s?(s==null?void 0:s.sourceValue)??this.valueSvc.getValue(t,e,!1,"api"):o}addStopEditingWhenGridLosesFocus(e){t4(this,this.beans,e)}createPopupEditorWrapper(e){return new I8(e)}commitNextEdit(){this.committing=!0}setDataValue(e,t,i){var s;try{if((!this.isEditing()||this.committing)&&!$8.has(i))return;const{beans:n}=this;this.strategy??(this.strategy=this.createStrategy());const o=this.isBatchEditing()?"ui":this.committing?i??"api":"api";if(!i||V8.has(i))return Nm(n,e,t,i,void 0,{persist:!0}),this.setNodeDataValue(e.rowNode,e.column,t,!0,i);const r=this.model.getEdit(e);if(r){if(r.pendingValue===t)return!1;if(r.sourceValue!==t)return Nm(n,e,t,i,void 0,{persist:!0}),this.stopEditing(e,{source:o,suppressNavigateAfterEdit:!0}),!0;if(r.sourceValue===t)return(s=n.editModelSvc)==null||s.removeEdits(e),this.dispatchEditValuesChanged(e,{...r,pendingValue:t}),!0}return Nm(n,e,t,i,void 0,{persist:!0}),this.stopEditing(e,{source:o,suppressNavigateAfterEdit:!0}),!0}finally{this.committing=!1}}handleColDefChanged(e){n4(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){if(!this.batch||!this.model.hasRowEdits(e.rowNode,fd))return;const{rowNode:s,column:n}=e,{compDetails:o,valueToDisplay:r}=t;if(o){const{params:l}=o;return l.data=this.model.getEditRowDataValue(s,fd),{compDetails:o}}const a=this.model.getEditRow(e.rowNode,fd);if(r!==void 0&&(a!=null&&a.has(n)))return{valueToDisplay:this.valueSvc.getValue(n,s)}}cleanupEditors(){var e;(e=this.strategy)==null||e.cleanupEditors()}dispatchCellEvent(e,t,i,s){var n;(n=this.strategy)==null||n.dispatchCellEvent(e,t,i,s)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return Le(this.gos,{type:e,...e==="batchEditingStopped"?{changes:this.toEventChangeList(t)}:{}})}toEventChangeList(e){return this.model.getEditPositions(e).map(t=>({rowIndex:t.rowNode.rowIndex,rowPinned:t.rowNode.rowPinned,columnId:t.column.getColId(),newValue:t.pendingValue,oldValue:t.sourceValue}))}applyBulkEdit({rowNode:e,column:t},i){var c,d;if(!i||i.length===0)return;const{beans:s,rangeSvc:n,valueSvc:o}=this;Pl(s,{persist:!0});const r=this.model.getEditMap(!0),a=(d=(c=r.get(e))==null?void 0:c.get(t))==null?void 0:d.pendingValue;this.batch||this.eventSvc.dispatchEvent({type:"bulkEditingStarted"}),i.forEach(h=>{if(n==null||n.forEachRowInRange(h,u=>{const f=Ur(s,u);if(f===void 0)return;const p=r.get(f)??new Map;for(const m of h.columns)if(m&&this.isCellEditable({rowNode:f,column:m},"api")){const v=o.getValue(m,f,!0,"api");let C=o.parseValue(m,f??null,a,v);Number.isNaN(C)&&(C=null),p.set(m,{editorValue:void 0,pendingValue:C,sourceValue:v,state:"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}p.size>0&&r.set(f,p)}),this.setEditMap(r),this.batch){this.cleanupEditors(),My(s),this.bulkRefresh();return}this.commitNextEdit(),this.stopEditing(void 0,{source:"bulk"}),this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(r)})}),this.bulkRefresh();const l=Bt(s,{rowNode:e,column:t});l&&l.focusCell(!0)}createCellStyleFeature(e,t){return new O8(e,t)}createRowStyleFeature(e,t){return new N8(e,t)}setEditingCells(e,t){const{beans:i}=this,{colModel:s,valueSvc:n}=i,o=new Map;for(let{colId:r,column:a,colKey:l,rowIndex:c,rowPinned:d,newValue:h,state:u}of e){const f=r?s.getCol(r):l?s.getCol(l):a;if(!f)continue;const p=Ur(i,{rowIndex:c,rowPinned:d});if(!p)continue;const m=n.getValue(f,p,!0,"api");if(!(t!=null&&t.forceRefreshOfEditCellsOnly)&&!Ir({pendingValue:h,sourceValue:m})&&u!=="editing")continue;let v=o.get(p);v||(v=new Map,o.set(p,v)),h===void 0&&(h=Cn),v.set(f,{editorValue:void 0,pendingValue:h,sourceValue:m,state:u??"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}this.setEditMap(o,t)}onCellFocused(e){var o;const t=Bt(this.beans,e);if(!t||!this.isEditing(t,fd))return;const i=this.model.getEdit(t);if(!i||!Ir(i))return;const n=this.getLocaleTextFunc()("ariaPendingChange","Pending Change");(o=this.beans.ariaAnnounce)==null||o.announceValue(n,"pendingChange")}allowedFocusTargetOnValidation(e){return Bt(this.beans,e)}};function K8(e){return{rowNodes:e?Array.from(e.keys()):void 0,columns:e?[...new Set(Array.from(e.values()).flatMap(t=>Array.from(t.keys())))]:void 0}}function LR(e,t){return t??e.get("editType")??"singleCell"}var yM=class extends V{postConstruct(){var e,t;this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:(e=this.onCellFocusChanged)==null?void 0:e.bind(this),cellFocusCleared:(t=this.onCellFocusChanged)==null?void 0:t.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){let t;const i=e.previousParams,{editSvc:s,beans:n}=this,o=e.type==="cellFocused"?e.sourceEvent:null;i&&(t=Bt(n,i));const{gos:r,editModelSvc:a}=n,l=e.type==="cellFocusCleared";if(s.isEditing(void 0,{withOpenEditor:!0})){const{column:c,rowIndex:d,rowPinned:h}=e,u={column:c,rowNode:Ur(n,{rowIndex:d,rowPinned:h})},f=r.get("invalidEditValueMode")==="block";if(f)return;const p=!f,m=!!(a!=null&&a.getCellValidationModel().hasCellValidation(u)),v=p&&m;(i||l?s.stopEditing(void 0,{cancel:v,source:l&&p?"api":void 0,event:o}):!0)||(s.isBatchEditing()?s.cleanupEditors():s.stopEditing(void 0,{source:"api"}))}t==null||t.refreshCell({suppressFlash:!0,force:!0})}stop(e,t){var n,o;const i=this.model.getEditPositions(),s={all:[],pass:[],fail:[]};for(const r of i){s.all.push(r);const a=this.model.getCellValidationModel().getCellValidation(r);if((((n=a==null?void 0:a.errorMessages)==null?void 0:n.length)??0)>0){s.fail.push(r);continue}s.pass.push(r)}if(e)for(const r of i)fv(this.beans,r,{cancel:e}),this.model.stop(r);else{const r=this.processValidationResults(s);if(r.destroy.length>0)for(const a of r.destroy)fv(this.beans,a,{event:t,cancel:e}),this.model.stop(a);if(r.keep.length>0)for(const a of r.keep){const l=Bt(this.beans,a);(o=this.editSvc)!=null&&o.cellEditingInvalidCommitBlocks()||l&&this.editSvc.revertSingleCellEdit(l)}}return!0}cleanupEditors({rowNode:e}={},t){Pl(this.beans,{persist:!1});const i=this.model.getEditPositions(),s=[];if(e)for(const n of i)n.rowNode!==e&&s.push(n);else for(const n of i)s.push(n);Ud(this.beans,s),My(this.beans,t)}setFocusOutOnEditor(e){var t,i,s;(s=(i=(t=e.comp)==null?void 0:t.getCellEditor())==null?void 0:i.focusOut)==null||s.call(i)}setFocusInOnEditor(e){const t=e.comp,i=t==null?void 0:t.getCellEditor();if(i!=null&&i.focusIn)i.focusIn();else{const s=this.beans.gos.get("editType")==="fullRow";e.focusCell(s),e.onEditorAttachedFuncs.push(()=>{var n,o;return(o=(n=t==null?void 0:t.getCellEditor())==null?void 0:n.focusIn)==null?void 0:o.call(n)})}}setupEditors(e){const{event:t,ignoreEventKey:i=!1,startedEdit:s,position:n,cells:o=this.model.getEditPositions()}=e,r=t instanceof KeyboardEvent&&!i&&t.key||void 0;s4(this.beans,o,n,r,t,s)}dispatchCellEvent(e,t,i,s){const n=Bt(this.beans,e);n&&this.eventSvc.dispatchEvent({...n.createEvent(t??null,i),...s})}dispatchRowEvent(e,t,i){if(i)return;const s=i0(this.beans,e);s&&this.eventSvc.dispatchEvent(s.createRowEvent(t))}shouldStop(e,t,i="ui"){const s=this.editSvc.isBatchEditing();return s&&i==="api"?!0:s&&(i==="ui"||i==="edit")?!1:i==="api"?!0:t instanceof KeyboardEvent&&!s?t.key===G.ENTER:null}shouldCancel(e,t,i="ui"){const s=this.editSvc.isBatchEditing();return!!(t instanceof KeyboardEvent&&!s&&t.key===G.ESCAPE||s&&i==="api"||i==="api")}setEditMap(e,t){var s;t!=null&&t.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:"api"});const i=[];if(e.forEach((n,o)=>{n.forEach((r,a)=>{r.state==="editing"&&i.push({...r,rowNode:o,column:a})})}),t!=null&&t.update&&(e=new Map([...this.model.getEditMap(),...e])),(s=this.model)==null||s.setEditMap(e),i.length>0){const n=i.at(-1),o=n.pendingValue===Cn?void 0:n.pendingValue;this.start({position:n,event:new KeyboardEvent("keydown",{key:o}),source:"api"});const r=Bt(this.beans,n);r&&this.setFocusInOnEditor(r)}}destroy(){this.cleanupEditors(),super.destroy()}},q8=class extends yM{constructor(){super(...arguments),this.beanName="fullRow",this.startedRows=[]}shouldStop(e,t,i="ui"){const{rowNode:s}=e||{};if(!i0(this.beans,{rowNode:this.rowNode}))return!0;const o=super.shouldStop({rowNode:this.rowNode},t,i);return o!==null?o:this.rowNode?s!==this.rowNode:!1}midBatchInputsAllowed({rowNode:e}){return e?this.model.hasEdits({rowNode:e}):!1}clearEdits(e){this.model.clearEditValue(e)}start(e){const{position:t,silent:i,startedEdit:s,event:n,ignoreEventKey:o}=e,{rowNode:r}=t;this.rowNode!==r&&super.cleanupEditors(t);const a=this.beans.visibleCols.allCols,l=[],c=[];for(const d of a)d.isCellEditable(r)&&c.push(d);if(c.length!=0){this.dispatchRowEvent({rowNode:r},"rowEditingStarted",i),this.startedRows.push(r);for(const d of c){const h={rowNode:r,column:d};l.push(h),this.model.hasEdits(h)||this.model.start(h)}this.rowNode=r,this.setupEditors({cells:l,position:t,startedEdit:s,event:n,ignoreEventKey:o})}}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){var n;const{rowNode:i}=this;if(i&&!this.model.hasRowEdits(i))return!1;const s=[];if(e||this.model.getEditMap().forEach((o,r)=>{if(!(!o||o.size===0)){for(const a of o.values())if(Ir(a)){s.push(r);break}}}),Xc(this.beans),!e&&((n=this.editSvc)==null?void 0:n.checkNavWithValidation({rowNode:i}))==="block-stop")return!1;super.stop(e,t);for(const o of s)this.dispatchRowEvent({rowNode:o},"rowValueChanged");return this.cleanupEditors({rowNode:i},!0),this.rowNode=void 0,!0}onCellFocusChanged(e){const{rowIndex:t}=e,i=e.previousParams;if((i==null?void 0:i.rowIndex)===t||e.sourceEvent instanceof KeyboardEvent)return;const s=Bt(this.beans,i);this.gos.get("invalidEditValueMode")==="block"&&s&&(this.model.getCellValidationModel().getCellValidation(s)||this.model.getRowValidationModel().getRowValidation(s))||super.onCellFocusChanged(e)}cleanupEditors(e={},t){super.cleanupEditors(e,t);for(const i of this.startedRows)this.dispatchRowEvent({rowNode:i},"rowEditingStopped");this.startedRows.length=0}moveToNextEditingCell(e,t,i,s="ui",n=!1){var u,f,p,m;const o=e.cellPosition;let r;this.model.suspend(!0);try{r=(u=this.beans.navigation)==null?void 0:u.findNextCellToFocusOn(o,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(r===!1)return null;if(r==null)return!1;const a=r.cellPosition,l=e.isCellEditable(),c=r.isCellEditable(),d=a&&o.rowIndex===a.rowIndex&&o.rowPinned===a.rowPinned;l&&this.setFocusOutOnEditor(e),this.restoreEditors();const h=this.gos.get("suppressStartEditOnTab");return c&&!n?h?r.focusCell(!0,i):((f=r.comp)!=null&&f.getCellEditor()||lu(this.beans,r,{event:i,cellStartedEdit:!0}),this.setFocusInOnEditor(r),r.focusCell(!1,i)):(c&&n&&this.setFocusInOnEditor(r),r.focusCell(!0,i)),!d&&!n&&((p=this.editSvc)==null||p.stopEditing({rowNode:e.rowNode},{event:i}),this.cleanupEditors(r,!0),h?r.focusCell(!0,i):this.editSvc.startEditing(r,{startedEdit:!0,event:i,source:s,ignoreEventKey:!0})),(m=e.rowCtrl)==null||m.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach((e,t)=>e.forEach(({state:i},s)=>{var o;if(i!=="editing")return;const n=Bt(this.beans,{rowNode:t,column:s});n&&!((o=n.comp)!=null&&o.getCellEditor())&&lu(this.beans,n,{silent:!0})}))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}},Y8=class extends yM{constructor(){super(...arguments),this.beanName="singleCell"}shouldStop(e,t,i="ui"){const s=super.shouldStop(e,t,i);if(s!==null)return s;const{rowNode:n,column:o}=e||{};return(!this.rowNode||!this.column)&&n&&o?null:this.rowNode!==n||this.column!==o}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e){const{position:t,startedEdit:i,event:s,ignoreEventKey:n}=e;(this.rowNode!==t.rowNode||this.column!==t.column)&&super.cleanupEditors(),this.rowNode=t.rowNode,this.column=t.column,this.model.start(t),this.setupEditors({cells:[t],position:t,startedEdit:i,event:s,ignoreEventKey:n})}dispatchRowEvent(e,t,i){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){return super.stop(e,t),this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){const{colModel:t,editSvc:i}=this.beans,{rowIndex:s,column:n,rowPinned:o}=e,r=Ur(this.beans,{rowIndex:s,rowPinned:o}),a=Dy(n),l=t.getCol(a),c=e.previousParams;if(c){const d=Dy(c.column);if((c==null?void 0:c.rowIndex)===s&&d===a&&(c==null?void 0:c.rowPinned)===o)return}i!=null&&i.isEditing({rowNode:r,column:l},{withOpenEditor:!0})&&e.type==="cellFocused"||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,i,s="ui",n=!1){var p,m,v,C,w,S;const o=this.beans.focusSvc.getFocusedCell();o&&(e=Dd(this.beans,o)??e);const r=e.cellPosition;let a;const l=this.beans.gos.get("editType")==="fullRow";l&&this.model.suspend(!0),n||(e.eGui.focus(),(m=this.editSvc)==null||m.stopEditing(e,{source:(p=this.editSvc)!=null&&p.isBatchEditing()?"ui":"api",event:i}));try{a=(v=this.beans.navigation)==null?void 0:v.findNextCellToFocusOn(r,{backwards:t,startEditing:!0})}finally{l&&this.model.suspend(!1)}if(a===!1)return null;if(a==null)return!1;const c=a.cellPosition,d=e.isCellEditable(),h=a.isCellEditable(),u=c&&r.rowIndex===c.rowIndex&&r.rowPinned===c.rowPinned;d&&!n&&this.setFocusOutOnEditor(e);const f=this.gos.get("suppressStartEditOnTab");if(!u&&!n&&(super.cleanupEditors(a,!0),f?a.focusCell(!0,i):this.editSvc.startEditing(a,{startedEdit:!0,event:i,source:s,ignoreEventKey:!0})),h&&!n){if(a.focusCell(!1,i),f)a.focusCell(!0,i);else if(!((C=a.comp)!=null&&C.getCellEditor())){const y=(w=this.editSvc)==null?void 0:w.isEditing(a,{withOpenEditor:!0});lu(this.beans,a,{event:i,cellStartedEdit:!0,silent:y}),this.setFocusInOnEditor(a),this.cleanupEditors(a)}}else h&&n&&this.setFocusInOnEditor(a),a.focusCell(!0,i);return(S=e.rowCtrl)==null||S.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},ul={moduleName:"EditCore",version:ue,beans:[e4,j8],apiFunctions:{getEditingCells:R8,getEditRowValues:x8,getCellEditorInstances:i4,startEditingCell:F8,stopEditing:E8,isEditing:A8,validateEdit:P8},dynamicBeans:{singleCell:Y8,fullRow:q8},dependsOn:[gC,gM],css:[e8]},X8={moduleName:"UndoRedoEdit",version:ue,beans:[Zj],apiFunctions:{undoCellEditing:y8,redoCellEditing:S8,getCurrentUndoSize:T8,getCurrentRedoSize:D8},dependsOn:[ul]},Q8={moduleName:"TextEditor",version:ue,userComponents:{agCellEditor:_R,agTextCellEditor:_R},dependsOn:[ul]},J8={moduleName:"NumberEditor",version:ue,userComponents:{agNumberCellEditor:{classImp:g8}},dependsOn:[ul]},Z8={moduleName:"DateEditor",version:ue,userComponents:{agDateCellEditor:o8,agDateStringCellEditor:l8},dependsOn:[ul]},eK={moduleName:"CheckboxEditor",version:ue,userComponents:{agCheckboxCellEditor:i8},dependsOn:[ul]},tK={moduleName:"SelectEditor",version:ue,userComponents:{agSelectCellEditor:p8},dependsOn:[ul]},iK={moduleName:"LargeTextEditor",version:ue,userComponents:{agLargeTextCellEditor:d8},dependsOn:[ul]},sK={moduleName:"CustomEditor",version:ue,dependsOn:[ul]},nK=class extends V{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,Vd(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){const t=this.columns;t!=null&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),fG(e))}createColumns(e,t){var u,f;const i=()=>{var p;ov(this.beans,(p=this.columns)==null?void 0:p.tree),this.columns=null},s=e.treeDepth,o=(((u=this.columns)==null?void 0:u.treeDepth)??-1)==s,r=this.generateSelectionCols();if(gG(r,((f=this.columns)==null?void 0:f.list)??[])&&o)return;i();const{colGroupSvc:l}=this.beans,c=(l==null?void 0:l.findDepth(e.tree))??0,d=(l==null?void 0:l.balanceTreeForAutoCols(r,c))??[];this.columns={list:r,tree:d,treeDepth:c,map:{}},t(p=>{if(!p)return null;const m=p.filter(v=>!Qr(v));return[...r,...m]})}updateColumns(e){var i;const t=Vd(e.source);for(const s of((i=this.columns)==null?void 0:i.list)??[]){const n=this.createSelectionColDef(e.currentValue);s.setColDef(n,null,t),Yn(this.beans,{state:[{...n,colId:s.getColId()}]},t)}}getColumn(e){var t;return((t=this.columns)==null?void 0:t.list.find(i=>dg(i,e)))??null}getColumns(){var e;return((e=this.columns)==null?void 0:e.list)??null}isSelectionColumnEnabled(){var r,a;const{gos:e,beans:t}=this,i=e.get("rowSelection");if(typeof i!="object"||!Lc(e))return!1;const s=(((a=(r=t.autoColSvc)==null?void 0:r.getColumns())==null?void 0:a.length)??0)>0;if(i.checkboxLocation==="autoGroupColumn"&&s)return!1;const n=!!Bd(i),o=Tm(i);return n||o}createSelectionColDef(e){const{gos:t}=this,i=e??t.get("selectionColumnDef"),s=t.get("enableRtl"),{rowSpan:n,spanRows:o,...r}=i??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:s?"right":"left",comparator(a,l,c,d){const h=c.isSelected(),u=d.isSelected();return h===u?0:h?1:-1},editable:!1,suppressFillHandle:!0,pinned:null,...r,colId:pT,chartDataType:"excluded"}}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);const i=new ad(e,null,t,!1);return this.createBean(i),[i]}onSelectionOptionsChanged(e,t,i){const s=t&&typeof t!="string"?Bd(t):void 0,n=e&&typeof e!="string"?Bd(e):void 0,o=s!==n,r=t&&typeof t!="string"?Tm(t):void 0,a=e&&typeof e!="string"?Tm(e):void 0,l=r!==a,c=iv(e),d=iv(t);(o||l||c!==d)&&this.beans.colModel.refreshAll(i)}destroy(){var e;ov(this.beans,(e=this.columns)==null?void 0:e.tree),super.destroy()}refreshVisibility(e,t,i){var l,c;if(!((l=this.columns)!=null&&l.list.length))return;const s=e.length+t.length+i.length;if(s===0)return;const n=this.columns.list[0];if(!n.isVisible())return;const o=()=>{let d;switch(n.pinned){case"left":case!0:d=e;break;case"right":d=i;break;default:d=t}d&&Qn(d,n)};(((c=this.beans.rowNumbersSvc)==null?void 0:c.getColumn(mT))?2:1)===s&&o()}};function oK(e,t){var r;if(!t.nodes.every(a=>a.rowPinned&&!wp(a)?(J(59),!1):a.id===void 0?(J(60),!1):!0))return;const{nodes:s,source:n,newValue:o}=t;(r=e.selectionSvc)==null||r.setNodesSelected({nodes:s,source:n??"api",newValue:o})}function rK(e,t,i="apiSelectAll"){var s;(s=e.selectionSvc)==null||s.selectAllRowNodes({source:i,selectAll:t})}function aK(e,t,i="apiSelectAll"){var s;(s=e.selectionSvc)==null||s.deselectAllRowNodes({source:i,selectAll:t})}function lK(e,t="apiSelectAllFiltered"){var i;(i=e.selectionSvc)==null||i.selectAllRowNodes({source:t,selectAll:"filtered"})}function cK(e,t="apiSelectAllFiltered"){var i;(i=e.selectionSvc)==null||i.deselectAllRowNodes({source:t,selectAll:"filtered"})}function dK(e,t="apiSelectAllCurrentPage"){var i;(i=e.selectionSvc)==null||i.selectAllRowNodes({source:t,selectAll:"currentPage"})}function hK(e,t="apiSelectAllCurrentPage"){var i;(i=e.selectionSvc)==null||i.deselectAllRowNodes({source:t,selectAll:"currentPage"})}function uK(e){var t;return((t=e.selectionSvc)==null?void 0:t.getSelectedNodes())??[]}function gK(e){var t;return((t=e.selectionSvc)==null?void 0:t.getSelectedRows())??[]}var fK=class extends AW{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=sv(e),this.groupSelectsDescendants=Dg(e),this.groupSelectsFiltered=nv(e)==="filteredDescendants",this.masterSelectsDetail=Ax(e)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{const t=Dg(e),i=sv(e),s=nv(e)==="filteredDescendants";this.masterSelectsDetail=Ax(e)==="detail",(t!==this.groupSelectsDescendants||s!==this.groupSelectsFiltered||i!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=s,this.mode=i)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,i){if(this.isRowSelectionBlocked(t))return 0;const s=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,i);if(s==null)return 0;if(this.selectionCtx.selectAll=!1,"select"in s)return s.reset?this.resetNodes():this.selectRange(s.deselect,!1,i),this.selectRange(s.select,!0,i);{const n=s.checkFilteredNodes?xM(s.node):s.newValue;return this.setNodesSelected({nodes:[s.node],newValue:n,clearSelection:s.clearSelection,keepDescendants:s.keepDescendants,event:e,source:i})}}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:i,nodes:s,event:n,source:o,keepDescendants:r=!1}){var c;if(s.length===0)return 0;const{gos:a}=this;if(!Lc(a)&&e)return J(132),0;if(s.length>1&&!this.isMultiSelect())return J(130),0;let l=0;for(let d=0;d<s.length;d++){const h=s[d],u=pd(h);if(u.rowPinned&&!wp(u)){J(59);continue}if(u.id===void 0){J(60);continue}this.groupSelectsFiltered&&u.group&&!a.get("treeData")||this.selectRowNode(u,e,n,o)&&(this.detailSelection.delete(u.id),l++),this.groupSelectsDescendants&&((c=u.childrenAfterGroup)!=null&&c.length)&&(l+=this.selectChildren(u,e,o))}return i||(s.length===1&&o==="api"&&this.selectionCtx.setRoot(pd(s[0])),e&&(t||!this.isMultiSelect())&&(l+=this.clearOtherNodes(pd(s[0]),r,o)),l>0&&(this.updateGroupsFromChildrenSelections(o),this.dispatchSelectionChanged(o))),l}selectRange(e,t,i){let s=0;return e.forEach(n=>{const o=pd(n);if(o.group&&this.groupSelectsDescendants)return;this.selectRowNode(o,t,void 0,i)&&s++}),s>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),s}selectChildren(e,t,i){const s=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return s?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:i,nodes:s}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>t.data&&e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((i,s)=>{e(i)&&t.set(s,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:i,rowModel:s}=this.beans;if(!oi(i))return!1;const n=s.rootNode;if(!n)return!1;t||(t=new kg(!0,n),t.active=!1);let o=!1;return t.forEachChangedNodeDepthFirst(r=>{if(r!==n){const a=this.calculateSelectedFromChildren(r);o=this.selectRowNode(r,a===null?!1:a,void 0,e)||o}}),o}clearOtherNodes(e,t,i){const s=new Map;let n=0;return this.selectedNodes.forEach(o=>{const r=o.id==e.id;if((t?!mK(e,o):!0)&&!r){const l=this.selectedNodes.get(o.id);n+=this.setNodesSelected({nodes:[l],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:i}),this.groupSelectsDescendants&&o.parent&&s.set(o.parent.id,o.parent)}}),s.forEach(o=>{const r=this.calculateSelectedFromChildren(o);this.selectRowNode(o,r===null?!1:r,void 0,i)}),n}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new sl(this.beans);return t.id=e.id,t.data=e.data,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!oi(e))return;const i=t.getTopLevelNodes();if(i===null)return;const s=[];function n(o){for(let r=0,a=o.length;r<a;r++){const l=o[r];l.isSelected()?s.push(l):l.group&&l.childrenAfterGroup&&n(l.childrenAfterGroup)}}return n(i),s}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:e,selectAll:t}){const i=oi(this.gos);let s=!1;const n=o=>{const r=this.selectRowNode(pd(o),!1,void 0,e);s||(s=r)};if(t==="currentPage"||t==="filtered"){if(!i){At(102);return}this.getNodesToSelect(t).forEach(n)}else this.selectedNodes.forEach(n),this.reset(e);if(this.selectionCtx.selectAll=!1,i&&this.groupSelectsDescendants){const o=this.updateGroupsFromChildrenSelections(e);s||(s=o)}s&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,i=0;return this.getNodesToSelect(e).forEach(s=>{this.groupSelectsDescendants&&s.group||(s.isSelected()?t++:s.selectable&&i++)}),{selectedCount:t,notSelectedCount:i}}getSelectAllState(e){const{selectedCount:t,notSelectedCount:i}=this.getSelectedCounts(e);return SM(t,i)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(t=>t.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[],i=n=>t.push(n);if(e==="currentPage")return this.forEachNodeOnPage(n=>{if(!n.group){i(n);return}if(!n.expanded&&!n.footer){const o=r=>{var a;i(r),(a=r.childrenAfterFilter)==null||a.forEach(o)};o(n);return}this.groupSelectsDescendants||i(n)}),t;const s=this.beans.rowModel;return e==="filtered"?(s.forEachNodeAfterFilter(i),t):(s.forEachNode(i),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:i}=this.beans,s=t.getFirstRow(),n=t.getLastRow();for(let o=s;o<=n;o++){const r=i.getRow(o);r&&e(r)}}selectAllRowNodes(e){const{gos:t,selectionCtx:i}=this;if(!Lc(t)){J(132);return}if(eG(t)&&!Tg(t)){J(130);return}if(!this.canSelectAll())return;const{source:s,selectAll:n}=e;let o=!1;if(this.getNodesToSelect(n).forEach(r=>{const a=this.selectRowNode(pd(r),!0,void 0,s);o||(o=a)}),i.selectAll=!0,oi(t)&&this.groupSelectsDescendants){const r=this.updateGroupsFromChildrenSelections(s);o||(o=r)}o&&this.dispatchSelectionChanged(s)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,i){if(e||(e=[]),!Array.isArray(e)){At(103);return}const s=new Set(e),n=[];this.beans.rowModel.forEachNode(o=>{s.has(o.id)&&n.push(o)}),i&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:n,source:t})}canSelectAll(){return oi(this.beans.gos)}updateSelectable(e){var l;const{gos:t,rowModel:i}=this.beans;if(!Lc(t))return;const s="selectableChanged",n=e!==void 0,o=oi(t)&&this.groupSelectsDescendants,r=[],a=c=>{var h;if(n&&!c.group)return;if(o&&c.group){const u=((h=c.childrenAfterGroup)==null?void 0:h.some(f=>f.selectable))??!1;this.setRowSelectable(c,u,!0);return}!this.updateRowSelectable(c,!0)&&c.isSelected()&&r.push(c)};if(o){if(e===void 0){const c=i.rootNode;e=c?new kg(!1,c):void 0}e==null||e.forEachChangedNodeDepthFirst(a,!n,!n)}else i.forEachNode(a);r.length&&this.setNodesSelected({nodes:r,newValue:!1,source:s}),!n&&o&&((l=this.updateGroupsFromChildrenSelections)==null||l.call(this,s))}updateSelectableAfterGrouping(e){var t;this.updateSelectable(e),this.groupSelectsDescendants&&((t=this.updateGroupsFromChildrenSelections)!=null&&t.call(this,"rowGroupChanged",e))&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(e,t){var o,r;if(!this.masterSelectsDetail)return;const i=(r=(o=e.detailNode)==null?void 0:o.detailGridInfo)==null?void 0:r.api;if(!i)return;const s=pK(i);if(e.isSelected()!==s&&this.selectRowNode(e,s,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!s){const a=this.detailSelection.get(e.id)??new Set;for(const l of i.getSelectedNodes())a.add(l.id);this.detailSelection.set(e.id,a)}}setDetailSelectionState(e,t,i){if(this.masterSelectsDetail){if(!Tg(t)){J(269);return}switch(e.isSelected()){case!0:{i.selectAll();break}case!1:{i.deselectAll();break}case void 0:{const s=this.detailSelection.get(e.id);if(s){const n=[];for(const o of s){const r=i.getRowNode(o);r&&n.push(r)}i.setNodesSelected({nodes:n,newValue:!0,source:"masterDetail"})}break}}}}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function pd(e){return wp(e)?e.pinnedSibling:e.footer?e.sibling:e}function pK(e){let t=0,i=0;return e.forEachNode(s=>{s.isSelected()?t++:s.selectable&&i++}),SM(t,i)}function SM(e,t){if(e===0&&t===0)return!1;if(!(e>0&&t>0))return e>0}function mK(e,t){let i=t.parent;for(;i;){if(i===e)return!0;i=i.parent}return!1}function xM(e){var s;const t=e.isSelected()===!1,i=((s=e.childrenAfterFilter)==null?void 0:s.some(xM))??!1;return t||i}var vK={moduleName:"SharedRowSelection",version:ue,beans:[nK],apiFunctions:{setNodesSelected:oK,selectAll:rK,deselectAll:aK,selectAllFiltered:lK,deselectAllFiltered:cK,selectAllOnCurrentPage:dK,deselectAllOnCurrentPage:hK,getSelectedNodes:uK,getSelectedRows:gK}},CK={moduleName:"RowSelection",version:ue,rowModels:["clientSide","infinite","viewport"],beans:[fK],dependsOn:[vK]};function wK(e){var t;(t=e.expansionSvc)==null||t.expandAll(!0)}function bK(e){var t;(t=e.expansionSvc)==null||t.expandAll(!1)}function RM(e){var t;(t=e.rowModel)==null||t.onRowHeightChanged()}function EM(e){var t,i;if((t=e.rowAutoHeight)!=null&&t.active){J(3);return}(i=e.rowModel)==null||i.resetRowHeights()}function yK(e,t,i){var n,o;const s=S6(e);if(s){if(((n=e.rowGroupColsSvc)==null?void 0:n.columns.length)===0){if(t<0){At(238);return}s.setRowCount(t,i);return}At(28);return}(o=uC(e))==null||o.setRowCount(t,i)}function SK(e){var t;return vu(e.gos)?e.rowModel.getBlockStates():((t=e.rowNodeBlockLoader)==null?void 0:t.getBlockState())??{}}function xK(e){return e.rowModel.isLastRowIndexKnown()}var RK={moduleName:"CsrmSsrmSharedApi",version:ue,apiFunctions:{expandAll:wK,collapseAll:bK}},EK={moduleName:"RowModelSharedApi",version:ue,apiFunctions:{onRowHeightChanged:RM,resetRowHeights:EM}},AK={moduleName:"SsrmInfiniteSharedApi",version:ue,apiFunctions:{setRowCount:yK,getCacheBlockState:SK,isLastRowIndexKnown:xK}},FK=class extends V{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";return typeof e=="function"&&(e=e()),e.map(s=>{var o;if(!s){At(18),t||At(20);return}if(this.isGridApi(s))return s;const n=s;return"current"in n?(o=n.current)==null?void 0:o.api:(n.api||At(19),n.api)}).filter(s=>!!s&&!s.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){if(!this.consuming)for(const t of this.getAlignedGridApis())t.isDestroyed()||t.dispatchEvent(e)}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach(s=>{i.push(t(s))}):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":J(21);break}})}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;if(t)for(const i of e.columnGroups){let s=null;i&&(s=t.getProvidedColGroup(i.getGroupId())),!(i&&!s)&&t.setColumnGroupOpened(s,i.isExpanded(),"alignedGridChanged")}}processColumnEvent(e){const t=e.column;let i=null;const s=this.beans,{colResize:n,ctrlsSvc:o,colModel:r}=s;if(t&&(i=r.getColDefCol(t.getColId())),t&&!i)return;const a=this.getMasterColumns(e);switch(e.type){case"columnMoved":{const h=e.api.getColumnState().map(u=>({colId:u.colId}));Yn(s,{state:h,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const h=e.api.getColumnState().map(u=>({colId:u.colId,hide:u.hide}));Yn(s,{state:h},"alignedGridChanged")}break;case"columnPinned":{const h=e.api.getColumnState().map(u=>({colId:u.colId,pinned:u.pinned}));Yn(s,{state:h},"alignedGridChanged")}break;case"columnResized":{const d=e,h={};for(const u of a)h[u.getId()]={key:u.getColId(),newWidth:u.getActualWidth()};for(const u of d.flexColumns??[])h[u.getId()]&&delete h[u.getId()];n==null||n.setColumnWidths(Object.values(h),!1,d.finished,"alignedGridChanged");break}}const c=o.getGridBodyCtrl().isVerticalScrollShowing();for(const d of this.getAlignedGridApis())d.setGridOption("alwaysShowVerticalScroll",c)}},PK={moduleName:"AlignedGrids",version:ue,beans:[FK],dependsOn:[MD]},TK=class extends V{constructor(e){super(),this.rootNode=e,this.nextId=0,this.allNodesMap={},OR(e)}getRowNode(e){return this.allNodesMap[e]}setNewRowData(e){const{selectionSvc:t,pinnedRowModel:i,groupStage:s}=this.beans;t==null||t.reset("rowDataChanged"),i!=null&&i.isManual()&&i.reset(),this.dispatchRowDataUpdateStarted(e),this.allNodesMap=Object.create(null),this.nextId=0;const n=OR(this.rootNode),o=new Array(e.length);n._leafs=o;let r=0;const a=s==null?void 0:s.getNestedDataGetter(),l=a?new Set:null,c=(d,h)=>{const u=d.level+1;for(let f=0,p=h.length;f<p;++f){const m=h[f];if(!m)continue;const v=this.createRowNode(m,u);if(v.sourceRowIndex=r,o[r++]=v,l&&!l.has(m)){l.add(m),v.treeParent=d;const C=a(m);C&&c(v,C)}}};c(n,e),o.length=r}setImmutableRowData(e,t){var C;const{rootNode:i,gos:s}=this;this.dispatchRowDataUpdateStarted(t);const n=nu(s),o=e.changedRowNodes,{adds:r,updates:a}=o,l=new Set,c=[],d=(C=this.beans.groupStage)==null?void 0:C.getNestedDataGetter();let h=s.get("suppressMaintainUnsortedOrder")?void 0:!1,u=-1,f=!1;const p=(w,S)=>{if(!h&&h!==void 0){const y=w.sourceRowIndex;h=y<=u,u=y}w.data!==S&&(w.updateData(S),r.has(w)||a.add(w),!w.selectable&&w.isSelected()&&c.push(w))},m=(w,S,y)=>{for(let R=0,A=S.length;R<A;++R){const P=S[R];if(!P)continue;let T=this.getRowNode(n({data:P,level:y}));if(T?(p(T,P),f||(f=!!d&&T.treeParent!==w)):(T=this.createRowNode(P,y),r.add(T)),!d||l.has(T)){l.add(T);continue}l.add(T),T.treeParent=w;const M=d(P);M&&m(T,M,y+1)}};m(i,t,0);const v=this.deleteUnusedNodes(l,o,c)||h||r.size>0;if(v){const w=i._leafs??(i._leafs=[]);h===void 0?_K(w,l,o):kK(w,l)&&(o.reordered=!0)}(v||f||a.size)&&(e.rowDataUpdated=!0,this.deselect(c))}deleteUnusedNodes(e,{removals:t},i){const s=this.rootNode._leafs;for(let n=0,o=s.length;n<o;n++){const r=s[n];e.has(r)||(t.add(r),r.isSelected()&&i.push(r),this.deleteNode(r))}return t.size>0}updateRowData(e,t){var a;if(this.dispatchRowDataUpdateStarted(e.add),(a=this.beans.groupStage)!=null&&a.getNestedDataGetter())return J(268),{remove:[],update:[],add:[]};const i=[],s=nu(this.gos),n=this.executeRemove(s,e,t,i),o=this.executeUpdate(s,e,t,i),r=this.executeAdd(e,t);return this.deselect(i),{remove:n,update:o,add:r}}executeRemove(e,{remove:t},{adds:i,updates:s,removals:n},o){const r=this.rootNode._leafs,a=r==null?void 0:r.length,l=t==null?void 0:t.length;if(!l||!a)return[];let c=0,d=a,h=0,u;const f=new Array(l);for(let p=0;p<l;++p){const m=this.lookupNode(e,t[p]);if(!m)continue;const v=m.sourceRowIndex;v<d&&(d=v),v>h&&(h=v),m.isSelected()&&o.push(m),this.deleteNode(m),i.delete(m)?(u??(u=new Set),u.add(m)):(s.delete(m),n.add(m)),f[c++]=m}return f.length=c,c&&IK(r,d,h,n,u),f}executeUpdate(e,{update:t},{adds:i,updates:s},n){const o=t==null?void 0:t.length;if(!o)return[];const r=new Array(o);let a=0;for(let l=0;l<o;l++){const c=t[l],d=this.lookupNode(e,c);d&&(d.updateData(c),!d.selectable&&d.isSelected()&&n.push(d),r[a++]=d,i.has(d)||s.add(d))}return r.length=a,r}executeAdd(e,t){var i;const s=(i=this.rootNode)._leafs??(i._leafs=[]),n=s.length,o=e.add,r=o==null?void 0:o.length;if(!r)return[];const a=n+r;let l=this.sanitizeAddIndex(s,e.addIndex);if(l<n){for(let h=n-1,u=a-1;h>=l;--h){const f=s[h];f.sourceRowIndex=u,s[u--]=f}t.reordered=!0}s.length=a;const c=new Array(r),d=t.adds;for(let h=0;h<r;h++){const u=this.createRowNode(o[h],0);d.add(u),u.sourceRowIndex=l,s[l]=u,c[h]=u,l++}return c}dispatchRowDataUpdateStarted(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e!=null&&e.length?e[0]:null})}deselect(e){var s;const t="rowDataChanged",i=this.beans.selectionSvc;e.length&&(i==null||i.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t})),(s=i==null?void 0:i.updateGroupsFromChildrenSelections)==null||s.call(i,t),e.length&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:(i==null?void 0:i.getSelectedNodes())??null,serverSideState:null})}createRowNode(e,t){const i=new sl(this.beans);i.parent=this.rootNode,i.level=t,i.group=!1,i.expanded=!1,i.setDataAndId(e,String(this.nextId++));const s=i.id,n=this.allNodesMap;return n[s]&&J(2,{nodeId:s}),n[s]=i,i}deleteNode(e){var n;e.clearRowTopAndRowIndex();const t=e.id,i=this.allNodesMap;i[t]===e&&delete i[t];const s=e.pinnedSibling;s&&((n=this.beans.pinnedRowModel)==null||n.pinRow(s,null))}lookupNode(e,t){if(!e)return MK(this.rootNode._leafs,t);const i=e({data:t,level:0}),s=this.allNodesMap[i];return s||(At(4,{id:i}),null)}sanitizeAddIndex(e,t){const i=e.length;if(typeof t!="number"||t<0||t>=i||Number.isNaN(t))return i;t=Math.ceil(t);const s=this.gos;return t>0&&s.get("treeData")&&s.get("getDataPath")&&(t=DK(e,t)),t}},DK=(e,t)=>{for(let i=0,s=e.length;i<s;i++){const n=e[i];if((n==null?void 0:n.rowIndex)==t-1)return i+1}return t},OR=e=>{var r;e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",((r=e._leafs)==null?void 0:r.length)!==0&&(e._leafs=[]);const t=[],i=[],s=[],n=[];e.childrenAfterGroup=t,e.childrenAfterSort=i,e.childrenAfterAggFilter=s,e.childrenAfterFilter=n;const o=e.sibling;return o&&(o.childrenAfterGroup=t,o.childrenAfterSort=i,o.childrenAfterAggFilter=s,o.childrenAfterFilter=n,o.childrenMapped=e.childrenMapped),e.updateHasChildren(),e},MK=(e,t)=>{if(e)for(let i=0,s=e.length;i<s;i++){const n=e[i];if(n.data===t)return n}return At(5,{data:t}),null},IK=(e,t,i,s,n)=>{t=Math.max(0,t);for(let o=t,r=e.length;o<r;++o){const a=e[o];o<=i&&(s.has(a)||n!=null&&n.has(a))||(a.sourceRowIndex=t,e[t++]=a)}e.length=t},kK=(e,t)=>{const i=t.size;e.length=i;let s=0,n=!1,o=!1;for(const r of t){const a=r.sourceRowIndex;a===s?o||(o=n):(a>=0?o=!0:n=!0,r.sourceRowIndex=s,e[s]=r),++s}return o},_K=(e,t,{removals:i,adds:s})=>{const n=e.length;e.length=t.size;let o=0;for(let r=0;r<n;++r){const a=e[r];i.has(a)||(o!==r&&(a.sourceRowIndex=o,e[o]=a),++o)}for(const r of s)r.sourceRowIndex<0&&(r.sourceRowIndex=o,e[o++]=r);e.length=o},AM=e=>{const t=e.childrenAfterSort,i=e.sibling;if(i&&(i.childrenAfterSort=t),!!t)for(let s=0,n=t.length-1;s<=n;s++){const o=t[s],r=s===0,a=s===n;o.firstChild!==r&&(o.firstChild=r,o.dispatchRowEvent("firstChildChanged")),o.lastChild!==a&&(o.lastChild=a,o.dispatchRowEvent("lastChildChanged")),o.childIndex!==s&&(o.childIndex=s,o.dispatchRowEvent("childIndexChanged"))}},LK=class extends V{constructor(){super(...arguments),this.beanName="sortStage",this.step="sort",this.refreshProps=["postSortRows","groupDisplayType","accentedSort"]}execute(e){const t=this.beans.sortSvc.getSortOptions(),i=t.length>0&&!!e.changedRowNodes&&this.gos.get("deltaSort");this.sort(t,i,e.changedRowNodes,e.changedPath)}sort(e,t,i,s){const{gos:n,colModel:o,rowGroupColsSvc:r,rowNodeSorter:a,rowRenderer:l,showRowGroupCols:c}=this.beans,d=n.get("groupMaintainOrder"),h=o.getCols().some(w=>w.isRowGroupActive()),u=r==null?void 0:r.columns,f=o.isPivotMode(),p=n.getCallback("postSortRows");let m=!1,v;const C=w=>{var A,P;const S=f&&w.leafGroup;let y=d&&h&&!w.leafGroup;y&&(v??(v=this.shouldSortContainsGroupCols(e)),y&&(y=!v));let R=null;if(y){let T=!1;if(u){const M=w.level+1;M<u.length&&(T=u[M].getSort()===null)}T||(R=HK(w))}else!e.length||S||(t&&i?R=OK(a,w,i,s,e):R=a.doFullSort(w.childrenAfterAggFilter,e));if(R||(R=((A=w.childrenAfterAggFilter)==null?void 0:A.slice(0))??[]),m||(m=((P=w.childrenAfterSort)==null?void 0:P[0])!==R[0]),w.childrenAfterSort=R,AM(w),p){const T={nodes:w.childrenAfterSort};p(T)}};if(s==null||s.forEachChangedNodeDepthFirst(C),m&&n.get("groupHideOpenParents")){const w=c==null?void 0:c.getShowRowGroupCols();w!=null&&w.length&&l.refreshCells({columns:w,force:!0})}}shouldSortContainsGroupCols(e){const t=e.length;if(!t)return!1;if(Mo(this.gos)){for(let i=0;i<t;++i){const s=e[i].column;if(s.isPrimary()&&s.isRowGroupActive())return!0}return!1}for(let i=0;i<t;++i)if(e[i].column.getColDef().showRowGroup)return!0;return!1}},OK=(e,t,i,s,n)=>{const o=t.childrenAfterAggFilter,r=t.childrenAfterSort;if(!r)return e.doFullSort(o,n);const a=new Set,l=[],{updates:c,adds:d}=i;for(let u=0,f=o.length;u<f;++u){const p=o[u];c.has(p)||d.has(p)||s&&!s.canSkip(p)?l.push({currentPos:l.length,rowNode:p}):a.add(p)}const h=r.filter(u=>a.has(u)).map((u,f)=>({currentPos:f,rowNode:u}));return l.sort((u,f)=>e.compareRowNodes(n,u,f)),NK(e,n,l,h)},NK=(e,t,i,s)=>{let n=0,o=0;const r=i.length,a=s.length,l=new Array(r+a);let c=0;for(;n<r&&o<a;){const d=i[n],h=s[o];e.compareRowNodes(t,d,h)<0?(l[c++]=d.rowNode,++n):(l[c++]=h.rowNode,++o)}for(;n<r;)l[c++]=i[n++].rowNode;for(;o<a;)l[c++]=s[o++].rowNode;return l},HK=e=>{const t=e.childrenAfterSort,i=e.childrenAfterAggFilter,s=t==null?void 0:t.length,n=i==null?void 0:i.length;if(!s||!n)return null;const o=new Array(n),r=new Set;for(let l=0;l<n;++l)r.add(i[l]);let a=0;for(let l=0;l<s;++l){const c=t[l];r.delete(c)&&(o[a++]=c)}if(r.size===0&&a===s)return t;for(const l of r)o[a++]=l;return o.length=a,o},GK=class extends V{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowCountReady=!1,this.nodeManager=void 0,this.rowsToDisplay=[],this.rowDataUpdatedPending=!1,this.asyncTransactions=null,this.asyncTransactionsTimer=0,this.started=!1,this.refreshingModel=!1,this.rowNodesCountReady=!1,this.stages=[],this.stagesRefreshProps=new Map,this.onRowHeightChanged_debounced=Vi(this,this.onRowHeightChanged.bind(this),100)}postConstruct(){const e=this.beans,t=new sl(e);this.rootNode=t,this.nodeManager=this.createBean(new TK(t));const i=this.refreshModel.bind(this,{step:"group"}),s=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:s,columnRowGroupChanged:i,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:i,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this),rowExpansionStateChanged:this.onRowGroupOpened.bind(this)}),this.addPropertyListeners()}addPropertyListeners(){const{beans:e,stagesRefreshProps:t}=this,i=[e.groupStage,e.filterStage,e.pivotStage,e.aggStage,e.sortStage,e.filterAggStage,e.flattenStage].filter(s=>!!s);this.stages=i;for(let s=i.length-1;s>=0;--s)for(const n of i[s].refreshProps)t.set(n,s);this.addManagedPropertyListeners([...t.keys()],s=>{var o;const n=(o=s.changeSet)==null?void 0:o.properties;n&&this.onPropChange(n)}),this.addManagedPropertyListener("rowData",()=>this.onPropChange(["rowData"])),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,i,s){let n,o=!1;do{n=!1;const r=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(r,i),c=Math.min(a,s);for(let d=l;d<=c;d++){const h=this.getRow(d);if(h.rowHeightEstimated){const u=tl(this.beans,h);h.setRowHeight(u.height),n=!0,o=!0}}n&&this.setRowTopAndRowIndex()}while(n);return o}onPropChange(e){const{nodeManager:t,gos:i,beans:s}=this,n=s.groupStage;if(!t)return;const o=new Set(e),r=n==null?void 0:n.onPropChange(o);let a;o.has("rowData")?a=i.get("rowData"):r&&(a=n==null?void 0:n.extractData()),a&&!Array.isArray(a)&&(a=null,J(1));const l={step:"nothing",changedProps:o};a&&(!r&&!this.isEmpty()&&a.length>0&&i.exists("getRowId")&&!i.get("resetRowDataOnUpdate")?(l.keepRenderedRows=!0,l.animate=!i.get("suppressAnimationFrame"),l.changedRowNodes=new _m,t.setImmutableRowData(l,a)):(l.rowDataUpdated=!0,l.newData=!0,t.setNewRowData(a),this.rowNodesCountReady=!0));const c=l.rowDataUpdated?"group":this.getRefreshedStage(e);c&&(l.step=c,this.refreshModel(l))}getRefreshedStage(e){const{stages:t,stagesRefreshProps:i}=this,s=t.length;let n=s;for(let o=0,r=e.length;o<r&&n;++o)n=Math.min(n,i.get(e[o])??n);return n<s?t[n].step:null}setRowTopAndRowIndex(e){const{beans:t,rowsToDisplay:i}=this,s=t.environment.getDefaultRowHeight();let n=0;const o=$i(this.gos,"normal");for(let r=0,a=i.length;r<a;++r){const l=i[r],c=l.id;if(c!=null&&(e==null||e.add(c)),l.rowHeight==null){const d=tl(t,l,o,s);l.setRowHeight(d.height,d.estimated)}l.setRowTop(n),l.setRowIndex(r),n+=l.rowHeight}}clearRowTopAndRowIndex(e,t){const i=e.active,s=r=>{(r==null?void 0:r.id)!=null&&!t.has(r.id)&&r.clearRowTopAndRowIndex()},n=r=>{s(r),s(r.detailNode),s(r.sibling);const a=r.childrenAfterGroup;if(!r.hasChildren()||!a)return;const l=r.level==-1;if(!(i&&!l&&!r.expanded))for(let d=0,h=a.length;d<h;++d)n(a[d])},o=this.rootNode;o&&n(o)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay.length}getTopLevelRowCount(){var n,o;const{rootNode:e,rowsToDisplay:t}=this;if(!e||!t.length)return 0;if(t[0]===e)return 1;const s=(n=e.sibling)!=null&&n.displayed?1:0;return(((o=e.childrenAfterSort)==null?void 0:o.length)??0)+s}getTopLevelRowDisplayedIndex(e){const{beans:t,rootNode:i,rowsToDisplay:s}=this;if(!i||!s.length||s[0]===i)return e;const o=i.childrenAfterSort,r=l=>{let c=o[l];if(this.gos.get("groupHideOpenParents"))for(;c.expanded&&c.childrenAfterSort&&c.childrenAfterSort.length>0;)c=c.childrenAfterSort[0];return c.rowIndex},a=t.footerSvc;return a?a==null?void 0:a.getTopDisplayIndex(s,e,o,r):r(e)}getTopLevelIndexFromDisplayedIndex(e){var a;const{rootNode:t,rowsToDisplay:i}=this;if(!t||!i.length||i[0]===t)return e;let n=this.getRow(e);n.footer&&(n=n.sibling);let o=n.parent;for(;o&&o!==t;)n=o,o=n.parent;const r=((a=t.childrenAfterSort)==null?void 0:a.indexOf(n))??-1;return r>=0?r:e}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){this.refreshModel({step:"map",keepRenderedRows:!0,animate:Gd(this.gos)})}onFilterChanged({afterDataChange:e,columns:t}){if(!e){const s=t.length===0||t.some(n=>n.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:s,keepRenderedRows:!0,animate:Gd(this.gos)})}}onSortChanged(){this.refreshModel({step:"sort",keepRenderedRows:!0,animate:Gd(this.gos)})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.beans.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new kg(!1,this.rootNode);return t.active=e,t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:i,rowDataUpdated:s}=e;return!(!t||i||!s||t.removals.size||t.adds.size)}refreshModel(e){var c,d;const{nodeManager:t,beans:i,eventSvc:s,started:n,refreshingModel:o}=this;if(!t)return;const r=!!e.rowDataUpdated,a=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&r));if(n&&r&&s.dispatchEvent({type:"rowDataUpdated"}),!n||o||i.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e)){this.rowDataUpdatedPending||(this.rowDataUpdatedPending=r);return}switch(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.step="group"),this.refreshingModel=!0,(c=i.masterDetailSvc)==null||c.refreshModel(e),r&&e.step!=="group"&&((d=i.colFilter)==null||d.refreshModel()),e.step){case"group":this.doGrouping(e);case"filter":this.doFilter(a);case"pivot":this.doPivot(a);case"aggregate":this.doAggregate(a);case"filter_aggregates":this.doFilterAggregates(a);case"sort":this.doSort(e.changedRowNodes,a);case"map":this.doRowsToDisplay()}const l=new Set;this.setRowTopAndRowIndex(l),this.clearRowTopAndRowIndex(a,l),this.refreshingModel=!1,s.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){var e,t,i;return!((t=(e=this.rootNode)==null?void 0:e._leafs)!=null&&t.length)||!((i=this.beans.colModel)!=null&&i.ready)}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,s=!1;const n=[],o=Dg(this.gos);return this.forEachNodeAfterFilterAndSort(r=>{if(s)return;if(i&&(r===t||r===e)&&(s=!0,o&&r.group)){FM(n,r);return}if(!i){if(r!==t&&r!==e)return;i=!0,t===e&&(s=!0)}(!r.group||!o)&&n.push(r)}),n}getTopLevelNodes(){var e;return((e=this.rootNode)==null?void 0:e.childrenAfterGroup)??null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay,i=t.length;if(this.isEmpty()||i===0)return-1;let s=0,n=i-1;if(e<=0)return 0;if(t[n].rowTop<=e)return n;let r=-1,a=-1;for(;;){const l=Math.floor((s+n)/2),c=t[l];if(this.isRowInPixel(c,e)||(c.rowTop<e?s=l+1:c.rowTop>e&&(n=l-1),r===s&&a===n))return l;r=s,a=n}}isRowInPixel(e,t){const i=e.rowTop,s=i+e.rowHeight;return i<=t&&s>t}forEachLeafNode(e){var i;const t=(i=this.rootNode)==null?void 0:i._leafs;if(t)for(let s=0,n=t.length;s<n;++s)e(t[s],s)}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){const t=this.rowsToDisplay;for(let i=0,s=t.length;i<s;++i)e(t[i],i)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,i=>i.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,i=>i.childrenAfterSort)}forEachPivotNode(e,t,i){const{colModel:s,rowGroupColsSvc:n}=this.beans;if(!s.isPivotMode())return;if(!(n!=null&&n.columns.length)){e(this.rootNode,0);return}const o=i?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,r=>r.leafGroup?null:r[o])}depthFirstSearchRowNodes(e,t=!1,i=o=>o.childrenAfterGroup,s=this.rootNode,n=0){let o=n;if(!s)return o;const r=s===this.rootNode;if(r||e(s,o++),s.hasChildren()&&!s.footer){const a=i(s);if(a){const l=this.beans.footerSvc;o=(l==null?void 0:l.addTotalRows(o,s,e,t,r,"top"))??o;for(const c of a)o=this.depthFirstSearchRowNodes(e,t,i,c,o);return(l==null?void 0:l.addTotalRows(o,s,e,t,r,"bottom"))??o}}return o}doAggregate(e){var i;const t=this.rootNode;t&&((i=this.beans.aggStage)==null||i.execute({rowNode:t,changedPath:e}))}doFilterAggregates(e){const t=this.rootNode,i=this.beans.filterAggStage;if(i){i.execute({rowNode:t,changedPath:e});return}t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){const i=this.beans.sortStage;if(i){i.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t});return}t.forEachChangedNodeDepthFirst(s=>{s.childrenAfterSort=s.childrenAfterAggFilter.slice(0),AM(s)})}doGrouping(e){var n;const t=this.rootNode,i=this.beans.groupStage,s=i==null?void 0:i.execute({rowNode:t,changedRowNodes:e.changedRowNodes,changedPath:e.changedPath,afterColumnsChanged:!!e.afterColumnsChanged});if(s===void 0){const o=t._leafs;t.childrenAfterGroup=o,t.updateHasChildren();const r=t.sibling;r&&(r.childrenAfterGroup=o)}(s||e.rowDataUpdated)&&((n=this.beans.colFilter)==null||n.refreshModel()),!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){const t=this.beans.filterStage;if(t){t.execute({rowNode:this.rootNode,changedPath:e});return}e.forEachChangedNodeDepthFirst(i=>{i.childrenAfterFilter=i.childrenAfterGroup,JD(i)},!0)}doPivot(e){var t;(t=this.beans.pivotStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){var s,n;const t=(s=this.nodeManager)==null?void 0:s.getRowNode(e);return typeof t=="object"?t:typeof e=="string"&&e.indexOf(by)===0?(n=this.beans.groupStage)==null?void 0:n.getNode(e):void 0}batchUpdateRowData(e,t){if(!this.asyncTransactionsTimer){this.asyncTransactions=[];const i=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimer=setTimeout(()=>this.executeBatchUpdateRowData(),i)}this.asyncTransactions.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){const e=this.asyncTransactionsTimer;e&&(clearTimeout(e),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var a;const{nodeManager:e,beans:t,eventSvc:i,asyncTransactions:s}=this;if(!e)return;(a=t.valueCache)==null||a.onDataChanged();const n=[],o=[],r=new _m;for(const{rowDataTransaction:l,callback:c}of s??[]){this.rowNodesCountReady=!0;const d=e.updateRowData(l,r);n.push(d),c&&o.push(c.bind(null,d))}this.commitTransactions(r),o.length>0&&setTimeout(()=>{for(let l=0,c=o.length;l<c;l++)o[l]()},0),n.length>0&&i.dispatchEvent({type:"asyncTransactionsFlushed",results:n}),this.asyncTransactionsTimer=0,this.asyncTransactions=null}updateRowData(e){var n;const t=this.nodeManager;if(!t)return null;(n=this.beans.valueCache)==null||n.onDataChanged(),this.rowNodesCountReady=!0;const i=new _m,s=t.updateRowData(e,i);return this.commitTransactions(i),s}commitTransactions(e){this.refreshModel({step:"group",rowDataUpdated:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:e,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){const{beans:e,rootNode:t}=this,i=e.flattenStage;if(i){this.rowsToDisplay=i.execute({rowNode:t});return}const s=this.rootNode.childrenAfterSort??[];for(const n of s)n.setUiLevel(0);this.rowsToDisplay=s}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0);const i=e.sibling;i==null||i.setRowHeight(i.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i==null||i.setRowHeight(i.rowHeight,!0);const s=t.sibling;s==null||s.setRowHeight(s.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){var t;e.rowHeightChanged&&!((t=this.beans.rowAutoHeight)!=null&&t.active)&&this.resetRowHeights()}onGridReady(){this.started||this.setInitialData()}destroy(){super.destroy(),this.nodeManager=this.destroyBean(this.nodeManager),this.started=!1,this.rootNode=null,this.rowsToDisplay=[],this.asyncTransactions=null,clearTimeout(this.asyncTransactionsTimer)}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}},FM=(e,t)=>{const i=t.childrenAfterGroup;if(i)for(let s=0,n=i.length;s<n;++s){const o=i[s];o.data&&e.push(o),o.group&&FM(e,o)}};function BK(e){var t;(t=e.expansionSvc)==null||t.onGroupExpandedOrCollapsed()}function VK(e,t){const i=hl(e);i&&((!t||t==="everything")&&(t="group"),i.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))}function zK(e){var t;return((t=hl(e))==null?void 0:t.isEmpty())??!0}function WK(e,t){var i;(i=hl(e))==null||i.forEachLeafNode(t)}function $K(e,t){var i;(i=hl(e))==null||i.forEachNodeAfterFilter(t)}function UK(e,t){var i;(i=hl(e))==null||i.forEachNodeAfterFilterAndSort(t)}function jK(e,t){return e.frameworkOverrides.wrapIncoming(()=>{var i;return(i=hl(e))==null?void 0:i.updateRowData(t)})}function KK(e,t,i){e.frameworkOverrides.wrapIncoming(()=>{var s;return(s=hl(e))==null?void 0:s.batchUpdateRowData(t,i)})}function qK(e){e.frameworkOverrides.wrapIncoming(()=>{var t;return(t=hl(e))==null?void 0:t.flushAsyncTransactions()})}function YK(e){var t;return(t=e.selectionSvc)==null?void 0:t.getBestCostNodeSelection()}var XK={moduleName:"ClientSideRowModel",version:ue,rowModels:["clientSide"],beans:[GK,LK],dependsOn:[qD]},QK={moduleName:"ClientSideRowModelApi",version:ue,apiFunctions:{onGroupExpandedOrCollapsed:BK,refreshClientSideRowModel:VK,isRowDataEmpty:zK,forEachLeafNode:WK,forEachNodeAfterFilter:$K,forEachNodeAfterFilterAndSort:UK,applyTransaction:jK,applyTransactionAsync:KK,flushAsyncTransactions:qK,getBestCostNodeSelection:YK,resetRowHeights:EM,onRowHeightChanged:RM},dependsOn:[RK,EK]},JK=class extends V{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){const{allColumns:i,columnKeys:s,skipRowGroups:n,exportRowNumbers:o}=t,r=this.getColumnsToExport({allColumns:i,skipRowGroups:n,columnKeys:s,exportRowNumbers:o});return[this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t)].reduce((a,l)=>l(a),e).parse()}processRow(e,t,i,s){var p;const n=t.shouldRowBeSkipped||(()=>!1),r=t.rowPositions!=null||!!t.onlySelected,a=this.gos.get("groupHideOpenParents")&&!r,l=this.colModel.isPivotMode()?s.leafGroup:!s.group,c=!!s.footer,d=s.allChildrenCount===1&&((p=s.childrenAfterGroup)==null?void 0:p.length)===1&&JH(this.gos,s);if(!l&&!c&&(t.skipRowGroups||d||a)||t.onlySelected&&!s.isSelected()||t.skipPinnedTop&&s.rowPinned==="top"||t.skipPinnedBottom&&s.rowPinned==="bottom"||s.stub||s.level===-1&&!l&&!c||n(Le(this.gos,{node:s})))return;const f=e.onNewBodyRow(s);if(i.forEach((m,v)=>{f.onColumn(m,v,s)}),t.getCustomContentBelowRow){const m=t.getCustomContentBelowRow(Le(this.gos,{node:s}));m&&e.addCustomContent(m)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const s=new AT,{colGroupSvc:n}=this.beans,o=n?n.createColumnGroups({columns:t,idCreator:s,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(o,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const s=i.onNewHeaderRow();t.forEach((n,o)=>{s.onColumn(n,o,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{var n,o;const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(r=>r.rowPinned==="top").sort((r,a)=>r.rowIndex-a.rowIndex).map(r=>{var a;return(a=this.pinnedRowModel)==null?void 0:a.getPinnedTopRow(r.rowIndex)}).forEach(s):(n=this.pinnedRowModel)!=null&&n.isManual()||(o=this.pinnedRowModel)==null||o.forEachPinnedRow("top",s),i}}processRows(e,t){return i=>{var c;const s=this.rowModel,n=oi(this.gos),o=vu(this.gos),r=!n&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(d=>d.rowPinned==null).sort((d,h)=>d.rowIndex-h.rowIndex).map(d=>s.getRow(d.rowIndex)).forEach(a);else if(this.colModel.isPivotMode())n?s.forEachPivotNode(a,!0,l==="filteredAndSorted"):o?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);else if(e.onlySelectedAllPages||r){const d=((c=this.beans.selectionSvc)==null?void 0:c.getSelectedNodes())??[];this.replicateSortedOrder(d),d.forEach(a)}else l==="all"?s.forEachNode(a):n||o?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);return i}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:i}=this.beans;if(!t||!i)return;const s=t.getSortOptions(),n=(o,r)=>{var a,l;return o.rowIndex!=null&&r.rowIndex!=null?o.rowIndex-r.rowIndex:o.level===r.level?((a=o.parent)==null?void 0:a.id)===((l=r.parent)==null?void 0:l.id)?i.compareRowNodes(s,{rowNode:o,currentPos:o.rowIndex??-1},{rowNode:r,currentPos:r.rowIndex??-1}):n(o.parent,r.parent):o.level>r.level?n(o.parent,r):n(o,r.parent)};e.sort(n)}processPinnedBottomRows(e,t){return i=>{var n,o;const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(r=>r.rowPinned==="bottom").sort((r,a)=>r.rowIndex-a.rowIndex).map(r=>{var a;return(a=this.pinnedRowModel)==null?void 0:a.getPinnedBottomRow(r.rowIndex)}).forEach(s):(n=this.pinnedRowModel)!=null&&n.isManual()||(o=this.pinnedRowModel)==null||o.forEachPinnedRow("bottom",s),i}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:i=!1,exportRowNumbers:s=!1,columnKeys:n}=e,{colModel:o,gos:r,visibleCols:a}=this,l=o.isPivotMode(),c=u=>Qr(u)?!1:!Or(u)||s;if(n!=null&&n.length)return o.getColsForKeys(n).filter(c);const d=r.get("treeData");let h=[];return t&&!l?h=o.getCols():h=a.allCols,h=h.filter(u=>c(u)&&(i&&!d?!kS(u):!0)),h}recursivelyAddHeaderGroups(e,t,i){const s=[];for(const n of e){const o=n;if(o.getChildren)for(const r of o.getChildren()??[])s.push(r)}e.length>0&&ni(e[0])&&this.doAddHeaderHeader(t,e,i),s&&s.length>0&&this.recursivelyAddHeaderGroups(s,t,i)}doAddHeaderHeader(e,t,i){const s=e.onNewHeaderGroupingRow();let n=0;for(const o of t){const r=o;let a;i?a=i(Le(this.gos,{columnGroup:r})):a=this.beans.colNames.getDisplayNameForColumnGroup(r,"header");const c=(r.isExpandable()?r.getLeafColumns():[]).reduce((d,h,u,f)=>{let p=Mt(d);return h.getColumnGroupShow()==="open"?(!p||p[1]!=null)&&(p=[u],d.push(p)):p&&p[1]==null&&(p[1]=u-1),u===f.length-1&&p&&p[1]==null&&(p[1]=u),d},[]);s.onColumn(r,a||"",n++,r.getLeafColumns().length-1,c)}}},ZK={moduleName:"SharedExport",version:ue,beans:[JK]},NR=`\r
`,e7=class extends P6{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,NR),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((i,s)=>{s!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,s){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(s)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){t!=0&&(this.result+=this.columnSeparator);const s=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(s.valueFormatted??s.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(J(53),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=NR),this.isFirstLine=!1}},t7=class extends F6{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){J(51);return}const t=this.getMergedParams(e),i=this.getData(t),s=new Blob(["\uFEFF",i],{type:"text/plain"}),n=typeof t.fileName=="function"?t.fileName(Le(this.gos,{})):t.fileName;T6(this.getFileName(n),s)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:i,rowGroupColsSvc:s,valueSvc:n,gos:o}=this,{processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:d,columnSeparator:h}=e;return new e7({colModel:t,colNames:i,valueSvc:n,gos:o,processCellCallback:r||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:d||!1,columnSeparator:h||",",rowGroupColsSvc:s})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function i7(e,t){var i;return(i=e.csvCreator)==null?void 0:i.getDataAsCsv(t)}function s7(e,t){var i;(i=e.csvCreator)==null||i.exportDataAsCsv(t)}var n7={moduleName:"CsvExport",version:ue,beans:[t7],apiFunctions:{getDataAsCsv:i7,exportDataAsCsv:s7},dependsOn:[ZK]},o7=class extends V{constructor(e,t,i){super(),this.id=e,this.parentCache=t,this.params=i,this.state="needsLoading",this.version=0,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:i,beans:s,rowNodes:n}=this;for(let o=0;o<e;o++){const r=i+o,a=new sl(s);a.setRowHeight(t),a.uiLevel=0,a.setRowIndex(r),a.setRowTop(t*r),n.push(a)}}getBlockStateJson(){const{id:e,startRow:t,endRow:i,state:s}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:i,pageStatus:s}}}setDataAndId(e,t,i){fe(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(Ht(this.params.datasource.getRows)){J(90);return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){const{startRow:e,endRow:t,version:i,params:{sortModel:s,filterModel:n},gos:o}=this;return{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,i),failCallback:this.pageLoadFailed.bind(this,i),sortModel:s,filterModel:n,context:Le(o,{}).context}}forEachNode(e,t,i){this.rowNodes.forEach((s,n)=>{this.startRow+n<i&&e(s,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);const i=e-this.startRow;return this.rowNodes[i]}processServerResult(e){const{rowNodes:t,beans:i}=this;t.forEach((n,o)=>{const r=e.rowData?e.rowData[o]:void 0;!n.id&&n.alreadyRendered&&r&&(t[o]=new sl(i),t[o].setRowIndex(n.rowIndex),t[o].setRowTop(n.rowTop),t[o].setRowHeight(n.rowHeight),n.clearRowTopAndRowIndex()),this.setDataAndId(t[o],r,this.startRow+o)});const s=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,s)}destroy(){for(const e of this.rowNodes)e.clearRowTopAndRowIndex();super.destroy()}},r7=2,a7=class extends V{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){const i=Math.floor(e/this.params.blockSize);let s=this.blocks[i];if(!s){if(t)return;s=this.createBlock(i)}return s.getRow(e)}createBlock(e){const t=this.params,i=this.createBean(new o7(e,this,t));return this.blocks[i.id]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),t.rowNodeBlockLoader.addBlock(i),i}refreshCache(){if(this.blockCount==0){this.purgeCache();return}for(const t of this.getBlocksInOrder())t.setStateWaitingToLoad();this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){for(const e of this.getBlocksInOrder())this.destroyBlock(e);super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(el(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(r=>r!=e),i=(r,a)=>a.lastAccessed-r.lastAccessed;t.sort(i);const s=this.params.maxBlocksInCache>0,n=s?this.params.maxBlocksInCache-1:null,o=r7-1;t.forEach((r,a)=>{const l=r.state==="needsLoading"&&a>=o,c=s?a>=n:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(r)||this.isBlockFocused(r))return;this.removeBlockFromCache(r)}})}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const{startRow:i,endRow:s}=e;return t.rowIndex>=i&&t.rowIndex<s}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:i}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,i-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:i,overflowSize:s}=this.params,o=(e.id+1)*i+s;this.rowCount<o&&(this.rowCount=o)}}setRowCount(e,t){this.rowCount=e,fe(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};for(const i of this.getBlocksInOrder())i.forEachNode(e,t,this.rowCount)}getBlocksInOrder(){const e=(i,s)=>i.id-s.id;return Object.values(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];for(const t of this.getBlocksInOrder())t.id*this.params.blockSize>=this.rowCount&&e.push(t);if(e.length>0)for(const t of e)this.destroyBlock(t)}purgeCache(){for(const e of this.getBlocksInOrder())this.removeBlockFromCache(e);this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let s=-1,n=!1;const o={value:0};let r=!1;for(const l of this.getBlocksInOrder())if(!r){if(n&&s+1!==l.id){r=!0;continue}s=l.id,l.forEachNode(c=>{const d=c===e||c===t;(n||d)&&i.push(c),d&&(n=!n)},o,this.rowCount)}return r||n?[]:i}},l7=class extends V{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){if(this.gos.get("rowModelType")!=="infinite")return;const e=this.beans,t=new sl(e);this.rootNode=t,t.level=-1,this.rowHeight=Oc(e),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache())}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy(),this.rootNode=null}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=Oc(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){var t;let e;this.cacheParams?e=!xg(this.cacheParams.sortModel,((t=this.beans.sortSvc)==null?void 0:t.getSortModel())??[]):e=!0,e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){var i;return((i=this.infiniteCache)==null?void 0:i.getRowNodesInRange(e,t))??[]}reset(){var i;if(!this.datasource)return;nu(this.gos)!=null||(i=this.beans.selectionSvc)==null||i.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();const e=this.beans,{filterManager:t,sortSvc:i,rowNodeBlockLoader:s,eventSvc:n,gos:o}=e;this.cacheParams={datasource:this.datasource,filterModel:(t==null?void 0:t.getFilterModel())??{},sortModel:(i==null?void 0:i.getSortModel())??[],rowNodeBlockLoader:s,initialRowCount:o.get("infiniteInitialRowCount"),maxBlocksInCache:o.get("maxBlocksInCache"),rowHeight:Oc(e),overflowSize:o.get("cacheOverflowSize"),blockSize:o.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new a7(this.cacheParams)),n.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){var t;(t=this.infiniteCache)==null||t.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){var e;(e=this.infiniteCache)==null||e.refreshCache()}purgeCache(){var e;(e=this.infiniteCache)==null||e.purgeCache()}isLastRowIndexKnown(){var e;return((e=this.infiniteCache)==null?void 0:e.isLastRowIndexKnown())??!1}setRowCount(e,t){var i;(i=this.infiniteCache)==null||i.setRowCount(e,t)}resetRowHeights(){}onRowHeightChanged(){}};function c7(e){var t;(t=uC(e))==null||t.refreshCache()}function d7(e){var t;(t=uC(e))==null||t.purgeCache()}function h7(e){var t;return(t=uC(e))==null?void 0:t.getRowCount()}var u7=class extends V{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=ZH(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Vi(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Qn(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){el(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(i=>i.state==="needsLoading").slice(0,e);this.activeBlockLoadsCount+=t.length;for(const i of t)i.load();this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach(t=>{const{id:i,state:s}=t.getBlockStateJson();e[i]=s}),e}printCacheStatus(){el(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},g7={moduleName:"InfiniteRowModelCore",version:ue,rowModels:["infinite"],beans:[l7,u7]},f7={moduleName:"InfiniteRowModel",version:ue,apiFunctions:{refreshInfiniteCache:c7,purgeInfiniteCache:d7,getInfiniteRowCount:h7},dependsOn:[g7,AK]},p7="â",m7="â",v7={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},C7=class extends xt{constructor(){super(v7),this.eValue=he,this.eDelta=he,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),s=e.formatValue(i),n=fe(s)?s:i,o=t>=0,r=this.eDelta;o?r.textContent=p7+n:r.textContent=m7+n,r.classList.toggle("ag-value-change-delta-up",o),r.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Wi(this.eDelta)}refresh(e,t=!1){var c;const{value:i,valueFormatted:s}=e,{eValue:n,lastValue:o,beans:r}=this;if(i===o||(fe(s)?n.textContent=s:fe(i)?n.textContent=i:Wi(n),(c=r.filterManager)!=null&&c.isSuppressFlashingCellsBecauseFiltering()))return!1;const a=i&&typeof i=="object"&&"toNumber"in i?i.toNumber():i,l=o&&typeof o=="object"&&"toNumber"in o?o.toNumber():o;if(a===l)return!1;if(typeof a=="number"&&typeof l=="number"){const d=a-l;this.showDelta(e,d)}return o&&n.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}},w7=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}",b7={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]},y7=class extends xt{constructor(){super(b7),this.eCurrent=he,this.refreshCount=0,this.registerCSS(w7)}init(e){this.refresh(e,!0)}addSlideAnimation(){var n;this.refreshCount++;const e=this.refreshCount;(n=this.ePrevious)==null||n.remove();const{beans:t,eCurrent:i}=this,s=ri({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=s,s.textContent=i.textContent,this.getGui().insertBefore(s,i),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{var o;e===this.refreshCount&&((o=this.ePrevious)==null||o.remove(),this.ePrevious=null)},3e3)})}refresh(e,t=!1){var n;let i=e.value;if(Ht(i)&&(i=""),i===this.lastValue||(n=this.beans.filterManager)!=null&&n.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=i;const s=this.eCurrent;return fe(e.valueFormatted)?s.textContent=e.valueFormatted:fe(e.value)?s.textContent=i:Wi(s),!0}},S7=class extends V{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t,i=this.beans.gos.get("cellFlashDuration"),s=this.beans.gos.get("cellFadeDuration")){const n=this.animations[t];n.delete(e);const o=Date.now(),r=o+i,a=o+i+s,l={phase:"flash",flashEndTime:r,fadeEndTime:a};n.set(e,l);const c=`ag-cell-${t}`,d=`${c}-animation`,{comp:h,eGui:{style:u}}=e;h.toggleCss(c,!0),h.toggleCss(d,!1),u.removeProperty("transition"),u.removeProperty("transition-delay"),this.nextAnimationTime&&r+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),i)}),this.nextAnimationTime=r)}advanceAnimations(){const e=Date.now();let t=null;for(const i of Object.keys(this.animations)){const s=this.animations[i],n=`ag-cell-${i}`,o=`${n}-animation`;for(const[r,a]of s){if(!r.isAlive()||!r.comp){s.delete(r);continue}const{phase:l,flashEndTime:c,fadeEndTime:d}=a,h=l==="flash"?c:d;if(!(e+15>=h)){t=Math.min(h,t??1/0);continue}const{comp:f,eGui:{style:p}}=r;switch(l){case"flash":f.toggleCss(n,!1),f.toggleCss(o,!0),p.transition=`background-color ${d-c}ms`,p.transitionDelay=`${c-e}ms`,t=Math.min(d,t??1/0),a.phase="fade";break;case"fade":f.toggleCss(n,!1),f.toggleCss(o,!1),p.removeProperty("transition"),p.removeProperty("transition-delay"),s.delete(r);break}}}t==null?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;const i=w$(e.cellPosition);t.cells[i]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t==null?void 0:t.flashDuration,t==null?void 0:t.fadeDuration)}destroy(){for(const e of Object.keys(this.animations))this.animations[e].clear()}};function x7(e,t={}){const{cellFlashSvc:i}=e;i&&e.frameworkOverrides.wrapIncoming(()=>{for(const s of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns))i.flashCell(s,t)})}var R7={moduleName:"HighlightChanges",version:ue,beans:[S7],userComponents:{agAnimateShowChangeCellRenderer:C7,agAnimateSlideCellRenderer:y7},apiFunctions:{flashCells:x7}};function E7(e){var t;return((t=e.stateSvc)==null?void 0:t.getState())??{}}function A7(e,t,i){var s;return(s=e.stateSvc)==null?void 0:s.setState(t,i)}function HR(e){return e={...e},e.version||(e.version="32.1.0"),e.version==="32.1.0"&&(e=F7(e)),e.version=ue,e}function F7(e){return e.cellSelection=P7(e,"rangeSelection"),e}function P7(e,t){if(e&&typeof e=="object")return e[t]}var T7=class extends V{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Vi(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Vi(this,()=>{this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(this.updateCachedState("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowGroupExpansion",void 0)):(this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("ssrmRowGroupExpansion",void 0))},0),this.onRowSelectedDebounced=Vi(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){const{gos:e,ctrlsSvc:t,colDelayRenderSvc:i}=this.beans;this.isClientSideRowModel=oi(e);const s=HR(e.get("initialState")??{}),n=s.partialColumnState;delete s.partialColumnState,this.cachedState=s;const o=this.suppressEventsAndDispatchInitEvent.bind(this);t.whenReady(this,()=>o(()=>this.setupStateOnGridReady(s))),(s.columnOrder||s.columnVisibility||s.columnSizing||s.columnPinning||s.columnGroup)&&(i==null||i.hideColumns("columnState"));const[r,a,l]=this.addManagedEventListeners({newColumnsLoaded:({source:c})=>{c==="gridInitializing"&&(r(),o(()=>{this.setupStateOnColumnsInitialised(s,!!n),i==null||i.revealColumns("columnState")}))},rowCountReady:()=>{a==null||a(),o(()=>this.setupStateOnRowCountReady(s))},firstDataRendered:()=>{l==null||l(),o(()=>this.setupStateOnFirstDataRendered(s))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setState(e,t){const i=HR(e);delete i.partialColumnState,this.cachedState=i,this.startSuppressEvents();const s="api",n=t?new Set(t):void 0;this.setGridReadyState(i,s,n),this.setColumnsInitialisedState(i,s,!!n,n),this.setRowCountState(i,s,n),setTimeout(()=>{this.isAlive()&&this.setFirstDataRenderedState(i,s,n),this.stopSuppressEvents(s)})}setGridReadyState(e,t,i){var s,n;t==="api"&&!(i!=null&&i.has("sideBar"))&&((n=(s=this.beans.sideBar)==null?void 0:s.comp)==null||n.setState(e.sideBar)),this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(e){this.setGridReadyState(e,"gridInitializing");const t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(e,t,i,s){this.setColumnState(e,t,i,s),this.setColumnGroupState(e,t,s),this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(e,t){this.setColumnsInitialisedState(e,"gridInitializing",t);const i=s=>()=>this.updateColumnState([s]);this.addManagedEventListeners({columnValueChanged:i("aggregation"),columnMoved:i("columnOrder"),columnPinned:i("columnPinning"),columnResized:i("columnSizing"),columnVisible:i("columnVisibility"),columnPivotChanged:i("pivot"),columnPivotModeChanged:i("pivot"),columnRowGroupChanged:i("rowGroup"),sortChanged:i("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(e,t,i){const{filter:s,rowGroupExpansion:n,ssrmRowGroupExpansion:o,rowSelection:r,pagination:a}=e,l=(d,h)=>!(i!=null&&i.has(d))&&(h||t==="api");l("filter",s)&&this.setFilterState(s),l("rowGroupExpansion",n)&&this.setRowGroupExpansionState(o,n,t),l("rowSelection",r)&&this.setRowSelectionState(r,t),l("pagination",a)&&this.setPaginationState(a,t);const c=this.updateCachedState.bind(this);c("filter",this.getFilterState()),this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(c("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),c("rowGroupExpansion",void 0)):(c("rowGroupExpansion",this.getRowGroupExpansionState()),c("ssrmRowGroupExpansion",void 0)),c("rowSelection",this.getRowSelectionState()),c("pagination",this.getPaginationState())}setupStateOnRowCountReady(e){this.setRowCountState(e,"gridInitializing");const t=this.updateCachedState.bind(this),i=()=>{this.updateRowGroupExpansionStateTimer=0,this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(t("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),t("rowGroupExpansion",void 0)):(t("rowGroupExpansion",this.getRowGroupExpansionState()),t("ssrmRowGroupExpansion",void 0))},s=()=>t("filter",this.getFilterState()),{gos:n,colFilter:o}=this.beans;this.addManagedEventListeners({filterChanged:s,rowExpansionStateChanged:this.onRowGroupOpenedDebounced,expandOrCollapseAll:i,columnRowGroupChanged:i,rowDataUpdated:()=>{(n.get("groupDefaultExpanded")!==0||n.get("isGroupOpenByDefault"))&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(i)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:r=>{(r.newPage||r.newPageSize)&&t("pagination",this.getPaginationState())}}),o&&this.addManagedListeners(o,{filterStateChanged:s})}setFirstDataRenderedState(e,t,i){const{scroll:s,cellSelection:n,focusedCell:o,columnOrder:r,rowPinning:a}=e,l=(h,u)=>!(i!=null&&i.has(h))&&(u||t==="api");l("focusedCell",o)&&this.setFocusedCellState(o),l("cellSelection",n)&&this.setCellSelectionState(n),l("scroll",s)&&this.setScrollState(s),l("rowPinning",a)&&this.setRowPinningState(a),this.setColumnPivotState(!!(r!=null&&r.orderedColIds),t);const c=this.updateCachedState.bind(this);c("sideBar",this.getSideBarState()),c("focusedCell",this.getFocusedCellState());const d=this.getRangeSelectionState();c("rangeSelection",d),c("cellSelection",d),c("scroll",this.getScrollState())}setupStateOnFirstDataRendered(e){this.setFirstDataRenderedState(e,"gridInitializing");const t=this.updateCachedState.bind(this),i=()=>t("focusedCell",this.getFocusedCellState());this.addManagedEventListeners({cellFocused:i,cellFocusCleared:i,cellSelectionChanged:s=>{if(s.finished){const n=this.getRangeSelectionState();t("rangeSelection",n),t("cellSelection",n)}},bodyScrollEnd:()=>t("scroll",this.getScrollState()),pinnedRowsChanged:()=>t("rowPinning",this.getRowPinningState())})}getColumnState(){const e=this.beans;return R6(av(e),e.colModel.isPivotMode())}setColumnState(e,t,i,s){const{sort:n,rowGroup:o,aggregation:r,pivot:a,columnPinning:l,columnVisibility:c,columnSizing:d,columnOrder:h}=e;let u=!1;const f=(_,L)=>{const z=!(s!=null&&s.has(_))&&!!(L||t==="api");return u||(u=z),z},p={},m=_=>{let L=p[_];return L||(L={colId:_},p[_]=L,L)},v={},C=f("sort",n);C&&(n==null||n.sortModel.forEach(({colId:_,sort:L},z)=>{const q=m(_);q.sort=L,q.sortIndex=z})),(C||!i)&&(v.sort=null,v.sortIndex=null);const w=f("rowGroup",o);w&&(o==null||o.groupColIds.forEach((_,L)=>{const z=m(_);z.rowGroup=!0,z.rowGroupIndex=L})),(w||!i)&&(v.rowGroup=null,v.rowGroupIndex=null);const S=f("aggregation",r);S&&(r==null||r.aggregationModel.forEach(({colId:_,aggFunc:L})=>{m(_).aggFunc=L})),(S||!i)&&(v.aggFunc=null);const y=f("pivot",a);y&&(a==null||a.pivotColIds.forEach((_,L)=>{const z=m(_);z.pivot=!0,z.pivotIndex=L}),this.gos.updateGridOptions({options:{pivotMode:!!(a!=null&&a.pivotMode)},source:t})),(y||!i)&&(v.pivot=null,v.pivotIndex=null);const R=f("columnPinning",l);if(R){for(const _ of(l==null?void 0:l.leftColIds)??[])m(_).pinned="left";for(const _ of(l==null?void 0:l.rightColIds)??[])m(_).pinned="right"}(R||!i)&&(v.pinned=null);const A=f("columnVisibility",c);if(A)for(const _ of(c==null?void 0:c.hiddenColIds)??[])m(_).hide=!0;(A||!i)&&(v.hide=null);const P=f("columnSizing",d);if(P)for(const{colId:_,flex:L,width:z}of(d==null?void 0:d.columnSizingModel)??[]){const q=m(_);q.flex=L??null,q.width=z}(P||!i)&&(v.flex=null);const T=h==null?void 0:h.orderedColIds,M=!!(T!=null&&T.length)&&!(s!=null&&s.has("columnOrder")),N=M?T.map(_=>m(_)):Object.values(p);(N.length||u)&&(this.columnStates=N,Yn(this.beans,{state:N,applyOrder:M,defaultState:v},t))}setColumnPivotState(e,t){const i=this.columnStates;this.columnStates=void 0;const s=this.columnGroupStates;this.columnGroupStates=void 0;const n=this.beans,{pivotResultCols:o,colGroupSvc:r}=n;if(o!=null&&o.isPivotResultColsPresent()){if(i){const a=[];for(const l of i)o.getPivotResultCol(l.colId)&&a.push(l);Yn(n,{state:a,applyOrder:e},t)}s&&(r==null||r.setColumnGroupState(s,t))}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;const t=e.getColumnGroupState();return E6(t)}setColumnGroupState(e,t,i){var a;const s=this.beans.colGroupSvc;if(!s||i!=null&&i.has("columnGroup")||t!=="api"&&!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const n=new Set((a=e.columnGroup)==null?void 0:a.openColumnGroupIds),r=s.getColumnGroupState().map(({groupId:l})=>{const c=n.has(l);return c&&n.delete(l),{groupId:l,open:c}});for(const l of n)r.push({groupId:l,open:!0});r.length&&(this.columnGroupStates=r),s.setColumnGroupState(r,t)}getFilterState(){const e=this.beans.filterManager;let t=e==null?void 0:e.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);const i=e==null?void 0:e.getFilterState(),s=(e==null?void 0:e.getAdvFilterModel())??void 0;return t||s||i?{filterModel:t,columnFilterState:i,advancedFilterModel:s}:void 0}setFilterState(e){const t=this.beans.filterManager,{filterModel:i,columnFilterState:s,advancedFilterModel:n}=e??{filterModel:null,columnFilterState:null,advancedFilterModel:null};(i!==void 0||s!==void 0)&&(t==null||t.setFilterState(i??null,s??null,"columnFilter")),n!==void 0&&(t==null||t.setAdvFilterModel(n??null,"advancedFilter"))}getRangeSelectionState(){var t;const e=(t=this.beans.rangeSvc)==null?void 0:t.getCellRanges().map(i=>{const{id:s,type:n,startRow:o,endRow:r,columns:a,startColumn:l}=i;return{id:s,type:n,startRow:o,endRow:r,colIds:a.map(c=>c.getColId()),startColId:l.getColId()}});return e!=null&&e.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:i,colModel:s,visibleCols:n}=this.beans;if(!$r(t)||!i)return;const o=[];for(const r of(e==null?void 0:e.cellRanges)??[]){const a=[];for(const c of r.colIds){const d=s.getCol(c);d&&a.push(d)}if(!a.length)continue;let l=s.getCol(r.startColId);if(!l){const c=n.allCols,d=new Set(a);l=c.find(h=>d.has(h))}o.push({...r,columns:a,startColumn:l})}i.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=(e==null?void 0:e.getHScrollPosition())??{left:0},{top:i}=(e==null?void 0:e.getVScrollPosition())??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:i}=e??{top:0,left:0},{frameworkOverrides:s,rowRenderer:n,animationFrameSvc:o,ctrlsSvc:r}=this.beans;s.wrapIncoming(()=>{var a;r.get("center").setCenterViewportScrollLeft(i),(a=r.getScrollFeature())==null||a.setVerticalScrollPosition(t),n.redraw({afterScroll:!0}),o==null||o.flushAllFrames()})}getSideBarState(){var e,t;return(t=(e=this.beans.sideBar)==null?void 0:e.comp)==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:s}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:s}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{focusSvc:t,colModel:i}=this.beans;if(!e){t.clearFocusedCell();return}const{colId:s,rowIndex:n,rowPinned:o}=e;t.setFocusedCell({column:i.getCol(s),rowIndex:n,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const i=e.getCurrentPage(),s=t.get("paginationAutoPageSize")?void 0:e.getPageSize();if(!(!i&&!s))return{page:i,pageSize:s}}setPaginationState(e,t){const{pagination:i,gos:s}=this.beans;if(!i)return;const{pageSize:n,page:o}=e??{page:0,pageSize:s.get("paginationPageSize")},r=t==="gridInitializing";n&&!s.get("paginationAutoPageSize")&&i.setPageSize(n,r?"initialState":"pageSizeSelector"),typeof o=="number"&&(r?i.setPage(o):i.goToPage(o))}getRowSelectionState(){var s;const e=this.beans.selectionSvc;if(!e)return;const t=e.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!((s=t==null?void 0:t.toggledNodes)!=null&&s.length)?void 0:t}setRowSelectionState(e,t){var i;(i=this.beans.selectionSvc)==null||i.setSelectionState(e,t,t==="api")}getRowGroupExpansionState(){const{expansionSvc:e}=this.beans;if(e)return e.getExpansionState()}getRowPinningState(){var e;return(e=this.beans.pinnedRowModel)==null?void 0:e.getPinnedState()}setRowPinningState(e){const t=this.beans.pinnedRowModel;e?t==null||t.setPinnedState(e):t==null||t.reset()}setRowGroupExpansionState(e,t,i){const s=this.beans.expansionSvc;if(!s)return;const n=t??{expandedRowGroupIds:[],collapsedRowGroupIds:[]};s.setExpansionState(n,i)}updateColumnState(e){const t=this.getColumnState();let i=!1;const s=this.cachedState;for(const n of Object.keys(t)){const o=t[n];xg(o,s[n])||(i=!0)}this.cachedState={...s,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),xg(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){const e=this.staleStateKeys;for(const t of e)t==="rowSelection"&&this.setCachedStateValue(t,this.getRowSelectionState());e.clear()}dispatchStateUpdateEvent(e){if(!this.suppressEvents){for(const t of e)this.queuedUpdateSources.add(t);this.dispatchStateUpdateEventDebounced()}}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}startSuppressEvents(){var e;this.suppressEvents=!0,(e=this.beans.colAnimation)==null||e.setSuppressAnimation(!0)}stopSuppressEvents(e){setTimeout(()=>{var t;this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&((t=this.beans.colAnimation)==null||t.setSuppressAnimation(!1),this.dispatchStateUpdateEvent([e]))})}suppressEventsAndDispatchInitEvent(e){this.startSuppressEvents(),e(),this.stopSuppressEvents("gridInitializing")}},D7={moduleName:"GridState",version:ue,beans:[T7],apiFunctions:{getState:E7,setState:A7}};function M7(e){return e.rowModel.isLastRowIndexKnown()}function I7(e){var t;return((t=e.pagination)==null?void 0:t.getPageSize())??100}function k7(e){var t;return((t=e.pagination)==null?void 0:t.getCurrentPage())??0}function _7(e){var t;return((t=e.pagination)==null?void 0:t.getTotalPages())??1}function L7(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()}function O7(e){var t;(t=e.pagination)==null||t.goToNextPage()}function N7(e){var t;(t=e.pagination)==null||t.goToPreviousPage()}function H7(e){var t;(t=e.pagination)==null||t.goToFirstPage()}function G7(e){var t;(t=e.pagination)==null||t.goToLastPage()}function B7(e,t){var i;(i=e.pagination)==null||i.goToPage(t)}var V7=class extends V{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,i=()=>{const s=Math.max(Oc(t),1),n=Math.floor(e/s);t.pagination.setPageSize(n,"autoCalculated")};this.isBodyRendered?Vi(this,i,50)():(i(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},Iu="paginationPageSizeSelector",z7={tag:"span",cls:"ag-paging-page-size"},W7=class extends xt{constructor(){super(z7),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(Iu,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!(e!=null&&e.newPageSize))return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){Wi(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(Iu)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),i=!t||!e.includes(t);if(i){const n=this.gos.exists("paginationPageSize"),o=this.gos.get(Iu)!==!0;J(94,{pageSizeSet:n,pageSizesSet:o,pageSizeOptions:e,paginationPageSizeOption:t}),o||J(95,{paginationPageSizeOption:t,paginationPageSizeSelector:Iu}),e.unshift("")}const s=String(i?"":t);this.selectPageSizeComp?(cl(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(s,!0)):this.createPageSizeSelectorComp(e,s),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const i=this.getLocaleTextFunc(),s=i("pageSizeSelectorLabel","Page Size:"),n=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new BS).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(n).setLabel(s).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(Iu);return!Array.isArray(t)||!(t!=null&&t.length)?e:[...t].sort((i,s)=>i-s)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},$7={selector:"AG-PAGE-SIZE-SELECTOR",component:W7},U7=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}",j7=class extends yD{constructor(){super(),this.btFirst=he,this.btPrevious=he,this.btNext=he,this.btLast=he,this.lbRecordCount=he,this.lbFirstRowOnPage=he,this.lbLastRowOnPage=he,this.lbCurrent=he,this.lbTotal=he,this.pageSizeComp=he,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(U7)}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[$7]);const{btFirst:t,btPrevious:i,btNext:s,btLast:n}=this;this.activateTabIndex([t,i,s,n]),t.insertAdjacentElement("afterbegin",fn(e?"last":"first",this.beans)),i.insertAdjacentElement("afterbegin",fn(e?"next":"previous",this.beans)),s.insertAdjacentElement("afterbegin",fn(e?"previous":"next",this.beans)),n.insertAdjacentElement("afterbegin",fn(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(o):Gz(this.beans,o),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){if(!this.areListenersSetup){this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)});for(const e of[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}]){const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:s=>{(s.key===G.ENTER||s.key===G.SPACE)&&(s.preventDefault(),i())}})}Hz(this.beans,this,this.getGui()),this.areListenersSetup=!0}}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):A6(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${t}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-first-row`}},{tag:"span",attrs:{id:`${t}-to`},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-last-row`}},{tag:"span",attrs:{id:`${t}-of`},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${t}-start-page`},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${t}-start-page-number`}},{tag:"span",attrs:{id:`${t}-of-page`},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${t}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const s=this.isZeroPagesToDisplay(),n=e===i-1;this.nextButtonDisabled=n||s,this.lastButtonDisabled=!t||s||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){ZN(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),i=this.pagination.getMasterRowCount(),s=e?i:null,n=this.pagination.getCurrentPage(),o=this.pagination.getPageSize();let r,a;this.isZeroPagesToDisplay()?r=a=0:(r=o*n+1,a=r+o-1,e&&a>s&&(a=s));const l=r+o-1,c=!e&&i<l,d=this.formatNumber(r);this.lbFirstRowOnPage.textContent=d;let h;const u=this.getLocaleTextFunc();c?h=u("pageLastRowUnknown","?"):h=this.formatNumber(a),this.lbLastRowOnPage.textContent=h;const p=t>0?n+1:0,m=this.formatNumber(p);this.lbCurrent.textContent=m;let v,C;if(e)v=this.formatNumber(t),C=this.formatNumber(s);else{const w=u("more","more");v=w,C=w}this.lbTotal.textContent=v,this.lbRecordCount.textContent=C,this.announceAriaStatus(d,h,C,m,v)}announceAriaStatus(e,t,i,s,n){var h,u;const o=this.getLocaleTextFunc(),r=o("page","Page"),a=o("to","to"),l=o("of","of"),c=`${e} ${a} ${t} ${l} ${i}`,d=`${r} ${s} ${l} ${n}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,(h=this.ariaAnnounce)==null||h.announceValue(c,"paginationRow")),d!==this.ariaPageStatus&&(this.ariaPageStatus=d,(u=this.ariaAnnounce)==null||u.announceValue(d,"paginationPage"))}},K7={selector:"AG-PAGINATION",component:j7},q7=class extends V{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return K7}isPaginateChildRows(){const e=this.gos;return e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")?!0:e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;if(!this.active||t===e||typeof t!="number")return;const{editSvc:i}=this.beans;i!=null&&i.isEditing()&&(i.isBatchEditing()?i.cleanupEditors():i.stopEditing(void 0,{source:"api"})),this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(e){var i,s;if(!this.active)return;let t=e;this.paginateChildRows||(t=((s=(i=this.beans.rowModel).getTopLevelIndexFromDisplayedIndex)==null?void 0:s.call(i,e))??e),this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return this.active?e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return fe(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:fe(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:fe(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:fe(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0){this.setZeroRows();return}const i=this.pageSize,s=t-1;this.totalPages=Math.floor(s/i)+1,this.adjustCurrentPageIfInvalid();const n=this.currentPage,o=i*n;let r=i*(n+1)-1;if(r>s&&(r=s),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(o),r===s)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const a=e.getTopLevelRowDisplayedIndex(r+1);this.bottomDisplayedRowIndex=a-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,e===0){this.setZeroRows();return}const{pageSize:t,currentPage:i}=this,s=e-1;this.totalPages=Math.floor(s/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*i,this.bottomDisplayedRowIndex=t*(i+1)-1,this.bottomDisplayedRowIndex>s&&(this.bottomDisplayedRowIndex=s)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:s=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:s,keepRenderedRows:t})}},Y7={moduleName:"Pagination",version:ue,beans:[q7,V7],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:M7,paginationGetPageSize:I7,paginationGetCurrentPage:k7,paginationGetTotalPages:_7,paginationGetRowCount:L7,paginationGoToNextPage:O7,paginationGoToPreviousPage:N7,paginationGoToFirstPage:H7,paginationGoToLastPage:G7,paginationGoToPage:B7},dependsOn:[gC]};function X7(e,t={}){const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(i))}function PM(e,t,i,s,n){t&&(s&&t.parent&&t.parent.level!==-1&&PM(e,t.parent,i,s,n),t.setExpanded(i,void 0,n))}function Q7(e,t){return e.rowModel.getRowNode(t)}function J7(e,t,i,s){e.rowRenderer.addRenderedRowListener(t,i,s)}function Z7(e){return e.rowRenderer.getRenderedNodes()}function eq(e,t,i){e.rowModel.forEachNode(t,i)}function tq(e){return e.rowRenderer.firstRenderedRow}function iq(e){return e.rowRenderer.lastRenderedRow}function sq(e,t){return e.rowModel.getRow(t)}function nq(e){return e.rowModel.getRowCount()}var oq={moduleName:"RowApi",version:ue,apiFunctions:{redrawRows:X7,setRowNodeExpanded:PM,getRowNode:Q7,addRenderedRowListener:J7,getRenderedNodes:Z7,forEachNode:eq,getFirstDisplayedRowIndex:tq,getLastDisplayedRowIndex:iq,getDisplayedRowAtIndex:sq,getDisplayedRowCount:nq}},rq={moduleName:"ScrollApi",version:ue,apiFunctions:{getVerticalPixelRange:C8,getHorizontalPixelRange:w8,ensureColumnVisible:fM,ensureIndexVisible:pM,ensureNodeVisible:b8}};function aq(e,t,i){if(!t)return;const s=e.ctrlsSvc.getGridBodyCtrl().eGridBody,n=`aria-${t}`;i===null?s.removeAttribute(n):s.setAttribute(n,i)}function lq(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function cq(e){e.frameworkOverrides.wrapIncoming(()=>{for(const t of e.ctrlsSvc.getHeaderRowContainerCtrls())t.refresh()})}function dq(e){var t;return((t=e.animationFrameSvc)==null?void 0:t.isQueueEmpty())??!0}function hq(e){var t;(t=e.animationFrameSvc)==null||t.flushAllFrames()}function uq(e){return{rowHeight:Oc(e),headerHeight:Cp(e)}}function gq(e,t={}){var o;const i=[];for(const r of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns)){const a=r.getCellRenderer();a!=null&&i.push(Mg(a))}if((o=t.columns)!=null&&o.length)return i;const s=[],n=Iy(t.rowNodes);for(const r of e.rowRenderer.getAllRowCtrls()){if(n&&!ky(r.rowNode,n)||!r.isFullWidth())continue;const a=r.getFullWidthCellRenderers();for(let l=0;l<a.length;l++){const c=a[l];c!=null&&s.push(Mg(c))}}return[...s,...i]}var fq={moduleName:"RenderApi",version:ue,apiFunctions:{setGridAriaProperty:aq,refreshCells:lq,refreshHeader:cq,isAnimationFrameQueueEmpty:dq,flushAllAnimationFrames:hq,getSizesForCurrentTheme:uq,getCellRendererInstances:gq}};function pq(e,t){var i,s;typeof t=="number"?(i=e.colAutosize)==null||i.sizeColumnsToFit(t,"api"):(s=e.colAutosize)==null||s.sizeColumnsToFitGridBody(t)}function TM({colAutosize:e,visibleCols:t},i,s){Array.isArray(i)?e==null||e.autoSizeCols({colKeys:i,skipHeader:s,source:"api"}):e==null||e.autoSizeCols({...i,colKeys:i.colIds??t.allCols,source:"api"})}function mq(e,t){var i;t&&typeof t=="object"?TM(e,t):(i=e.colAutosize)==null||i.autoSizeAllColumns({source:"api",skipHeader:t})}var vq=class extends V{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){var i;const{gos:e}=this,t=e.get("autoSizeStrategy");if(t){let s=!1;const n=t.type;if(n==="fitGridWidth"||n==="fitProvidedWidth")s=!0;else if(n==="fitCellContents"){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered(t)});const o=e.get("rowData");s=o!=null&&o.length>0&&oi(e)}s&&((i=this.beans.colDelayRenderSvc)==null||i.hideColumns(n))}}autoSizeCols(e){const{eventSvc:t,visibleCols:i}=this.beans;this.innerAutoSizeCols(e).then(s=>{var c;const n=d=>ou(t,Array.from(d),!0,"autosizeColumns");if(!e.scaleUpToFitGridWidth)return n(s);const o=GR(this.beans),r=d=>i.leftCols.some(h=>dg(h,d)),a=d=>i.rightCols.some(h=>dg(h,d)),l=e.colKeys.filter(d=>!Qr(d)&&!Or(d)&&!r(d)&&!a(d));this.sizeColumnsToFit(o,e.source,!0,{defaultMaxWidth:e.defaultMaxWidth,defaultMinWidth:e.defaultMinWidth,columnLimits:(c=e.columnLimits)==null?void 0:c.map(d=>({...d,key:d.colId})),colKeys:l,onlyScaleUp:!0}),n(s)})}innerAutoSizeCols(e){return new Promise((t,i)=>{if(this.shouldQueueResizeOperations)return this.pushResizeOperation(()=>this.innerAutoSizeCols(e).then(t,i));const{colKeys:s,skipHeader:n,skipHeaderGroups:o,stopAtGroup:r,defaultMaxWidth:a,defaultMinWidth:l,columnLimits:c=[],source:d="api"}=e,{animationFrameSvc:h,renderStatus:u,colModel:f,autoWidthCalc:p,visibleCols:m}=this.beans;if(h==null||h.flushAllFrames(),this.timesDelayed<5&&u&&(!u.areHeaderCellsRendered()||!u.areCellsRendered())){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.innerAutoSizeCols(e).then(t,i)});return}this.timesDelayed=0;const v=new Set;let C=-1;const w=Object.fromEntries(c.map(({colId:R,...A})=>[R,A])),S=n??this.gos.get("skipHeaderOnAutoSize"),y=o??S;for(;C!==0;){C=0;const R=[];for(const A of s){if(!A||uG(A))continue;const P=f.getCol(A);if(!P||v.has(P))continue;const T=p.getPreferredWidthForColumn(P,S);if(T>0){const M=w[P.colId]??{};M.minWidth??(M.minWidth=l),M.maxWidth??(M.maxWidth=a);const N=Cq(P,T,M);P.setActualWidth(N,d),v.add(P),C++}R.push(P)}R.length&&m.refresh(d)}y||this.autoSizeColumnGroupsByColumns(s,d,r),t(v)})}autoSizeColumn(e,t,i){this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const{colModel:s,ctrlsSvc:n}=this.beans,o=new Set,r=s.getColsForKeys(e);for(const l of r){let c=l.getParent();for(;c&&c!=i;)c.isPadding()||o.add(c),c=c.getParent()}let a;for(const l of o){for(const c of n.getHeaderRowContainerCtrls())if(a=c.getHeaderCtrlForColumn(l),a)break;a==null||a.resizeLeafColumnsToFit(t)}}autoSizeAllColumns(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(e));return}this.autoSizeCols({colKeys:this.beans.visibleCols.allCols,...e})}addColumnAutosizeListeners(e,t){const i=this.gos.get("skipHeaderOnAutoSize"),s=()=>{this.autoSizeColumn(t,"uiColumnResized",i)};e.addEventListener("dblclick",s);const n=new yl(e);return n.addEventListener("doubleTap",s),()=>{e.removeEventListener("dblclick",s),n.destroy()}}addColumnGroupResize(e,t,i){const s=this.gos.get("skipHeaderOnAutoSize"),n=()=>{const o=[],r=t.getDisplayedLeafColumns();for(const a of r)a.getColDef().suppressAutoSize||o.push(a.getColId());o.length>0&&this.autoSizeCols({colKeys:o,skipHeader:s,stopAtGroup:t,source:"uiColumnResized"}),i()};return e.addEventListener("dblclick",n),()=>e.removeEventListener("dblclick",n)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const i=GR(this.beans);if(i>0){this.sizeColumnsToFit(i,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):J(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",i,s){var p,m;if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,i,s));return}const n={};for(const{key:v,...C}of(s==null?void 0:s.columnLimits)??[])n[typeof v=="string"?v:v.getColId()]=C;const o=this.beans.visibleCols.allCols;if(e<=0||!o.length)return;const r=er(o);if(s!=null&&s.onlyScaleUp&&r>e||e===r&&o.every(C=>{if(C.colDef.suppressSizeToFit)return!0;const w=n==null?void 0:n[C.getId()],S=(w==null?void 0:w.minWidth)??(s==null?void 0:s.defaultMinWidth),y=(w==null?void 0:w.maxWidth)??(s==null?void 0:s.defaultMaxWidth),R=C.getActualWidth();return(S==null||R>=S)&&(y==null||R<=y)}))return;const l=[],c=[];for(const v of o){const C=((p=s==null?void 0:s.colKeys)==null?void 0:p.some(w=>dg(v,w)))??!0;v.getColDef().suppressSizeToFit||!C?c.push(v):l.push(v)}const d=l.slice(0);let h=!1;const u=v=>{Qn(l,v),c.push(v)};for(const v of l){v.resetActualWidth(t);const C=n==null?void 0:n[v.getId()],w=(C==null?void 0:C.minWidth)??(s==null?void 0:s.defaultMinWidth),S=(C==null?void 0:C.maxWidth)??(s==null?void 0:s.defaultMaxWidth),y=v.getActualWidth();typeof w=="number"&&y<w?v.setActualWidth(w,t,!0):typeof S=="number"&&y>S&&v.setActualWidth(S,t,!0)}for(;!h;){h=!0;const v=e-er(c);if(v<=0)for(const C of l){const w=((m=n==null?void 0:n[C.getId()])==null?void 0:m.minWidth)??(s==null?void 0:s.defaultMinWidth)??C.minWidth;C.setActualWidth(w,t,!0)}else{const C=v/er(l);let w=v;for(let S=l.length-1;S>=0;S--){const y=l[S],R=n==null?void 0:n[y.getId()],A=(R==null?void 0:R.minWidth)??(s==null?void 0:s.defaultMinWidth),P=(R==null?void 0:R.maxWidth)??(s==null?void 0:s.defaultMaxWidth),T=y.getMinWidth(),M=y.getMaxWidth(),N=typeof A=="number"&&A>T?A:T,_=typeof P=="number"&&P<M?P:M;let L=Math.round(y.getActualWidth()*C);L<N?(L=N,u(y),h=!1):L>_?(L=_,u(y),h=!1):S===0&&(L=w),y.setActualWidth(L,t,!0),w-=L}}}for(const v of d)v.fireColumnWidthChangedEvent(t);const f=this.beans.visibleCols;f.setLeftValues(t),f.updateBodyWidths(),!i&&ou(this.eventSvc,d,!0,t)}applyAutosizeStrategy(){const{gos:e,colDelayRenderSvc:t}=this.beans,i=e.get("autoSizeStrategy");(i==null?void 0:i.type)!=="fitGridWidth"&&(i==null?void 0:i.type)!=="fitProvidedWidth"||setTimeout(()=>{if(!this.isAlive())return;const s=i.type;if(s==="fitGridWidth"){const{columnLimits:n,defaultMinWidth:o,defaultMaxWidth:r}=i,a=n==null?void 0:n.map(({colId:l,minWidth:c,maxWidth:d})=>({key:l,minWidth:c,maxWidth:d}));this.sizeColumnsToFitGridBody({defaultMinWidth:o,defaultMaxWidth:r,columnLimits:a})}else s==="fitProvidedWidth"&&this.sizeColumnsToFit(i.width,"sizeColumnsToFit");t==null||t.revealColumns(s)})}onFirstDataRendered({colIds:e,...t}){setTimeout(()=>{var s;if(!this.isAlive())return;const i="autosizeColumns";e?this.autoSizeCols({...t,source:i,colKeys:e}):this.autoSizeAllColumns({...t,source:i}),(s=this.beans.colDelayRenderSvc)==null||s.revealColumns(t.type)})}processResizeOperations(){this.shouldQueueResizeOperations=!1;for(const e of this.resizeOperationQueue)e();this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function Cq(e,t,i={}){const s=i.minWidth??e.getMinWidth();t<s&&(t=s);const n=i.maxWidth??e.getMaxWidth();return t>n&&(t=n),t}function GR({ctrlsSvc:e,scrollVisibleSvc:t}){const i=e.getGridBodyCtrl(),n=i.isVerticalScrollShowing()?t.getScrollbarWidth():0;return Ag(i.eGridBody)-n}var wq={moduleName:"ColumnAutoSize",version:ue,beans:[vq],apiFunctions:{sizeColumnsToFit:pq,autoSizeColumns:TM,autoSizeAllColumns:mq},dependsOn:[DD]},bq=".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}";function yq(e){var t;return((t=e.pinnedRowModel)==null?void 0:t.getPinnedTopRowCount())??0}function Sq(e){var t;return((t=e.pinnedRowModel)==null?void 0:t.getPinnedBottomRowCount())??0}function xq(e,t){var i;return(i=e.pinnedRowModel)==null?void 0:i.getPinnedTopRow(t)}function Rq(e,t){var i;return(i=e.pinnedRowModel)==null?void 0:i.getPinnedBottomRow(t)}function Eq(e,t,i){var s;return(s=e.pinnedRowModel)==null?void 0:s.forEachPinnedRow(t,i)}var Aq={moduleName:"PinnedRow",version:ue,beans:[yW],css:[bq],apiFunctions:{getPinnedTopRowCount:yq,getPinnedBottomRowCount:Sq,getPinnedTopRow:xq,getPinnedBottomRow:Rq,forEachPinnedRow:Eq},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},Fq=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column!==this.col||e.rowPinned!=this.firstNode.rowPinned?!1:this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){var i;const e=(i=this.firstNode.__autoHeights)==null?void 0:i[this.col.getColId()];if(e==null)return;let t=0;for(const s of this.spannedNodes)s!==this.lastNode&&(t+=s.rowHeight);return e-t}},Pq=class extends V{constructor(e){super(),this.column=e}buildCache(e){var S;const{column:t,beans:{gos:i,pinnedRowModel:s,rowModel:n,valueSvc:o,pagination:r}}=this,{colDef:a}=t,l=this.getNodeMap(e),c=new Map,d=i.getCallback("isFullWidthRow"),h=a.equals,u=a.spanRows,f=typeof u=="function";let p=null,m=null,v;const C=(y,R)=>{p=y,m=null,v=R},w=y=>{const R=!y.isExpandable()&&!y.group&&!y.detail&&(d?!d({rowNode:y}):!0);if(y.rowIndex==null||!R){C(null,null);return}if(p==null||y.level!==p.level||y.footer||m&&y.rowIndex-1!==(m==null?void 0:m.getLastNode().rowIndex)){C(y,o.getValue(t,y));return}const A=o.getValue(t,y);if(f){const P=Le(i,{valueA:v,nodeA:p,valueB:A,nodeB:y,column:t,colDef:a});if(!u(P)){C(y,A);return}}else if(h?!h(v,A):v!==A){C(y,A);return}if(!m){const P=l==null?void 0:l.get(p);(P==null?void 0:P.firstNode)===p?(P.reset(),m=P):m=new Fq(t,p),c.set(p,m)}m.addSpannedNode(y),c.set(y,m)};switch(e){case"center":(S=n.forEachDisplayedNode)==null||S.call(n,y=>{(!r||r.isRowInPage(y.rowIndex))&&w(y)}),this.centerValueNodeMap=c;break;case"top":s==null||s.forEachPinnedRow("top",w),this.topValueNodeMap=c;break;case"bottom":s==null||s.forEachPinnedRow("bottom",w),this.bottomValueNodeMap=c;break}}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this.getNodeMap(e.rowPinned).get(e)}getNodeMap(e){switch(e){case"top":return this.topValueNodeMap;case"bottom":return this.bottomValueNodeMap;default:return this.centerValueNodeMap}}},Tq=class extends V{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=Vi(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=Vi(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){const e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){const{gos:t}=this.beans;if(!t.get("enableCellSpan")||this.spanningColumns.has(e))return;const i=this.createManagedBean(new Pq(e));this.spanningColumns.set(e,i),i.buildCache("top"),i.buildCache("bottom"),i.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated({node:e}){const{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(this.pinnedTimeout!=null)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t==null||t.createCtrls("top"),t==null||t.createCtrls("bottom")},0);return}this.modelTimeout==null&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t==null||t.createCtrls("center")},0))}buildModelCaches(){this.modelTimeout!=null&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){this.pinnedTimeout!=null&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){const i=this.spanningColumns.get(e);return i?i.isCellSpanning(t):!1}getCellSpanByPosition(e){const{pinnedRowModel:t,rowModel:i}=this.beans,s=e.column,n=e.rowIndex,o=this.spanningColumns.get(s);if(!o)return;let r;switch(e.rowPinned){case"top":r=t==null?void 0:t.getPinnedTopRow(n);break;case"bottom":r=t==null?void 0:t.getPinnedBottomRow(n);break;default:r=i.getRow(n)}if(r)return o.getCellSpan(r)}getCellStart(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.firstNode.rowIndex}:e}getCellEnd(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.getLastNode().rowIndex}:e}getCellSpan(e,t){const i=this.spanningColumns.get(e);if(i)return i.getCellSpan(t)}forEachSpannedColumn(e,t){for(const[i,s]of this.spanningColumns)if(s.isCellSpanning(e)){const n=s.getCellSpan(e);t(i,n)}}destroy(){super.destroy(),this.spanningColumns.clear()}},Dq=class extends jd{constructor(e,t,i){super(e.col,e.firstNode,i,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,i,s,n,o,r){this.eWrapper=i,super.setComp(e,t,i,s,n,o,r),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){const{eGui:e,rowNode:t}=this;!e||t.rowIndex==null||Ym(e,t.rowIndex)}setAriaRowSpan(){nH(this.eGui,this.cellSpan.spannedNodes.size)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){const e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){const{beans:t}=this;if(dC(t)){this.focusedCellPosition=void 0;return}const i=this.isCellFocused();i||(this.focusedCellPosition=void 0),e&&i&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},Mq=class extends pv{onRowIndexChanged(){super.onRowIndexChanged();for(const e of this.getAllCellCtrls())e.refreshAriaRowIndex()}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){var s;const t=(s=this.beans.rowSpanSvc)==null?void 0:s.getCellSpan(e,this.rowNode);if(!(!t||t.firstNode!==this.rowNode))return new Dq(t,this,this.beans)}isCorrectCtrlForSpan(e){var s;const t=(s=this.beans.rowSpanSvc)==null?void 0:s.getCellSpan(e.column,this.rowNode);return!t||t.firstNode!==this.rowNode?!1:e.getCellSpan()===t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},Iq=class extends V{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){const{rowSpanSvc:t}=this.beans,i=this.getCtrlsMap(e),s=i.size,n=this.getAllRelevantRowControls(e),o=new Map;let r=!1;for(const l of n)l.isAlive()&&(t==null||t.forEachSpannedColumn(l.rowNode,(c,d)=>{if(o.has(d.firstNode))return;const h=i.get(d.firstNode);if(h){o.set(d.firstNode,h),i.delete(d.firstNode);return}r=!0;const u=new Mq(d.firstNode,this.beans,!1,!1,!1);o.set(d.firstNode,u)}));this.setCtrlsMap(e,o);const a=o.size===s;if(!(!r&&a)){for(const l of i.values())l.destroyFirstPass(!0),l.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){const{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){const{rowSpanSvc:t}=this.beans,i=t==null?void 0:t.getCellSpanByPosition(e);if(!i)return;const s=this.getCtrlsMap(e.rowPinned).get(i.firstNode);if(s)return s.getAllCellCtrls().find(n=>n.column===e.column)}getCtrls(e){return[...this.getCtrlsMap(e).values()]}destroyRowCtrls(e){for(const t of this.getCtrlsMap(e).values())t.destroyFirstPass(!0),t.destroySecondPass();this.setCtrlsMap(e,new Map)}getCtrlsMap(e){switch(e){case"top":return this.topCtrls;case"bottom":return this.bottomCtrls;default:return this.centerCtrls}}setCtrlsMap(e,t){switch(e){case"top":this.topCtrls=t;break;case"bottom":this.bottomCtrls=t;break;default:this.centerCtrls=t;break}}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},kq={moduleName:"CellSpan",version:ue,beans:[Tq,Iq]},_q=class extends V{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,i=e.colDef,s=i.cellClassRules,n=this.getCellClassParams(e,i);n0(this.beans.expressionSvc,s===this.cellClassRules?void 0:this.cellClassRules,s,n,o=>t.toggleCss(o,!0),o=>t.toggleCss(o,!1)),this.cellClassRules=s}applyUserStyles(){const e=this.column,t=e.colDef,i=t.cellStyle;if(!i)return;let s;if(typeof i=="function"){const n=this.getCellClassParams(e,t);s=i(n)}else s=i;s&&this.cellComp.setUserStyles(s)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,i=e.colDef,s=this.getCellClassParams(e,i);for(const o of this.staticClasses)t.toggleCss(o,!1);const n=this.beans.cellStyles.getStaticCellClasses(i,s);this.staticClasses=n;for(const o of n)t.toggleCss(o,!0)}getCellClassParams(e,t){const{value:i,rowNode:s}=this.cellCtrl;return Le(this.beans.gos,{value:i,data:s.data,node:s,colDef:t,column:e,rowIndex:s.rowIndex})}},Lq=class extends V{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,i,s){n0(this.beans.expressionSvc,void 0,e.cellClassRules,t,i,s),this.processStaticCellClasses(e,t,i)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let s;return typeof i=="function"?s=i(t):s=i,typeof s=="string"&&(s=[s]),s||[]}createCellCustomStyleFeature(e,t){return new _q(e,t)}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(n=>{i(n)})}},Oq={moduleName:"CellStyle",version:ue,beans:[Lq]},Nq={moduleName:"RowStyle",version:ue,beans:[S4]};function Hq(e,t){var i;return!!((i=e.colHover)!=null&&i.isHovered(t))}var Gq=class extends V{constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=i=>{const{beans:s,gos:n,element:o,columns:r}=this,a=s.colHover;if(i??!!n.get("columnHoverHighlight"))this.destroyManagedListeners=this.addManagedElementListeners(o,{mouseover:a.setMouseOver.bind(a,r),mouseout:a.clearMouseOver.bind(a)});else{for(const c of this.destroyManagedListeners)c();this.destroyManagedListeners=[]}}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{this.enableFeature(e)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},Bq="ag-column-hover",Vq=class extends V{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{e||this.clearMouseOver()})}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,i){const s=()=>{const n=this.isHovered(i);t.toggleCss("ag-column-hover",n)};e.addManagedEventListeners({columnHoverChanged:s}),s()}onCellColumnHover(e,t){if(!t)return;const i=this.isHovered(e);t.toggleCss(Bq,i)}addHeaderFilterColumnHoverListener(e,t,i,s){this.createHoverFeature(e,[i],s);const n=()=>{const o=this.isHovered(i);t.toggleCss("ag-column-hover",o)};e.addManagedEventListeners({columnHoverChanged:n}),n()}createHoverFeature(e,t,i){e.createManagedBean(new Gq(t,i))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},zq={moduleName:"ColumnHover",version:ue,beans:[Vq],apiFunctions:{isColumnHovered:Hq}},Wq=class extends V{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){var e,t;this.wrapSvc=(t=(e=this.beans.frameworkOverrides).createGlobalEventListenerWrapper)==null?void 0:t.call(e)}addListener(e,t){var o;const i=((o=this.wrapSvc)==null?void 0:o.wrap(e,t))??t,s=!Om.has(e),n=s?this.asyncListeners:this.syncListeners;n.has(e)||n.set(e,new Set),n.get(e).add(i),this.eventSvc.addListener(e,i,s)}removeListener(e,t){var o,r;const i=((o=this.wrapSvc)==null?void 0:o.unwrap(e,t))??t,s=this.asyncListeners.get(e),n=!!(s!=null&&s.delete(i));n||(r=this.syncListeners.get(e))==null||r.delete(i),this.eventSvc.removeListener(e,i,n)}addGlobalListener(e){var o;const t=((o=this.wrapSvc)==null?void 0:o.wrapGlobal(e))??e,i=(r,a)=>{Om.has(r)&&t(r,a)},s=(r,a)=>{Om.has(r)||t(r,a)};this.globalListenerPairs.set(e,{syncListener:i,asyncListener:s});const n=this.eventSvc;n.addGlobalListener(i,!1),n.addGlobalListener(s,!0)}removeGlobalListener(e){const{eventSvc:t,wrapSvc:i,globalListenerPairs:s}=this,n=(i==null?void 0:i.unwrapGlobal(e))??e;if(s.has(n)){const{syncListener:r,asyncListener:a}=s.get(n);t.removeGlobalListener(r,!1),t.removeGlobalListener(a,!0),s.delete(e)}else this.syncGlobalListeners.delete(n),t.removeGlobalListener(n,!1)}destroyEventListeners(e,t){e.forEach((i,s)=>{i.forEach(n=>this.eventSvc.removeListener(s,n,t)),i.clear()}),e.clear()}destroyGlobalListeners(e,t){for(const i of e)this.eventSvc.removeGlobalListener(i,t);e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:i,asyncListener:s})=>{t.removeGlobalListener(i,!1),t.removeGlobalListener(s,!0)}),e.clear()}};function $q(e,t,i){var s;(s=e.apiEventSvc)==null||s.addListener(t,i)}function Uq(e,t,i){var s;(s=e.apiEventSvc)==null||s.removeListener(t,i)}function jq(e,t){var i;(i=e.apiEventSvc)==null||i.addGlobalListener(t)}function Kq(e,t){var i;(i=e.apiEventSvc)==null||i.removeGlobalListener(t)}var qq={moduleName:"EventApi",version:ue,apiFunctions:{addEventListener:$q,addGlobalListener:jq,removeEventListener:Uq,removeGlobalListener:Kq},beans:[Wq]},Yq={moduleName:"Locale",version:ue,beans:[x6]},Xq=class extends V{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=Vi(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){var a,l,c,d;const{visibleCols:e,rowModel:t,rowSpanSvc:i,pinnedRowModel:s}=this.beans,n=e.autoHeightCols;let o=!1;const r=h=>{var p;const u=h.__autoHeights;let f=tl(this.beans,h).height;for(const m of n){let v=u==null?void 0:u[m.getColId()];const C=i==null?void 0:i.getCellSpan(m,h);if(C){if(C.getLastNode()!==h)continue;if(v=(p=i==null?void 0:i.getCellSpan(m,h))==null?void 0:p.getLastNodeAutoHeight(),!v)return}if(v==null){if(this.colSpanSkipCell(m,h))continue;return}f=Math.max(v,f)}f!==h.rowHeight&&(h.setRowHeight(f),o=!0)};(a=s==null?void 0:s.forEachPinnedRow)==null||a.call(s,"top",r),(l=s==null?void 0:s.forEachPinnedRow)==null||l.call(s,"bottom",r),(c=t.forEachDisplayedNode)==null||c.call(t,r),o&&((d=t.onRowHeightChanged)==null||d.call(t))}setRowAutoHeight(e,t,i){if(e.__autoHeights??(e.__autoHeights={}),t==null){delete e.__autoHeights[i.getId()];return}const s=e.__autoHeights[i.getId()];e.__autoHeights[i.getId()]=t,s!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){const{colModel:i,colViewport:s,visibleCols:n}=this.beans;if(!i.colSpanActive)return!1;let o=[];switch(e.getPinned()){case"left":o=n.getLeftColsForRow(t);break;case"right":o=n.getRightColsForRow(t);break;case null:o=s.getColsWithinViewport(t);break}return!o.includes(e)}setupCellAutoHeight(e,t,i){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;const s=t.parentElement,{rowNode:n,column:o}=e,r=this.beans,a=d=>{var w;if((w=this.beans.editSvc)!=null&&w.isEditing(e)||!e.isAlive()||!i.isAlive())return;const{paddingTop:h,paddingBottom:u,borderBottomWidth:f,borderTopWidth:p}=rd(s),m=h+u+f+p,C=t.offsetHeight+m;if(d<5){const S=Pi(r),y=!(S!=null&&S.contains(t)),R=C==0;if(y||R){window.setTimeout(()=>a(d+1),0);return}}this.setRowAutoHeight(n,C,o)},l=()=>a(0);l();const c=ll(r,t,l);return i.addDestroyFunc(()=>{c(),this.setRowAutoHeight(n,void 0,o)}),!0}setAutoHeightActive(e){this.active=e.list.some(t=>t.isVisible()&&t.isAutoHeight())}areRowsMeasured(){if(!this.active)return!0;const e=this.beans.rowRenderer.getAllRowCtrls();let t=null;for(const{rowNode:i}of e)if((!t||this.beans.colModel.colSpanActive)&&(t=this.beans.colViewport.getColsWithinViewport(i).filter(n=>n.isAutoHeight())),t.length!==0){if(!i.__autoHeights)return!1;for(const s of t){const n=i.__autoHeights[s.getColId()];if(!n||i.rowHeight<n)return!1}}return!0}},Qq={moduleName:"RowAutoHeight",version:ue,beans:[Xq]},Jq={moduleName:"AllCommunity",version:ue,dependsOn:[XK,n7,f7,V6,Q8,J8,Z8,eK,tK,iK,sK,X8,Wj,$j,Uj,zj,Kj,qj,D7,PK,Y7,MD,oq,rq,fq,wq,L$,Aq,CK,n6,Oq,zq,Nq,qq,a6,R7,gM,Yq,Qq,_$,QK,kq]},Zq=W("<option> </option>"),e9=W('<div class="toolbar svelte-33y0l8"><div class="toolbar-group svelte-33y0l8"><span class="label svelte-33y0l8">Theme:</span> <select class="svelte-33y0l8"></select></div> <div class="toolbar-group svelte-33y0l8"><button class="refresh-btn svelte-33y0l8">LÃ m má»i Grid</button></div></div> <div class="grid-wrapper svelte-33y0l8"><div class="ag-theme-alpine" style="height: 100%; width: 100%;"></div></div>',1);function t9(e,t){ft(t,!1),zH.registerModules([Jq]);let i=re(),s,n=re("ag-theme-alpine");const o=[{name:"Alpine",class:"ag-theme-alpine"},{name:"Quartz",class:"ag-theme-quartz"},{name:"Balham",class:"ag-theme-balham"},{name:"Material",class:"ag-theme-material"}];let r=[{field:"athlete",headerName:"VÄV",sortable:!0,filter:!0,flex:2},{field:"age",headerName:"Tuá»i",width:100},{field:"country",headerName:"Quá»c gia",sortable:!0,filter:!0,flex:2},{field:"year",headerName:"NÄm",width:100},{field:"date",headerName:"NgÃ y",width:130},{field:"sport",headerName:"MÃ´n thi",sortable:!0,filter:!0,flex:2},{field:"gold",headerName:"VÃ ng",width:100,cellStyle:{color:"#d4a017"}},{field:"silver",headerName:"Báº¡c",width:100,cellStyle:{color:"#a8a8a8"}},{field:"bronze",headerName:"Äá»ng",width:100,cellStyle:{color:"#cd7f32"}},{field:"total",headerName:"Tá»ng",width:110,cellStyle:{fontWeight:"bold"}}],a=[];Mi(async()=>{try{const w=await fetch("https://www.ag-grid.com/example-assets/olympic-winners.json");if(!w.ok)throw new Error("KhÃ´ng táº£i ÄÆ°á»£c dá»¯ liá»u");a=await w.json(),console.log(`ÄÃ£ táº£i ${a.length} dÃ²ng dá»¯ liá»u thÃ nh cÃ´ng!`);const S={columnDefs:r,rowData:a,pagination:!0,paginationPageSize:20,paginationPageSizeSelector:[10,20,50,100],animateRows:!0,defaultColDef:{flex:1,minWidth:100,resizable:!0,sortable:!0,filter:!0},overlayLoadingTemplate:'<span class="ag-overlay-loading-center">Äang táº£i dá»¯ liá»u...</span>',overlayNoRowsTemplate:'<span class="ag-overlay-loading-center">KhÃ´ng cÃ³ dá»¯ liá»u</span>',onGridReady:y=>{s=y.api},onFirstDataRendered:()=>{b(i)&&b(i).offsetWidth>0&&s.sizeColumnsToFit()},onGridSizeChanged:()=>{b(i)&&b(i).offsetWidth>0&&s.sizeColumnsToFit()}};w6(b(i),S)}catch(w){console.error("Lá»i khi táº£i dá»¯ liá»u:",w),a=[{athlete:"Lá»i",country:"Kiá»m tra máº¡ng"}]}});function l(w){b(i)&&(o.forEach(S=>b(i).classList.remove(S.class)),b(i).classList.add(w),O(n,w),s&&b(i).offsetWidth>0&&setTimeout(()=>s.sizeColumnsToFit(),0))}function c(){s&&s.refreshCells({force:!0})}vt();var d=e9(),h=K(d),u=D(h),f=k(D(u),2);xe(()=>{b(n),jI(()=>{})}),hi(f,5,()=>o,ds,(w,S)=>{var y=Zq(),R=D(y),A={};xe(()=>{Be(R,b(S).name),A!==(A=b(S).class)&&(y.value=(y.__value=b(S).class)??"")}),I(w,y)});var p=k(u,2),m=D(p),v=k(h,2),C=D(v);ns(C,w=>O(i,w),()=>b(i)),mk(f,()=>b(n),w=>O(n,w)),$("change",f,w=>l(w.target.value)),$("click",m,c),I(e,d),pt()}function Hy(e,t){const i=typeof t=="object"&&t!==null;let s=t;if(typeof window<"u")try{const o=localStorage.getItem(e);o!==null&&(i?s={...t,...JSON.parse(o)}:s=o)}catch{}const n=Zt(s);return n.subscribe(o=>{try{localStorage.setItem(e,i?JSON.stringify(o):o)}catch{}}),n}function i9(){const e=Hy("$selectedFace","info"),t=Zt(!0);function i(r){e.set(r),r==="cam"?t.set(!1):t.set(!0)}function s(){t.set(!0)}function n(){t.set(!1)}function o(){t.update(r=>!r)}return{face:e,menuVisible:t,changeFace:i,showMenu:s,hideMenu:n,toggleMenu:o}}const u0=i9(),DM=Zt(!1);function BR(){const e=window.matchMedia("(max-width: 768px)").matches;DM.set(e)}typeof window<"u"&&(BR(),window.addEventListener("resize",BR));function s9(e,t){const i=()=>ht(DM,"$isMobile",s),[s,n]=Xs();var o=de(),r=K(o);{var a=c=>{var d=de(),h=K(d);Oe(h,t,"mobile",{}),I(c,d)},l=c=>{var d=de(),h=K(d);Oe(h,t,"desktop",{}),I(c,d)};ne(r,c=>{i()?c(a):c(l,!1)})}I(e,o),n()}var n9=W("<!> <!> <!>",1),o9=W("<!> <!> <!>",1),r9=W("<!> <!> <!>",1);function a9(e,t){ft(t,!1);let i=ce(t,"option",24,()=>({}));const s=i().mainKey||"layout-main-default",n=i().bodyKey||"layout-body-default",o=i().contentKey||"layout-content-default",r=i().noDivider??!0;i().noSnap;const a=i().mainSizes||[{size:5,snapSize123:2},{size:90,snapSize123:10},{size:5,snapSize123:10}],l=i().bodySizes||[{size:23,snapSize123:10},{size:50,snapSize123:10},{size:30,snapSize123:10}],c=i().contentSizes||[{size:10,snapSize123:5},{size:80,snapSize123:10},{size:10,snapSize123:10}];Lt(()=>{},()=>{console.log("sole:",c)}),Ys(),vt();{let d=Mr(()=>`${r?"no-splitter-divider":""}`);FC(e,{get class(){return b(d)},get key(){return s},horizontal:!0,get defaultSizes(){return a},children:vC,$$slots:{default:(h,u)=>{const f=Mr(()=>u.paneSizes);var p=r9(),m=K(p);jo(m,{index:0,get paneSizes(){return b(f)},children:(w,S)=>{var y=de(),R=K(y);Oe(R,t,"header",{}),I(w,y)},$$slots:{default:!0}});var v=k(m,2);jo(v,{index:1,get paneSizes(){return b(f)},children:(w,S)=>{FC(w,{get key(){return n},horizontal:!1,get defaultSizes(){return l},children:vC,$$slots:{default:(y,R)=>{const A=Mr(()=>R.paneSizes);var P=o9(),T=K(P);jo(T,{index:0,get paneSizes(){return b(A)},children:(L,z)=>{var q=de(),B=K(q);Oe(B,t,"left",{}),I(L,q)},$$slots:{default:!0}});var M=k(T,2);jo(M,{index:1,get paneSizes(){return b(A)},children:(L,z)=>{FC(L,{get key(){return o},horizontal:!0,get defaultSizes(){return c},children:vC,$$slots:{default:(q,B)=>{const Z=Mr(()=>B.paneSizes);var ee=n9(),Y=K(ee);jo(Y,{index:0,get paneSizes(){return b(Z)},children:(Pe,Q)=>{var te=de(),ie=K(te);Oe(ie,t,"head",{}),I(Pe,te)},$$slots:{default:!0}});var ye=k(Y,2);jo(ye,{index:1,get paneSizes(){return b(Z)},children:(Pe,Q)=>{var te=de(),ie=K(te);Oe(ie,t,"content",{}),I(Pe,te)},$$slots:{default:!0}});var De=k(ye,2);jo(De,{index:2,get paneSizes(){return b(Z)},children:(Pe,Q)=>{var te=de(),ie=K(te);Oe(ie,t,"comment",{}),I(Pe,te)},$$slots:{default:!0}}),I(q,ee)}}})},$$slots:{default:!0}});var N=k(M,2);{var _=L=>{jo(L,{index:2,get paneSizes(){return b(A)},children:(z,q)=>{var B=de(),Z=K(B);Oe(Z,t,"right",{}),I(z,B)},$$slots:{default:!0}})};ne(N,L=>{ve(i()),X(()=>i().showBodyRight!==!1)&&L(_)})}I(y,P)}}})},$$slots:{default:!0}});var C=k(v,2);jo(C,{index:2,get paneSizes(){return b(f)},children:(w,S)=>{var y=de(),R=K(y);Oe(R,t,"footer",{}),I(w,y)},$$slots:{default:!0}}),I(h,p)}}})}pt()}const _i={avatar:"https://i.pravatar.cc/120?img=12",name:"Nguyá»n VÄn A",isGroup:!0,membersCount:5,description:"NhÃ³m trao Äá»i cÃ´ng viá»c",members:[{id:1,name:"Nguyá»n VÄn A",avatar:"https://i.pravatar.cc/40?img=12"},{id:2,name:"Tráº§n Thá» B",avatar:"https://i.pravatar.cc/40?img=32"},{id:3,name:"LÃª VÄn C",avatar:"https://i.pravatar.cc/40?img=45"}],media:["https://picsum.photos/200/140?1","https://picsum.photos/200/140?2","https://picsum.photos/200/140?3"],files:[{name:"BÃ¡o_cÃ¡o_T8.pdf",size:"1.2 MB"},{name:"Káº¿_hoáº¡ch.xlsx",size:"340 KB"}]};var l9=W(`<div class="flex items-center justify-between
               px-3 py-2
               rounded-lg
               bg-gray-100
               border-l-4 border-blue-500
               text-sm shadow-sm"><div class="truncate"><span class="font-semibold"> </span> </div> <button class="ml-3 text-gray-500 hover:text-gray-800">â</button></div>`),c9=W('<div class="text-xs text-gray-500 px-2">Äang táº£i file...</div>'),d9=W(`<div class="h-full flex flex-col bg-white border-t border-gray-200"><div class="flex items-center gap-3 px-3 py-2 shrink-0"><button type="button"><!></button> <button type="button"><!></button> <button type="button"><!></button> <!></div> <div class="px-3 pb-2 flex flex-col gap-2"><!> <div class="flex items-end gap-2"><textarea rows="1" class="flex-1 resize-none rounded-2xl
               border border-gray-200
               px-4 py-2 text-sm
               focus:outline-none focus:border-blue-400
               overflow-y-auto">
      </textarea> <button type="button" class="text-blue-500 shrink-0 disabled:opacity-40"><!></button></div> <!></div> <input type="file" accept="image/*" multiple class="hidden"/> <input type="file" multiple class="hidden"/></div>`);function MM(e,t){ft(t,!1);const i=()=>ht(xn,"$replyingTo",n),s=()=>ht(Fr,"$myId",n),[n,o]=Xs();let r=ce(t,"placeholder",8,"Nháº­p tin nháº¯n..."),a=ce(t,"disabled",8,!1),l=ce(t,"autoFocus",8,!1),c=re(""),d=re(),h=re(),u=!1,f=re(!1);function p(){var U;console.log("commitSend sending || uploading || !text.trim() || disabled:",u,b(f),b(c).trim(),a()),u=!0,Un({type:"chat",conversationId:ii($n),from:ii(Fr),message:b(c).trim(),replyTo:((U=ii(xn))==null?void 0:U.id)||null}),O(c,""),xn.set(null),requestAnimationFrame(()=>{u=!1})}function m(U){U.key==="Enter"&&!U.shiftKey&&!U.repeat&&!U.isComposing&&(U.preventDefault(),p())}function v(){var U;(U=b(d))==null||U.click()}function C(){var U;(U=b(h))==null||U.click()}async function w(U){var oe;if(!(!U.length||b(f))){O(f,!0);for(const Ae of U)try{console.log("uploaded0:",Ae);const Ce=await v_(Ae);console.log("uploaded:",Ce),Un({type:"chat",conversationId:ii($n),from:Fr,message:Ce.url,msgType:"media",meta:{mediaType:Ce.type,name:Ce.name,size:Ce.size,mime:Ce.mime},replyTo:((oe=ii(xn))==null?void 0:oe.id)||null})}catch(Ce){console.error("â Upload failed:",Ce)}xn.set(null),O(f,!1)}}function S(U){const oe=Array.from(U.target.files||[]);w(oe),U.target.value=""}function y(){Un({type:"chat",payload:{conversationId:ii($n),from:ii(Fr),type:"sticker",stickerId:"sticker_like"}})}async function R(U){var Ae;const oe=Array.from(U.target.files||[]);if(oe.length){if(oe.length===1){await w(oe),U.target.value="";return}O(f,!0);try{const Ce=await C_(oe);console.log("results:",Ce);const Qe=Ce.images.map(Je=>Je.url),je=Ce.images.map(Je=>Je.url);Un({type:"chat",conversationId:ii($n),from:ii(Fr),msgType:"album",message:JSON.stringify({urls:Qe,fullUrls:je}),replyTo:((Ae=ii(xn))==null?void 0:Ae.id)||null}),xn.set(null)}catch(Ce){console.error("â Upload gallery failed",Ce)}finally{O(f,!1),U.target.value=""}}}vt();var A=d9(),P=D(A),T=D(P),M=D(T);n_(M,{size:"22"});var N=k(T,2),_=D(N);Jk(_,{size:"22"});var L=k(N,2),z=D(L);nA(z,{size:"22"});var q=k(L,2);Vk(q,{size:"22"});var B=k(P,2),Z=D(B);{var ee=U=>{var oe=l9(),Ae=D(oe),Ce=D(Ae),Qe=D(Ce),je=k(Ce),Je=k(Ae,2);xe(()=>{Be(Qe,(i(),s(),X(()=>i().senderId===s()?"Báº¡n":"NgÆ°á»i khÃ¡c"))),Be(je,` : ${i(),X(()=>i().content)??""}`)}),$("click",Je,()=>xn.set(null)),I(U,oe)};ne(Z,U=>{i()&&U(ee)})}var Y=k(Z,2),ye=D(Y);$y(ye,l());var De=k(ye,2),Pe=D(De);t_(Pe,{size:"22"});var Q=k(Y,2);{var te=U=>{var oe=c9();I(U,oe)};ne(Q,U=>{b(f)&&U(te)})}var ie=k(B,2);ns(ie,U=>O(d,U),()=>b(d));var ae=k(ie,2);ns(ae,U=>O(h,U),()=>b(h)),xe(U=>{T.disabled=b(f),N.disabled=b(f),L.disabled=b(f),Ci(ye,"placeholder",r()),ye.disabled=a(),De.disabled=U},[()=>(b(c),b(f),X(()=>!b(c).trim()||b(f)))]),$("click",T,y),$("click",N,C),$("click",L,v),eu(ye,()=>b(c),U=>O(c,U)),$("keydown",ye,m),$("click",De,p),$("change",ie,R),$("change",ae,S),I(e,A),pt(),o()}var h9=W('<button class="text-gray-400 hover:text-gray-600"><!></button>'),u9=W(`<div class="flex items-center gap-2
         px-3 py-2
         rounded-full
         bg-gray-100
         border border-transparent
         focus-within:bg-white
         focus-within:border-blue-400
         transition"><!> <input type="text" class="flex-1 bg-transparent outline-none text-sm"/> <!></div>`);function g9(e,t){ft(t,!1);let i=ce(t,"placeholder",8,"TÃ¬m kiáº¿m"),s=ce(t,"autoFocus",8,!1),n=ce(t,"debounce",8,300),o=ce(t,"onSearch",8,()=>{}),r=ce(t,"onClear",8,()=>{}),a=re(""),l;function c(C){O(a,C.target.value),clearTimeout(l),l=setTimeout(()=>{o()(b(a).trim())},n())}function d(){O(a,""),clearTimeout(l),r()(),o()("")}function h(C){C.key==="Escape"&&b(a)&&d()}Yr(()=>{clearTimeout(l)}),vt();var u=u9(),f=D(u);eS(f,{size:"18",class:"text-gray-500 shrink-0"});var p=k(f,2);$y(p,s());var m=k(p,2);{var v=C=>{var w=h9(),S=D(w);dA(S,{size:"16"}),$("click",w,d),I(C,w)};ne(m,C=>{b(a)&&C(v)})}xe(()=>Ci(p,"placeholder",i())),eu(p,()=>b(a),C=>O(a,C)),$("input",p,c),$("keydown",p,h),I(e,u),pt()}var f9=W(`<div class="absolute bottom-0 left-0 right-0
               bg-white rounded-t-2xl
               p-4 pb-6
               animate-slide-up svelte-191znx"><!></div>`),p9=W(`<div class="absolute bg-white rounded-xl shadow-lg
               p-3 animate-scale-in svelte-191znx"><!></div>`),m9=W(`<div class="popup-center bg-white rounded-2xl shadow-xl
               animate-scale-in-center svelte-191znx"><!></div>`),v9=W('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/40"></div> <!></div>');function C9(e,t){ft(t,!1);let i=ce(t,"open",12,!1),s=ce(t,"mode",8,"bottom"),n=ce(t,"anchorRect",8,null),o=ce(t,"width",8,null),r=ce(t,"height",8,null);const a=8,l=8,c={anchor:{width:"200px",height:"auto"},center:{width:"420px",height:"auto"},bottom:{width:"100%",height:"auto"}};let d=re({top:0,left:0});function h(){i(!1)}function u(){const C=c[s()]??{},w=o()??C.width,S=r()??C.height;let y="";return w&&(y+=`width:${w};`),S&&(y+=`height:${S};`),y}function f(){if(!n())return{top:0,left:0};const C=window.innerWidth,w=window.innerHeight,S=parseInt((o()??c.anchor.width).toString())||200;let y=n().left+n().width/2-S/2;y=Math.max(l,y),y=Math.min(y,C-S-l);const R=w-n().bottom,A=n().top;let P;return R>=a+100?P=n().bottom+a:A>=a+100?P=n().top-a-100:P=Math.max(l,w-100-l),{top:P,left:y}}Lt(()=>(ve(i()),ve(s()),ve(n())),()=>{i()&&s()==="anchor"&&n()&&O(d,f())}),Ys(),vt();var p=de(),m=K(p);{var v=C=>{var w=v9(),S=D(w),y=k(S,2);{var R=P=>{var T=f9(),M=D(T);Oe(M,t,"default",{}),xe(N=>qn(T,N),[()=>X(u)]),I(P,T)},A=P=>{var T=de(),M=K(T);{var N=L=>{var z=p9(),q=D(z);Oe(q,t,"default",{}),xe(B=>qn(z,`
          top:${b(d),X(()=>b(d).top)??""}px;
          left:${b(d),X(()=>b(d).left)??""}px;
          ${B??""}
        `),[()=>X(u)]),I(L,z)},_=L=>{var z=de(),q=K(z);{var B=Z=>{var ee=m9(),Y=D(ee);Oe(Y,t,"default",{}),xe(ye=>qn(ee,ye),[()=>X(u)]),I(Z,ee)};ne(q,Z=>{s()==="center"&&Z(B)},!0)}I(L,z)};ne(M,L=>{s()==="anchor"&&n()?L(N):L(_,!1)},!0)}I(P,T)};ne(y,P=>{s()==="bottom"?P(R):P(A,!1)})}$("click",S,h),I(C,w)};ne(m,C=>{i()&&C(v)})}I(e,p),pt()}var w9=W('<h3 class="text-lg font-semibold mb-4">ThÃªm ngÆ°á»i dÃ¹ng</h3> <input placeholder="Nháº­p sá» Äiá»n thoáº¡i" class="w-full px-4 py-2 rounded-lg bg-gray-100 focus:outline-none"/> <button class="w-full mt-4 py-2 bg-blue-600 text-white rounded-lg">ThÃªm</button>',1);function IM(e,t){let i=ce(t,"onClose",8);var s=w9(),n=k(K(s),4);$("click",n,function(...o){var r;(r=i())==null||r.apply(this,o)}),I(e,s)}var b9=W('<h3 class="text-lg font-semibold mb-4">Táº¡o nhÃ³m</h3> <input placeholder="TÃªn nhÃ³m" class="w-full px-4 py-2 rounded-lg bg-gray-100 focus:outline-none"/> <button class="w-full mt-4 py-2 bg-blue-600 text-white rounded-lg">Táº¡o nhÃ³m</button>',1);function kM(e,t){let i=ce(t,"onClose",8);var s=b9(),n=k(K(s),4);$("click",n,function(...o){var r;(r=i())==null||r.apply(this,o)}),I(e,s)}var y9=W('<h3 class="text-lg font-semibold mb-4">CÃ i Äáº·t</h3> <div class="space-y-3 text-sm"><div class="flex justify-between"><span>ThÃ´ng bÃ¡o</span> <input type="checkbox" checked/></div> <div class="flex justify-between"><span>Cháº¿ Äá» tá»i</span> <input type="checkbox"/></div></div> <button class="w-full mt-6 py-2 bg-gray-200 rounded-lg">ÄÃ³ng</button>',1);function _M(e,t){let i=ce(t,"onClose",8);var s=y9(),n=k(K(s),4);$("click",n,function(...o){var r;(r=i())==null||r.apply(this,o)}),I(e,s)}var S9=W(`<div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold text-gray-900">CÃ i Äáº·t</h3> <button class="text-gray-400 hover:text-gray-600 text-xl">â</button></div> <div class="space-y-6 text-sm text-gray-700"><section><h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Chung</h4> <div class="space-y-3"><label class="flex items-center justify-between"><span>ThÃ´ng bÃ¡o</span> <input type="checkbox" class="accent-blue-500"/></label> <label class="flex items-center justify-between"><span>Cháº¿ Äá» tá»i</span> <input type="checkbox" class="accent-blue-500"/></label></div></section> <section><h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">TrÃ² chuyá»n</h4> <div class="space-y-3"><label class="flex items-center justify-between"><span>Enter Äá» gá»­i</span> <input type="checkbox" class="accent-blue-500"/></label> <label class="flex items-center justify-between"><span>Tá»± cuá»n khi cÃ³ tin má»i</span> <input type="checkbox" class="accent-blue-500"/></label></div></section> <section><h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">TÃ i khoáº£n</h4> <button class="w-full py-2 text-red-600
             bg-red-50 rounded-lg
             hover:bg-red-100 transition">ÄÄng xuáº¥t</button></section></div> <div class="mt-6 flex gap-3"><button class="flex-1 py-2 rounded-lg
           bg-gray-100 hover:bg-gray-200">Huá»·</button> <button class="flex-1 py-2 rounded-lg
           bg-blue-600 text-white
           hover:bg-blue-700">LÆ°u</button></div>`,1);function LM(e,t){ft(t,!1);let i=ce(t,"onClose",8),s=re(!0),n=re(!1),o=re(!0),r=re(!0);function a(){var _;(_=i())==null||_()}vt();var l=S9(),c=K(l),d=k(D(c),2),h=k(c,2),u=D(h),f=k(D(u),2),p=D(f),m=k(D(p),2),v=k(p,2),C=k(D(v),2),w=k(u,2),S=k(D(w),2),y=D(S),R=k(D(y),2),A=k(y,2),P=k(D(A),2),T=k(h,2),M=D(T),N=k(M,2);$("click",d,function(..._){var L;(L=i())==null||L.apply(this,_)}),xp(m,()=>b(s),_=>O(s,_)),xp(C,()=>b(n),_=>O(n,_)),xp(R,()=>b(o),_=>O(o,_)),xp(P,()=>b(r),_=>O(r,_)),$("click",M,function(..._){var L;(L=i())==null||L.apply(this,_)}),$("click",N,a),I(e,l),pt()}var x9=W('<div class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100"><input type="checkbox" class="accent-blue-500"/> <div class="flex-1"><!></div></div>'),R9=W('<div class="py-6 text-center text-sm text-gray-400">KhÃ´ng cÃ³ cuá»c trÃ² chuyá»n</div>'),E9=W(`<div class="flex items-center gap-2
                 px-2 py-1.5
                 rounded-lg
                 bg-white
                 shadow-sm"><div class="flex-1 truncate text-sm"> </div> <button class="text-gray-400 hover:text-red-500">â</button></div>`),A9=W(`<div class="w-[260px]
           border-l border-gray-200
           bg-gray-50
           flex flex-col
           animate-slide-in svelte-528wx8"><div class="flex items-center justify-between px-3 py-2 border-b"><span class="text-sm font-semibold"> </span> <button class="text-xs text-red-500 hover:underline">XoÃ¡ táº¥t cáº£</button></div> <div class="flex-1 overflow-y-auto p-2 space-y-1"></div></div>`),F9=W(`<div class="flex items-center justify-between
               px-3 py-2
               rounded-lg
               bg-gray-100
               border-l-4 border-blue-500
               text-sm shadow-sm"><div class="truncate"> </div></div>`),P9=W('<div class="p-3 bg-gray-100 rounded text-sm">ÄÃ£ chá»n <b> </b> tin nháº¯n</div>'),T9=W(`<div class="w-full max-w-[2048px] mx-auto bg-white rounded-2xl shadow-xl"><div class="flex items-center justify-between px-4 py-3 border-b border-gray-300"><h3 class="text-lg font-semibold">Chia sáº»</h3> <button class="text-gray-400 text-xl">â</button></div> <div class="flex px-2 pt-2 gap-1"><button>Gáº§n ÄÃ¢y</button> <button>NhÃ³m</button> <button>Báº¡n bÃ¨</button></div> <div class="w-full mx-auto bg-white rounded-2xl shadow-xl
         flex overflow-hidden"><div class="w-full max-h-64 overflow-y-auto px-2 mt-2"><!> <!></div> <!></div> <div class="px-4 py-3"><!></div> <div class="px-4"><textarea rows="2" placeholder="Nháº­p tin nháº¯n..." class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm resize-none">
    </textarea></div> <div class="px-4 py-3 flex justify-end gap-3 border-t border-gray-300"><button class="px-4 py-2 bg-gray-100 rounded">Huá»·</button> <button class="px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-50">Chia sáº»</button></div></div>`);function D9(e,t){ft(t,!1);const i=()=>ht(Yv,"$conversations",o),s=()=>ht(Vn,"$messages",o),n=()=>ht(zn,"$selectedMessageIds",o),[o,r]=Xs(),a=re(),l=re(),c=re();let d=ce(t,"onClose",8),h=re(new Set),u=re(""),f=re("recent");const p=ii(B0);function m(ae){b(h).has(ae)?b(h).delete(ae):b(h).add(ae),O(h,new Set(b(h)))}function v(){!b(h).size||!b(c).length||(Un({type:"share",fromConversationId:p==null?void 0:p.fromConversationId,targetConversationIds:Array.from(b(h)),messageIds:b(c).map(ae=>ae.id),note:b(u)}),C())}function C(){var ae;b(h).clear(),zn.set(new Set),$a.set(!1),B0.set(null),(ae=d())==null||ae()}Lt(()=>(i(),b(f)),()=>{O(a,i().filter(ae=>b(f)==="recent"?!0:b(f)==="group"?ae.type==="group":b(f)==="direct"?ae.type==="direct":!0))}),Lt(()=>(i(),b(h)),()=>{O(l,i().filter(ae=>b(h).has(ae.conversationId)))}),Lt(()=>(s(),n()),()=>{O(c,s().filter(ae=>n().has(ae.id)))}),Ys(),vt();var w=T9(),S=D(w),y=k(D(S),2),R=k(S,2),A=D(R),P=k(A,2),T=k(P,2),M=k(R,2),N=D(M),_=D(N);hi(_,1,()=>b(a),ae=>ae.conversationId,(ae,U)=>{var oe=x9(),Ae=D(oe),Ce=k(Ae,2),Qe=D(Ce);bS(Qe,{get conversation(){return b(U)}}),xe(je=>vk(Ae,je),[()=>(b(h),b(U),X(()=>b(h).has(b(U).conversationId)))]),$("change",Ae,()=>m(b(U).conversationId)),I(ae,oe)});var L=k(_,2);{var z=ae=>{var U=R9();I(ae,U)};ne(L,ae=>{b(a),X(()=>!b(a).length)&&ae(z)})}var q=k(N,2);{var B=ae=>{var U=A9(),oe=D(U),Ae=D(oe),Ce=D(Ae),Qe=k(Ae,2),je=k(oe,2);hi(je,5,()=>b(l),Je=>Je.conversationId,(Je,tt)=>{var ct=E9(),st=D(ct),be=D(st),Ve=k(st,2);xe(()=>Be(be,(b(tt),X(()=>b(tt).title||"Untitle")))),$("click",Ve,()=>m(b(tt).conversationId)),I(Je,ct)}),xe(()=>Be(Ce,`ÄÃ£ chá»n (${b(h),X(()=>b(h).size)??""})`)),$("click",Qe,()=>O(h,new Set)),I(ae,U)};ne(q,ae=>{b(h),X(()=>b(h).size>0)&&ae(B)})}var Z=k(M,2),ee=D(Z);{var Y=ae=>{var U=F9(),oe=D(U),Ae=D(oe);xe(()=>Be(Ae,(b(c),X(()=>b(c)[0].message)))),I(ae,U)},ye=ae=>{var U=P9(),oe=k(D(U)),Ae=D(oe);xe(()=>Be(Ae,(b(c),X(()=>b(c).length)))),I(ae,U)};ne(ee,ae=>{b(c),X(()=>b(c).length===1)?ae(Y):ae(ye,!1)})}var De=k(Z,2),Pe=D(De),Q=k(De,2),te=D(Q),ie=k(te,2);xe(()=>{Vt(A,1,`flex-1 py-2 rounded-lg text-sm font-medium
    ${b(f)==="recent"?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100"}`),Vt(P,1,`flex-1 py-2 rounded-lg text-sm font-medium
    ${b(f)==="group"?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100"}`),Vt(T,1,`flex-1 py-2 rounded-lg text-sm font-medium
    ${b(f)==="direct"?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100"}`),ie.disabled=(b(h),X(()=>!b(h).size))}),$("click",y,C),$("click",A,()=>O(f,"recent")),$("click",P,()=>O(f,"group")),$("click",T,()=>O(f,"direct")),eu(Pe,()=>b(u),ae=>O(u,ae)),$("click",te,C),$("click",ie,v),I(e,w),pt(),r()}var M9=W('<div class="flex justify-between flex-row items-center w-full"><div><span class="font-semibold text-blue-600 truncate"> </span> <span> </span></div> <div><label for="quantity">Quantity (0-100):</label> <input type="number" id="quantity" name="quantity" min="0" max="100" step="5" value="1"/></div> <div><button><!></button></div></div>'),I9=W(`<div class="min-w-[330px] w-full h-full flex flex-col"><div class="min-h-[52px] px-2 bg-gray-200 flex items-center gap-2"><div class="flex-1"><!></div> <button class="w-9 h-9 flex items-center justify-center
           rounded-full
           hover:bg-gray-300
           transition" title="ThÃªm báº¡n"><!></button> <button class="w-9 h-9 flex items-center justify-center
           rounded-full
           hover:bg-gray-300
           transition" title="Táº¡o nhÃ³m"><!></button></div> <div class="flex-1 bg-gray-100 overflow-auto"><div class="w-full h-full overflow-auto"><h1 class="text-1xl font-bold mb-2 text-center hidden">Chat List</h1> <div class="bg-white shadow-md rounded-lg overflow-hidden"><ul id="chat-list" class="divide-y divide-gray-200"></ul></div></div></div></div>`),k9=W('<div class="font-semibold">Nguyá»n VÄn A</div>'),_9=W('<p class="text-center text-gray-400 mt-10">Chá»n má»t cuá»c trÃ² chuyá»n Äá» báº¯t Äáº§u</p>'),L9=W('<p class="text-center text-xs text-gray-500 py-2">Äang táº£i tin nháº¯n cÅ©...</p>'),O9=W("<!> <!>",1),N9=W('<!> <!> <div class="h-2"></div>',1),H9=W(`<div class="h-[56px]
           flex items-center justify-between
           px-4
           bg-white
           border-t border-gray-200
           sticky bottom-0 z-20"><button class="text-sm font-medium text-blue-600 hover:opacity-80">Huá»·</button> <span class="text-sm text-gray-600"> </span> <div class="flex items-center gap-2"><button class="w-9 h-9
               flex items-center justify-center
               rounded-full
               hover:bg-gray-100
               active:bg-gray-200
               transition"><!></button> <button class="w-9 h-9
               flex items-center justify-center
               rounded-full
               hover:bg-red-50
               active:bg-red-100
               transition"><!></button></div></div>`),G9=W('<div class="h-full w-full flex flex-col"><div class="flex-1 overflow-y-auto p-3 bg-gray-50"><!></div> <!></div>'),B9=W('<div class="h-full w-full flex flex-col"><!></div>'),V9=W('<img class="w-full h-20 object-cover rounded cursor-pointer" alt=""/>'),z9=W('<li class="flex justify-between items-center text-xs bg-gray-50 p-2 rounded"><span class="truncate"> </span> <span class="text-gray-400"> </span></li>'),W9=W('<li class="flex items-center gap-2"><img class="w-8 h-8 rounded-full"/> <span class="text-sm"> </span></li>'),$9=W('<section><h4 class="text-sm font-semibold mb-2">ThÃ nh viÃªn</h4> <ul class="space-y-2"></ul></section>'),U9=W('<div class="h-full w-full flex flex-col bg-white"><div class="p-4 border-b border-gray-200 flex flex-col items-center"><img class="w-20 h-20 rounded-full mb-2" alt=""/> <div class="font-semibold"> </div> <div class="text-xs text-gray-500"> </div></div> <div class="flex-1 overflow-y-auto px-4 py-3 space-y-5 chat-scroll"><section><h4 class="text-sm font-semibold mb-2">ThÃ´ng tin</h4> <p class="text-xs text-gray-600"> </p></section> <section><h4 class="text-sm font-semibold mb-2">áº¢nh / Video</h4> <div class="grid grid-cols-3 gap-2"></div></section> <section><h4 class="text-sm font-semibold mb-2">File</h4> <ul class="space-y-2"></ul></section> <!> <section class="pt-3 border-t border-gray-200"><button class="w-full text-sm text-red-600 hover:underline">Rá»i khá»i cuá»c trÃ² chuyá»n</button></section></div></div>'),j9=W('<div slot="footer" class="h-full flex items-center justify-center text-xs text-gray-400">Desktop Clone</div>'),K9=W("<!> <!>",1);function q9(e,t){ft(t,!1);const i=()=>ht(Vn,"$messages",h),s=()=>ht($n,"$conversationId",h),n=()=>ht(Fr,"$myId",h),o=()=>ht(f,"$menuVisible",h),r=()=>ht(Dw,"$myName",h),a=()=>ht(qp,"$status",h),l=()=>ht(Yv,"$conversations",h),c=()=>ht($a,"$selectionMode",h),d=()=>ht(zn,"$selectedMessageIds",h),[h,u]=Xs(),{menuVisible:f,toggleMenu:p}=u0,m={};let v=re(null),C=re(),w=re(),S=re(!1),y=!1,R=0,A=null;async function P(Q=!1){b(w)&&(await zc(),b(w).scrollTo({top:b(w).scrollHeight,behavior:Q?"smooth":"auto"}))}async function T(){if(!b(w)||b(S)||b(w).scrollTop>120||i().length===0)return;b(w).scrollTop<=1&&hs(w,b(w).scrollTop=1);const Q=i()[0];if(A!==Q.id){O(S,!0),y=!0,R=b(w).scrollHeight,A=Q.id;try{await Cg(s(),{firstMsg:Q})}catch(te){console.error("Load older failed:",te),A=null}finally{O(S,!1)}}}Yy(async()=>{if(b(w)){if(y){await zc();const Q=b(w).scrollHeight-R;Q>0&&hs(w,b(w).scrollTop+=Q),y=!1;return}i().length>0&&(b(w).scrollHeight-b(w).scrollTop-b(w).clientHeight<300||A===null)&&P()}});async function M(Q){!(Q!=null&&Q.conversationId)||b(v)===Q.conversationId||(O(v,Q.conversationId),$n.set(b(v)),Vn.set([]),A=null,y=!1,await Cg(s()),P())}function N(Q=""){const te=Q.trim();if(!te||!b(v))return;const ie=ii(xn);Un({type:"chat",conversationId:b(v),from:n(),message:te,replyTo:(ie==null?void 0:ie.id)??null}),xn.set(null)}Mi(()=>{o()&&p(!1);const Q=()=>T();return b(w).addEventListener("scroll",Q,{passive:!0}),()=>{b(w).removeEventListener("scroll",Q)}});let _=re(!1),L=re(null),z=re("bottom"),q=re(null),B=re({});function Z({type:Q="",mode:te="bottom",event:ie=null,width:ae=null,height:U=null}={}){O(L,Q),O(z,te),O(B,{width:ae,height:U}),te==="anchor"&&(ie!=null&&ie.currentTarget)?O(q,ie.currentTarget.getBoundingClientRect()):O(q,null),O(_,!0)}function ee(){O(_,!1),O(L,null),O(q,null)}const Y=Q=>{Z({type:"shareConversation",mode:"center",width:"50%",height:"70%",event:Q})};Lt(()=>(i(),b(w)),()=>{i().length>0&&b(w)&&b(w).scrollHeight-b(w).scrollTop-b(w).clientHeight<100&&P("smooth")}),Ys(),vt();var ye=K9(),De=K(ye);a9(De,{get option(){return m},$$slots:{header:(Q,te)=>{var ie=M9(),ae=D(ie),U=D(ae),oe=D(U),Ae=k(U,2),Ce=D(Ae),Qe=k(ae,4),je=D(Qe);je.__click=p;var Je=D(je);{var tt=st=>{oA(st,{size:26})},ct=st=>{rA(st,{size:26})};ne(Je,st=>{o()?st(tt):st(ct,!1)})}xe((st,be)=>{Be(oe,r()),Vt(Ae,1,`text-[10px] px-2 rounded-full ${st??""}`),Be(Ce,be)},[()=>(a(),X(()=>a().includes("Connected")?"bg-green-100 text-green-600":"bg-red-100 text-red-600")),()=>(a(),X(()=>a().replace(/\s.*$/,"")))]),I(Q,ie)},left:(Q,te)=>{var ie=I9(),ae=D(ie),U=D(ae),oe=D(U);g9(oe,{placeholder:"TÃ¬m kiáº¿m cuá»c trÃ² chuyá»n",onSearch:be=>{O(C,l().filter(Ve=>(Ve.name||"").toLowerCase().includes((be||"").toLowerCase())))}});var Ae=k(U,2);Ae.__click=be=>Z({type:"user",mode:"anchor",event:be});var Ce=D(Ae);lA(Ce,{size:20});var Qe=k(Ae,2);Qe.__click=be=>Z({type:"group",mode:"anchor",event:be});var je=D(Qe);cA(je,{size:20});var Je=k(ae,2),tt=D(Je),ct=k(D(tt),2),st=D(ct);hi(st,5,l,ds,(be,Ve)=>{bS(be,{get conversation(){return b(Ve)},get selectedId(){return b(v)},onSelect:M})}),I(Q,ie)},head:(Q,te)=>{var ie=k9();I(Q,ie)},content:(Q,te)=>{var ie=G9(),ae=D(ie),U=D(ae);{var oe=je=>{var Je=_9();I(je,Je)},Ae=je=>{var Je=N9(),tt=K(Je);{var ct=be=>{var Ve=L9();I(be,Ve)};ne(tt,be=>{b(S)&&be(ct)})}var st=k(tt,2);hi(st,3,i,be=>be.id,(be,Ve,Te)=>{var We=O9(),Qt=K(We);{var $t=H=>{RA(H,{get time(){return b(Ve),X(()=>b(Ve).created_at)},locale:"vi"})};ne(Qt,H=>{ve(b(Te)),ve(Wm),b(Ve),i(),X(()=>{var le;return b(Te)===0||Wm(b(Ve).created_at,(le=i()[b(Te)-1])==null?void 0:le.created_at)})&&H($t)})}var se=k(Qt,2);MP(se,{get msg(){return b(Ve)},get myId(){return n()},onShareMessage:Y}),I(be,We)}),I(je,Je)};ne(U,je=>{b(v)?je(Ae,!1):je(oe)})}ns(ae,je=>O(w,je),()=>b(w));var Ce=k(ae,2);{var Qe=je=>{var Je=H9(),tt=D(Je);tt.__click=()=>{zn.set(new Set),$a.set(!1)};var ct=k(tt,2),st=D(ct),be=k(ct,2),Ve=D(be);Ve.__click=Y;var Te=D(Ve);sA(Te,{size:"18",class:"text-gray-700"});var We=k(Ve,2);We.__click=()=>{Array.from(ii(zn)).forEach(se=>Un({type:"delete",messageId:se})),zn.set(new Set),$a.set(!1)};var Qt=D(We);aA(Qt,{size:"18",class:"text-red-600"}),xe(()=>Be(st,`${d(),X(()=>d().size)??""} ÄÃ£ chá»n`)),I(je,Je)};ne(Ce,je=>{c()&&je(Qe)})}I(Q,ie)},comment:(Q,te)=>{var ie=B9(),ae=D(ie);{let U=Mr(()=>!b(v));MM(ae,{placeholder:"Nháº­p tin nháº¯n...",get disabled(){return b(U)},onSendText:oe=>{N(oe==null?void 0:oe.text),console.log("payload:",oe)},onSendImages:oe=>{console.log("onSendImages:",oe)},onSendFiles:oe=>{console.log("onSendFiles:",oe)},onSendSticker:oe=>{console.log("onSendSticker:",oe)}})}I(Q,ie)},right:(Q,te)=>{var ie=U9(),ae=D(ie),U=D(ae),oe=k(U,2),Ae=D(oe),Ce=k(oe,2),Qe=D(Ce),je=k(ae,2),Je=D(je),tt=k(D(Je),2),ct=D(tt),st=k(Je,2),be=k(D(st),2);hi(be,5,()=>(ve(_i),X(()=>_i.media)),ds,($t,se)=>{var H=V9();xe(()=>Ci(H,"src",b(se))),I($t,H)});var Ve=k(st,2),Te=k(D(Ve),2);hi(Te,5,()=>(ve(_i),X(()=>_i.files)),ds,($t,se)=>{var H=z9(),le=D(H),Fe=D(le),mt=k(le,2),nt=D(mt);xe(()=>{Be(Fe,(b(se),X(()=>b(se).name))),Be(nt,(b(se),X(()=>b(se).size)))}),I($t,H)});var We=k(Ve,2);{var Qt=$t=>{var se=$9(),H=k(D(se),2);hi(H,5,()=>(ve(_i),X(()=>_i.members)),ds,(le,Fe)=>{var mt=W9(),nt=D(mt),j=k(nt,2),ge=D(j);xe(()=>{Ci(nt,"src",(b(Fe),X(()=>b(Fe).avatar))),Be(ge,(b(Fe),X(()=>b(Fe).name)))}),I(le,mt)}),I($t,se)};ne(We,$t=>{ve(_i),X(()=>_i.isGroup)&&$t(Qt)})}xe(()=>{Ci(U,"src",(ve(_i),X(()=>_i.avatar))),Be(Ae,(ve(_i),X(()=>_i.name))),Be(Qe,(ve(_i),X(()=>_i.isGroup?`${_i.membersCount} thÃ nh viÃªn`:"Äang hoáº¡t Äá»ng"))),Be(ct,(ve(_i),X(()=>_i.description)))}),I(Q,ie)},footer:(Q,te)=>{var ie=j9();I(Q,ie)}}});var Pe=k(De,2);C9(Pe,et({get mode(){return b(z)},get anchorRect(){return b(q)}},()=>b(B),{get open(){return b(_)},set open(Q){O(_,Q)},children:(Q,te)=>{var ie=de(),ae=K(ie);{var U=Ae=>{IM(Ae,{onClose:ee})},oe=Ae=>{var Ce=de(),Qe=K(Ce);{var je=tt=>{kM(tt,{onClose:ee})},Je=tt=>{var ct=de(),st=K(ct);{var be=Te=>{_M(Te,{onClose:ee})},Ve=Te=>{var We=de(),Qt=K(We);{var $t=H=>{LM(H,{onClose:ee})},se=H=>{var le=de(),Fe=K(le);{var mt=nt=>{D9(nt,{onClose:ee})};ne(Fe,nt=>{b(L)==="shareConversation"&&nt(mt)},!0)}I(H,le)};ne(Qt,H=>{b(L)==="contacts"?H($t):H(se,!1)},!0)}I(Te,We)};ne(st,Te=>{b(L)==="settings"?Te(be):Te(Ve,!1)},!0)}I(tt,ct)};ne(Qe,tt=>{b(L)==="group"?tt(je):tt(Je,!1)},!0)}I(Ae,Ce)};ne(ae,Ae=>{b(L)==="user"?Ae(U):Ae(oe,!1)})}I(Q,ie)},$$slots:{default:!0},$$legacy:!0})),I(e,ye),pt(),u()}ap(["click"]);var Y9=W(`<div class="absolute bottom-0 left-0 right-0
               bg-white rounded-t-2xl
               p-4 pb-6
               animate-slide-up svelte-198oxpw"><!></div>`),X9=W(`<div class="absolute bg-white rounded-xl shadow-lg
               p-3 animate-scale-in svelte-198oxpw"><!></div>`),Q9=W(`<div class="popup-center bg-white rounded-2xl shadow-xl
               animate-scale-in-center svelte-198oxpw"><!></div>`),J9=W('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/40"></div> <!></div>');function Z9(e,t){ft(t,!1);let i=ce(t,"open",12,!1),s=ce(t,"mode",8,"bottom"),n=ce(t,"anchorRect",8,null);const o=200,r=180,a=8,l=8;let c=re({top:0,left:0});function d(){i(!1)}function h(){if(!n())return{top:0,left:0};const m=window.innerWidth,v=window.innerHeight;let C=n().left+n().width/2-o/2;C=Math.max(l,C),C=Math.min(C,m-o-l);const w=v-n().bottom,S=n().top;let y;return w>=r+a?y=n().bottom+a:S>=r+a?y=n().top-r-a:y=Math.max(l,v-r-l),{top:y,left:C}}Lt(()=>(ve(i()),ve(s()),ve(n())),()=>{i()&&s()==="anchor"&&n()&&O(c,h())}),Ys(),vt();var u=de(),f=K(u);{var p=m=>{var v=J9(),C=D(v),w=k(C,2);{var S=R=>{var A=Y9(),P=D(A);Oe(P,t,"default",{}),I(R,A)},y=R=>{var A=de(),P=K(A);{var T=N=>{var _=X9(),L=D(_);Oe(L,t,"default",{}),xe(()=>qn(_,`
          top: ${b(c),X(()=>b(c).top)??""}px;
          left: ${b(c),X(()=>b(c).left)??""}px;
          width: 200px;
        `)),I(N,_)},M=N=>{var _=de(),L=K(_);{var z=q=>{var B=Q9(),Z=D(B);Oe(Z,t,"default",{}),I(q,B)};ne(L,q=>{s()==="center"&&q(z)},!0)}I(N,_)};ne(P,N=>{s()==="anchor"&&n()?N(T):N(M,!1)},!0)}I(R,A)};ne(w,R=>{s()==="bottom"?R(S):R(y,!1)})}$("click",C,d),I(m,v)};ne(f,m=>{i()&&m(p)})}I(e,u),pt()}var eY=W(`<div class="flex items-center px-4 py-3
               border-b border-gray-100
               active:bg-gray-100 transition"><!></div>`),tY=W(`<div class="w-full h-dvh flex flex-col bg-white"><div class="sticky top-0 z-10 bg-white border-b border-gray-200"><div class="px-4 pt-4 pb-3"><div class="flex items-center justify-between mb-2"><h2 class="text-lg font-semibold text-gray-900">Tin nháº¯n</h2> <div class="flex items-center gap-4 text-gray-600"><button><!></button> <button><!></button> <button><!></button></div></div> <div><div class="relative"><!> <input type="text" placeholder="TÃ¬m kiáº¿m" class="w-full pl-10 pr-4 py-2 text-sm
                   rounded-full bg-gray-100
                   focus:outline-none"/></div></div></div></div> <div class="flex-1 overflow-y-auto"></div> <div class="shrink-0 border-t border-gray-200 bg-white"><div class="flex justify-around py-2"><div class="flex flex-col items-center text-blue-600 text-xs"><!> <span class="mt-0.5">Tin nháº¯n</span></div> <div class="flex flex-col items-center text-gray-500 text-xs"><button><!></button> <span class="mt-0.5">Danh báº¡</span></div> <div class="flex flex-col items-center text-gray-500 text-xs"><button><!></button> <span class="mt-0.5">CÃ i Äáº·t</span></div></div></div></div> <!>`,1);function iY(e,t){ft(t,!1);const i=()=>ht(a,"$menuVisible",o),s=()=>ht($n,"$conversationId",o),n=()=>ht(Yv,"$conversations",o),[o,r]=Xs(),{menuVisible:a,toggleMenu:l}=u0;let c=ce(t,"openChat",8),d=re(null),h=re(!0),u=0;function f(be){var Ve;(Ve=c())==null||Ve(be)}function p(be){const Ve=be.target.scrollTop;Ve>u&&Ve>20&&O(h,!1),Ve<u&&O(h,!0),u=Ve}let m=re(!1),v=re(null),C=re("bottom"),w=re(null);function S({type:be,mode:Ve="bottom",event:Te=null}){O(v,be),O(C,Ve),Ve==="anchor"&&(Te!=null&&Te.currentTarget)?O(w,Te.currentTarget.getBoundingClientRect()):O(w,null),O(m,!0)}function y(){O(m,!1),O(v,null),O(w,null)}Mi(()=>{i()&&l(!1),document.addEventListener("touchmove",be=>{be.scale!==1&&be.preventDefault()},{passive:!1})});async function R(be){!(be!=null&&be.conversationId)||b(d)===be.conversationId||(O(d,be.conversationId),$n.set(b(d)),Vn.set([]),await Cg(s()))}vt();var A=tY(),P=K(A),T=D(P),M=D(T),N=D(M),_=k(D(N),2),L=D(_),z=D(L);lA(z,{size:20});var q=k(L,2),B=D(q);cA(B,{size:20});var Z=k(q,2),ee=D(Z);{var Y=be=>{oA(be,{size:20})},ye=be=>{rA(be,{size:20})};ne(ee,be=>{i()?be(Y):be(ye,!1)})}var De=k(N,2);let Pe;var Q=D(De),te=D(Q);eS(te,{size:18,class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"});var ie=k(T,2);hi(ie,5,n,ds,(be,Ve)=>{var Te=eY(),We=D(Te);bS(We,{get conversation(){return b(Ve)},get selectedId(){return b(d)},onSelect:R}),$("click",Te,()=>f(b(Ve))),I(be,Te)});var ae=k(ie,2),U=D(ae),oe=D(U),Ae=D(oe);qk(Ae,{size:22});var Ce=k(oe,2),Qe=D(Ce),je=D(Qe);Hk(je,{size:22});var Je=k(Ce,2),tt=D(Je),ct=D(tt);i_(ct,{size:22});var st=k(P,2);Z9(st,{get mode(){return b(C)},get anchorRect(){return b(w)},get open(){return b(m)},set open(be){O(m,be)},children:(be,Ve)=>{var Te=de(),We=K(Te);{var Qt=se=>{IM(se,{onClose:y})},$t=se=>{var H=de(),le=K(H);{var Fe=nt=>{kM(nt,{onClose:y})},mt=nt=>{var j=de(),ge=K(j);{var Re=_e=>{_M(_e,{onClose:y})},me=_e=>{var Me=de(),Ee=K(Me);{var Ie=Ye=>{LM(Ye,{onClose:y})};ne(Ee,Ye=>{b(v)==="contacts"&&Ye(Ie)},!0)}I(_e,Me)};ne(ge,_e=>{b(v)==="settings"?_e(Re):_e(me,!1)},!0)}I(nt,j)};ne(le,nt=>{b(v)==="group"?nt(Fe):nt(mt,!1)},!0)}I(se,H)};ne(We,se=>{b(v)==="user"?se(Qt):se($t,!1)})}I(be,Te)},$$slots:{default:!0},$$legacy:!0}),xe(()=>Pe=Vt(De,1,"transition-all duration-200 ease-out overflow-hidden",null,Pe,{"h-0":!b(h),"opacity-0":!b(h),"mt-0":!b(h),"h-10":b(h),"opacity-100":b(h),"mt-2":b(h)})),$("click",L,be=>S({type:"user",mode:"anchor",event:be})),$("click",q,be=>S({type:"group",mode:"anchor",event:be})),$("click",Z,l),$("scroll",ie,p),$("click",Qe,be=>S({type:"contacts",mode:"center",event:be})),$("click",tt,be=>S({type:"settings",mode:"bottom",event:be})),I(e,A),pt(),r()}var sY=W("<!> <!>",1),nY=W(`<div class="h-screen w-full flex flex-col bg-white"><header class="h-14 px-3
           flex items-center justify-between
           border-b border-gray-200 bg-white shrink-0"><div class="flex items-center gap-2"><button><!></button> <span class="font-semibold truncate max-w-[160px]"> </span></div> <div class="flex items-center gap-4"><!> <!></div></header> <main class="flex-1 overflow-y-auto bg-gray-100 px-3 py-2 space-y-2"></main> <footer class="w-full shrink-0
           px-2 py-0
           bg-white border-t border-gray-200"><!></footer></div>`);function oY(e,t){ft(t,!1);const i=()=>ht($n,"$conversationId",o),s=()=>ht(Fr,"$myId",o),n=()=>ht(Vn,"$messages",o),[o,r]=Xs(),a=re();let l=ce(t,"activeChat",8),c=ce(t,"back",8),d=re(),h=!1,u=!1,f=0,p=null;function m(B=""){const Z=B.trim();!Z||!b(a)||(console.log("text, selected, $myId:=-->",Z,b(a),s()),Un({type:"chat",conversationId:b(a),from:s(),message:Z}))}Yy(async()=>{if(b(d)){if(u){await zc();const B=b(d).scrollHeight-f;B>0&&hs(d,b(d).scrollTop+=B),u=!1;return}n().length>0&&(b(d).scrollHeight-b(d).scrollTop-b(d).clientHeight<300||p===null)&&C()}});async function v(){if(!b(d)||h||b(d).scrollTop>120||n().length===0)return;const B=n()[0];if(p!==B.id){h=!0,u=!0,f=b(d).scrollHeight,p=B.id;try{await Cg(i(),{firstMsg:B})}catch(Z){console.error("Load older failed:",Z),p=null}finally{h=!1}}}async function C(B=!1){b(d)&&(await zc(),b(d).scrollTo({top:b(d).scrollHeight,behavior:B?"smooth":"auto"}))}Lt(()=>i(),()=>{O(a,i())}),Lt(()=>(n(),b(d)),()=>{n().length>0&&b(d)&&b(d).scrollHeight-b(d).scrollTop-b(d).clientHeight<100&&C("smooth")}),Ys(),vt();var w=nY(),S=D(w),y=D(S),R=D(y);R.__click=function(...B){var Z;(Z=c())==null||Z.apply(this,B)};var A=D(R);iA(A,{size:"22"});var P=k(R,2),T=D(P),M=k(y,2),N=D(M);eS(N,{size:"20"});var _=k(N,2);Bk(_,{size:"20"});var L=k(S,2);hi(L,7,n,B=>B.id,(B,Z,ee)=>{var Y=sY(),ye=K(Y);{var De=Q=>{RA(Q,{get time(){return b(Z),X(()=>b(Z).created_at)},locale:"vi"})};ne(ye,Q=>{ve(b(ee)),ve(Wm),b(Z),n(),X(()=>{var te;return b(ee)===0||Wm(b(Z).created_at,(te=n()[b(ee)-1])==null?void 0:te.created_at)})&&Q(De)})}var Pe=k(ye,2);MP(Pe,{get msg(){return b(Z)},get myId(){return s()}}),I(B,Y)}),ns(L,B=>O(d,B),()=>b(d));var z=k(L,2),q=D(z);MM(q,{placeholder:"Nháº­p tin nháº¯n...",onSendText:B=>{m(B==null?void 0:B.text),console.log("payload:",B)},onSendImages:B=>{console.log("onSendImages:",B)},onSendFiles:B=>{console.log("onSendFiles:",B)},onSendSticker:B=>{console.log("onSendSticker:",B)}}),xe(()=>Be(T,(ve(l()),X(()=>{var B;return(B=l())==null?void 0:B.name})))),$("scroll",L,v),I(e,w),pt(),r()}ap(["click"]);function rY(e,t){ft(t,!1);const i=()=>ht(r,"$chatScreen",n),s=()=>ht(a,"$activeChat",n),[n,o]=Xs(),r=Hy("chatScreen","list"),a=Hy("activeChat",null);function l(v){a.set(v),r.set("detail")}function c(){r.set("list")}var d={back:c};vt();var h=de(),u=K(h);{var f=v=>{iY(v,{openChat:l})},p=v=>{var C=de(),w=K(C);{var S=y=>{oY(y,{get activeChat(){return s()},back:c})};ne(w,y=>{i()==="detail"&&y(S)},!0)}I(v,C)};ne(u,v=>{i()==="list"?v(f):v(p,!1)})}I(e,h),sa(t,"back",c);var m=pt(d);return o(),m}function aY(e){let t={mainKey:"chat-main",bodyKey:"chat-body",contentKey:"chat-content"};s9(e,{get option(){return t},$$slots:{mobile:(i,s)=>{rY(i,{})},desktop:(i,s)=>{q9(i,{})}}})}var lY=W('<div class="p-4"> </div>'),cY=W('<div class="h-screen flex overflow-hidden"><div><div class="menu-left h-full w-full bg-blue-100 border-r-[2px] border-r-gray-300 flex flex-col items-center justify-between py-4 overflow-hidden"><div class="flex flex-col border-b gap-y-5"><button class="p-2 rounded-full hover:bg-green-600 text-white shadow-md transition"><!></button> <button class="p-2 rounded-full hover:bg-blue-600 text-white shadow-md transition"><!></button> <button class="p-2 rounded-full hover:bg-red-600 text-white shadow-md transition"><!></button> <button class="p-2 rounded-full bg-gray-500 hover:bg-gray-600 text-white shadow-md"><!></button> <button class="p-2 rounded-full bg-gray-500 hover:bg-gray-600 text-white shadow-md"><!></button></div> <div class="flex flex-col items-center"><button class="p-2 rounded-full hover:bg-gray-100 text-white shadow-md transition"><!></button></div></div></div> <div class="flex-1 overflow-auto bg-white"><!></div></div> <!> <!> <!> <!> <!>',1);function dY(e,t){ft(t,!1);const i=()=>ht(c,"$menuVisible",n),s=()=>ht(l,"$selectedFace",n),[n,o]=Xs();let r=re(!1),a=re({width:"80%",height:"80%",title:""});const{face:l,menuVisible:c,changeFace:d}=u0;function h(ie){let ae="";ie.ctrlKey&&(ae+="Ctrl+"),ie.altKey&&(ae+="Alt+"),ie.shiftKey&&(ae+="Shift+"),ae+=ie.key,_w.subscribe(U=>{U[ae]&&U[ae](ie)})}Mi(()=>{window.addEventListener("keydown",h)}),Yr(()=>{window.removeEventListener("keydown",h)}),vt();var u=cY(),f=K(u),p=D(f);let m;var v=D(p),C=D(v),w=D(C),S=D(w);Ep(S,{name:"info-circle"});var y=k(w,2),R=D(y);Ep(R,{name:"video"});var A=k(y,2),P=D(A);Ep(P,{name:"list-ul"});var T=k(A,2),M=D(T);Yk(M,{size:32});var N=k(T,2),_=D(N);Kk(_,{size:32});var L=k(C,2),z=D(L),q=D(z);Ep(q,{name:"settings"});var B=k(p,2),Z=D(B);{var ee=ie=>{h_(ie,{get user(){return za}})},Y=ie=>{var ae=de(),U=K(ae);{var oe=Ce=>{F_(Ce,{onClose:()=>d("info")})},Ae=Ce=>{var Qe=de(),je=K(Qe);{var Je=ct=>{$_(ct,{})},tt=ct=>{var st=de(),be=K(st);{var Ve=We=>{t9(We,{})},Te=We=>{var Qt=de(),$t=K(Qt);{var se=le=>{aY(le)},H=le=>{var Fe=lY(),mt=D(Fe);xe(()=>Be(mt,`Coming soon... ${s()??""}`)),I(le,Fe)};ne($t,le=>{s()==="messenger"?le(se):le(H,!1)},!0)}I(We,Qt)};ne(be,We=>{s()==="chat"?We(Ve):We(Te,!1)},!0)}I(ct,st)};ne(je,ct=>{s()==="list"?ct(Je):ct(tt,!1)},!0)}I(Ce,Qe)};ne(U,Ce=>{s()==="cam"?Ce(oe):Ce(Ae,!1)},!0)}I(ie,ae)};ne(Z,ie=>{s()==="info"?ie(ee):ie(Y,!1)})}var ye=k(f,2);D_(ye,et(()=>b(a),{closeOnOutsideClick:!1,get open(){return b(r)},set open(ie){O(r,ie)},children:(ie,ae)=>{N_(ie)},$$slots:{default:!0},$$legacy:!0}));var De=k(ye,2);EC(De,{combo:"Escape",$$events:{pressed:()=>ra(l,"info")}});var Pe=k(De,2);EC(Pe,{combo:"Ctrl+q",$$events:{pressed:()=>ra(l,"info")}});var Q=k(Pe,2);EC(Q,{combo:"Ctrl+s",$$events:{pressed:ie=>{ie.preventDefault(),console.log("Save!")}}});var te=k(Q,2);Y1(te,{}),xe(()=>m=Vt(p,1,"bg-gray-200 transition-all duration-300",null,m,{"w-[50px]":i(),"w-0":!i()})),$("click",w,()=>d("info")),$("click",y,()=>d("cam")),$("click",A,()=>d("list")),$("click",T,()=>d("chat")),$("click",N,()=>d("messenger")),$("click",z,()=>{O(r,!0),O(a,{width:"80%",height:"80%",title:"Thiáº¿t láº­p tÃ i khoáº£n"})}),I(e,u),pt(),o()}var hY=W('<div class="bg-red-100 text-red-700 px-3 py-2 rounded mb-4 text-sm"> </div>'),uY=GE('<svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4l3-3-3-3v4a12 12 0 00-12 12h4z"></path></svg>'),gY=W('<div class="min-h-screen bg-gray-100 flex items-center justify-center px-4"><div class="bg-white shadow-xl rounded-xl p-8 w-full max-w-md"><h2 class="text-2xl font-bold text-gray-800 text-center mb-6">ÄÄNG NHáº¬P</h2> <!> <form class="space-y-5"><div><label class="block text-sm font-medium text-gray-700">Email</label> <input type="email" class="mt-1 w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-300 outline-none" required/></div> <div><label class="block text-sm font-medium text-gray-700">Máº­t kháº©u</label> <input type="password" class="mt-1 w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-300 outline-none" required/></div> <button type="submit" class="w-full py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition flex justify-center"><!></button></form> <div class="flex items-center my-6"><div class="flex-1 h-px bg-gray-300"></div> <span class="px-3 text-gray-500 text-sm">hoáº·c</span> <div class="flex-1 h-px bg-gray-300"></div></div> <button class="w-full py-2 border border-gray-300 rounded-lg flex items-center justify-center gap-2 hover:bg-gray-100 transition"><img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="h-5 w-5"/> <span>ÄÄng nháº­p vá»i Google</span></button></div></div>');function fY(e,t){ft(t,!1);const i=new qv;let s=re(""),n=re(""),o=re(""),r=re(!1);async function a(){O(o,""),O(r,!0);try{const P=await i.post("/auth/login",{email:b(s),password:b(n)},{withCredentials:!0});if(!P.user||!P.accessToken)throw new Error("Response missing user or accessToken");za.set(P.user),Wn.set(P.accessToken),console.log("setdata login:",P),P.refreshToken&&await Jy(P.refreshToken)}catch(P){console.error("ð¨ LOGIN ERROR:",P),O(o,"Email hoáº·c máº­t kháº©u khÃ´ng ÄÃºng hoáº·c server khÃ´ng pháº£n há»i.")}finally{O(r,!1)}}function l(){window.location.href="http://localhost:3000/auth/google"}vt();var c=gY(),d=D(c),h=k(D(d),2);{var u=P=>{var T=hY(),M=D(T);xe(()=>Be(M,b(o))),I(P,T)};ne(h,P=>{b(o)&&P(u)})}var f=k(h,2),p=D(f),m=k(D(p),2),v=k(p,2),C=k(D(v),2),w=k(v,2),S=D(w);{var y=P=>{var T=uY();I(P,T)},R=P=>{var T=BE("ÄÄng nháº­p");I(P,T)};ne(S,P=>{b(r)?P(y):P(R,!1)})}var A=k(f,4);xe(()=>w.disabled=b(r)),eu(m,()=>b(s),P=>O(s,P)),eu(C,()=>b(n),P=>O(n,P)),$("submit",f,Ek(a)),$("click",A,l),I(e,c),pt()}const pY=Zt("light");function mY(){const e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=e||(t?"dark":"light");vY(i),pY.set(i)}function vY(e){const t=document.documentElement;e==="dark"?t.classList.add("dark"):t.classList.remove("dark"),localStorage.setItem("theme",e)}function CY(e,t){ft(t,!1);const i=()=>ht(Wn,"$accessToken",o),s=()=>ht(za,"$user",o),n=()=>ht(xC,"$loading",o),[o,r]=Xs(),a=new qv;let l=!1,c;const d=async()=>{try{let C=i();if(!C){const w=await tA();if(w){const S=await a.post("/auth/refresh",{refreshToken:w},{withCredentials:!0});C=S.accessToken,await Wn.set(C),S.refreshToken&&await Jy(S.refreshToken)}}if(C){const w=await a.get("/auth/me",{headers:{Authorization:`Bearer ${C}`}});za.set(w.user)}else za.set(null)}catch(C){console.warn("Auto refresh failed:",C),Wn.set(""),za.set(null),await Zy()}};Mi(async()=>{xC.set(!0),await d(),mY(),window.addEventListener("beforeunload",h),window.addEventListener("popstate",u),c=Wn.subscribe(C=>{C?(console.log("ð accessToken ready â connect WS"),gA()):(console.log("ðª accessToken cleared â close WS"),kw())}),xC.set(!1)}),Yr(()=>{c==null||c(),kw(),window.removeEventListener("beforeunload",h),window.removeEventListener("popstate",u)});function h(C){s()&&(C.preventDefault(),C.returnValue="")}function u(){s()&&!l&&(confirm("Báº¡n cÃ³ cháº¯c muá»n rá»i khá»i á»©ng dá»¥ng khÃ´ng?")?(l=!0,history.back()):history.pushState(null,"",location.href))}vt();var f=de(),p=K(f);{var m=C=>{hA(C,{})},v=C=>{var w=de(),S=K(w);{var y=A=>{dY(A,{})},R=A=>{fY(A,{})};ne(S,A=>{s()?A(y):A(R,!1)},!0)}I(C,w)};ne(p,C=>{n()?C(m):C(v,!1)})}I(e,f),pt(),r()}nk(CY,{target:document.getElementById("app")});export{SY as $,ce as A,vC as B,jo as C,Mr as D,JE as E,Ci as F,Be as G,qv as H,Ct as I,hi as J,FC as K,ds as L,Kv as M,Mi as N,Vt as O,Lt as P,Ys as Q,cA as R,eS as S,eu as T,lA as U,BE as V,Ic as W,zc as X,Yr as Y,Ep as Z,Al as _,ne as a,hs as a0,D_ as a1,ht as a2,ck as a3,Xs as a4,za as a5,Wn as a6,kw as a7,Zy as a8,Y1 as a9,jI as aa,Gk as ab,mk as ac,dA as ad,yY as ae,Wk as af,sa as ag,ns as b,D as c,qn as d,$ as e,W as f,b as g,I as h,vt as i,pt as j,Ek as k,O as l,re as m,rp as n,ve as o,ft as p,iE as q,gu as r,k as s,xe as t,X as u,$e as v,et as w,de as x,K as y,Oe as z};
//# sourceMappingURL=index-DwpG5EyW.js.map
