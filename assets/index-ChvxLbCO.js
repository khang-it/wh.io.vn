const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./MobileLayout-DJ5dmgiE.js","./auth-D8PczKUh.js","./MobileLayout-kgKoArum.css","./DesktopLayout-BFCDt9pH.js","./DesktopLayout-DVaojfNY.css"])))=>i.map(i=>d[i]);
var GM=Object.defineProperty;var J0=e=>{throw TypeError(e)};var VM=(e,t,s)=>t in e?GM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Ge=(e,t,s)=>VM(e,typeof t!="symbol"?t+"":t,s),OC=(e,t,s)=>t.has(e)||J0("Cannot "+s);var g=(e,t,s)=>(OC(e,t,"read from private field"),s?s.call(e):t.get(e)),P=(e,t,s)=>t.has(e)?J0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),x=(e,t,s,i)=>(OC(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),E=(e,t,s)=>(OC(e,t,"access private method"),s);var li=(e,t,s,i)=>({set _(n){x(e,t,n,s)},get _(){return g(e,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const _E=!1;var up=Array.isArray,zM=Array.prototype.indexOf,mS=Array.from,ME=Object.defineProperty,Gr=Object.getOwnPropertyDescriptor,kE=Object.getOwnPropertyDescriptors,WM=Object.prototype,$M=Array.prototype,vS=Object.getPrototypeOf,Z0=Object.isExtensible;function Ed(e){return typeof e=="function"}const jn=()=>{};function UM(e){return e()}function Vw(e){for(var t=0;t<e.length;t++)e[t]()}function IE(){var e,t,s=new Promise((i,n)=>{e=i,t=n});return{promise:s,resolve:e,reject:t}}function LE(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const s=[];for(const i of e)if(s.push(i),s.length===t)break;return s}const ai=2,iC=4,nC=8,jo=16,sa=32,ad=64,oC=128,eo=512,$s=1024,_i=2048,Ko=4096,Xi=8192,el=16384,rC=32768,qr=65536,ex=1<<17,OE=1<<18,Cu=1<<19,NE=1<<20,Fg=32768,zw=1<<21,CS=1<<22,tl=1<<23,Bo=Symbol("$state"),HE=Symbol("legacy props"),jM=Symbol(""),Ld=new class extends Error{constructor(){super(...arguments);Ge(this,"name","StaleReactionError");Ge(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function NC(){throw new Error("https://svelte.dev/e/invalid_default_snippet")}function gp(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function KM(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function qM(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function YM(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function XM(e){throw new Error("https://svelte.dev/e/effect_orphan")}function QM(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function JM(e){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function ZM(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function ek(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function tk(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function sk(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ik(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const aC=1,lC=2,BE=4,nk=8,ok=16,rk=1,ak=2,GE=4,lk=8,ck=16,dk=4,hk=1,uk=2,Ws=Symbol(),gk="http://www.w3.org/1999/xhtml",fk="http://www.w3.org/2000/svg",pk="@attach";function mk(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function vk(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Ck=!1;function VE(e){return e===this.v}function zE(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function WE(e){return!zE(e,this.v)}let wu=!1,wk=!1;function bk(){wu=!0}let St=null;function nu(e){St=e}function yk(e){return $E().get(e)}function Sk(e,t){return $E().set(e,t),t}function lt(e,t=!1,s){St={p:St,i:!1,c:null,e:null,s:e,x:null,l:wu&&!t?{s:null,u:null,$:[]}:null}}function ct(e){var t=St,s=t.e;if(s!==null){t.e=null;for(var i of s)lA(i)}return e!==void 0&&(t.x=e),t.i=!0,St=t.p,e??{}}function fp(){return!wu||St!==null&&St.l===null}function $E(e){return St===null&&gp(),St.c??(St.c=new Map(xk(St)||void 0))}function xk(e){let t=e.p;for(;t!==null;){const s=t.c;if(s!==null)return s;t=t.p}return null}let Ll=[];function UE(){var e=Ll;Ll=[],Vw(e)}function ml(e){if(Ll.length===0&&!dg){var t=Ll;queueMicrotask(()=>{t===Ll&&UE()})}Ll.push(e)}function Rk(){for(;Ll.length>0;)UE()}function jE(e){var t=Ct;if(t===null)return pt.f|=tl,e;if((t.f&rC)===0){if((t.f&oC)===0)throw e;t.b.error(e)}else ou(e,t)}function ou(e,t){for(;t!==null;){if((t.f&oC)!==0)try{t.b.error(e);return}catch(s){e=s}t=t.parent}throw e}const Mp=new Set;let Ft=null,cg=null,ns=null,Io=[],cC=null,Ww=!1,dg=!1;var sh,ih,Bl,Gl,Kg,nh,oh,oi,$w,Al,KE,qE;const Nv=class Nv{constructor(){P(this,oi);Ge(this,"committed",!1);Ge(this,"current",new Map);Ge(this,"previous",new Map);P(this,sh,new Set);P(this,ih,new Set);P(this,Bl,0);P(this,Gl,0);P(this,Kg,null);P(this,nh,[]);P(this,oh,[]);Ge(this,"skipped_effects",new Set);Ge(this,"is_fork",!1)}process(t){var i;Io=[],cg=null,this.apply();var s={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const n of t)E(this,oi,$w).call(this,n,s);this.is_fork||E(this,oi,KE).call(this),g(this,Gl)>0||this.is_fork?(E(this,oi,Al).call(this,s.effects),E(this,oi,Al).call(this,s.render_effects),E(this,oi,Al).call(this,s.block_effects)):(cg=this,Ft=null,tx(s.render_effects),tx(s.effects),cg=null,(i=g(this,Kg))==null||i.resolve()),ns=null}capture(t,s){this.previous.has(t)||this.previous.set(t,s),(t.f&tl)===0&&(this.current.set(t,t.v),ns==null||ns.set(t,t.v))}activate(){Ft=this,this.apply()}deactivate(){Ft=null,ns=null}flush(){if(this.activate(),Io.length>0){if(YE(),Ft!==null&&Ft!==this)return}else g(this,Bl)===0&&this.process([]);this.deactivate()}discard(){for(const t of g(this,ih))t(this);g(this,ih).clear()}increment(t){x(this,Bl,g(this,Bl)+1),t&&x(this,Gl,g(this,Gl)+1)}decrement(t){x(this,Bl,g(this,Bl)-1),t&&x(this,Gl,g(this,Gl)-1),this.revive()}revive(){for(const t of g(this,nh))js(t,_i),Yc(t);for(const t of g(this,oh))js(t,Ko),Yc(t);x(this,nh,[]),x(this,oh,[]),this.flush()}oncommit(t){g(this,sh).add(t)}ondiscard(t){g(this,ih).add(t)}settled(){return(g(this,Kg)??x(this,Kg,IE())).promise}static ensure(){if(Ft===null){const t=Ft=new Nv;Mp.add(Ft),dg||Nv.enqueue(()=>{Ft===t&&t.flush()})}return Ft}static enqueue(t){ml(t)}apply(){}};sh=new WeakMap,ih=new WeakMap,Bl=new WeakMap,Gl=new WeakMap,Kg=new WeakMap,nh=new WeakMap,oh=new WeakMap,oi=new WeakSet,$w=function(t,s){var d;t.f^=$s;for(var i=t.first;i!==null;){var n=i.f,o=(n&(sa|ad))!==0,r=o&&(n&$s)!==0,a=r||(n&Xi)!==0||this.skipped_effects.has(i);if((i.f&oC)!==0&&((d=i.b)!=null&&d.is_pending())&&(s={parent:s,effect:i,effects:[],render_effects:[],block_effects:[]}),!a&&i.fn!==null){o?i.f^=$s:(n&iC)!==0?s.effects.push(i):xu(i)&&((i.f&jo)!==0&&s.block_effects.push(i),au(i));var l=i.first;if(l!==null){i=l;continue}}var c=i.parent;for(i=i.next;i===null&&c!==null;)c===s.effect&&(E(this,oi,Al).call(this,s.effects),E(this,oi,Al).call(this,s.render_effects),E(this,oi,Al).call(this,s.block_effects),s=s.parent),i=c.next,c=c.parent}},Al=function(t){for(const s of t)((s.f&_i)!==0?g(this,nh):g(this,oh)).push(s),js(s,$s)},KE=function(){if(g(this,Gl)===0){for(const t of g(this,sh))t();g(this,sh).clear()}g(this,Bl)===0&&E(this,oi,qE).call(this)},qE=function(){var n;if(Mp.size>1){this.previous.clear();var t=ns,s=!0,i={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const o of Mp){if(o===this){s=!1;continue}const r=[];for(const[l,c]of this.current){if(o.current.has(l))if(s&&c!==o.current.get(l))o.current.set(l,c);else continue;r.push(l)}if(r.length===0)continue;const a=[...o.current.keys()].filter(l=>!this.current.has(l));if(a.length>0){const l=new Set,c=new Map;for(const d of r)XE(d,a,l,c);if(Io.length>0){Ft=o,o.apply();for(const d of Io)E(n=o,oi,$w).call(n,d,i);Io=[],o.deactivate()}}}Ft=null,ns=t}this.committed=!0,Mp.delete(this)};let Nr=Nv;function Ek(e){var t=dg;dg=!0;try{for(var s;;){if(Rk(),Io.length===0&&(Ft==null||Ft.flush(),Io.length===0))return cC=null,s;YE()}}finally{dg=t}}function YE(){var e=Gc;Ww=!0;try{var t=0;for(rx(!0);Io.length>0;){var s=Nr.ensure();if(t++>1e3){var i,n;Ak()}s.process(Io),sl.clear()}}finally{Ww=!1,rx(e),cC=null}}function Ak(){try{QM()}catch(e){ou(e,cC)}}let An=null;function tx(e){var t=e.length;if(t!==0){for(var s=0;s<t;){var i=e[s++];if((i.f&(el|Xi))===0&&xu(i)&&(An=new Set,au(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?hA(i):i.fn=null),(An==null?void 0:An.size)>0)){sl.clear();for(const n of An){if((n.f&(el|Xi))!==0)continue;const o=[n];let r=n.parent;for(;r!==null;)An.has(r)&&(An.delete(r),o.push(r)),r=r.parent;for(let a=o.length-1;a>=0;a--){const l=o[a];(l.f&(el|Xi))===0&&au(l)}}An.clear()}}An=null}}function XE(e,t,s,i){if(!s.has(e)&&(s.add(e),e.reactions!==null))for(const n of e.reactions){const o=n.f;(o&ai)!==0?XE(n,t,s,i):(o&(CS|jo))!==0&&(o&_i)===0&&QE(n,t,i)&&(js(n,_i),Yc(n))}}function QE(e,t,s){const i=s.get(e);if(i!==void 0)return i;if(e.deps!==null)for(const n of e.deps){if(t.includes(n))return!0;if((n.f&ai)!==0&&QE(n,t,s))return s.set(n,!0),!0}return s.set(e,!1),!1}function Yc(e){for(var t=cC=e;t.parent!==null;){t=t.parent;var s=t.f;if(Ww&&t===Ct&&(s&jo)!==0&&(s&OE)===0)return;if((s&(ad|sa))!==0){if((s&$s)===0)return;t.f^=$s}}Io.push(t)}function Fk(e){let t=0,s=Yr(0),i;return()=>{dC()&&(w(s),Su(()=>(t===0&&(i=Y(()=>e(()=>hg(s)))),t+=1,()=>{ml(()=>{t-=1,t===0&&(i==null||i(),i=void 0,hg(s))})})))}}var Pk=qr|Cu|oC;function Tk(e,t,s){new Dk(e,t,s)}var rn,an,pS,ho,Vl,uo,ln,Si,go,lr,ba,zl,ya,Wl,Sa,Hv,Ls,_k,Mk,Uw,rm,am,jw;class Dk{constructor(t,s,i){P(this,Ls);Ge(this,"parent");P(this,rn,!1);P(this,an);P(this,pS,null);P(this,ho);P(this,Vl);P(this,uo);P(this,ln,null);P(this,Si,null);P(this,go,null);P(this,lr,null);P(this,ba,null);P(this,zl,0);P(this,ya,0);P(this,Wl,!1);P(this,Sa,null);P(this,Hv,Fk(()=>(x(this,Sa,Yr(g(this,zl))),()=>{x(this,Sa,null)})));x(this,an,t),x(this,ho,s),x(this,Vl,i),this.parent=Ct.b,x(this,rn,!!g(this,ho).pending),x(this,uo,ld(()=>{Ct.b=this;{var n=E(this,Ls,Uw).call(this);try{x(this,ln,ji(()=>i(n)))}catch(o){this.error(o)}g(this,ya)>0?E(this,Ls,am).call(this):x(this,rn,!1)}return()=>{var o;(o=g(this,ba))==null||o.remove()}},Pk))}is_pending(){return g(this,rn)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!g(this,ho).pending}update_pending_count(t){E(this,Ls,jw).call(this,t),x(this,zl,g(this,zl)+t),g(this,Sa)&&Xc(g(this,Sa),g(this,zl))}get_effect_pending(){return g(this,Hv).call(this),w(g(this,Sa))}error(t){var s=g(this,ho).onerror;let i=g(this,ho).failed;if(g(this,Wl)||!s&&!i)throw t;g(this,ln)&&(Is(g(this,ln)),x(this,ln,null)),g(this,Si)&&(Is(g(this,Si)),x(this,Si,null)),g(this,go)&&(Is(g(this,go)),x(this,go,null));var n=!1,o=!1;const r=()=>{if(n){vk();return}n=!0,o&&ik(),Nr.ensure(),x(this,zl,0),g(this,go)!==null&&Vd(g(this,go),()=>{x(this,go,null)}),x(this,rn,this.has_pending_snippet()),x(this,ln,E(this,Ls,rm).call(this,()=>(x(this,Wl,!1),ji(()=>g(this,Vl).call(this,g(this,an)))))),g(this,ya)>0?E(this,Ls,am).call(this):x(this,rn,!1)};var a=pt;try{Fi(null),o=!0,s==null||s(t,r),o=!1}catch(l){ou(l,g(this,uo)&&g(this,uo).parent)}finally{Fi(a)}i&&ml(()=>{x(this,go,E(this,Ls,rm).call(this,()=>{Nr.ensure(),x(this,Wl,!0);try{return ji(()=>{i(g(this,an),()=>t,()=>r)})}catch(l){return ou(l,g(this,uo).parent),null}finally{x(this,Wl,!1)}}))})}}rn=new WeakMap,an=new WeakMap,pS=new WeakMap,ho=new WeakMap,Vl=new WeakMap,uo=new WeakMap,ln=new WeakMap,Si=new WeakMap,go=new WeakMap,lr=new WeakMap,ba=new WeakMap,zl=new WeakMap,ya=new WeakMap,Wl=new WeakMap,Sa=new WeakMap,Hv=new WeakMap,Ls=new WeakSet,_k=function(){try{x(this,ln,ji(()=>g(this,Vl).call(this,g(this,an))))}catch(t){this.error(t)}x(this,rn,!1)},Mk=function(){const t=g(this,ho).pending;t&&(x(this,Si,ji(()=>t(g(this,an)))),Nr.enqueue(()=>{var s=E(this,Ls,Uw).call(this);x(this,ln,E(this,Ls,rm).call(this,()=>(Nr.ensure(),ji(()=>g(this,Vl).call(this,s))))),g(this,ya)>0?E(this,Ls,am).call(this):(Vd(g(this,Si),()=>{x(this,Si,null)}),x(this,rn,!1))}))},Uw=function(){var t=g(this,an);return g(this,rn)&&(x(this,ba,Xr()),g(this,an).before(g(this,ba)),t=g(this,ba)),t},rm=function(t){var s=Ct,i=pt,n=St;yn(g(this,uo)),Fi(g(this,uo)),nu(g(this,uo).ctx);try{return t()}catch(o){return jE(o),null}finally{yn(s),Fi(i),nu(n)}},am=function(){const t=g(this,ho).pending;g(this,ln)!==null&&(x(this,lr,document.createDocumentFragment()),g(this,lr).append(g(this,ba)),fA(g(this,ln),g(this,lr))),g(this,Si)===null&&x(this,Si,ji(()=>t(g(this,an))))},jw=function(t){var s;if(!this.has_pending_snippet()){this.parent&&E(s=this.parent,Ls,jw).call(s,t);return}x(this,ya,g(this,ya)+t),g(this,ya)===0&&(x(this,rn,!1),g(this,Si)&&Vd(g(this,Si),()=>{x(this,Si,null)}),g(this,lr)&&(g(this,an).before(g(this,lr)),x(this,lr,null)))};function JE(e,t,s,i){const n=fp()?pp:Hr;if(s.length===0&&e.length===0){i(t.map(n));return}var o=Ft,r=Ct,a=kk();function l(){Promise.all(s.map(c=>Ik(c))).then(c=>{a();try{i([...t.map(n),...c])}catch(d){(r.f&el)===0&&ou(d,r)}o==null||o.deactivate(),sv()}).catch(c=>{ou(c,r)})}e.length>0?Promise.all(e).then(()=>{a();try{return l()}finally{o==null||o.deactivate(),sv()}}):l()}function kk(){var e=Ct,t=pt,s=St,i=Ft;return function(o=!0){yn(e),Fi(t),nu(s),o&&(i==null||i.activate())}}function sv(){yn(null),Fi(null),nu(null)}function pp(e){var t=ai|_i,s=pt!==null&&(pt.f&ai)!==0?pt:null;return Ct!==null&&(Ct.f|=Cu),{ctx:St,deps:null,effects:null,equals:VE,f:t,fn:e,reactions:null,rv:0,v:Ws,wv:0,parent:s??Ct,ac:null}}function Ik(e,t){let s=Ct;s===null&&KM();var i=s.b,n=void 0,o=Yr(Ws),r=!pt,a=new Map;return $k(()=>{var u;var l=IE();n=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{c===Ft&&c.committed&&c.deactivate(),sv()})}catch(f){l.reject(f),sv()}var c=Ft;if(r){var d=!i.is_pending();i.update_pending_count(1),c.increment(d),(u=a.get(c))==null||u.reject(Ld),a.delete(c),a.set(c,l)}const h=(f,p=void 0)=>{if(c.activate(),p)p!==Ld&&(o.f|=tl,Xc(o,p));else{(o.f&tl)!==0&&(o.f^=tl),Xc(o,f);for(const[m,v]of a){if(a.delete(m),m===c)break;v.reject(Ld)}}r&&(i.update_pending_count(-1),c.decrement(d))};l.promise.then(h,f=>h(null,f||"unknown"))}),yu(()=>{for(const l of a.values())l.reject(Ld)}),new Promise(l=>{function c(d){function h(){d===n?l(o):c(n)}d.then(h,h)}c(n)})}function Ml(e){const t=pp(e);return pA(t),t}function Hr(e){const t=pp(e);return t.equals=WE,t}function ZE(e){var t=e.effects;if(t!==null){e.effects=null;for(var s=0;s<t.length;s+=1)Is(t[s])}}function Lk(e){for(var t=e.parent;t!==null;){if((t.f&ai)===0)return t;t=t.parent}return null}function wS(e){var t,s=Ct;yn(Lk(e));try{e.f&=~Fg,ZE(e),t=wA(e)}finally{yn(s)}return t}function eA(e){var t=wS(e);if(e.equals(t)||(e.v=t,e.wv=vA()),!cd)if(ns!==null)dC()&&ns.set(e,e.v);else{var s=(e.f&eo)===0?Ko:$s;js(e,s)}}let Kw=new Set;const sl=new Map;let tA=!1;function Yr(e,t){var s={f:0,v:e,reactions:null,equals:VE,rv:0,wv:0};return s}function aa(e,t){const s=Yr(e);return pA(s),s}function J(e,t=!1,s=!0){var n;const i=Yr(e);return t||(i.equals=WE),wu&&s&&St!==null&&St.l!==null&&((n=St.l).s??(n.s=[])).push(i),i}function as(e,t){return L(e,Y(()=>w(e))),t}function L(e,t,s=!1){pt!==null&&(!No||(pt.f&ex)!==0)&&fp()&&(pt.f&(ai|jo|CS|ex))!==0&&!(fi!=null&&fi.includes(e))&&sk();let i=s?Od(t):t;return Xc(e,i)}function Xc(e,t){if(!e.equals(t)){var s=e.v;cd?sl.set(e,t):sl.set(e,s),e.v=t;var i=Nr.ensure();i.capture(e,s),(e.f&ai)!==0&&((e.f&_i)!==0&&wS(e),js(e,(e.f&eo)!==0?$s:Ko)),e.wv=vA(),sA(e,_i),fp()&&Ct!==null&&(Ct.f&$s)!==0&&(Ct.f&(sa|ad))===0&&(on===null?Yk([e]):on.push(e)),!i.is_fork&&Kw.size>0&&!tA&&Ok()}return t}function Ok(){tA=!1;const e=Array.from(Kw);for(const t of e)(t.f&$s)!==0&&js(t,Ko),xu(t)&&au(t);Kw.clear()}function sx(e,t=1){var s=w(e),i=t===1?s++:s--;return L(e,s),i}function hg(e){L(e,e.v+1)}function sA(e,t){var s=e.reactions;if(s!==null)for(var i=fp(),n=s.length,o=0;o<n;o++){var r=s[o],a=r.f;if(!(!i&&r===Ct)){var l=(a&_i)===0;if(l&&js(r,t),(a&ai)!==0){var c=r;ns==null||ns.delete(c),(a&Fg)===0&&(a&eo&&(r.f|=Fg),sA(c,Ko))}else l&&((a&jo)!==0&&An!==null&&An.add(r),Yc(r))}}}function Od(e){if(typeof e!="object"||e===null||Bo in e)return e;const t=vS(e);if(t!==WM&&t!==$M)return e;var s=new Map,i=up(e),n=aa(0),o=Vc,r=a=>{if(Vc===o)return a();var l=pt,c=Vc;Fi(null),lx(o);var d=a();return Fi(l),lx(c),d};return i&&s.set("length",aa(e.length)),new Proxy(e,{defineProperty(a,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&ek();var d=s.get(l);return d===void 0?d=r(()=>{var h=aa(c.value);return s.set(l,h),h}):L(d,c.value,!0),!0},deleteProperty(a,l){var c=s.get(l);if(c===void 0){if(l in a){const d=r(()=>aa(Ws));s.set(l,d),hg(n)}}else L(c,Ws),hg(n);return!0},get(a,l,c){var f;if(l===Bo)return e;var d=s.get(l),h=l in a;if(d===void 0&&(!h||(f=Gr(a,l))!=null&&f.writable)&&(d=r(()=>{var p=Od(h?a[l]:Ws),m=aa(p);return m}),s.set(l,d)),d!==void 0){var u=w(d);return u===Ws?void 0:u}return Reflect.get(a,l,c)},getOwnPropertyDescriptor(a,l){var c=Reflect.getOwnPropertyDescriptor(a,l);if(c&&"value"in c){var d=s.get(l);d&&(c.value=w(d))}else if(c===void 0){var h=s.get(l),u=h==null?void 0:h.v;if(h!==void 0&&u!==Ws)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return c},has(a,l){var u;if(l===Bo)return!0;var c=s.get(l),d=c!==void 0&&c.v!==Ws||Reflect.has(a,l);if(c!==void 0||Ct!==null&&(!d||(u=Gr(a,l))!=null&&u.writable)){c===void 0&&(c=r(()=>{var f=d?Od(a[l]):Ws,p=aa(f);return p}),s.set(l,c));var h=w(c);if(h===Ws)return!1}return d},set(a,l,c,d){var y;var h=s.get(l),u=l in a;if(i&&l==="length")for(var f=c;f<h.v;f+=1){var p=s.get(f+"");p!==void 0?L(p,Ws):f in a&&(p=r(()=>aa(Ws)),s.set(f+"",p))}if(h===void 0)(!u||(y=Gr(a,l))!=null&&y.writable)&&(h=r(()=>aa(void 0)),L(h,Od(c)),s.set(l,h));else{u=h.v!==Ws;var m=r(()=>Od(c));L(h,m)}var v=Reflect.getOwnPropertyDescriptor(a,l);if(v!=null&&v.set&&v.set.call(d,c),!u){if(i&&typeof l=="string"){var C=s.get("length"),b=Number(l);Number.isInteger(b)&&b>=C.v&&L(C,b+1)}hg(n)}return!0},ownKeys(a){w(n);var l=Reflect.ownKeys(a).filter(h=>{var u=s.get(h);return u===void 0||u.v!==Ws});for(var[c,d]of s)d.v!==Ws&&!(c in a)&&l.push(c);return l},setPrototypeOf(){tk()}})}function ix(e){try{if(e!==null&&typeof e=="object"&&Bo in e)return e[Bo]}catch{}return e}function Nk(e,t){return Object.is(ix(e),ix(t))}var nx,iA,nA,oA;function Hk(){if(nx===void 0){nx=window,iA=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,s=Text.prototype;nA=Gr(t,"firstChild").get,oA=Gr(t,"nextSibling").get,Z0(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Z0(s)&&(s.__t=void 0)}}function Xr(e=""){return document.createTextNode(e)}function ru(e){return nA.call(e)}function mp(e){return oA.call(e)}function D(e,t){return ru(e)}function j(e,t=!1){{var s=ru(e);return s instanceof Comment&&s.data===""?mp(s):s}}function M(e,t=1,s=!1){let i=e;for(;t--;)i=mp(i);return i}function Bk(e){e.textContent=""}function rA(){return!1}function bS(e,t){if(t){const s=document.body;e.autofocus=!0,ml(()=>{document.activeElement===s&&e.focus()})}}let ox=!1;function Gk(){ox||(ox=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const s of e.target.elements)(t=s.__on_r)==null||t.call(s)})},{capture:!0}))}function bu(e){var t=pt,s=Ct;Fi(null),yn(null);try{return e()}finally{Fi(t),yn(s)}}function yS(e,t,s,i=s){e.addEventListener(t,()=>bu(s));const n=e.__on_r;n?e.__on_r=()=>{n(),i(!0)}:e.__on_r=()=>i(!0),Gk()}function aA(e){Ct===null&&(pt===null&&XM(),YM()),cd&&qM()}function Vk(e,t){var s=t.last;s===null?t.last=t.first=e:(s.next=e,e.prev=s,t.last=e)}function qo(e,t,s,i=!0){var n=Ct;n!==null&&(n.f&Xi)!==0&&(e|=Xi);var o={ctx:St,deps:null,nodes_start:null,nodes_end:null,f:e|_i|eo,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(s)try{au(o),o.f|=rC}catch(l){throw Is(o),l}else t!==null&&Yc(o);if(i){var r=o;if(s&&r.deps===null&&r.teardown===null&&r.nodes_start===null&&r.first===r.last&&(r.f&Cu)===0&&(r=r.first,(e&jo)!==0&&(e&qr)!==0&&r!==null&&(r.f|=qr)),r!==null&&(r.parent=n,n!==null&&Vk(r,n),pt!==null&&(pt.f&ai)!==0&&(e&ad)===0)){var a=pt;(a.effects??(a.effects=[])).push(r)}}return o}function dC(){return pt!==null&&!No}function yu(e){const t=qo(nC,null,!1);return js(t,$s),t.teardown=e,t}function qw(e){aA();var t=Ct.f,s=!pt&&(t&sa)!==0&&(t&rC)===0;if(s){var i=St;(i.e??(i.e=[])).push(e)}else return lA(e)}function lA(e){return qo(iC|NE,e,!1)}function zk(e){return aA(),qo(nC|NE,e,!0)}function Wk(e){Nr.ensure();const t=qo(ad|Cu,e,!0);return(s={})=>new Promise(i=>{s.outro?Vd(t,()=>{Is(t),i(void 0)}):(Is(t),i(void 0))})}function vp(e){return qo(iC,e,!1)}function Bt(e,t){var s=St,i={effect:null,ran:!1,deps:e};s.l.$.push(i),i.effect=Su(()=>{e(),!i.ran&&(i.ran=!0,Y(t))})}function ki(){var e=St;Su(()=>{for(var t of e.l.$){t.deps();var s=t.effect;(s.f&$s)!==0&&js(s,Ko),xu(s)&&au(s),t.ran=!1}})}function $k(e){return qo(CS|Cu,e,!0)}function Su(e,t=0){return qo(nC|t,e,!0)}function Ae(e,t=[],s=[],i=[],n=!1){JE(i,t,s,o=>{qo(n?iC:nC,()=>e(...o.map(w)),!0)})}function ld(e,t=0){var s=qo(jo|t,e,!0);return s}function ji(e,t=!0){return qo(sa|Cu,e,!0,t)}function cA(e){var t=e.teardown;if(t!==null){const s=cd,i=pt;ax(!0),Fi(null);try{t.call(null)}finally{ax(s),Fi(i)}}}function dA(e,t=!1){var s=e.first;for(e.first=e.last=null;s!==null;){const n=s.ac;n!==null&&bu(()=>{n.abort(Ld)});var i=s.next;(s.f&ad)!==0?s.parent=null:Is(s,t),s=i}}function Uk(e){for(var t=e.first;t!==null;){var s=t.next;(t.f&sa)===0&&Is(t),t=s}}function Is(e,t=!0){var s=!1;(t||(e.f&OE)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(jk(e.nodes_start,e.nodes_end),s=!0),dA(e,t&&!s),iv(e,0),js(e,el);var i=e.transitions;if(i!==null)for(const o of i)o.stop();cA(e);var n=e.parent;n!==null&&n.first!==null&&hA(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function jk(e,t){for(;e!==null;){var s=e===t?null:mp(e);e.remove(),e=s}}function hA(e){var t=e.parent,s=e.prev,i=e.next;s!==null&&(s.next=i),i!==null&&(i.prev=s),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=s))}function Vd(e,t,s=!0){var i=[];SS(e,i,!0),uA(i,()=>{s&&Is(e),t&&t()})}function uA(e,t){var s=e.length;if(s>0){var i=()=>--s||t();for(var n of e)n.out(i)}else t()}function SS(e,t,s){if((e.f&Xi)===0){if(e.f^=Xi,e.transitions!==null)for(const r of e.transitions)(r.is_global||s)&&t.push(r);for(var i=e.first;i!==null;){var n=i.next,o=(i.f&qr)!==0||(i.f&sa)!==0&&(e.f&jo)!==0;SS(i,t,o?s:!1),i=n}}}function xS(e){gA(e,!0)}function gA(e,t){if((e.f&Xi)!==0){e.f^=Xi,(e.f&$s)===0&&(js(e,_i),Yc(e));for(var s=e.first;s!==null;){var i=s.next,n=(s.f&qr)!==0||(s.f&sa)!==0;gA(s,n?t:!1),s=i}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}function fA(e,t){for(var s=e.nodes_start,i=e.nodes_end;s!==null;){var n=s===i?null:mp(s);t.append(s),s=n}}let va=null;function Kk(e){var t=va;try{if(va=new Set,Y(e),t!==null)for(var s of va)t.add(s);return va}finally{va=t}}function qk(e){for(var t of Kk(e))Xc(t,t.v)}let Gc=!1;function rx(e){Gc=e}let cd=!1;function ax(e){cd=e}let pt=null,No=!1;function Fi(e){pt=e}let Ct=null;function yn(e){Ct=e}let fi=null;function pA(e){pt!==null&&(fi===null?fi=[e]:fi.push(e))}let hi=null,Li=0,on=null;function Yk(e){on=e}let mA=1,Pg=0,Vc=Pg;function lx(e){Vc=e}function vA(){return++mA}function xu(e){var t=e.f;if((t&_i)!==0)return!0;if(t&ai&&(e.f&=~Fg),(t&Ko)!==0){var s=e.deps;if(s!==null)for(var i=s.length,n=0;n<i;n++){var o=s[n];if(xu(o)&&eA(o),o.wv>e.wv)return!0}(t&eo)!==0&&ns===null&&js(e,$s)}return!1}function CA(e,t,s=!0){var i=e.reactions;if(i!==null&&!(fi!=null&&fi.includes(e)))for(var n=0;n<i.length;n++){var o=i[n];(o.f&ai)!==0?CA(o,t,!1):t===o&&(s?js(o,_i):(o.f&$s)!==0&&js(o,Ko),Yc(o))}}function wA(e){var p;var t=hi,s=Li,i=on,n=pt,o=fi,r=St,a=No,l=Vc,c=e.f;hi=null,Li=0,on=null,pt=(c&(sa|ad))===0?e:null,fi=null,nu(e.ctx),No=!1,Vc=++Pg,e.ac!==null&&(bu(()=>{e.ac.abort(Ld)}),e.ac=null);try{e.f|=zw;var d=e.fn,h=d(),u=e.deps;if(hi!==null){var f;if(iv(e,Li),u!==null&&Li>0)for(u.length=Li+hi.length,f=0;f<hi.length;f++)u[Li+f]=hi[f];else e.deps=u=hi;if(Gc&&dC()&&(e.f&eo)!==0)for(f=Li;f<u.length;f++)((p=u[f]).reactions??(p.reactions=[])).push(e)}else u!==null&&Li<u.length&&(iv(e,Li),u.length=Li);if(fp()&&on!==null&&!No&&u!==null&&(e.f&(ai|Ko|_i))===0)for(f=0;f<on.length;f++)CA(on[f],e);return n!==null&&n!==e&&(Pg++,on!==null&&(i===null?i=on:i.push(...on))),(e.f&tl)!==0&&(e.f^=tl),h}catch(m){return jE(m)}finally{e.f^=zw,hi=t,Li=s,on=i,pt=n,fi=o,nu(r),No=a,Vc=l}}function Xk(e,t){let s=t.reactions;if(s!==null){var i=zM.call(s,e);if(i!==-1){var n=s.length-1;n===0?s=t.reactions=null:(s[i]=s[n],s.pop())}}s===null&&(t.f&ai)!==0&&(hi===null||!hi.includes(t))&&(js(t,Ko),(t.f&eo)!==0&&(t.f^=eo,t.f&=~Fg),ZE(t),iv(t,0))}function iv(e,t){var s=e.deps;if(s!==null)for(var i=t;i<s.length;i++)Xk(e,s[i])}function au(e){var t=e.f;if((t&el)===0){js(e,$s);var s=Ct,i=Gc;Ct=e,Gc=!0;try{(t&jo)!==0?Uk(e):dA(e),cA(e);var n=wA(e);e.teardown=typeof n=="function"?n:null,e.wv=mA;var o;_E&&wk&&(e.f&_i)!==0&&e.deps}finally{Gc=i,Ct=s}}}async function Qr(){await Promise.resolve(),Ek()}function w(e){var t=e.f,s=(t&ai)!==0;if(va==null||va.add(e),pt!==null&&!No){var i=Ct!==null&&(Ct.f&el)!==0;if(!i&&!(fi!=null&&fi.includes(e))){var n=pt.deps;if((pt.f&zw)!==0)e.rv<Pg&&(e.rv=Pg,hi===null&&n!==null&&n[Li]===e?Li++:hi===null?hi=[e]:hi.includes(e)||hi.push(e));else{(pt.deps??(pt.deps=[])).push(e);var o=e.reactions;o===null?e.reactions=[pt]:o.includes(pt)||o.push(pt)}}}if(cd){if(sl.has(e))return sl.get(e);if(s){var r=e,a=r.v;return((r.f&$s)===0&&r.reactions!==null||yA(r))&&(a=wS(r)),sl.set(r,a),a}}else if(s){if(r=e,ns!=null&&ns.has(r))return ns.get(r);xu(r)&&eA(r),Gc&&dC()&&(r.f&eo)===0&&bA(r)}else if(ns!=null&&ns.has(e))return ns.get(e);if((e.f&tl)!==0)throw e.v;return e.v}function bA(e){if(e.deps!==null){e.f^=eo;for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&ai)!==0&&(t.f&eo)===0&&bA(t)}}function yA(e){if(e.v===Ws)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(sl.has(t)||(t.f&ai)!==0&&yA(t))return!0;return!1}function Y(e){var t=No;try{return No=!0,e()}finally{No=t}}const Qk=-7169;function js(e,t){e.f=e.f&Qk|t}function me(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Bo in e)Yw(e);else if(!Array.isArray(e))for(let t in e){const s=e[t];typeof s=="object"&&s&&Bo in s&&Yw(s)}}}function Yw(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{Yw(e[i],t)}catch{}const s=vS(e);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const i=kE(s);for(let n in i){const o=i[n].get;if(o)try{o.call(e)}catch{}}}}}function Jk(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Zk=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function e1(e){return Zk.includes(e)}const t1={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function s1(e){return e=e.toLowerCase(),t1[e]??e}const i1=["touchstart","touchmove"];function n1(e){return i1.includes(e)}const SA=new Set,Xw=new Set;function xA(e,t,s,i={}){function n(o){if(i.capture||Wu.call(t,o),!o.cancelBubble)return bu(()=>s==null?void 0:s.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?ml(()=>{t.addEventListener(e,n,i)}):t.addEventListener(e,n,i),n}function z(e,t,s,i,n){var o={capture:i,passive:n},r=xA(e,t,s,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&yu(()=>{t.removeEventListener(e,r,o)})}function Cp(e){for(var t=0;t<e.length;t++)SA.add(e[t]);for(var s of Xw)s(e)}let cx=null;function Wu(e){var v;var t=this,s=t.ownerDocument,i=e.type,n=((v=e.composedPath)==null?void 0:v.call(e))||[],o=n[0]||e.target;cx=e;var r=0,a=cx===e&&e.__root;if(a){var l=n.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var c=n.indexOf(t);if(c===-1)return;l<=c&&(r=l)}if(o=n[r]||e.target,o!==t){ME(e,"currentTarget",{configurable:!0,get(){return o||s}});var d=pt,h=Ct;Fi(null),yn(null);try{for(var u,f=[];o!==null;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var m=o["__"+i];m!=null&&(!o.disabled||e.target===o)&&m.call(o,e)}catch(C){u?f.push(C):u=C}if(e.cancelBubble||p===t||p===null)break;o=p}if(u){for(let C of f)queueMicrotask(()=>{throw C});throw u}}finally{e.__root=t,delete e.currentTarget,Fi(d),yn(h)}}}function RA(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function lu(e,t){var s=Ct;s.nodes_start===null&&(s.nodes_start=e,s.nodes_end=t)}function W(e,t){var s=(t&hk)!==0,i=(t&uk)!==0,n,o=!e.startsWith("<!>");return()=>{n===void 0&&(n=RA(o?e:"<!>"+e),s||(n=ru(n)));var r=i||iA?document.importNode(n,!0):n.cloneNode(!0);if(s){var a=ru(r),l=r.lastChild;lu(a,l)}else lu(r,r);return r}}function o1(e,t,s="svg"){var i=!e.startsWith("<!>"),n=`<${s}>${i?e:"<!>"+e}</${s}>`,o;return()=>{if(!o){var r=RA(n),a=ru(r);o=ru(a)}var l=o.cloneNode(!0);return lu(l,l),l}}function EA(e,t){return o1(e,t,"svg")}function AA(e=""){{var t=Xr(e+"");return lu(t,t),t}}function de(){var e=document.createDocumentFragment(),t=document.createComment(""),s=Xr();return e.append(t,s),lu(t,s),e}function _(e,t){e!==null&&e.before(t)}let nv=!0;function kp(e){nv=e}function ze(e,t){var s=t==null?"":typeof t=="object"?t+"":t;s!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=s,e.nodeValue=s+"")}function r1(e,t){return a1(e,t)}const bd=new Map;function a1(e,{target:t,anchor:s,props:i={},events:n,context:o,intro:r=!0}){Hk();var a=new Set,l=h=>{for(var u=0;u<h.length;u++){var f=h[u];if(!a.has(f)){a.add(f);var p=n1(f);t.addEventListener(f,Wu,{passive:p});var m=bd.get(f);m===void 0?(document.addEventListener(f,Wu,{passive:p}),bd.set(f,1)):bd.set(f,m+1)}}};l(mS(SA)),Xw.add(l);var c=void 0,d=Wk(()=>{var h=s??t.appendChild(Xr());return Tk(h,{pending:()=>{}},u=>{if(o){lt({});var f=St;f.c=o}n&&(i.$$events=n),nv=r,c=e(u,i)||{},nv=!0,o&&ct()}),()=>{var p;for(var u of a){t.removeEventListener(u,Wu);var f=bd.get(u);--f===0?(document.removeEventListener(u,Wu),bd.delete(u)):bd.set(u,f)}Xw.delete(l),h!==s&&((p=h.parentNode)==null||p.removeChild(h))}});return l1.set(c,d),c}let l1=new WeakMap;var Dn,fo,Oi,qg,Yg,Bv;class RS{constructor(t,s=!0){Ge(this,"anchor");P(this,Dn,new Map);P(this,fo,new Map);P(this,Oi,new Map);P(this,qg,!0);P(this,Yg,()=>{var t=Ft;if(g(this,Dn).has(t)){var s=g(this,Dn).get(t),i=g(this,fo).get(s);if(i)xS(i);else{var n=g(this,Oi).get(s);n&&(g(this,fo).set(s,n.effect),g(this,Oi).delete(s),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),i=n.effect)}for(const[o,r]of g(this,Dn)){if(g(this,Dn).delete(o),o===t)break;const a=g(this,Oi).get(r);a&&(Is(a.effect),g(this,Oi).delete(r))}for(const[o,r]of g(this,fo)){if(o===s)continue;const a=()=>{if(Array.from(g(this,Dn).values()).includes(o)){var c=document.createDocumentFragment();fA(r,c),c.append(Xr()),g(this,Oi).set(o,{effect:r,fragment:c})}else Is(r);g(this,fo).delete(o)};g(this,qg)||!i?Vd(r,a,!1):a()}}});P(this,Bv,t=>{g(this,Dn).delete(t);const s=Array.from(g(this,Dn).values());for(const[i,n]of g(this,Oi))s.includes(i)||(Is(n.effect),g(this,Oi).delete(i))});this.anchor=t,x(this,qg,s)}ensure(t,s){var i=Ft,n=rA();if(s&&!g(this,fo).has(t)&&!g(this,Oi).has(t))if(n){var o=document.createDocumentFragment(),r=Xr();o.append(r),g(this,Oi).set(t,{effect:ji(()=>s(r)),fragment:o})}else g(this,fo).set(t,ji(()=>s(this.anchor)));if(g(this,Dn).set(i,t),n){for(const[a,l]of g(this,fo))a===t?i.skipped_effects.delete(l):i.skipped_effects.add(l);for(const[a,l]of g(this,Oi))a===t?i.skipped_effects.delete(l.effect):i.skipped_effects.add(l.effect);i.oncommit(g(this,Yg)),i.ondiscard(g(this,Bv))}else g(this,Yg).call(this)}}Dn=new WeakMap,fo=new WeakMap,Oi=new WeakMap,qg=new WeakMap,Yg=new WeakMap,Bv=new WeakMap;function Z(e,t,s=!1){var i=new RS(e),n=s?qr:0;function o(r,a){i.ensure(r,a)}ld(()=>{var r=!1;t((a,l=!0)=>{r=!0,o(l,a)}),r||o(!1,null)},n)}function gi(e,t){return t}function c1(e,t,s){for(var i=e.items,n=[],o=t.length,r=0;r<o;r++)SS(t[r].e,n,!0);var a=o>0&&n.length===0&&s!==null;if(a){var l=s.parentNode;Bk(l),l.append(s),i.clear(),ao(e,t[0].prev,t[o-1].next)}uA(n,()=>{for(var c=0;c<o;c++){var d=t[c];a||(i.delete(d.k),ao(e,d.prev,d.next)),Is(d.e,!a)}})}function fs(e,t,s,i,n,o=null){var r=e,a={flags:t,items:new Map,first:null},l=(t&BE)!==0;if(l){var c=e;r=c.appendChild(Xr())}var d=null,h=!1,u=new Map,f=Hr(()=>{var C=s();return up(C)?C:C==null?[]:mS(C)}),p,m;function v(){d1(m,p,a,u,r,n,t,i,s),o!==null&&(p.length===0?d?xS(d):d=ji(()=>o(r)):d!==null&&Vd(d,()=>{d=null}))}ld(()=>{m??(m=Ct),p=w(f);var C=p.length;if(!(h&&C===0)){h=C===0;var b,y,S,R;if(rA()){var A=new Set,F=Ft;for(y=0;y<C;y+=1){S=p[y],R=i(S,y);var T=a.items.get(R)??u.get(R);T?(t&(aC|lC))!==0&&FA(T,S,y,t):(b=PA(null,a,null,null,S,R,y,n,t,s,!0),u.set(R,b)),A.add(R)}for(const[k,N]of a.items)A.has(k)||F.skipped_effects.add(N.e);F.oncommit(v)}else v();w(f)}})}function d1(e,t,s,i,n,o,r,a,l){var ve,ce,Se,Ce;var c=(r&nk)!==0,d=(r&(aC|lC))!==0,h=t.length,u=s.items,f=s.first,p=f,m,v=null,C,b=[],y=[],S,R,A,F;if(c)for(F=0;F<h;F+=1)S=t[F],R=a(S,F),A=u.get(R),A!==void 0&&((ve=A.a)==null||ve.measure(),(C??(C=new Set)).add(A));for(F=0;F<h;F+=1){if(S=t[F],R=a(S,F),A=u.get(R),A===void 0){var T=i.get(R);if(T!==void 0){i.delete(R),u.set(R,T);var k=v?v.next:p;ao(s,v,T),ao(s,T,k),HC(T,k,n),v=T}else{var N=p?p.e.nodes_start:n;v=PA(N,s,v,v===null?s.first:v.next,S,R,F,o,r,l)}u.set(R,v),b=[],y=[],p=v.next;continue}if(d&&FA(A,S,F,r),(A.e.f&Xi)!==0&&(xS(A.e),c&&((ce=A.a)==null||ce.unfix(),(C??(C=new Set)).delete(A))),A!==p){if(m!==void 0&&m.has(A)){if(b.length<y.length){var I=y[0],O;v=I.prev;var V=b[0],ee=b[b.length-1];for(O=0;O<b.length;O+=1)HC(b[O],I,n);for(O=0;O<y.length;O+=1)m.delete(y[O]);ao(s,V.prev,ee.next),ao(s,v,V),ao(s,ee,I),p=I,v=ee,F-=1,b=[],y=[]}else m.delete(A),HC(A,p,n),ao(s,A.prev,A.next),ao(s,A,v===null?s.first:v.next),ao(s,v,A),v=A;continue}for(b=[],y=[];p!==null&&p.k!==R;)(p.e.f&Xi)===0&&(m??(m=new Set)).add(p),y.push(p),p=p.next;if(p===null)continue;A=p}b.push(A),v=A,p=A.next}if(p!==null||m!==void 0){for(var G=m===void 0?[]:mS(m);p!==null;)(p.e.f&Xi)===0&&G.push(p),p=p.next;var ne=G.length;if(ne>0){var te=(r&BE)!==0&&h===0?n:null;if(c){for(F=0;F<ne;F+=1)(Se=G[F].a)==null||Se.measure();for(F=0;F<ne;F+=1)(Ce=G[F].a)==null||Ce.fix()}c1(s,G,te)}}c&&ml(()=>{var re;if(C!==void 0)for(A of C)(re=A.a)==null||re.apply()}),e.first=s.first&&s.first.e,e.last=v&&v.e;for(var K of i.values())Is(K.e);i.clear()}function FA(e,t,s,i){(i&aC)!==0&&Xc(e.v,t),(i&lC)!==0?Xc(e.i,s):e.i=s}function PA(e,t,s,i,n,o,r,a,l,c,d){var h=(l&aC)!==0,u=(l&ok)===0,f=h?u?J(n,!1,!1):Yr(n):n,p=(l&lC)===0?r:Yr(r),m={i:p,v:f,k:o,a:null,e:null,prev:s,next:i};try{if(e===null){var v=document.createDocumentFragment();v.append(e=Xr())}return m.e=ji(()=>a(e,f,p,c),Ck),m.e.prev=s&&s.e,m.e.next=i&&i.e,s===null?d||(t.first=m):(s.next=m,s.e.next=m.e),i!==null&&(i.prev=m,i.e.prev=m.e),m}finally{}}function HC(e,t,s){for(var i=e.next?e.next.e.nodes_start:s,n=t?t.e.nodes_start:s,o=e.e.nodes_start;o!==null&&o!==i;){var r=mp(o);n.before(o),o=r}}function ao(e,t,s){t===null?e.first=s:(t.next=s,t.e.next=s&&s.e),s!==null&&(s.prev=t,s.e.prev=t&&t.e)}function He(e,t,s,i,n){var a;var o=(a=t.$$slots)==null?void 0:a[s],r=!1;o===!0&&(o=t[s==="default"?"children":s],r=!0),o===void 0||o(e,r?()=>i:i)}function h1(e,t,s){var i=new RS(e);ld(()=>{var n=t()??null;i.ensure(n,n&&(o=>s(o,n)))},qr)}function u1(e,t,s,i,n,o){var r=null,a=e,l=new RS(a,!1);ld(()=>{const c=t()||null;var d=fk;if(c===null){l.ensure(null,null),kp(!0);return}return l.ensure(c,h=>{if(c){if(r=document.createElementNS(d,c),lu(r,r),i){var u=r.appendChild(Xr());i(r,u)}Ct.nodes_end=r,h.before(r)}}),kp(!0),()=>{c&&kp(!1)}},qr),yu(()=>{kp(!0)})}function g1(e,t){var s=void 0,i;ld(()=>{s!==(s=t())&&(i&&(Is(i),i=null),s&&(i=ji(()=>{vp(()=>s(e))})))})}function TA(e){var t,s,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(s=TA(e[t]))&&(i&&(i+=" "),i+=s)}else for(s in e)e[s]&&(i&&(i+=" "),i+=s);return i}function f1(){for(var e,t,s=0,i="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=TA(e))&&(i&&(i+=" "),i+=t);return i}function p1(e){return typeof e=="object"?f1(e):e??""}const dx=[...` 	
\r\fÂ \v\uFEFF`];function m1(e,t,s){var i=e==null?"":""+e;if(t&&(i=i?i+" "+t:t),s){for(var n in s)if(s[n])i=i?i+" "+n:n;else if(i.length)for(var o=n.length,r=0;(r=i.indexOf(n,r))>=0;){var a=r+o;(r===0||dx.includes(i[r-1]))&&(a===i.length||dx.includes(i[a]))?i=(r===0?"":i.substring(0,r))+i.substring(a+1):r=a}}return i===""?null:i}function hx(e,t=!1){var s=t?" !important;":";",i="";for(var n in e){var o=e[n];o!=null&&o!==""&&(i+=" "+n+": "+o+s)}return i}function BC(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function v1(e,t){if(t){var s="",i,n;if(Array.isArray(t)?(i=t[0],n=t[1]):i=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,r=0,a=!1,l=[];i&&l.push(...Object.keys(i).map(BC)),n&&l.push(...Object.keys(n).map(BC));var c=0,d=-1;const m=e.length;for(var h=0;h<m;h++){var u=e[h];if(a?u==="/"&&e[h-1]==="*"&&(a=!1):o?o===u&&(o=!1):u==="/"&&e[h+1]==="*"?a=!0:u==='"'||u==="'"?o=u:u==="("?r++:u===")"&&r--,!a&&o===!1&&r===0){if(u===":"&&d===-1)d=h;else if(u===";"||h===m-1){if(d!==-1){var f=BC(e.substring(c,d).trim());if(!l.includes(f)){u!==";"&&h++;var p=e.substring(c,h).trim();s+=" "+p+";"}}c=h+1,d=-1}}}}return i&&(s+=hx(i)),n&&(s+=hx(n,!0)),s=s.trim(),s===""?null:s}return e==null?null:String(e)}function Ht(e,t,s,i,n,o){var r=e.__className;if(r!==s||r===void 0){var a=m1(s,i,o);a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a),e.__className=s}else if(o&&n!==o)for(var l in o){var c=!!o[l];(n==null||c!==!!n[l])&&e.classList.toggle(l,c)}return o}function GC(e,t={},s,i){for(var n in s){var o=s[n];t[n]!==o&&(s[n]==null?e.style.removeProperty(n):e.style.setProperty(n,o,i))}}function wn(e,t,s,i){var n=e.__style;if(n!==t){var o=v1(t,i);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}else i&&(Array.isArray(i)?(GC(e,s==null?void 0:s[0],i[0]),GC(e,s==null?void 0:s[1],i[1],"important")):GC(e,s,i));return i}function ov(e,t,s=!1){if(e.multiple){if(t==null)return;if(!up(t))return mk();for(var i of e.options)i.selected=t.includes(ug(i));return}for(i of e.options){var n=ug(i);if(Nk(n,t)){i.selected=!0;return}}(!s||t!==void 0)&&(e.selectedIndex=-1)}function DA(e){var t=new MutationObserver(()=>{ov(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),yu(()=>{t.disconnect()})}function C1(e,t,s=t){var i=new WeakSet,n=!0;yS(e,"change",o=>{var r=o?"[selected]":":checked",a;if(e.multiple)a=[].map.call(e.querySelectorAll(r),ug);else{var l=e.querySelector(r)??e.querySelector("option:not([disabled])");a=l&&ug(l)}s(a),Ft!==null&&i.add(Ft)}),vp(()=>{var o=t();if(e===document.activeElement){var r=cg??Ft;if(i.has(r))return}if(ov(e,o,n),n&&o===void 0){var a=e.querySelector(":checked");a!==null&&(o=ug(a),s(o))}e.__value=o,n=!1}),DA(e)}function ug(e){return"__value"in e?e.__value:e.value}const _u=Symbol("class"),Mu=Symbol("style"),_A=Symbol("is custom element"),MA=Symbol("is html");function IQ(e,t){var s=hC(e);s.value===(s.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function w1(e,t){var s=hC(e);s.checked!==(s.checked=t??void 0)&&(e.checked=t)}function b1(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function xs(e,t,s,i){var n=hC(e);n[t]!==(n[t]=s)&&(t==="loading"&&(e[jM]=s),s==null?e.removeAttribute(t):typeof s!="string"&&kA(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function y1(e,t,s,i,n=!1,o=!1){var r=hC(e),a=r[_A],l=!r[MA],c=t||{},d=e.tagName==="OPTION";for(var h in t)h in s||(s[h]=null);s.class?s.class=p1(s.class):s[_u]&&(s.class=null),s[Mu]&&(s.style??(s.style=null));var u=kA(e);for(const y in s){let S=s[y];if(d&&y==="value"&&S==null){e.value=e.__value="",c[y]=S;continue}if(y==="class"){var f=e.namespaceURI==="http://www.w3.org/1999/xhtml";Ht(e,f,S,i,t==null?void 0:t[_u],s[_u]),c[y]=S,c[_u]=s[_u];continue}if(y==="style"){wn(e,S,t==null?void 0:t[Mu],s[Mu]),c[y]=S,c[Mu]=s[Mu];continue}var p=c[y];if(!(S===p&&!(S===void 0&&e.hasAttribute(y)))){c[y]=S;var m=y[0]+y[1];if(m!=="$$")if(m==="on"){const R={},A="$$"+y;let F=y.slice(2);var v=e1(F);if(Jk(F)&&(F=F.slice(0,-7),R.capture=!0),!v&&p){if(S!=null)continue;e.removeEventListener(F,c[A],R),c[A]=null}if(S!=null)if(v)e[`__${F}`]=S,Cp([F]);else{let T=function(k){c[y].call(this,k)};c[A]=xA(F,e,T,R)}else v&&(e[`__${F}`]=void 0)}else if(y==="style")xs(e,y,S);else if(y==="autofocus")bS(e,!!S);else if(!a&&(y==="__value"||y==="value"&&S!=null))e.value=e.__value=S;else if(y==="selected"&&d)b1(e,S);else{var C=y;l||(C=s1(C));var b=C==="defaultValue"||C==="defaultChecked";if(S==null&&!a&&!b)if(r[y]=null,C==="value"||C==="checked"){let R=e;const A=t===void 0;if(C==="value"){let F=R.defaultValue;R.removeAttribute(C),R.defaultValue=F,R.value=R.__value=A?F:null}else{let F=R.defaultChecked;R.removeAttribute(C),R.defaultChecked=F,R.checked=A?F:!1}}else e.removeAttribute(y);else b||u.includes(C)&&(a||typeof S!="string")?(e[C]=S,C in r&&(r[C]=Ws)):typeof S!="function"&&xs(e,C,S)}}}return c}function Qw(e,t,s=[],i=[],n=[],o,r=!1,a=!1){JE(n,s,i,l=>{var c=void 0,d={},h=e.nodeName==="SELECT",u=!1;if(ld(()=>{var p=t(...l.map(w)),m=y1(e,c,p,o,r,a);u&&h&&"value"in p&&ov(e,p.value);for(let C of Object.getOwnPropertySymbols(d))p[C]||Is(d[C]);for(let C of Object.getOwnPropertySymbols(p)){var v=p[C];C.description===pk&&(!c||v!==c[C])&&(d[C]&&Is(d[C]),d[C]=ji(()=>g1(e,()=>v))),m[C]=v}c=m}),h){var f=e;vp(()=>{ov(f,c.value,!0),DA(f)})}u=!0})}function hC(e){return e.__attributes??(e.__attributes={[_A]:e.nodeName.includes("-"),[MA]:e.namespaceURI===gk})}var ux=new Map;function kA(e){var t=e.getAttribute("is")||e.nodeName,s=ux.get(t);if(s)return s;ux.set(t,s=[]);for(var i,n=e,o=Element.prototype;o!==n;){i=kE(n);for(var r in i)i[r].set&&s.push(r);n=vS(n)}return s}const S1=()=>performance.now(),kr={tick:e=>requestAnimationFrame(e),now:()=>S1(),tasks:new Set};function IA(){const e=kr.now();kr.tasks.forEach(t=>{t.c(e)||(kr.tasks.delete(t),t.f())}),kr.tasks.size!==0&&kr.tick(IA)}function x1(e){let t;return kr.tasks.size===0&&kr.tick(IA),{promise:new Promise(s=>{kr.tasks.add(t={c:e,f:s})}),abort(){kr.tasks.delete(t)}}}function Ip(e,t){bu(()=>{e.dispatchEvent(new CustomEvent(t))})}function R1(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("")}function gx(e){const t={},s=e.split(";");for(const i of s){const[n,o]=i.split(":");if(!n||o===void 0)break;const r=R1(n.trim());t[r]=o.trim()}return t}const E1=e=>e;function LA(e,t,s,i){var n=(e&dk)!==0,o="both",r,a=t.inert,l=t.style.overflow,c,d;function h(){return bu(()=>r??(r=s()(t,(i==null?void 0:i())??{},{direction:o})))}var u={is_global:n,in(){t.inert=a,Ip(t,"introstart"),c=Jw(t,h(),d,1,()=>{Ip(t,"introend"),c==null||c.abort(),c=r=void 0,t.style.overflow=l})},out(v){t.inert=!0,Ip(t,"outrostart"),d=Jw(t,h(),c,0,()=>{Ip(t,"outroend"),v==null||v()})},stop:()=>{c==null||c.abort(),d==null||d.abort()}},f=Ct;if((f.transitions??(f.transitions=[])).push(u),nv){var p=n;if(!p){for(var m=f.parent;m&&(m.f&qr)!==0;)for(;(m=m.parent)&&(m.f&jo)===0;);p=!m||(m.f&rC)!==0}p&&vp(()=>{Y(()=>u.in())})}}function Jw(e,t,s,i,n){var o=i===1;if(Ed(t)){var r,a=!1;return ml(()=>{if(!a){var v=t({direction:o?"in":"out"});r=Jw(e,v,s,i,n)}}),{abort:()=>{a=!0,r==null||r.abort()},deactivate:()=>r.deactivate(),reset:()=>r.reset(),t:()=>r.t()}}if(s==null||s.deactivate(),!(t!=null&&t.duration))return n(),{abort:jn,deactivate:jn,reset:jn,t:()=>i};const{delay:l=0,css:c,tick:d,easing:h=E1}=t;var u=[];if(o&&s===void 0&&(d&&d(0,1),c)){var f=gx(c(0,1));u.push(f,f)}var p=()=>1-i,m=e.animate(u,{duration:l,fill:"forwards"});return m.onfinish=()=>{m.cancel();var v=(s==null?void 0:s.t())??1-i;s==null||s.abort();var C=i-v,b=t.duration*Math.abs(C),y=[];if(b>0){var S=!1;if(c)for(var R=Math.ceil(b/16.666666666666668),A=0;A<=R;A+=1){var F=v+C*h(A/R),T=gx(c(F,1-F));y.push(T),S||(S=T.overflow==="hidden")}S&&(e.style.overflow="hidden"),p=()=>{var k=m.currentTime;return v+C*h(k/b)},d&&x1(()=>{if(m.playState!=="running")return!1;var k=p();return d(k,1-k),!0})}m=e.animate(y,{duration:b,fill:"forwards"}),m.onfinish=()=>{p=()=>i,d==null||d(i,1-i),n()}},{abort:()=>{m&&(m.cancel(),m.effect=null,m.onfinish=jn)},deactivate:()=>{n=jn},reset:()=>{i===0&&(d==null||d(1,0))},t:()=>p()}}function cu(e,t,s=t){var i=new WeakSet;yS(e,"input",async n=>{var o=n?e.defaultValue:e.value;if(o=VC(e)?zC(o):o,s(o),Ft!==null&&i.add(Ft),await Qr(),o!==(o=t())){var r=e.selectionStart,a=e.selectionEnd,l=e.value.length;if(e.value=o??"",a!==null){var c=e.value.length;r===a&&a===l&&c>l?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=r,e.selectionEnd=Math.min(a,c))}}}),Y(t)==null&&e.value&&(s(VC(e)?zC(e.value):e.value),Ft!==null&&i.add(Ft)),Su(()=>{var n=t();if(e===document.activeElement){var o=cg??Ft;if(i.has(o))return}VC(e)&&n===zC(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Lp(e,t,s=t){yS(e,"change",i=>{var n=i?e.defaultChecked:e.checked;s(n)}),Y(t)==null&&s(e.checked),Su(()=>{var i=t();e.checked=!!i})}function VC(e){var t=e.type;return t==="number"||t==="range"}function zC(e){return e===""?null:+e}function ha(e,t,s){var i=Gr(e,t);i&&i.set&&(e[t]=s,yu(()=>{e[t]=null}))}function fx(e,t){return e===t||(e==null?void 0:e[Bo])===t}function ss(e={},t,s,i){return vp(()=>{var n,o;return Su(()=>{n=o,o=[],Y(()=>{e!==s(...o)&&(t(e,...o),n&&fx(s(...n),e)&&t(null,...n))})}),()=>{ml(()=>{o&&fx(s(...o),e)&&t(null,...o)})}}),e}function A1(e){return function(...t){var s=t[0];s.target===this&&(e==null||e.apply(this,t))}}function il(e){return function(...t){var s=t[0];return s.stopPropagation(),e==null?void 0:e.apply(this,t)}}function F1(e){return function(...t){var s=t[0];return s.preventDefault(),e==null?void 0:e.apply(this,t)}}function ut(e=!1){const t=St,s=t.l.u;if(!s)return;let i=()=>me(t.s);if(e){let n=0,o={};const r=pp(()=>{let a=!1;const l=t.s;for(const c in l)l[c]!==o[c]&&(o[c]=l[c],a=!0);return a&&n++,n});i=()=>w(r)}s.b.length&&zk(()=>{px(t,i),Vw(s.b)}),qw(()=>{const n=Y(()=>s.m.map(UM));return()=>{for(const o of n)typeof o=="function"&&o()}}),s.a.length&&qw(()=>{px(t,i),Vw(s.a)})}function px(e,t){if(e.l.s)for(const s of e.l.s)w(s);t()}function OA(e){var t=Yr(0);return function(){return arguments.length===1?(L(t,w(t)+1),arguments[0]):(w(t),e())}}function uC(e,t){var o;var s=(o=e.$$events)==null?void 0:o[t.type],i=up(s)?s.slice():s==null?[]:[s];for(var n of i)n.call(this,t)}function NA(e,t,s){if(e==null)return t(void 0),jn;const i=Y(()=>e.subscribe(t,s));return i.unsubscribe?()=>i.unsubscribe():i}const yd=[];function cs(e,t=jn){let s=null;const i=new Set;function n(a){if(zE(e,a)&&(e=a,s)){const l=!yd.length;for(const c of i)c[1](),yd.push(c,e);if(l){for(let c=0;c<yd.length;c+=2)yd[c][0](yd[c+1]);yd.length=0}}}function o(a){n(a(e))}function r(a,l=jn){const c=[a,l];return i.add(c),i.size===1&&(s=t(n,o)||jn),a(e),()=>{i.delete(c),i.size===0&&s&&(s(),s=null)}}return{set:n,update:o,subscribe:r}}function jt(e){let t;return NA(e,s=>t=s)(),t}let Op=!1,Zw=Symbol();function mt(e,t,s){const i=s[t]??(s[t]={store:null,source:J(void 0),unsubscribe:jn});if(i.store!==e&&!(Zw in s))if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=jn;else{var n=!0;i.unsubscribe=NA(e,o=>{n?i.source.v=o:L(i.source,o)}),n=!1}return e&&Zw in s?jt(e):w(i.source)}function fa(e,t){return e.set(t),t}function Zi(){const e={};function t(){yu(()=>{for(var s in e)e[s].unsubscribe();ME(e,Zw,{enumerable:!1,value:!0})})}return[e,t]}function P1(e){var t=Op;try{return Op=!1,[e(),Op]}finally{Op=t}}function mx(e,t=1){const s=e();return e(s+t),s}const T1={get(e,t){if(!e.exclude.includes(t))return w(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,s){if(!(t in e.special)){var i=Ct;try{yn(e.parent_effect),e.special[t]=he({get[t](){return e.props[t]}},t,GE)}finally{yn(i)}}return e.special[t](s),sx(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),sx(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Ye(e,t){return new Proxy({props:e,exclude:t,special:{},version:Yr(0),parent_effect:Ct},T1)}const D1={get(e,t){let s=e.props.length;for(;s--;){let i=e.props[s];if(Ed(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i)return i[t]}},set(e,t,s){let i=e.props.length;for(;i--;){let n=e.props[i];Ed(n)&&(n=n());const o=Gr(n,t);if(o&&o.set)return o.set(s),!0}return!1},getOwnPropertyDescriptor(e,t){let s=e.props.length;for(;s--;){let i=e.props[s];if(Ed(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i){const n=Gr(i,t);return n&&!n.configurable&&(n.configurable=!0),n}}},has(e,t){if(t===Bo||t===HE)return!1;for(let s of e.props)if(Ed(s)&&(s=s()),s!=null&&t in s)return!0;return!1},ownKeys(e){const t=[];for(let s of e.props)if(Ed(s)&&(s=s()),!!s){for(const i in s)t.includes(i)||t.push(i);for(const i of Object.getOwnPropertySymbols(s))t.includes(i)||t.push(i)}return t}};function st(...e){return new Proxy({props:e},D1)}function he(e,t,s,i){var y;var n=!wu||(s&ak)!==0,o=(s&lk)!==0,r=(s&ck)!==0,a=i,l=!0,c=()=>(l&&(l=!1,a=r?Y(i):i),a),d;if(o){var h=Bo in e||HE in e;d=((y=Gr(e,t))==null?void 0:y.set)??(h&&t in e?S=>e[t]=S:void 0)}var u,f=!1;o?[u,f]=P1(()=>e[t]):u=e[t],u===void 0&&i!==void 0&&(u=c(),d&&(n&&ZM(),d(u)));var p;if(n?p=()=>{var S=e[t];return S===void 0?c():(l=!0,S)}:p=()=>{var S=e[t];return S!==void 0&&(a=void 0),S===void 0?a:S},n&&(s&GE)===0)return p;if(d){var m=e.$$legacy;return(function(S,R){return arguments.length>0?((!n||!R||m||f)&&d(R?p():S),S):p()})}var v=!1,C=((s&rk)!==0?pp:Hr)(()=>(v=!1,p()));o&&w(C);var b=Ct;return(function(S,R){if(arguments.length>0){const A=R?w(C):n&&o?Od(S):S;return L(C,A),v=!0,a!==void 0&&(a=A),S}return cd&&v||(b.f&el)!==0?C.v:w(C)})}function vs(e){St===null&&gp(),wu&&St.l!==null?BA(St).m.push(e):qw(()=>{const t=Y(e);if(typeof t=="function")return t})}function Yo(e){St===null&&gp(),vs(()=>()=>Y(e))}function _1(e,t,{bubbles:s=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:s,cancelable:i})}function HA(){const e=St;return e===null&&gp(),(t,s,i)=>{var o;const n=(o=e.s.$$events)==null?void 0:o[t];if(n){const r=up(n)?n.slice():[n],a=_1(t,s,i);for(const l of r)l.call(e.x,a);return!a.defaultPrevented}return!0}}function ES(e){St===null&&gp(),St.l===null&&JM(),BA(St).a.push(e)}function BA(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const M1="5";var FE;typeof window<"u"&&((FE=window.__svelte??(window.__svelte={})).v??(FE.v=new Set)).add(M1);bk();const Xa=cs(null),Yn=cs(""),WC=cs(!0),k1="App2KSecureDB",ol="authStore",rl="cryptoKeys",AS="refreshToken_encrypted",FS="aes-key",zc="__app2k_aes_key_b64",Qa="__app2k_refresh_token_b64";let El=null;function vx(e){const t=new Uint8Array(e);let s="";for(let i=0;i<t.length;i++)s+=String.fromCharCode(t[i]);return btoa(s)}function $C(e){const t=atob(e),s=t.length,i=new Uint8Array(s);for(let n=0;n<s;n++)i[n]=t.charCodeAt(n);return i.buffer}function wp(){return new Promise((e,t)=>{const s=indexedDB.open(k1,3);s.onupgradeneeded=()=>{const i=s.result;i.objectStoreNames.contains(ol)||i.createObjectStore(ol),i.objectStoreNames.contains(rl)||i.createObjectStore(rl)},s.onsuccess=()=>e(s.result),s.onerror=()=>t(s.error),s.onblocked=()=>{console.warn("IndexedDB blocked"),t(new Error("Database blocked"))}})}async function I1(e){try{const s=(await wp()).transaction(rl,"readwrite");s.objectStore(rl).put(e,FS);try{const i=vx(e);localStorage.setItem(zc,i)}catch(i){console.warn("Backup key to localStorage failed:",i)}return new Promise((i,n)=>{s.oncomplete=()=>i(),s.onerror=()=>{console.warn("saveExportedKey tx error:",s.error),n(s.error)}})}catch(t){console.warn("saveExportedKey fallback -> store in localStorage only",t);try{const s=vx(e);localStorage.setItem(zc,s);return}catch{throw t}}}async function L1(){try{const s=(await wp()).transaction(rl,"readonly").objectStore(rl).get(FS);return await new Promise(i=>{s.onsuccess=()=>{const n=s.result;if(n instanceof ArrayBuffer)i(n);else if(n&&n.buffer instanceof ArrayBuffer)i(n.buffer);else{const o=localStorage.getItem(zc);if(o)try{i($C(o))}catch(r){console.warn("Failed to parse key from localStorage backup:",r),i(null)}else i(null)}},s.onerror=()=>{const n=localStorage.getItem(zc);if(n)try{i($C(n))}catch(o){console.warn("Failed to parse key from localStorage backup:",o),i(null)}else i(null)}})}catch(e){console.warn("loadExportedKey indexdb open failed, try localStorage:",e);const t=localStorage.getItem(zc);if(t)try{return $C(t)}catch{return null}return null}}async function GA(){if(El)return El;const e=await L1();if(e)try{return El=await crypto.subtle.importKey("raw",e,{name:"AES-GCM"},!0,["encrypt","decrypt"]),El}catch(s){console.warn("importKey failed, will regenerate key:",s)}El=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);const t=await crypto.subtle.exportKey("raw",El);return await I1(t),El}async function O1(e){const t=await GA(),s=crypto.getRandomValues(new Uint8Array(12)),i=new TextEncoder().encode(String(e));return{cipher:await crypto.subtle.encrypt({name:"AES-GCM",iv:s},t,i),iv:s.buffer}}async function N1(e,t){const s=await GA(),i=e instanceof ArrayBuffer?new Uint8Array(e):e instanceof Uint8Array?e:e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):null,n=t instanceof ArrayBuffer?new Uint8Array(t):t instanceof Uint8Array?t:t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer):null;if(!i||!n)throw new Error("Invalid cipher or iv format");const o=await crypto.subtle.decrypt({name:"AES-GCM",iv:n},s,i);return new TextDecoder().decode(o)}async function PS(e){if(!e)return!1;const t=await O1(e);try{const i=(await wp()).transaction(ol,"readwrite");i.objectStore(ol).put({cipher:t.cipher,iv:t.iv},AS);try{localStorage.setItem(Qa,btoa(String(e)))}catch(o){console.warn("Could not backup token to localStorage:",o)}return await new Promise((o,r)=>{i.oncomplete=()=>o(!0),i.onerror=()=>r(i.error)})}catch(s){console.warn("saveRefreshToken indexeddb failed, fallback to localStorage",s);try{return localStorage.setItem(Qa,btoa(String(e))),!0}catch(i){throw i}}}async function VA(){try{const s=(await wp()).transaction(ol,"readonly").objectStore(ol).get(AS);return await new Promise(i=>{s.onsuccess=async()=>{const n=s.result;if(!n){const a=localStorage.getItem(Qa);if(a)try{i(atob(a))}catch{i(null)}else i(null);return}const{cipher:o,iv:r}=n;try{const a=await N1(o,r);i(a)}catch(a){console.warn("Token decrypt failed â clearing storage",a),await TS();const l=localStorage.getItem(Qa);if(l)try{i(atob(l))}catch{i(null)}else i(null)}},s.onerror=()=>{const n=localStorage.getItem(Qa);if(n)try{i(atob(n))}catch{i(null)}else i(null)}})}catch(e){console.warn("getRefreshToken fallback localStorage:",e);const t=localStorage.getItem(Qa);if(t)try{return atob(t)}catch{return null}return null}}async function TS(){try{const e=await wp(),t=e.transaction(ol,"readwrite");t.objectStore(ol).delete(AS);const s=e.transaction(rl,"readwrite");return s.objectStore(rl).delete(FS),localStorage.removeItem(zc),localStorage.removeItem(Qa),await Promise.all([new Promise(i=>{t.oncomplete=i,t.onerror=i}),new Promise(i=>{s.oncomplete=i,s.onerror=i})])}catch(e){console.warn("clearRefreshToken fallback:",e);try{localStorage.removeItem(zc),localStorage.removeItem(Qa)}catch{}return}}/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2023 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const H1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var B1=EA("<svg><!><!></svg>");function wt(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]),i=Ye(s,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);lt(t,!1);let n=he(t,"name",8,void 0),o=he(t,"color",8,"currentColor"),r=he(t,"size",8,24),a=he(t,"strokeWidth",8,2),l=he(t,"absoluteStrokeWidth",8,!1),c=he(t,"iconNode",24,()=>[]);const d=(...p)=>p.filter((m,v,C)=>!!m&&C.indexOf(m)===v).join(" ");ut();var h=B1();Qw(h,(p,m)=>({...H1,...i,width:r(),height:r(),stroke:o(),"stroke-width":p,class:m}),[()=>(me(l()),me(a()),me(r()),Y(()=>l()?Number(a())*24/Number(r()):a())),()=>(me(n()),me(s),Y(()=>d("lucide-icon","lucide",n()?`lucide-${n()}`:"",s.class)))]);var u=D(h);fs(u,1,c,gi,(p,m)=>{var v=Ml(()=>LE(w(m),2));let C=()=>w(v)[0],b=()=>w(v)[1];var y=de(),S=j(y);u1(S,C,!0,(R,A)=>{Qw(R,()=>({...b()}))}),_(p,y)});var f=M(u);He(f,t,"default",{}),_(e,h),ct()}function zA(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];wt(e,st({name:"arrow-left"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function G1(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M16 2v2"}],["path",{d:"M7 22v-2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2"}],["path",{d:"M8 2v2"}],["circle",{cx:"12",cy:"11",r:"3"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}]];wt(e,st({name:"contact"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function V1(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];wt(e,st({name:"copy"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function z1(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}]];wt(e,st({name:"ellipsis-vertical"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function W1(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]];wt(e,st({name:"ellipsis"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function $1(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"m15 15 6 6"}],["path",{d:"m15 9 6-6"}],["path",{d:"M21 16v5h-5"}],["path",{d:"M21 8V3h-5"}],["path",{d:"M3 16v5h5"}],["path",{d:"m3 21 6-6"}],["path",{d:"M3 8V3h5"}],["path",{d:"M9 9 3 3"}]];wt(e,st({name:"expand"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function U1(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];wt(e,st({name:"file-text"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function j1(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}]];wt(e,st({name:"file"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function DS(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"m15 17 5-5-5-5"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12"}]];wt(e,st({name:"forward"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function WA(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]];wt(e,st({name:"image"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function K1(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"m22 11-1.296-1.296a2.4 2.4 0 0 0-3.408 0L11 16"}],["path",{d:"M4 8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2"}],["circle",{cx:"13",cy:"7",r:"1",fill:"currentColor"}],["rect",{x:"8",y:"2",width:"14",height:"14",rx:"2"}]];wt(e,st({name:"images"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function q1(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"}]];wt(e,st({name:"maximize"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function Y1(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"}],["path",{d:"M8 12h.01"}],["path",{d:"M12 12h.01"}],["path",{d:"M16 12h.01"}]];wt(e,st({name:"message-circle-more"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function X1(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"}]];wt(e,st({name:"message-circle"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function Q1(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z"}],["path",{d:"M7 11h10"}],["path",{d:"M7 15h6"}],["path",{d:"M7 7h8"}]];wt(e,st({name:"message-square-text"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function J1(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z"}]];wt(e,st({name:"message-square"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function Z1(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3"}]];wt(e,st({name:"minimize"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function $A(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M9 3v18"}],["path",{d:"m16 15-3-3 3-3"}]];wt(e,st({name:"panel-left-close"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function UA(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M9 3v18"}],["path",{d:"m14 9 3 3-3 3"}]];wt(e,st({name:"panel-left-open"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function eI(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551"}]];wt(e,st({name:"paperclip"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function tI(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384"}]];wt(e,st({name:"phone"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function sI(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];wt(e,st({name:"refresh-cw"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function iI(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4"}],["path",{d:"m9 17-5-5 5-5"}]];wt(e,st({name:"reply"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function Cx(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];wt(e,st({name:"rotate-ccw"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function _S(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]];wt(e,st({name:"search"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function nI(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]];wt(e,st({name:"send"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function oI(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"}],["circle",{cx:"12",cy:"12",r:"3"}]];wt(e,st({name:"settings"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function rI(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"m15 15 6 6m-6-6v4.8m0-4.8h4.8"}],["path",{d:"M9 19.8V15m0 0H4.2M9 15l-6 6"}],["path",{d:"M15 4.2V9m0 0h4.8M15 9l6-6"}],["path",{d:"M9 4.2V9m0 0H4.2M9 9 3 3"}]];wt(e,st({name:"shrink"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function aI(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9"}]];wt(e,st({name:"smile"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function lI(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344"}],["path",{d:"m9 11 3 3L22 4"}]];wt(e,st({name:"square-check-big"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function jA(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];wt(e,st({name:"trash-2"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function KA(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11"}]];wt(e,st({name:"user-plus"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function qA(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}],["circle",{cx:"9",cy:"7",r:"4"}]];wt(e,st({name:"users"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function YA(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2"}]];wt(e,st({name:"video"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}function XA(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.544.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const i=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];wt(e,st({name:"x"},()=>s,{get iconNode(){return i},children:(n,o)=>{var r=de(),a=j(r);He(a,t,"default",{}),_(n,r)},$$slots:{default:!0}}))}var cI=W("<img/>");function Np(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]),i=Ye(s,["name"]);let n=he(t,"name",8,"icon");var o=cI();Qw(o,()=>({src:`./assets/${n()}.svg`,loading:"lazy",...i})),_(e,o)}const dI="modulepreload",hI=function(e,t){return new URL(e,t).href},wx={},Ol=function(t,s,i){let n=Promise.resolve();if(s&&s.length>0){let r=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};const a=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=r(s.map(d=>{if(d=hI(d,i),d in wx)return;wx[d]=!0;const h=d.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(!!i)for(let m=a.length-1;m>=0;m--){const v=a[m];if(v.href===d&&(!h||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${u}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":dI,h||(p.as="script"),p.crossOrigin="",p.href=d,c&&p.setAttribute("nonce",c),document.head.appendChild(p),h)return new Promise((m,v)=>{p.addEventListener("load",m),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(r){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=r,window.dispatchEvent(a),!a.defaultPrevented)throw r}return n.then(r=>{for(const a of r||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},gg=cs("desktop"),bx=()=>{window.innerWidth<640?gg.set("mobile"):window.innerWidth>=640&&window.innerWidth<1024?gg.set("tablet"):gg.set("desktop")};typeof window<"u"&&(bx(),window.addEventListener("resize",bx));var uI=W('<div class="loading-overlay svelte-14fu6kf"><div class="loading-box svelte-14fu6kf"><div class="spinner svelte-14fu6kf"></div> <p class="loading-message svelte-14fu6kf"> </p></div></div>');function QA(e,t){let s=he(t,"message",8,"Loading...");var i=uI(),n=D(i),o=M(D(n),2),r=D(o);Ae(()=>ze(r,s())),_(e,i)}function gI(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]),i=Ye(s,[]);lt(t,!1);const n=()=>mt(gg,"$screen",o),[o,r]=Zi();let a=J(null),l="";async function c(){const p=jt(gg);if(p!==l)if(l=p,p==="mobile"){const m=await Ol(()=>import("./MobileLayout-DJ5dmgiE.js"),__vite__mapDeps([0,1,2]),import.meta.url);L(a,m.default)}else if(p==="tablet"){const m=await Ol(()=>import("./DesktopLayout-BFCDt9pH.js").then(v=>v.D),__vite__mapDeps([3,1,4]),import.meta.url);L(a,m.default)}else{const m=await Ol(()=>import("./DesktopLayout-BFCDt9pH.js").then(v=>v.D),__vite__mapDeps([3,1,4]),import.meta.url);L(a,m.default)}}vs(async()=>{await c()}),Bt(()=>n(),()=>{n()&&c()}),ki(),ut();var d=de(),h=j(d);{var u=p=>{var m=de(),v=j(m);h1(v,()=>w(a),(C,b)=>{b(C,st(()=>i))}),_(p,m)},f=p=>{QA(p,{message:"Äang táº£i..."})};Z(h,p=>{w(a)?p(u):p(f,!1)})}_(e,d),ct(),r()}class gC{constructor({baseURL:t="",withCredentials:s=!1,defaultHeaders:i={"Content-Type":"application/json"},defaultResponseType:n="json"}={}){this.baseURL="https://render-server-ezuf.onrender.com",this.withCredentials=s,this.defaultHeaders=i,this.defaultResponseType=n,this._isRefreshing=!1,this._refreshQueue=[],this.latestAccessToken=null}setAccessToken(t){typeof t=="string"?(Yn.set(t),this.latestAccessToken=t):(Yn.set(""),this.latestAccessToken=null)}_enqueueRefresh(t,s){this._refreshQueue.push({resolve:t,reject:s})}_resolveRefreshQueue(t){this._refreshQueue.forEach(s=>s.resolve(t)),this._refreshQueue=[]}_rejectRefreshQueue(t){this._refreshQueue.forEach(s=>s.reject(t)),this._refreshQueue=[]}async _refreshAccessToken(){if(this._isRefreshing)return new Promise((t,s)=>{this._enqueueRefresh(t,s)});this._isRefreshing=!0;try{const t=await VA();if(!t)throw new Error("Refresh token not found");const s=await fetch(`${this.baseURL}/auth/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(!s.ok)throw new Error(`Refresh failed: HTTP ${s.status}`);const i=await s.json();if(!(i!=null&&i.accessToken))throw new Error("Refresh response missing accessToken");return this.setAccessToken(i.accessToken),i.refreshToken&&await PS(i.refreshToken),this._resolveRefreshQueue(i.accessToken),i.accessToken}catch(t){try{await TS()}catch(s){console.warn("clearRefreshToken failed:",s)}this.setAccessToken("");try{Xa.set(null)}catch{}throw this._rejectRefreshQueue(t),t}finally{this._isRefreshing=!1}}async request(t,{method:s="GET",data:i=null,params:n=null,headers:o={},responseType:r=this.defaultResponseType,withCredentials:a=this.withCredentials,retry:l=!0}={}){const c=`${this.baseURL}${t}${n?"?"+new URLSearchParams(n):""}`,d=this.latestAccessToken??jt(Yn)??"",h={...i instanceof FormData?{}:this.defaultHeaders,...d?{Authorization:`Bearer ${d}`}:{},...o},u={method:s,credentials:a?"include":"same-origin",headers:h};i&&(u.body=i instanceof FormData?i:JSON.stringify(i));let f;try{f=await fetch(c,u)}catch(p){throw p}if(f.status===401&&l)try{const p=await this._refreshAccessToken(),m={...i instanceof FormData?{}:this.defaultHeaders,...o||{},...p?{Authorization:`Bearer ${p}`}:{}},v={method:s,credentials:a?"include":"same-origin",headers:m};i&&(v.body=i instanceof FormData?i:JSON.stringify(i));const C=await fetch(c,v);if(!C.ok)throw new Error(`HTTP ${C.status}: ${C.statusText}`);return this._parseResponseByType(C,r)}catch(p){throw p}if(!f.ok)throw new Error(`HTTP ${f.status}: ${f.statusText}`);return this._parseResponseByType(f,r)}_parseResponseByType(t,s){switch(s){case"json":return t.json();case"text":return t.text();case"blob":return t.blob();case"arrayBuffer":return t.arrayBuffer();case"formData":return t.formData();default:return t}}get(t,s={}){return this.request(t,{...s,method:"GET"})}post(t,s,i={}){return this.request(t,{...i,method:"POST",data:s})}put(t,s,i={}){return this.request(t,{...i,method:"PUT",data:s})}delete(t,s={}){return this.request(t,{...s,method:"DELETE"})}}const JA=new gC;async function fI(e){const t=new FormData;return t.append("image",e,"capture.jpg"),JA.post("/capture",t)}async function yx(e,t=!1){const s=new FormData;return s.append("chunk",e,t?"final.webm":"chunk.webm"),s.append("stop",t.toString()),JA.post("/stream-input",s)}const MS=new gC,lm=cs("ð Connecting..."),Kn=cs([]),Ir=cs(null),eb=cs(""),bp=cs([]),Pi=cs(null),Pn=cs(null),Ja=cs(!1),qn=cs(new Set);Xa.subscribe(e=>{e?(Ir.set(e.id),eb.set(e.name)):(Ir.set(null),eb.set(""))});const pI="wss://render-server-ezuf.onrender.com";let Ke=null,tb=null,sb=!1;function ZA(){if(console.log("connectWebSocket....",Ke==null?void 0:Ke.readyState,WebSocket.CLOSED),Ke&&Ke.readyState!==WebSocket.CLOSED)return console.log("âï¸ WS already connected or connecting"),Ke;const e=jt(Yn);if(!e){console.log("No access token â DO NOT CONNECT WS yet.");return}sb=!1,Ke=new WebSocket(pI),Ke.onopen=()=>{Ke.send(JSON.stringify({type:"auth",token:e})),lm.set("ð¢ Connected")},Ke.onmessage=async s=>{try{const i=JSON.parse(s.data);if(i.type==="auth_error"){console.warn("Token expired â refreshing...",new Date().toISOString());try{const o=(await MS.post("/auth/refresh",{},{withCredentials:!0})).accessToken;Yn.set(o),t({type:"auth",token:o})}catch(n){console.error("Lá»i Refresh token failed:",n),Ke.close()}return}if(i.type==="recent_contacts"){bp.set([...i.conversations]);return}if(i.type==="welcome"){console.log("welcome",i);return}if(i.type==="chat"){const n=(i==null?void 0:i.payload)??{};if(!mI(n))return;Kn.update(o=>Sx(o,[n]));return}if(i.type==="messages"){if(i.rows.length===0)return;Kn.update(n=>Sx(n,i.rows,{prepend:!0}));return}if(i.type==="reaction_update"){const{messageId:n,reactions:o}=i;Kn.update(r=>r.map(a=>a.id===n?{...a,reactions:o}:a));return}if(i.type==="message_recalled"){const{messageId:n}=i;Kn.update(o=>o.map(r=>r.id===n?{...r,status:1}:r));return}if(i.type==="message_deleted_self"){const{messageId:n}=i;Kn.update(o=>o.filter(r=>r.id!==n));return}}catch{console.warn("â ï¸ Invalid WS message:",s.data)}},Ke.onclose=()=>{const s=jt(Yn);if(sb||!s){console.log("ð WS closed manually or token missing â NO reconnect"),lm.set("âª WS closed");return}console.log("ð´ WS disconnected â retry in 2s..."),lm.set("ð´ Disconnected â retrying..."),clearTimeout(tb),tb=setTimeout(ZA,2e3)};function t(s){if(Ke)if(Ke.readyState===WebSocket.OPEN)Ke.send(JSON.stringify(s));else{const i=()=>{Ke.send(JSON.stringify(s)),Ke.removeEventListener("open",i)};Ke.addEventListener("open",i)}}return Ke}function mI(e){const t=jt(Pi);return t?e.conversationId===t:!1}function Xn(e){if(!Ke||Ke.readyState!==WebSocket.OPEN){console.warn("â ï¸ WS not ready");return}Ke.send(JSON.stringify(e))}const vI=e=>(Ke==null?void 0:Ke.readyState)===WebSocket.OPEN&&Ke.send(e),CI=()=>(Ke==null?void 0:Ke.readyState)===WebSocket.OPEN&&Ke.send("stop");function ib(){Ke&&(console.log("ð Closing WS manually..."),sb=!0,clearTimeout(tb),Ke.close(),Ke=null)}function Tg(e,t={}){!Ke||Ke.readyState!==WebSocket.OPEN||Ke.send(JSON.stringify({type:"load_messages",conversationId:e,firstMsg:t.firstMsg??null}))}function Sx(e,t,{prepend:s=!1}={}){const i=new Map;e.forEach(o=>i.set(o.id,o)),t.forEach(o=>i.set(o.id,o));const n=Array.from(i.values());return s?n.sort((o,r)=>new Date(o.created_at)-new Date(r.created_at)):n}async function wI(e){if(!e)throw new Error("File is required");const t=new FormData;t.append("file",e);try{return await MS.post("/api/upload",t,{withCredentials:!0,responseType:"json"})}catch(s){throw console.error("â uploadFile failed:",s),s}}async function bI(e){const t=new FormData;e.forEach(s=>t.append("images",s));try{return await MS.post("/api/upload/images",t,{withCredentials:!0,responseType:"json"})}catch(s){throw console.error("â uploadFile failedss:",s),s}}function yI(e){if(!Ke||Ke.readyState!==WebSocket.OPEN){console.warn("â ï¸ WS not ready â cannot join call");return}Ke.send(JSON.stringify({type:"join_call",conversationId:e}))}function UC(e,t){if(!Ke||Ke.readyState!==WebSocket.OPEN){console.warn("â ï¸ WS not ready â cannot send call signal");return}Ke.send(JSON.stringify({type:"call_signal",conversationId:e,data:t}))}function SI({onPeerJoined:e,onSignal:t}){if(!Ke)return;const s=i=>{try{const n=JSON.parse(i.data);if(n.type==="call_peer_joined"){e==null||e(n.conversationId,n.from);return}if(n.type==="call_signal"){t==null||t(n.conversationId,n.data);return}}catch{console.warn("Invalid call signal:",i.data)}};return Ke.addEventListener("message",s),()=>Ke.removeEventListener("message",s)}const xI=new Audio("/sounds/shutter.mp3"),RI=new Audio("/sounds/recording.mp3"),EI=new Audio("/sounds/stop-recording.mp3");function kS(e){e.currentTime=0,e.play().catch(t=>console.warn("KhÃ´ng phÃ¡t ÄÆ°á»£c Ã¢m thanh:",t))}function AI(){kS(xI)}function FI(){kS(RI)}function PI(){kS(EI)}var TI=W(`<div class="absolute bottom-14 left-1/2 -translate-x-1/2 bg-white text-gray-800
               rounded-lg shadow-lg w-48 py-2 z-50"><button class="w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center gap-2"> </button> <button class="w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center gap-2 disabled:opacity-50">ð Start Stream</button> <button class="w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center gap-2 disabled:opacity-50">â¹ Stop Stream</button></div>`),DI=W(`<div class="relative flex flex-col h-full bg-black overflow-hidden"><video autoplay playsinline="" class="w-full h-full object-contain"></video> <div class="fixed bottom-0 left-0 w-full px-6 py-4 bg-black/50 backdrop-blur-sm
         shadow-lg flex flex-wrap items-center justify-center gap-3 border-t z-50"><button class="px-4 py-2 rounded-full bg-green-500 text-white font-medium
           shadow hover:bg-green-600 transition flex items-center gap-2">ð¸ <span>Capture</span></button> <button class="px-4 py-2 rounded-full bg-blue-500 text-white font-medium
           shadow hover:bg-blue-600 transition flex items-center gap-2 disabled:opacity-50">ð¥ <span>Start</span></button> <button class="px-4 py-2 rounded-full bg-red-500 text-white font-medium
           shadow hover:bg-red-600 transition flex items-center gap-2 disabled:opacity-50">â¹ <span>Stop</span></button> <div class="relative"><button class="w-12 h-12 flex items-center justify-center rounded-full bg-gray-700 text-white
             shadow-md hover:bg-gray-800 transition">â®</button> <!></div></div> <button class="absolute top-2 left-2 bg-white text-black rounded-full p-2 shadow-md block md:hidden"><!></button></div>`,2);function _I(e,t){lt(t,!1);let s=J("environment"),i=J(!1),n=J(),o,r,a=[],l=J(!1),c=he(t,"onClose",8);vs(async()=>{await h()}),Yo(()=>{f(),console.log("Camera component destroyed, camera stopped.",new Date().toLocaleTimeString())});async function d(){const K=/iPhone|iPad|iPod/i.test(navigator.userAgent);try{K?o=await navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"}},audio:!1}):o=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})}catch(ve){console.warn("â ï¸ KhÃ´ng láº¥y ÄÆ°á»£c camera sau hoáº·c lá»i khÃ¡c, fallback vá» camera máº·c Äá»nh",ve),o=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1})}as(n,w(n).srcObject=o)}async function h(){try{FI(),o&&o.getTracks().forEach(K=>K.stop()),o=await navigator.mediaDevices.getUserMedia({video:{facingMode:w(s)},audio:!1}),w(n)&&as(n,w(n).srcObject=o)}catch(K){console.warn("â ï¸ KhÃ´ng má» ÄÆ°á»£c camera",K)}}function u(){L(s,w(s)==="user"?"environment":"user"),h(),S()}function f(){o&&(o.getTracks().forEach(K=>K.stop()),o=null),w(n)&&as(n,w(n).srcObject=null)}async function p(){AI();const K=document.createElement("canvas");K.width=w(n).videoWidth,K.height=w(n).videoHeight,K.getContext("2d").drawImage(w(n),0,0);const ce=await new Promise(Se=>K.toBlob(Se,"image/jpeg"));fI(ce)}async function m(){a=[],r=new MediaRecorder(o,{mimeType:"video/webm"});let K=[],ve=0;const ce=2;r.ondataavailable=async Se=>{if(Se.data.size>0&&(a.push(Se.data),K.push(Se.data),ve+=Se.data.size,ve/(1024*1024)>=ce)){const Ce=new Blob(K,{type:"video/webm"});console.log("Chunk size:",Ce,new Date().toLocaleTimeString()),await yx(Ce,!1),K=[],ve=0}},r.onstop=async()=>{const Se=new Blob(a,{type:"video/webm"});await yx(Se,!0)},r.start(2e3),L(l,!0)}function v(){PI(),r&&r.stop(),L(l,!1)}function C(){r=new MediaRecorder(o,{mimeType:"video/webm"}),r.ondataavailable=K=>{K.data.size>0&&K.data.arrayBuffer().then(ve=>{vI(ve)})},r.onstop=()=>{CI()},r.start(1e3),L(l,!0)}function b(){r&&w(l)&&r.stop(),ib(),L(l,!1)}function y(){L(i,!w(i))}function S(){L(i,!1)}var R={initCamera1:d,stopCamera:f,capture:p,startRecording:m,stopRecording:v,startWebSocketStream:C,stopWebSocketStream:b};ut();var A=DI(),F=D(A);ss(F,K=>L(n,K),()=>w(n));var T=M(F,2),k=D(T),N=M(k,2),I=M(N,2),O=M(I,2),V=D(O),ee=M(V,2);{var G=K=>{var ve=TI(),ce=D(ve),Se=D(ce),Ce=M(ce,2),re=M(Ce,2);Ae(()=>{ze(Se,`ð· Chuyá»n Camera (${w(s)==="user"?"TrÆ°á»c":"Sau"})`),Ce.disabled=w(l),re.disabled=!w(l)}),z("click",ce,u),z("click",Ce,()=>{C(),S()}),z("click",re,()=>{b(),S()}),_(K,ve)};Z(ee,K=>{w(i)&&K(G)})}var ne=M(T,2),te=D(ne);return zA(te,{size:"20"}),Ae(()=>{N.disabled=w(l),I.disabled=!w(l)}),z("loadedmetadata",F,()=>w(n).play()),z("click",k,p),z("click",N,m),z("click",I,v),z("click",V,y),z("click",ne,function(...K){var ve;(ve=c())==null||ve.apply(this,K)}),_(e,A),ha(t,"initCamera1",d),ha(t,"stopCamera",f),ha(t,"capture",p),ha(t,"startRecording",m),ha(t,"stopRecording",v),ha(t,"startWebSocketStream",C),ha(t,"stopWebSocketStream",b),ct(R)}var MI=W('<button class="p-2 rounded hover:bg-gray-100 transition" title="Äáº·t láº¡i vá» trÃ­" aria-label="Reset position"><!></button>'),kI=W('<div class="fixed inset-0 z-40 bg-white/10 backdrop-blur-sm transition-opacity"></div> <div class="fixed inset-0 z-50 flex items-center justify-center pointer-events-none"><div class="bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden relative pointer-events-auto transition-transform transition-all duration-300"><div class="flex items-center justify-between px-6 py-4 border-b bg-gradient-to-r from-gray-50 to-white cursor-move select-none"><h2 class="text-xl font-semibold text-gray-800"> </h2> <div class="flex gap-3 items-center"><!> <button class="p-2 rounded hover:bg-gray-100 transition" title="Chuyá»n cháº¿ Äá» fullscreen" aria-label="Toggle fullscreen"><!></button> <button class="p-2 rounded hover:bg-gray-100 transition" aria-label="Maximize or minimize modal"><!></button> <button class="p-2 rounded hover:bg-gray-100 transition" title="ÄÃ³ng" aria-label="Close modal"><!></button></div></div> <div class="px-6 py-4 overflow-y-auto h-[calc(100%-130px)]"><!></div> <div class="flex justify-end gap-2 px-6 py-2 border-t bg-gray-50"><button class="px-4 py-2 text-sm font-medium text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-100">Cancel</button> <button class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700">OK</button></div></div></div>',1);function II(e,t){lt(t,!1);let s=he(t,"open",12,!1),i=he(t,"title",8,"Untitle"),n=he(t,"onClose",8,()=>{s(!1)}),o=he(t,"onConfirm",8,()=>{}),r=he(t,"width",8,"80vw"),a=he(t,"height",8,"auto"),l=he(t,"closeOnOutsideClick",8,!0),c=J(),d=0,h=0,u=!1,f,p,m=J(!1),v=J(!1);function C(O){if(!w(c)||w(m))return;u=!0,f=O.clientX,p=O.clientY;const V=window.getComputedStyle(w(c)),ee=new DOMMatrixReadOnly(V.transform);d=ee.m41,h=ee.m42,window.addEventListener("mousemove",b),window.addEventListener("mouseup",y)}function b(O){if(!u)return;const V=O.clientX-f,ee=O.clientY-p;as(c,w(c).style.transform=`translate(${d+V}px, ${h+ee}px)`)}function y(){if(u=!1,window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",y),w(c)){const O=window.getComputedStyle(w(c)),V=new DOMMatrixReadOnly(O.transform);L(v,!(V.m41===0&&V.m42===0))}}function S(){w(c)&&(as(c,w(c).style.transform="translate(0px, 0px)"),L(v,!1))}function R(){L(m,!w(m)),S()}function A(){var O,V,ee;w(c)&&(w(m)?(ee=document.exitFullscreen)==null||ee.call(document):(V=(O=w(c)).requestFullscreen)==null||V.call(O),L(m,!w(m)))}function F(){L(m,!!document.fullscreenElement)}vs(()=>{document.addEventListener("fullscreenchange",F)}),Yo(()=>{document.removeEventListener("fullscreenchange",F)});function T(){l()&&n()()}ut();var k=de(),N=j(k);{var I=O=>{var V=kI(),ee=j(V),G=M(ee,2),ne=D(G),te=D(ne),K=D(te),ve=D(K),ce=M(K,2),Se=D(ce);{var Ce=Pe=>{var Oe=MI(),dt=D(Oe);sI(dt,{class:"w-5 h-5 text-gray-600 hover:text-blue-600"}),z("click",Oe,S),_(Pe,Oe)};Z(Se,Pe=>{w(v)&&Pe(Ce)})}var re=M(Se,2),ie=D(re);{var X=Pe=>{rI(Pe,{class:"w-5 h-5 text-gray-600 hover:text-blue-600"})},Q=Pe=>{$1(Pe,{class:"w-5 h-5 text-gray-600 hover:text-blue-600"})};Z(ie,Pe=>{w(m)?Pe(X):Pe(Q,!1)})}var se=M(re,2),De=D(se);{var we=Pe=>{Z1(Pe,{class:"w-5 h-5 text-gray-600 hover:text-blue-600"})},Me=Pe=>{q1(Pe,{class:"w-5 h-5 text-gray-600 hover:text-blue-600"})};Z(De,Pe=>{w(m)?Pe(we):Pe(Me,!1)})}var je=M(se,2),nt=D(je);XA(nt,{class:"w-6 h-6 text-gray-600 hover:text-red-600"});var bt=M(te,2),We=D(bt);He(We,t,"default",{});var gt=M(bt,2),Fe=D(gt),Ze=M(Fe,2);ss(ne,Pe=>L(c,Pe),()=>w(c)),Ae(()=>{wn(ne,`width: ${(w(m)?"100vw":r())??""}; height: ${(w(m)?"100vh":a())??""}; max-height: 90vh; transform: translate(0px, 0px);`),ze(ve,i()),xs(se,"title",w(m)?"Thu nhá» cá»­a sá»":"PhÃ³ng to cá»­a sá»")}),z("click",ee,T),z("click",re,R),z("click",se,A),z("click",je,function(...Pe){var Oe;(Oe=n())==null||Oe.apply(this,Pe)}),z("mousedown",te,C),z("click",Fe,function(...Pe){var Oe;(Oe=n())==null||Oe.apply(this,Pe)}),z("click",Ze,function(...Pe){var Oe;(Oe=o())==null||Oe.apply(this,Pe)}),z("click",ne,il(function(Pe){uC.call(this,t,Pe)})),_(O,V)};Z(N,O=>{s()&&O(I)})}_(e,k),ct()}var LI=W("<button><span> </span> </button>"),OI=W('<section class="bg-white p-6 rounded-xl shadow space-y-4"><h2 class="text-lg font-medium text-gray-800">Account Info</h2> <div><label class="block text-sm text-gray-600">Full Name</label> <input type="text" placeholder="Your name" class="mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:ring focus:ring-blue-200"/></div> <div><label class="block text-sm text-gray-600">Email</label> <input type="email" placeholder="your@email.com" class="mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:ring focus:ring-blue-200"/></div> <button class="mt-4 px-4 py-2 rounded-lg bg-blue-600 text-white shadow hover:bg-blue-700">Save Account</button></section>'),NI=W('<section class="bg-white p-6 rounded-xl shadow space-y-4"><h2 class="text-lg font-medium text-gray-800">Security</h2> <div><label class="block text-sm text-gray-600">Change Password</label> <input type="password" placeholder="New password" class="mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:ring focus:ring-blue-200"/></div> <button class="mt-4 px-4 py-2 rounded-lg bg-blue-600 text-white shadow hover:bg-blue-700">Update Password</button></section>'),HI=W('<section class="bg-white p-6 rounded-xl shadow space-y-4"><h2 class="text-lg font-medium text-gray-800">Notifications</h2> <label class="flex items-center gap-3"><input type="checkbox" class="rounded text-blue-600"/> Email alerts</label> <label class="flex items-center gap-3"><input type="checkbox" class="rounded text-blue-600"/> Push notifications</label></section>'),BI=W('<section class="bg-white p-6 rounded-xl shadow space-y-4"><h2 class="text-lg font-medium text-gray-800">System Settings</h2> <label class="block text-sm text-gray-600">Language</label> <select class="mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:ring focus:ring-blue-200"><option>English</option><option>Vietnamese</option><option>Japanese</option></select></section>'),GI=W(`<div class="min-h-screen flex bg-gray-100"><aside class="w-64 bg-white shadow-lg flex flex-col"><div class="p-6 font-bold text-xl text-blue-600 border-b">â¡ Settings</div> <nav class="flex-1 p-4 space-y-2"></nav></aside> <main class="flex-1 p-8 space-y-6"><div class="flex justify-between items-center"><h1 class="text-2xl font-semibold text-gray-800 capitalize"> </h1> <input type="text" placeholder="Search settings..." class="w-64 px-4 py-2 rounded-lg border border-gray-300 shadow-sm
               focus:border-blue-500 focus:ring focus:ring-blue-200"/></div> <!></main></div>`);function VI(e){let t=J("account"),s=J("");const i=[{id:"account",label:"Account",icon:"ð¤"},{id:"security",label:"Security",icon:"ð"},{id:"notifications",label:"Notifications",icon:"ð"},{id:"system",label:"System",icon:"âï¸"}];function n(C){L(t,C)}function o(){alert("Changes saved!")}var r=GI(),a=D(r),l=M(D(a),2);fs(l,5,()=>i,gi,(C,b)=>{var y=LI(),S=D(y),R=D(S),A=M(S);Ae(()=>{Ht(y,1,`w-full flex items-center gap-3 px-4 py-2 rounded-lg transition
                 ${w(t)===w(b).id?"bg-blue-100 text-blue-700 font-medium":"hover:bg-gray-100 text-gray-700"}`),ze(R,w(b).icon),ze(A,` ${w(b).label??""}`)}),z("click",y,()=>n(w(b).id)),_(C,y)});var c=M(a,2),d=D(c),h=D(d),u=D(h),f=M(h,2),p=M(d,2);{var m=C=>{var b=OI(),y=M(D(b),6);z("click",y,o),_(C,b)},v=C=>{var b=de(),y=j(b);{var S=A=>{var F=NI();_(A,F)},R=A=>{var F=de(),T=j(F);{var k=I=>{var O=HI();_(I,O)},N=I=>{var O=de(),V=j(O);{var ee=G=>{var ne=BI();_(G,ne)};Z(V,G=>{w(t)==="system"&&G(ee)},!0)}_(I,O)};Z(T,I=>{w(t)==="notifications"?I(k):I(N,!1)},!0)}_(A,F)};Z(y,A=>{w(t)==="security"?A(S):A(R,!1)},!0)}_(C,b)};Z(p,C=>{w(t)==="account"?C(m):C(v,!1)})}Ae(()=>ze(u,`${w(t)??""} settings`)),cu(f,()=>w(s),C=>L(s,C)),_(e,r)}function zI(){const{subscribe:e,update:t}=cs({});function s(n,o){t(r=>(r[n]=o,r))}function i(n){t(o=>(delete o[n],o))}return{subscribe:e,register:s,unregister:i}}const nb=zI();function jC(e,t){lt(t,!1);let s=he(t,"combo",8);const i=HA();function n(o){i("pressed",{detail:o})}vs(()=>{nb.register(s(),n)}),Yo(()=>{nb.unregister(s())}),ut(),ct()}var WI=W('<div class="text-center text-gray-500">Loading...</div>'),$I=W('<div class="text-center text-red-500">No users found.</div>'),UI=W('<tr class="hover:bg-gray-100"><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700"></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-blue-600"> </td></tr>'),jI=W('<div class="overflow-x-auto bg-white rounded-lg shadow"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">#</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Name</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Email</th></tr></thead><tbody class="divide-y divide-gray-200"></tbody></table></div>'),KI=W('<div class="max-w-3xl mx-auto p-4"><h1 class="text-2xl font-bold mb-4 text-center">User List</h1> <!></div>');function qI(e,t){lt(t,!1);let s=J([]),i=J(!1);async function n(){L(i,!1);try{const d=await(await fetch("https://render-server-ezuf.onrender.com/users")).json();d.success?L(s,d.users):console.error("API error34:",d.error)}catch(c){console.error("Fetch error12:",c)}finally{L(i,!0)}}vs(()=>{n()}),ut();var o=KI(),r=M(D(o),2);{var a=c=>{var d=WI();_(c,d)},l=c=>{var d=de(),h=j(d);{var u=p=>{var m=$I();_(p,m)},f=p=>{var m=jI(),v=D(m),C=M(D(v));fs(C,5,()=>w(s),gi,(b,y,S)=>{var R=UI(),A=D(R);A.textContent=S+1;var F=M(A),T=D(F),k=M(F),N=D(k);Ae(()=>{ze(T,w(y).name),ze(N,w(y).email)}),_(b,R)}),_(p,m)};Z(h,p=>{w(s).length===0?p(u):p(f,!1)},!0)}_(c,d)};Z(r,c=>{w(i)?c(l,!1):c(a)})}_(e,o),ct()}var ob=function(e,t){return ob=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(s[n]=i[n])},ob(e,t)};function Ru(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ob(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}function YI(e,t,s,i){function n(o){return o instanceof s?o:new s(function(r){r(o)})}return new(s||(s=Promise))(function(o,r){function a(d){try{c(i.next(d))}catch(h){r(h)}}function l(d){try{c(i.throw(d))}catch(h){r(h)}}function c(d){d.done?o(d.value):n(d.value).then(a,l)}c((i=i.apply(e,t||[])).next())})}function eF(e,t){var s={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,n,o,r=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return r.next=a(0),r.throw=a(1),r.return=a(2),typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(c){return function(d){return l([c,d])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,c[0]&&(s=0)),s;)try{if(i=1,n&&(o=c[0]&2?n.return:c[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,c[1])).done)return o;switch(n=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){s=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){s.label=c[1];break}if(c[0]===6&&s.label<o[1]){s.label=o[1],o=c;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(c);break}o[2]&&s.ops.pop(),s.trys.pop();continue}c=t.call(e,s)}catch(d){c=[6,d],n=0}finally{i=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Dg(e){var t=typeof Symbol=="function"&&Symbol.iterator,s=t&&e[t],i=0;if(s)return s.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function du(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var i=s.call(e),n,o=[],r;try{for(;(t===void 0||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){r={error:a}}finally{try{n&&!n.done&&(s=i.return)&&s.call(i)}finally{if(r)throw r.error}}return o}function _g(e,t,s){if(s||arguments.length===2)for(var i=0,n=t.length,o;i<n;i++)(o||!(i in t))&&(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}function zd(e){return this instanceof zd?(this.v=e,this):new zd(e)}function XI(e,t,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=s.apply(e,t||[]),n,o=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",r),n[Symbol.asyncIterator]=function(){return this},n;function r(f){return function(p){return Promise.resolve(p).then(f,h)}}function a(f,p){i[f]&&(n[f]=function(m){return new Promise(function(v,C){o.push([f,m,v,C])>1||l(f,m)})},p&&(n[f]=p(n[f])))}function l(f,p){try{c(i[f](p))}catch(m){u(o[0][3],m)}}function c(f){f.value instanceof zd?Promise.resolve(f.value.v).then(d,h):u(o[0][2],f)}function d(f){l("next",f)}function h(f){l("throw",f)}function u(f,p){f(p),o.shift(),o.length&&l(o[0][0],o[0][1])}}function QI(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],s;return t?t.call(e):(e=typeof Dg=="function"?Dg(e):e[Symbol.iterator](),s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s);function i(o){s[o]=e[o]&&function(r){return new Promise(function(a,l){r=e[o](r),n(a,l,r.done,r.value)})}}function n(o,r,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},r)}}function Kt(e){return typeof e=="function"}function JI(e){var t=function(i){Error.call(i),i.stack=new Error().stack},s=e(t);return s.prototype=Object.create(Error.prototype),s.prototype.constructor=s,s}var KC=JI(function(e){return function(s){e(this),this.message=s?s.length+` errors occurred during unsubscription:
`+s.map(function(i,n){return n+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=s}});function rb(e,t){if(e){var s=e.indexOf(t);0<=s&&e.splice(s,1)}}var fC=(function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,s,i,n,o;if(!this.closed){this.closed=!0;var r=this._parentage;if(r)if(this._parentage=null,Array.isArray(r))try{for(var a=Dg(r),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(m){t={error:m}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(t)throw t.error}}else r.remove(this);var d=this.initialTeardown;if(Kt(d))try{d()}catch(m){o=m instanceof KC?m.errors:[m]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var u=Dg(h),f=u.next();!f.done;f=u.next()){var p=f.value;try{xx(p)}catch(m){o=o??[],m instanceof KC?o=_g(_g([],du(o)),du(m.errors)):o.push(m)}}}catch(m){i={error:m}}finally{try{f&&!f.done&&(n=u.return)&&n.call(u)}finally{if(i)throw i.error}}}if(o)throw new KC(o)}},e.prototype.add=function(t){var s;if(t&&t!==this)if(this.closed)xx(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(s=this._finalizers)!==null&&s!==void 0?s:[]).push(t)}},e.prototype._hasParent=function(t){var s=this._parentage;return s===t||Array.isArray(s)&&s.includes(t)},e.prototype._addParent=function(t){var s=this._parentage;this._parentage=Array.isArray(s)?(s.push(t),s):s?[s,t]:t},e.prototype._removeParent=function(t){var s=this._parentage;s===t?this._parentage=null:Array.isArray(s)&&rb(s,t)},e.prototype.remove=function(t){var s=this._finalizers;s&&rb(s,t),t instanceof e&&t._removeParent(this)},e.EMPTY=(function(){var t=new e;return t.closed=!0,t})(),e})();fC.EMPTY;function tF(e){return e instanceof fC||e&&"closed"in e&&Kt(e.remove)&&Kt(e.add)&&Kt(e.unsubscribe)}function xx(e){Kt(e)?e():e.unsubscribe()}var ZI={Promise:void 0},eL={setTimeout:function(e,t){for(var s=[],i=2;i<arguments.length;i++)s[i-2]=arguments[i];return setTimeout.apply(void 0,_g([e,t],du(s)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function sF(e){eL.setTimeout(function(){throw e})}function Rx(){}function tL(e){e()}var IS=(function(e){Ru(t,e);function t(s){var i=e.call(this)||this;return i.isStopped=!1,s?(i.destination=s,tF(s)&&s.add(i)):i.destination=nL,i}return t.create=function(s,i,n){return new ab(s,i,n)},t.prototype.next=function(s){this.isStopped||this._next(s)},t.prototype.error=function(s){this.isStopped||(this.isStopped=!0,this._error(s))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(s){this.destination.next(s)},t.prototype._error=function(s){try{this.destination.error(s)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t})(fC),sL=(function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var s=this.partialObserver;if(s.next)try{s.next(t)}catch(i){Hp(i)}},e.prototype.error=function(t){var s=this.partialObserver;if(s.error)try{s.error(t)}catch(i){Hp(i)}else Hp(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(s){Hp(s)}},e})(),ab=(function(e){Ru(t,e);function t(s,i,n){var o=e.call(this)||this,r;return Kt(s)||!s?r={next:s??void 0,error:i??void 0,complete:n??void 0}:r=s,o.destination=new sL(r),o}return t})(IS);function Hp(e){sF(e)}function iL(e){throw e}var nL={closed:!0,next:Rx,error:iL,complete:Rx},LS=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function iF(e){return e}function oL(e){return e.length===0?iF:e.length===1?e[0]:function(s){return e.reduce(function(i,n){return n(i)},s)}}var dd=(function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var s=new e;return s.source=this,s.operator=t,s},e.prototype.subscribe=function(t,s,i){var n=this,o=aL(t)?t:new ab(t,s,i);return tL(function(){var r=n,a=r.operator,l=r.source;o.add(a?a.call(o,l):l?n._subscribe(o):n._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(s){t.error(s)}},e.prototype.forEach=function(t,s){var i=this;return s=Ex(s),new s(function(n,o){var r=new ab({next:function(a){try{t(a)}catch(l){o(l),r.unsubscribe()}},error:o,complete:n});i.subscribe(r)})},e.prototype._subscribe=function(t){var s;return(s=this.source)===null||s===void 0?void 0:s.subscribe(t)},e.prototype[LS]=function(){return this},e.prototype.pipe=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return oL(t)(this)},e.prototype.toPromise=function(t){var s=this;return t=Ex(t),new t(function(i,n){var o;s.subscribe(function(r){return o=r},function(r){return n(r)},function(){return i(o)})})},e.create=function(t){return new e(t)},e})();function Ex(e){var t;return(t=e??ZI.Promise)!==null&&t!==void 0?t:Promise}function rL(e){return e&&Kt(e.next)&&Kt(e.error)&&Kt(e.complete)}function aL(e){return e&&e instanceof IS||rL(e)&&tF(e)}function lL(e){return Kt(e==null?void 0:e.lift)}function yp(e){return function(t){if(lL(t))return t.lift(function(s){try{return e(s,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function hu(e,t,s,i,n){return new cL(e,t,s,i,n)}var cL=(function(e){Ru(t,e);function t(s,i,n,o,r,a){var l=e.call(this,s)||this;return l.onFinalize=r,l.shouldUnsubscribe=a,l._next=i?function(c){try{i(c)}catch(d){s.error(d)}}:e.prototype._next,l._error=o?function(c){try{o(c)}catch(d){s.error(d)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=n?function(){try{n()}catch(c){s.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var s;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;e.prototype.unsubscribe.call(this),!i&&((s=this.onFinalize)===null||s===void 0||s.call(this))}},t})(IS),dL={now:function(){return Date.now()}},hL=(function(e){Ru(t,e);function t(s,i){return e.call(this)||this}return t.prototype.schedule=function(s,i){return this},t})(fC),Ax={setInterval:function(e,t){for(var s=[],i=2;i<arguments.length;i++)s[i-2]=arguments[i];return setInterval.apply(void 0,_g([e,t],du(s)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},uL=(function(e){Ru(t,e);function t(s,i){var n=e.call(this,s,i)||this;return n.scheduler=s,n.work=i,n.pending=!1,n}return t.prototype.schedule=function(s,i){var n;if(i===void 0&&(i=0),this.closed)return this;this.state=s;var o=this.id,r=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(r,o,i)),this.pending=!0,this.delay=i,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(r,this.id,i),this},t.prototype.requestAsyncId=function(s,i,n){return n===void 0&&(n=0),Ax.setInterval(s.flush.bind(s,this),n)},t.prototype.recycleAsyncId=function(s,i,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return i;i!=null&&Ax.clearInterval(i)},t.prototype.execute=function(s,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(s,i);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(s,i){var n=!1,o;try{this.work(s)}catch(r){n=!0,o=r||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var s=this,i=s.id,n=s.scheduler,o=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,rb(o,this),i!=null&&(this.id=this.recycleAsyncId(n,i,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t})(hL),Fx=(function(){function e(t,s){s===void 0&&(s=e.now),this.schedulerActionCtor=t,this.now=s}return e.prototype.schedule=function(t,s,i){return s===void 0&&(s=0),new this.schedulerActionCtor(this,t).schedule(i,s)},e.now=dL.now,e})(),gL=(function(e){Ru(t,e);function t(s,i){i===void 0&&(i=Fx.now);var n=e.call(this,s,i)||this;return n.actions=[],n._active=!1,n}return t.prototype.flush=function(s){var i=this.actions;if(this._active){i.push(s);return}var n;this._active=!0;do if(n=s.execute(s.state,s.delay))break;while(s=i.shift());if(this._active=!1,n){for(;s=i.shift();)s.unsubscribe();throw n}},t})(Fx),fL=new gL(uL),nF=(function(e){return e&&typeof e.length=="number"&&typeof e!="function"});function pL(e){return Kt(e==null?void 0:e.then)}function mL(e){return Kt(e[LS])}function vL(e){return Symbol.asyncIterator&&Kt(e==null?void 0:e[Symbol.asyncIterator])}function CL(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function wL(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var bL=wL();function yL(e){return Kt(e==null?void 0:e[bL])}function SL(e){return XI(this,arguments,function(){var s,i,n,o;return eF(this,function(r){switch(r.label){case 0:s=e.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,zd(s.read())];case 3:return i=r.sent(),n=i.value,o=i.done,o?[4,zd(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,zd(n)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return s.releaseLock(),[7];case 10:return[2]}})})}function xL(e){return Kt(e==null?void 0:e.getReader)}function OS(e){if(e instanceof dd)return e;if(e!=null){if(mL(e))return RL(e);if(nF(e))return EL(e);if(pL(e))return AL(e);if(vL(e))return oF(e);if(yL(e))return FL(e);if(xL(e))return PL(e)}throw CL(e)}function RL(e){return new dd(function(t){var s=e[LS]();if(Kt(s.subscribe))return s.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function EL(e){return new dd(function(t){for(var s=0;s<e.length&&!t.closed;s++)t.next(e[s]);t.complete()})}function AL(e){return new dd(function(t){e.then(function(s){t.closed||(t.next(s),t.complete())},function(s){return t.error(s)}).then(null,sF)})}function FL(e){return new dd(function(t){var s,i;try{for(var n=Dg(e),o=n.next();!o.done;o=n.next()){var r=o.value;if(t.next(r),t.closed)return}}catch(a){s={error:a}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}t.complete()})}function oF(e){return new dd(function(t){TL(e,t).catch(function(s){return t.error(s)})})}function PL(e){return oF(SL(e))}function TL(e,t){var s,i,n,o;return YI(this,void 0,void 0,function(){var r,a;return eF(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),s=QI(e),l.label=1;case 1:return[4,s.next()];case 2:if(i=l.sent(),!!i.done)return[3,4];if(r=i.value,t.next(r),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),n={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),i&&!i.done&&(o=s.return)?[4,o.call(s)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function NS(e,t){return yp(function(s,i){var n=0;s.subscribe(hu(i,function(o){i.next(e.call(t,o,n++))}))})}var DL=Array.isArray;function _L(e,t){return DL(t)?e.apply(void 0,_g([],du(t))):e(t)}function ML(e){return NS(function(t){return _L(e,t)})}function kL(e,t,s,i,n,o,r,a){var l=[],c=0,d=0,h=!1,u=function(){h&&!l.length&&!c&&t.complete()},f=function(m){return c<i?p(m):l.push(m)},p=function(m){c++;var v=!1;OS(s(m,d++)).subscribe(hu(t,function(C){t.next(C)},function(){v=!0},void 0,function(){if(v)try{c--;for(var C=function(){var b=l.shift();r||p(b)};l.length&&c<i;)C();u()}catch(b){t.error(b)}}))};return e.subscribe(hu(t,f,function(){h=!0,u()})),function(){}}function rF(e,t,s){return s===void 0&&(s=1/0),Kt(t)?rF(function(i,n){return NS(function(o,r){return t(i,o,n,r)})(OS(e(i,n)))},s):(typeof t=="number"&&(s=t),yp(function(i,n){return kL(i,n,e,s)}))}var IL=["addListener","removeListener"],LL=["addEventListener","removeEventListener"],OL=["on","off"];function lb(e,t,s,i){if(Kt(s)&&(i=s,s=void 0),i)return lb(e,t,s).pipe(ML(i));var n=du(BL(e)?LL.map(function(a){return function(l){return e[a](t,l,s)}}):NL(e)?IL.map(Px(e,t)):HL(e)?OL.map(Px(e,t)):[],2),o=n[0],r=n[1];if(!o&&nF(e))return rF(function(a){return lb(a,t,s)})(OS(e));if(!o)throw new TypeError("Invalid event target");return new dd(function(a){var l=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a.next(1<c.length?c:c[0])};return o(l),function(){return r(l)}})}function Px(e,t){return function(s){return function(i){return e[s](t,i)}}}function NL(e){return Kt(e.addListener)&&Kt(e.removeListener)}function HL(e){return Kt(e.on)&&Kt(e.off)}function BL(e){return Kt(e.addEventListener)&&Kt(e.removeEventListener)}function GL(e,t){return yp(function(s,i){var n=0;s.subscribe(hu(i,function(o){return e.call(t,o,n++)&&i.next(o)}))})}function VL(e,t){return t===void 0&&(t=fL),yp(function(s,i){var n=null,o=null,r=null,a=function(){if(n){n.unsubscribe(),n=null;var c=o;o=null,i.next(c)}};function l(){var c=r+e,d=t.now();if(d<c){n=this.schedule(void 0,c-d),i.add(n);return}a()}s.subscribe(hu(i,function(c){o=c,r=t.now(),n||(n=t.schedule(l,e),i.add(n))},function(){a(),i.complete()},void 0,function(){o=n=null}))})}function zL(e,t){return t===void 0&&(t=iF),e=e??WL,yp(function(s,i){var n,o=!0;s.subscribe(hu(i,function(r){var a=t(r);(o||!e(n,a))&&(o=!1,n=a,i.next(r))}))})}function WL(e,t){return e===t}const $L=e=>e;function aF(e){const t=e-1;return t*t*t+1}function Tx(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function UL(e,{delay:t=0,duration:s=400,easing:i=$L}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:s,easing:i,css:o=>`opacity: ${o*n}`}}function jL(e,{delay:t=0,duration:s=400,easing:i=aF,x:n=0,y:o=0,opacity:r=0}={}){const a=getComputedStyle(e),l=+a.opacity,c=a.transform==="none"?"":a.transform,d=l*(1-r),[h,u]=Tx(n),[f,p]=Tx(o);return{delay:t,duration:s,easing:i,css:(m,v)=>`
			transform: ${c} translate(${(1-m)*h}${u}, ${(1-m)*f}${p});
			opacity: ${l-d*v}`}}function KL(e,{delay:t=0,duration:s=400,easing:i=aF,start:n=0,opacity:o=0}={}){const r=getComputedStyle(e),a=+r.opacity,l=r.transform==="none"?"":r.transform,c=1-n,d=a*(1-o);return{delay:t,duration:s,easing:i,css:(h,u)=>`
			transform: ${l} scale(${1-c*u});
			opacity: ${a-d*u}
		`}}function qL(e,t){return{delay:(t==null?void 0:t.delay)||0,duration:(t==null?void 0:t.duration)||300,css:(s,i)=>{const n=UL(e,t).css(s,i),o=KL(e,t).css(s,i);return`${n}; ${o}`}}}var YL=W('<li class="px-4 py-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 cursor-pointer"> </li>'),XL=W('<ul class="mt-4 max-h-60 overflow-y-auto divide-y divide-gray-100 dark:divide-gray-700"></ul>'),QL=W('<div class="mt-4 text-center text-gray-400">KhÃ´ng cÃ³ káº¿t quáº£.</div>'),JL=W('<div class="fixed inset-0 bg-black/40 z-40"></div> <div class="fixed top-[20%] left-1/2 -translate-x-1/2 z-50 bg-white dark:bg-zinc-900 w-full max-w-md rounded-xl shadow-xl p-4"><input type="text" placeholder="Search..." class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring"/> <!></div>',1);function ZL(e,t){lt(t,!1);let s=J(!1),i=J(),n=J([]),o;function r(){L(s,!0),L(n,[]),setTimeout(()=>{var u;return(u=w(i))==null?void 0:u.focus()},0)}function a(){L(s,!1),o==null||o.unsubscribe()}async function l(u){console.log("ð Gá»i server vá»i query:",u);try{const p=await(await fetch("https://jsonplaceholder.typicode.com/posts")).json();console.log("â Káº¿t quáº£ tá»« server:",p),L(n,p.filter(m=>m.title.toLowerCase().includes(u.toLowerCase())).slice(0,10))}catch(f){console.error("â Lá»i gá»i API:",f),L(n,[])}}vs(()=>{const u=m=>{(m.metaKey||m.ctrlKey)&&m.key==="k"&&(m.preventDefault(),r()),m.key==="Escape"&&a()};window.addEventListener("keydown",u);const f=()=>{w(i)&&(o=lb(w(i),"input").pipe(NS(m=>m.target.value.trim()),GL(m=>m.length>0),VL(500),zL()).subscribe(m=>{l(m)}))},p=setInterval(()=>{w(s)&&w(i)&&(f(),clearInterval(p))},100);return()=>{window.removeEventListener("keydown",u),o==null||o.unsubscribe()}}),ut();var c=de(),d=j(c);{var h=u=>{var f=JL(),p=j(f),m=M(p,2),v=D(m);ss(v,S=>L(i,S),()=>w(i));var C=M(v,2);{var b=S=>{var R=XL();fs(R,5,()=>w(n),gi,(A,F)=>{var T=YL(),k=D(T);Ae(()=>ze(k,w(F).title)),_(A,T)}),_(S,R)},y=S=>{var R=QL();_(S,R)};Z(C,S=>{w(n).length>0?S(b):S(y,!1)})}z("click",p,a),LA(3,m,()=>qL,()=>({duration:300})),z("click",m,il(()=>{})),_(u,f)};Z(d,u=>{w(s)&&u(h)})}_(e,c),ct()}function Bp(e){if(!(e!=null&&e.endsWith("px")))return;const t=parseFloat(e.slice(0,e.length-2));return isNaN(t)?void 0:t}const lF=e=>e?"height":"width",cb=e=>window.getComputedStyle(e),db=e=>e.getBoundingClientRect(),eO=(e,t=!0)=>{if(e.getPropertyValue("box-sizing")==="border-box")return;const s=Bp(e.getPropertyValue("border-left-width"));if(s===void 0){console.error("Splitpanes Error: Fail to parse container `border-left-width`.");return}const i=Bp(e.getPropertyValue("border-top-width"));if(i===void 0){console.error("Splitpanes Error: Fail to parse container `border-top-width`.");return}const n={left:s,top:i};if(t){const o=Bp(e.getPropertyValue("border-right-width"));if(o===void 0){console.error("Splitpanes Error: Fail to parse container `border-right-width`.");return}const r=Bp(e.getPropertyValue("border-bottom-width"));if(r===void 0){console.error("Splitpanes Error: Fail to parse container `border-bottom-width`.");return}const a=n;a.right=o,a.bottom=r}return n};function tO(e,t){t||(t=cb(e));const s=db(e),i=eO(t,!0)||{left:0,top:0,right:0,bottom:0};return{width:s.width-i.left-i.right,height:s.height-i.top-i.bottom,left:s.left+i.left,top:s.top+i.top}}const Dx=(e,t)=>({left:e.left-t.left,top:e.top-t.top});function _x(e){const t=e,s=e,{clientX:i,clientY:n}="ontouchstart"in window&&s.touches?s.touches[0]:t;return{left:i,top:n}}function Mx(e,t,s,i){let n=0;for(let o=t;o<s;o++)n+=i(e[o],o);return n}function Gp(e,t,s,i){for(let n=t;n<s;n++)i(e[n],n)}const cF={},kx=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get(){return e={passive:!0},!0}});window.addEventListener("testpassive",t,t),window.remove("testpassive",t,t)}catch{}return e})();var sO=W("<div><!> <!></div>");function iO(e,t){lt(t,!1);const s=()=>mt(I,"$veryFirstPaneKey",i),[i,n]=Zi();let o=he(t,"id",8,void 0),r=he(t,"horizontal",8,!1),a=he(t,"pushOtherPanes",8,!0),l=he(t,"dblClickSplitter",8,!0),c=he(t,"rtl",8,"auto"),d=he(t,"firstSplitter",8,!1),h=he(t,"style",8,null),u=he(t,"theme",8,"default-theme"),f=he(t,"class",8,"");const p=HA();let m=J(),v=!1,C=!1,b=J(!1),y=J(!1),S=J(!1),R=-1,A=-1,F,T=new Array;const k=cs(r()),N=cs(d()),I=cs(void 0);let O,V;Sk(cF,{showFirstSplitter:N,veryFirstPaneKey:I,isHorizontal:k,ssrRegisterPaneSize:void 0,onPaneInit:U=>(s()===void 0&&fa(I,U),{undefinedPaneInitSize:0}),clientOnly:{onPaneAdd:G,onPaneRemove:ne}});function G(U){let ue=-1;U.element.parentNode&&Array.from(U.element.parentNode.children).some(le=>(le.className.includes("splitpanes__pane")&&ue++,le===U.element)),ue===0&&fa(I,U.key),T.splice(ue,0,U);for(let le=0;le<T.length;le++)T[le].index=le;v&&Oe().then(()=>{U.isReady=!0,p("pane-add",{index:ue,panes:Me()})});const xe=(le,ke=!0)=>Ie=>{(ke||U.index>0)&&le(Ie,U)};return{onSplitterDown:xe(X,!1),onSplitterClick:xe(De,!1),onSplitterDblClick:xe(we),onPaneClick:xe(te),reportGivenSizeChange:xe(K)}}async function ne(U){const ue=T.findIndex(xe=>xe.key===U);if(ue>=0){const xe=T.splice(ue,1)[0];for(let le=0;le<T.length;le++)T[le].index=le;ue===0&&fa(I,T.length>0?T[0].key:void 0),v&&(await Oe(),p("pane-remove",{removed:xe,panes:Me()}))}}function te(U,ue){p("pane-click",ue)}function K(U,ue){ue.setSz(U),Oe()}vs(()=>{ye(),dt();for(let U=0;U<T.length;U++)T[U].isReady=!0;v=!0,p("ready"),setTimeout(()=>{L(b,!0)},0)}),Yo(()=>{v&&Se(),v=!1}),ES(()=>{ye()});function ve(U){if(c()==="auto")try{return(U??cb(w(m))).direction==="rtl"}catch{}return c()===!0}function ce(){document.body.style.cursor=k?"col-resize":"row-resize",document.addEventListener("mousemove",Q,kx),document.addEventListener("mouseup",se),"ontouchstart"in window&&(document.addEventListener("touchmove",Q,kx),document.addEventListener("touchend",se))}function Se(){document.body.style.cursor="",document.removeEventListener("mousemove",Q),document.removeEventListener("mouseup",se),"ontouchstart"in window&&(document.removeEventListener("touchmove",Q),document.removeEventListener("touchend",se))}const Ce=U=>U.nodeType===Node.ELEMENT_NODE&&U.classList.contains("splitpanes__splitter");function re(U,ue,xe){let le=U[r()?"top":"left"];return xe&&!r()&&(le=ue-le),le}const ie=()=>lF(r());function X(U,ue){L(y,!0),R=ue.index,ue.setSplitterActive(!0);let le=ue.element;for(;le&&(le=le.previousSibling,!(le&&Ce(le))););if(le===null){console.error("Splitpane Error: Active splitter wasn't found!");return}O=le;const ke=_x(U),Ie=db(O);V=re(Dx(ke,Ie),Ie[ie()],ve()),ce()}function Q(U){if(w(y)){L(S,!0);const ue=_x(U),xe=cb(w(m)),le=tO(w(m),xe),ke=le[ie()],Ie=ve(xe),_e=Dx(ue,le),Le=re(_e,ke,Ie);nt(Le,ke),p("resize",Me())}}function se(){w(S)&&p("resized",Me()),L(y,!1),T[R].setSplitterActive(!1),setTimeout(()=>{L(S,!1),Se()},100)}function De(U,ue){if("ontouchstart"in window){const xe=ue.index;l()&&(A===xe?(F&&clearTimeout(F),F=null,we(U,ue),A=-1):(A=xe,F=setTimeout(()=>{A=-1},500)))}w(S)||p("splitter-click",ue)}function we(U,ue){if(l()){const xe=ue.index;let le=0;for(let _e=0;_e<T.length;_e++){const Le=T[_e];_e!==xe&&(le+=Le.min())}const ke=Math.min(Math.max(0,100-le),ue.max()),Ie=le+ke;if(Ie>=100)for(let _e=0;_e<T.length;_e++){const Le=T[_e];Le!==ue?Le.setSz(Le.min()):Le.setSz(100-le)}else{let _e=100-Ie;ue.setSz(ke);const Le=Ue=>{const yt=Ue.min(),Mt=Ue.max(),Yt=Math.min(Math.max(0,_e),Mt-yt);Ue.setSz(yt+Yt),_e-=Yt};for(let Ue=xe-1;Ue>=0;Ue--)Le(T[Ue]);for(let Ue=xe+1;Ue<T.length;Ue++)Le(T[Ue]);_e!==0&&console.warn("Splitpanes: there is a left spare size after computation of splitter double click, which means there are issues on the size constains of the panes.")}p("pane-maximize",ue),p("resized",Me())}L(y,!1)}const Me=()=>T.map(U=>({min:U.min(),max:U.max(),size:U.sz(),snap:U.snap()}));function je(U,ue){const xe=Mt=>db(Mt)[ie()],le=xe(O);let ke=0,Ie=O.previousSibling;for(;Ie;)Ce(Ie)&&(ke+=xe(Ie)),Ie=Ie.previousSibling;let _e=0,Le=O.nextSibling;for(;Le;)Ce(Le)&&(_e+=xe(Le)),Le=Le.nextSibling;const Ue=ke+V,yt=ke+le+_e;return(U-Ue)/(ue-yt)*100}function nt(U,ue){let xe=R-1,le=T[xe],ke=R,Ie=T[ke],_e={prevPanesSize:gt(xe),nextPanesSize:Fe(ke),prevReachedMinPanes:0,nextReachedMinPanes:0};const Le=0+(a()?0:_e.prevPanesSize),Ue=100-(a()?0:_e.nextPanesSize),yt=Math.max(Math.min(je(U,ue),Ue),Le),Mt=_e.prevPanesSize+le.min()+le.snap(),Yt=100-(_e.nextPanesSize+Ie.min()+Ie.snap());let rt=yt,Os=!1;yt<=Mt?yt>_e.prevPanesSize+le.min()&&(rt=Math.max(le.min()+_e.prevPanesSize,100-(Ie.max()+_e.nextPanesSize)),Os=!0):yt>=Yt&&yt<100-_e.nextPanesSize-Ie.min()&&(rt=Math.min(100-(Ie.min()+_e.nextPanesSize),le.max()+_e.prevPanesSize),Os=!0);const En=le.max()<100&&rt>=le.max()+_e.prevPanesSize,oa=Ie.max()<100&&rt<=100-(Ie.max()+_e.nextPanesSize);if(En||oa)En?(le.setSz(le.max()),Ie.setSz(Math.max(100-le.max()-_e.prevPanesSize-_e.nextPanesSize,0))):(le.setSz(Math.max(100-Ie.max()-_e.prevPanesSize-_e.nextPanesSize,0)),Ie.setSz(Ie.max()));else{if(a()&&!Os){const Cd=bt(_e,rt);if(!Cd)return;({sums:_e,paneBeforeIndex:xe,paneAfterIndex:ke}=Cd),le=T[xe],Ie=T[ke]}typeof xe=="number"&&le.setSz(Math.min(Math.max(rt-_e.prevPanesSize-_e.prevReachedMinPanes,le.min()),le.max())),typeof ke=="number"&&Ie.setSz(Math.min(Math.max(100-rt-_e.nextPanesSize-_e.nextReachedMinPanes,Ie.min()),Ie.max()))}}function bt(U,ue){var Ie,_e;const xe=R-1;let le=xe,ke=xe+1;if(ue<U.prevPanesSize+T[le].min()){if(le=(Ie=Ze(xe))==null?void 0:Ie.index,U.prevReachedMinPanes=0,le===void 0)return U.prevPanesSize=0,T[0].setSz(T[0].min()),Gp(T,1,xe+1,Le=>{Le.setSz(Le.min()),U.prevReachedMinPanes+=Le.min()}),T[ke].setSz(100-U.prevReachedMinPanes-T[0].min()-U.prevPanesSize-U.nextPanesSize),null;le<xe&&Gp(T,le+1,xe+1,Le=>{Le.setSz(Le.min()),U.prevReachedMinPanes+=Le.min()}),U.prevPanesSize=gt(le)}if(ue>100-U.nextPanesSize-T[ke].min())if(ke=(_e=Pe(xe))==null?void 0:_e.index,le===void 0&&console.log("Yep undefined paneAfterIndex"),U.nextReachedMinPanes=0,ke===void 0){U.nextPanesSize=0;const Le=T.length;return T[Le-1].setSz(T[Le-1].min()),Gp(T,xe+1,Le-1,Ue=>{Ue.setSz(Ue.min()),U.nextReachedMinPanes+=Ue.min()}),T[le].setSz(100-U.prevPanesSize-U.nextReachedMinPanes-T[Le-1].min()-U.nextPanesSize),null}else ke>xe+1&&Gp(T,xe+1,ke,Le=>{Le.setSz(Le.min()),U.nextReachedMinPanes+=Le.min()}),U.nextPanesSize=Fe(ke);return{sums:U,paneBeforeIndex:le,paneAfterIndex:ke}}const We=U=>U.sz(),gt=U=>Mx(T,0,U,We),Fe=U=>Mx(T,U+1,T.length,We),Ze=U=>[...T].reverse().find(ue=>ue.index<U&&ue.sz()>ue.min()),Pe=U=>T.find(ue=>ue.index>U+1&&ue.sz()>ue.min());async function Oe(){C=!0,await Qr(),C&&(dt(),C=!1)}function dt(){Ot(),v&&p("resized",Me())}function Ot(){if(T.length===0)return;const U=T.length;let ue=100,xe=0,le=0,ke=0;const Ie=[],_e=[];for(let Yt=0;Yt<U;Yt++){const rt=T[Yt],Os=rt.sz();rt.givenSize===null?rt.isReady?(ke+=Os,Os>=rt.max()&&Ie.push(rt),Os<=rt.min()&&_e.push(rt)):le+=1:(ue-=Os,xe++,Ie.push(rt),_e.push(rt))}const Le=U-xe,Ue=Le-le;let yt,Mt;if(Ue>0?(yt=ke/Ue,yt>.1&&ue>.1?(ke+=le*yt,Mt=ue/ke):(yt=0,Mt=1)):(yt=ue/Le,Mt=1),ue+ke>.1){ue=100;for(let Yt=0;Yt<U;Yt++){const rt=T[Yt];if(typeof rt.givenSize!="number"){const Os=rt.isReady?rt.sz():yt,En=Math.max(Math.min(Os*Mt,rt.max()),rt.min());rt.setSz(En)}ue-=rt.sz()}Math.abs(ue)>.1&&(ue=q(ue,Ie,_e))}isFinite(ue)?Math.abs(ue)>.1&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints."):console.warn("Splitpanes: Internal error, sizes might be NaN as a result.")}function q(U,ue,xe){const ke=T.length-(U>0?ue.length:xe.length);if(ke<=0)return U;const Ie=U/ke;if(T.length===1)T[0].setSz(100),U=0;else for(let _e=0;_e<T.length;_e++){const Le=T[_e],Ue=Le.sz();if(U>0&&!ue.includes(Le)){const yt=Math.max(Math.min(Ue+Ie,Le.max()),Le.min()),Mt=yt-Ue;U-=Mt,Le.setSz(yt)}else if(!xe.includes(Le)){const yt=Math.max(Math.min(Ue+Ie,Le.max()),Le.min()),Mt=yt-Ue;U-=Mt,Le.setSz(yt)}}return U}function ye(){var le;if(!w(m))return;const{children:U}=w(m);let ue=0,xe=!1;for(let ke=0;ke<U.length;ke++){const Ie=U.item(ke),_e=Ie.classList.contains("splitpanes__pane"),Le=Ie.classList.contains("splitpanes__splitter");if(!_e&&!Le){(le=Ie.parentNode)==null||le.removeChild(Ie),console.warn("Splitpanes: Only <Pane> elements are allowed at the root of <Splitpanes>. One of your DOM nodes was removed.");return}else _e&&(!xe&&T[ue].element!==Ie&&(xe=!0),ue++)}if(xe){const ke=[];for(let Ie=0;Ie<U.length;Ie++){const _e=U.item(Ie);if(_e==null?void 0:_e.classList.contains("splitpanes__pane")){const Ue=T.find(yt=>yt.element===_e);Ue?(Ue.index=ke.length,ke.push(Ue)):console.warn("Splitpanes: Internal error - found a <Pane> elements which isn't tracked.")}}T=ke,fa(I,T.length>0?T[0].key:void 0)}}Bt(()=>me(r()),()=>{fa(k,r())}),Bt(()=>me(d()),()=>{fa(N,d())}),ki(),ut();var B=sO();let ae;var Ee=D(B);Z(Ee,U=>{});var ot=M(Ee,2);He(ot,t,"default",{}),ss(B,U=>L(m,U),()=>w(m)),Ae(()=>{xs(B,"id",o()),ae=Ht(B,1,`splitpanes ${u()||""} ${f()||""}`,null,ae,{"splitpanes--horizontal":r(),"splitpanes--vertical":!r(),"splitpanes--dragging":w(y)||w(S),"splitpanes--freeze":!w(b)}),wn(B,h())}),_(e,B),ct(),n()}const nO=(e,t)=>s=>{const i=e();i!==null&&i[t](s)},oO=e=>nO.bind(null,e);var rO=W("<div></div>"),aO=W("<!>   <div><!></div>",1);function lO(e,t){lt(t,!1);const s=()=>mt(u,"$isHorizontal",o),i=()=>mt(p,"$veryFirstPaneKey",o),n=()=>mt(f,"$showFirstSplitter",o),[o,r]=Zi(),a=J(),l=J(),{ssrRegisterPaneSize:c,onPaneInit:d,clientOnly:h,isHorizontal:u,showFirstSplitter:f,veryFirstPaneKey:p}=yk(cF);let m=he(t,"size",12,null),v=he(t,"minSize",8,0),C=he(t,"maxSize",8,100),b=he(t,"snapSize",8,0),y=he(t,"class",8,"");const S={},{undefinedPaneInitSize:R}=d(S);let A=J(),F=J(m()??R),T=J(!1),k;const N=oO(()=>k),I=G=>{k&&G!=w(F)&&(N==null||N("reportGivenSizeChange")(G))};vs(()=>{const G={index:0,key:S,element:w(A),givenSize:m(),sz:()=>w(F),setSz:ne=>{L(F,ne),typeof m()=="number"&&m()!==w(F)&&m(w(F))},min:()=>v(),max:()=>C(),snap:()=>b(),setSplitterActive:ne=>{L(T,ne)},isReady:!1};k=h==null?void 0:h.onPaneAdd(G)}),Yo(()=>{h==null||h.onPaneRemove(S)}),Bt(()=>me(m()),()=>{typeof m()=="number"&&I(m())}),Bt(()=>s(),()=>{L(a,lF(s()))}),Bt(()=>(w(a),w(F)),()=>{L(l,`${w(a)}: ${w(F)}%;`)}),ki(),ut();var O=de(),V=j(O);{var ee=G=>{var ne=aO(),te=j(ne);{var K=Ce=>{var re=rO(),ie=Ml(()=>N==null?void 0:N("onSplitterDown")),X=Ml(()=>N==null?void 0:N("onSplitterDown")),Q=Ml(()=>N==null?void 0:N("onSplitterClick")),se=Ml(()=>N==null?void 0:N("onSplitterDblClick"));Ae(()=>Ht(re,1,`splitpanes__splitter ${w(T)?"splitpanes__splitter__active":""}`)),z("mousedown",re,function(...De){var we;(we=w(ie))==null||we.apply(this,De)}),z("touchstart",re,function(...De){var we;(we=w(X))==null||we.apply(this,De)}),z("click",re,function(...De){var we;(we=w(Q))==null||we.apply(this,De)}),z("dblclick",re,function(...De){var we;(we=w(se))==null||we.apply(this,De)}),_(Ce,re)};Z(te,Ce=>{(i()!==S||n())&&Ce(K)})}var ve=M(te,2),ce=Ml(()=>N==null?void 0:N("onPaneClick")),Se=D(ve);He(Se,t,"default",{}),ss(ve,Ce=>L(A,Ce),()=>w(A)),Ae(()=>{Ht(ve,1,`splitpanes__pane ${y()||""}`),wn(ve,w(l))}),z("click",ve,function(...Ce){var re;(re=w(ce))==null||re.apply(this,Ce)}),_(G,ne)};Z(V,G=>{G(ee)})}_(e,O),ct(),r()}function qC(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]),i=Ye(s,["key","horizontal","defaultSizes","prefix"]);lt(t,!1);let n=he(t,"key",8,""),o=he(t,"horizontal",8,!1),r=he(t,"defaultSizes",24,()=>[]),a=he(t,"prefix",8,"layout__"),l=J([]),c=`${a()}${n()}`;vs(()=>{const h=localStorage.getItem(c);if(h)try{L(l,JSON.parse(h))}catch{L(l,r())}else L(l,r())});const d=h=>{const u=h.detail,f=Array.isArray(u)&&(u==null?void 0:u.map(p=>({...p,size:Number.isFinite(p.size)?Math.round(p.size):p.size,snapSize:Math.round(p.size/2)})));localStorage.setItem(c,JSON.stringify(f))};ut(),iO(e,st({get horizontal(){return o()}},()=>i,{$$events:{resize:d},children:(h,u)=>{var f=de(),p=j(f);He(p,t,"default",{get paneSizes(){return w(l)}}),_(h,f)},$$slots:{default:!0}})),ct()}function Zo(e,t){const s=Ye(t,["children","$$slots","$$events","$$legacy"]),i=Ye(s,["index","paneSizes"]);lt(t,!1);let n=he(t,"index",8,0),o=he(t,"paneSizes",24,()=>[]);ut(),lO(e,st(()=>o()[n()],()=>i,{children:(r,a)=>{var l=de(),c=j(l);He(c,t,"default",{}),_(r,l)},$$slots:{default:!0}})),ct()}const rv={vi:{today:"HÃ´m nay",yesterday:"HÃ´m qua",weekdays:{0:"CN",1:"T2",2:"T3",3:"T4",4:"T5",5:"T6",6:"T7"}},en:{today:"Today",yesterday:"Yesterday"}};function Za(e){return String(e).padStart(2,"0")}function Ix(e,t="vi"){if(!e)return"";const s=new Date(e);if(isNaN(s.getTime()))return"";const i=new Date,n=rv[t]??rv.vi,o=s.getFullYear()===i.getFullYear(),r=p=>`${p.getFullYear()}-${Za(p.getMonth()+1)}-${Za(p.getDate())}`,a=r(i),l=r(new Date(i.getFullYear(),i.getMonth(),i.getDate()-1)),c=r(s),d=Za(s.getDate()),h=Za(s.getMonth()+1),u=s.getFullYear(),f=t==="vi"?n.weekdays[s.getDay()]:s.toLocaleDateString(t,{weekday:"short"});return c===a?`${n.today}, ${d}/${h}`:c===l?`${n.yesterday}, ${f}, ${d}/${h}`:o?`${f}, ${d}/${h}`:`${f}, ${d}/${h}/${u}`}function Vp(e,t="vi"){if(!e)return"";const s=new Date(e);if(isNaN(s.getTime()))return"";const i=new Date,n=rv[t]??rv.vi,o=u=>`${u.getFullYear()}-${Za(u.getMonth()+1)}-${Za(u.getDate())}`,r=o(i),a=o(new Date(i.getFullYear(),i.getMonth(),i.getDate()-1)),l=o(s),c=Za(s.getHours()),d=Za(s.getMinutes()),h=`${c}:${d}`;return l===r?h:l===a?`${n.yesterday}, ${h}`:h}function av(e,t){if(!e||!t)return!0;const s=new Date(e),i=new Date(t);return isNaN(s.getTime())||isNaN(i.getTime())?!0:s.getFullYear()!==i.getFullYear()||s.getMonth()!==i.getMonth()||s.getDate()!==i.getDate()}var cO=W('<div class="flex items-center justify-center my-3"><span class="px-3 py-[2px] text-xs rounded-full bg-gray-200 text-gray-600"> </span></div>');function dF(e,t){lt(t,!1);let s=he(t,"time",8),i=he(t,"locale",8,"vi");ut();var n=cO(),o=D(n),r=D(o);Ae(a=>ze(r,a),[()=>(me(Ix),me(s()),me(i()),Y(()=>Ix(s(),i())))]),_(e,n),ct()}var dO=W('<button class="btn nav left svelte-4w3r7p">â¹</button>'),hO=W('<button class="btn nav right svelte-4w3r7p">âº</button>'),uO=W("<img/>"),gO=W('<div class="overlay svelte-4w3r7p"><div class="viewer svelte-4w3r7p"><img draggable="false"/> <button class="btn close svelte-4w3r7p">â</button> <!> <!> <div class="toolbox svelte-4w3r7p"><button class="svelte-4w3r7p">ð¤ Share</button> <button class="svelte-4w3r7p">â¬ï¸ Download</button> <button class="svelte-4w3r7p">ð Open</button></div> <div class="meta svelte-4w3r7p"><strong>ð· ThÃ´ng tin</strong> <br/> <br/> <!></div> <div class="counter svelte-4w3r7p"> </div> <div class="thumb-wrap svelte-4w3r7p"></div></div></div>');function fO(e,t){lt(t,!1);let s=he(t,"images",24,()=>[]),i=he(t,"index",12,0),n=he(t,"onClose",8,()=>{}),o=J(1),r=J(0),a=J(0),l=!1,c,d,h=0,u=1,f=0;const p=130;let m=0,v=0,C=J({width:0,height:0,size:null});function b(q){const ye=new Image;ye.onload=()=>{as(C,w(C).width=ye.width),as(C,w(C).height=ye.height)},ye.src=q,fetch(q,{method:"HEAD"}).then(B=>{const ae=B.headers.get("content-length");ae&&as(C,w(C).size=y(parseInt(ae)))}).catch(()=>{})}function y(q){const ye=["B","KB","MB","GB"],B=Math.floor(Math.log(q)/Math.log(1024));return`${(q/Math.pow(1024,B)).toFixed(1)} ${ye[B]}`}let S=J("zoom-in"),R=J();function A(){if(!w(R))return;const q=w(R).querySelector(`.thumb-${i()}`);q&&q.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}function F(){i()<s().length-1&&(k("left"),mx(i),ce())}function T(){i()>0&&(k("right"),mx(i,-1),ce())}function k(q){L(S,q==="left"?"slide-left":"slide-right"),setTimeout(()=>L(S,""),250)}function N(q){L(o,w(o)+q.deltaY*-.002),L(o,Math.min(Math.max(w(o),1),4))}function I(q){w(o)<2?L(o,2):w(o)<4?L(o,4):ce();const ye=q.target.getBoundingClientRect();L(r,(ye.width/2-(q.clientX-ye.left))*(w(o)-1)),L(a,(ye.height/2-(q.clientY-ye.top))*(w(o)-1))}function O(q){const ye=q.touches?q.touches[0]:q;w(o)===1&&(m=performance.now(),v=ye.clientY),l=!0,c=ye.clientX-w(r),d=ye.clientY-w(a)}function V(q){if(!l)return;const ye=q.touches?q.touches[0]:q;if(L(r,ye.clientX-c),L(a,ye.clientY-d),w(o)===1){const B=performance.now(),ae=B-m,Ee=ye.clientY-v;ae>0&&Math.abs(Ee/ae*1e3)>p&&(L(S,"swipe-close"),setTimeout(n(),150)),m=B,v=ye.clientY}}function ee(){l=!1}function G(q){const ye=q.touches?q.touches[0]:q;h=ye.clientX,ye.clientY}function ne(q){const B=(q.changedTouches?q.changedTouches[0]:q).clientX-h;w(o)===1&&Math.abs(B)>60&&(B<0?F():T())}function te(q){q.touches.length<2||(f=ve(q.touches),u=w(o))}function K(q){if(q.touches.length<2)return;const ye=ve(q.touches);L(o,Math.min(Math.max(u*(ye/f),1),4))}function ve(q){return Math.hypot(q[0].clientX-q[1].clientX,q[0].clientY-q[1].clientY)}function ce(){L(o,1),L(r,L(a,0))}function Se(){navigator.share?navigator.share({url:s()[i()]}):window.open(s()[i()],"_blank")}function Ce(){const q=document.createElement("a");q.href=s()[i()],q.download=`photo-${i()+1}`,q.click()}Bt(()=>(me(s()),me(i())),()=>{b(s()[i()])}),Bt(()=>{},()=>{A()}),ki(),ut();var re=gO(),ie=D(re),X=D(ie),Q=M(X,2),se=M(Q,2);{var De=q=>{var ye=dO();z("click",ye,T),_(q,ye)};Z(se,q=>{i()>0&&q(De)})}var we=M(se,2);{var Me=q=>{var ye=hO();z("click",ye,F),_(q,ye)};Z(we,q=>{me(i()),me(s()),Y(()=>i()<s().length-1)&&q(Me)})}var je=M(we,2),nt=D(je),bt=M(nt,2),We=M(bt,2),gt=M(je,2),Fe=M(D(gt),3),Ze=M(Fe,3);{var Pe=q=>{var ye=AA();Ae(()=>ze(ye,`Size: ${w(C),Y(()=>w(C).size)??""}`)),_(q,ye)};Z(Ze,q=>{w(C),Y(()=>w(C).size)&&q(Pe)})}var Oe=M(gt,2),dt=D(Oe),Ot=M(Oe,2);fs(Ot,5,s,gi,(q,ye,B)=>{var ae=uO();Ae(()=>{xs(ae,"src",w(ye)),Ht(ae,1,`thumb thumb-${B} ${i()===B?"active":""}`,"svelte-4w3r7p")}),z("click",ae,()=>{i(B),ce()}),_(q,ae)}),ss(Ot,q=>L(R,q),()=>w(R)),Ae(()=>{xs(X,"src",(me(s()),me(i()),Y(()=>s()[i()]))),Ht(X,1,`main-img ${w(S)??""}`,"svelte-4w3r7p"),wn(X,`transform: translate(${w(r)??""}px, ${w(a)??""}px) scale(${w(o)??""});`),ze(Fe,` Resolution: ${w(C),Y(()=>w(C).width)??""}Ã${w(C),Y(()=>w(C).height)??""} `),ze(dt,`${i()+1} / ${me(s()),Y(()=>s().length)??""}`)}),z("dblclick",X,I),z("click",Q,()=>n()()),z("click",nt,Se),z("click",bt,Ce),z("click",We,()=>window.open(s()[i()],"_blank")),z("click",ie,il(function(q){uC.call(this,t,q)})),z("wheel",ie,N),z("mousedown",ie,O),z("mousemove",ie,V),z("mouseup",ie,ee),z("mouseleave",ie,ee),z("touchstart",ie,q=>{G(q),te(q)}),z("touchmove",ie,q=>K(q)),z("touchend",ie,ne),z("click",re,()=>n()()),_(e,re),ct()}function pO(e){return--e*e*e*e*e+1}var mO=W('<div class="absolute bottom-8 pointer-events-none z-50"><span class="text-4xl drop-shadow-xl"> </span></div>'),vO=W('<button class="text-2xl hover:scale-150 transition-transform duration-200 active:scale-190"> </button>'),CO=W("<div></div>"),wO=W(`<div class="relative inline-block"><!> <button class="text-[12px] bg-gray-200 dark:bg-gray-600
           px-1.5 py-0.5 rounded-full
           hover:scale-110 transition">ð</button> <!></div>`);function bO(e,t){lt(t,!1);let s=he(t,"fromMe",8,!1),i=he(t,"messageId",8),n=he(t,"reactions",24,()=>["ð","â¤ï¸","ð","ð®","ð¢","ð¡"]),o=he(t,"effect",8,"fly-one"),r=he(t,"onSelect",8,()=>{}),a=J(!1),l=J(!1),c=J([]);function d(F){if(o()!=="simple"){if(o()==="fly-one"&&u(F),o()==="fly-multi"){const T=6+Math.floor(Math.random()*4);for(let k=0;k<T;k++)setTimeout(()=>u(F),k*70)}if(o()==="center-rise"&&u(F,{x:h(),y:160}),o()==="spread"&&[-40,-20,0,20,40].forEach((T,k)=>{setTimeout(()=>u(F,{x:T,y:140}),k*60)}),o()==="burst")for(let T=0;T<8;T++)u(F,{x:s()?-(10+Math.random()*40):10+Math.random()*40,y:120+Math.random()*80,scale:.7+Math.random()*.6})}}function h(){return s()?-40:0}function u(F,T={}){const k=Date.now()+Math.random();L(c,[...w(c),{id:k,emoji:F,x:T.x??f(),y:T.y??p(),scale:T.scale??m()}])}function f(){return s()?-(10+Math.random()*40):10+Math.random()*40}function p(){return 130+Math.random()*50}function m(){return .8+Math.random()*.5}function v(F){L(c,w(c).filter(T=>T.id!==F))}function C(F){r()({messageId:i(),reaction:F}),d(F),L(a,!1)}ut();var b=wO(),y=D(b);fs(y,1,()=>w(c),F=>F.id,(F,T)=>{var k=mO(),N=D(k),I=D(N);Ae(()=>{wn(k,`
    ${s()?"right: 24px;":"left: 24px;"}
    transform: translateX(${w(T),Y(()=>w(T).x)??""}px) scale(${w(T),Y(()=>w(T).scale)??""});
    opacity: 0.95;
  `),ze(I,(w(T),Y(()=>w(T).emoji)))}),z("introend",k,()=>v(w(T).id)),LA(3,k,()=>jL,()=>({y:-w(T).y,duration:900,easing:pO})),_(F,k)});var S=M(y,2);S.__click=F=>{F.stopPropagation(),L(a,!w(a))};var R=M(S,2);{var A=F=>{var T=CO();let k;fs(T,5,n,gi,(N,I)=>{var O=vO();O.__click=()=>C(w(I));var V=D(O);Ae(()=>ze(V,w(I))),_(N,O)}),Ae(()=>k=Ht(T,1,`absolute bottom-full translate-y-1
        ${s()?"right-0 origin-bottom-right":"left-0 origin-bottom-left"}
        flex gap-2 bg-white dark:bg-gray-700
        border border-gray-300 dark:border-gray-600
        rounded-full px-3 py-2 shadow-xl z-50
        scale-0 transition-transform duration-150`,null,k,{"scale-100":w(a)||w(l)})),z("mouseenter",T,()=>L(a,!0)),z("mouseleave",T,()=>L(a,!1)),_(F,T)};Z(R,F=>{(w(l)||w(a))&&F(A)})}z("mouseenter",b,()=>L(l,!0)),z("mouseleave",b,()=>{L(l,!1),L(a,!1)}),_(e,b),ct()}Cp(["click"]);var fg={};fg.d=(e,t)=>{for(var s in t)fg.o(t,s)&&!fg.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})};fg.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Xe=globalThis.pdfjsLib={};fg.d(Xe,{AbortException:()=>ud,AnnotationEditorLayer:()=>yy,AnnotationEditorParamsType:()=>qe,AnnotationEditorType:()=>Je,AnnotationEditorUIManager:()=>Jc,AnnotationLayer:()=>CN,AnnotationMode:()=>Ca,ColorPicker:()=>hv,DOMSVGFactory:()=>YS,DrawLayer:()=>Ey,FeatureTest:()=>pi,GlobalWorkerOptions:()=>Lr,ImageKind:()=>cm,InvalidPDFException:()=>uF,MissingPDFException:()=>hd,OPS:()=>Tn,OutputScale:()=>pb,PDFDataRangeTransport:()=>lP,PDFDateString:()=>zS,PDFWorker:()=>$d,PasswordResponses:()=>RO,PermissionFlag:()=>xO,PixelsPerInch:()=>al,RenderingCancelledException:()=>GS,TextLayer:()=>Mg,UnexpectedResponseException:()=>CC,Util:()=>Ne,VerbosityLevel:()=>pC,XfaLayer:()=>dP,build:()=>J2,createValidAbsoluteUrl:()=>PO,fetchData:()=>bC,getDocument:()=>W2,getFilenameFromUrl:()=>NO,getPdfFilenameFromUrl:()=>HO,getXfaPageViewport:()=>BO,isDataScheme:()=>yC,isPdfFile:()=>VS,noContextMenu:()=>Sn,normalizeUnicode:()=>IO,setLayerDimensions:()=>Qc,shadow:()=>vt,version:()=>Q2});const ri=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),hF=[1,0,0,1,0,0],hb=[.001,0,0,.001,0,0],yO=1e7,YC=1.35,Ui={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ca={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},SO="pdfjs_internal_editor_",Je={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},qe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},xO={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Js={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},cm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Cs={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},ku={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},pC={ERRORS:0,WARNINGS:1,INFOS:5},Tn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},RO={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let mC=pC.WARNINGS;function EO(e){Number.isInteger(e)&&(mC=e)}function AO(){return mC}function vC(e){mC>=pC.INFOS&&console.log(`Info: ${e}`)}function it(e){mC>=pC.WARNINGS&&console.log(`Warning: ${e}`)}function zt(e){throw new Error(e)}function Rs(e,t){e||zt(t)}function FO(e){switch(e==null?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function PO(e,t=null,s=null){if(!e)return null;try{if(s&&typeof e=="string"){if(s.addDefaultProtocol&&e.startsWith("www.")){const n=e.match(/\./g);(n==null?void 0:n.length)>=2&&(e=`http://${e}`)}if(s.tryConvertEncoding)try{e=kO(e)}catch{}}const i=t?new URL(e,t):new URL(e);if(FO(i))return i}catch{}return null}function vt(e,t,s,i=!1){return Object.defineProperty(e,t,{value:s,enumerable:!i,configurable:!0,writable:!1}),s}const vl=(function(){function t(s,i){this.message=s,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class ub extends vl{constructor(t,s){super(t,"PasswordException"),this.code=s}}class gb extends vl{constructor(t,s){super(t,"UnknownErrorException"),this.details=s}}class uF extends vl{constructor(t){super(t,"InvalidPDFException")}}class hd extends vl{constructor(t){super(t,"MissingPDFException")}}class CC extends vl{constructor(t,s){super(t,"UnexpectedResponseException"),this.status=s}}class TO extends vl{constructor(t){super(t,"FormatError")}}class ud extends vl{constructor(t){super(t,"AbortException")}}function gF(e){(typeof e!="object"||(e==null?void 0:e.length)===void 0)&&zt("Invalid argument for bytesToString");const t=e.length,s=8192;if(t<s)return String.fromCharCode.apply(null,e);const i=[];for(let n=0;n<t;n+=s){const o=Math.min(n+s,t),r=e.subarray(n,o);i.push(String.fromCharCode.apply(null,r))}return i.join("")}function wC(e){typeof e!="string"&&zt("Invalid argument for stringToBytes");const t=e.length,s=new Uint8Array(t);for(let i=0;i<t;++i)s[i]=e.charCodeAt(i)&255;return s}function DO(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function HS(e){const t=Object.create(null);for(const[s,i]of e)t[s]=i;return t}function _O(){const e=new Uint8Array(4);return e[0]=1,new Uint32Array(e.buffer,0,1)[0]===1}function MO(){try{return new Function(""),!0}catch{return!1}}class pi{static get isLittleEndian(){return vt(this,"isLittleEndian",_O())}static get isEvalSupported(){return vt(this,"isEvalSupported",MO())}static get isOffscreenCanvasSupported(){return vt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?vt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):vt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,s;return vt(this,"isCSSRoundSupported",(s=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:s.call(t,"width: round(1.5px, 1px)"))}}const XC=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));var jr,dm,fb;class Ne{static makeHexColor(t,s,i){return`#${XC[t]}${XC[s]}${XC[i]}`}static scaleMinMax(t,s){let i;t[0]?(t[0]<0&&(i=s[0],s[0]=s[2],s[2]=i),s[0]*=t[0],s[2]*=t[0],t[3]<0&&(i=s[1],s[1]=s[3],s[3]=i),s[1]*=t[3],s[3]*=t[3]):(i=s[0],s[0]=s[1],s[1]=i,i=s[2],s[2]=s[3],s[3]=i,t[1]<0&&(i=s[1],s[1]=s[3],s[3]=i),s[1]*=t[1],s[3]*=t[1],t[2]<0&&(i=s[0],s[0]=s[2],s[2]=i),s[0]*=t[2],s[2]*=t[2]),s[0]+=t[4],s[1]+=t[5],s[2]+=t[4],s[3]+=t[5]}static transform(t,s){return[t[0]*s[0]+t[2]*s[1],t[1]*s[0]+t[3]*s[1],t[0]*s[2]+t[2]*s[3],t[1]*s[2]+t[3]*s[3],t[0]*s[4]+t[2]*s[5]+t[4],t[1]*s[4]+t[3]*s[5]+t[5]]}static applyTransform(t,s){const i=t[0]*s[0]+t[1]*s[2]+s[4],n=t[0]*s[1]+t[1]*s[3]+s[5];return[i,n]}static applyInverseTransform(t,s){const i=s[0]*s[3]-s[1]*s[2],n=(t[0]*s[3]-t[1]*s[2]+s[2]*s[5]-s[4]*s[3])/i,o=(-t[0]*s[1]+t[1]*s[0]+s[4]*s[1]-s[5]*s[0])/i;return[n,o]}static getAxialAlignedBoundingBox(t,s){const i=this.applyTransform(t,s),n=this.applyTransform(t.slice(2,4),s),o=this.applyTransform([t[0],t[3]],s),r=this.applyTransform([t[2],t[1]],s);return[Math.min(i[0],n[0],o[0],r[0]),Math.min(i[1],n[1],o[1],r[1]),Math.max(i[0],n[0],o[0],r[0]),Math.max(i[1],n[1],o[1],r[1])]}static inverseTransform(t){const s=t[0]*t[3]-t[1]*t[2];return[t[3]/s,-t[1]/s,-t[2]/s,t[0]/s,(t[2]*t[5]-t[4]*t[3])/s,(t[4]*t[1]-t[5]*t[0])/s]}static singularValueDecompose2dScale(t){const s=[t[0],t[2],t[1],t[3]],i=t[0]*s[0]+t[1]*s[2],n=t[0]*s[1]+t[1]*s[3],o=t[2]*s[0]+t[3]*s[2],r=t[2]*s[1]+t[3]*s[3],a=(i+r)/2,l=Math.sqrt((i+r)**2-4*(i*r-o*n))/2,c=a+l||1,d=a-l||1;return[Math.sqrt(c),Math.sqrt(d)]}static normalizeRect(t){const s=t.slice(0);return t[0]>t[2]&&(s[0]=t[2],s[2]=t[0]),t[1]>t[3]&&(s[1]=t[3],s[3]=t[1]),s}static intersect(t,s){const i=Math.max(Math.min(t[0],t[2]),Math.min(s[0],s[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(s[0],s[2]));if(i>n)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(s[1],s[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(s[1],s[3]));return o>r?null:[i,o,n,r]}static bezierBoundingBox(t,s,i,n,o,r,a,l,c){return c?(c[0]=Math.min(c[0],t,a),c[1]=Math.min(c[1],s,l),c[2]=Math.max(c[2],t,a),c[3]=Math.max(c[3],s,l)):c=[Math.min(t,a),Math.min(s,l),Math.max(t,a),Math.max(s,l)],E(this,jr,fb).call(this,t,i,o,a,s,n,r,l,3*(-t+3*(i-o)+a),6*(t-2*i+o),3*(i-t),c),E(this,jr,fb).call(this,t,i,o,a,s,n,r,l,3*(-s+3*(n-r)+l),6*(s-2*n+r),3*(n-s),c),c}}jr=new WeakSet,dm=function(t,s,i,n,o,r,a,l,c,d){if(c<=0||c>=1)return;const h=1-c,u=c*c,f=u*c,p=h*(h*(h*t+3*c*s)+3*u*i)+f*n,m=h*(h*(h*o+3*c*r)+3*u*a)+f*l;d[0]=Math.min(d[0],p),d[1]=Math.min(d[1],m),d[2]=Math.max(d[2],p),d[3]=Math.max(d[3],m)},fb=function(t,s,i,n,o,r,a,l,c,d,h,u){if(Math.abs(c)<1e-12){Math.abs(d)>=1e-12&&E(this,jr,dm).call(this,t,s,i,n,o,r,a,l,-h/d,u);return}const f=d**2-4*h*c;if(f<0)return;const p=Math.sqrt(f),m=2*c;E(this,jr,dm).call(this,t,s,i,n,o,r,a,l,(-d+p)/m,u),E(this,jr,dm).call(this,t,s,i,n,o,r,a,l,(-d-p)/m,u)},P(Ne,jr);function kO(e){return decodeURIComponent(escape(e))}let QC=null,Lx=null;function IO(e){return QC||(QC=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Lx=new Map([["ï¬","Å¿t"]])),e.replaceAll(QC,(t,s,i)=>s?s.normalize("NFKC"):Lx.get(i))}function LO(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const e=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(e);else for(let t=0;t<32;t++)e[t]=Math.floor(Math.random()*255);return gF(e)}const BS="pdfjs_internal_id_",er={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function OO(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(gF(e))}const ir="http://www.w3.org/2000/svg",kl=class kl{};Ge(kl,"CSS",96),Ge(kl,"PDF",72),Ge(kl,"PDF_TO_CSS_UNITS",kl.CSS/kl.PDF);let al=kl;async function bC(e,t="text"){if($u(e,document.baseURI)){const s=await fetch(e);if(!s.ok)throw new Error(s.statusText);switch(t){case"arraybuffer":return s.arrayBuffer();case"blob":return s.blob();case"json":return s.json()}return s.text()}return new Promise((s,i)=>{const n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":s(n.response);return}s(n.responseText);return}i(new Error(n.statusText))}},n.send(null)})}class Sp{constructor({viewBox:t,scale:s,rotation:i,offsetX:n=0,offsetY:o=0,dontFlip:r=!1}){this.viewBox=t,this.scale=s,this.rotation=i,this.offsetX=n,this.offsetY=o;const a=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let c,d,h,u;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,d=0,h=0,u=1;break;case 90:c=0,d=1,h=1,u=0;break;case 270:c=0,d=-1,h=-1,u=0;break;case 0:c=1,d=0,h=0,u=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}r&&(h=-h,u=-u);let f,p,m,v;c===0?(f=Math.abs(l-t[1])*s+n,p=Math.abs(a-t[0])*s+o,m=(t[3]-t[1])*s,v=(t[2]-t[0])*s):(f=Math.abs(a-t[0])*s+n,p=Math.abs(l-t[1])*s+o,m=(t[2]-t[0])*s,v=(t[3]-t[1])*s),this.transform=[c*s,d*s,h*s,u*s,f-c*s*a-h*s*l,p-d*s*a-u*s*l],this.width=m,this.height=v}get rawDims(){const{viewBox:t}=this;return vt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:s=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:o=!1}={}){return new Sp({viewBox:this.viewBox.slice(),scale:t,rotation:s,offsetX:i,offsetY:n,dontFlip:o})}convertToViewportPoint(t,s){return Ne.applyTransform([t,s],this.transform)}convertToViewportRectangle(t){const s=Ne.applyTransform([t[0],t[1]],this.transform),i=Ne.applyTransform([t[2],t[3]],this.transform);return[s[0],s[1],i[0],i[1]]}convertToPdfPoint(t,s){return Ne.applyInverseTransform([t,s],this.transform)}}class GS extends vl{constructor(t,s=0){super(t,"RenderingCancelledException"),this.extraDelay=s}}function yC(e){const t=e.length;let s=0;for(;s<t&&e[s].trim()==="";)s++;return e.substring(s,s+5).toLowerCase()==="data:"}function VS(e){return typeof e=="string"&&/\.pdf$/i.test(e)}function NO(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)}function HO(e,t="document.pdf"){if(typeof e!="string")return t;if(yC(e))return it('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=s.exec(e);let o=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(o&&(o=o[0],o.includes("%")))try{o=i.exec(decodeURIComponent(o))[0]}catch{}return o||t}class Ox{constructor(){Ge(this,"started",Object.create(null));Ge(this,"times",[])}time(t){t in this.started&&it(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||it(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let s=0;for(const{name:i}of this.times)s=Math.max(i.length,s);for(const{name:i,start:n,end:o}of this.times)t.push(`${i.padEnd(s)} ${o-n}ms
`);return t.join("")}}function $u(e,t){try{const{protocol:s}=t?new URL(e,t):new URL(e);return s==="http:"||s==="https:"}catch{return!1}}function Sn(e){e.preventDefault()}function Nx(e){console.log("Deprecated API usage: "+e)}var Xg;class zS{static toDateObject(t){if(!t||typeof t!="string")return null;g(this,Xg)||x(this,Xg,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const s=g(this,Xg).exec(t);if(!s)return null;const i=parseInt(s[1],10);let n=parseInt(s[2],10);n=n>=1&&n<=12?n-1:0;let o=parseInt(s[3],10);o=o>=1&&o<=31?o:1;let r=parseInt(s[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(s[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(s[6],10);l=l>=0&&l<=59?l:0;const c=s[7]||"Z";let d=parseInt(s[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(s[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(r+=d,a+=h):c==="+"&&(r-=d,a-=h),new Date(Date.UTC(i,n,o,r,a,l))}}Xg=new WeakMap,P(zS,Xg);function BO(e,{scale:t=1,rotation:s=0}){const{width:i,height:n}=e.attributes.style,o=[0,0,parseInt(i),parseInt(n)];return new Sp({viewBox:o,scale:t,rotation:s})}function WS(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(t=>parseInt(t)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(it(`Not a valid color format: "${e}"`),[0,0,0])}function GO(e){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const s of e.keys()){t.style.color=s;const i=window.getComputedStyle(t).color;e.set(s,WS(i))}t.remove()}function Zt(e){const{a:t,b:s,c:i,d:n,e:o,f:r}=e.getTransform();return[t,s,i,n,o,r]}function tr(e){const{a:t,b:s,c:i,d:n,e:o,f:r}=e.getTransform().invertSelf();return[t,s,i,n,o,r]}function Qc(e,t,s=!1,i=!0){if(t instanceof Sp){const{pageWidth:n,pageHeight:o}=t.rawDims,{style:r}=e,a=pi.isCSSRoundSupported,l=`var(--scale-factor) * ${n}px`,c=`var(--scale-factor) * ${o}px`,d=a?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,h=a?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!s||t.rotation%180===0?(r.width=d,r.height=h):(r.width=h,r.height=d)}i&&e.setAttribute("data-main-rotation",t.rotation)}class pb{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var xa,$l,_n,Ul,Qg,Jg,Gv,fF,vi,pF,mF,hm,vF,vb;const or=class or{constructor(t){P(this,vi);P(this,xa,null);P(this,$l,null);P(this,_n);P(this,Ul,null);P(this,Qg,null);x(this,_n,t),g(or,Jg)||x(or,Jg,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=x(this,xa,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const s=g(this,_n)._uiManager._signal;t.addEventListener("contextmenu",Sn,{signal:s}),t.addEventListener("pointerdown",E(or,Gv,fF),{signal:s});const i=x(this,Ul,document.createElement("div"));i.className="buttons",t.append(i);const n=g(this,_n).toolbarPosition;if(n){const{style:o}=t,r=g(this,_n)._uiManager.direction==="ltr"?1-n[0]:n[0];o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return E(this,vi,vF).call(this),t}get div(){return g(this,xa)}hide(){var t;g(this,xa).classList.add("hidden"),(t=g(this,$l))==null||t.hideDropdown()}show(){var t;g(this,xa).classList.remove("hidden"),(t=g(this,Qg))==null||t.shown()}async addAltText(t){const s=await t.render();E(this,vi,hm).call(this,s),g(this,Ul).prepend(s,g(this,vi,vb)),x(this,Qg,t)}addColorPicker(t){x(this,$l,t);const s=t.renderButton();E(this,vi,hm).call(this,s),g(this,Ul).prepend(s,g(this,vi,vb))}remove(){var t;g(this,xa).remove(),(t=g(this,$l))==null||t.destroy(),x(this,$l,null)}};xa=new WeakMap,$l=new WeakMap,_n=new WeakMap,Ul=new WeakMap,Qg=new WeakMap,Jg=new WeakMap,Gv=new WeakSet,fF=function(t){t.stopPropagation()},vi=new WeakSet,pF=function(t){g(this,_n)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},mF=function(t){g(this,_n)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},hm=function(t){const s=g(this,_n)._uiManager._signal;t.addEventListener("focusin",E(this,vi,pF).bind(this),{capture:!0,signal:s}),t.addEventListener("focusout",E(this,vi,mF).bind(this),{capture:!0,signal:s}),t.addEventListener("contextmenu",Sn,{signal:s})},vF=function(){const{editorType:t,_uiManager:s}=g(this,_n),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",g(or,Jg)[t]),E(this,vi,hm).call(this,i),i.addEventListener("click",n=>{s.delete()},{signal:s._signal}),g(this,Ul).append(i)},vb=function(){const t=document.createElement("div");return t.className="divider",t},P(or,Gv),P(or,Jg,null);let mb=or;var Zg,jl,Kl,fl,CF,wF,bF;class VO{constructor(t){P(this,fl);P(this,Zg,null);P(this,jl,null);P(this,Kl);x(this,Kl,t)}show(t,s,i){const[n,o]=E(this,fl,wF).call(this,s,i),{style:r}=g(this,jl)||x(this,jl,E(this,fl,CF).call(this));t.append(g(this,jl)),r.insetInlineEnd=`${100*n}%`,r.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){g(this,jl).remove()}}Zg=new WeakMap,jl=new WeakMap,Kl=new WeakMap,fl=new WeakSet,CF=function(){const t=x(this,jl,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Sn,{signal:g(this,Kl)._signal});const s=x(this,Zg,document.createElement("div"));return s.className="buttons",t.append(s),E(this,fl,bF).call(this),t},wF=function(t,s){let i=0,n=0;for(const o of t){const r=o.y+o.height;if(r<i)continue;const a=o.x+(s?o.width:0);if(r>i){n=a,i=r;continue}s?a>n&&(n=a):a<n&&(n=a)}return[s?1-n:n,i]},bF=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const s=document.createElement("span");t.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=g(this,Kl)._signal;t.addEventListener("contextmenu",Sn,{signal:i}),t.addEventListener("click",()=>{g(this,Kl).highlightSelection("floating_button")},{signal:i}),g(this,Zg).append(t)};function lv(e,t,s){for(const i of s)t.addEventListener(i,e[i].bind(e))}function zO(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")}var Vv;class WO{constructor(){P(this,Vv,0)}get id(){return`${SO}${li(this,Vv)._++}`}}Vv=new WeakMap;var rh,ef,ei,ah,um;const Y0=class Y0{constructor(){P(this,ah);P(this,rh,LO());P(this,ef,0);P(this,ei,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;const o=n.decode().then(()=>(i.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return vt(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:s,name:i,size:n,type:o}=t;return E(this,ah,um).call(this,`${s}_${i}_${n}_${o}`,t)}async getFromUrl(t){return E(this,ah,um).call(this,t,t)}async getFromBlob(t,s){const i=await s;return E(this,ah,um).call(this,t,i)}async getFromId(t){g(this,ei)||x(this,ei,new Map);const s=g(this,ei).get(t);if(!s)return null;if(s.bitmap)return s.refCounter+=1,s;if(s.file)return this.getFromFile(s.file);if(s.blobPromise){const{blobPromise:i}=s;return delete s.blobPromise,this.getFromBlob(s.id,i)}return this.getFromUrl(s.url)}getFromCanvas(t,s){g(this,ei)||x(this,ei,new Map);let i=g(this,ei).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const n=new OffscreenCanvas(s.width,s.height);return n.getContext("2d").drawImage(s,0,0),i={bitmap:n.transferToImageBitmap(),id:`image_${g(this,rh)}_${li(this,ef)._++}`,refCounter:1,isSvg:!1},g(this,ei).set(t,i),g(this,ei).set(i.id,i),i}getSvgUrl(t){const s=g(this,ei).get(t);return s!=null&&s.isSvg?s.svgUrl:null}deleteId(t){var n;g(this,ei)||x(this,ei,new Map);const s=g(this,ei).get(t);if(!s||(s.refCounter-=1,s.refCounter!==0))return;const{bitmap:i}=s;if(!s.url&&!s.file){const o=new OffscreenCanvas(i.width,i.height);o.getContext("bitmaprenderer").transferFromImageBitmap(i),s.blobPromise=o.convertToBlob()}(n=i.close)==null||n.call(i),s.bitmap=null}isValidId(t){return t.startsWith(`image_${g(this,rh)}_`)}};rh=new WeakMap,ef=new WeakMap,ei=new WeakMap,ah=new WeakSet,um=async function(t,s){g(this,ei)||x(this,ei,new Map);let i=g(this,ei).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${g(this,rh)}_${li(this,ef)._++}`,refCounter:0,isSvg:!1});let n;if(typeof s=="string"?(i.url=s,n=await bC(s,"blob")):s instanceof File?n=i.file=s:s instanceof Blob&&(n=s),n.type==="image/svg+xml"){const o=Y0._isSVGFittingCanvas,r=new FileReader,a=new Image,l=new Promise((c,d)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,c()},r.onload=async()=>{const h=i.svgUrl=r.result;a.src=await o?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=r.onerror=d});r.readAsDataURL(n),await l}else i.bitmap=await createImageBitmap(n);i.refCounter=1}catch(n){console.error(n),i=null}return g(this,ei).set(t,i),i&&g(this,ei).set(i.id,i),i};let Cb=Y0;var Ps,Ra,tf,Ts;class $O{constructor(t=128){P(this,Ps,[]);P(this,Ra,!1);P(this,tf);P(this,Ts,-1);x(this,tf,t)}add({cmd:t,undo:s,post:i,mustExec:n,type:o=NaN,overwriteIfSameType:r=!1,keepUndo:a=!1}){if(n&&t(),g(this,Ra))return;const l={cmd:t,undo:s,post:i,type:o};if(g(this,Ts)===-1){g(this,Ps).length>0&&(g(this,Ps).length=0),x(this,Ts,0),g(this,Ps).push(l);return}if(r&&g(this,Ps)[g(this,Ts)].type===o){a&&(l.undo=g(this,Ps)[g(this,Ts)].undo),g(this,Ps)[g(this,Ts)]=l;return}const c=g(this,Ts)+1;c===g(this,tf)?g(this,Ps).splice(0,1):(x(this,Ts,c),c<g(this,Ps).length&&g(this,Ps).splice(c)),g(this,Ps).push(l)}undo(){if(g(this,Ts)===-1)return;x(this,Ra,!0);const{undo:t,post:s}=g(this,Ps)[g(this,Ts)];t(),s==null||s(),x(this,Ra,!1),x(this,Ts,g(this,Ts)-1)}redo(){if(g(this,Ts)<g(this,Ps).length-1){x(this,Ts,g(this,Ts)+1),x(this,Ra,!0);const{cmd:t,post:s}=g(this,Ps)[g(this,Ts)];t(),s==null||s(),x(this,Ra,!1)}}hasSomethingToUndo(){return g(this,Ts)!==-1}hasSomethingToRedo(){return g(this,Ts)<g(this,Ps).length-1}destroy(){x(this,Ps,null)}}Ps=new WeakMap,Ra=new WeakMap,tf=new WeakMap,Ts=new WeakMap;var zv,yF;class xp{constructor(t){P(this,zv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:s}=pi.platform;for(const[i,n,o={}]of t)for(const r of i){const a=r.startsWith("mac+");s&&a?(this.callbacks.set(r.slice(4),{callback:n,options:o}),this.allKeys.add(r.split("+").at(-1))):!s&&!a&&(this.callbacks.set(r,{callback:n,options:o}),this.allKeys.add(r.split("+").at(-1)))}}exec(t,s){if(!this.allKeys.has(s.key))return;const i=this.callbacks.get(E(this,zv,yF).call(this,s));if(!i)return;const{callback:n,options:{bubbles:o=!1,args:r=[],checker:a=null}}=i;a&&!a(t,s)||(n.bind(t,...r,s)(),o||(s.stopPropagation(),s.preventDefault()))}}zv=new WeakSet,yF=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const s=this.buffer.join("+");return this.buffer.length=0,s};const Wv=class Wv{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return GO(t),vt(this,"_colors",t)}convert(t){const s=WS(t);if(!window.matchMedia("(forced-colors: active)").matches)return s;for(const[i,n]of this._colors)if(n.every((o,r)=>o===s[r]))return Wv._colorsMapping.get(i);return s}getHexCode(t){const s=this._colors.get(t);return s?Ne.makeHexColor(...s):t}};Ge(Wv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let wb=Wv;var lh,Ni,bs,Gs,ch,cr,dh,Mn,Ea,hh,ql,po,kn,Yl,sf,nf,uh,of,mo,Aa,gh,Fa,vo,$v,Pa,rf,Ta,Xl,af,lf,Ds,Tt,dr,Ql,cf,df,Da,Co,hr,hf,cn,Re,gm,bb,SF,xF,fm,RF,EF,AF,yb,FF,Sb,xb,PF,ci,ua,TF,DF,Rb,_F,Uu,Eb;const Gd=class Gd{constructor(t,s,i,n,o,r,a,l,c,d,h){P(this,Re);P(this,lh,new AbortController);P(this,Ni,null);P(this,bs,new Map);P(this,Gs,new Map);P(this,ch,null);P(this,cr,null);P(this,dh,null);P(this,Mn,new $O);P(this,Ea,null);P(this,hh,0);P(this,ql,new Set);P(this,po,null);P(this,kn,null);P(this,Yl,new Set);P(this,sf,!1);P(this,nf,!1);P(this,uh,!1);P(this,of,null);P(this,mo,null);P(this,Aa,null);P(this,gh,null);P(this,Fa,!1);P(this,vo,null);P(this,$v,new WO);P(this,Pa,!1);P(this,rf,!1);P(this,Ta,null);P(this,Xl,null);P(this,af,null);P(this,lf,null);P(this,Ds,Je.NONE);P(this,Tt,new Set);P(this,dr,null);P(this,Ql,null);P(this,cf,null);P(this,df,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});P(this,Da,[0,0]);P(this,Co,null);P(this,hr,null);P(this,hf,null);P(this,cn,null);const u=this._signal=g(this,lh).signal;x(this,hr,t),x(this,hf,s),x(this,ch,i),this._eventBus=n,n._on("editingaction",this.onEditingAction.bind(this),{signal:u}),n._on("pagechanging",this.onPageChanging.bind(this),{signal:u}),n._on("scalechanging",this.onScaleChanging.bind(this),{signal:u}),n._on("rotationchanging",this.onRotationChanging.bind(this),{signal:u}),n._on("setpreference",this.onSetPreference.bind(this),{signal:u}),n._on("switchannotationeditorparams",f=>this.updateParams(f.type,f.value),{signal:u}),E(this,Re,RF).call(this),E(this,Re,PF).call(this),E(this,Re,yb).call(this),x(this,cr,o.annotationStorage),x(this,of,o.filterFactory),x(this,Ql,r),x(this,gh,a||null),x(this,sf,l),x(this,nf,c),x(this,uh,d),x(this,lf,h||null),this.viewParameters={realScale:al.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=Gd.prototype,s=r=>g(r,hr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&r.hasSomethingToControl(),i=(r,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},n=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return vt(this,"_keyboardManager",new xp([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(r,{target:a})=>!(a instanceof HTMLButtonElement)&&g(r,hr).contains(a)&&!r.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(r,{target:a})=>!(a instanceof HTMLButtonElement)&&g(r,hr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:s}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:s}]]))}destroy(){var t,s,i,n;(t=g(this,cn))==null||t.resolve(),x(this,cn,null),(s=g(this,lh))==null||s.abort(),x(this,lh,null),this._signal=null;for(const o of g(this,Gs).values())o.destroy();g(this,Gs).clear(),g(this,bs).clear(),g(this,Yl).clear(),x(this,Ni,null),g(this,Tt).clear(),g(this,Mn).destroy(),(i=g(this,ch))==null||i.destroy(),(n=g(this,vo))==null||n.hide(),x(this,vo,null),g(this,mo)&&(clearTimeout(g(this,mo)),x(this,mo,null)),g(this,Co)&&(clearTimeout(g(this,Co)),x(this,Co,null))}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return g(this,lf)}get useNewAltTextFlow(){return g(this,nf)}get useNewAltTextWhenAddingImage(){return g(this,uh)}get hcmFilter(){return vt(this,"hcmFilter",g(this,Ql)?g(this,of).addHCMFilter(g(this,Ql).foreground,g(this,Ql).background):"none")}get direction(){return vt(this,"direction",getComputedStyle(g(this,hr)).direction)}get highlightColors(){return vt(this,"highlightColors",g(this,gh)?new Map(g(this,gh).split(",").map(t=>t.split("=").map(s=>s.trim()))):null)}get highlightColorNames(){return vt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){x(this,af,t)}editAltText(t,s=!1){var i;(i=g(this,ch))==null||i.editAltText(this,t,s)}switchToMode(t,s){this._eventBus.on("annotationeditormodechanged",s,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,s){this._eventBus.dispatch("setpreference",{source:this,name:t,value:s})}onSetPreference({name:t,value:s}){switch(t){case"enableNewAltTextWhenAddingImage":x(this,uh,s);break}}onPageChanging({pageNumber:t}){x(this,hh,t-1)}focusMainContainer(){g(this,hr).focus()}findParent(t,s){for(const i of g(this,Gs).values()){const{x:n,y:o,width:r,height:a}=i.div.getBoundingClientRect();if(t>=n&&t<=n+r&&s>=o&&s<=o+a)return i}return null}disableUserSelect(t=!1){g(this,hf).classList.toggle("noUserSelect",t)}addShouldRescale(t){g(this,Yl).add(t)}removeShouldRescale(t){g(this,Yl).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*al.PDF_TO_CSS_UNITS;for(const s of g(this,Yl))s.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:i,anchorOffset:n,focusNode:o,focusOffset:r}=s,a=s.toString(),c=E(this,Re,gm).call(this,s).closest(".textLayer"),d=this.getSelectionBoxes(c);if(!d)return;s.empty();const h=E(this,Re,bb).call(this,c),u=g(this,Ds)===Je.NONE,f=()=>{h==null||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:i,anchorOffset:n,focusNode:o,focusOffset:r,text:a}),u&&this.showAllEditors("highlight",!0,!0)};if(u){this.switchToMode(Je.HIGHLIGHT,f);return}f()}addToAnnotationStorage(t){!t.isEmpty()&&g(this,cr)&&!g(this,cr).has(t.id)&&g(this,cr).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,g(this,Fa)&&(x(this,Fa,!1),E(this,Re,fm).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const s of g(this,Tt))if(s.div.contains(t)){x(this,Xl,[s,t]),s._focusEventsAllowed=!1;break}}focus(){if(!g(this,Xl))return;const[t,s]=g(this,Xl);x(this,Xl,null),s.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),s.focus()}addEditListeners(){E(this,Re,yb).call(this),E(this,Re,Sb).call(this)}removeEditListeners(){E(this,Re,FF).call(this),E(this,Re,xb).call(this)}dragOver(t){for(const{type:s}of t.dataTransfer.items)for(const i of g(this,kn))if(i.isHandlingMimeForPasting(s)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const s of t.dataTransfer.items)for(const i of g(this,kn))if(i.isHandlingMimeForPasting(s.type)){i.paste(s,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=g(this,Ni))==null||i.commitOrRemove(),!this.hasSelection)return;const s=[];for(const n of g(this,Tt)){const o=n.serialize(!0);o&&s.push(o)}s.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(s))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:s}=t;for(const o of s.items)for(const r of g(this,kn))if(r.isHandlingMimeForPasting(o.type)){r.paste(o,this.currentLayer);return}let i=s.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){it(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const n=this.currentLayer;try{const o=[];for(const l of i){const c=await n.deserialize(l);if(!c)return;o.push(c)}const r=()=>{for(const l of o)E(this,Re,Rb).call(this,l);E(this,Re,Eb).call(this,o)},a=()=>{for(const l of o)l.remove()};this.addCommands({cmd:r,undo:a,mustExec:!0})}catch(o){it(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),g(this,Ds)!==Je.NONE&&!this.isEditorHandlingKeyboard&&Gd._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,g(this,Fa)&&(x(this,Fa,!1),E(this,Re,fm).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(E(this,Re,EF).call(this),E(this,Re,Sb).call(this),E(this,Re,ci).call(this,{isEditing:g(this,Ds)!==Je.NONE,isEmpty:E(this,Re,Uu).call(this),hasSomethingToUndo:g(this,Mn).hasSomethingToUndo(),hasSomethingToRedo:g(this,Mn).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,Re,AF).call(this),E(this,Re,xb).call(this),E(this,Re,ci).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!g(this,kn)){x(this,kn,t);for(const s of g(this,kn))E(this,Re,ua).call(this,s.defaultPropertiesToUpdate)}}getId(){return g(this,$v).id}get currentLayer(){return g(this,Gs).get(g(this,hh))}getLayer(t){return g(this,Gs).get(t)}get currentPageIndex(){return g(this,hh)}addLayer(t){g(this,Gs).set(t.pageIndex,t),g(this,Pa)?t.enable():t.disable()}removeLayer(t){g(this,Gs).delete(t.pageIndex)}async updateMode(t,s=null,i=!1){if(g(this,Ds)!==t&&!(g(this,cn)&&(await g(this,cn).promise,!g(this,cn)))){if(x(this,cn,Promise.withResolvers()),x(this,Ds,t),t===Je.NONE){this.setEditingState(!1),E(this,Re,DF).call(this),g(this,cn).resolve();return}this.setEditingState(!0),await E(this,Re,TF).call(this),this.unselectAll();for(const n of g(this,Gs).values())n.updateMode(t);if(!s){i&&this.addNewEditorFromKeyboard(),g(this,cn).resolve();return}for(const n of g(this,bs).values())n.annotationElementId===s?(this.setSelected(n),n.enterInEditMode()):n.unselect();g(this,cn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==g(this,Ds)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,s){var i;if(g(this,kn)){switch(t){case qe.CREATE:this.currentLayer.addNewEditor();return;case qe.HIGHLIGHT_DEFAULT_COLOR:(i=g(this,af))==null||i.updateColor(s);break;case qe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(g(this,cf)||x(this,cf,new Map)).set(t,s),this.showAllEditors("highlight",s);break}for(const n of g(this,Tt))n.updateParams(t,s);for(const n of g(this,kn))n.updateDefaultParams(t,s)}}showAllEditors(t,s,i=!1){var o;for(const r of g(this,bs).values())r.editorType===t&&r.show(s);(((o=g(this,cf))==null?void 0:o.get(qe.HIGHLIGHT_SHOW_ALL))??!0)!==s&&E(this,Re,ua).call(this,[[qe.HIGHLIGHT_SHOW_ALL,s]])}enableWaiting(t=!1){if(g(this,rf)!==t){x(this,rf,t);for(const s of g(this,Gs).values())t?s.disableClick():s.enableClick(),s.div.classList.toggle("waiting",t)}}getEditors(t){const s=[];for(const i of g(this,bs).values())i.pageIndex===t&&s.push(i);return s}getEditor(t){return g(this,bs).get(t)}addEditor(t){g(this,bs).set(t.id,t)}removeEditor(t){var s;t.div.contains(document.activeElement)&&(g(this,mo)&&clearTimeout(g(this,mo)),x(this,mo,setTimeout(()=>{this.focusMainContainer(),x(this,mo,null)},0))),g(this,bs).delete(t.id),this.unselect(t),(!t.annotationElementId||!g(this,ql).has(t.annotationElementId))&&((s=g(this,cr))==null||s.remove(t.id))}addDeletedAnnotationElement(t){g(this,ql).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return g(this,ql).has(t)}removeDeletedAnnotationElement(t){g(this,ql).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){g(this,Ni)!==t&&(x(this,Ni,t),t&&E(this,Re,ua).call(this,t.propertiesToUpdate))}updateUI(t){g(this,Re,_F)===t&&E(this,Re,ua).call(this,t.propertiesToUpdate)}toggleSelected(t){if(g(this,Tt).has(t)){g(this,Tt).delete(t),t.unselect(),E(this,Re,ci).call(this,{hasSelectedEditor:this.hasSelection});return}g(this,Tt).add(t),t.select(),E(this,Re,ua).call(this,t.propertiesToUpdate),E(this,Re,ci).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const s of g(this,Tt))s!==t&&s.unselect();g(this,Tt).clear(),g(this,Tt).add(t),t.select(),E(this,Re,ua).call(this,t.propertiesToUpdate),E(this,Re,ci).call(this,{hasSelectedEditor:!0})}isSelected(t){return g(this,Tt).has(t)}get firstSelectedEditor(){return g(this,Tt).values().next().value}unselect(t){t.unselect(),g(this,Tt).delete(t),E(this,Re,ci).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return g(this,Tt).size!==0}get isEnterHandled(){return g(this,Tt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){g(this,Mn).undo(),E(this,Re,ci).call(this,{hasSomethingToUndo:g(this,Mn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,Re,Uu).call(this)})}redo(){g(this,Mn).redo(),E(this,Re,ci).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:g(this,Mn).hasSomethingToRedo(),isEmpty:E(this,Re,Uu).call(this)})}addCommands(t){g(this,Mn).add(t),E(this,Re,ci).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,Re,Uu).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...g(this,Tt)],s=()=>{for(const n of t)n.remove()},i=()=>{for(const n of t)E(this,Re,Rb).call(this,n)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=g(this,Ni))==null||t.commitOrRemove()}hasSomethingToControl(){return g(this,Ni)||this.hasSelection}selectAll(){for(const t of g(this,Tt))t.commit();E(this,Re,Eb).call(this,g(this,bs).values())}unselectAll(){if(!(g(this,Ni)&&(g(this,Ni).commitOrRemove(),g(this,Ds)!==Je.NONE))&&this.hasSelection){for(const t of g(this,Tt))t.unselect();g(this,Tt).clear(),E(this,Re,ci).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,s,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;g(this,Da)[0]+=t,g(this,Da)[1]+=s;const[n,o]=g(this,Da),r=[...g(this,Tt)],a=1e3;g(this,Co)&&clearTimeout(g(this,Co)),x(this,Co,setTimeout(()=>{x(this,Co,null),g(this,Da)[0]=g(this,Da)[1]=0,this.addCommands({cmd:()=>{for(const l of r)g(this,bs).has(l.id)&&l.translateInPage(n,o)},undo:()=>{for(const l of r)g(this,bs).has(l.id)&&l.translateInPage(-n,-o)},mustExec:!1})},a));for(const l of r)l.translateInPage(t,s)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,po,new Map);for(const t of g(this,Tt))g(this,po).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!g(this,po))return!1;this.disableUserSelect(!1);const t=g(this,po);x(this,po,null);let s=!1;for(const[{x:n,y:o,pageIndex:r},a]of t)a.newX=n,a.newY=o,a.newPageIndex=r,s||(s=n!==a.savedX||o!==a.savedY||r!==a.savedPageIndex);if(!s)return!1;const i=(n,o,r,a)=>{if(g(this,bs).has(n.id)){const l=g(this,Gs).get(a);l?n._setParentAndPosition(l,o,r):(n.pageIndex=a,n.x=o,n.y=r)}};return this.addCommands({cmd:()=>{for(const[n,{newX:o,newY:r,newPageIndex:a}]of t)i(n,o,r,a)},undo:()=>{for(const[n,{savedX:o,savedY:r,savedPageIndex:a}]of t)i(n,o,r,a)},mustExec:!0}),!0}dragSelectedEditors(t,s){if(g(this,po))for(const i of g(this,po).keys())i.drag(t,s)}rebuild(t){if(t.parent===null){const s=this.getLayer(t.pageIndex);s?(s.changeParent(t),s.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||g(this,Tt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return g(this,Ni)===t}getActive(){return g(this,Ni)}getMode(){return g(this,Ds)}get imageManager(){return vt(this,"imageManager",new Cb)}getSelectionBoxes(t){if(!t)return null;const s=document.getSelection();for(let c=0,d=s.rangeCount;c<d;c++)if(!t.contains(s.getRangeAt(c).commonAncestorContainer))return null;const{x:i,y:n,width:o,height:r}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(c,d,h,u)=>({x:(d-n)/r,y:1-(c+h-i)/o,width:u/r,height:h/o});break;case"180":a=(c,d,h,u)=>({x:1-(c+h-i)/o,y:1-(d+u-n)/r,width:h/o,height:u/r});break;case"270":a=(c,d,h,u)=>({x:1-(d+u-n)/r,y:(c-i)/o,width:u/r,height:h/o});break;default:a=(c,d,h,u)=>({x:(c-i)/o,y:(d-n)/r,width:h/o,height:u/r});break}const l=[];for(let c=0,d=s.rangeCount;c<d;c++){const h=s.getRangeAt(c);if(!h.collapsed)for(const{x:u,y:f,width:p,height:m}of h.getClientRects())p===0||m===0||l.push(a(u,f,p,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:s}){(g(this,dh)||x(this,dh,new Map)).set(t,s)}removeChangedExistingAnnotation({annotationElementId:t}){var s;(s=g(this,dh))==null||s.delete(t)}renderAnnotationElement(t){var n;const s=(n=g(this,dh))==null?void 0:n.get(t.data.id);if(!s)return;const i=g(this,cr).getRawValue(s);i&&(g(this,Ds)===Je.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}};lh=new WeakMap,Ni=new WeakMap,bs=new WeakMap,Gs=new WeakMap,ch=new WeakMap,cr=new WeakMap,dh=new WeakMap,Mn=new WeakMap,Ea=new WeakMap,hh=new WeakMap,ql=new WeakMap,po=new WeakMap,kn=new WeakMap,Yl=new WeakMap,sf=new WeakMap,nf=new WeakMap,uh=new WeakMap,of=new WeakMap,mo=new WeakMap,Aa=new WeakMap,gh=new WeakMap,Fa=new WeakMap,vo=new WeakMap,$v=new WeakMap,Pa=new WeakMap,rf=new WeakMap,Ta=new WeakMap,Xl=new WeakMap,af=new WeakMap,lf=new WeakMap,Ds=new WeakMap,Tt=new WeakMap,dr=new WeakMap,Ql=new WeakMap,cf=new WeakMap,df=new WeakMap,Da=new WeakMap,Co=new WeakMap,hr=new WeakMap,hf=new WeakMap,cn=new WeakMap,Re=new WeakSet,gm=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},bb=function(t){const{currentLayer:s}=this;if(s.hasTextLayer(t))return s;for(const i of g(this,Gs).values())if(i.hasTextLayer(t))return i;return null},SF=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=E(this,Re,gm).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(i);n&&(g(this,vo)||x(this,vo,new VO(this)),g(this,vo).show(i,n,this.direction==="ltr"))},xF=function(){var o,r,a;const t=document.getSelection();if(!t||t.isCollapsed){g(this,dr)&&((o=g(this,vo))==null||o.hide(),x(this,dr,null),E(this,Re,ci).call(this,{hasSelectedText:!1}));return}const{anchorNode:s}=t;if(s===g(this,dr))return;const n=E(this,Re,gm).call(this,t).closest(".textLayer");if(!n){g(this,dr)&&((r=g(this,vo))==null||r.hide(),x(this,dr,null),E(this,Re,ci).call(this,{hasSelectedText:!1}));return}if((a=g(this,vo))==null||a.hide(),x(this,dr,s),E(this,Re,ci).call(this,{hasSelectedText:!0}),!(g(this,Ds)!==Je.HIGHLIGHT&&g(this,Ds)!==Je.NONE)&&(g(this,Ds)===Je.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,Fa,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=g(this,Ds)===Je.HIGHLIGHT?E(this,Re,bb).call(this,n):null;l==null||l.toggleDrawing();const c=new AbortController,d=this.combinedSignal(c),h=u=>{u.type==="pointerup"&&u.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),u.type==="pointerup"&&E(this,Re,fm).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}},fm=function(t=""){g(this,Ds)===Je.HIGHLIGHT?this.highlightSelection(t):g(this,sf)&&E(this,Re,SF).call(this)},RF=function(){document.addEventListener("selectionchange",E(this,Re,xF).bind(this),{signal:this._signal})},EF=function(){if(g(this,Aa))return;x(this,Aa,new AbortController);const t=this.combinedSignal(g(this,Aa));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},AF=function(){var t;(t=g(this,Aa))==null||t.abort(),x(this,Aa,null)},yb=function(){if(g(this,Ta))return;x(this,Ta,new AbortController);const t=this.combinedSignal(g(this,Ta));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},FF=function(){var t;(t=g(this,Ta))==null||t.abort(),x(this,Ta,null)},Sb=function(){if(g(this,Ea))return;x(this,Ea,new AbortController);const t=this.combinedSignal(g(this,Ea));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},xb=function(){var t;(t=g(this,Ea))==null||t.abort(),x(this,Ea,null)},PF=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},ci=function(t){Object.entries(t).some(([i,n])=>g(this,df)[i]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(g(this,df),t)}),g(this,Ds)===Je.HIGHLIGHT&&t.hasSelectedEditor===!1&&E(this,Re,ua).call(this,[[qe.HIGHLIGHT_FREE,!0]]))},ua=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},TF=async function(){if(!g(this,Pa)){x(this,Pa,!0);const t=[];for(const s of g(this,Gs).values())t.push(s.enable());await Promise.all(t);for(const s of g(this,bs).values())s.enable()}},DF=function(){if(this.unselectAll(),g(this,Pa)){x(this,Pa,!1);for(const t of g(this,Gs).values())t.disable();for(const t of g(this,bs).values())t.disable()}},Rb=function(t){const s=g(this,Gs).get(t.pageIndex);s?s.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},_F=function(){let t=null;for(t of g(this,Tt));return t},Uu=function(){if(g(this,bs).size===0)return!0;if(g(this,bs).size===1)for(const t of g(this,bs).values())return t.isEmpty();return!1},Eb=function(t){for(const s of g(this,Tt))s.unselect();g(this,Tt).clear();for(const s of t)s.isEmpty()||(g(this,Tt).add(s),s.select());E(this,Re,ci).call(this,{hasSelectedEditor:this.hasSelection})},Ge(Gd,"TRANSLATE_SMALL",1),Ge(Gd,"TRANSLATE_BIG",10);let Jc=Gd;var _s,wo,In,fh,bo,Hi,ph,yo,xi,ur,Jl,So,_a,Jn,ju,pm;const di=class di{constructor(t){P(this,Jn);P(this,_s,null);P(this,wo,!1);P(this,In,null);P(this,fh,null);P(this,bo,null);P(this,Hi,null);P(this,ph,!1);P(this,yo,null);P(this,xi,null);P(this,ur,null);P(this,Jl,null);P(this,So,!1);x(this,xi,t),x(this,So,t._uiManager.useNewAltTextFlow),g(di,_a)||x(di,_a,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){di._l10n??(di._l10n=t)}async render(){const t=x(this,In,document.createElement("button"));t.className="altText",t.tabIndex="0";const s=x(this,fh,document.createElement("span"));t.append(s),g(this,So)?(t.classList.add("new"),t.setAttribute("data-l10n-id",g(di,_a).missing),s.setAttribute("data-l10n-id",g(di,_a)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),s.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=g(this,xi)._uiManager._signal;t.addEventListener("contextmenu",Sn,{signal:i}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const n=o=>{o.preventDefault(),g(this,xi)._uiManager.editAltText(g(this,xi)),g(this,So)&&g(this,xi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:g(this,Jn,ju)}})};return t.addEventListener("click",n,{capture:!0,signal:i}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(x(this,ph,!0),n(o))},{signal:i}),await E(this,Jn,pm).call(this),t}finish(){g(this,In)&&(g(this,In).focus({focusVisible:g(this,ph)}),x(this,ph,!1))}isEmpty(){return g(this,So)?g(this,_s)===null:!g(this,_s)&&!g(this,wo)}hasData(){return g(this,So)?g(this,_s)!==null||!!g(this,ur):this.isEmpty()}get guessedText(){return g(this,ur)}async setGuessedText(t){g(this,_s)===null&&(x(this,ur,t),x(this,Jl,await di._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),E(this,Jn,pm).call(this))}toggleAltTextBadge(t=!1){var s;if(!g(this,So)||g(this,_s)){(s=g(this,yo))==null||s.remove(),x(this,yo,null);return}if(!g(this,yo)){const i=x(this,yo,document.createElement("div"));i.className="noAltTextBadge",g(this,xi).div.append(i)}g(this,yo).classList.toggle("hidden",!t)}serialize(t){let s=g(this,_s);return!t&&g(this,ur)===s&&(s=g(this,Jl)),{altText:s,decorative:g(this,wo),guessedText:g(this,ur),textWithDisclaimer:g(this,Jl)}}get data(){return{altText:g(this,_s),decorative:g(this,wo)}}set data({altText:t,decorative:s,guessedText:i,textWithDisclaimer:n,cancel:o=!1}){i&&(x(this,ur,i),x(this,Jl,n)),!(g(this,_s)===t&&g(this,wo)===s)&&(o||(x(this,_s,t),x(this,wo,s)),E(this,Jn,pm).call(this))}toggle(t=!1){g(this,In)&&(!t&&g(this,Hi)&&(clearTimeout(g(this,Hi)),x(this,Hi,null)),g(this,In).disabled=!t)}shown(){g(this,xi)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:g(this,Jn,ju)}})}destroy(){var t,s;(t=g(this,In))==null||t.remove(),x(this,In,null),x(this,fh,null),x(this,bo,null),(s=g(this,yo))==null||s.remove(),x(this,yo,null)}};_s=new WeakMap,wo=new WeakMap,In=new WeakMap,fh=new WeakMap,bo=new WeakMap,Hi=new WeakMap,ph=new WeakMap,yo=new WeakMap,xi=new WeakMap,ur=new WeakMap,Jl=new WeakMap,So=new WeakMap,_a=new WeakMap,Jn=new WeakSet,ju=function(){return g(this,_s)&&"added"||g(this,_s)===null&&this.guessedText&&"review"||"missing"},pm=async function(){var n,o,r;const t=g(this,In);if(!t)return;if(g(this,So)){if(t.classList.toggle("done",!!g(this,_s)),t.setAttribute("data-l10n-id",g(di,_a)[g(this,Jn,ju)]),(n=g(this,fh))==null||n.setAttribute("data-l10n-id",g(di,_a)[`${g(this,Jn,ju)}-label`]),!g(this,_s)){(o=g(this,bo))==null||o.remove();return}}else{if(!g(this,_s)&&!g(this,wo)){t.classList.remove("done"),(r=g(this,bo))==null||r.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let s=g(this,bo);if(!s){x(this,bo,s=document.createElement("span")),s.className="tooltip",s.setAttribute("role","tooltip"),s.id=`alt-text-tooltip-${g(this,xi).id}`;const a=100,l=g(this,xi)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(g(this,Hi)),x(this,Hi,null)},{once:!0}),t.addEventListener("mouseenter",()=>{x(this,Hi,setTimeout(()=>{x(this,Hi,null),g(this,bo).classList.add("show"),g(this,xi)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),t.addEventListener("mouseleave",()=>{var c;g(this,Hi)&&(clearTimeout(g(this,Hi)),x(this,Hi,null)),(c=g(this,bo))==null||c.classList.remove("show")},{signal:l})}g(this,wo)?s.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(s.removeAttribute("data-l10n-id"),s.textContent=g(this,_s)),s.parentNode||t.append(s);const i=g(this,xi).getImageForAltText();i==null||i.setAttribute("aria-describedby",s.id)},P(di,_a,null),Ge(di,"_l10n",null);let cv=di;var Zl,Ln,Qt,mh,ec,Vs,tc,Ma,uf,sc,ka,gf,ic,gr,xo,vh,Ch,dn,ff,Uv,tt,Ab,pf,Fb,Pb,MF,kF,Tb,Db,_b,IF,Mb,LF,OF,NF,kb,Ku;const At=class At{constructor(t){P(this,tt);P(this,Zl,null);P(this,Ln,null);P(this,Qt,null);P(this,mh,!1);P(this,ec,!1);P(this,Vs,null);P(this,tc,null);P(this,Ma,null);P(this,uf,"");P(this,sc,!1);P(this,ka,null);P(this,gf,!1);P(this,ic,!1);P(this,gr,!1);P(this,xo,null);P(this,vh,0);P(this,Ch,0);P(this,dn,null);Ge(this,"_editToolbar",null);Ge(this,"_initialOptions",Object.create(null));Ge(this,"_initialData",null);Ge(this,"_isVisible",!0);Ge(this,"_uiManager",null);Ge(this,"_focusEventsAllowed",!0);P(this,ff,!1);P(this,Uv,At._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:s,rawDims:{pageWidth:i,pageHeight:n,pageX:o,pageY:r}}=this.parent.viewport;this.rotation=s,this.pageRotation=(360+s-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[o,r];const[a,l]=this.parentDimensions;this.x=t.x/a,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=At.prototype._resizeWithKeyboard,s=Jc.TRANSLATE_SMALL,i=Jc.TRANSLATE_BIG;return vt(this,"_resizerKeyboardManager",new xp([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-s,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[s,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-s]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,s]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],At.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return vt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const s=new UO({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});s.annotationElementId=t.annotationElementId,s.deleted=!0,s._uiManager.addToAnnotationStorage(s)}static initialize(t,s){if(At._l10n??(At._l10n=t),At._l10nResizer||(At._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),At._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);At._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,s){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,s){zt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return g(this,ff)}set _isDraggable(t){var s;x(this,ff,t),(s=this.div)==null||s.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,s]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*s/(t*2),this.y+=this.width*t/(s*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*s/(t*2),this.y-=this.width*t/(s*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=g(this,Uv)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):E(this,tt,Ku).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(g(this,sc)?x(this,sc,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const s=t.relatedTarget;s!=null&&s.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,s,i,n){const[o,r]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(t+i)/o,this.y=(s+n)/r,this.fixAndSetPosition()}translate(t,s){E(this,tt,Ab).call(this,this.parentDimensions,t,s)}translateInPage(t,s){g(this,ka)||x(this,ka,[this.x,this.y]),E(this,tt,Ab).call(this,this.pageDimensions,t,s),this.div.scrollIntoView({block:"nearest"})}drag(t,s){g(this,ka)||x(this,ka,[this.x,this.y]);const[i,n]=this.parentDimensions;if(this.x+=t/i,this.y+=s/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:c,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:r}=this;const[a,l]=this.getBaseTranslation();o+=a,r+=l,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*r).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!g(this,ka)&&(g(this,ka)[0]!==this.x||g(this,ka)[1]!==this.y)}getBaseTranslation(){const[t,s]=this.parentDimensions,{_borderLineWidth:i}=At,n=i/t,o=i/s;switch(this.rotation){case 90:return[-n,o];case 180:return[n,o];case 270:return[n,-o];default:return[-n,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[s,i]=this.pageDimensions;let{x:n,y:o,width:r,height:a}=this;if(r*=s,a*=i,n*=s,o*=i,this._mustFixPosition)switch(t){case 0:n=Math.max(0,Math.min(s-r,n)),o=Math.max(0,Math.min(i-a,o));break;case 90:n=Math.max(0,Math.min(s-a,n)),o=Math.min(i,Math.max(r,o));break;case 180:n=Math.min(s,Math.max(r,n)),o=Math.min(i,Math.max(a,o));break;case 270:n=Math.min(s,Math.max(a,n)),o=Math.max(0,Math.min(i-r,o));break}this.x=n/=s,this.y=o/=i;const[l,c]=this.getBaseTranslation();n+=l,o+=c;const{style:d}=this.div;d.left=`${(100*n).toFixed(2)}%`,d.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,s){var i;return E(i=At,pf,Fb).call(i,t,s,this.parentRotation)}pageTranslationToScreen(t,s){var i;return E(i=At,pf,Fb).call(i,t,s,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[s,i]}=this;return[s*t,i*t]}setDims(t,s){const[i,n]=this.parentDimensions;this.div.style.width=`${(100*t/i).toFixed(2)}%`,g(this,ec)||(this.div.style.height=`${(100*s/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:s,width:i}=t,n=i.endsWith("%"),o=!g(this,ec)&&s.endsWith("%");if(n&&o)return;const[r,a]=this.parentDimensions;n||(t.width=`${(100*parseFloat(i)/r).toFixed(2)}%`),!g(this,ec)&&!o&&(t.height=`${(100*parseFloat(s)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=g(this,Qt))==null||t.finish()}async addEditToolbar(){return this._editToolbar||g(this,ic)?this._editToolbar:(this._editToolbar=new mb(this),this.div.append(this._editToolbar.render()),g(this,Qt)&&await this._editToolbar.addAltText(g(this,Qt)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=g(this,Qt))==null||t.destroy())}addContainer(t){var i;const s=(i=this._editToolbar)==null?void 0:i.div;s?s.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){g(this,Qt)||(cv.initialize(At._l10n),x(this,Qt,new cv(this)),g(this,Zl)&&(g(this,Qt).data=g(this,Zl),x(this,Zl,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=g(this,Qt))==null?void 0:t.data}set altTextData(t){g(this,Qt)&&(g(this,Qt).data=t)}get guessedAltText(){var t;return(t=g(this,Qt))==null?void 0:t.guessedText}async setGuessedAltText(t){var s;await((s=g(this,Qt))==null?void 0:s.setGuessedText(t))}serializeAltText(t){var s;return(s=g(this,Qt))==null?void 0:s.serialize(t)}hasAltText(){return!!g(this,Qt)&&!g(this,Qt).isEmpty()}hasAltTextData(){var t;return((t=g(this,Qt))==null?void 0:t.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=g(this,mh)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),E(this,tt,Mb).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*s/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[i,n]=this.getInitialTranslation();return this.translate(i,n),lv(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:s}=pi.platform;if(t.button!==0||t.ctrlKey&&s){t.preventDefault();return}if(x(this,sc,!0),this._isDraggable){E(this,tt,IF).call(this,t);return}E(this,tt,_b).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){g(this,xo)&&clearTimeout(g(this,xo)),x(this,xo,setTimeout(()=>{var t;x(this,xo,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,s,i){t.changeParent(this),this.x=s,this.y=i,this.fixAndSetPosition()}getRect(t,s,i=this.rotation){const n=this.parentScale,[o,r]=this.pageDimensions,[a,l]=this.pageTranslation,c=t/n,d=s/n,h=this.x*o,u=this.y*r,f=this.width*o,p=this.height*r;switch(i){case 0:return[h+c+a,r-u-d-p+l,h+c+f+a,r-u-d+l];case 90:return[h+d+a,r-u+c+l,h+d+p+a,r-u+c+f+l];case 180:return[h-c-f+a,r-u+d+l,h-c+a,r-u+d+p+l];case 270:return[h-d-p+a,r-u-c-f+l,h-d+a,r-u-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,s){const[i,n,o,r]=t,a=o-i,l=r-n;switch(this.rotation){case 0:return[i,s-r,a,l];case 90:return[i,s-n,l,a];case 180:return[o,s-n,a,l];case 270:return[o,s-r,l,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){x(this,ic,!0)}disableEditMode(){x(this,ic,!1)}isInEditMode(){return g(this,ic)}shouldGetKeyboardEvents(){return g(this,gr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){E(this,tt,Mb).call(this)}rotate(t){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,s=null){zt("An editor must be serializable")}static async deserialize(t,s,i){const n=new this.prototype.constructor({parent:s,id:s.getNextId(),uiManager:i});n.rotation=t.rotation,x(n,Zl,t.accessibilityData);const[o,r]=n.pageDimensions,[a,l,c,d]=n.getRectInCurrentCoords(t.rect,r);return n.x=a/o,n.y=l/r,n.width=c/o,n.height=d/r,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t;if((t=g(this,Ma))==null||t.abort(),x(this,Ma,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),g(this,xo)&&(clearTimeout(g(this,xo)),x(this,xo,null)),E(this,tt,Ku).call(this),this.removeEditToolbar(),g(this,dn)){for(const s of g(this,dn).values())clearTimeout(s);x(this,dn,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,tt,MF).call(this),g(this,Vs).classList.remove("hidden"),lv(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),x(this,tc,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const s=g(this,Vs).children;if(!g(this,Ln)){x(this,Ln,Array.from(s));const r=E(this,tt,LF).bind(this),a=E(this,tt,OF).bind(this),l=this._uiManager._signal;for(const c of g(this,Ln)){const d=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",r,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",E(this,tt,NF).bind(this,d),{signal:l}),c.setAttribute("data-l10n-id",At._l10nResizer[d])}}const i=g(this,Ln)[0];let n=0;for(const r of s){if(r===i)break;n++}const o=(360-this.rotation+this.parentRotation)%360/90*(g(this,Ln).length/4);if(o!==n){if(o<n)for(let a=0;a<n-o;a++)g(this,Vs).append(g(this,Vs).firstChild);else if(o>n)for(let a=0;a<o-n;a++)g(this,Vs).firstChild.before(g(this,Vs).lastChild);let r=0;for(const a of s){const c=g(this,Ln)[r++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",At._l10nResizer[c])}}E(this,tt,kb).call(this,0),x(this,gr,!0),g(this,Vs).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,s){g(this,gr)&&E(this,tt,Db).call(this,g(this,uf),{movementX:t,movementY:s})}_stopResizingWithKeyboard(){E(this,tt,Ku).call(this),this.div.focus()}select(){var t,s,i;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var n,o;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(s=this._editToolbar)==null||s.show(),(i=g(this,Qt))==null||i.toggleAltTextBadge(!1)}unselect(){var t,s,i,n,o;(t=g(this,Vs))==null||t.classList.add("hidden"),(s=this.div)==null||s.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(n=this._editToolbar)==null||n.hide(),(o=g(this,Qt))==null||o.toggleAltTextBadge(!0)}updateParams(t,s){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return g(this,gf)}set isEditing(t){x(this,gf,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,s){x(this,ec,!0);const i=t/s,{style:n}=this.div;n.aspectRatio=i,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,s=!1){if(s){g(this,dn)||x(this,dn,new Map);const{action:i}=t;let n=g(this,dn).get(i);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),g(this,dn).delete(i),g(this,dn).size===0&&x(this,dn,null)},At._telemetryTimeout),g(this,dn).set(i,n);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),x(this,mh,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,mh,!0)}renderAnnotationElement(t){let s=t.container.querySelector(".annotationContent");if(!s)s=document.createElement("div"),s.classList.add("annotationContent",this.editorType),t.container.prepend(s);else if(s.nodeName==="CANVAS"){const i=s;s=document.createElement("div"),s.classList.add("annotationContent",this.editorType),i.before(s)}return s}resetAnnotationElement(t){const{firstChild:s}=t.container;(s==null?void 0:s.nodeName)==="DIV"&&s.classList.contains("annotationContent")&&s.remove()}};Zl=new WeakMap,Ln=new WeakMap,Qt=new WeakMap,mh=new WeakMap,ec=new WeakMap,Vs=new WeakMap,tc=new WeakMap,Ma=new WeakMap,uf=new WeakMap,sc=new WeakMap,ka=new WeakMap,gf=new WeakMap,ic=new WeakMap,gr=new WeakMap,xo=new WeakMap,vh=new WeakMap,Ch=new WeakMap,dn=new WeakMap,ff=new WeakMap,Uv=new WeakMap,tt=new WeakSet,Ab=function([t,s],i,n){[i,n]=this.screenToPageTranslation(i,n),this.x+=i/t,this.y+=n/s,this.fixAndSetPosition()},pf=new WeakSet,Fb=function(t,s,i){switch(i){case 90:return[s,-t];case 180:return[-t,-s];case 270:return[-s,t];default:return[t,s]}},Pb=function(t){switch(t){case 90:{const[s,i]=this.pageDimensions;return[0,-s/i,i/s,0]}case 180:return[-1,0,0,-1];case 270:{const[s,i]=this.pageDimensions;return[0,s/i,-i/s,0]}default:return[1,0,0,1]}},MF=function(){if(g(this,Vs))return;x(this,Vs,document.createElement("div")),g(this,Vs).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],s=this._uiManager._signal;for(const i of t){const n=document.createElement("div");g(this,Vs).append(n),n.classList.add("resizer",i),n.setAttribute("data-resizer-name",i),n.addEventListener("pointerdown",E(this,tt,kF).bind(this,i),{signal:s}),n.addEventListener("contextmenu",Sn,{signal:s}),n.tabIndex=-1}this.div.prepend(g(this,Vs))},kF=function(t,s){var p;s.preventDefault();const{isMac:i}=pi.platform;if(s.button!==0||s.ctrlKey&&i)return;(p=g(this,Qt))==null||p.toggle(!1);const n=this._isDraggable;this._isDraggable=!1;const o=new AbortController,r=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,tt,Db).bind(this,t),{passive:!0,capture:!0,signal:r}),window.addEventListener("contextmenu",Sn,{signal:r});const a=this.x,l=this.y,c=this.width,d=this.height,h=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(s.target).cursor;const f=()=>{var m;o.abort(),this.parent.togglePointerEvents(!0),(m=g(this,Qt))==null||m.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=h,this.div.style.cursor=u,E(this,tt,Tb).call(this,a,l,c,d)};window.addEventListener("pointerup",f,{signal:r}),window.addEventListener("blur",f,{signal:r})},Tb=function(t,s,i,n){const o=this.x,r=this.y,a=this.width,l=this.height;o===t&&r===s&&a===i&&l===n||this.addCommands({cmd:()=>{this.width=a,this.height=l,this.x=o,this.y=r;const[c,d]=this.parentDimensions;this.setDims(c*a,d*l),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=n,this.x=t,this.y=s;const[c,d]=this.parentDimensions;this.setDims(c*i,d*n),this.fixAndSetPosition()},mustExec:!0})},Db=function(t,s){const[i,n]=this.parentDimensions,o=this.x,r=this.y,a=this.width,l=this.height,c=At.MIN_SIZE/i,d=At.MIN_SIZE/n,h=te=>Math.round(te*1e4)/1e4,u=E(this,tt,Pb).call(this,this.rotation),f=(te,K)=>[u[0]*te+u[2]*K,u[1]*te+u[3]*K],p=E(this,tt,Pb).call(this,360-this.rotation),m=(te,K)=>[p[0]*te+p[2]*K,p[1]*te+p[3]*K];let v,C,b=!1,y=!1;switch(t){case"topLeft":b=!0,v=(te,K)=>[0,0],C=(te,K)=>[te,K];break;case"topMiddle":v=(te,K)=>[te/2,0],C=(te,K)=>[te/2,K];break;case"topRight":b=!0,v=(te,K)=>[te,0],C=(te,K)=>[0,K];break;case"middleRight":y=!0,v=(te,K)=>[te,K/2],C=(te,K)=>[0,K/2];break;case"bottomRight":b=!0,v=(te,K)=>[te,K],C=(te,K)=>[0,0];break;case"bottomMiddle":v=(te,K)=>[te/2,K],C=(te,K)=>[te/2,0];break;case"bottomLeft":b=!0,v=(te,K)=>[0,K],C=(te,K)=>[te,0];break;case"middleLeft":y=!0,v=(te,K)=>[0,K/2],C=(te,K)=>[te,K/2];break}const S=v(a,l),R=C(a,l);let A=f(...R);const F=h(o+A[0]),T=h(r+A[1]);let k=1,N=1,[I,O]=this.screenToPageTranslation(s.movementX,s.movementY);if([I,O]=m(I/i,O/n),b){const te=Math.hypot(a,l);k=N=Math.max(Math.min(Math.hypot(R[0]-S[0]-I,R[1]-S[1]-O)/te,1/a,1/l),c/a,d/l)}else y?k=Math.max(c,Math.min(1,Math.abs(R[0]-S[0]-I)))/a:N=Math.max(d,Math.min(1,Math.abs(R[1]-S[1]-O)))/l;const V=h(a*k),ee=h(l*N);A=f(...C(V,ee));const G=F-A[0],ne=T-A[1];this.width=V,this.height=ee,this.x=G,this.y=ne,this.setDims(i*V,n*ee),this.fixAndSetPosition()},_b=function(t){const{isMac:s}=pi.platform;t.ctrlKey&&!s||t.shiftKey||t.metaKey&&s?this.parent.toggleSelected(this):this.parent.setSelected(this)},IF=function(t){const{isSelected:s}=this;this._uiManager.setUpDragSession();const i=new AbortController,n=this._uiManager.combinedSignal(i);if(s){this.div.classList.add("moving"),x(this,vh,t.clientX),x(this,Ch,t.clientY);const r=a=>{const{clientX:l,clientY:c}=a,[d,h]=this.screenToPageTranslation(l-g(this,vh),c-g(this,Ch));x(this,vh,l),x(this,Ch,c),this._uiManager.dragSelectedEditors(d,h)};window.addEventListener("pointermove",r,{passive:!0,capture:!0,signal:n})}const o=()=>{i.abort(),s&&this.div.classList.remove("moving"),x(this,sc,!1),this._uiManager.endDragSession()||E(this,tt,_b).call(this,t)};window.addEventListener("pointerup",o,{signal:n}),window.addEventListener("blur",o,{signal:n})},Mb=function(){if(g(this,Ma)||!this.div)return;x(this,Ma,new AbortController);const t=this._uiManager.combinedSignal(g(this,Ma));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},LF=function(t){At._resizerKeyboardManager.exec(this,t)},OF=function(t){var s;g(this,gr)&&((s=t.relatedTarget)==null?void 0:s.parentNode)!==g(this,Vs)&&E(this,tt,Ku).call(this)},NF=function(t){x(this,uf,g(this,gr)?t:"")},kb=function(t){if(g(this,Ln))for(const s of g(this,Ln))s.tabIndex=t},Ku=function(){if(x(this,gr,!1),E(this,tt,kb).call(this,-1),g(this,tc)){const{savedX:t,savedY:s,savedWidth:i,savedHeight:n}=g(this,tc);E(this,tt,Tb).call(this,t,s,i,n),x(this,tc,null)}},P(At,pf),Ge(At,"_l10n",null),Ge(At,"_l10nResizer",null),Ge(At,"_borderLineWidth",-1),Ge(At,"_colorManager",new wb),Ge(At,"_zIndex",1),Ge(At,"_telemetryTimeout",1e3);let _t=At;class UO extends _t{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Hx=3285377520,en=4294901760,oo=65535;class HF{constructor(t){this.h1=t?t&4294967295:Hx,this.h2=t?t&4294967295:Hx}update(t){let s,i;if(typeof t=="string"){s=new Uint8Array(t.length*2),i=0;for(let m=0,v=t.length;m<v;m++){const C=t.charCodeAt(m);C<=255?s[i++]=C:(s[i++]=C>>>8,s[i++]=C&255)}}else if(ArrayBuffer.isView(t))s=t.slice(),i=s.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=i>>2,o=i-n*4,r=new Uint32Array(s.buffer,0,n);let a=0,l=0,c=this.h1,d=this.h2;const h=3432918353,u=461845907,f=h&oo,p=u&oo;for(let m=0;m<n;m++)m&1?(a=r[m],a=a*h&en|a*f&oo,a=a<<15|a>>>17,a=a*u&en|a*p&oo,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=r[m],l=l*h&en|l*f&oo,l=l<<15|l>>>17,l=l*u&en|l*p&oo,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,o){case 3:a^=s[n*4+2]<<16;case 2:a^=s[n*4+1]<<8;case 1:a^=s[n*4],a=a*h&en|a*f&oo,a=a<<15|a>>>17,a=a*u&en|a*p&oo,n&1?c^=a:d^=a}this.h1=c,this.h2=d}hexdigest(){let t=this.h1,s=this.h2;return t^=s>>>1,t=t*3981806797&en|t*36045&oo,s=s*4283543511&en|((s<<16|t>>>16)*2950163797&en)>>>16,t^=s>>>1,t=t*444984403&en|t*60499&oo,s=s*3301882366&en|((s<<16|t>>>16)*3120437893&en)>>>16,t^=s>>>1,(t>>>0).toString(16).padStart(8,"0")+(s>>>0).toString(16).padStart(8,"0")}}const Ib=Object.freeze({map:null,hash:"",transfer:void 0});var nc,oc,Ms,jv,BF;class $S{constructor(){P(this,jv);P(this,nc,!1);P(this,oc,null);P(this,Ms,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,s){const i=g(this,Ms).get(t);return i===void 0?s:Object.assign(s,i)}getRawValue(t){return g(this,Ms).get(t)}remove(t){if(g(this,Ms).delete(t),g(this,Ms).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const s of g(this,Ms).values())if(s instanceof _t)return;this.onAnnotationEditor(null)}}setValue(t,s){const i=g(this,Ms).get(t);let n=!1;if(i!==void 0)for(const[o,r]of Object.entries(s))i[o]!==r&&(n=!0,i[o]=r);else n=!0,g(this,Ms).set(t,s);n&&E(this,jv,BF).call(this),s instanceof _t&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(s.constructor._type)}has(t){return g(this,Ms).has(t)}getAll(){return g(this,Ms).size>0?HS(g(this,Ms)):null}setAll(t){for(const[s,i]of Object.entries(t))this.setValue(s,i)}get size(){return g(this,Ms).size}resetModified(){g(this,nc)&&(x(this,nc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new GF(this)}get serializable(){if(g(this,Ms).size===0)return Ib;const t=new Map,s=new HF,i=[],n=Object.create(null);let o=!1;for(const[r,a]of g(this,Ms)){const l=a instanceof _t?a.serialize(!1,n):a;l&&(t.set(r,l),s.update(`${r}:${JSON.stringify(l)}`),o||(o=!!l.bitmap))}if(o)for(const r of t.values())r.bitmap&&i.push(r.bitmap);return t.size>0?{map:t,hash:s.hexdigest(),transfer:i}:Ib}get editorStats(){let t=null;const s=new Map;for(const i of g(this,Ms).values()){if(!(i instanceof _t))continue;const n=i.telemetryFinalData;if(!n)continue;const{type:o}=n;s.has(o)||s.set(o,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const r=t[o]||(t[o]=new Map);for(const[a,l]of Object.entries(n)){if(a==="type")continue;let c=r.get(a);c||(c=new Map,r.set(a,c));const d=c.get(l)??0;c.set(l,d+1)}}for(const[i,n]of s)t[i]=n.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){x(this,oc,null)}get modifiedIds(){if(g(this,oc))return g(this,oc);const t=[];for(const s of g(this,Ms).values())!(s instanceof _t)||!s.annotationElementId||!s.serialize()||t.push(s.annotationElementId);return x(this,oc,{ids:new Set(t),hash:t.join(",")})}}nc=new WeakMap,oc=new WeakMap,Ms=new WeakMap,jv=new WeakSet,BF=function(){g(this,nc)||(x(this,nc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var mf;class GF extends $S{constructor(s){super();P(this,mf);const{map:i,hash:n,transfer:o}=s.serializable,r=structuredClone(i,o?{transfer:o}:null);x(this,mf,{map:r,hash:n,transfer:o})}get print(){zt("Should not call PrintAnnotationStorage.print")}get serializable(){return g(this,mf)}get modifiedIds(){return vt(this,"modifiedIds",{ids:new Set,hash:""})}}mf=new WeakMap;var wh;class jO{constructor({ownerDocument:t=globalThis.document,styleElement:s=null}){P(this,wh,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const s=this.styleElement.sheet;s.insertRule(t,s.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),g(this,wh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:s}){if(!(!t||g(this,wh).has(t.loadedName))){if(Rs(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:n,style:o}=t,r=new FontFace(i,n,o);this.addNativeFontFace(r);try{await r.load(),g(this,wh).add(i),s==null||s(t)}catch{it(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}return}zt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(n){throw it(`Failed to load font '${i.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const s=t.createFontFaceRule();if(s){if(this.insertRule(s),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const n=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){var s;const t=!!((s=this._document)!=null&&s.fonts);return vt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(ri||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),vt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function s(){for(Rs(!n.done,"completeRequest() cannot be called twice."),n.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,n={done:!1,complete:s,callback:t};return i.push(n),n}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return vt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,s){function i(S,R){return S.charCodeAt(R)<<24|S.charCodeAt(R+1)<<16|S.charCodeAt(R+2)<<8|S.charCodeAt(R+3)&255}function n(S,R,A,F){const T=S.substring(0,R),k=S.substring(R+A);return T+F+k}let o,r;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function d(S,R){if(++c>30){it("Load test font never loaded."),R();return}if(l.font="30px "+S,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(d.bind(null,S,R))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let u=this._loadTestFont;u=n(u,976,h.length,h);const p=16,m=1482184792;let v=i(u,p);for(o=0,r=h.length-3;o<r;o+=4)v=v-m+i(h,o)|0;o<h.length&&(v=v-m+i(h+"XXX",o)|0),u=n(u,p,4,DO(v));const C=`url(data:font/opentype;base64,${btoa(u)});`,b=`@font-face {font-family:"${h}";src:${C}}`;this.insertRule(b);const y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(const S of[t.loadedName,h]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=S,y.append(R)}this._document.body.append(y),d(h,()=>{y.remove(),s.complete()})}}wh=new WeakMap;class KO{constructor(t,{disableFontFace:s=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this.disableFontFace=s===!0,this._inspectFont=i}createNativeFontFace(){var s;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(s=this._inspectFont)==null||s.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${OO(this.data)});`;let s;if(!this.cssFontInfo)s=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),s}getPathGenerator(t,s){if(this.compiledGlyphs[s]!==void 0)return this.compiledGlyphs[s];let i;try{i=t.get(this.loadedName+"_path_"+s)}catch(o){it(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[s]=function(o,r){};const n=[];for(let o=0,r=i.length;o<r;)switch(i[o++]){case er.BEZIER_CURVE_TO:{const[a,l,c,d,h,u]=i.slice(o,o+6);n.push(f=>f.bezierCurveTo(a,l,c,d,h,u)),o+=6}break;case er.MOVE_TO:{const[a,l]=i.slice(o,o+2);n.push(c=>c.moveTo(a,l)),o+=2}break;case er.LINE_TO:{const[a,l]=i.slice(o,o+2);n.push(c=>c.lineTo(a,l)),o+=2}break;case er.QUADRATIC_CURVE_TO:{const[a,l,c,d]=i.slice(o,o+4);n.push(h=>h.quadraticCurveTo(a,l,c,d)),o+=4}break;case er.RESTORE:n.push(a=>a.restore());break;case er.SAVE:n.push(a=>a.save());break;case er.SCALE:Rs(n.length===2,"Scale command is only valid at the third position.");break;case er.TRANSFORM:{const[a,l,c,d,h,u]=i.slice(o,o+6);n.push(f=>f.transform(a,l,c,d,h,u)),o+=6}break;case er.TRANSLATE:{const[a,l]=i.slice(o,o+2);n.push(c=>c.translate(a,l)),o+=2}break}return this.compiledGlyphs[s]=function(r,a){n[0](r),n[1](r),r.scale(a,-a);for(let l=2,c=n.length;l<c;l++)n[l](r)}}}var vf;class VF{constructor({enableHWA:t=!1}){P(this,vf,!1);x(this,vf,t)}create(t,s){if(t<=0||s<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,s);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!g(this,vf)})}}reset(t,s,i){if(!t.canvas)throw new Error("Canvas is not specified");if(s<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=s,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,s){zt("Abstract method `_createCanvas` called.")}}vf=new WeakMap;class qO extends VF{constructor({ownerDocument:t=globalThis.document,enableHWA:s=!1}){super({enableHWA:s}),this._document=t}_createCanvas(t,s){const i=this._document.createElement("canvas");return i.width=t,i.height=s,i}}class zF{constructor({baseUrl:t=null,isCompressed:s=!0}){this.baseUrl=t,this.isCompressed=s}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const s=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(s).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${s}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class WF extends zF{async _fetch(t){const s=await bC(t,this.isCompressed?"arraybuffer":"text");return s instanceof ArrayBuffer?new Uint8Array(s):wC(s)}}class $F{addFilter(t){return"none"}addHCMFilter(t,s){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,s,i,n,o){return"none"}destroy(t=!1){}}var rc,ac,Ro,fr,ti,Kv,lc,Te,Zs,Ad,Fd,mm,Pd,UF,Lb,Td,qu,Yu,Ob,Xu;class YO extends $F{constructor({docId:s,ownerDocument:i=globalThis.document}){super();P(this,Te);P(this,rc);P(this,ac);P(this,Ro);P(this,fr);P(this,ti);P(this,Kv);P(this,lc,0);x(this,fr,s),x(this,ti,i)}addFilter(s){if(!s)return"none";let i=g(this,Te,Zs).get(s);if(i)return i;const[n,o,r]=E(this,Te,mm).call(this,s),a=s.length===1?n:`${n}${o}${r}`;if(i=g(this,Te,Zs).get(a),i)return g(this,Te,Zs).set(s,i),i;const l=`g_${g(this,fr)}_transfer_map_${li(this,lc)._++}`,c=E(this,Te,Pd).call(this,l);g(this,Te,Zs).set(s,c),g(this,Te,Zs).set(a,c);const d=E(this,Te,Td).call(this,l);return E(this,Te,Yu).call(this,n,o,r,d),c}addHCMFilter(s,i){var p;const n=`${s}-${i}`,o="base";let r=g(this,Te,Ad).get(o);if((r==null?void 0:r.key)===n||(r?((p=r.filter)==null||p.remove(),r.key=n,r.url="none",r.filter=null):(r={key:n,url:"none",filter:null},g(this,Te,Ad).set(o,r)),!s||!i))return r.url;const a=E(this,Te,Xu).call(this,s);s=Ne.makeHexColor(...a);const l=E(this,Te,Xu).call(this,i);if(i=Ne.makeHexColor(...l),g(this,Te,Fd).style.color="",s==="#000000"&&i==="#ffffff"||s===i)return r.url;const c=new Array(256);for(let m=0;m<=255;m++){const v=m/255;c[m]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}const d=c.join(","),h=`g_${g(this,fr)}_hcm_filter`,u=r.filter=E(this,Te,Td).call(this,h);E(this,Te,Yu).call(this,d,d,d,u),E(this,Te,Lb).call(this,u);const f=(m,v)=>{const C=a[m]/255,b=l[m]/255,y=new Array(v+1);for(let S=0;S<=v;S++)y[S]=C+S/v*(b-C);return y.join(",")};return E(this,Te,Yu).call(this,f(0,5),f(1,5),f(2,5),u),r.url=E(this,Te,Pd).call(this,h),r.url}addAlphaFilter(s){let i=g(this,Te,Zs).get(s);if(i)return i;const[n]=E(this,Te,mm).call(this,[s]),o=`alpha_${n}`;if(i=g(this,Te,Zs).get(o),i)return g(this,Te,Zs).set(s,i),i;const r=`g_${g(this,fr)}_alpha_map_${li(this,lc)._++}`,a=E(this,Te,Pd).call(this,r);g(this,Te,Zs).set(s,a),g(this,Te,Zs).set(o,a);const l=E(this,Te,Td).call(this,r);return E(this,Te,Ob).call(this,n,l),a}addLuminosityFilter(s){let i=g(this,Te,Zs).get(s||"luminosity");if(i)return i;let n,o;if(s?([n]=E(this,Te,mm).call(this,[s]),o=`luminosity_${n}`):o="luminosity",i=g(this,Te,Zs).get(o),i)return g(this,Te,Zs).set(s,i),i;const r=`g_${g(this,fr)}_luminosity_map_${li(this,lc)._++}`,a=E(this,Te,Pd).call(this,r);g(this,Te,Zs).set(s,a),g(this,Te,Zs).set(o,a);const l=E(this,Te,Td).call(this,r);return E(this,Te,UF).call(this,l),s&&E(this,Te,Ob).call(this,n,l),a}addHighlightHCMFilter(s,i,n,o,r){var b;const a=`${i}-${n}-${o}-${r}`;let l=g(this,Te,Ad).get(s);if((l==null?void 0:l.key)===a||(l?((b=l.filter)==null||b.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},g(this,Te,Ad).set(s,l)),!i||!n))return l.url;const[c,d]=[i,n].map(E(this,Te,Xu).bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),u=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[f,p]=[o,r].map(E(this,Te,Xu).bind(this));u<h&&([h,u,f,p]=[u,h,p,f]),g(this,Te,Fd).style.color="";const m=(y,S,R)=>{const A=new Array(256),F=(u-h)/R,T=y/255,k=(S-y)/(255*R);let N=0;for(let I=0;I<=R;I++){const O=Math.round(h+I*F),V=T+I*k;for(let ee=N;ee<=O;ee++)A[ee]=V;N=O+1}for(let I=N;I<256;I++)A[I]=A[N-1];return A.join(",")},v=`g_${g(this,fr)}_hcm_${s}_filter`,C=l.filter=E(this,Te,Td).call(this,v);return E(this,Te,Lb).call(this,C),E(this,Te,Yu).call(this,m(f[0],p[0],5),m(f[1],p[1],5),m(f[2],p[2],5),C),l.url=E(this,Te,Pd).call(this,v),l.url}destroy(s=!1){s&&g(this,Te,Ad).size!==0||(g(this,Ro)&&(g(this,Ro).parentNode.parentNode.remove(),x(this,Ro,null)),g(this,ac)&&(g(this,ac).clear(),x(this,ac,null)),x(this,lc,0))}}rc=new WeakMap,ac=new WeakMap,Ro=new WeakMap,fr=new WeakMap,ti=new WeakMap,Kv=new WeakMap,lc=new WeakMap,Te=new WeakSet,Zs=function(){return g(this,ac)||x(this,ac,new Map)},Ad=function(){return g(this,Kv)||x(this,Kv,new Map)},Fd=function(){if(!g(this,Ro)){const s=g(this,ti).createElement("div"),{style:i}=s;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const n=g(this,ti).createElementNS(ir,"svg");n.setAttribute("width",0),n.setAttribute("height",0),x(this,Ro,g(this,ti).createElementNS(ir,"defs")),s.append(n),n.append(g(this,Ro)),g(this,ti).body.append(s)}return g(this,Ro)},mm=function(s){if(s.length===1){const c=s[0],d=new Array(256);for(let u=0;u<256;u++)d[u]=c[u]/255;const h=d.join(",");return[h,h,h]}const[i,n,o]=s,r=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)r[c]=i[c]/255,a[c]=n[c]/255,l[c]=o[c]/255;return[r.join(","),a.join(","),l.join(",")]},Pd=function(s){if(g(this,rc)===void 0){x(this,rc,"");const i=g(this,ti).URL;i!==g(this,ti).baseURI&&(yC(i)?it('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,rc,i.split("#",1)[0]))}return`url(${g(this,rc)}#${s})`},UF=function(s){const i=g(this,ti).createElementNS(ir,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),s.append(i)},Lb=function(s){const i=g(this,ti).createElementNS(ir,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),s.append(i)},Td=function(s){const i=g(this,ti).createElementNS(ir,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",s),g(this,Te,Fd).append(i),i},qu=function(s,i,n){const o=g(this,ti).createElementNS(ir,i);o.setAttribute("type","discrete"),o.setAttribute("tableValues",n),s.append(o)},Yu=function(s,i,n,o){const r=g(this,ti).createElementNS(ir,"feComponentTransfer");o.append(r),E(this,Te,qu).call(this,r,"feFuncR",s),E(this,Te,qu).call(this,r,"feFuncG",i),E(this,Te,qu).call(this,r,"feFuncB",n)},Ob=function(s,i){const n=g(this,ti).createElementNS(ir,"feComponentTransfer");i.append(n),E(this,Te,qu).call(this,n,"feFuncA",s)},Xu=function(s){return g(this,Te,Fd).style.color=s,WS(getComputedStyle(g(this,Te,Fd)).getPropertyValue("color"))};class jF{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const s=`${this.baseUrl}${t}`;return this._fetch(s).catch(i=>{throw new Error(`Unable to load font data at: ${s}`)})}async _fetch(t){zt("Abstract method `_fetch` called.")}}class KF extends jF{async _fetch(t){const s=await bC(t,"arraybuffer");return new Uint8Array(s)}}if(ri){var Nb=Promise.withResolvers(),pg=null;(async()=>{const t=await Ol(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),s=await Ol(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),i=await Ol(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),n=await Ol(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url);let o,r;return new Map(Object.entries({fs:t,http:s,https:i,url:n,canvas:o,path2d:r}))})().then(t=>{pg=t,Nb.resolve()},t=>{it(`loadPackages: ${t}`),pg=new Map,Nb.resolve()})}class ll{static get promise(){return Nb.promise}static get(t){return pg==null?void 0:pg.get(t)}}async function qF(e){const s=await ll.get("fs").promises.readFile(e);return new Uint8Array(s)}class XO extends $F{}class QO extends VF{_createCanvas(t,s){return ll.get("canvas").createCanvas(t,s)}}class JO extends zF{async _fetch(t){return qF(t)}}class ZO extends jF{async _fetch(t){return qF(t)}}const ui={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Hb(e,t){if(!t)return;const s=t[2]-t[0],i=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],s,i),e.clip(n)}class US{getPattern(){zt("Abstract method `getPattern` called.")}}class e2 extends US{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let s;this._type==="axial"?s=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(s=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)s.addColorStop(i[0],i[1]);return s}getPattern(t,s,i,n){let o;if(n===ui.STROKE||n===ui.FILL){const r=s.current.getClippedPathBoundingBox(n,Zt(t))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,l=Math.ceil(r[3]-r[1])||1,c=s.cachedCanvases.getCanvas("pattern",a,l),d=c.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-r[0],-r[1]),i=Ne.transform(i,[1,0,0,1,r[0],r[1]]),d.transform(...s.baseTransform),this.matrix&&d.transform(...this.matrix),Hb(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),o=t.createPattern(c.canvas,"no-repeat");const h=new DOMMatrix(i);o.setTransform(h)}else Hb(t,this._bbox),o=this._createGradient(t);return o}}function JC(e,t,s,i,n,o,r,a){const l=t.coords,c=t.colors,d=e.data,h=e.width*4;let u;l[s+1]>l[i+1]&&(u=s,s=i,i=u,u=o,o=r,r=u),l[i+1]>l[n+1]&&(u=i,i=n,n=u,u=r,r=a,a=u),l[s+1]>l[i+1]&&(u=s,s=i,i=u,u=o,o=r,r=u);const f=(l[s]+t.offsetX)*t.scaleX,p=(l[s+1]+t.offsetY)*t.scaleY,m=(l[i]+t.offsetX)*t.scaleX,v=(l[i+1]+t.offsetY)*t.scaleY,C=(l[n]+t.offsetX)*t.scaleX,b=(l[n+1]+t.offsetY)*t.scaleY;if(p>=b)return;const y=c[o],S=c[o+1],R=c[o+2],A=c[r],F=c[r+1],T=c[r+2],k=c[a],N=c[a+1],I=c[a+2],O=Math.round(p),V=Math.round(b);let ee,G,ne,te,K,ve,ce,Se;for(let Ce=O;Ce<=V;Ce++){if(Ce<v){const se=Ce<p?0:(p-Ce)/(p-v);ee=f-(f-m)*se,G=y-(y-A)*se,ne=S-(S-F)*se,te=R-(R-T)*se}else{let se;Ce>b?se=1:v===b?se=0:se=(v-Ce)/(v-b),ee=m-(m-C)*se,G=A-(A-k)*se,ne=F-(F-N)*se,te=T-(T-I)*se}let re;Ce<p?re=0:Ce>b?re=1:re=(p-Ce)/(p-b),K=f-(f-C)*re,ve=y-(y-k)*re,ce=S-(S-N)*re,Se=R-(R-I)*re;const ie=Math.round(Math.min(ee,K)),X=Math.round(Math.max(ee,K));let Q=h*Ce+ie*4;for(let se=ie;se<=X;se++)re=(ee-se)/(ee-K),re<0?re=0:re>1&&(re=1),d[Q++]=G-(G-ve)*re|0,d[Q++]=ne-(ne-ce)*re|0,d[Q++]=te-(te-Se)*re|0,d[Q++]=255}}function t2(e,t,s){const i=t.coords,n=t.colors;let o,r;switch(t.type){case"lattice":const a=t.verticesPerRow,l=Math.floor(i.length/a)-1,c=a-1;for(o=0;o<l;o++){let d=o*a;for(let h=0;h<c;h++,d++)JC(e,s,i[d],i[d+1],i[d+a],n[d],n[d+1],n[d+a]),JC(e,s,i[d+a+1],i[d+1],i[d+a],n[d+a+1],n[d+1],n[d+a])}break;case"triangles":for(o=0,r=i.length;o<r;o+=3)JC(e,s,i[o],i[o+1],i[o+2],n[o],n[o+1],n[o+2]);break;default:throw new Error("illegal figure")}}class s2 extends US{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,s,i){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),u=Math.min(Math.ceil(Math.abs(d*t[1]*1.1)),3e3),f=c/h,p=d/u,m={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/f,scaleY:1/p},v=h+4,C=u+4,b=i.getCanvas("mesh",v,C),y=b.context,S=y.createImageData(h,u);if(s){const A=S.data;for(let F=0,T=A.length;F<T;F+=4)A[F]=s[0],A[F+1]=s[1],A[F+2]=s[2],A[F+3]=255}for(const A of this._figures)t2(S,A,m);return y.putImageData(S,2,2),{canvas:b.canvas,offsetX:a-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}getPattern(t,s,i,n){Hb(t,this._bbox);let o;if(n===ui.SHADING)o=Ne.singularValueDecompose2dScale(Zt(t));else if(o=Ne.singularValueDecompose2dScale(s.baseTransform),this.matrix){const a=Ne.singularValueDecompose2dScale(this.matrix);o=[o[0]*a[0],o[1]*a[1]]}const r=this._createMeshCanvas(o,n===ui.SHADING?null:this._background,s.cachedCanvases);return n!==ui.SHADING&&(t.setTransform(...s.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}}class i2 extends US{getPattern(){return"hotpink"}}function n2(e){switch(e[0]){case"RadialAxial":return new e2(e);case"Mesh":return new s2(e);case"Dummy":return new i2}throw new Error(`Unknown IR type: ${e[0]}`)}const Bx={COLORED:1,UNCOLORED:2},qv=class qv{constructor(t,s,i,n,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=s,this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=o}createPatternCanvas(t){const{bbox:s,operatorList:i,paintType:n,tilingType:o,color:r,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),vC("TilingType: "+o);const d=s[0],h=s[1],u=s[2],f=s[3],p=u-d,m=f-h,v=Ne.singularValueDecompose2dScale(this.matrix),C=Ne.singularValueDecompose2dScale(this.baseTransform),b=v[0]*C[0],y=v[1]*C[1];let S=p,R=m,A=!1,F=!1;const T=Math.ceil(l*b),k=Math.ceil(c*y),N=Math.ceil(p*b),I=Math.ceil(m*y);T>=N?S=l:A=!0,k>=I?R=c:F=!0;const O=this.getSizeAndScale(S,this.ctx.canvas.width,b),V=this.getSizeAndScale(R,this.ctx.canvas.height,y),ee=t.cachedCanvases.getCanvas("pattern",O.size,V.size),G=ee.context,ne=a.createCanvasGraphics(G);if(ne.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(ne,n,r),G.translate(-O.scale*d,-V.scale*h),ne.transform(O.scale,0,0,V.scale,0,0),G.save(),this.clipBbox(ne,d,h,u,f),ne.baseTransform=Zt(ne.ctx),ne.executeOperatorList(i),ne.endDrawing(),G.restore(),A||F){const te=ee.canvas;A&&(S=l),F&&(R=c);const K=this.getSizeAndScale(S,this.ctx.canvas.width,b),ve=this.getSizeAndScale(R,this.ctx.canvas.height,y),ce=K.size,Se=ve.size,Ce=t.cachedCanvases.getCanvas("pattern-workaround",ce,Se),re=Ce.context,ie=A?Math.floor(p/l):0,X=F?Math.floor(m/c):0;for(let Q=0;Q<=ie;Q++)for(let se=0;se<=X;se++)re.drawImage(te,ce*Q,Se*se,ce,Se,0,0,ce,Se);return{canvas:Ce.canvas,scaleX:K.scale,scaleY:ve.scale,offsetX:d,offsetY:h}}return{canvas:ee.canvas,scaleX:O.scale,scaleY:V.scale,offsetX:d,offsetY:h}}getSizeAndScale(t,s,i){const n=Math.max(qv.MAX_PATTERN_SIZE,s);let o=Math.ceil(t*i);return o>=n?o=n:i=o/t,{scale:i,size:o}}clipBbox(t,s,i,n,o){const r=n-s,a=o-i;t.ctx.rect(s,i,r,a),t.current.updateRectMinMax(Zt(t.ctx),[s,i,n,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,s,i){const n=t.ctx,o=t.current;switch(s){case Bx.COLORED:const r=this.ctx;n.fillStyle=r.fillStyle,n.strokeStyle=r.strokeStyle,o.fillColor=r.fillStyle,o.strokeColor=r.strokeStyle;break;case Bx.UNCOLORED:const a=Ne.makeHexColor(i[0],i[1],i[2]);n.fillStyle=a,n.strokeStyle=a,o.fillColor=a,o.strokeColor=a;break;default:throw new TO(`Unsupported paint type: ${s}`)}}getPattern(t,s,i,n){let o=i;n!==ui.SHADING&&(o=Ne.transform(o,s.baseTransform),this.matrix&&(o=Ne.transform(o,this.matrix)));const r=this.createPatternCanvas(s);let a=new DOMMatrix(o);a=a.translate(r.offsetX,r.offsetY),a=a.scale(1/r.scaleX,1/r.scaleY);const l=t.createPattern(r.canvas,"repeat");return l.setTransform(a),l}};Ge(qv,"MAX_PATTERN_SIZE",3e3);let Bb=qv;function o2({src:e,srcPos:t=0,dest:s,width:i,height:n,nonBlackColor:o=4294967295,inverseDecode:r=!1}){const a=pi.isLittleEndian?4278190080:255,[l,c]=r?[o,a]:[a,o],d=i>>3,h=i&7,u=e.length;s=new Uint32Array(s.buffer);let f=0;for(let p=0;p<n;p++){for(const v=t+d;t<v;t++){const C=t<u?e[t]:255;s[f++]=C&128?c:l,s[f++]=C&64?c:l,s[f++]=C&32?c:l,s[f++]=C&16?c:l,s[f++]=C&8?c:l,s[f++]=C&4?c:l,s[f++]=C&2?c:l,s[f++]=C&1?c:l}if(h===0)continue;const m=t<u?e[t++]:255;for(let v=0;v<h;v++)s[f++]=m&1<<7-v?c:l}return{srcPos:t,destPos:f}}const Gx=16,Vx=100,r2=15,zx=10,Wx=1e3,Ai=16;function a2(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(i,n){t.translate(i,n),this.__originalTranslate(i,n)},e.scale=function(i,n){t.scale(i,n),this.__originalScale(i,n)},e.transform=function(i,n,o,r,a,l){t.transform(i,n,o,r,a,l),this.__originalTransform(i,n,o,r,a,l)},e.setTransform=function(i,n,o,r,a,l){t.setTransform(i,n,o,r,a,l),this.__originalSetTransform(i,n,o,r,a,l)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(i){t.rotate(i),this.__originalRotate(i)},e.clip=function(i){t.clip(i),this.__originalClip(i)},e.moveTo=function(s,i){t.moveTo(s,i),this.__originalMoveTo(s,i)},e.lineTo=function(s,i){t.lineTo(s,i),this.__originalLineTo(s,i)},e.bezierCurveTo=function(s,i,n,o,r,a){t.bezierCurveTo(s,i,n,o,r,a),this.__originalBezierCurveTo(s,i,n,o,r,a)},e.rect=function(s,i,n,o){t.rect(s,i,n,o),this.__originalRect(s,i,n,o)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class l2{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,s,i){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,s,i)):(n=this.canvasFactory.create(s,i),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const s=this.cache[t];this.canvasFactory.destroy(s),delete this.cache[t]}}}function zp(e,t,s,i,n,o,r,a,l,c){const[d,h,u,f,p,m]=Zt(e);if(h===0&&u===0){const b=r*d+p,y=Math.round(b),S=a*f+m,R=Math.round(S),A=(r+l)*d+p,F=Math.abs(Math.round(A)-y)||1,T=(a+c)*f+m,k=Math.abs(Math.round(T)-R)||1;return e.setTransform(Math.sign(d),0,0,Math.sign(f),y,R),e.drawImage(t,s,i,n,o,0,0,F,k),e.setTransform(d,h,u,f,p,m),[F,k]}if(d===0&&f===0){const b=a*u+p,y=Math.round(b),S=r*h+m,R=Math.round(S),A=(a+c)*u+p,F=Math.abs(Math.round(A)-y)||1,T=(r+l)*h+m,k=Math.abs(Math.round(T)-R)||1;return e.setTransform(0,Math.sign(h),Math.sign(u),0,y,R),e.drawImage(t,s,i,n,o,0,0,k,F),e.setTransform(d,h,u,f,p,m),[k,F]}e.drawImage(t,s,i,n,o,r,a,l,c);const v=Math.hypot(d,h),C=Math.hypot(u,f);return[v*l,C*c]}function c2(e){const{width:t,height:s}=e;if(t>Wx||s>Wx)return null;const i=1e3,n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let r=new Uint8Array(o*(s+1)),a,l,c;const d=t+7&-8;let h=new Uint8Array(d*s),u=0;for(const C of e.data){let b=128;for(;b>0;)h[u++]=C&b?0:255,b>>=1}let f=0;for(u=0,h[u]!==0&&(r[0]=1,++f),l=1;l<t;l++)h[u]!==h[u+1]&&(r[l]=h[u]?2:1,++f),u++;for(h[u]!==0&&(r[l]=2,++f),a=1;a<s;a++){u=a*d,c=a*o,h[u-d]!==h[u]&&(r[c]=h[u]?1:8,++f);let C=(h[u]?4:0)+(h[u-d]?8:0);for(l=1;l<t;l++)C=(C>>2)+(h[u+1]?4:0)+(h[u-d+1]?8:0),n[C]&&(r[c+l]=n[C],++f),u++;if(h[u-d]!==h[u]&&(r[c+l]=h[u]?2:4,++f),f>i)return null}for(u=d*(s-1),c=a*o,h[u]!==0&&(r[c]=8,++f),l=1;l<t;l++)h[u]!==h[u+1]&&(r[c+l]=h[u]?4:8,++f),u++;if(h[u]!==0&&(r[c+l]=4,++f),f>i)return null;const p=new Int32Array([0,o,-1,0,-o,0,0,0,1]),m=new Path2D;for(a=0;f&&a<=s;a++){let C=a*o;const b=C+t;for(;C<b&&!r[C];)C++;if(C===b)continue;m.moveTo(C%o,a);const y=C;let S=r[C];do{const R=p[S];do C+=R;while(!r[C]);const A=r[C];A!==5&&A!==10?(S=A,r[C]=0):(S=A&51*S>>4,r[C]&=S>>2|S<<2),m.lineTo(C%o,C/o|0),r[C]||--f}while(y!==C);--a}return h=null,r=null,function(C){C.save(),C.scale(1/t,-1/s),C.translate(0,-s),C.fill(m),C.beginPath(),C.restore()}}class $x{constructor(t,s){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=hF,this.textMatrixScale=1,this.fontMatrix=hb,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Js.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,s])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,s){this.x=t,this.y=s}updatePathMinMax(t,s,i){[s,i]=Ne.applyTransform([s,i],t),this.minX=Math.min(this.minX,s),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,s),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,s){const i=Ne.applyTransform(s,t),n=Ne.applyTransform(s.slice(2),t),o=Ne.applyTransform([s[0],s[3]],t),r=Ne.applyTransform([s[2],s[1]],t);this.minX=Math.min(this.minX,i[0],n[0],o[0],r[0]),this.minY=Math.min(this.minY,i[1],n[1],o[1],r[1]),this.maxX=Math.max(this.maxX,i[0],n[0],o[0],r[0]),this.maxY=Math.max(this.maxY,i[1],n[1],o[1],r[1])}updateScalingPathMinMax(t,s){Ne.scaleMinMax(t,s),this.minX=Math.min(this.minX,s[0]),this.minY=Math.min(this.minY,s[1]),this.maxX=Math.max(this.maxX,s[2]),this.maxY=Math.max(this.maxY,s[3])}updateCurvePathMinMax(t,s,i,n,o,r,a,l,c,d){const h=Ne.bezierBoundingBox(s,i,n,o,r,a,l,c,d);d||this.updateRectMinMax(t,h)}getPathBoundingBox(t=ui.FILL,s=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===ui.STROKE){s||zt("Stroke bounding box must include transform.");const n=Ne.singularValueDecompose2dScale(s),o=n[0]*this.lineWidth/2,r=n[1]*this.lineWidth/2;i[0]-=o,i[1]-=r,i[2]+=o,i[3]+=r}return i}updateClipFromPath(){const t=Ne.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=ui.FILL,s=null){return Ne.intersect(this.clipBox,this.getPathBoundingBox(t,s))}}function Ux(e,t){if(typeof ImageData<"u"&&t instanceof ImageData){e.putImageData(t,0,0);return}const s=t.height,i=t.width,n=s%Ai,o=(s-n)/Ai,r=n===0?o:o+1,a=e.createImageData(i,Ai);let l=0,c;const d=t.data,h=a.data;let u,f,p,m;if(t.kind===cm.GRAYSCALE_1BPP){const v=d.byteLength,C=new Uint32Array(h.buffer,0,h.byteLength>>2),b=C.length,y=i+7>>3,S=4294967295,R=pi.isLittleEndian?4278190080:255;for(u=0;u<r;u++){for(p=u<o?Ai:n,c=0,f=0;f<p;f++){const A=v-l;let F=0;const T=A>y?i:A*8-7,k=T&-8;let N=0,I=0;for(;F<k;F+=8)I=d[l++],C[c++]=I&128?S:R,C[c++]=I&64?S:R,C[c++]=I&32?S:R,C[c++]=I&16?S:R,C[c++]=I&8?S:R,C[c++]=I&4?S:R,C[c++]=I&2?S:R,C[c++]=I&1?S:R;for(;F<T;F++)N===0&&(I=d[l++],N=128),C[c++]=I&N?S:R,N>>=1}for(;c<b;)C[c++]=0;e.putImageData(a,0,u*Ai)}}else if(t.kind===cm.RGBA_32BPP){for(f=0,m=i*Ai*4,u=0;u<o;u++)h.set(d.subarray(l,l+m)),l+=m,e.putImageData(a,0,f),f+=Ai;u<r&&(m=i*n*4,h.set(d.subarray(l,l+m)),e.putImageData(a,0,f))}else if(t.kind===cm.RGB_24BPP)for(p=Ai,m=i*p,u=0;u<r;u++){for(u>=o&&(p=n,m=i*p),c=0,f=m;f--;)h[c++]=d[l++],h[c++]=d[l++],h[c++]=d[l++],h[c++]=255;e.putImageData(a,0,u*Ai)}else throw new Error(`bad image kind: ${t.kind}`)}function jx(e,t){if(t.bitmap){e.drawImage(t.bitmap,0,0);return}const s=t.height,i=t.width,n=s%Ai,o=(s-n)/Ai,r=n===0?o:o+1,a=e.createImageData(i,Ai);let l=0;const c=t.data,d=a.data;for(let h=0;h<r;h++){const u=h<o?Ai:n;({srcPos:l}=o2({src:c,srcPos:l,dest:d,width:i,height:u,nonBlackColor:0})),e.putImageData(a,0,h*Ai)}}function Iu(e,t){const s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of s)e[i]!==void 0&&(t[i]=e[i]);e.setLineDash!==void 0&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function Wp(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",e.setLineDash!==void 0&&(e.setLineDash([]),e.lineDashOffset=0),!ri){const{filter:t}=e;t!=="none"&&t!==""&&(e.filter="none")}}function Kx(e,t){if(t)return!0;const s=Ne.singularValueDecompose2dScale(e);s[0]=Math.fround(s[0]),s[1]=Math.fround(s[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*al.PDF_TO_CSS_UNITS);return s[0]<=i&&s[1]<=i}const d2=["butt","round","square"],h2=["miter","round","bevel"],u2={},qx={};var pl,Gb,Vb;const X0=class X0{constructor(t,s,i,n,o,{optionalContentConfig:r,markedContentStack:a=null},l,c){P(this,pl);this.ctx=t,this.current=new $x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=s,this.objs=i,this.canvasFactory=n,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=r,this.cachedCanvases=new l2(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,s=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):s}beginDrawing({transform:t,viewport:s,transparency:i=!1,background:n=null}){const o=this.ctx.canvas.width,r=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,o,r),this.ctx.fillStyle=a,i){const l=this.cachedCanvases.getCanvas("transparent",o,r);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Zt(this.compositeCtx))}this.ctx.save(),Wp(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...s.transform),this.viewportScale=s.scale,this.baseTransform=Zt(this.ctx)}executeOperatorList(t,s,i,n){const o=t.argsArray,r=t.fnArray;let a=s||0;const l=o.length;if(l===a)return a;const c=l-a>zx&&typeof i=="function",d=c?Date.now()+r2:0;let h=0;const u=this.commonObjs,f=this.objs;let p;for(;;){if(n!==void 0&&a===n.nextBreakPoint)return n.breakIt(a,i),a;if(p=r[a],p!==Tn.dependency)this[p].apply(this,o[a]);else for(const m of o[a]){const v=m.startsWith("g_")?u:f;if(!v.has(m))return v.get(m,i),a}if(a++,a===l)return a;if(c&&++h>zx){if(Date.now()>d)return i(),a;h=0}}}endDrawing(){E(this,pl,Gb).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const s of t.values())typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&(s.width=s.height=0);t.clear()}this._cachedBitmapsMap.clear(),E(this,pl,Vb).call(this)}_scaleImage(t,s){const i=t.width??t.displayWidth,n=t.height??t.displayHeight;let o=Math.max(Math.hypot(s[0],s[1]),1),r=Math.max(Math.hypot(s[2],s[3]),1),a=i,l=n,c="prescale1",d,h;for(;o>2&&a>1||r>2&&l>1;){let u=a,f=l;o>2&&a>1&&(u=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),o/=a/u),r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,r/=l/f),d=this.cachedCanvases.getCanvas(c,u,f),h=d.context,h.clearRect(0,0,u,f),h.drawImage(t,0,0,a,l,0,0,u,f),t=d.canvas,a=u,l=f,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:l}}_createMaskCanvas(t){const s=this.ctx,{width:i,height:n}=t,o=this.current.fillColor,r=this.current.patternFill,a=Zt(s);let l,c,d,h;if((t.bitmap||t.data)&&t.count>1){const T=t.bitmap||t.data.buffer;c=JSON.stringify(r?a:[a.slice(0,4),o]),l=this._cachedBitmapsMap.get(T),l||(l=new Map,this._cachedBitmapsMap.set(T,l));const k=l.get(c);if(k&&!r){const N=Math.round(Math.min(a[0],a[2])+a[4]),I=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:k,offsetX:N,offsetY:I}}d=k}d||(h=this.cachedCanvases.getCanvas("maskCanvas",i,n),jx(h.context,t));let u=Ne.transform(a,[1/i,0,0,-1/n,0,0]);u=Ne.transform(u,[1,0,0,1,0,-n]);const[f,p,m,v]=Ne.getAxialAlignedBoundingBox([0,0,i,n],u),C=Math.round(m-f)||1,b=Math.round(v-p)||1,y=this.cachedCanvases.getCanvas("fillCanvas",C,b),S=y.context,R=f,A=p;S.translate(-R,-A),S.transform(...u),d||(d=this._scaleImage(h.canvas,tr(S)),d=d.img,l&&r&&l.set(c,d)),S.imageSmoothingEnabled=Kx(Zt(S),t.interpolate),zp(S,d,0,0,d.width,d.height,0,0,i,n),S.globalCompositeOperation="source-in";const F=Ne.transform(tr(S),[1,0,0,1,-R,-A]);return S.fillStyle=r?o.getPattern(s,this,F,ui.FILL):o,S.fillRect(0,0,i,n),l&&!r&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,y.canvas)),{canvas:y.canvas,offsetX:Math.round(R),offsetY:Math.round(A)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=d2[t]}setLineJoin(t){this.ctx.lineJoin=h2[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,s){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=s)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[s,i]of t)switch(s){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,t,s);this.suspendedCtx=this.ctx,this.ctx=n.context;const o=this.ctx;o.setTransform(...Zt(this.suspendedCtx)),Iu(this.suspendedCtx,o),a2(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Iu(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const s=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,s,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,s,i,n){const o=n[0],r=n[1],a=n[2]-o,l=n[3]-r;a===0||l===0||(this.genericComposeSMask(s.context,i,a,l,s.subtype,s.backdrop,s.transferMap,o,r,s.offsetX,s.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,s,i,n,o,r,a,l,c,d,h){let u=t.canvas,f=l-d,p=c-h;if(r){const v=Ne.makeHexColor(...r);if(f<0||p<0||f+i>u.width||p+n>u.height){const C=this.cachedCanvases.getCanvas("maskExtension",i,n),b=C.context;b.drawImage(u,-f,-p),b.globalCompositeOperation="destination-atop",b.fillStyle=v,b.fillRect(0,0,i,n),b.globalCompositeOperation="source-over",u=C.canvas,f=p=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(f,p,i,n),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=v,t.fillRect(f,p,i,n),t.restore()}}s.save(),s.globalAlpha=1,s.setTransform(1,0,0,1,0,0),o==="Alpha"&&a?s.filter=this.filterFactory.addAlphaFilter(a):o==="Luminosity"&&(s.filter=this.filterFactory.addLuminosityFilter(a));const m=new Path2D;m.rect(l,c,i,n),s.clip(m),s.globalCompositeOperation="destination-in",s.drawImage(u,f,p,i,n,l,c,i,n),s.restore()}save(){this.inSMaskMode?(Iu(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Iu(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,s,i,n,o,r){this.ctx.transform(t,s,i,n,o,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,s,i){const n=this.ctx,o=this.current;let r=o.x,a=o.y,l,c;const d=Zt(n),h=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,u=h?i.slice(0):null;for(let f=0,p=0,m=t.length;f<m;f++)switch(t[f]|0){case Tn.rectangle:r=s[p++],a=s[p++];const v=s[p++],C=s[p++],b=r+v,y=a+C;n.moveTo(r,a),v===0||C===0?n.lineTo(b,y):(n.lineTo(b,a),n.lineTo(b,y),n.lineTo(r,y)),h||o.updateRectMinMax(d,[r,a,b,y]),n.closePath();break;case Tn.moveTo:r=s[p++],a=s[p++],n.moveTo(r,a),h||o.updatePathMinMax(d,r,a);break;case Tn.lineTo:r=s[p++],a=s[p++],n.lineTo(r,a),h||o.updatePathMinMax(d,r,a);break;case Tn.curveTo:l=r,c=a,r=s[p+4],a=s[p+5],n.bezierCurveTo(s[p],s[p+1],s[p+2],s[p+3],r,a),o.updateCurvePathMinMax(d,l,c,s[p],s[p+1],s[p+2],s[p+3],r,a,u),p+=6;break;case Tn.curveTo2:l=r,c=a,n.bezierCurveTo(r,a,s[p],s[p+1],s[p+2],s[p+3]),o.updateCurvePathMinMax(d,l,c,r,a,s[p],s[p+1],s[p+2],s[p+3],u),r=s[p+2],a=s[p+3],p+=4;break;case Tn.curveTo3:l=r,c=a,r=s[p+2],a=s[p+3],n.bezierCurveTo(s[p],s[p+1],r,a,r,a),o.updateCurvePathMinMax(d,l,c,s[p],s[p+1],r,a,r,a,u),p+=4;break;case Tn.closePath:n.closePath();break}h&&o.updateScalingPathMinMax(d,u),o.setCurrentPoint(r,a)}closePath(){this.ctx.closePath()}stroke(t=!0){const s=this.ctx,i=this.current.strokeColor;s.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(s.save(),s.strokeStyle=i.getPattern(s,this,tr(s),ui.STROKE),this.rescaleAndStroke(!1),s.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),s.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const s=this.ctx,i=this.current.fillColor,n=this.current.patternFill;let o=!1;n&&(s.save(),s.fillStyle=i.getPattern(s,this,tr(s),ui.FILL),o=!0);const r=this.current.getClippedPathBoundingBox();this.contentVisible&&r!==null&&(this.pendingEOFill?(s.fill("evenodd"),this.pendingEOFill=!1):s.fill()),o&&s.restore(),t&&this.consumePath(r)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=u2}eoClip(){this.pendingClip=qx}beginText(){this.current.textMatrix=hF,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,s=this.ctx;if(t===void 0){s.beginPath();return}s.save(),s.beginPath();for(const i of t)s.setTransform(...i.transform),s.translate(i.x,i.y),i.addToPath(s,i.fontSize);s.restore(),s.clip(),s.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,s){var d;const i=this.commonObjs.get(t),n=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=i.fontMatrix||hb,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&it("Invalid font matrix for font "+t),s<0?(s=-s,n.fontDirection=-1):n.fontDirection=1,this.current.font=i,this.current.fontSize=s,i.isType3Font)return;const o=i.loadedName||"sans-serif",r=((d=i.systemFontInfo)==null?void 0:d.css)||`"${o}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const l=i.italic?"italic":"normal";let c=s;s<Gx?c=Gx:s>Vx&&(c=Vx),this.current.fontSizeScale=s/c,this.ctx.font=`${l} ${a} ${c}px ${r}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,s){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,s){this.setLeading(-s),this.moveText(t,s)}setTextMatrix(t,s,i,n,o,r){this.current.textMatrix=[t,s,i,n,o,r],this.current.textMatrixScale=Math.hypot(t,s),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,s,i,n){const o=this.ctx,r=this.current,a=r.font,l=r.textRenderingMode,c=r.fontSize/r.fontSizeScale,d=l&Js.FILL_STROKE_MASK,h=!!(l&Js.ADD_TO_PATH_FLAG),u=r.patternFill&&!a.missingFile;let f;(a.disableFontFace||h||u)&&(f=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||u?(o.save(),o.translate(s,i),o.beginPath(),f(o,c),n&&o.setTransform(...n),(d===Js.FILL||d===Js.FILL_STROKE)&&o.fill(),(d===Js.STROKE||d===Js.FILL_STROKE)&&o.stroke(),o.restore()):((d===Js.FILL||d===Js.FILL_STROKE)&&o.fillText(t,s,i),(d===Js.STROKE||d===Js.FILL_STROKE)&&o.strokeText(t,s,i)),h&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Zt(o),x:s,y:i,fontSize:c,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const s=t.getImageData(0,0,10,10).data;let i=!1;for(let n=3;n<s.length;n+=4)if(s[n]>0&&s[n]<255){i=!0;break}return vt(this,"isFontSubpixelAAEnabled",i)}showText(t){const s=this.current,i=s.font;if(i.isType3Font)return this.showType3Text(t);const n=s.fontSize;if(n===0)return;const o=this.ctx,r=s.fontSizeScale,a=s.charSpacing,l=s.wordSpacing,c=s.fontDirection,d=s.textHScale*c,h=t.length,u=i.vertical,f=u?1:-1,p=i.defaultVMetrics,m=n*s.fontMatrix[0],v=s.textRenderingMode===Js.FILL&&!i.disableFontFace&&!s.patternFill;o.save(),o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),c>0?o.scale(d,-1):o.scale(d,1);let C;if(s.patternFill){o.save();const A=s.fillColor.getPattern(o,this,tr(o),ui.FILL);C=Zt(o),o.restore(),o.fillStyle=A}let b=s.lineWidth;const y=s.textMatrixScale;if(y===0||b===0){const A=s.textRenderingMode&Js.FILL_STROKE_MASK;(A===Js.STROKE||A===Js.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=y;if(r!==1&&(o.scale(r,r),b/=r),o.lineWidth=b,i.isInvalidPDFjsFont){const A=[];let F=0;for(const T of t)A.push(T.unicode),F+=T.width;o.fillText(A.join(""),0,0),s.x+=F*m*d,o.restore(),this.compose();return}let S=0,R;for(R=0;R<h;++R){const A=t[R];if(typeof A=="number"){S+=f*A*n/1e3;continue}let F=!1;const T=(A.isSpace?l:0)+a,k=A.fontChar,N=A.accent;let I,O,V=A.width;if(u){const G=A.vmetric||p,ne=-(A.vmetric?G[1]:V*.5)*m,te=G[2]*m;V=G?-G[0]:V,I=ne/r,O=(S+te)/r}else I=S/r,O=0;if(i.remeasure&&V>0){const G=o.measureText(k).width*1e3/n*r;if(V<G&&this.isFontSubpixelAAEnabled){const ne=V/G;F=!0,o.save(),o.scale(ne,1),I/=ne}else V!==G&&(I+=(V-G)/2e3*n/r)}if(this.contentVisible&&(A.isInFont||i.missingFile)){if(v&&!N)o.fillText(k,I,O);else if(this.paintChar(k,I,O,C),N){const G=I+n*N.offset.x/r,ne=O-n*N.offset.y/r;this.paintChar(N.fontChar,G,ne,C)}}const ee=u?V*m-T*c:V*m+T*c;S+=ee,F&&o.restore()}u?s.y-=S:s.x+=S*d,o.restore(),this.compose()}showType3Text(t){const s=this.ctx,i=this.current,n=i.font,o=i.fontSize,r=i.fontDirection,a=n.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,d=i.textHScale*r,h=i.fontMatrix||hb,u=t.length,f=i.textRenderingMode===Js.INVISIBLE;let p,m,v,C;if(!(f||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),s.transform(...i.textMatrix),s.translate(i.x,i.y),s.scale(d,r),p=0;p<u;++p){if(m=t[p],typeof m=="number"){C=a*m*o/1e3,this.ctx.translate(C,0),i.x+=C*d;continue}const b=(m.isSpace?c:0)+l,y=n.charProcOperatorList[m.operatorListId];if(!y){it(`Type3 character "${m.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=m,this.save(),s.scale(o,o),s.transform(...h),this.executeOperatorList(y),this.restore()),v=Ne.applyTransform([m.width,0],h)[0]*o+b,s.translate(v,0),i.x+=v*d}s.restore(),this.processingType3=null}}setCharWidth(t,s){}setCharWidthAndBounds(t,s,i,n,o,r){this.ctx.rect(i,n,o-i,r-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let s;if(t[0]==="TilingPattern"){const i=t[1],n=this.baseTransform||Zt(this.ctx),o={createCanvasGraphics:r=>new X0(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};s=new Bb(t,i,this.ctx,o,n)}else s=this._getPattern(t[1],t[2]);return s}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,s,i){this.ctx.strokeStyle=this.current.strokeColor=Ne.makeHexColor(t,s,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,s,i){this.ctx.fillStyle=this.current.fillColor=Ne.makeHexColor(t,s,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,s=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=n2(this.getObject(t)),this.cachedPatterns.set(t,i)),s&&(i.matrix=s),i}shadingFill(t){if(!this.contentVisible)return;const s=this.ctx;this.save();const i=this._getPattern(t);s.fillStyle=i.getPattern(s,this,tr(s),ui.SHADING);const n=tr(s);if(n){const{width:o,height:r}=s.canvas,[a,l,c,d]=Ne.getAxialAlignedBoundingBox([0,0,o,r],n);this.ctx.fillRect(a,l,c-a,d-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){zt("Should not call beginInlineImage")}beginImageData(){zt("Should not call beginImageData")}paintFormXObjectBegin(t,s){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Zt(this.ctx),s)){const i=s[2]-s[0],n=s[3]-s[1];this.ctx.rect(s[0],s[1],i,n),this.current.updateRectMinMax(Zt(this.ctx),s),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||vC("TODO: Support non-isolated groups."),t.knockout&&it("Knockout groups not supported.");const i=Zt(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=Ne.getAxialAlignedBoundingBox(t.bbox,Zt(s));const o=[0,0,s.canvas.width,s.canvas.height];n=Ne.intersect(n,o)||[0,0,0,0];const r=Math.floor(n[0]),a=Math.floor(n[1]),l=Math.max(Math.ceil(n[2])-r,1),c=Math.max(Math.ceil(n[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(d,l,c),u=h.context;u.translate(-r,-a),u.transform(...i),t.smask?this.smaskStack.push({canvas:h.canvas,context:u,offsetX:r,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(s.setTransform(1,0,0,1,0,0),s.translate(r,a),s.save()),Iu(s,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=Zt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const o=Ne.getAxialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],n);this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,s,i,n,o){if(E(this,pl,Gb).call(this),Wp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const r=s[2]-s[0],a=s[3]-s[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=s[0],i[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=r,s[3]=a;const[l,c]=Ne.singularValueDecompose2dScale(Zt(this.ctx)),{viewportScale:d}=this,h=Math.ceil(r*this.outputScaleX*d),u=Math.ceil(a*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,u);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,a*c),Wp(this.ctx)}else Wp(this.ctx),this.endPath(),this.ctx.rect(s[0],s[1],r,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new $x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),E(this,pl,Vb).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const s=t.count;t=this.getObject(t.data,t),t.count=s;const i=this.ctx,n=this.processingType3;if(n&&(n.compiled===void 0&&(n.compiled=c2(t)),n.compiled)){n.compiled(i);return}const o=this._createMaskCanvas(t),r=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(r,o.offsetX,o.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,s,i=0,n=0,o,r){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const l=Zt(a);a.transform(s,i,n,o,0,0);const c=this._createMaskCanvas(t);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let d=0,h=r.length;d<h;d+=2){const u=Ne.transform(l,[s,i,n,o,r[d],r[d+1]]),[f,p]=Ne.applyTransform([0,0],u);a.drawImage(c.canvas,f,p)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const s=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(const o of t){const{data:r,width:a,height:l,transform:c}=o,d=this.cachedCanvases.getCanvas("maskCanvas",a,l),h=d.context;h.save();const u=this.getObject(r,o);jx(h,u),h.globalCompositeOperation="source-in",h.fillStyle=n?i.getPattern(h,this,tr(s),ui.FILL):i,h.fillRect(0,0,a,l),h.restore(),s.save(),s.transform(...c),s.scale(1,-1),zp(s,d.canvas,0,0,a,l,0,-1,1,1),s.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const s=this.getObject(t);if(!s){it("Dependent image isn't ready yet");return}this.paintInlineImageXObject(s)}paintImageXObjectRepeat(t,s,i,n){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){it("Dependent image isn't ready yet");return}const r=o.width,a=o.height,l=[];for(let c=0,d=n.length;c<d;c+=2)l.push({transform:[s,0,0,i,n[c],n[c+1]],x:0,y:0,w:r,h:a});this.paintInlineImageXObjectGroup(o,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:s,width:i,height:n}=t,o=this.cachedCanvases.getCanvas("inlineImage",i,n),r=o.context;return r.filter=this.current.transferMaps,r.drawImage(s,0,0),r.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const s=t.width,i=t.height,n=this.ctx;if(this.save(),!ri){const{filter:a}=n;a!=="none"&&a!==""&&(n.filter="none")}n.scale(1/s,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const l=this.cachedCanvases.getCanvas("inlineImage",s,i).context;Ux(l,t),o=this.applyTransferMapsToCanvas(l)}const r=this._scaleImage(o,tr(n));n.imageSmoothingEnabled=Kx(Zt(n),t.interpolate),zp(n,r.img,0,0,r.paintWidth,r.paintHeight,0,-i,s,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,s){if(!this.contentVisible)return;const i=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const o=t.width,r=t.height,l=this.cachedCanvases.getCanvas("inlineImage",o,r).context;Ux(l,t),n=this.applyTransferMapsToCanvas(l)}for(const o of s)i.save(),i.transform(...o.transform),i.scale(1,-1),zp(i,n,o.x,o.y,o.w,o.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,s){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,s){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(s||(this.pendingClip===qx?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Zt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const s=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/s}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:s,b:i,c:n,d:o}=this.ctx.getTransform();let r,a;if(i===0&&n===0){const l=Math.abs(s),c=Math.abs(o);if(l===c)if(t===0)r=a=1/l;else{const d=l*t;r=a=d<1?1/d:1}else if(t===0)r=1/l,a=1/c;else{const d=l*t,h=c*t;r=d<1?1/d:1,a=h<1?1/h:1}}else{const l=Math.abs(s*o-i*n),c=Math.hypot(s,i),d=Math.hypot(n,o);if(t===0)r=d/l,a=c/l;else{const h=t*l;r=d>h?d/h:1,a=c>h?c/h:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:s}=this,{lineWidth:i}=this.current,[n,o]=this.getScaleForStroking();if(s.lineWidth=i||1,n===1&&o===1){s.stroke();return}const r=s.getLineDash();if(t&&s.save(),s.scale(n,o),r.length>0){const a=Math.max(n,o);s.setLineDash(r.map(l=>l/a)),s.lineDashOffset/=a}s.stroke(),t&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};pl=new WeakSet,Gb=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Vb=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const s=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=s}}};let Wd=X0;for(const e in Tn)Wd.prototype[e]!==void 0&&(Wd.prototype[Tn[e]]=Wd.prototype[e]);var Cf,wf;class Lr{static get workerPort(){return g(this,Cf)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");x(this,Cf,t)}static get workerSrc(){return g(this,wf)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");x(this,wf,t)}}Cf=new WeakMap,wf=new WeakMap,P(Lr,Cf,null),P(Lr,wf,"");const $p={DATA:1,ERROR:2},us={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ii(e){switch(e instanceof Error||typeof e=="object"&&e!==null||zt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new ud(e.message);case"MissingPDFException":return new hd(e.message);case"PasswordException":return new ub(e.message,e.code);case"UnexpectedResponseException":return new CC(e.message,e.status);case"UnknownErrorException":return new gb(e.message,e.details);default:return new gb(e.message,e.toString())}}var bh,bn,YF,XF,QF,vm;class Qu{constructor(t,s,i){P(this,bn);P(this,bh,new AbortController);this.sourceName=t,this.targetName=s,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",E(this,bn,YF).bind(this),{signal:g(this,bh).signal})}on(t,s){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=s}send(t,s,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:s},i)}sendWithPromise(t,s,i){const n=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[n]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:s},i)}catch(r){o.reject(r)}return o.promise}sendWithStream(t,s,i,n){const o=this.streamId++,r=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const d=Promise.withResolvers();return this.streamControllers[o]={controller:c,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:r,targetName:a,action:t,streamId:o,data:s,desiredSize:c.desiredSize},n),d.promise},pull:c=>{const d=Promise.withResolvers();return this.streamControllers[o].pullCall=d,l.postMessage({sourceName:r,targetName:a,stream:us.PULL,streamId:o,desiredSize:c.desiredSize}),d.promise},cancel:c=>{Rs(c instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[o].cancelCall=d,this.streamControllers[o].isClosed=!0,l.postMessage({sourceName:r,targetName:a,stream:us.CANCEL,streamId:o,reason:Ii(c)}),d.promise}},i)}destroy(){var t;(t=g(this,bh))==null||t.abort(),x(this,bh,null)}}bh=new WeakMap,bn=new WeakSet,YF=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){E(this,bn,QF).call(this,t);return}if(t.callback){const i=t.callbackId,n=this.callbackCapabilities[i];if(!n)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===$p.DATA)n.resolve(t.data);else if(t.callback===$p.ERROR)n.reject(Ii(t.reason));else throw new Error("Unexpected callback case");return}const s=this.actionHandler[t.action];if(!s)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,n=t.sourceName,o=this.comObj;new Promise(function(r){r(s(t.data))}).then(function(r){o.postMessage({sourceName:i,targetName:n,callback:$p.DATA,callbackId:t.callbackId,data:r})},function(r){o.postMessage({sourceName:i,targetName:n,callback:$p.ERROR,callbackId:t.callbackId,reason:Ii(r)})});return}if(t.streamId){E(this,bn,XF).call(this,t);return}s(t.data)},XF=function(t){const s=t.streamId,i=this.sourceName,n=t.sourceName,o=this.comObj,r=this,a=this.actionHandler[t.action],l={enqueue(c,d=1,h){if(this.isCancelled)return;const u=this.desiredSize;this.desiredSize-=d,u>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:n,stream:us.ENQUEUE,streamId:s,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:n,stream:us.CLOSE,streamId:s}),delete r.streamSinks[s])},error(c){Rs(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:n,stream:us.ERROR,streamId:s,reason:Ii(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[s]=l,new Promise(function(c){c(a(t.data,l))}).then(function(){o.postMessage({sourceName:i,targetName:n,stream:us.START_COMPLETE,streamId:s,success:!0})},function(c){o.postMessage({sourceName:i,targetName:n,stream:us.START_COMPLETE,streamId:s,reason:Ii(c)})})},QF=function(t){const s=t.streamId,i=this.sourceName,n=t.sourceName,o=this.comObj,r=this.streamControllers[s],a=this.streamSinks[s];switch(t.stream){case us.START_COMPLETE:t.success?r.startCall.resolve():r.startCall.reject(Ii(t.reason));break;case us.PULL_COMPLETE:t.success?r.pullCall.resolve():r.pullCall.reject(Ii(t.reason));break;case us.PULL:if(!a){o.postMessage({sourceName:i,targetName:n,stream:us.PULL_COMPLETE,streamId:s,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,new Promise(function(l){var c;l((c=a.onPull)==null?void 0:c.call(a))}).then(function(){o.postMessage({sourceName:i,targetName:n,stream:us.PULL_COMPLETE,streamId:s,success:!0})},function(l){o.postMessage({sourceName:i,targetName:n,stream:us.PULL_COMPLETE,streamId:s,reason:Ii(l)})});break;case us.ENQUEUE:if(Rs(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case us.CLOSE:if(Rs(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),E(this,bn,vm).call(this,r,s);break;case us.ERROR:Rs(r,"error should have stream controller"),r.controller.error(Ii(t.reason)),E(this,bn,vm).call(this,r,s);break;case us.CANCEL_COMPLETE:t.success?r.cancelCall.resolve():r.cancelCall.reject(Ii(t.reason)),E(this,bn,vm).call(this,r,s);break;case us.CANCEL:if(!a)break;new Promise(function(l){var c;l((c=a.onCancel)==null?void 0:c.call(a,Ii(t.reason)))}).then(function(){o.postMessage({sourceName:i,targetName:n,stream:us.CANCEL_COMPLETE,streamId:s,success:!0})},function(l){o.postMessage({sourceName:i,targetName:n,stream:us.CANCEL_COMPLETE,streamId:s,reason:Ii(l)})}),a.sinkCapability.reject(Ii(t.reason)),a.isCancelled=!0,delete this.streamSinks[s];break;default:throw new Error("Unexpected stream case")}},vm=async function(t,s){var i,n,o;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(n=t.pullCall)==null?void 0:n.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[s]};var cc,bf;class g2{constructor({parsedData:t,rawData:s}){P(this,cc);P(this,bf);x(this,cc,t),x(this,bf,s)}getRaw(){return g(this,bf)}get(t){return g(this,cc).get(t)??null}getAll(){return HS(g(this,cc))}has(t){return g(this,cc).has(t)}}cc=new WeakMap,bf=new WeakMap;const Dd=Symbol("INTERNAL");var yf,Sf,xf,yh;class f2{constructor(t,{name:s,intent:i,usage:n,rbGroups:o}){P(this,yf,!1);P(this,Sf,!1);P(this,xf,!1);P(this,yh,!0);x(this,yf,!!(t&Ui.DISPLAY)),x(this,Sf,!!(t&Ui.PRINT)),this.name=s,this.intent=i,this.usage=n,this.rbGroups=o}get visible(){if(g(this,xf))return g(this,yh);if(!g(this,yh))return!1;const{print:t,view:s}=this.usage;return g(this,yf)?(s==null?void 0:s.viewState)!=="OFF":g(this,Sf)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,s,i=!1){t!==Dd&&zt("Internal method `_setVisible` called."),x(this,xf,i),x(this,yh,s)}}yf=new WeakMap,Sf=new WeakMap,xf=new WeakMap,yh=new WeakMap;var Ia,Dt,Sh,xh,Rf,zb;class p2{constructor(t,s=Ui.DISPLAY){P(this,Rf);P(this,Ia,null);P(this,Dt,new Map);P(this,Sh,null);P(this,xh,null);if(this.renderingIntent=s,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,x(this,xh,t.order);for(const i of t.groups)g(this,Dt).set(i.id,new f2(s,i));if(t.baseState==="OFF")for(const i of g(this,Dt).values())i._setVisible(Dd,!1);for(const i of t.on)g(this,Dt).get(i)._setVisible(Dd,!0);for(const i of t.off)g(this,Dt).get(i)._setVisible(Dd,!1);x(this,Sh,this.getHash())}}isVisible(t){if(g(this,Dt).size===0)return!0;if(!t)return vC("Optional content group not defined."),!0;if(t.type==="OCG")return g(this,Dt).has(t.id)?g(this,Dt).get(t.id).visible:(it(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return E(this,Rf,zb).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const s of t.ids){if(!g(this,Dt).has(s))return it(`Optional content group not found: ${s}`),!0;if(g(this,Dt).get(s).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const s of t.ids){if(!g(this,Dt).has(s))return it(`Optional content group not found: ${s}`),!0;if(!g(this,Dt).get(s).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const s of t.ids){if(!g(this,Dt).has(s))return it(`Optional content group not found: ${s}`),!0;if(!g(this,Dt).get(s).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const s of t.ids){if(!g(this,Dt).has(s))return it(`Optional content group not found: ${s}`),!0;if(g(this,Dt).get(s).visible)return!1}return!0}return it(`Unknown optional content policy ${t.policy}.`),!0}return it(`Unknown group type ${t.type}.`),!0}setVisibility(t,s=!0,i=!0){var o;const n=g(this,Dt).get(t);if(!n){it(`Optional content group not found: ${t}`);return}if(i&&s&&n.rbGroups.length)for(const r of n.rbGroups)for(const a of r)a!==t&&((o=g(this,Dt).get(a))==null||o._setVisible(Dd,!1,!0));n._setVisible(Dd,!!s,!0),x(this,Ia,null)}setOCGState({state:t,preserveRB:s}){let i;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":i=n;continue}const o=g(this,Dt).get(n);if(o)switch(i){case"ON":this.setVisibility(n,!0,s);break;case"OFF":this.setVisibility(n,!1,s);break;case"Toggle":this.setVisibility(n,!o.visible,s);break}}x(this,Ia,null)}get hasInitialVisibility(){return g(this,Sh)===null||this.getHash()===g(this,Sh)}getOrder(){return g(this,Dt).size?g(this,xh)?g(this,xh).slice():[...g(this,Dt).keys()]:null}getGroups(){return g(this,Dt).size>0?HS(g(this,Dt)):null}getGroup(t){return g(this,Dt).get(t)||null}getHash(){if(g(this,Ia)!==null)return g(this,Ia);const t=new HF;for(const[s,i]of g(this,Dt))t.update(`${s}:${i.visible}`);return x(this,Ia,t.hexdigest())}}Ia=new WeakMap,Dt=new WeakMap,Sh=new WeakMap,xh=new WeakMap,Rf=new WeakSet,zb=function(t){const s=t.length;if(s<2)return!0;const i=t[0];for(let n=1;n<s;n++){const o=t[n];let r;if(Array.isArray(o))r=E(this,Rf,zb).call(this,o);else if(g(this,Dt).has(o))r=g(this,Dt).get(o).visible;else return it(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return i==="And"};class m2{constructor(t,{disableRange:s=!1,disableStream:i=!1}){Rs(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:o,progressiveDone:r,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=a,(o==null?void 0:o.length)>0){const l=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!s,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),t.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:s}){const i=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const n=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(i),!0)});Rs(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var s,i,n,o;t.total===void 0?(i=(s=this._rangeReaders[0])==null?void 0:s.onProgress)==null||i.call(s,{loaded:t.loaded}):(o=(n=this._fullRequestReader)==null?void 0:n.onProgress)==null||o.call(n,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const s=this._rangeReaders.indexOf(t);s>=0&&this._rangeReaders.splice(s,1)}getFullReader(){Rs(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new v2(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,s){if(s<=this._progressiveDataLength)return null;const i=new C2(this,t,s);return this._pdfDataRangeTransport.requestDataRange(t,s),this._rangeReaders.push(i),i}cancelAllRequests(t){var s;(s=this._fullRequestReader)==null||s.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class v2{constructor(t,s,i=!1,n=null){this._stream=t,this._done=i||!1,this._filename=VS(n)?n:null,this._queuedChunks=s||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class C2{constructor(t,s,i){this._stream=t,this._begin=s,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function w2(e){let t=!0,s=i("filename\\*","i").exec(e);if(s){s=s[1];let d=a(s);return d=unescape(d),d=l(d),d=c(d),o(d)}if(s=r(e),s){const d=c(s);return o(d)}if(s=i("filename","i").exec(e),s){s=s[1];let d=a(s);return d=c(d),o(d)}function i(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function n(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const u=new TextDecoder(d,{fatal:!0}),f=wC(h);h=u.decode(f),t=!1}catch{}}return h}function o(d){return t&&/[\x80-\xff]/.test(d)&&(d=n("utf-8",d),t&&(d=n("iso-8859-1",d))),d}function r(d){const h=[];let u;const f=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(u=f.exec(d))!==null;){let[,m,v,C]=u;if(m=parseInt(m,10),m in h){if(m===0)break;continue}h[m]=[v,C]}const p=[];for(let m=0;m<h.length&&m in h;++m){let[v,C]=h[m];C=a(C),v&&(C=unescape(C),m===0&&(C=l(C))),p.push(C)}return p.join("")}function a(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let u=0;u<h.length;++u){const f=h[u].indexOf('"');f!==-1&&(h[u]=h[u].slice(0,f),h.length=u+1),h[u]=h[u].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function l(d){const h=d.indexOf("'");if(h===-1)return d;const u=d.slice(0,h),p=d.slice(h+1).replace(/^[^']*'/,"");return n(u,p)}function c(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,u,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,v){return String.fromCharCode(parseInt(v,16))}),n(u,p);try{p=atob(p)}catch{}return n(u,p)})}return""}function jS(e,t){const s=new Headers;if(!e||!t||typeof t!="object")return s;for(const i in t){const n=t[i];n!==void 0&&s.append(i,n)}return s}function KS({responseHeaders:e,isHttp:t,rangeChunkSize:s,disableRange:i}){const n={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(e.get("Content-Length"),10);return!Number.isInteger(o)||(n.suggestedLength=o,o<=2*s)||i||!t||e.get("Accept-Ranges")!=="bytes"||(e.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function qS(e){const t=e.get("Content-Disposition");if(t){let s=w2(t);if(s.includes("%"))try{s=decodeURIComponent(s)}catch{}if(VS(s))return s}return null}function SC(e,t){return e===404||e===0&&t.startsWith("file:")?new hd('Missing PDF "'+t+'".'):new CC(`Unexpected server response (${e}) while retrieving PDF "${t}".`,e)}function JF(e){return e===200||e===206}function ZF(e,t,s){return{method:"GET",headers:e,signal:s.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function eP(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(it(`getArrayBuffer - unexpected data format: ${e}`),new Uint8Array(e).buffer)}class Yx{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=jS(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Rs(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b2(this),this._fullRequestReader}getRangeReader(t,s){if(s<=this._progressiveDataLength)return null;const i=new y2(this,t,s);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var s;(s=this._fullRequestReader)==null||s.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class b2{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const s=t.source;this._withCredentials=s.withCredentials||!1,this._contentLength=s.length,this._headersCapability=Promise.withResolvers(),this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange;const i=new Headers(t.headers),n=s.url;fetch(n,ZF(i,this._withCredentials,this._abortController)).then(o=>{if(!JF(o.status))throw SC(o.status,n);this._reader=o.body.getReader(),this._headersCapability.resolve();const r=o.headers,{allowRangeRequests:a,suggestedLength:l}=KS({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=qS(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ud("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:s}=await this._reader.read();return s?{value:t,done:s}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:eP(t),done:!1})}cancel(t){var s;(s=this._reader)==null||s.cancel(t),this._abortController.abort()}}class y2{constructor(t,s,i){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${s}-${i-1}`);const r=n.url;fetch(r,ZF(o,this._withCredentials,this._abortController)).then(a=>{if(!JF(a.status))throw SC(a.status,r);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:s}=await this._reader.read();return s?{value:t,done:s}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:eP(t),done:!1})}cancel(t){var s;(s=this._reader)==null||s.cancel(t),this._abortController.abort()}}const ZC=200,ew=206;function S2(e){const t=e.response;return typeof t!="string"?t:wC(t).buffer}class x2{constructor({url:t,httpHeaders:s,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=jS(this.isHttp,s),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,s,i){const n={begin:t,end:s};for(const o in i)n[o]=i[o];return this.request(n)}requestFull(t){return this.request(t)}request(t){const s=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:s};s.open("GET",this.url),s.withCredentials=this.withCredentials;for(const[o,r]of this.headers)s.setRequestHeader(o,r);return this.isHttp&&"begin"in t&&"end"in t?(s.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=ew):n.expectedStatus=ZC,s.responseType="arraybuffer",t.onError&&(s.onerror=function(o){t.onError(s.status)}),s.onreadystatechange=this.onStateChange.bind(this,i),s.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,s.send(null),i}onProgress(t,s){var n;const i=this.pendingRequests[t];i&&((n=i.onProgress)==null||n.call(i,s))}onStateChange(t,s){var l,c,d;const i=this.pendingRequests[t];if(!i)return;const n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){(l=i.onError)==null||l.call(i,n.status);return}const o=n.status||ZC;if(!(o===ZC&&i.expectedStatus===ew)&&o!==i.expectedStatus){(c=i.onError)==null||c.call(i,n.status);return}const a=S2(n);if(o===ew){const h=n.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);i.onDone({begin:parseInt(u[1],10),chunk:a})}else a?i.onDone({begin:0,chunk:a}):(d=i.onError)==null||d.call(i,n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const s=this.pendingRequests[t].xhr;delete this.pendingRequests[t],s.abort()}}class R2{constructor(t){this._source=t,this._manager=new x2(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const s=this._rangeRequestReaders.indexOf(t);s>=0&&this._rangeRequestReaders.splice(s,1)}getFullReader(){return Rs(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new E2(this._manager,this._source),this._fullRequestReader}getRangeReader(t,s){const i=new A2(this._manager,t,s);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var s;(s=this._fullRequestReader)==null||s.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class E2{constructor(t,s){this._manager=t;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=s.url,this._fullRequestId=t.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=s.disableRange||!1,this._contentLength=s.length,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,s=this._manager.getRequestXhr(t),i=new Headers(s.getAllResponseHeaders().trim().split(/[\r\n]+/).map(r=>{const[a,...l]=r.split(": ");return[a,l.join(": ")]})),{allowRangeRequests:n,suggestedLength:o}=KS({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=qS(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=SC(t,this._url),this._headersCapability.reject(this._storedError);for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var s;(s=this.onProgress)==null||s.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class A2{constructor(t,s,i){this._manager=t;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(s,i,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const s=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:s,done:!1}):this._queuedChunk=s,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=SC(t,this._url);for(const s of this._requests)s.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var s;this.isStreamingSupported||(s=this.onProgress)==null||s.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const F2=/^[a-z][a-z0-9\-+.]+:/i;function P2(e){if(F2.test(e))return new URL(e);const t=ll.get("url");return new URL(t.pathToFileURL(e))}function tP(e,t,s){return e.protocol==="http:"?ll.get("http").request(e,{headers:t},s):ll.get("https").request(e,{headers:t},s)}class T2{constructor(t){this.source=t,this.url=P2(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=jS(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Rs(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new M2(this):new D2(this),this._fullRequestReader}getRangeReader(t,s){if(s<=this._progressiveDataLength)return null;const i=this.isFsUrl?new k2(this,t,s):new _2(this,t,s);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var s;(s=this._fullRequestReader)==null||s.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class sP{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const s=t.source;this._contentLength=s.length,this._loaded=0,this._filename=null,this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",s=>{this._error(s)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ud("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class iP{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",s=>{this._error(s)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class D2 extends sP{constructor(t){super(t);const s=Object.fromEntries(t.headers),i=n=>{if(n.statusCode===404){const l=new hd(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(n);const o=new Headers(this._readableStream.headers),{allowRangeRequests:r,suggestedLength:a}=KS({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=a||this._contentLength,this._filename=qS(o)};this._request=tP(this._url,s,i),this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class _2 extends iP{constructor(t,s,i){super(t);const n=Object.fromEntries(t.headers);n.Range=`bytes=${s}-${i-1}`;const o=r=>{if(r.statusCode===404){const a=new hd(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(r)};this._request=tP(this._url,n,o),this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class M2 extends sP{constructor(t){super(t);const s=ll.get("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new hd(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class k2 extends iP{constructor(t,s,i){super(t);const n=ll.get("fs");this._setReadableStream(n.createReadStream(this._url,{start:s,end:i-1}))}}const I2=1e5,wi=30,L2=.8;var PE,La,Ri,Ef,Af,dc,pr,Ff,Pf,hc,Rh,Eh,Oa,Ah,Tf,Fh,uc,Df,_f,gc,fc,Mf,Na,Ph,ea,nP,oP,Wb,Ji,Cm,$b,rP,aP;const ws=class ws{constructor({textContentSource:t,container:s,viewport:i}){P(this,ea);P(this,La,Promise.withResolvers());P(this,Ri,null);P(this,Ef,!1);P(this,Af,!!((PE=globalThis.FontInspector)!=null&&PE.enabled));P(this,dc,null);P(this,pr,null);P(this,Ff,0);P(this,Pf,0);P(this,hc,null);P(this,Rh,null);P(this,Eh,0);P(this,Oa,0);P(this,Ah,Object.create(null));P(this,Tf,[]);P(this,Fh,null);P(this,uc,[]);P(this,Df,new WeakMap);P(this,_f,null);var l;if(t instanceof ReadableStream)x(this,Fh,t);else if(typeof t=="object")x(this,Fh,new ReadableStream({start(c){c.enqueue(t),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,Ri,x(this,Rh,s)),x(this,Oa,i.scale*(globalThis.devicePixelRatio||1)),x(this,Eh,i.rotation),x(this,pr,{div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:o,pageX:r,pageY:a}=i.rawDims;x(this,_f,[1,0,0,-1,-r,a+o]),x(this,Pf,n),x(this,Ff,o),E(l=ws,Ji,rP).call(l),Qc(s,i),g(this,La).promise.finally(()=>{g(ws,Ph).delete(this),x(this,pr,null),x(this,Ah,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:s}=pi.platform;return vt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&s?"Calibri, ":""}sans-serif`],["monospace",`${t&&s?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{g(this,hc).read().then(({value:s,done:i})=>{if(i){g(this,La).resolve();return}g(this,dc)??x(this,dc,s.lang),Object.assign(g(this,Ah),s.styles),E(this,ea,nP).call(this,s.items),t()},g(this,La).reject)};return x(this,hc,g(this,Fh).getReader()),g(ws,Ph).add(this),t(),g(this,La).promise}update({viewport:t,onBefore:s=null}){var o;const i=t.scale*(globalThis.devicePixelRatio||1),n=t.rotation;if(n!==g(this,Eh)&&(s==null||s(),x(this,Eh,n),Qc(g(this,Rh),{rotation:n})),i!==g(this,Oa)){s==null||s(),x(this,Oa,i);const r={div:null,properties:null,ctx:E(o=ws,Ji,Cm).call(o,g(this,dc))};for(const a of g(this,uc))r.properties=g(this,Df).get(a),r.div=a,E(this,ea,Wb).call(this,r)}}cancel(){var s;const t=new ud("TextLayer task cancelled.");(s=g(this,hc))==null||s.cancel(t).catch(()=>{}),x(this,hc,null),g(this,La).reject(t)}get textDivs(){return g(this,uc)}get textContentItemsStr(){return g(this,Tf)}static cleanup(){if(!(g(this,Ph).size>0)){g(this,gc).clear();for(const{canvas:t}of g(this,fc).values())t.remove();g(this,fc).clear()}}};La=new WeakMap,Ri=new WeakMap,Ef=new WeakMap,Af=new WeakMap,dc=new WeakMap,pr=new WeakMap,Ff=new WeakMap,Pf=new WeakMap,hc=new WeakMap,Rh=new WeakMap,Eh=new WeakMap,Oa=new WeakMap,Ah=new WeakMap,Tf=new WeakMap,Fh=new WeakMap,uc=new WeakMap,Df=new WeakMap,_f=new WeakMap,gc=new WeakMap,fc=new WeakMap,Mf=new WeakMap,Na=new WeakMap,Ph=new WeakMap,ea=new WeakSet,nP=function(t){var n,o;if(g(this,Ef))return;(o=g(this,pr)).ctx??(o.ctx=E(n=ws,Ji,Cm).call(n,g(this,dc)));const s=g(this,uc),i=g(this,Tf);for(const r of t){if(s.length>I2){it("Ignoring additional textDivs for performance reasons."),x(this,Ef,!0);return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const a=g(this,Ri);x(this,Ri,document.createElement("span")),g(this,Ri).classList.add("markedContent"),r.id!==null&&g(this,Ri).setAttribute("id",`${r.id}`),a.append(g(this,Ri))}else r.type==="endMarkedContent"&&x(this,Ri,g(this,Ri).parentNode);continue}i.push(r.str),E(this,ea,oP).call(this,r)}},oP=function(t){var m;const s=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};g(this,uc).push(s);const n=Ne.transform(g(this,_f),t.transform);let o=Math.atan2(n[1],n[0]);const r=g(this,Ah)[t.fontName];r.vertical&&(o+=Math.PI/2);let a=g(this,Af)&&r.fontSubstitution||r.fontFamily;a=ws.fontFamilyMap.get(a)||a;const l=Math.hypot(n[2],n[3]),c=l*E(m=ws,Ji,aP).call(m,a,g(this,dc));let d,h;o===0?(d=n[4],h=n[5]-c):(d=n[4]+c*Math.sin(o),h=n[5]-c*Math.cos(o));const u="calc(var(--scale-factor)*",f=s.style;g(this,Ri)===g(this,Rh)?(f.left=`${(100*d/g(this,Pf)).toFixed(2)}%`,f.top=`${(100*h/g(this,Ff)).toFixed(2)}%`):(f.left=`${u}${d.toFixed(2)}px)`,f.top=`${u}${h.toFixed(2)}px)`),f.fontSize=`${u}${(g(ws,Na)*l).toFixed(2)}px)`,f.fontFamily=a,i.fontSize=l,s.setAttribute("role","presentation"),s.textContent=t.str,s.dir=t.dir,g(this,Af)&&(s.dataset.fontName=r.fontSubstitutionLoadedName||t.fontName),o!==0&&(i.angle=o*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const v=Math.abs(t.transform[0]),C=Math.abs(t.transform[3]);v!==C&&Math.max(v,C)/Math.min(v,C)>1.5&&(p=!0)}if(p&&(i.canvasWidth=r.vertical?t.height:t.width),g(this,Df).set(s,i),g(this,pr).div=s,g(this,pr).properties=i,E(this,ea,Wb).call(this,g(this,pr)),i.hasText&&g(this,Ri).append(s),i.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),g(this,Ri).append(v)}},Wb=function(t){var a;const{div:s,properties:i,ctx:n}=t,{style:o}=s;let r="";if(g(ws,Na)>1&&(r=`scale(${1/g(ws,Na)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:l}=o,{canvasWidth:c,fontSize:d}=i;E(a=ws,Ji,$b).call(a,n,d*g(this,Oa),l);const{width:h}=n.measureText(s.textContent);h>0&&(r=`scaleX(${c*g(this,Oa)/h}) ${r}`)}i.angle!==0&&(r=`rotate(${i.angle}deg) ${r}`),r.length>0&&(o.transform=r)},Ji=new WeakSet,Cm=function(t=null){let s=g(this,fc).get(t||(t=""));if(!s){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),s=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),g(this,fc).set(t,s),g(this,Mf).set(s,{size:0,family:""})}return s},$b=function(t,s,i){const n=g(this,Mf).get(t);s===n.size&&i===n.family||(t.font=`${s}px ${i}`,n.size=s,n.family=i)},rP=function(){if(g(this,Na)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),x(this,Na,t.getBoundingClientRect().height),t.remove()},aP=function(t,s){const i=g(this,gc).get(t);if(i)return i;const n=E(this,Ji,Cm).call(this,s);n.canvas.width=n.canvas.height=wi,E(this,Ji,$b).call(this,n,wi,t);const o=n.measureText("");let r=o.fontBoundingBoxAscent,a=Math.abs(o.fontBoundingBoxDescent);if(r){const d=r/(r+a);return g(this,gc).set(t,d),n.canvas.width=n.canvas.height=0,d}n.strokeStyle="red",n.clearRect(0,0,wi,wi),n.strokeText("g",0,0);let l=n.getImageData(0,0,wi,wi).data;a=0;for(let d=l.length-1-3;d>=0;d-=4)if(l[d]>0){a=Math.ceil(d/4/wi);break}n.clearRect(0,0,wi,wi),n.strokeText("A",0,wi),l=n.getImageData(0,0,wi,wi).data,r=0;for(let d=0,h=l.length;d<h;d+=4)if(l[d]>0){r=wi-Math.floor(d/4/wi);break}n.canvas.width=n.canvas.height=0;const c=r?r/(r+a):L2;return g(this,gc).set(t,c),c},P(ws,Ji),P(ws,gc,new Map),P(ws,fc,new Map),P(ws,Mf,new WeakMap),P(ws,Na,null),P(ws,Ph,new Set);let Mg=ws;class kg{static textContent(t){const s=[],i={items:s,styles:Object.create(null)};function n(o){var l;if(!o)return;let r=null;const a=o.name;if(a==="#text")r=o.value;else if(kg.shouldBuildText(a))(l=o==null?void 0:o.attributes)!=null&&l.textContent?r=o.attributes.textContent:o.value&&(r=o.value);else return;if(r!==null&&s.push({str:r}),!!o.children)for(const c of o.children)n(c)}return n(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const O2=65536,N2=100,H2=5e3,B2=ri?QO:qO,G2=ri?JO:WF,V2=ri?XO:YO,z2=ri?ZO:KF;function W2(e={}){typeof e=="string"||e instanceof URL?e={url:e}:(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const t=new Ub,{docId:s}=t,i=e.url?$2(e.url):null,n=e.data?U2(e.data):null,o=e.httpHeaders||null,r=e.withCredentials===!0,a=e.password??null,l=e.range instanceof lP?e.range:null,c=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:O2;let d=e.worker instanceof $d?e.worker:null;const h=e.verbosity,u=typeof e.docBaseUrl=="string"&&!yC(e.docBaseUrl)?e.docBaseUrl:null,f=typeof e.cMapUrl=="string"?e.cMapUrl:null,p=e.cMapPacked!==!1,m=e.CMapReaderFactory||G2,v=typeof e.standardFontDataUrl=="string"?e.standardFontDataUrl:null,C=e.StandardFontDataFactory||z2,b=e.stopAtErrors!==!0,y=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,S=e.isEvalSupported!==!1,R=typeof e.isOffscreenCanvasSupported=="boolean"?e.isOffscreenCanvasSupported:!ri,A=typeof e.isChrome=="boolean"?e.isChrome:!pi.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),F=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,T=typeof e.disableFontFace=="boolean"?e.disableFontFace:ri,k=e.fontExtraProperties===!0,N=e.enableXfa===!0,I=e.ownerDocument||globalThis.document,O=e.disableRange===!0,V=e.disableStream===!0,ee=e.disableAutoFetch===!0,G=e.pdfBug===!0,ne=e.CanvasFactory||B2,te=e.FilterFactory||V2,K=e.enableHWA===!0,ve=l?l.length:e.length??NaN,ce=typeof e.useSystemFonts=="boolean"?e.useSystemFonts:!ri&&!T,Se=typeof e.useWorkerFetch=="boolean"?e.useWorkerFetch:m===WF&&C===KF&&f&&v&&$u(f,document.baseURI)&&$u(v,document.baseURI);e.canvasFactory&&Nx("`canvasFactory`-instance option, please use `CanvasFactory` instead."),e.filterFactory&&Nx("`filterFactory`-instance option, please use `FilterFactory` instead.");const Ce=null;EO(h);const re={canvasFactory:new ne({ownerDocument:I,enableHWA:K}),filterFactory:new te({docId:s,ownerDocument:I}),cMapReaderFactory:Se?null:new m({baseUrl:f,isCompressed:p}),standardFontDataFactory:Se?null:new C({baseUrl:v})};if(!d){const Q={verbosity:h,port:Lr.workerPort};d=Q.port?$d.fromPort(Q):new $d(Q),t._worker=d}const ie={docId:s,apiVersion:"4.8.69",data:n,password:a,disableAutoFetch:ee,rangeChunkSize:c,length:ve,docBaseUrl:u,enableXfa:N,evaluatorOptions:{maxImageSize:y,disableFontFace:T,ignoreErrors:b,isEvalSupported:S,isOffscreenCanvasSupported:R,isChrome:A,canvasMaxAreaInBytes:F,fontExtraProperties:k,useSystemFonts:ce,cMapUrl:Se?f:null,standardFontDataUrl:Se?v:null}},X={disableFontFace:T,fontExtraProperties:k,ownerDocument:I,pdfBug:G,styleElement:Ce,loadingParams:{disableAutoFetch:ee,enableXfa:N}};return d.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Q=d.messageHandler.sendWithPromise("GetDocRequest",ie,n?[n.buffer]:null);let se;if(l)se=new m2(l,{disableRange:O,disableStream:V});else if(!n){if(!i)throw new Error("getDocument - no `url` parameter provided.");let De;ri?De=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&$u(i)?Yx:T2:De=$u(i)?Yx:R2,se=new De({url:i,length:ve,httpHeaders:o,withCredentials:r,rangeChunkSize:c,disableRange:O,disableStream:V})}return Q.then(De=>{if(t.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const we=new Qu(s,De,d.port),Me=new Y2(we,t,se,X,re);t._transport=Me,we.send("Ready",null)})}).catch(t._capability.reject),t}function $2(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(ri&&typeof e=="string")return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function U2(e){if(ri&&typeof Buffer<"u"&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if(typeof e=="string")return wC(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||typeof e=="object"&&!isNaN(e==null?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Xx(e){return typeof e=="object"&&Number.isInteger(e==null?void 0:e.num)&&e.num>=0&&Number.isInteger(e==null?void 0:e.gen)&&e.gen>=0}var Yv;const Xv=class Xv{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${li(Xv,Yv)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,s,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((s=this._transport)==null?void 0:s.destroy())}catch(n){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,n}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Yv=new WeakMap,P(Xv,Yv,0);let Ub=Xv;class lP{constructor(t,s,i=!1,n=null){this.length=t,this.initialData=s,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,s){for(const i of this._rangeListeners)i(t,s)}onDataProgress(t,s){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,s)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const s of this._progressiveReadListeners)s(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,s){zt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class j2{constructor(t,s){this._pdfInfo=t,this._transport=s}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return vt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:s}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(s)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ha,mr,mn,_d,wm;class K2{constructor(t,s,i,n=!1){P(this,mn);P(this,Ha,null);P(this,mr,!1);this._pageIndex=t,this._pageInfo=s,this._transport=i,this._stats=n?new Ox:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new cP,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:s=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:o=!1}={}){return new Sp({viewBox:this.view,scale:t,rotation:s,offsetX:i,offsetY:n,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:s}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,s)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return vt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:s,intent:i="display",annotationMode:n=Ca.ENABLE,transform:o=null,background:r=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:d=null,isEditing:h=!1}){var S,R;(S=this._stats)==null||S.time("Overall");const u=this._transport.getRenderingIntent(i,n,d,h),{renderingIntent:f,cacheKey:p}=u;x(this,mr,!1),E(this,mn,wm).call(this),a||(a=this._transport.getOptionalContentConfig(f));let m=this._intentStates.get(p);m||(m=Object.create(null),this._intentStates.set(p,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const v=!!(f&Ui.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(u));const C=A=>{var F;m.renderTasks.delete(b),(this._maybeCleanupAfterRender||v)&&x(this,mr,!0),E(this,mn,_d).call(this,!v),A?(b.capability.reject(A),this._abortOperatorList({intentState:m,reason:A instanceof Error?A:new Error(A)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(F=globalThis.Stats)!=null&&F.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new Kb({callback:C,params:{canvasContext:t,viewport:s,transform:o,background:r},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:c});(m.renderTasks||(m.renderTasks=new Set)).add(b);const y=b.task;return Promise.all([m.displayReadyCapability.promise,a]).then(([A,F])=>{var T;if(this.destroyed){C();return}if((T=this._stats)==null||T.time("Rendering"),!(F.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:A,optionalContentConfig:F}),b.operatorListChanged()}).catch(C),y}getOperatorList({intent:t="display",annotationMode:s=Ca.ENABLE,printAnnotationStorage:i=null,isEditing:n=!1}={}){var c;function o(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const r=this._transport.getRenderingIntent(t,s,i,n,!0);let a=this._intentStates.get(r.cacheKey);a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=o,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(r)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:s=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:s===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>kg.textContent(i));const s=this.streamTextContent(t);return new Promise(function(i,n){function o(){r.read().then(function({value:l,done:c}){if(c){i(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),o()},n)}const r=s.getReader(),a={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const s of this._intentStates.values())if(this._abortOperatorList({intentState:s,reason:new Error("Page was destroyed."),force:!0}),!s.opListReadCapability)for(const i of s.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),x(this,mr,!1),E(this,mn,wm).call(this),Promise.all(t)}cleanup(t=!1){x(this,mr,!0);const s=E(this,mn,_d).call(this,!1);return t&&s&&this._stats&&(this._stats=new Ox),s}_startRenderPage(t,s){var n,o;const i=this._intentStates.get(s);i&&((n=this._stats)==null||n.timeEnd("Page Request"),(o=i.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,s){for(let i=0,n=t.length;i<n;i++)s.operatorList.fnArray.push(t.fnArray[i]),s.operatorList.argsArray.push(t.argsArray[i]);s.operatorList.lastChunk=t.lastChunk,s.operatorList.separateAnnots=t.separateAnnots;for(const i of s.renderTasks)i.operatorListChanged();t.lastChunk&&E(this,mn,_d).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:s,annotationStorageSerializable:i,modifiedIds:n}){const{map:o,transfer:r}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:s,annotationStorage:o,modifiedIds:n},r).getReader(),c=this._intentStates.get(s);c.streamReader=l;const d=()=>{l.read().then(({value:h,done:u})=>{if(u){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),d())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const u of c.renderTasks)u.operatorListChanged();E(this,mn,_d).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:t,reason:s,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(s instanceof GS){let n=N2;s.extraDelay>0&&s.extraDelay<1e3&&(n+=s.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:s,force:!0})},n);return}}if(t.streamReader.cancel(new ud(s.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[n,o]of this._intentStates)if(o===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}Ha=new WeakMap,mr=new WeakMap,mn=new WeakSet,_d=function(t=!1){if(E(this,mn,wm).call(this),!g(this,mr)||this.destroyed)return!1;if(t)return x(this,Ha,setTimeout(()=>{x(this,Ha,null),E(this,mn,_d).call(this,!1)},H2)),!1;for(const{renderTasks:s,operatorList:i}of this._intentStates.values())if(s.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,mr,!1),!0},wm=function(){g(this,Ha)&&(clearTimeout(g(this,Ha)),x(this,Ha,null))};var vr,Qv;class q2{constructor(){P(this,vr,new Map);P(this,Qv,Promise.resolve())}postMessage(t,s){const i={data:structuredClone(t,s?{transfer:s}:null)};g(this,Qv).then(()=>{for(const[n]of g(this,vr))n.call(this,i)})}addEventListener(t,s,i=null){let n=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:o}=i;if(o.aborted){it("LoopbackPort - cannot use an `aborted` signal.");return}const r=()=>this.removeEventListener(t,s);n=()=>o.removeEventListener("abort",r),o.addEventListener("abort",r)}g(this,vr).set(s,n)}removeEventListener(t,s){const i=g(this,vr).get(s);i==null||i(),g(this,vr).delete(s)}terminate(){for(const[,t]of g(this,vr))t==null||t();g(this,vr).clear()}}vr=new WeakMap,Qv=new WeakMap;var Jv,pc,mc,Th,bm,Dh,ym;const $t=class $t{constructor({name:t=null,port:s=null,verbosity:i=AO()}={}){P(this,Th);var n;if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,s){if((n=g($t,mc))!=null&&n.has(s))throw new Error("Cannot use more than one PDFWorker per port.");(g($t,mc)||x($t,mc,new WeakMap)).set(s,this),this._initializeFromPort(s);return}this._initialize()}get promise(){return ri?Promise.all([ll.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Qu("main","worker",t),this._messageHandler.on("ready",function(){}),E(this,Th,bm).call(this)}_initialize(){if(g($t,pc)||g($t,Dh,ym)){this._setupFakeWorker();return}let{workerSrc:t}=$t;try{$t._isSameOrigin(window.location.href,t)||(t=$t._createCDNWrapper(new URL(t,window.location).href));const s=new Worker(t,{type:"module"}),i=new Qu("main","worker",s),n=()=>{o.abort(),i.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;s.addEventListener("error",()=>{this._webWorker||n()},{signal:o.signal}),i.on("test",a=>{if(o.abort(),this.destroyed||!a){n();return}this._messageHandler=i,this._port=s,this._webWorker=s,E(this,Th,bm).call(this)}),i.on("ready",a=>{if(o.abort(),this.destroyed){n();return}try{r()}catch{this._setupFakeWorker()}});const r=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};r();return}catch{vC("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){g($t,pc)||(it("Setting up fake worker."),x($t,pc,!0)),$t._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new q2;this._port=s;const i=`fake${li($t,Jv)._++}`,n=new Qu(i+"_worker",i,s);t.setup(n,s),this._messageHandler=new Qu(i,i+"_worker",s),E(this,Th,bm).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=g($t,mc))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var i;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const s=(i=g(this,mc))==null?void 0:i.get(t.port);if(s){if(s._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return s}return new $t(t)}static get workerSrc(){if(Lr.workerSrc)return Lr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return vt(this,"_setupFakeWorkerGlobal",(async()=>g(this,Dh,ym)?g(this,Dh,ym):(await import(this.workerSrc)).WorkerMessageHandler)())}};Jv=new WeakMap,pc=new WeakMap,mc=new WeakMap,Th=new WeakSet,bm=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Dh=new WeakSet,ym=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},P($t,Dh),P($t,Jv,0),P($t,pc,!1),P($t,mc),ri&&(x($t,pc,!0),Lr.workerSrc||(Lr.workerSrc="./pdf.worker.mjs")),$t._isSameOrigin=(t,s)=>{let i;try{if(i=new URL(t),!i.origin||i.origin==="null")return!1}catch{return!1}const n=new URL(s,i);return i.origin===n.origin},$t._createCDNWrapper=t=>{const s=`await import("${t}");`;return URL.createObjectURL(new Blob([s],{type:"text/javascript"}))};let $d=$t;var Cr,Eo,_h,Mh,Ao,vc,Ju;class Y2{constructor(t,s,i,n,o){P(this,vc);P(this,Cr,new Map);P(this,Eo,new Map);P(this,_h,new Map);P(this,Mh,new Map);P(this,Ao,null);this.messageHandler=t,this.loadingTask=s,this.commonObjs=new cP,this.fontLoader=new jO({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return vt(this,"annotationStorage",new $S)}getRenderingIntent(t,s=Ca.ENABLE,i=null,n=!1,o=!1){let r=Ui.DISPLAY,a=Ib;switch(t){case"any":r=Ui.ANY;break;case"display":break;case"print":r=Ui.PRINT;break;default:it(`getRenderingIntent - invalid intent: ${t}`)}const l=r&Ui.PRINT&&i instanceof GF?i:this.annotationStorage;switch(s){case Ca.DISABLE:r+=Ui.ANNOTATIONS_DISABLE;break;case Ca.ENABLE:break;case Ca.ENABLE_FORMS:r+=Ui.ANNOTATIONS_FORMS;break;case Ca.ENABLE_STORAGE:r+=Ui.ANNOTATIONS_STORAGE,a=l.serializable;break;default:it(`getRenderingIntent - invalid annotationMode: ${s}`)}n&&(r+=Ui.IS_EDITING),o&&(r+=Ui.OPLIST);const{ids:c,hash:d}=l.modifiedIds,h=[r,a.hash,d];return{renderingIntent:r,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=g(this,Ao))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of g(this,Eo).values())t.push(n._destroy());g(this,Eo).clear(),g(this,_h).clear(),g(this,Mh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const s=this.messageHandler.sendWithPromise("Terminate",null);return t.push(s),Promise.all(t).then(()=>{var n;this.commonObjs.clear(),this.fontLoader.clear(),g(this,Cr).clear(),this.filterFactory.destroy(),Mg.cleanup(),(n=this._networkStream)==null||n.cancelAllRequests(new ud("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:s}=this;t.on("GetReader",(i,n)=>{Rs(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},n.onPull=()=>{this._fullReader.read().then(function({value:o,done:r}){if(r){n.close();return}Rs(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{n.error(o)})},n.onCancel=o=>{this._fullReader.cancel(o),n.ready.catch(r=>{if(!this.destroyed)throw r})}}),t.on("ReaderHeadersReady",async i=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:o,contentLength:r}=this._fullReader;return(!n||!o)&&(this._lastProgress&&((a=s.onProgress)==null||a.call(s,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=s.onProgress)==null||c.call(s,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:n,isRangeSupported:o,contentLength:r}}),t.on("GetRangeReader",(i,n)=>{Rs(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){n.close();return}n.onPull=()=>{o.read().then(function({value:r,done:a}){if(a){n.close();return}Rs(r instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{o.cancel(r),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,s._capability.resolve(new j2(i,this))}),t.on("DocException",function(i){let n;switch(i.name){case"PasswordException":n=new ub(i.message,i.code);break;case"InvalidPDFException":n=new uF(i.message);break;case"MissingPDFException":n=new hd(i.message);break;case"UnexpectedResponseException":n=new CC(i.message,i.status);break;case"UnknownErrorException":n=new gb(i.message,i.details);break;default:zt("DocException - expected a valid Error.")}s._capability.reject(n)}),t.on("PasswordRequest",i=>{if(x(this,Ao,Promise.withResolvers()),s.onPassword){const n=o=>{o instanceof Error?g(this,Ao).reject(o):g(this,Ao).resolve({password:o})};try{s.onPassword(n,i.code)}catch(o){g(this,Ao).reject(o)}}else g(this,Ao).reject(new ub(i.message,i.code));return g(this,Ao).promise}),t.on("DataLoaded",i=>{var n;(n=s.onProgress)==null||n.call(s,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;g(this,Eo).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,n,o])=>{var r;if(this.destroyed||this.commonObjs.has(i))return null;switch(n){case"Font":const{disableFontFace:a,fontExtraProperties:l,pdfBug:c}=this._params;if("error"in o){const f=o.error;it(`Error during font loading: ${f}`),this.commonObjs.resolve(i,f);break}const d=c&&((r=globalThis.FontInspector)!=null&&r.enabled)?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,h=new KO(o,{disableFontFace:a,inspectFont:d});this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l&&h.data&&(h.data=null),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":const{imageRef:u}=o;Rs(u,"The imageRef must be defined.");for(const f of g(this,Eo).values())for(const[,p]of f.objs)if((p==null?void 0:p.ref)===u)return p.dataLen?(this.commonObjs.resolve(i,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([i,n,o,r])=>{var l;if(this.destroyed)return;const a=g(this,Eo).get(n);if(!a.objs.has(i)){if(a._intentStates.size===0){(l=r==null?void 0:r.bitmap)==null||l.close();return}switch(o){case"Image":a.objs.resolve(i,r),(r==null?void 0:r.dataLen)>yO&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(i,r);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",i=>{var n;this.destroyed||(n=s.onProgress)==null||n.call(s,{loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),t.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&it("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:s}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},s).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const s=t-1,i=g(this,_h).get(s);if(i)return i;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&g(this,Mh).set(o.refStr,t);const r=new K2(s,o,this,this._params.pdfBug);return g(this,Eo).set(s,r),r});return g(this,_h).set(s,n),n}getPageIndex(t){return Xx(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,s){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:s})}getFieldObjects(){return E(this,vc,Ju).call(this,"GetFieldObjects")}hasJSActions(){return E(this,vc,Ju).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return E(this,vc,Ju).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return E(this,vc,Ju).call(this,"GetOptionalContentConfig").then(s=>new p2(s,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",s=g(this,Cr).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise(t,null).then(n=>{var o,r;return{info:n[0],metadata:n[1]?new g2(n[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((r=this._fullReader)==null?void 0:r.contentLength)??null}});return g(this,Cr).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const s of g(this,Eo).values())if(!s.cleanup())throw new Error(`startCleanup: Page ${s.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),g(this,Cr).clear(),this.filterFactory.destroy(!0),Mg.cleanup()}}cachedPageNumber(t){if(!Xx(t))return null;const s=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return g(this,Mh).get(s)??null}}Cr=new WeakMap,Eo=new WeakMap,_h=new WeakMap,Mh=new WeakMap,Ao=new WeakMap,vc=new WeakSet,Ju=function(t,s=null){const i=g(this,Cr).get(t);if(i)return i;const n=this.messageHandler.sendWithPromise(t,s);return g(this,Cr).set(t,n),n};const Up=Symbol("INITIAL_DATA");var On,kf,jb;class cP{constructor(){P(this,kf);P(this,On,Object.create(null))}get(t,s=null){if(s){const n=E(this,kf,jb).call(this,t);return n.promise.then(()=>s(n.data)),null}const i=g(this,On)[t];if(!i||i.data===Up)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const s=g(this,On)[t];return!!s&&s.data!==Up}resolve(t,s=null){const i=E(this,kf,jb).call(this,t);i.data=s,i.resolve()}clear(){var t;for(const s in g(this,On)){const{data:i}=g(this,On)[s];(t=i==null?void 0:i.bitmap)==null||t.close()}x(this,On,Object.create(null))}*[Symbol.iterator](){for(const t in g(this,On)){const{data:s}=g(this,On)[t];s!==Up&&(yield[t,s])}}}On=new WeakMap,kf=new WeakSet,jb=function(t){var s;return(s=g(this,On))[t]||(s[t]={...Promise.withResolvers(),data:Up})};var Ba;class X2{constructor(t){P(this,Ba,null);x(this,Ba,t),this.onContinue=null}get promise(){return g(this,Ba).capability.promise}cancel(t=0){g(this,Ba).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=g(this,Ba).operatorList;if(!t)return!1;const{annotationCanvasMap:s}=g(this,Ba);return t.form||t.canvas&&(s==null?void 0:s.size)>0}}Ba=new WeakMap;var Ga,Cc;const Il=class Il{constructor({callback:t,params:s,objs:i,commonObjs:n,annotationCanvasMap:o,operatorList:r,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:u=null}){P(this,Ga,null);this.callback=t,this.params=s,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new X2(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=s.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:s}){var a,l;if(this.cancelled)return;if(this._canvas){if(g(Il,Cc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");g(Il,Cc).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:n,transform:o,background:r}=this.params;this.gfx=new Wd(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:n,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(t=null,s=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),g(this,Ga)&&(window.cancelAnimationFrame(g(this,Ga)),x(this,Ga,null)),g(Il,Cc).delete(this._canvas),this.callback(t||new GS(`Rendering cancelled, page ${this._pageIndex+1}`,s))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,Ga,window.requestAnimationFrame(()=>{x(this,Ga,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),g(Il,Cc).delete(this._canvas),this.callback())))}};Ga=new WeakMap,Cc=new WeakMap,P(Il,Cc,new WeakSet);let Kb=Il;const Q2="4.8.69",J2="3634dab10";function Qx(e){return Math.floor(Math.max(0,Math.min(1,e))*255).toString(16).padStart(2,"0")}function Lu(e){return Math.max(0,Math.min(255,255*e))}class Jx{static CMYK_G([t,s,i,n]){return["G",1-Math.min(1,.3*t+.59*i+.11*s+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Lu(t),[t,t,t]}static G_HTML([t]){const s=Qx(t);return`#${s}${s}${s}`}static RGB_G([t,s,i]){return["G",.3*t+.59*s+.11*i]}static RGB_rgb(t){return t.map(Lu)}static RGB_HTML(t){return`#${t.map(Qx).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,s,i,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,i+n),1-Math.min(1,s+n)]}static CMYK_rgb([t,s,i,n]){return[Lu(1-Math.min(1,t+n)),Lu(1-Math.min(1,i+n)),Lu(1-Math.min(1,s+n))]}static CMYK_HTML(t){const s=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(s)}static RGB_CMYK([t,s,i]){const n=1-t,o=1-s,r=1-i,a=Math.min(n,o,r);return["CMYK",n,o,r,a]}}class Z2{create(t,s,i=!1){if(t<=0||s<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${s}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${s}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){zt("Abstract method `_createSVG` called.")}}class YS extends Z2{_createSVG(t){return document.createElementNS(ir,t)}}class dP{static setupStorage(t,s,i,n,o){const r=n.getValue(s,{value:null});switch(i.name){case"textarea":if(r.value!==null&&(t.textContent=r.value),o==="print")break;t.addEventListener("input",a=>{n.setValue(s,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(r.value===i.attributes.xfaOn?t.setAttribute("checked",!0):r.value===i.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",a=>{n.setValue(s,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(r.value!==null&&t.setAttribute("value",r.value),o==="print")break;t.addEventListener("input",a=>{n.setValue(s,{value:a.target.value})})}break;case"select":if(r.value!==null){t.setAttribute("value",r.value);for(const a of i.children)a.attributes.value===r.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;n.setValue(s,{value:c})});break}}static setAttributes({html:t,element:s,storage:i=null,intent:n,linkService:o}){const{attributes:r}=s,a=t instanceof HTMLAnchorElement;r.type==="radio"&&(r.name=`${r.name}-${n}`);for(const[l,c]of Object.entries(r))if(c!=null)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,c)}a&&o.addLinkAttributes(t,r.href,r.newWindow),i&&r.dataId&&this.setupStorage(t,r.dataId,s,i)}static render(t){var h,u;const s=t.annotationStorage,i=t.linkService,n=t.xfaHtml,o=t.intent||"display",r=document.createElement(n.name);n.attributes&&this.setAttributes({html:r,element:n,intent:o,linkService:i});const a=o!=="richText",l=t.div;if(l.append(r),t.viewport){const f=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=f}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(n.children.length===0){if(n.value){const f=document.createTextNode(n.value);r.append(f),a&&kg.shouldBuildText(n.name)&&c.push(f)}return{textDivs:c}}const d=[[n,-1,r]];for(;d.length>0;){const[f,p,m]=d.at(-1);if(p+1===f.children.length){d.pop();continue}const v=f.children[++d.at(-1)[1]];if(v===null)continue;const{name:C}=v;if(C==="#text"){const y=document.createTextNode(v.value);c.push(y),m.append(y);continue}const b=(h=v==null?void 0:v.attributes)!=null&&h.xmlns?document.createElementNS(v.attributes.xmlns,C):document.createElement(C);if(m.append(b),v.attributes&&this.setAttributes({html:b,element:v,storage:s,intent:o,linkService:i}),((u=v.children)==null?void 0:u.length)>0)d.push([v,-1,b]);else if(v.value){const y=document.createTextNode(v.value);a&&kg.shouldBuildText(C)&&c.push(y),b.append(y)}}for(const f of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const s=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=s,t.div.hidden=!1}}const Rp=1e3,eN=9,Zc=new WeakSet;function Vr(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class tN{static create(t){switch(t.data.annotationType){case Cs.LINK:return new hP(t);case Cs.TEXT:return new sN(t);case Cs.WIDGET:switch(t.data.fieldType){case"Tx":return new iN(t);case"Btn":return t.data.radioButton?new fP(t):t.data.checkBox?new oN(t):new rN(t);case"Ch":return new aN(t);case"Sig":return new nN(t)}return new gd(t);case Cs.POPUP:return new Yb(t);case Cs.FREETEXT:return new wP(t);case Cs.LINE:return new cN(t);case Cs.SQUARE:return new dN(t);case Cs.CIRCLE:return new hN(t);case Cs.POLYLINE:return new bP(t);case Cs.CARET:return new gN(t);case Cs.INK:return new XS(t);case Cs.POLYGON:return new uN(t);case Cs.HIGHLIGHT:return new yP(t);case Cs.UNDERLINE:return new fN(t);case Cs.SQUIGGLY:return new pN(t);case Cs.STRIKEOUT:return new mN(t);case Cs.STAMP:return new SP(t);case Cs.FILEATTACHMENT:return new vN(t);default:return new ds(t)}}}var wc,kh,Ih,If,qb;const Q0=class Q0{constructor(t,{isRenderable:s=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){P(this,If);P(this,wc,null);P(this,kh,!1);P(this,Ih,null);this.isRenderable=s,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,s&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:s,richText:i}){return!!(t!=null&&t.str||s!=null&&s.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Q0._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;g(this,wc)||x(this,wc,{rect:this.data.rect.slice(0)});const{rect:s}=t;s&&E(this,If,qb).call(this,s),(i=g(this,Ih))==null||i.popup.updateEdited(t)}resetEdited(){var t;g(this,wc)&&(E(this,If,qb).call(this,g(this,wc).rect),(t=g(this,Ih))==null||t.popup.resetEdited(),x(this,wc,null))}_createContainer(t){const{data:s,parent:{page:i,viewport:n}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",s.id),this instanceof gd||(o.tabIndex=Rp);const{style:r}=o;if(r.zIndex=this.parent.zIndex++,s.alternativeText&&(o.title=s.alternativeText),s.noRotate&&o.classList.add("norotate"),!s.rect||this instanceof Yb){const{rotation:m}=s;return!s.hasOwnCanvas&&m!==0&&this.setRotation(m,o),o}const{width:a,height:l}=Vr(s.rect);if(!t&&s.borderStyle.width>0){r.borderWidth=`${s.borderStyle.width}px`;const m=s.borderStyle.horizontalCornerRadius,v=s.borderStyle.verticalCornerRadius;if(m>0||v>0){const b=`calc(${m}px * var(--scale-factor)) / calc(${v}px * var(--scale-factor))`;r.borderRadius=b}else if(this instanceof fP){const b=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;r.borderRadius=b}switch(s.borderStyle.style){case ku.SOLID:r.borderStyle="solid";break;case ku.DASHED:r.borderStyle="dashed";break;case ku.BEVELED:it("Unimplemented border style: beveled");break;case ku.INSET:it("Unimplemented border style: inset");break;case ku.UNDERLINE:r.borderBottomStyle="solid";break}const C=s.borderColor||null;C?(x(this,kh,!0),r.borderColor=Ne.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):r.borderWidth=0}const c=Ne.normalizeRect([s.rect[0],i.view[3]-s.rect[1]+i.view[1],s.rect[2],i.view[3]-s.rect[3]+i.view[1]]),{pageWidth:d,pageHeight:h,pageX:u,pageY:f}=n.rawDims;r.left=`${100*(c[0]-u)/d}%`,r.top=`${100*(c[1]-f)/h}%`;const{rotation:p}=s;return s.hasOwnCanvas||p===0?(r.width=`${100*a/d}%`,r.height=`${100*l/h}%`):this.setRotation(p,o),o}setRotation(t,s=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims,{width:o,height:r}=Vr(this.data.rect);let a,l;t%180===0?(a=100*o/i,l=100*r/n):(a=100*r/i,l=100*o/n),s.style.width=`${a}%`,s.style.height=`${l}%`,s.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(s,i,n)=>{const o=n.detail[s],r=o[0],a=o.slice(1);n.target.style[i]=Jx[`${r}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:Jx[`${r}_rgb`](a)})};return vt(this,"_commonActions",{display:s=>{const{display:i}=s.detail,n=i%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:i===1||i===2})},print:s=>{this.annotationStorage.setValue(this.data.id,{noPrint:!s.detail.print})},hidden:s=>{const{hidden:i}=s.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:s=>{setTimeout(()=>s.target.focus({preventScroll:!1}),0)},userName:s=>{s.target.title=s.detail.userName},readonly:s=>{s.target.disabled=s.detail.readonly},required:s=>{this._setRequired(s.target,s.detail.required)},bgColor:s=>{t("bgColor","backgroundColor",s)},fillColor:s=>{t("fillColor","backgroundColor",s)},fgColor:s=>{t("fgColor","color",s)},textColor:s=>{t("textColor","color",s)},borderColor:s=>{t("borderColor","borderColor",s)},strokeColor:s=>{t("strokeColor","borderColor",s)},rotation:s=>{const i=s.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,s){const i=this._commonActions;for(const n of Object.keys(s.detail)){const o=t[n]||i[n];o==null||o(s)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const s=this.annotationStorage.getRawValue(this.data.id);if(!s)return;const i=this._commonActions;for(const[n,o]of Object.entries(s)){const r=i[n];if(r){const a={detail:{[n]:o},target:t};r(a),delete s[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[s,i,n,o]=this.data.rect.map(m=>Math.fround(m));if(t.length===8){const[m,v,C,b]=t.subarray(2,6);if(n===m&&o===v&&s===C&&i===b)return}const{style:r}=this.container;let a;if(g(this,kh)){const{borderColor:m,borderWidth:v}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const l=n-s,c=o-i,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const u=d.createElement("defs");h.append(u);const f=d.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),u.append(f);for(let m=2,v=t.length;m<v;m+=8){const C=t[m],b=t[m+1],y=t[m+2],S=t[m+3],R=d.createElement("rect"),A=(y-s)/l,F=(o-b)/c,T=(C-y)/l,k=(b-S)/c;R.setAttribute("x",A),R.setAttribute("y",F),R.setAttribute("width",T),R.setAttribute("height",k),f.append(R),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${A}" y="${F}" width="${T}" height="${k}"/>`)}g(this,kh)&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{data:t}=this,s=x(this,Ih,new Yb({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(s.render())}render(){zt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,s=null){const i=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:o,id:r,exportValues:a}of n){if(o===-1||r===s)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${r}"]`);if(c&&!Zc.has(c)){it(`_getElementsByName - element not allowed: ${r}`);continue}i.push({id:r,exportValue:l,domElement:c})}return i}for(const n of document.getElementsByName(t)){const{exportValue:o}=n,r=n.getAttribute("data-element-id");r!==s&&Zc.has(n)&&i.push({id:r,exportValue:o,domElement:n})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const s of t)s.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:s}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:s})})}};wc=new WeakMap,kh=new WeakMap,Ih=new WeakMap,If=new WeakSet,qb=function(t){const{container:{style:s},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:r,pageX:a,pageY:l}}}}=this;i==null||i.splice(0,4,...t);const{width:c,height:d}=Vr(t);s.left=`${100*(t[0]-a)/o}%`,s.top=`${100*(r-t[3]+l)/r}%`,n===0?(s.width=`${100*c/o}%`,s.height=`${100*d/r}%`):this.setRotation(n)};let ds=Q0;var Ki,Fl,uP,gP;class hP extends ds{constructor(s,i=null){super(s,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});P(this,Ki);this.isTooltipOnly=s.data.isTooltipOnly}render(){const{data:s,linkService:i}=this,n=document.createElement("a");n.setAttribute("data-element-id",s.id);let o=!1;return s.url?(i.addLinkAttributes(n,s.url,s.newWindow),o=!0):s.action?(this._bindNamedAction(n,s.action),o=!0):s.attachment?(E(this,Ki,uP).call(this,n,s.attachment,s.attachmentDest),o=!0):s.setOCGState?(E(this,Ki,gP).call(this,n,s.setOCGState),o=!0):s.dest?(this._bindLink(n,s.dest),o=!0):(s.actions&&(s.actions.Action||s.actions["Mouse Up"]||s.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,s),o=!0),s.resetForm?(this._bindResetFormAction(n,s.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(n,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(n),this.container}_bindLink(s,i){s.href=this.linkService.getDestinationHash(i),s.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&E(this,Ki,Fl).call(this)}_bindNamedAction(s,i){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeNamedAction(i),!1),E(this,Ki,Fl).call(this)}_bindJSAction(s,i){s.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(i.actions)){const r=n.get(o);r&&(s[r]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:o}}),!1})}s.onclick||(s.onclick=()=>!1),E(this,Ki,Fl).call(this)}_bindResetFormAction(s,i){const n=s.onclick;if(n||(s.href=this.linkService.getAnchorUrl("")),E(this,Ki,Fl).call(this),!this._fieldObjects){it('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(s.onclick=()=>!1);return}s.onclick=()=>{var h;n==null||n();const{fields:o,refs:r,include:a}=i,l=[];if(o.length!==0||r.length!==0){const u=new Set(r);for(const f of o){const p=this._fieldObjects[f]||[];for(const{id:m}of p)u.add(m)}for(const f of Object.values(this._fieldObjects))for(const p of f)u.has(p.id)===a&&l.push(p)}else for(const u of Object.values(this._fieldObjects))l.push(...u);const c=this.annotationStorage,d=[];for(const u of l){const{id:f}=u;switch(d.push(f),u.type){case"text":{const m=u.defaultValue||"";c.setValue(f,{value:m});break}case"checkbox":case"radiobutton":{const m=u.defaultValue===u.exportValues;c.setValue(f,{value:m});break}case"combobox":case"listbox":{const m=u.defaultValue||"";c.setValue(f,{value:m});break}default:continue}const p=document.querySelector(`[data-element-id="${f}"]`);if(p){if(!Zc.has(p)){it(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Ki=new WeakSet,Fl=function(){this.container.setAttribute("data-internal-link","")},uP=function(s,i,n=null){s.href=this.linkService.getAnchorUrl(""),i.description&&(s.title=i.description),s.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,n),!1},E(this,Ki,Fl).call(this)},gP=function(s,i){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeSetOCGState(i),!1),E(this,Ki,Fl).call(this)};class sN extends ds{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class gd extends ds{render(){return this.container}showElementAndHideCanvas(t){var s;this.data.hasOwnCanvas&&(((s=t.previousSibling)==null?void 0:s.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return pi.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,s,i,n,o){i.includes("mouse")?t.addEventListener(i,r=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:o(r),shift:r.shiftKey,modifier:this._getKeyModifier(r)}})}):t.addEventListener(i,r=>{var a;if(i==="blur"){if(!s.focused||!r.relatedTarget)return;s.focused=!1}else if(i==="focus"){if(s.focused)return;s.focused=!0}o&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:o(r)}}))})}_setEventListeners(t,s,i,n){var o,r,a;for(const[l,c]of i)(c==="Action"||(o=this.data.actions)!=null&&o[c])&&((c==="Focus"||c==="Blur")&&(s||(s={focused:!1})),this._setEventListener(t,s,l,c,n),c==="Focus"&&!((r=this.data.actions)!=null&&r.Blur)?this._setEventListener(t,s,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,s,"focus","Focus",null))}_setBackgroundColor(t){const s=this.data.backgroundColor||null;t.style.backgroundColor=s===null?"transparent":Ne.makeHexColor(s[0],s[1],s[2])}_setTextStyle(t){const s=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||eN,o=t.style;let r;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(c/(YC*n))||1,h=c/d;r=Math.min(n,l(h/YC))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);r=Math.min(n,l(c/YC))}o.fontSize=`calc(${r}px * var(--scale-factor))`,o.color=Ne.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=s[this.data.textAlignment])}_setRequired(t,s){s?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",s)}}class iN extends gd{constructor(t){const s=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:s})}setPropertyOnSiblings(t,s,i,n){const o=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[s]=i),o.setValue(r.id,{[n]:i})}render(){var n,o;const t=this.annotationStorage,s=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=t.getValue(s,{value:this.data.fieldValue});let a=r.value||"";const l=t.getValue(s,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=r.formattedValue||((n=this.data.textContent)==null?void 0:n.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=c??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",c??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Zc.add(i),i.setAttribute("data-element-id",s),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Rp,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",u=>{t.setValue(s,{value:u.target.value}),this.setPropertyOnSiblings(i,"value",u.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue??"";i.value=d.userValue=f,d.formattedValue=null});let h=u=>{const{formattedValue:f}=d;f!=null&&(u.target.value=f),u.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",f=>{var m;if(d.focused)return;const{target:p}=f;d.userValue&&(p.value=d.userValue),d.lastCommittedValue=p.value,d.commitKey=1,(m=this.data.actions)!=null&&m.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",f=>{this.showElementAndHideCanvas(f.target);const p={value(m){d.userValue=m.detail.value??"",t.setValue(s,{value:d.userValue.toString()}),m.target.value=d.userValue},formattedValue(m){const{formattedValue:v}=m.detail;d.formattedValue=v,v!=null&&m.target!==document.activeElement&&(m.target.value=v),t.setValue(s,{formattedValue:v})},selRange(m){m.target.setSelectionRange(...m.detail.selRange)},charLimit:m=>{var y;const{charLimit:v}=m.detail,{target:C}=m;if(v===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",v);let b=d.userValue;!b||b.length<=v||(b=b.slice(0,v),C.value=d.userValue=b,t.setValue(s,{value:b}),(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:b,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(p,f)}),i.addEventListener("keydown",f=>{var v;d.commitKey=1;let p=-1;if(f.key==="Escape"?p=0:f.key==="Enter"&&!this.data.multiLine?p=2:f.key==="Tab"&&(d.commitKey=3),p===-1)return;const{value:m}=f.target;d.lastCommittedValue!==m&&(d.lastCommittedValue=m,d.userValue=m,(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:m,willCommit:!0,commitKey:p,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}))});const u=h;h=null,i.addEventListener("blur",f=>{var m,v;if(!d.focused||!f.relatedTarget)return;(m=this.data.actions)!=null&&m.Blur||(d.focused=!1);const{value:p}=f.target;d.userValue=p,d.lastCommittedValue!==p&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:p,willCommit:!0,commitKey:d.commitKey,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}})),u(f)}),(o=this.data.actions)!=null&&o.Keystroke&&i.addEventListener("beforeinput",f=>{var R;d.lastCommittedValue=null;const{data:p,target:m}=f,{value:v,selectionStart:C,selectionEnd:b}=m;let y=C,S=b;switch(f.inputType){case"deleteWordBackward":{const A=v.substring(0,C).match(/\w*[^\w]*$/);A&&(y-=A[0].length);break}case"deleteWordForward":{const A=v.substring(C).match(/^[^\w]*\w*/);A&&(S+=A[0].length);break}case"deleteContentBackward":C===b&&(y-=1);break;case"deleteContentForward":C===b&&(S+=1);break}f.preventDefault(),(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:v,change:p||"",willCommit:!1,selStart:y,selEnd:S}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.value)}if(h&&i.addEventListener("blur",h),this.data.comb){const f=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${f}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class nN extends gd{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class oN extends gd{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,s=this.data,i=s.id;let n=t.getValue(i,{value:s.exportValue===s.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Zc.add(o),o.setAttribute("data-element-id",i),o.disabled=s.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=s.fieldName,n&&o.setAttribute("checked",!0),o.setAttribute("exportValue",s.exportValue),o.tabIndex=Rp,o.addEventListener("change",r=>{const{name:a,checked:l}=r.target;for(const c of this._getElementsByName(a,i)){const d=l&&c.exportValue===s.exportValue;c.domElement&&(c.domElement.checked=d),t.setValue(c.id,{value:d})}t.setValue(i,{value:l})}),o.addEventListener("resetform",r=>{const a=s.defaultFieldValue||"Off";r.target.checked=a===s.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",r=>{const a={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,r)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],r=>r.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class fP extends gd{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,s=this.data,i=s.id;let n=t.getValue(i,{value:s.fieldValue===s.buttonValue}).value;if(typeof n=="string"&&(n=n!==s.buttonValue,t.setValue(i,{value:n})),n)for(const r of this._getElementsByName(s.fieldName,i))t.setValue(r.id,{value:!1});const o=document.createElement("input");if(Zc.add(o),o.setAttribute("data-element-id",i),o.disabled=s.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=s.fieldName,n&&o.setAttribute("checked",!0),o.tabIndex=Rp,o.addEventListener("change",r=>{const{name:a,checked:l}=r.target;for(const c of this._getElementsByName(a,i))t.setValue(c.id,{value:!1});t.setValue(i,{value:l})}),o.addEventListener("resetform",r=>{const a=s.defaultFieldValue;r.target.checked=a!=null&&a===s.buttonValue}),this.enableScripting&&this.hasJSActions){const r=s.buttonValue;o.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const d=r===c.detail.value;for(const h of this._getElementsByName(c.target.name)){const u=d&&h.id===i;h.domElement&&(h.domElement.checked=u),t.setValue(h.id,{value:u})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class rN extends hP{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const s=t.lastChild;return this.enableScripting&&this.hasJSActions&&s&&(this._setDefaultPropertiesFromJS(s),s.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class aN extends gd{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,s=this.data.id,i=t.getValue(s,{value:this.data.fieldValue}),n=document.createElement("select");Zc.add(n),n.setAttribute("data-element-id",s),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=Rp;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const u of n.options)u.selected=u.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,i.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),o=!1),n.append(h)}let r=null;if(o){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),n.prepend(d),r=()=>{d.remove(),n.removeEventListener("input",r),r=null},n.addEventListener("input",r)}const a=d=>{const h=d?"value":"textContent",{options:u,multiple:f}=n;return f?Array.prototype.filter.call(u,p=>p.selected).map(p=>p[h]):u.selectedIndex===-1?null:u[u.selectedIndex][h]};let l=a(!1);const c=d=>{const h=d.target.options;return Array.prototype.map.call(h,u=>({displayValue:u.textContent,exportValue:u.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",d=>{const h={value(u){r==null||r();const f=u.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(const m of n.options)m.selected=p.has(m.value);t.setValue(s,{value:a(!0)}),l=a(!1)},multipleSelection(u){n.multiple=!0},remove(u){const f=n.options,p=u.detail.remove;f[p].selected=!1,n.remove(p),f.length>0&&Array.prototype.findIndex.call(f,v=>v.selected)===-1&&(f[0].selected=!0),t.setValue(s,{value:a(!0),items:c(u)}),l=a(!1)},clear(u){for(;n.length!==0;)n.remove(0);t.setValue(s,{value:null,items:[]}),l=a(!1)},insert(u){const{index:f,displayValue:p,exportValue:m}=u.detail.insert,v=n.children[f],C=document.createElement("option");C.textContent=p,C.value=m,v?v.before(C):n.append(C),t.setValue(s,{value:a(!0),items:c(u)}),l=a(!1)},items(u){const{items:f}=u.detail;for(;n.length!==0;)n.remove(0);for(const p of f){const{displayValue:m,exportValue:v}=p,C=document.createElement("option");C.textContent=m,C.value=v,n.append(C)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(s,{value:a(!0),items:c(u)}),l=a(!1)},indices(u){const f=new Set(u.detail.indices);for(const p of u.target.options)p.selected=f.has(p.index);t.setValue(s,{value:a(!0)}),l=a(!1)},editable(u){u.target.disabled=!u.detail.editable}};this._dispatchEventFromSandbox(h,d)}),n.addEventListener("input",d=>{var f;const h=a(!0),u=a(!1);t.setValue(s,{value:h}),d.preventDefault(),(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:l,change:u,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):n.addEventListener("input",function(d){t.setValue(s,{value:a(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Yb extends ds{constructor(t){const{data:s,elements:i}=t;super(t,{isRenderable:ds._hasPopupData(s)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new lN({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${BS}${i}`).join(",")),this.container}}var Lh,Zv,eC,Oh,bc,ts,wr,Nh,Lf,Of,Hh,br,Nn,yr,Nf,Sr,Hf,yc,Sc,Lt,Sm,Xb,pP,mP,vP,CP,xm,Rm,Qb;class lN{constructor({container:t,color:s,elements:i,titleObj:n,modificationDate:o,contentsObj:r,richText:a,parent:l,rect:c,parentRect:d,open:h}){P(this,Lt);P(this,Lh,E(this,Lt,vP).bind(this));P(this,Zv,E(this,Lt,Qb).bind(this));P(this,eC,E(this,Lt,Rm).bind(this));P(this,Oh,E(this,Lt,xm).bind(this));P(this,bc,null);P(this,ts,null);P(this,wr,null);P(this,Nh,null);P(this,Lf,null);P(this,Of,null);P(this,Hh,null);P(this,br,!1);P(this,Nn,null);P(this,yr,null);P(this,Nf,null);P(this,Sr,null);P(this,Hf,null);P(this,yc,null);P(this,Sc,!1);var u;x(this,ts,t),x(this,Hf,n),x(this,wr,r),x(this,Sr,a),x(this,Of,l),x(this,bc,s),x(this,Nf,c),x(this,Hh,d),x(this,Lf,i),x(this,Nh,zS.toDateObject(o)),this.trigger=i.flatMap(f=>f.getElementsToTriggerPopup());for(const f of this.trigger)f.addEventListener("click",g(this,Oh)),f.addEventListener("mouseenter",g(this,eC)),f.addEventListener("mouseleave",g(this,Zv)),f.classList.add("popupTriggerArea");for(const f of i)(u=f.container)==null||u.addEventListener("keydown",g(this,Lh));g(this,ts).hidden=!0,h&&E(this,Lt,xm).call(this)}render(){if(g(this,Nn))return;const t=x(this,Nn,document.createElement("div"));if(t.className="popup",g(this,bc)){const o=t.style.outlineColor=Ne.makeHexColor(...g(this,bc));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:t.style.backgroundColor=Ne.makeHexColor(...g(this,bc).map(a=>Math.floor(.7*(255-a)+a)))}const s=document.createElement("span");s.className="header";const i=document.createElement("h1");if(s.append(i),{dir:i.dir,str:i.textContent}=g(this,Hf),t.append(s),g(this,Nh)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:g(this,Nh).valueOf()})),s.append(o)}const n=g(this,Lt,Sm);if(n)dP.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(g(this,wr));t.append(o)}g(this,ts).append(t)}_formatContents({str:t,dir:s}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=s;const n=t.split(/(?:\r\n?|\n)/);for(let o=0,r=n.length;o<r;++o){const a=n[o];i.append(document.createTextNode(a)),o<r-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:s}){var i;g(this,yc)||x(this,yc,{contentsObj:g(this,wr),richText:g(this,Sr)}),t&&x(this,yr,null),s&&(x(this,Sr,E(this,Lt,mP).call(this,s)),x(this,wr,null)),(i=g(this,Nn))==null||i.remove(),x(this,Nn,null)}resetEdited(){var t;g(this,yc)&&({contentsObj:li(this,wr)._,richText:li(this,Sr)._}=g(this,yc),x(this,yc,null),(t=g(this,Nn))==null||t.remove(),x(this,Nn,null),x(this,yr,null))}forceHide(){x(this,Sc,this.isVisible),g(this,Sc)&&(g(this,ts).hidden=!0)}maybeShow(){g(this,Sc)&&(g(this,Nn)||E(this,Lt,Rm).call(this),x(this,Sc,!1),g(this,ts).hidden=!1)}get isVisible(){return g(this,ts).hidden===!1}}Lh=new WeakMap,Zv=new WeakMap,eC=new WeakMap,Oh=new WeakMap,bc=new WeakMap,ts=new WeakMap,wr=new WeakMap,Nh=new WeakMap,Lf=new WeakMap,Of=new WeakMap,Hh=new WeakMap,br=new WeakMap,Nn=new WeakMap,yr=new WeakMap,Nf=new WeakMap,Sr=new WeakMap,Hf=new WeakMap,yc=new WeakMap,Sc=new WeakMap,Lt=new WeakSet,Sm=function(){const t=g(this,Sr),s=g(this,wr);return t!=null&&t.str&&(!(s!=null&&s.str)||s.str===t.str)&&g(this,Sr).html||null},Xb=function(){var t,s,i;return((i=(s=(t=g(this,Lt,Sm))==null?void 0:t.attributes)==null?void 0:s.style)==null?void 0:i.fontSize)||0},pP=function(){var t,s,i;return((i=(s=(t=g(this,Lt,Sm))==null?void 0:t.attributes)==null?void 0:s.style)==null?void 0:i.color)||null},mP=function(t){const s=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:s}]}},n={style:{color:g(this,Lt,pP),fontSize:g(this,Lt,Xb)?`calc(${g(this,Lt,Xb)}px * var(--scale-factor))`:""}};for(const o of t.split(`
`))s.push({name:"span",value:o,attributes:n});return i},vP=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&g(this,br))&&E(this,Lt,xm).call(this)},CP=function(){if(g(this,yr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:i,pageX:n,pageY:o}}}=g(this,Of);let r=!!g(this,Hh),a=r?g(this,Hh):g(this,Nf);for(const p of g(this,Lf))if(!a||Ne.intersect(p.data.rect,a)!==null){a=p.data.rect,r=!0;break}const l=Ne.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),d=r?a[2]-a[0]+5:0,h=l[0]+d,u=l[1];x(this,yr,[100*(h-n)/s,100*(u-o)/i]);const{style:f}=g(this,ts);f.left=`${g(this,yr)[0]}%`,f.top=`${g(this,yr)[1]}%`},xm=function(){x(this,br,!g(this,br)),g(this,br)?(E(this,Lt,Rm).call(this),g(this,ts).addEventListener("click",g(this,Oh)),g(this,ts).addEventListener("keydown",g(this,Lh))):(E(this,Lt,Qb).call(this),g(this,ts).removeEventListener("click",g(this,Oh)),g(this,ts).removeEventListener("keydown",g(this,Lh)))},Rm=function(){g(this,Nn)||this.render(),this.isVisible?g(this,br)&&g(this,ts).classList.add("focused"):(E(this,Lt,CP).call(this),g(this,ts).hidden=!1,g(this,ts).style.zIndex=parseInt(g(this,ts).style.zIndex)+1e3)},Qb=function(){g(this,ts).classList.remove("focused"),!(g(this,br)||!this.isVisible)&&(g(this,ts).hidden=!0,g(this,ts).style.zIndex=parseInt(g(this,ts).style.zIndex)-1e3)};class wP extends ds{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Je.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const s of this.textContent){const i=document.createElement("span");i.textContent=s,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Bf;class cN extends ds{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});P(this,Bf,null)}render(){this.container.classList.add("lineAnnotation");const s=this.data,{width:i,height:n}=Vr(s.rect),o=this.svgFactory.create(i,n,!0),r=x(this,Bf,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",s.rect[2]-s.lineCoordinates[0]),r.setAttribute("y1",s.rect[3]-s.lineCoordinates[1]),r.setAttribute("x2",s.rect[2]-s.lineCoordinates[2]),r.setAttribute("y2",s.rect[3]-s.lineCoordinates[3]),r.setAttribute("stroke-width",s.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),o.append(r),this.container.append(o),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,Bf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bf=new WeakMap;var Gf;class dN extends ds{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});P(this,Gf,null)}render(){this.container.classList.add("squareAnnotation");const s=this.data,{width:i,height:n}=Vr(s.rect),o=this.svgFactory.create(i,n,!0),r=s.borderStyle.width,a=x(this,Gf,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",i-r),a.setAttribute("height",n-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,Gf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gf=new WeakMap;var Vf;class hN extends ds{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});P(this,Vf,null)}render(){this.container.classList.add("circleAnnotation");const s=this.data,{width:i,height:n}=Vr(s.rect),o=this.svgFactory.create(i,n,!0),r=s.borderStyle.width,a=x(this,Vf,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",i/2),a.setAttribute("cy",n/2),a.setAttribute("rx",i/2-r/2),a.setAttribute("ry",n/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!s.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,Vf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vf=new WeakMap;var zf;class bP extends ds{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});P(this,zf,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:s,vertices:i,borderStyle:n,popupRef:o}}=this;if(!i)return this.container;const{width:r,height:a}=Vr(s),l=this.svgFactory.create(r,a,!0);let c=[];for(let h=0,u=i.length;h<u;h+=2){const f=i[h]-s[0],p=s[3]-i[h+1];c.push(`${f},${p}`)}c=c.join(" ");const d=x(this,zf,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",c),d.setAttribute("stroke-width",n.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return g(this,zf)}addHighlightArea(){this.container.classList.add("highlightArea")}}zf=new WeakMap;class uN extends bP{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class gN extends ds{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Wf;class XS extends ds{constructor(s){super(s,{isRenderable:!0,ignoreBorder:!0});P(this,Wf,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Je.HIGHLIGHT:Je.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:s,inkLists:i,borderStyle:n,popupRef:o}}=this,{width:r,height:a}=Vr(s),l=this.svgFactory.create(r,a,!0);for(const c of i){let d=[];for(let u=0,f=c.length;u<f;u+=2){const p=c[u]-s[0],m=s[3]-c[u+1];d.push(`${p},${m}`)}d=d.join(" ");const h=this.svgFactory.createElement(this.svgElementName);g(this,Wf).push(h),h.setAttribute("points",d),h.setAttribute("stroke-width",n.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return g(this,Wf)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wf=new WeakMap;class yP extends ds{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Je.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class fN extends ds{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class pN extends ds{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class mN extends ds{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class SP extends ds{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Je.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var $f,Uf,Jb;class vN extends ds{constructor(s){var n;super(s,{isRenderable:!0});P(this,Uf);P(this,$f,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:s,data:i}=this;let n;i.hasAppearance||i.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),n.addEventListener("dblclick",E(this,Uf,Jb).bind(this)),x(this,$f,n);const{isMac:o}=pi.platform;return s.addEventListener("keydown",r=>{r.key==="Enter"&&(o?r.metaKey:r.ctrlKey)&&E(this,Uf,Jb).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),s.append(n),s}getElementsToTriggerPopup(){return g(this,$f)}addHighlightArea(){this.container.classList.add("highlightArea")}}$f=new WeakMap,Uf=new WeakSet,Jb=function(){var s;(s=this.downloadManager)==null||s.openOrDownloadData(this.content,this.filename)};var jf,xc,Rc,Kf,od,xP,Zb;class CN{constructor({div:t,accessibilityManager:s,annotationCanvasMap:i,annotationEditorUIManager:n,page:o,viewport:r,structTreeLayer:a}){P(this,od);P(this,jf,null);P(this,xc,null);P(this,Rc,new Map);P(this,Kf,null);this.div=t,x(this,jf,s),x(this,xc,i),x(this,Kf,a||null),this.page=o,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return g(this,Rc).size>0}async render(t){var r;const{annotations:s}=t,i=this.div;Qc(i,this.viewport);const n=new Map,o={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new YS,annotationStorage:t.annotationStorage||new $S,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of s){if(a.noHTML)continue;const l=a.annotationType===Cs.POPUP;if(l){const h=n.get(a.id);if(!h)continue;o.elements=h}else{const{width:h,height:u}=Vr(a.rect);if(h<=0||u<=0)continue}o.data=a;const c=tN.create(o);if(!c.isRenderable)continue;if(!l&&a.popupRef){const h=n.get(a.popupRef);h?h.push(c):n.set(a.popupRef,[c])}const d=c.render();a.hidden&&(d.style.visibility="hidden"),await E(this,od,xP).call(this,d,a.id),c._isEditable&&(g(this,Rc).set(c.data.id,c),(r=this._annotationEditorUIManager)==null||r.renderAnnotationElement(c))}E(this,od,Zb).call(this)}update({viewport:t}){const s=this.div;this.viewport=t,Qc(s,{rotation:t.rotation}),E(this,od,Zb).call(this),s.hidden=!1}getEditableAnnotations(){return Array.from(g(this,Rc).values())}getEditableAnnotation(t){return g(this,Rc).get(t)}}jf=new WeakMap,xc=new WeakMap,Rc=new WeakMap,Kf=new WeakMap,od=new WeakSet,xP=async function(t,s){var r,a;const i=t.firstChild||t,n=i.id=`${BS}${s}`,o=await((r=g(this,Kf))==null?void 0:r.getAriaAttributes(n));if(o)for(const[l,c]of o)i.setAttribute(l,c);this.div.append(t),(a=g(this,jf))==null||a.moveElementInDOM(this.div,t,i,!1)},Zb=function(){if(!g(this,xc))return;const t=this.div;for(const[s,i]of g(this,xc)){const n=t.querySelector(`[data-annotation-id="${s}"]`);if(!n)continue;i.className="annotationContent";const{firstChild:o}=n;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):n.append(i)}g(this,xc).clear()};const jp=/\r\n?|\n/g;var Hn,Bi,qf,Ec,Gi,ms,RP,EP,AP,Em,Kr,Am,Fm,FP,ty,PP;const Nt=class Nt extends _t{constructor(s){super({...s,name:"freeTextEditor"});P(this,ms);P(this,Hn);P(this,Bi,"");P(this,qf,`${this.id}-editor`);P(this,Ec,null);P(this,Gi);x(this,Hn,s.color||Nt._defaultColor||_t._defaultLineColor),x(this,Gi,s.fontSize||Nt._defaultFontSize)}static get _keyboardManager(){const s=Nt.prototype,i=r=>r.isEmpty(),n=Jc.TRANSLATE_SMALL,o=Jc.TRANSLATE_BIG;return vt(this,"_keyboardManager",new xp([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],s.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],s.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],s._translateEmpty,{args:[-n,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],s._translateEmpty,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],s._translateEmpty,{args:[n,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],s._translateEmpty,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],s._translateEmpty,{args:[0,-n],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],s._translateEmpty,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],s._translateEmpty,{args:[0,n],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],s._translateEmpty,{args:[0,o],checker:i}]]))}static initialize(s,i){_t.initialize(s,i);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(s,i){switch(s){case qe.FREETEXT_SIZE:Nt._defaultFontSize=i;break;case qe.FREETEXT_COLOR:Nt._defaultColor=i;break}}updateParams(s,i){switch(s){case qe.FREETEXT_SIZE:E(this,ms,RP).call(this,i);break;case qe.FREETEXT_COLOR:E(this,ms,EP).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[qe.FREETEXT_SIZE,Nt._defaultFontSize],[qe.FREETEXT_COLOR,Nt._defaultColor||_t._defaultLineColor]]}get propertiesToUpdate(){return[[qe.FREETEXT_SIZE,g(this,Gi)],[qe.FREETEXT_COLOR,g(this,Hn)]]}_translateEmpty(s,i){this._uiManager.translateSelectedEditors(s,i,!0)}getInitialTranslation(){const s=this.parentScale;return[-Nt._internalPadding*s,-(Nt._internalPadding+g(this,Gi))*s]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Je.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,Ec,new AbortController);const s=this._uiManager.combinedSignal(g(this,Ec));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:s}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:s}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:s}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:s}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:s})}disableEditMode(){var s;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",g(this,qf)),this._isDraggable=!0,(s=g(this,Ec))==null||s.abort(),x(this,Ec,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(s){this._focusEventsAllowed&&(super.focusin(s),s.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var s;this.width||(this.enableEditMode(),this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const s=g(this,Bi),i=x(this,Bi,E(this,ms,AP).call(this).trimEnd());if(s===i)return;const n=o=>{if(x(this,Bi,o),!o){this.remove();return}E(this,ms,Fm).call(this),this._uiManager.rebuild(this),E(this,ms,Em).call(this)};this.addCommands({cmd:()=>{n(i)},undo:()=>{n(s)},mustExec:!1}),E(this,ms,Em).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(s){this.enterInEditMode()}keydown(s){s.target===this.div&&s.key==="Enter"&&(this.enterInEditMode(),s.preventDefault())}editorDivKeydown(s){Nt._keyboardManager.exec(this,s)}editorDivFocus(s){this.isEditing=!0}editorDivBlur(s){this.isEditing=!1}editorDivInput(s){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let s,i;this.width&&(s=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",g(this,qf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${g(this,Gi)}px * var(--scale-factor))`,n.color=g(this,Hn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),lv(this,this.div,["dblclick","keydown"]),this.width){const[o,r]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[d,h]=this.pageDimensions,[u,f]=this.pageTranslation;let p,m;switch(this.rotation){case 0:p=s+(a[0]-u)/d,m=i+this.height-(a[1]-f)/h;break;case 90:p=s+(a[0]-u)/d,m=i-(a[1]-f)/h,[l,c]=[c,-l];break;case 180:p=s-this.width+(a[0]-u)/d,m=i-(a[1]-f)/h,[l,c]=[-l,-c];break;case 270:p=s+(a[0]-u-this.height*h)/d,m=i+(a[1]-f-this.width*d)/h,[l,c]=[-c,l];break}this.setAt(p*o,m*r,l,c)}else this.setAt(s*o,i*r,this.width*o,this.height*r);E(this,ms,Fm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(s){var p,m,v;const i=s.clipboardData||window.clipboardData,{types:n}=i;if(n.length===1&&n[0]==="text/plain")return;s.preventDefault();const o=E(p=Nt,Kr,ty).call(p,i.getData("text")||"").replaceAll(jp,`
`);if(!o)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const a=r.getRangeAt(0);if(!o.includes(`
`)){a.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:l,startOffset:c}=a,d=[],h=[];if(l.nodeType===Node.TEXT_NODE){const C=l.parentElement;if(h.push(l.nodeValue.slice(c).replaceAll(jp,"")),C!==this.editorDiv){let b=d;for(const y of this.editorDiv.childNodes){if(y===C){b=h;continue}b.push(E(m=Nt,Kr,Am).call(m,y))}}d.push(l.nodeValue.slice(0,c).replaceAll(jp,""))}else if(l===this.editorDiv){let C=d,b=0;for(const y of this.editorDiv.childNodes)b++===c&&(C=h),C.push(E(v=Nt,Kr,Am).call(v,y))}x(this,Bi,`${d.join(`
`)}${o}${h.join(`
`)}`),E(this,ms,Fm).call(this);const u=new Range;let f=d.reduce((C,b)=>C+b.length,0);for(const{firstChild:C}of this.editorDiv.childNodes)if(C.nodeType===Node.TEXT_NODE){const b=C.nodeValue.length;if(f<=b){u.setStart(C,f),u.setEnd(C,f);break}f-=b}r.removeAllRanges(),r.addRange(u)}get contentDiv(){return this.editorDiv}static async deserialize(s,i,n){var a;let o=null;if(s instanceof wP){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:d,rotation:h,id:u,popupRef:f},textContent:p,textPosition:m,parent:{page:{pageNumber:v}}}=s;if(!p||p.length===0)return null;o=s={annotationType:Je.FREETEXT,color:Array.from(c),fontSize:l,value:p.join(`
`),position:m,pageIndex:v-1,rect:d.slice(0),rotation:h,id:u,deleted:!1,popupRef:f}}const r=await super.deserialize(s,i,n);return x(r,Gi,s.fontSize),x(r,Hn,Ne.makeHexColor(...s.color)),x(r,Bi,E(a=Nt,Kr,ty).call(a,s.value)),r.annotationElementId=s.id||null,r._initialData=o,r}serialize(s=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Nt._internalPadding*this.parentScale,n=this.getRect(i,i),o=_t._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:g(this,Hn)),r={annotationType:Je.FREETEXT,color:o,fontSize:g(this,Gi),value:E(this,ms,FP).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return s?r:this.annotationElementId&&!E(this,ms,PP).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(s){const i=super.renderAnnotationElement(s);if(this.deleted)return i;const{style:n}=i;n.fontSize=`calc(${g(this,Gi)}px * var(--scale-factor))`,n.color=g(this,Hn),i.replaceChildren();for(const r of g(this,Bi).split(`
`)){const a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),i.append(a)}const o=Nt._internalPadding*this.parentScale;return s.updateEdited({rect:this.getRect(o,o),popupContent:g(this,Bi)}),i}resetAnnotationElement(s){super.resetAnnotationElement(s),s.resetEdited()}};Hn=new WeakMap,Bi=new WeakMap,qf=new WeakMap,Ec=new WeakMap,Gi=new WeakMap,ms=new WeakSet,RP=function(s){const i=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-g(this,Gi))*this.parentScale),x(this,Gi,o),E(this,ms,Em).call(this)},n=g(this,Gi);this.addCommands({cmd:i.bind(this,s),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},EP=function(s){const i=o=>{x(this,Hn,this.editorDiv.style.color=o)},n=g(this,Hn);this.addCommands({cmd:i.bind(this,s),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},AP=function(){var n;const s=[];this.editorDiv.normalize();let i=null;for(const o of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(s.push(E(n=Nt,Kr,Am).call(n,o)),i=o);return s.join(`
`)},Em=function(){const[s,i]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:o,div:r}=this,a=r.style.display,l=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",o.div.append(this.div),n=r.getBoundingClientRect(),r.remove(),r.style.display=a,r.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=n.width/s,this.height=n.height/i):(this.width=n.height/s,this.height=n.width/i),this.fixAndSetPosition()},Kr=new WeakSet,Am=function(s){return(s.nodeType===Node.TEXT_NODE?s.nodeValue:s.innerText).replaceAll(jp,"")},Fm=function(){if(this.editorDiv.replaceChildren(),!!g(this,Bi))for(const s of g(this,Bi).split(`
`)){const i=document.createElement("div");i.append(s?document.createTextNode(s):document.createElement("br")),this.editorDiv.append(i)}},FP=function(){return g(this,Bi).replaceAll("Â "," ")},ty=function(s){return s.replaceAll(" ","Â ")},PP=function(s){const{value:i,fontSize:n,color:o,pageIndex:r}=this._initialData;return this._hasBeenMoved||s.value!==i||s.fontSize!==n||s.color.some((a,l)=>a!==o[l])||s.pageIndex!==r},P(Nt,Kr),Ge(Nt,"_freeTextDefaultContent",""),Ge(Nt,"_internalPadding",0),Ge(Nt,"_defaultColor",null),Ge(Nt,"_defaultFontSize",10),Ge(Nt,"_type","freetext"),Ge(Nt,"_editorType",Je.FREETEXT);let ey=Nt;class TP{toSVGPath(){zt("Abstract method `toSVGPath` must be implemented.")}get box(){zt("Abstract getter `box` must be implemented.")}serialize(t,s){zt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){zt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){zt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Vi,Bn,Bh,Gh,Fo,at,Ac,Fc,Yf,Xf,Vh,zh,Va,Qf,tC,sC,Es,Zu,DP,_P,MP,kP,IP,LP;const rr=class rr{constructor({x:t,y:s},i,n,o,r,a=0){P(this,Es);P(this,Vi);P(this,Bn,[]);P(this,Bh);P(this,Gh);P(this,Fo,[]);P(this,at,new Float64Array(18));P(this,Ac);P(this,Fc);P(this,Yf);P(this,Xf);P(this,Vh);P(this,zh);P(this,Va,[]);x(this,Vi,i),x(this,zh,o*n),x(this,Gh,r),g(this,at).set([NaN,NaN,NaN,NaN,t,s],6),x(this,Bh,a),x(this,Xf,g(rr,Qf)*n),x(this,Yf,g(rr,sC)*n),x(this,Vh,n),g(this,Va).push(t,s)}isEmpty(){return isNaN(g(this,at)[8])}add({x:t,y:s}){var k;x(this,Ac,t),x(this,Fc,s);const[i,n,o,r]=g(this,Vi);let[a,l,c,d]=g(this,at).subarray(8,12);const h=t-c,u=s-d,f=Math.hypot(h,u);if(f<g(this,Yf))return!1;const p=f-g(this,Xf),m=p/f,v=m*h,C=m*u;let b=a,y=l;a=c,l=d,c+=v,d+=C,(k=g(this,Va))==null||k.push(t,s);const S=-C/p,R=v/p,A=S*g(this,zh),F=R*g(this,zh);return g(this,at).set(g(this,at).subarray(2,8),0),g(this,at).set([c+A,d+F],4),g(this,at).set(g(this,at).subarray(14,18),12),g(this,at).set([c-A,d-F],16),isNaN(g(this,at)[6])?(g(this,Fo).length===0&&(g(this,at).set([a+A,l+F],2),g(this,Fo).push(NaN,NaN,NaN,NaN,(a+A-i)/o,(l+F-n)/r),g(this,at).set([a-A,l-F],14),g(this,Bn).push(NaN,NaN,NaN,NaN,(a-A-i)/o,(l-F-n)/r)),g(this,at).set([b,y,a,l,c,d],6),!this.isEmpty()):(g(this,at).set([b,y,a,l,c,d],6),Math.abs(Math.atan2(y-l,b-a)-Math.atan2(C,v))<Math.PI/2?([a,l,c,d]=g(this,at).subarray(2,6),g(this,Fo).push(NaN,NaN,NaN,NaN,((a+c)/2-i)/o,((l+d)/2-n)/r),[a,l,b,y]=g(this,at).subarray(14,18),g(this,Bn).push(NaN,NaN,NaN,NaN,((b+a)/2-i)/o,((y+l)/2-n)/r),!0):([b,y,a,l,c,d]=g(this,at).subarray(0,6),g(this,Fo).push(((b+5*a)/6-i)/o,((y+5*l)/6-n)/r,((5*a+c)/6-i)/o,((5*l+d)/6-n)/r,((a+c)/2-i)/o,((l+d)/2-n)/r),[c,d,a,l,b,y]=g(this,at).subarray(12,18),g(this,Bn).push(((b+5*a)/6-i)/o,((y+5*l)/6-n)/r,((5*a+c)/6-i)/o,((5*l+d)/6-n)/r,((a+c)/2-i)/o,((l+d)/2-n)/r),!0))}toSVGPath(){if(this.isEmpty())return"";const t=g(this,Fo),s=g(this,Bn);if(isNaN(g(this,at)[6])&&!this.isEmpty())return E(this,Es,DP).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let n=6;n<t.length;n+=6)isNaN(t[n])?i.push(`L${t[n+4]} ${t[n+5]}`):i.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);E(this,Es,MP).call(this,i);for(let n=s.length-6;n>=6;n-=6)isNaN(s[n])?i.push(`L${s[n+4]} ${s[n+5]}`):i.push(`C${s[n]} ${s[n+1]} ${s[n+2]} ${s[n+3]} ${s[n+4]} ${s[n+5]}`);return E(this,Es,_P).call(this,i),i.join(" ")}newFreeDrawOutline(t,s,i,n,o,r){return new OP(t,s,i,n,o,r)}getOutlines(){var h;const t=g(this,Fo),s=g(this,Bn),i=g(this,at),[n,o,r,a]=g(this,Vi),l=new Float64Array((((h=g(this,Va))==null?void 0:h.length)??0)+2);for(let u=0,f=l.length-2;u<f;u+=2)l[u]=(g(this,Va)[u]-n)/r,l[u+1]=(g(this,Va)[u+1]-o)/a;if(l[l.length-2]=(g(this,Ac)-n)/r,l[l.length-1]=(g(this,Fc)-o)/a,isNaN(i[6])&&!this.isEmpty())return E(this,Es,kP).call(this,l);const c=new Float64Array(g(this,Fo).length+24+g(this,Bn).length);let d=t.length;for(let u=0;u<d;u+=2){if(isNaN(t[u])){c[u]=c[u+1]=NaN;continue}c[u]=t[u],c[u+1]=t[u+1]}d=E(this,Es,LP).call(this,c,d);for(let u=s.length-6;u>=6;u-=6)for(let f=0;f<6;f+=2){if(isNaN(s[u+f])){c[d]=c[d+1]=NaN,d+=2;continue}c[d]=s[u+f],c[d+1]=s[u+f+1],d+=2}return E(this,Es,IP).call(this,c,d),this.newFreeDrawOutline(c,l,g(this,Vi),g(this,Vh),g(this,Bh),g(this,Gh))}};Vi=new WeakMap,Bn=new WeakMap,Bh=new WeakMap,Gh=new WeakMap,Fo=new WeakMap,at=new WeakMap,Ac=new WeakMap,Fc=new WeakMap,Yf=new WeakMap,Xf=new WeakMap,Vh=new WeakMap,zh=new WeakMap,Va=new WeakMap,Qf=new WeakMap,tC=new WeakMap,sC=new WeakMap,Es=new WeakSet,Zu=function(){const t=g(this,at).subarray(4,6),s=g(this,at).subarray(16,18),[i,n,o,r]=g(this,Vi);return[(g(this,Ac)+(t[0]-s[0])/2-i)/o,(g(this,Fc)+(t[1]-s[1])/2-n)/r,(g(this,Ac)+(s[0]-t[0])/2-i)/o,(g(this,Fc)+(s[1]-t[1])/2-n)/r]},DP=function(){const[t,s,i,n]=g(this,Vi),[o,r,a,l]=E(this,Es,Zu).call(this);return`M${(g(this,at)[2]-t)/i} ${(g(this,at)[3]-s)/n} L${(g(this,at)[4]-t)/i} ${(g(this,at)[5]-s)/n} L${o} ${r} L${a} ${l} L${(g(this,at)[16]-t)/i} ${(g(this,at)[17]-s)/n} L${(g(this,at)[14]-t)/i} ${(g(this,at)[15]-s)/n} Z`},_P=function(t){const s=g(this,Bn);t.push(`L${s[4]} ${s[5]} Z`)},MP=function(t){const[s,i,n,o]=g(this,Vi),r=g(this,at).subarray(4,6),a=g(this,at).subarray(16,18),[l,c,d,h]=E(this,Es,Zu).call(this);t.push(`L${(r[0]-s)/n} ${(r[1]-i)/o} L${l} ${c} L${d} ${h} L${(a[0]-s)/n} ${(a[1]-i)/o}`)},kP=function(t){const s=g(this,at),[i,n,o,r]=g(this,Vi),[a,l,c,d]=E(this,Es,Zu).call(this),h=new Float64Array(36);return h.set([NaN,NaN,NaN,NaN,(s[2]-i)/o,(s[3]-n)/r,NaN,NaN,NaN,NaN,(s[4]-i)/o,(s[5]-n)/r,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,(s[16]-i)/o,(s[17]-n)/r,NaN,NaN,NaN,NaN,(s[14]-i)/o,(s[15]-n)/r],0),this.newFreeDrawOutline(h,t,g(this,Vi),g(this,Vh),g(this,Bh),g(this,Gh))},IP=function(t,s){const i=g(this,Bn);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],s),s+=6},LP=function(t,s){const i=g(this,at).subarray(4,6),n=g(this,at).subarray(16,18),[o,r,a,l]=g(this,Vi),[c,d,h,u]=E(this,Es,Zu).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-o)/a,(i[1]-r)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(n[0]-o)/a,(n[1]-r)/l],s),s+=24},P(rr,Qf,8),P(rr,tC,2),P(rr,sC,g(rr,Qf)+g(rr,tC));let dv=rr;var Wh,Pc,xr,Jf,zi,Zf,is,Di,eg,tg,NP;class OP extends TP{constructor(s,i,n,o,r,a){super();P(this,Di);P(this,Wh);P(this,Pc,null);P(this,xr);P(this,Jf);P(this,zi);P(this,Zf);P(this,is);x(this,is,s),x(this,zi,i),x(this,Wh,n),x(this,Zf,o),x(this,xr,r),x(this,Jf,a),E(this,Di,NP).call(this,a);const{x:l,y:c,width:d,height:h}=g(this,Pc);for(let u=0,f=s.length;u<f;u+=2)s[u]=(s[u]-l)/d,s[u+1]=(s[u+1]-c)/h;for(let u=0,f=i.length;u<f;u+=2)i[u]=(i[u]-l)/d,i[u+1]=(i[u+1]-c)/h}toSVGPath(){const s=[`M${g(this,is)[4]} ${g(this,is)[5]}`];for(let i=6,n=g(this,is).length;i<n;i+=6){if(isNaN(g(this,is)[i])){s.push(`L${g(this,is)[i+4]} ${g(this,is)[i+5]}`);continue}s.push(`C${g(this,is)[i]} ${g(this,is)[i+1]} ${g(this,is)[i+2]} ${g(this,is)[i+3]} ${g(this,is)[i+4]} ${g(this,is)[i+5]}`)}return s.push("Z"),s.join(" ")}serialize([s,i,n,o],r){const a=n-s,l=o-i;let c,d;switch(r){case 0:c=E(this,Di,eg).call(this,g(this,is),s,o,a,-l),d=E(this,Di,eg).call(this,g(this,zi),s,o,a,-l);break;case 90:c=E(this,Di,tg).call(this,g(this,is),s,i,a,l),d=E(this,Di,tg).call(this,g(this,zi),s,i,a,l);break;case 180:c=E(this,Di,eg).call(this,g(this,is),n,i,-a,l),d=E(this,Di,eg).call(this,g(this,zi),n,i,-a,l);break;case 270:c=E(this,Di,tg).call(this,g(this,is),n,o,-a,-l),d=E(this,Di,tg).call(this,g(this,zi),n,o,-a,-l);break}return{outline:Array.from(c),points:[Array.from(d)]}}get box(){return g(this,Pc)}newOutliner(s,i,n,o,r,a=0){return new dv(s,i,n,o,r,a)}getNewOutline(s,i){const{x:n,y:o,width:r,height:a}=g(this,Pc),[l,c,d,h]=g(this,Wh),u=r*d,f=a*h,p=n*d+l,m=o*h+c,v=this.newOutliner({x:g(this,zi)[0]*u+p,y:g(this,zi)[1]*f+m},g(this,Wh),g(this,Zf),s,g(this,Jf),i??g(this,xr));for(let C=2;C<g(this,zi).length;C+=2)v.add({x:g(this,zi)[C]*u+p,y:g(this,zi)[C+1]*f+m});return v.getOutlines()}get mustRemoveSelfIntersections(){return!0}}Wh=new WeakMap,Pc=new WeakMap,xr=new WeakMap,Jf=new WeakMap,zi=new WeakMap,Zf=new WeakMap,is=new WeakMap,Di=new WeakSet,eg=function(s,i,n,o,r){const a=new Float64Array(s.length);for(let l=0,c=s.length;l<c;l+=2)a[l]=i+s[l]*o,a[l+1]=n+s[l+1]*r;return a},tg=function(s,i,n,o,r){const a=new Float64Array(s.length);for(let l=0,c=s.length;l<c;l+=2)a[l]=i+s[l+1]*o,a[l+1]=n+s[l]*r;return a},NP=function(s){const i=g(this,is);let n=i[4],o=i[5],r=n,a=o,l=n,c=o,d=n,h=o;const u=s?Math.max:Math.min;for(let C=6,b=i.length;C<b;C+=6){if(isNaN(i[C]))r=Math.min(r,i[C+4]),a=Math.min(a,i[C+5]),l=Math.max(l,i[C+4]),c=Math.max(c,i[C+5]),h<i[C+5]?(d=i[C+4],h=i[C+5]):h===i[C+5]&&(d=u(d,i[C+4]));else{const y=Ne.bezierBoundingBox(n,o,...i.slice(C,C+6));r=Math.min(r,y[0]),a=Math.min(a,y[1]),l=Math.max(l,y[2]),c=Math.max(c,y[3]),h<y[3]?(d=y[2],h=y[3]):h===y[3]&&(d=u(d,y[2]))}n=i[C+4],o=i[C+5]}const f=r-g(this,xr),p=a-g(this,xr),m=l-r+2*g(this,xr),v=c-a+2*g(this,xr);x(this,Pc,{x:f,y:p,width:m,height:v,lastPoint:[d,h]})};var ep,za,Gn,Ci,HP,Pm,BP,GP,sy;class Zx{constructor(t,s=0,i=0,n=!0){P(this,Ci);P(this,ep);P(this,za,[]);P(this,Gn,[]);let o=1/0,r=-1/0,a=1/0,l=-1/0;const c=10**-4;for(const{x:v,y:C,width:b,height:y}of t){const S=Math.floor((v-s)/c)*c,R=Math.ceil((v+b+s)/c)*c,A=Math.floor((C-s)/c)*c,F=Math.ceil((C+y+s)/c)*c,T=[S,A,F,!0],k=[R,A,F,!1];g(this,za).push(T,k),o=Math.min(o,S),r=Math.max(r,R),a=Math.min(a,A),l=Math.max(l,F)}const d=r-o+2*i,h=l-a+2*i,u=o-i,f=a-i,p=g(this,za).at(n?-1:-2),m=[p[0],p[2]];for(const v of g(this,za)){const[C,b,y]=v;v[0]=(C-u)/d,v[1]=(b-f)/h,v[2]=(y-f)/h}x(this,ep,{x:u,y:f,width:d,height:h,lastPoint:m})}getOutlines(){g(this,za).sort((s,i)=>s[0]-i[0]||s[1]-i[1]||s[2]-i[2]);const t=[];for(const s of g(this,za))s[3]?(t.push(...E(this,Ci,sy).call(this,s)),E(this,Ci,BP).call(this,s)):(E(this,Ci,GP).call(this,s),t.push(...E(this,Ci,sy).call(this,s)));return E(this,Ci,HP).call(this,t)}}ep=new WeakMap,za=new WeakMap,Gn=new WeakMap,Ci=new WeakSet,HP=function(t){const s=[],i=new Set;for(const r of t){const[a,l,c]=r;s.push([a,l,r],[a,c,r])}s.sort((r,a)=>r[1]-a[1]||r[0]-a[0]);for(let r=0,a=s.length;r<a;r+=2){const l=s[r][2],c=s[r+1][2];l.push(c),c.push(l),i.add(l),i.add(c)}const n=[];let o;for(;i.size>0;){const r=i.values().next().value;let[a,l,c,d,h]=r;i.delete(r);let u=a,f=l;for(o=[a,c],n.push(o);;){let p;if(i.has(d))p=d;else if(i.has(h))p=h;else break;i.delete(p),[a,l,c,d,h]=p,u!==a&&(o.push(u,f,a,f===l?l:c),u=a),f=f===l?c:l}o.push(u,f)}return new wN(n,g(this,ep))},Pm=function(t){const s=g(this,Gn);let i=0,n=s.length-1;for(;i<=n;){const o=i+n>>1,r=s[o][0];if(r===t)return o;r<t?i=o+1:n=o-1}return n+1},BP=function([,t,s]){const i=E(this,Ci,Pm).call(this,t);g(this,Gn).splice(i,0,[t,s])},GP=function([,t,s]){const i=E(this,Ci,Pm).call(this,t);for(let n=i;n<g(this,Gn).length;n++){const[o,r]=g(this,Gn)[n];if(o!==t)break;if(o===t&&r===s){g(this,Gn).splice(n,1);return}}for(let n=i-1;n>=0;n--){const[o,r]=g(this,Gn)[n];if(o!==t)break;if(o===t&&r===s){g(this,Gn).splice(n,1);return}}},sy=function(t){const[s,i,n]=t,o=[[s,i,n]],r=E(this,Ci,Pm).call(this,n);for(let a=0;a<r;a++){const[l,c]=g(this,Gn)[a];for(let d=0,h=o.length;d<h;d++){const[,u,f]=o[d];if(!(c<=u||f<=l)){if(u>=l){if(f>c)o[d][1]=c;else{if(h===1)return[];o.splice(d,1),d--,h--}continue}o[d][2]=l,f>c&&o.push([s,c,f])}}}return o};var tp,$h;class wN extends TP{constructor(s,i){super();P(this,tp);P(this,$h);x(this,$h,s),x(this,tp,i)}toSVGPath(){const s=[];for(const i of g(this,$h)){let[n,o]=i;s.push(`M${n} ${o}`);for(let r=2;r<i.length;r+=2){const a=i[r],l=i[r+1];a===n?(s.push(`V${l}`),o=l):l===o&&(s.push(`H${a}`),n=a)}s.push("Z")}return s.join(" ")}serialize([s,i,n,o],r){const a=[],l=n-s,c=o-i;for(const d of g(this,$h)){const h=new Array(d.length);for(let u=0;u<d.length;u+=2)h[u]=s+d[u]*l,h[u+1]=o-d[u+1]*c;a.push(h)}return a}get box(){return g(this,tp)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}tp=new WeakMap,$h=new WeakMap;class iy extends dv{newFreeDrawOutline(t,s,i,n,o,r){return new bN(t,s,i,n,o,r)}get classNamesForDrawing(){return["highlight","free"]}}class bN extends OP{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,s,i,n,o,r=0){return new iy(t,s,i,n,o,r)}}var Vn,Tc,Uh,ys,sp,jh,ip,np,Wa,zn,Kh,op,kt,ny,oy,ry,Pl,VP,ga;const yi=class yi{constructor({editor:t=null,uiManager:s=null}){P(this,kt);P(this,Vn,null);P(this,Tc,null);P(this,Uh);P(this,ys,null);P(this,sp,!1);P(this,jh,!1);P(this,ip,null);P(this,np);P(this,Wa,null);P(this,zn,null);P(this,Kh);var i;t?(x(this,jh,!1),x(this,Kh,qe.HIGHLIGHT_COLOR),x(this,ip,t)):(x(this,jh,!0),x(this,Kh,qe.HIGHLIGHT_DEFAULT_COLOR)),x(this,zn,(t==null?void 0:t._uiManager)||s),x(this,np,g(this,zn)._eventBus),x(this,Uh,(t==null?void 0:t.color)||((i=g(this,zn))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),g(yi,op)||x(yi,op,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return vt(this,"_keyboardManager",new xp([[["Escape","mac+Escape"],yi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],yi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],yi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],yi.prototype._moveToPrevious],[["Home","mac+Home"],yi.prototype._moveToBeginning],[["End","mac+End"],yi.prototype._moveToEnd]]))}renderButton(){const t=x(this,Vn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const s=g(this,zn)._signal;t.addEventListener("click",E(this,kt,Pl).bind(this),{signal:s}),t.addEventListener("keydown",E(this,kt,ry).bind(this),{signal:s});const i=x(this,Tc,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=g(this,Uh),t.append(i),t}renderMainDropdown(){const t=x(this,ys,E(this,kt,ny).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===g(this,Vn)){E(this,kt,Pl).call(this,t);return}const s=t.target.getAttribute("data-color");s&&E(this,kt,oy).call(this,s,t)}_moveToNext(t){var s,i;if(!g(this,kt,ga)){E(this,kt,Pl).call(this,t);return}if(t.target===g(this,Vn)){(s=g(this,ys).firstChild)==null||s.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var s,i;if(t.target===((s=g(this,ys))==null?void 0:s.firstChild)||t.target===g(this,Vn)){g(this,kt,ga)&&this._hideDropdownFromKeyboard();return}g(this,kt,ga)||E(this,kt,Pl).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var s;if(!g(this,kt,ga)){E(this,kt,Pl).call(this,t);return}(s=g(this,ys).firstChild)==null||s.focus()}_moveToEnd(t){var s;if(!g(this,kt,ga)){E(this,kt,Pl).call(this,t);return}(s=g(this,ys).lastChild)==null||s.focus()}hideDropdown(){var t,s;(t=g(this,ys))==null||t.classList.add("hidden"),(s=g(this,Wa))==null||s.abort(),x(this,Wa,null)}_hideDropdownFromKeyboard(){var t;if(!g(this,jh)){if(!g(this,kt,ga)){(t=g(this,ip))==null||t.unselect();return}this.hideDropdown(),g(this,Vn).focus({preventScroll:!0,focusVisible:g(this,sp)})}}updateColor(t){if(g(this,Tc)&&(g(this,Tc).style.backgroundColor=t),!g(this,ys))return;const s=g(this,zn).highlightColors.values();for(const i of g(this,ys).children)i.setAttribute("aria-selected",s.next().value===t)}destroy(){var t,s;(t=g(this,Vn))==null||t.remove(),x(this,Vn,null),x(this,Tc,null),(s=g(this,ys))==null||s.remove(),x(this,ys,null)}};Vn=new WeakMap,Tc=new WeakMap,Uh=new WeakMap,ys=new WeakMap,sp=new WeakMap,jh=new WeakMap,ip=new WeakMap,np=new WeakMap,Wa=new WeakMap,zn=new WeakMap,Kh=new WeakMap,op=new WeakMap,kt=new WeakSet,ny=function(){const t=document.createElement("div"),s=g(this,zn)._signal;t.addEventListener("contextmenu",Sn,{signal:s}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,n]of g(this,zn).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",n),o.title=i,o.setAttribute("data-l10n-id",g(yi,op)[i]);const r=document.createElement("span");o.append(r),r.className="swatch",r.style.backgroundColor=n,o.setAttribute("aria-selected",n===g(this,Uh)),o.addEventListener("click",E(this,kt,oy).bind(this,n),{signal:s}),t.append(o)}return t.addEventListener("keydown",E(this,kt,ry).bind(this),{signal:s}),t},oy=function(t,s){s.stopPropagation(),g(this,np).dispatch("switchannotationeditorparams",{source:this,type:g(this,Kh),value:t})},ry=function(t){yi._keyboardManager.exec(this,t)},Pl=function(t){if(g(this,kt,ga)){this.hideDropdown();return}if(x(this,sp,t.detail===0),g(this,Wa)||(x(this,Wa,new AbortController),window.addEventListener("pointerdown",E(this,kt,VP).bind(this),{signal:g(this,zn).combinedSignal(g(this,Wa))})),g(this,ys)){g(this,ys).classList.remove("hidden");return}const s=x(this,ys,E(this,kt,ny).call(this));g(this,Vn).append(s)},VP=function(t){var s;(s=g(this,ys))!=null&&s.contains(t.target)||this.hideDropdown()},ga=function(){return g(this,ys)&&!g(this,ys).classList.contains("hidden")},P(yi,op,null);let hv=yi;var qh,rp,Rr,Dc,Yh,hn,ap,lp,_c,Wn,si,Ei,Xh,Er,Ss,Qh,un,cp,Qe,ay,Tm,zP,WP,$P,ly,Tl,vn,Md,UP,Dm,sg,jP,KP,qP,YP,XP;const Rt=class Rt extends _t{constructor(s){super({...s,name:"highlightEditor"});P(this,Qe);P(this,qh,null);P(this,rp,0);P(this,Rr);P(this,Dc,null);P(this,Yh,null);P(this,hn,null);P(this,ap,null);P(this,lp,0);P(this,_c,null);P(this,Wn,null);P(this,si,null);P(this,Ei,!1);P(this,Xh,null);P(this,Er);P(this,Ss,null);P(this,Qh,"");P(this,un);P(this,cp,"");this.color=s.color||Rt._defaultColor,x(this,un,s.thickness||Rt._defaultThickness),x(this,Er,s.opacity||Rt._defaultOpacity),x(this,Rr,s.boxes||null),x(this,cp,s.methodOfCreation||""),x(this,Qh,s.text||""),this._isDraggable=!1,s.highlightId>-1?(x(this,Ei,!0),E(this,Qe,Tm).call(this,s),E(this,Qe,Tl).call(this)):g(this,Rr)&&(x(this,qh,s.anchorNode),x(this,rp,s.anchorOffset),x(this,ap,s.focusNode),x(this,lp,s.focusOffset),E(this,Qe,ay).call(this),E(this,Qe,Tl).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const s=Rt.prototype;return vt(this,"_keyboardManager",new xp([[["ArrowLeft","mac+ArrowLeft"],s._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],s._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],s._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],s._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:g(this,Ei)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:g(this,un),methodOfCreation:g(this,cp)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(s){return{numberOfColors:s.get("color").size}}static initialize(s,i){var n;_t.initialize(s,i),Rt._defaultColor||(Rt._defaultColor=((n=i.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(s,i){switch(s){case qe.HIGHLIGHT_DEFAULT_COLOR:Rt._defaultColor=i;break;case qe.HIGHLIGHT_THICKNESS:Rt._defaultThickness=i;break}}translateInPage(s,i){}get toolbarPosition(){return g(this,Xh)}updateParams(s,i){switch(s){case qe.HIGHLIGHT_COLOR:E(this,Qe,zP).call(this,i);break;case qe.HIGHLIGHT_THICKNESS:E(this,Qe,WP).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[qe.HIGHLIGHT_DEFAULT_COLOR,Rt._defaultColor],[qe.HIGHLIGHT_THICKNESS,Rt._defaultThickness]]}get propertiesToUpdate(){return[[qe.HIGHLIGHT_COLOR,this.color||Rt._defaultColor],[qe.HIGHLIGHT_THICKNESS,g(this,un)||Rt._defaultThickness],[qe.HIGHLIGHT_FREE,g(this,Ei)]]}async addEditToolbar(){const s=await super.addEditToolbar();return s?(this._uiManager.highlightColors&&(x(this,Yh,new hv({editor:this})),s.addColorPicker(g(this,Yh))),s):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,Qe,sg).call(this))}getBaseTranslation(){return[0,0]}getRect(s,i){return super.getRect(s,i,E(this,Qe,sg).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){E(this,Qe,ly).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Qe,Tl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(s){var n;let i=!1;this.parent&&!s?E(this,Qe,ly).call(this):s&&(E(this,Qe,Tl).call(this,s),i=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(s),this.show(this._isVisible),i&&this.select()}rotate(s){var o,r,a;const{drawLayer:i}=this.parent;let n;g(this,Ei)?(s=(s-this.rotation+360)%360,n=E(o=Rt,vn,Md).call(o,g(this,Wn).box,s)):n=E(r=Rt,vn,Md).call(r,this,s),i.rotate(g(this,si),s),i.rotate(g(this,Ss),s),i.updateBox(g(this,si),n),i.updateBox(g(this,Ss),E(a=Rt,vn,Md).call(a,g(this,hn).box,s))}render(){if(this.div)return this.div;const s=super.render();g(this,Qh)&&(s.setAttribute("aria-label",g(this,Qh)),s.setAttribute("role","mark")),g(this,Ei)?s.classList.add("free"):this.div.addEventListener("keydown",E(this,Qe,UP).bind(this),{signal:this._uiManager._signal});const i=x(this,_c,document.createElement("div"));s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=g(this,Dc);const[n,o]=this.parentDimensions;return this.setDims(this.width*n,this.height*o),lv(this,g(this,_c),["pointerover","pointerleave"]),this.enableEditing(),s}pointerover(){this.isSelected||this.parent.drawLayer.addClass(g(this,Ss),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(g(this,Ss),"hovered")}_moveCaret(s){switch(this.parent.unselect(this),s){case 0:case 2:E(this,Qe,Dm).call(this,!0);break;case 1:case 3:E(this,Qe,Dm).call(this,!1);break}}select(){var s,i;super.select(),g(this,Ss)&&((s=this.parent)==null||s.drawLayer.removeClass(g(this,Ss),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(g(this,Ss),"selected"))}unselect(){var s;super.unselect(),g(this,Ss)&&((s=this.parent)==null||s.drawLayer.removeClass(g(this,Ss),"selected"),g(this,Ei)||E(this,Qe,Dm).call(this,!1))}get _mustFixPosition(){return!g(this,Ei)}show(s=this._isVisible){super.show(s),this.parent&&(this.parent.drawLayer.show(g(this,si),s),this.parent.drawLayer.show(g(this,Ss),s))}static startHighlighting(s,i,{target:n,x:o,y:r}){const{x:a,y:l,width:c,height:d}=n.getBoundingClientRect(),h=new AbortController,u=s.combinedSignal(h),f=m=>{m.preventDefault(),m.stopPropagation()},p=m=>{h.abort(),E(this,vn,YP).call(this,s,m)};window.addEventListener("blur",p,{signal:u}),window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("pointerdown",f,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",Sn,{signal:u}),n.addEventListener("pointermove",E(this,vn,qP).bind(this,s),{signal:u}),this._freeHighlight=new iy({x:o,y:r},[a,l,c,d],s.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=s.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(s,i,n){var m,v,C,b;let o=null;if(s instanceof yP){const{data:{quadPoints:y,rect:S,rotation:R,id:A,color:F,opacity:T,popupRef:k},parent:{page:{pageNumber:N}}}=s;o=s={annotationType:Je.HIGHLIGHT,color:Array.from(F),opacity:T,quadPoints:y,boxes:null,pageIndex:N-1,rect:S.slice(0),rotation:R,id:A,deleted:!1,popupRef:k}}else if(s instanceof XS){const{data:{inkLists:y,rect:S,rotation:R,id:A,color:F,borderStyle:{rawWidth:T},popupRef:k},parent:{page:{pageNumber:N}}}=s;o=s={annotationType:Je.HIGHLIGHT,color:Array.from(F),thickness:T,inkLists:y,boxes:null,pageIndex:N-1,rect:S.slice(0),rotation:R,id:A,deleted:!1,popupRef:k}}const{color:r,quadPoints:a,inkLists:l,opacity:c}=s,d=await super.deserialize(s,i,n);d.color=Ne.makeHexColor(...r),x(d,Er,c||1),l&&x(d,un,s.thickness),d.annotationElementId=s.id||null,d._initialData=o;const[h,u]=d.pageDimensions,[f,p]=d.pageTranslation;if(a){const y=x(d,Rr,[]);for(let S=0;S<a.length;S+=8)y.push({x:(a[S]-f)/h,y:1-(a[S+1]-p)/u,width:(a[S+2]-a[S])/h,height:(a[S+1]-a[S+5])/u});E(m=d,Qe,ay).call(m),E(v=d,Qe,Tl).call(v),d.rotate(d.rotation)}else if(l){x(d,Ei,!0);const y=l[0],S={x:y[0]-f,y:u-(y[1]-p)},R=new iy(S,[0,0,h,u],1,g(d,un)/2,!0,.001);for(let T=0,k=y.length;T<k;T+=2)S.x=y[T]-f,S.y=u-(y[T+1]-p),R.add(S);const{id:A,clipPathId:F}=i.drawLayer.draw(R,d.color,d._defaultOpacity,!0);E(C=d,Qe,Tm).call(C,{highlightOutlines:R.getOutlines(),highlightId:A,clipPathId:F}),E(b=d,Qe,Tl).call(b)}return d}serialize(s=!1){if(this.isEmpty()||s)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),n=_t._colorManager.convert(this.color),o={annotationType:Je.HIGHLIGHT,color:n,opacity:g(this,Er),thickness:g(this,un),quadPoints:E(this,Qe,jP).call(this),outlines:E(this,Qe,KP).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:E(this,Qe,sg).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!E(this,Qe,XP).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(s){return s.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};qh=new WeakMap,rp=new WeakMap,Rr=new WeakMap,Dc=new WeakMap,Yh=new WeakMap,hn=new WeakMap,ap=new WeakMap,lp=new WeakMap,_c=new WeakMap,Wn=new WeakMap,si=new WeakMap,Ei=new WeakMap,Xh=new WeakMap,Er=new WeakMap,Ss=new WeakMap,Qh=new WeakMap,un=new WeakMap,cp=new WeakMap,Qe=new WeakSet,ay=function(){const s=new Zx(g(this,Rr),.001);x(this,Wn,s.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=g(this,Wn).box;const i=new Zx(g(this,Rr),.0025,.001,this._uiManager.direction==="ltr");x(this,hn,i.getOutlines());const{lastPoint:n}=g(this,hn).box;x(this,Xh,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},Tm=function({highlightOutlines:s,highlightId:i,clipPathId:n}){var h,u;if(x(this,Wn,s),x(this,hn,s.getNewOutline(g(this,un)/2+1.5,.0025)),i>=0)x(this,si,i),x(this,Dc,n),this.parent.drawLayer.finalizeLine(i,s),x(this,Ss,this.parent.drawLayer.drawOutline(g(this,hn)));else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(g(this,si),s),this.parent.drawLayer.updateBox(g(this,si),E(h=Rt,vn,Md).call(h,g(this,Wn).box,(f-this.rotation+360)%360)),this.parent.drawLayer.updateLine(g(this,Ss),g(this,hn)),this.parent.drawLayer.updateBox(g(this,Ss),E(u=Rt,vn,Md).call(u,g(this,hn).box,f))}const{x:r,y:a,width:l,height:c}=s.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=l,this.height=c;break;case 90:{const[f,p]=this.parentDimensions;this.x=a,this.y=1-r,this.width=l*p/f,this.height=c*f/p;break}case 180:this.x=1-r,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[f,p]=this.parentDimensions;this.x=1-a,this.y=r,this.width=l*p/f,this.height=c*f/p;break}}const{lastPoint:d}=g(this,hn).box;x(this,Xh,[(d[0]-r)/l,(d[1]-a)/c])},zP=function(s){const i=(r,a)=>{var l,c,d;this.color=r,(l=this.parent)==null||l.drawLayer.changeColor(g(this,si),r),(c=g(this,Yh))==null||c.updateColor(r),x(this,Er,a),(d=this.parent)==null||d.drawLayer.changeOpacity(g(this,si),a)},n=this.color,o=g(this,Er);this.addCommands({cmd:i.bind(this,s,Rt._defaultOpacity),undo:i.bind(this,n,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(s)},!0)},WP=function(s){const i=g(this,un),n=o=>{x(this,un,o),E(this,Qe,$P).call(this,o)};this.addCommands({cmd:n.bind(this,s),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:s},!0)},$P=function(s){if(!g(this,Ei))return;E(this,Qe,Tm).call(this,{highlightOutlines:g(this,Wn).getNewOutline(s/2)}),this.fixAndSetPosition();const[i,n]=this.parentDimensions;this.setDims(this.width*i,this.height*n)},ly=function(){g(this,si)===null||!this.parent||(this.parent.drawLayer.remove(g(this,si)),x(this,si,null),this.parent.drawLayer.remove(g(this,Ss)),x(this,Ss,null))},Tl=function(s=this.parent){g(this,si)===null&&({id:li(this,si)._,clipPathId:li(this,Dc)._}=s.drawLayer.draw(g(this,Wn),this.color,g(this,Er)),x(this,Ss,s.drawLayer.drawOutline(g(this,hn))),g(this,_c)&&(g(this,_c).style.clipPath=g(this,Dc)))},vn=new WeakSet,Md=function({x:s,y:i,width:n,height:o},r){switch(r){case 90:return{x:1-i-o,y:s,width:o,height:n};case 180:return{x:1-s-n,y:1-i-o,width:n,height:o};case 270:return{x:i,y:1-s-n,width:o,height:n}}return{x:s,y:i,width:n,height:o}},UP=function(s){Rt._keyboardManager.exec(this,s)},Dm=function(s){if(!g(this,qh))return;const i=window.getSelection();s?i.setPosition(g(this,qh),g(this,rp)):i.setPosition(g(this,ap),g(this,lp))},sg=function(){return g(this,Ei)?this.rotation:0},jP=function(){if(g(this,Ei))return null;const[s,i]=this.pageDimensions,[n,o]=this.pageTranslation,r=g(this,Rr),a=new Float32Array(r.length*8);let l=0;for(const{x:c,y:d,width:h,height:u}of r){const f=c*s+n,p=(1-d-u)*i+o;a[l]=a[l+4]=f,a[l+1]=a[l+3]=p,a[l+2]=a[l+6]=f+h*s,a[l+5]=a[l+7]=p+u*i,l+=8}return a},KP=function(s){return g(this,Wn).serialize(s,E(this,Qe,sg).call(this))},qP=function(s,i){this._freeHighlight.add(i)&&s.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},YP=function(s,i){this._freeHighlight.isEmpty()?s.drawLayer.remove(this._freeHighlightId):s.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},XP=function(s){const{color:i}=this._initialData;return s.color.some((n,o)=>n!==i[o])},P(Rt,vn),Ge(Rt,"_defaultColor",null),Ge(Rt,"_defaultOpacity",1),Ge(Rt,"_defaultThickness",12),Ge(Rt,"_type","highlight"),Ge(Rt,"_editorType",Je.HIGHLIGHT),Ge(Rt,"_freeHighlightId",-1),Ge(Rt,"_freeHighlight",null),Ge(Rt,"_freeHighlightClipId","");let uv=Rt;var Mc,kc,Po,Ar,gn,Ic,Lc,Oc,Fr,Jh,Nc,Hc,$a,be,QP,JP,ZP,eT,dy,tT,hy,sT,iT,nT,oT,rT,Dl,uy,gy,fy,_m,Mm,kd,py,km,ta,aT,my,lT,cT,vy,Im,ig;const Xt=class Xt extends _t{constructor(s){super({...s,name:"inkEditor"});P(this,be);P(this,Mc,0);P(this,kc,0);P(this,Po,null);P(this,Ar,new Path2D);P(this,gn,!1);P(this,Ic,null);P(this,Lc,!1);P(this,Oc,!1);P(this,Fr,null);P(this,Jh,null);P(this,Nc,0);P(this,Hc,0);P(this,$a,null);this.color=s.color||null,this.thickness=s.thickness||null,this.opacity=s.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(s,i){_t.initialize(s,i)}static updateDefaultParams(s,i){switch(s){case qe.INK_THICKNESS:Xt._defaultThickness=i;break;case qe.INK_COLOR:Xt._defaultColor=i;break;case qe.INK_OPACITY:Xt._defaultOpacity=i/100;break}}updateParams(s,i){switch(s){case qe.INK_THICKNESS:E(this,be,QP).call(this,i);break;case qe.INK_COLOR:E(this,be,JP).call(this,i);break;case qe.INK_OPACITY:E(this,be,ZP).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[qe.INK_THICKNESS,Xt._defaultThickness],[qe.INK_COLOR,Xt._defaultColor||_t._defaultLineColor],[qe.INK_OPACITY,Math.round(Xt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[qe.INK_THICKNESS,this.thickness||Xt._defaultThickness],[qe.INK_COLOR,this.color||Xt._defaultColor||_t._defaultLineColor],[qe.INK_OPACITY,Math.round(100*(this.opacity??Xt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(E(this,be,_m).call(this),E(this,be,Mm).call(this)),this.isAttachedToDOM||(this.parent.add(this),E(this,be,kd).call(this)),E(this,be,ig).call(this)))}remove(){var s;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,g(this,Po)&&(clearTimeout(g(this,Po)),x(this,Po,null)),(s=g(this,Fr))==null||s.disconnect(),x(this,Fr,null),super.remove())}setParent(s){!this.parent&&s?this._uiManager.removeShouldRescale(this):this.parent&&s===null&&this._uiManager.addShouldRescale(this),super.setParent(s)}onScaleChanging(){const[s,i]=this.parentDimensions,n=this.width*s,o=this.height*i;this.setDimensions(n,o)}enableEditMode(){g(this,gn)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,E(this,be,uy).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),E(this,be,gy).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){g(this,gn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),x(this,gn,!0),this.div.classList.add("disabled"),E(this,be,ig).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(s){this._focusEventsAllowed&&(super.focusin(s),this.enableEditMode())}canvasPointerdown(s){s.button!==0||!this.isInEditMode()||g(this,gn)||(this.setInForeground(),s.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),E(this,be,tT).call(this,s.offsetX,s.offsetY))}canvasPointermove(s){s.preventDefault(),E(this,be,hy).call(this,s.offsetX,s.offsetY)}canvasPointerup(s){s.preventDefault(),E(this,be,fy).call(this,s)}canvasPointerleave(s){E(this,be,fy).call(this,s)}get isResizable(){return!this.isEmpty()&&g(this,gn)}render(){if(this.div)return this.div;let s,i;this.width&&(s=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,o,r,a]=E(this,be,eT).call(this);if(this.setAt(n,o,0,0),this.setDims(r,a),E(this,be,_m).call(this),this.width){const[l,c]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*c),this.setAt(s*l,i*c,this.width*l,this.height*c),x(this,Oc,!0),E(this,be,kd).call(this),this.setDims(this.width*l,this.height*c),E(this,be,Dl).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return E(this,be,Mm).call(this),this.div}setDimensions(s,i){const n=Math.round(s),o=Math.round(i);if(g(this,Nc)===n&&g(this,Hc)===o)return;x(this,Nc,n),x(this,Hc,o),this.canvas.style.visibility="hidden";const[r,a]=this.parentDimensions;this.width=s/r,this.height=i/a,this.fixAndSetPosition(),g(this,gn)&&E(this,be,py).call(this,s,i),E(this,be,kd).call(this),E(this,be,Dl).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(s,i,n){var v,C,b;if(s instanceof XS)return null;const o=await super.deserialize(s,i,n);o.thickness=s.thickness,o.color=Ne.makeHexColor(...s.color),o.opacity=s.opacity;const[r,a]=o.pageDimensions,l=o.width*r,c=o.height*a,d=o.parentScale,h=s.thickness/2;x(o,gn,!0),x(o,Nc,Math.round(l)),x(o,Hc,Math.round(c));const{paths:u,rect:f,rotation:p}=s;for(let{bezier:y}of u){y=E(v=Xt,ta,lT).call(v,y,f,p);const S=[];o.paths.push(S);let R=d*(y[0]-h),A=d*(y[1]-h);for(let T=2,k=y.length;T<k;T+=6){const N=d*(y[T]-h),I=d*(y[T+1]-h),O=d*(y[T+2]-h),V=d*(y[T+3]-h),ee=d*(y[T+4]-h),G=d*(y[T+5]-h);S.push([[R,A],[N,I],[O,V],[ee,G]]),R=ee,A=G}const F=E(this,ta,aT).call(this,S);o.bezierPath2D.push(F)}const m=E(C=o,be,vy).call(C);return x(o,kc,Math.max(_t.MIN_SIZE,m[2]-m[0])),x(o,Mc,Math.max(_t.MIN_SIZE,m[3]-m[1])),E(b=o,be,py).call(b,l,c),o}serialize(){if(this.isEmpty())return null;const s=this.getRect(0,0),i=_t._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Je.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:E(this,be,cT).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,s),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Mc=new WeakMap,kc=new WeakMap,Po=new WeakMap,Ar=new WeakMap,gn=new WeakMap,Ic=new WeakMap,Lc=new WeakMap,Oc=new WeakMap,Fr=new WeakMap,Jh=new WeakMap,Nc=new WeakMap,Hc=new WeakMap,$a=new WeakMap,be=new WeakSet,QP=function(s){const i=o=>{this.thickness=o,E(this,be,ig).call(this)},n=this.thickness;this.addCommands({cmd:i.bind(this,s),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},JP=function(s){const i=o=>{this.color=o,E(this,be,Dl).call(this)},n=this.color;this.addCommands({cmd:i.bind(this,s),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qe.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ZP=function(s){const i=o=>{this.opacity=o,E(this,be,Dl).call(this)};s/=100;const n=this.opacity;this.addCommands({cmd:i.bind(this,s),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:qe.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},eT=function(){const{parentRotation:s,parentDimensions:[i,n]}=this;switch(s){case 90:return[0,n,n,i];case 180:return[i,n,i,n];case 270:return[i,0,n,i];default:return[0,0,i,n]}},dy=function(){const{ctx:s,color:i,opacity:n,thickness:o,parentScale:r,scaleFactor:a}=this;s.lineWidth=o*r/a,s.lineCap="round",s.lineJoin="round",s.miterLimit=10,s.strokeStyle=`${i}${zO(n)}`},tT=function(s,i){this.canvas.addEventListener("contextmenu",Sn,{signal:this._uiManager._signal}),E(this,be,gy).call(this),x(this,Ic,new AbortController);const n=this._uiManager.combinedSignal(g(this,Ic));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:n}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:n}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:n}),this.isEditing=!0,g(this,Oc)||(x(this,Oc,!0),E(this,be,kd).call(this),this.thickness||(this.thickness=Xt._defaultThickness),this.color||(this.color=Xt._defaultColor||_t._defaultLineColor),this.opacity??(this.opacity=Xt._defaultOpacity)),this.currentPath.push([s,i]),x(this,Lc,!1),E(this,be,dy).call(this),x(this,$a,()=>{E(this,be,nT).call(this),g(this,$a)&&window.requestAnimationFrame(g(this,$a))}),window.requestAnimationFrame(g(this,$a))},hy=function(s,i){const[n,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&s===n&&i===o)return;const r=this.currentPath;let a=g(this,Ar);if(r.push([s,i]),x(this,Lc,!0),r.length<=2){a.moveTo(...r[0]),a.lineTo(s,i);return}r.length===3&&(x(this,Ar,a=new Path2D),a.moveTo(...r[0])),E(this,be,oT).call(this,a,...r.at(-3),...r.at(-2),s,i)},sT=function(){if(this.currentPath.length===0)return;const s=this.currentPath.at(-1);g(this,Ar).lineTo(...s)},iT=function(s,i){x(this,$a,null),s=Math.min(Math.max(s,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),E(this,be,hy).call(this,s,i),E(this,be,sT).call(this);let n;if(this.currentPath.length!==1)n=E(this,be,rT).call(this);else{const c=[s,i];n=[[c,c.slice(),c.slice(),c]]}const o=g(this,Ar),r=this.currentPath;this.currentPath=[],x(this,Ar,new Path2D);const a=()=>{this.allRawPaths.push(r),this.paths.push(n),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(E(this,be,_m).call(this),E(this,be,Mm).call(this)),E(this,be,ig).call(this))};this.addCommands({cmd:a,undo:l,mustExec:!0})},nT=function(){if(!g(this,Lc))return;x(this,Lc,!1);const s=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),n=i.map(a=>a[0]),o=i.map(a=>a[1]);Math.min(...n)-s,Math.max(...n)+s,Math.min(...o)-s,Math.max(...o)+s;const{ctx:r}=this;r.save(),r.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)r.stroke(a);r.stroke(g(this,Ar)),r.restore()},oT=function(s,i,n,o,r,a,l){const c=(i+o)/2,d=(n+r)/2,h=(o+a)/2,u=(r+l)/2;s.bezierCurveTo(c+2*(o-c)/3,d+2*(r-d)/3,h+2*(o-h)/3,u+2*(r-u)/3,h,u)},rT=function(){const s=this.currentPath;if(s.length<=2)return[[s[0],s[0],s.at(-1),s.at(-1)]];const i=[];let n,[o,r]=s[0];for(n=1;n<s.length-2;n++){const[f,p]=s[n],[m,v]=s[n+1],C=(f+m)/2,b=(p+v)/2,y=[o+2*(f-o)/3,r+2*(p-r)/3],S=[C+2*(f-C)/3,b+2*(p-b)/3];i.push([[o,r],y,S,[C,b]]),[o,r]=[C,b]}const[a,l]=s[n],[c,d]=s[n+1],h=[o+2*(a-o)/3,r+2*(l-r)/3],u=[c+2*(a-c)/3,d+2*(l-d)/3];return i.push([[o,r],h,u,[c,d]]),i},Dl=function(){if(this.isEmpty()){E(this,be,km).call(this);return}E(this,be,dy).call(this);const{canvas:s,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,s.width,s.height),E(this,be,km).call(this);for(const n of this.bezierPath2D)i.stroke(n)},uy=function(){if(g(this,Jh))return;x(this,Jh,new AbortController);const s=this._uiManager.combinedSignal(g(this,Jh));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:s})},gy=function(){var s;(s=this.pointerdownAC)==null||s.abort(),this.pointerdownAC=null},fy=function(s){var i;(i=g(this,Ic))==null||i.abort(),x(this,Ic,null),E(this,be,uy).call(this),g(this,Po)&&clearTimeout(g(this,Po)),x(this,Po,setTimeout(()=>{x(this,Po,null),this.canvas.removeEventListener("contextmenu",Sn)},10)),E(this,be,iT).call(this,s.offsetX,s.offsetY),this.addToAnnotationStorage(),this.setInBackground()},_m=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Mm=function(){x(this,Fr,new ResizeObserver(s=>{const i=s[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),g(this,Fr).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var s;(s=g(this,Fr))==null||s.disconnect(),x(this,Fr,null)},{once:!0})},kd=function(){if(!g(this,Oc))return;const[s,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*s),this.canvas.height=Math.ceil(this.height*i),E(this,be,km).call(this)},py=function(s,i){const n=E(this,be,Im).call(this),o=(s-n)/g(this,kc),r=(i-n)/g(this,Mc);this.scaleFactor=Math.min(o,r)},km=function(){const s=E(this,be,Im).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+s,this.translationY*this.scaleFactor+s)},ta=new WeakSet,aT=function(s){const i=new Path2D;for(let n=0,o=s.length;n<o;n++){const[r,a,l,c]=s[n];n===0&&i.moveTo(...r),i.bezierCurveTo(a[0],a[1],l[0],l[1],c[0],c[1])}return i},my=function(s,i,n){const[o,r,a,l]=i;switch(n){case 0:for(let c=0,d=s.length;c<d;c+=2)s[c]+=o,s[c+1]=l-s[c+1];break;case 90:for(let c=0,d=s.length;c<d;c+=2){const h=s[c];s[c]=s[c+1]+o,s[c+1]=h+r}break;case 180:for(let c=0,d=s.length;c<d;c+=2)s[c]=a-s[c],s[c+1]+=r;break;case 270:for(let c=0,d=s.length;c<d;c+=2){const h=s[c];s[c]=a-s[c+1],s[c+1]=l-h}break;default:throw new Error("Invalid rotation")}return s},lT=function(s,i,n){const[o,r,a,l]=i;switch(n){case 0:for(let c=0,d=s.length;c<d;c+=2)s[c]-=o,s[c+1]=l-s[c+1];break;case 90:for(let c=0,d=s.length;c<d;c+=2){const h=s[c];s[c]=s[c+1]-r,s[c+1]=h-o}break;case 180:for(let c=0,d=s.length;c<d;c+=2)s[c]=a-s[c],s[c+1]-=r;break;case 270:for(let c=0,d=s.length;c<d;c+=2){const h=s[c];s[c]=l-s[c+1],s[c+1]=a-h}break;default:throw new Error("Invalid rotation")}return s},cT=function(s,i,n,o){var d,h;const r=[],a=this.thickness/2,l=s*i+a,c=s*n+a;for(const u of this.paths){const f=[],p=[];for(let m=0,v=u.length;m<v;m++){const[C,b,y,S]=u[m];if(C[0]===S[0]&&C[1]===S[1]&&v===1){const V=s*C[0]+l,ee=s*C[1]+c;f.push(V,ee),p.push(V,ee);break}const R=s*C[0]+l,A=s*C[1]+c,F=s*b[0]+l,T=s*b[1]+c,k=s*y[0]+l,N=s*y[1]+c,I=s*S[0]+l,O=s*S[1]+c;m===0&&(f.push(R,A),p.push(R,A)),f.push(F,T,k,N,I,O),p.push(F,T),m===v-1&&p.push(I,O)}r.push({bezier:E(d=Xt,ta,my).call(d,f,o,this.rotation),points:E(h=Xt,ta,my).call(h,p,o,this.rotation)})}return r},vy=function(){let s=1/0,i=-1/0,n=1/0,o=-1/0;for(const r of this.paths)for(const[a,l,c,d]of r){const h=Ne.bezierBoundingBox(...a,...l,...c,...d);s=Math.min(s,h[0]),n=Math.min(n,h[1]),i=Math.max(i,h[2]),o=Math.max(o,h[3])}return[s,n,i,o]},Im=function(){return g(this,gn)?Math.ceil(this.thickness*this.parentScale):0},ig=function(s=!1){if(this.isEmpty())return;if(!g(this,gn)){E(this,be,Dl).call(this);return}const i=E(this,be,vy).call(this),n=E(this,be,Im).call(this);x(this,kc,Math.max(_t.MIN_SIZE,i[2]-i[0])),x(this,Mc,Math.max(_t.MIN_SIZE,i[3]-i[1]));const o=Math.ceil(n+g(this,kc)*this.scaleFactor),r=Math.ceil(n+g(this,Mc)*this.scaleFactor),[a,l]=this.parentDimensions;this.width=o/a,this.height=r/l,this.setAspectRatio(o,r);const c=this.translationX,d=this.translationY;this.translationX=-i[0],this.translationY=-i[1],E(this,be,kd).call(this),E(this,be,Dl).call(this),x(this,Nc,o),x(this,Hc,r),this.setDims(o,r);const h=s?n/this.scaleFactor/2:0;this.translate(c-this.translationX-h,d-this.translationY-h)},P(Xt,ta),Ge(Xt,"_defaultColor",null),Ge(Xt,"_defaultOpacity",1),Ge(Xt,"_defaultThickness",1),Ge(Xt,"_type","ink"),Ge(Xt,"_editorType",Je.INK);let cy=Xt;var Jt,zs,Ua,Pr,ja,Zh,To,Tr,Do,Wi,eu,ft,ng,og,Lm,wy,dT,Om,by,Nm,hT,uT;const Ag=class Ag extends _t{constructor(s){super({...s,name:"stampEditor"});P(this,ft);P(this,Jt,null);P(this,zs,null);P(this,Ua,null);P(this,Pr,null);P(this,ja,null);P(this,Zh,"");P(this,To,null);P(this,Tr,null);P(this,Do,null);P(this,Wi,!1);P(this,eu,!1);x(this,Pr,s.bitmapUrl),x(this,ja,s.bitmapFile)}static initialize(s,i){_t.initialize(s,i)}static get supportedTypes(){return vt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return vt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(s){return this.supportedTypes.includes(s)}static paste(s,i){i.pasteEditor(Je.STAMP,{bitmapFile:s.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var s;return{type:"stamp",hasAltText:!!((s=this.altTextData)!=null&&s.altText)}}static computeTelemetryFinalData(s){const i=s.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(s=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:r,height:a}=s||this.copyCanvas(null,null,!0).imageData,l=await n.guess({name:"altText",request:{data:o,width:r,height:a,channels:o.length/(r*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),i&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var s,i;g(this,zs)&&(x(this,Jt,null),this._uiManager.imageManager.deleteId(g(this,zs)),(s=g(this,To))==null||s.remove(),x(this,To,null),(i=g(this,Tr))==null||i.disconnect(),x(this,Tr,null),g(this,Do)&&(clearTimeout(g(this,Do)),x(this,Do,null))),super.remove()}rebuild(){if(!this.parent){g(this,zs)&&E(this,ft,Lm).call(this);return}super.rebuild(),this.div!==null&&(g(this,zs)&&g(this,To)===null&&E(this,ft,Lm).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(g(this,Ua)||g(this,Jt)||g(this,Pr)||g(this,ja)||g(this,zs))}get isResizable(){return!0}render(){if(this.div)return this.div;let s,i;if(this.width&&(s=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),g(this,Jt)?E(this,ft,wy).call(this):E(this,ft,Lm).call(this),this.width&&!this.annotationElementId){const[n,o]=this.parentDimensions;this.setAt(s*n,i*o,this.width*n,this.height*o)}return this.div}copyCanvas(s,i,n=!1){var f;s||(s=224);const{width:o,height:r}=g(this,Jt),a=new pb;let l=g(this,Jt),c=o,d=r,h=null;if(i){if(o>i||r>i){const T=Math.min(i/o,i/r);c=Math.floor(o*T),d=Math.floor(r*T)}h=document.createElement("canvas");const p=h.width=Math.ceil(c*a.sx),m=h.height=Math.ceil(d*a.sy);g(this,Wi)||(l=E(this,ft,Om).call(this,p,m));const v=h.getContext("2d");v.filter=this._uiManager.hcmFilter;let C="white",b="#cfcfd8";this._uiManager.hcmFilter!=="none"?b="black":(f=window.matchMedia)!=null&&f.call(window,"(prefers-color-scheme: dark)").matches&&(C="#8f8f9d",b="#42414d");const y=15,S=y*a.sx,R=y*a.sy,A=new OffscreenCanvas(S*2,R*2),F=A.getContext("2d");F.fillStyle=C,F.fillRect(0,0,S*2,R*2),F.fillStyle=b,F.fillRect(0,0,S,R),F.fillRect(S,R,S,R),v.fillStyle=v.createPattern(A,"repeat"),v.fillRect(0,0,p,m),v.drawImage(l,0,0,l.width,l.height,0,0,p,m)}let u=null;if(n){let p,m;if(a.symmetric&&l.width<s&&l.height<s)p=l.width,m=l.height;else if(l=g(this,Jt),o>s||r>s){const b=Math.min(s/o,s/r);p=Math.floor(o*b),m=Math.floor(r*b),g(this,Wi)||(l=E(this,ft,Om).call(this,p,m))}const C=new OffscreenCanvas(p,m).getContext("2d",{willReadFrequently:!0});C.drawImage(l,0,0,l.width,l.height,0,0,p,m),u={width:p,height:m,data:C.getImageData(0,0,p,m).data}}return{canvas:h,width:c,height:d,imageData:u}}getImageForAltText(){return g(this,To)}static async deserialize(s,i,n){var m;let o=null;if(s instanceof SP){const{data:{rect:v,rotation:C,id:b,structParent:y,popupRef:S},container:R,parent:{page:{pageNumber:A}}}=s,F=R.querySelector("canvas"),T=n.imageManager.getFromCanvas(R.id,F);F.remove();const k=((m=await i._structTree.getAriaAttributes(`${BS}${b}`))==null?void 0:m.get("aria-label"))||"";o=s={annotationType:Je.STAMP,bitmapId:T.id,bitmap:T.bitmap,pageIndex:A-1,rect:v.slice(0),rotation:C,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:k},isSvg:!1,structParent:y,popupRef:S}}const r=await super.deserialize(s,i,n),{rect:a,bitmap:l,bitmapUrl:c,bitmapId:d,isSvg:h,accessibilityData:u}=s;d&&n.imageManager.isValidId(d)?(x(r,zs,d),l&&x(r,Jt,l)):x(r,Pr,c),x(r,Wi,h);const[f,p]=r.pageDimensions;return r.width=(a[2]-a[0])/f,r.height=(a[3]-a[1])/p,r.annotationElementId=s.id||null,u&&(r.altTextData=u),r._initialData=o,x(r,eu,!!o),r}serialize(s=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Je.STAMP,bitmapId:g(this,zs),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:g(this,Wi),structTreeParentId:this._structTreeParentId};if(s)return n.bitmapUrl=E(this,ft,Nm).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n;const{decorative:o,altText:r}=this.serializeAltText(!1);if(!o&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const l=E(this,ft,uT).call(this,n);if(l.isSame)return null;l.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,i===null)return n;i.stamps||(i.stamps=new Map);const a=g(this,Wi)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!i.stamps.has(g(this,zs)))i.stamps.set(g(this,zs),{area:a,serialized:n}),n.bitmap=E(this,ft,Nm).call(this,!1);else if(g(this,Wi)){const l=i.stamps.get(g(this,zs));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=E(this,ft,Nm).call(this,!1))}return n}renderAnnotationElement(s){return s.updateEdited({rect:this.getRect(0,0)}),null}};Jt=new WeakMap,zs=new WeakMap,Ua=new WeakMap,Pr=new WeakMap,ja=new WeakMap,Zh=new WeakMap,To=new WeakMap,Tr=new WeakMap,Do=new WeakMap,Wi=new WeakMap,eu=new WeakMap,ft=new WeakSet,ng=function(s,i=!1){if(!s){this.remove();return}x(this,Jt,s.bitmap),i||(x(this,zs,s.id),x(this,Wi,s.isSvg)),s.file&&x(this,Zh,s.file.name),E(this,ft,wy).call(this)},og=function(){if(x(this,Ua,null),this._uiManager.enableWaiting(!1),!!g(this,To)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&g(this,Jt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&g(this,Jt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Lm=function(){if(g(this,zs)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(g(this,zs)).then(n=>E(this,ft,ng).call(this,n,!0)).finally(()=>E(this,ft,og).call(this));return}if(g(this,Pr)){const n=g(this,Pr);x(this,Pr,null),this._uiManager.enableWaiting(!0),x(this,Ua,this._uiManager.imageManager.getFromUrl(n).then(o=>E(this,ft,ng).call(this,o)).finally(()=>E(this,ft,og).call(this)));return}if(g(this,ja)){const n=g(this,ja);x(this,ja,null),this._uiManager.enableWaiting(!0),x(this,Ua,this._uiManager.imageManager.getFromFile(n).then(o=>E(this,ft,ng).call(this,o)).finally(()=>E(this,ft,og).call(this)));return}const s=document.createElement("input");s.type="file",s.accept=Ag.supportedTypesStr;const i=this._uiManager._signal;x(this,Ua,new Promise(n=>{s.addEventListener("change",async()=>{if(!s.files||s.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(s.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,ft,ng).call(this,o)}n()},{signal:i}),s.addEventListener("cancel",()=>{this.remove(),n()},{signal:i})}).finally(()=>E(this,ft,og).call(this))),s.click()},wy=function(){const{div:s}=this;let{width:i,height:n}=g(this,Jt);const[o,r]=this.pageDimensions,a=.75;if(this.width)i=this.width*o,n=this.height*r;else if(i>a*o||n>a*r){const h=Math.min(a*o/i,a*r/n);i*=h,n*=h}const[l,c]=this.parentDimensions;this.setDims(i*l/o,n*c/r),this._uiManager.enableWaiting(!1);const d=x(this,To,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(s.hidden=!1),E(this,ft,by).call(this,i,n),E(this,ft,hT).call(this),g(this,eu)||(this.parent.addUndoableEditor(this),x(this,eu,!0)),this._reportTelemetry({action:"inserted_image"}),g(this,Zh)&&d.setAttribute("aria-label",g(this,Zh))},dT=function(s,i){var a;const[n,o]=this.parentDimensions;this.width=s/n,this.height=i/o,(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,g(this,Do)!==null&&clearTimeout(g(this,Do)),x(this,Do,setTimeout(()=>{x(this,Do,null),E(this,ft,by).call(this,s,i)},200))},Om=function(s,i){const{width:n,height:o}=g(this,Jt);let r=n,a=o,l=g(this,Jt);for(;r>2*s||a>2*i;){const c=r,d=a;r>2*s&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),a>2*i&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(r,a);h.getContext("2d").drawImage(l,0,0,c,d,0,0,r,a),l=h.transferToImageBitmap()}return l},by=function(s,i){const n=new pb,o=Math.ceil(s*n.sx),r=Math.ceil(i*n.sy),a=g(this,To);if(!a||a.width===o&&a.height===r)return;a.width=o,a.height=r;const l=g(this,Wi)?g(this,Jt):E(this,ft,Om).call(this,o,r),c=a.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,o,r)},Nm=function(s){if(s){if(g(this,Wi)){const o=this._uiManager.imageManager.getSvgUrl(g(this,zs));if(o)return o}const i=document.createElement("canvas");return{width:i.width,height:i.height}=g(this,Jt),i.getContext("2d").drawImage(g(this,Jt),0,0),i.toDataURL()}if(g(this,Wi)){const[i,n]=this.pageDimensions,o=Math.round(this.width*i*al.PDF_TO_CSS_UNITS),r=Math.round(this.height*n*al.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(o,r);return a.getContext("2d").drawImage(g(this,Jt),0,0,g(this,Jt).width,g(this,Jt).height,0,0,o,r),a.transferToImageBitmap()}return structuredClone(g(this,Jt))},hT=function(){this._uiManager._signal&&(x(this,Tr,new ResizeObserver(s=>{const i=s[0].contentRect;i.width&&i.height&&E(this,ft,dT).call(this,i.width,i.height)})),g(this,Tr).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var s;(s=g(this,Tr))==null||s.disconnect(),x(this,Tr,null)},{once:!0}))},uT=function(s){var c;const{rect:i,pageIndex:n,accessibilityData:{altText:o}}=this._initialData,r=s.rect.every((d,h)=>Math.abs(d-i[h])<1),a=s.pageIndex===n,l=(((c=s.accessibilityData)==null?void 0:c.alt)||"")===o;return{isSame:r&&a&&l,isSameAltText:l}},Ge(Ag,"_type","stamp"),Ge(Ag,"_editorType",Je.STAMP);let Cy=Ag;var Bc,tu,_o,Ka,Dr,$i,qa,su,iu,ii,_r,Ve,Ya,Ys,gT,Sy,xy,Ry,Hm;const Fn=class Fn{constructor({uiManager:t,pageIndex:s,div:i,structTreeLayer:n,accessibilityManager:o,annotationLayer:r,drawLayer:a,textLayer:l,viewport:c,l10n:d}){P(this,Ys);P(this,Bc);P(this,tu,!1);P(this,_o,null);P(this,Ka,null);P(this,Dr,null);P(this,$i,new Map);P(this,qa,!1);P(this,su,!1);P(this,iu,!1);P(this,ii,null);P(this,_r,null);P(this,Ve);const h=[...g(Fn,Ya).values()];if(!Fn._initialized){Fn._initialized=!0;for(const u of h)u.initialize(d,t)}t.registerEditorTypes(h),x(this,Ve,t),this.pageIndex=s,this.div=i,x(this,Bc,o),x(this,_o,r),this.viewport=c,x(this,ii,l),this.drawLayer=a,this._structTree=n,g(this,Ve).addLayer(this)}get isEmpty(){return g(this,$i).size===0}get isInvisible(){return this.isEmpty&&g(this,Ve).getMode()===Je.NONE}updateToolbar(t){g(this,Ve).updateToolbar(t)}updateMode(t=g(this,Ve).getMode()){switch(E(this,Ys,Hm).call(this),t){case Je.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Je.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Je.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:s}=this.div;for(const i of g(Fn,Ya).values())s.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var s;return t===((s=g(this,ii))==null?void 0:s.div)}addInkEditorIfNeeded(t){if(g(this,Ve).getMode()!==Je.INK)return;if(!t){for(const i of g(this,$i).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){g(this,Ve).setEditingState(t)}addCommands(t){g(this,Ve).addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var s;(s=g(this,_o))==null||s.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of g(this,$i).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(g(this,Ve).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!g(this,_o))return;const s=g(this,_o).getEditableAnnotations();for(const i of s){if(i.hide(),g(this,Ve).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const n=await this.deserialize(i);n&&(this.addOrRebuild(n),n.enableEditing())}}disable(){var n;x(this,iu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,s=new Map;for(const o of g(this,$i).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else s.set(o.annotationElementId,o);(n=this.getEditableAnnotation(o.annotationElementId))==null||n.show(),o.remove()}if(g(this,_o)){const o=g(this,_o).getEditableAnnotations();for(const r of o){const{id:a}=r.data;if(g(this,Ve).isDeletedAnnotationElement(a))continue;let l=s.get(a);if(l){l.resetAnnotationElement(r),l.show(!1),r.show();continue}l=t.get(a),l&&(g(this,Ve).addChangedExistingAnnotation(l),l.renderAnnotationElement(r)&&l.show(!1)),r.show()}}E(this,Ys,Hm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const o of g(Fn,Ya).values())i.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,iu,!1)}getEditableAnnotation(t){var s;return((s=g(this,_o))==null?void 0:s.getEditableAnnotation(t))||null}setActiveEditor(t){g(this,Ve).getActive()!==t&&g(this,Ve).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=g(this,ii))!=null&&t.div&&!g(this,_r)){x(this,_r,new AbortController);const s=g(this,Ve).combinedSignal(g(this,_r));g(this,ii).div.addEventListener("pointerdown",E(this,Ys,gT).bind(this),{signal:s}),g(this,ii).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=g(this,ii))!=null&&t.div&&g(this,_r)&&(g(this,_r).abort(),x(this,_r,null),g(this,ii).div.classList.remove("highlighting"))}enableClick(){if(g(this,Ka))return;x(this,Ka,new AbortController);const t=g(this,Ve).combinedSignal(g(this,Ka));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){var t;(t=g(this,Ka))==null||t.abort(),x(this,Ka,null)}attach(t){g(this,$i).set(t.id,t);const{annotationElementId:s}=t;s&&g(this,Ve).isDeletedAnnotationElement(s)&&g(this,Ve).removeDeletedAnnotationElement(t)}detach(t){var s;g(this,$i).delete(t.id),(s=g(this,Bc))==null||s.removePointerInTextLayer(t.contentDiv),!g(this,iu)&&t.annotationElementId&&g(this,Ve).addDeletedAnnotationElement(t)}remove(t){this.detach(t),g(this,Ve).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,g(this,su)||this.addInkEditorIfNeeded(!1)}changeParent(t){var s;t.parent!==this&&(t.parent&&t.annotationElementId&&(g(this,Ve).addDeletedAnnotationElement(t.annotationElementId),_t.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(s=t.parent)==null||s.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),g(this,Ve).addEditor(t),this.attach(t),!t.isAttachedToDOM){const s=t.render();this.div.append(s),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),g(this,Ve).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:s}=document;t.div.contains(s)&&!g(this,Dr)&&(t._focusEventsAllowed=!1,x(this,Dr,setTimeout(()=>{x(this,Dr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:g(this,Ve)._signal}),s.focus())},0))),t._structTreeParentId=(i=g(this,Bc))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const s=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:s,undo:i,mustExec:!1})}getNextId(){return g(this,Ve).getId()}combinedSignal(t){return g(this,Ve).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=g(this,Ys,Sy))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,s){g(this,Ve).updateToolbar(t),g(this,Ve).updateMode(t);const{offsetX:i,offsetY:n}=E(this,Ys,Ry).call(this),o=this.getNextId(),r=E(this,Ys,xy).call(this,{parent:this,id:o,x:i,y:n,uiManager:g(this,Ve),isCentered:!0,...s});r&&this.add(r)}async deserialize(t){var s;return await((s=g(Fn,Ya).get(t.annotationType??t.annotationEditorType))==null?void 0:s.deserialize(t,this,g(this,Ve)))||null}createAndAddNewEditor(t,s,i={}){const n=this.getNextId(),o=E(this,Ys,xy).call(this,{parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:g(this,Ve),isCentered:s,...i});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(E(this,Ys,Ry).call(this),!0)}setSelected(t){g(this,Ve).setSelected(t)}toggleSelected(t){g(this,Ve).toggleSelected(t)}unselect(t){g(this,Ve).unselect(t)}pointerup(t){const{isMac:s}=pi.platform;if(!(t.button!==0||t.ctrlKey&&s)&&t.target===this.div&&g(this,qa)){if(x(this,qa,!1),!g(this,tu)){x(this,tu,!0);return}if(g(this,Ve).getMode()===Je.STAMP){g(this,Ve).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(g(this,Ve).getMode()===Je.HIGHLIGHT&&this.enableTextSelection(),g(this,qa)){x(this,qa,!1);return}const{isMac:s}=pi.platform;if(t.button!==0||t.ctrlKey&&s||t.target!==this.div)return;x(this,qa,!0);const i=g(this,Ve).getActive();x(this,tu,!i||i.isEmpty())}findNewParent(t,s,i){const n=g(this,Ve).findParent(s,i);return n===null||n===this?!1:(n.changeParent(t),!0)}destroy(){var t,s;((t=g(this,Ve).getActive())==null?void 0:t.parent)===this&&(g(this,Ve).commitOrRemove(),g(this,Ve).setActiveEditor(null)),g(this,Dr)&&(clearTimeout(g(this,Dr)),x(this,Dr,null));for(const i of g(this,$i).values())(s=g(this,Bc))==null||s.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,g(this,$i).clear(),g(this,Ve).removeLayer(this)}render({viewport:t}){this.viewport=t,Qc(this.div,t);for(const s of g(this,Ve).getEditors(this.pageIndex))this.add(s),s.rebuild();this.updateMode()}update({viewport:t}){g(this,Ve).commitOrRemove(),E(this,Ys,Hm).call(this);const s=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Qc(this.div,{rotation:i}),s!==i)for(const n of g(this,$i).values())n.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:s}=this.viewport.rawDims;return[t,s]}get scale(){return g(this,Ve).viewParameters.realScale}};Bc=new WeakMap,tu=new WeakMap,_o=new WeakMap,Ka=new WeakMap,Dr=new WeakMap,$i=new WeakMap,qa=new WeakMap,su=new WeakMap,iu=new WeakMap,ii=new WeakMap,_r=new WeakMap,Ve=new WeakMap,Ya=new WeakMap,Ys=new WeakSet,gT=function(t){g(this,Ve).unselectAll();const{target:s}=t;if(s===g(this,ii).div||(s.getAttribute("role")==="img"||s.classList.contains("endOfContent"))&&g(this,ii).div.contains(s)){const{isMac:i}=pi.platform;if(t.button!==0||t.ctrlKey&&i)return;g(this,Ve).showAllEditors("highlight",!0,!0),g(this,ii).div.classList.add("free"),this.toggleDrawing(),uv.startHighlighting(this,g(this,Ve).direction==="ltr",{target:g(this,ii).div,x:t.x,y:t.y}),g(this,ii).div.addEventListener("pointerup",()=>{g(this,ii).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:g(this,Ve)._signal}),t.preventDefault()}},Sy=function(){return g(Fn,Ya).get(g(this,Ve).getMode())},xy=function(t){const s=g(this,Ys,Sy);return s?new s.prototype.constructor(t):null},Ry=function(){const{x:t,y:s,width:i,height:n}=this.div.getBoundingClientRect(),o=Math.max(0,t),r=Math.max(0,s),a=Math.min(window.innerWidth,t+i),l=Math.min(window.innerHeight,s+n),c=(o+a)/2-t,d=(r+l)/2-s,[h,u]=this.viewport.rotation%180===0?[c,d]:[d,c];return{offsetX:h,offsetY:u}},Hm=function(){x(this,su,!0);for(const t of g(this,$i).values())t.isEmpty()&&t.remove();x(this,su,!1)},Ge(Fn,"_initialized",!1),P(Fn,Ya,new Map([ey,cy,Cy,uv].map(t=>[t._editorType,t])));let yy=Fn;var Mo,dp,gs,Mr,hp,Ay,rd,Fy,fT;const Bs=class Bs{constructor({pageIndex:t}){P(this,rd);P(this,Mo,null);P(this,dp,0);P(this,gs,new Map);P(this,Mr,new Map);this.pageIndex=t}setParent(t){if(!g(this,Mo)){x(this,Mo,t);return}if(g(this,Mo)!==t){if(g(this,gs).size>0)for(const s of g(this,gs).values())s.remove(),t.append(s);x(this,Mo,t)}}static get _svgFactory(){return vt(this,"_svgFactory",new YS)}draw(t,s,i,n=!1){const o=li(this,dp)._++,r=E(this,rd,Fy).call(this,t.box);r.classList.add(...t.classNamesForDrawing);const a=Bs._svgFactory.createElement("defs");r.append(a);const l=Bs._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${o}`;l.setAttribute("id",c),l.setAttribute("d",t.toSVGPath()),n&&g(this,Mr).set(o,l);const d=E(this,rd,fT).call(this,a,c),h=Bs._svgFactory.createElement("use");return r.append(h),r.setAttribute("fill",s),r.setAttribute("fill-opacity",i),h.setAttribute("href",`#${c}`),g(this,gs).set(o,r),{id:o,clipPathId:`url(#${d})`}}drawOutline(t){const s=li(this,dp)._++,i=E(this,rd,Fy).call(this,t.box);i.classList.add(...t.classNamesForOutlining);const n=Bs._svgFactory.createElement("defs");i.append(n);const o=Bs._svgFactory.createElement("path");n.append(o);const r=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",r),o.setAttribute("d",t.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let a;if(t.mustRemoveSelfIntersections){const d=Bs._svgFactory.createElement("mask");n.append(d),a=`mask_p${this.pageIndex}_${s}`,d.setAttribute("id",a),d.setAttribute("maskUnits","objectBoundingBox");const h=Bs._svgFactory.createElement("rect");d.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");const u=Bs._svgFactory.createElement("use");d.append(u),u.setAttribute("href",`#${r}`),u.setAttribute("stroke","none"),u.setAttribute("fill","black"),u.setAttribute("fill-rule","nonzero"),u.classList.add("mask")}const l=Bs._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${r}`),a&&l.setAttribute("mask",`url(#${a})`);const c=l.cloneNode();return i.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),g(this,gs).set(s,i),s}finalizeLine(t,s){const i=g(this,Mr).get(t);g(this,Mr).delete(t),this.updateBox(t,s.box),i.setAttribute("d",s.toSVGPath())}updateLine(t,s){g(this,gs).get(t).firstChild.firstChild.setAttribute("d",s.toSVGPath())}updatePath(t,s){g(this,Mr).get(t).setAttribute("d",s.toSVGPath())}updateBox(t,s){var i;E(i=Bs,hp,Ay).call(i,g(this,gs).get(t),s)}show(t,s){g(this,gs).get(t).classList.toggle("hidden",!s)}rotate(t,s){g(this,gs).get(t).setAttribute("data-main-rotation",s)}changeColor(t,s){g(this,gs).get(t).setAttribute("fill",s)}changeOpacity(t,s){g(this,gs).get(t).setAttribute("fill-opacity",s)}addClass(t,s){g(this,gs).get(t).classList.add(s)}removeClass(t,s){g(this,gs).get(t).classList.remove(s)}getSVGRoot(t){return g(this,gs).get(t)}remove(t){g(this,Mr).delete(t),g(this,Mo)!==null&&(g(this,gs).get(t).remove(),g(this,gs).delete(t))}destroy(){x(this,Mo,null);for(const t of g(this,gs).values())t.remove();g(this,gs).clear(),g(this,Mr).clear()}};Mo=new WeakMap,dp=new WeakMap,gs=new WeakMap,Mr=new WeakMap,hp=new WeakSet,Ay=function(t,{x:s=0,y:i=0,width:n=1,height:o=1}={}){const{style:r}=t;r.top=`${100*i}%`,r.left=`${100*s}%`,r.width=`${100*n}%`,r.height=`${100*o}%`},rd=new WeakSet,Fy=function(t){var i;const s=Bs._svgFactory.create(1,1,!0);return g(this,Mo).append(s),s.setAttribute("aria-hidden",!0),E(i=Bs,hp,Ay).call(i,s,t),s},fT=function(t,s){const i=Bs._svgFactory.createElement("clipPath");t.append(i);const n=`clip_${s}`;i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");const o=Bs._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${s}`),o.classList.add("clip"),n},P(Bs,hp);let Ey=Bs;var yN=Xe.AbortException,SN=Xe.AnnotationEditorLayer,xN=Xe.AnnotationEditorParamsType,RN=Xe.AnnotationEditorType,EN=Xe.AnnotationEditorUIManager,AN=Xe.AnnotationLayer,FN=Xe.AnnotationMode,PN=Xe.ColorPicker,TN=Xe.DOMSVGFactory,DN=Xe.DrawLayer,_N=Xe.FeatureTest,MN=Xe.GlobalWorkerOptions,kN=Xe.ImageKind,IN=Xe.InvalidPDFException,LN=Xe.MissingPDFException,ON=Xe.OPS,NN=Xe.OutputScale,HN=Xe.PDFDataRangeTransport,BN=Xe.PDFDateString,GN=Xe.PDFWorker,VN=Xe.PasswordResponses,zN=Xe.PermissionFlag,WN=Xe.PixelsPerInch,$N=Xe.RenderingCancelledException,UN=Xe.TextLayer,jN=Xe.UnexpectedResponseException,KN=Xe.Util,qN=Xe.VerbosityLevel,YN=Xe.XfaLayer,XN=Xe.build,QN=Xe.createValidAbsoluteUrl,JN=Xe.fetchData,ZN=Xe.getDocument,eH=Xe.getFilenameFromUrl,tH=Xe.getPdfFilenameFromUrl,sH=Xe.getXfaPageViewport,iH=Xe.isDataScheme,nH=Xe.isPdfFile,oH=Xe.noContextMenu,rH=Xe.normalizeUnicode,aH=Xe.setLayerDimensions,lH=Xe.shadow,cH=Xe.version;const pT=Object.freeze(Object.defineProperty({__proto__:null,AbortException:yN,AnnotationEditorLayer:SN,AnnotationEditorParamsType:xN,AnnotationEditorType:RN,AnnotationEditorUIManager:EN,AnnotationLayer:AN,AnnotationMode:FN,ColorPicker:PN,DOMSVGFactory:TN,DrawLayer:DN,FeatureTest:_N,GlobalWorkerOptions:MN,ImageKind:kN,InvalidPDFException:IN,MissingPDFException:LN,OPS:ON,OutputScale:NN,PDFDataRangeTransport:HN,PDFDateString:BN,PDFWorker:GN,PasswordResponses:VN,PermissionFlag:zN,PixelsPerInch:WN,RenderingCancelledException:$N,TextLayer:UN,UnexpectedResponseException:jN,Util:KN,VerbosityLevel:qN,XfaLayer:YN,build:XN,createValidAbsoluteUrl:QN,fetchData:JN,getDocument:ZN,getFilenameFromUrl:eH,getPdfFilenameFromUrl:tH,getXfaPageViewport:sH,isDataScheme:iH,isPdfFile:nH,noContextMenu:oH,normalizeUnicode:rH,setLayerDimensions:aH,shadow:lH,version:cH},Symbol.toStringTag,{value:"Module"}));var tw=OA(()=>pT),dH=W(`<div class="relative w-[280px] max-w-full rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 bg-gray-50
  dark:bg-gray-900 cursor-pointer"><div class="absolute top-1 right-1 z-10
           flex gap-1 text-[11px]
           bg-white/80 dark:bg-gray-800/80
           backdrop-blur
           rounded-md shadow px-1.5 py-1"><a target="_blank" title="Má» PDF">ð</a> <button title="Táº£i xuá»ng">â¬</button></div> <canvas class="block w-full h-auto bg-white"></canvas> <div class="px-2 py-1 text-[10px] text-gray-500 truncate">Nháº¥n Äá» xem toÃ n mÃ n hÃ¬nh</div></div>`);function hH(e,t){lt(t,!1);let s=he(t,"url",8),i=he(t,"onOpen",8),n=J(),o=J(),r,a=1;const l=window.innerWidth<768;tw(tw().GlobalWorkerOptions.workerSrc=new URL(""+new URL("pdf.worker.min-GB3t0DcA.mjs",import.meta.url).href,import.meta.url).toString());async function c(){r||(r=await tw().getDocument(s()).promise);const v=await r.getPage(a),C=v.getViewport({scale:1}),b=w(o).clientWidth;let y;l?y=b/C.width:y=1;const S=v.getViewport({scale:y}),R=w(n).getContext("2d");as(n,w(n).width=S.width),as(n,w(n).height=S.height),await v.render({canvasContext:R,viewport:S}).promise}vs(c);async function d(v){v.stopPropagation();const b=await(await fetch(s())).blob(),y=document.createElement("a");y.href=URL.createObjectURL(b),y.download=s().split("/").pop()||"file.pdf",y.click(),URL.revokeObjectURL(y.href)}ut();var h=dH(),u=D(h),f=D(u),p=M(f,2),m=M(u,2);ss(m,v=>L(n,v),()=>w(n)),ss(h,v=>L(o,v),()=>w(o)),Ae(()=>xs(f,"href",s())),z("click",p,d),z("click",u,il(function(v){uC.call(this,t,v)})),z("click",h,()=>{var v;return(v=i())==null?void 0:v(s())}),_(e,h),ct()}var sw=OA(()=>pT),uH=W(`<div class="fixed inset-0 z-50
         bg-black/60 backdrop-blur-sm
         flex items-center justify-center"><div class="relative w-full h-full md:w-[90vw] md:h-[90vh]
           bg-white dark:bg-gray-900
           rounded-none md:rounded-xl
           flex flex-col"><div class="flex items-center justify-between
             px-3 py-2 border-b dark:border-gray-700"><span class="text-sm font-medium truncate"> </span> <div class="flex gap-2 text-sm"><button>â</button> <button>â</button> <a download="" title="Download">â¬</a> <button>â</button></div></div> <div class="flex-1 overflow-auto bg-gray-100 dark:bg-gray-800"><div class="flex justify-center p-4"><canvas class="bg-white shadow"></canvas></div></div></div></div>`);function gH(e,t){lt(t,!1);let s=he(t,"url",8),i=he(t,"onClose",8),n=J(),o=1,r=J(1.3),a;sw(sw().GlobalWorkerOptions.workerSrc=new URL(""+new URL("pdf.worker.min-GB3t0DcA.mjs",import.meta.url).href,import.meta.url).toString());async function l(){a||(a=await sw().getDocument(s()).promise);const T=await a.getPage(o),k=T.getViewport({scale:w(r)}),N=w(n).getContext("2d");as(n,w(n).width=k.width),as(n,w(n).height=k.height),await T.render({canvasContext:N,viewport:k}).promise}function c(){var T;(T=i())==null||T()}function d(T){T.key==="Escape"&&c()}vs(()=>{document.body.style.overflow="hidden",window.addEventListener("keydown",d),l()}),Yo(()=>{document.body.style.overflow="",window.removeEventListener("keydown",d)}),ut();var h=uH(),u=D(h),f=D(u),p=D(f),m=D(p),v=M(p,2),C=D(v),b=M(C,2),y=M(b,2),S=M(y,2),R=M(f,2),A=D(R),F=D(A);ss(F,T=>L(n,T),()=>w(n)),Ae(T=>{ze(m,T),xs(y,"href",s())},[()=>(me(s()),Y(()=>s().split("/").pop()))]),z("click",C,()=>{L(r,w(r)+.1),l()}),z("click",b,()=>{L(r,w(r)-.1),l()}),z("click",S,c),z("click",h,A1(c)),_(e,h),ct()}const LQ=(e,t="noname",s="application/json")=>{const i=new Blob([e],{type:s}),n=URL.createObjectURL(i),o=document.createElement("a");o.href=n,o.download=t,o.click(),URL.revokeObjectURL(n)};function fH(e){if(!e)return"empty";try{const t=typeof e=="string"?JSON.parse(e):e;console.log("parsed preview for share detection:",t),(t==null?void 0:t.type)==="share"&&(e=t==null?void 0:t.message)}catch{}if(typeof e=="object"){if(Array.isArray(e.urls)&&e.urls.length>1)return"gallery";if(Array.isArray(e.urls)&&e.urls.length===1)return"image"}if(typeof e=="string"){const t=e.trim();if(t.startsWith("{")||t.startsWith("["))try{const i=JSON.parse(t);if(Array.isArray(i==null?void 0:i.urls))return i.urls.length>1?"gallery":"image"}catch{}const s=t.toLowerCase();if(/\.(jpg|jpeg|png|gif|webp)$/.test(s))return"image";if(/\.(mp4|webm|mov|ogg)$/.test(s))return"video";if(/\.pdf$/.test(s))return"pdf";if(/\.[a-z0-9]{2,5}$/.test(s))return"file"}return"text"}var pH=W('<!> <span class="shrink-0">Album áº£nh</span>',1),mH=W('<!> <span class="shrink-0">HÃ¬nh áº£nh</span>',1),vH=W('<!> <span class="shrink-0">Video</span>',1),CH=W('<!> <span class="shrink-0">PDF</span>',1),wH=W('<!> <span class="shrink-0">Tá»p ÄÃ­nh kÃ¨m</span>',1),bH=W('<!> <div class="truncate"> </div>',1),yH=W("<div><!> <!></div>");function mT(e,t){lt(t,!1);const s=J(),i=J();let n=he(t,"preview",12,""),o=he(t,"className",8,""),r=he(t,"showIcon",8,!0);Bt(()=>me(n()),()=>{L(i,(()=>{try{const f=typeof n()=="string"?JSON.parse(n()):n();return n(f==null?void 0:f.message),!0}catch{return!1}})())}),Bt(()=>me(n()),()=>{L(s,fH(n()))}),ki(),ut();var a=yH(),l=D(a);{var c=f=>{var p=de(),m=j(p);{var v=C=>{DS(C,{size:"14",class:"text-blue-500 shrink-0"})};Z(m,C=>{r()&&C(v)})}_(f,p)};Z(l,f=>{w(i)&&f(c)})}var d=M(l,2);{var h=f=>{var p=pH(),m=j(p);{var v=C=>{K1(C,{size:"14",class:"text-blue-500 shrink-0"})};Z(m,C=>{r()&&C(v)})}_(f,p)},u=f=>{var p=de(),m=j(p);{var v=b=>{var y=mH(),S=j(y);{var R=A=>{WA(A,{size:"14",class:"text-blue-500 shrink-0"})};Z(S,A=>{r()&&A(R)})}_(b,y)},C=b=>{var y=de(),S=j(y);{var R=F=>{var T=vH(),k=j(T);{var N=I=>{YA(I,{size:"14",class:"text-purple-500 shrink-0"})};Z(k,I=>{r()&&I(N)})}_(F,T)},A=F=>{var T=de(),k=j(T);{var N=O=>{var V=CH(),ee=j(V);{var G=ne=>{U1(ne,{size:"14",class:"text-red-500 shrink-0"})};Z(ee,ne=>{r()&&ne(G)})}_(O,V)},I=O=>{var V=de(),ee=j(V);{var G=te=>{var K=wH(),ve=j(K);{var ce=Se=>{j1(Se,{size:"14",class:"text-gray-500 shrink-0"})};Z(ve,Se=>{r()&&Se(ce)})}_(te,K)},ne=te=>{var K=bH(),ve=j(K);{var ce=re=>{J1(re,{size:"14",class:"shrink-0 text-gray-400"})};Z(ve,re=>{r()&&re(ce)})}var Se=M(ve,2),Ce=D(Se);Ae(()=>ze(Ce,n()||"No messages yet")),_(te,K)};Z(ee,te=>{w(s)==="file"?te(G):te(ne,!1)},!0)}_(O,V)};Z(k,O=>{w(s)==="pdf"?O(N):O(I,!1)},!0)}_(F,T)};Z(S,F=>{w(s)==="video"?F(R):F(A,!1)},!0)}_(b,y)};Z(m,b=>{w(s)==="image"?b(v):b(C,!1)},!0)}_(f,p)};Z(d,f=>{w(s)==="gallery"?f(h):f(u,!1)})}Ae(()=>Ht(a,1,`text-[12px] text-gray-500 mt-0.5 flex items-center gap-1 ${o()}`)),_(e,a),ct()}var SH=W('<div class="mt-1 text-xs italic text-gray-600 border-t pt-1 border-gray-300 text-right"> </div>'),xH=W('<div><div class="text-xs text-gray-500 mb-1">ð Chia sáº» tá»« <span class="font-semibold"> </span></div> <div class="text-sm text-gray-800"> </div> <!></div>');function RH(e,t){lt(t,!1);const s=J();let i=he(t,"payload",8),n=he(t,"isMine",8,!1);const o=new Map(jt(bp).map(p=>[p.conversationId,p]));Bt(()=>me(i()),()=>{L(s,o.get(i().fromConversationId))}),ki(),ut();var r=xH(),a=D(r),l=M(D(a)),c=D(l),d=M(a,2),h=D(d),u=M(d,2);{var f=p=>{var m=SH(),v=D(m);Ae(()=>ze(v,`â${me(i()),Y(()=>i().note)??""}â`)),_(p,m)};Z(u,p=>{me(i()),Y(()=>i().note)&&p(f)})}Ae(()=>{Ht(r,1,`rounded-xl border
         px-3 py-2 text-sm
         bg-gray-50
         ${n()?"border-blue-300":"border-gray-300"}`),ze(c,(w(s),Y(()=>{var p;return((p=w(s))==null?void 0:p.title)||"Cuá»c trÃ² chuyá»n"}))),ze(h,(me(i()),Y(()=>i().message)))}),_(e,r),ct()}var EH=W('<div><div><p class="whitespace-pre-line leading-snug svelte-13g6337"> </p> <p class="absolute bottom-1 right-2 text-[9px] opacity-60 svelte-13g6337"> </p></div></div>'),AH=W('<p class="text-[10px] opacity-60 mb-1 svelte-13g6337"> </p>'),FH=W(`<div class="mb-1 px-3 py-2
           text-[11px]
           rounded-md
           border-l-4 border-blue-500
           bg-gray-100 svelte-13g6337"><div class="font-semibold leading-tight text-gray-800 svelte-13g6337"> </div> <!></div>`),PH=W('<p class="whitespace-pre-line leading-snug svelte-13g6337"> </p>'),TH=W('<video class="rounded-md mt-1 max-h-64 w-full bg-black svelte-13g6337" controls playsinline="" webkit-playsinline="" preload="metadata"></video>',2),DH=W('<img class="rounded-md mt-1 max-h-64 cursor-pointer svelte-13g6337"/>'),_H=W(`<a target="_blank" class="flex items-center gap-2 mt-2 px-3 py-2 rounded-md
             bg-gray-100 dark:bg-gray-700 text-sm svelte-13g6337"> </a>`),MH=W("<img/>"),kH=W("<div></div>"),IH=W('<img class="rounded-md cursor-pointer object-cover aspect-square svelte-13g6337"/>'),LH=W(`<div class="flex items-center justify-center
                 bg-black/60 text-white text-sm rounded-md svelte-13g6337"> </div>`),OH=W('<div class="grid grid-cols-3 gap-1 mt-1 svelte-13g6337"><!> <!></div>'),NH=W('<span class="flex gap-1 px-1 rounded svelte-13g6337"><span class="svelte-13g6337"> </span> <span class="text-[10px] text-gray-600 dark:text-gray-300 font-semibold svelte-13g6337"> </span></span>'),HH=W("<div></div>"),BH=W('<div class="w-3 h-3 bg-blue-500 rounded-full svelte-13g6337"></div>'),GH=W(`<div class="absolute inset-0 rounded-2xl
           bg-blue-500/10
           pointer-events-none
           z-10 svelte-13g6337"></div> <div class="absolute top-2 right-2
           w-5 h-5 rounded-full
           border border-blue-500
           bg-white
           flex items-center justify-center
           z-20 svelte-13g6337"><!></div>`,1),VH=W('<div><div><!> <!> <!> <!> <!> <!> <p class="text-[9px] text-right opacity-60 mt-1 svelte-13g6337"> </p> <!> <!></div> <div class="opacity-0 group-hover:opacity-100 ml-1 self-end transition svelte-13g6337"><!></div></div>'),zH=W('<div class="h-px bg-gray-200 my-1 svelte-13g6337"></div> <button class="menu-item flex items-center gap-2 text-amber-600 hover:bg-amber-50 svelte-13g6337"><!> <span class="svelte-13g6337">Thu há»i tin nháº¯n</span></button> <button class="menu-item flex items-center gap-2 text-red-600 hover:bg-red-50 svelte-13g6337"><!> <span class="svelte-13g6337">XoÃ¡ tin nháº¯n</span></button>',1),WH=W('<div class="h-px bg-gray-200 my-1 svelte-13g6337"></div> <div class="px-3 py-2 text-xs text-gray-500 svelte-13g6337">ÄÃ£ chá»n <span class="font-semibold text-gray-700 svelte-13g6337"> </span> tin nháº¯n</div> <button class="menu-item flex items-center gap-2 text-blue-600 hover:bg-blue-50 svelte-13g6337"><!> <span class="svelte-13g6337">Bá» chá»n</span></button>',1),$H=W(`<div class="context-menu fixed z-50
           w-[180px]
           bg-white
           border border-gray-300
           rounded-lg shadow-xl text-sm svelte-13g6337"><button class="menu-item flex items-center gap-2 svelte-13g6337"><!> <span class="svelte-13g6337">Chia sáº» tin nháº¯n</span></button> <button class="menu-item flex items-center gap-2 svelte-13g6337"><!> <span class="svelte-13g6337">Tráº£ lá»i</span></button> <button class="menu-item flex items-center gap-2 svelte-13g6337"><!> <span class="svelte-13g6337">Sao chÃ©p</span></button> <button class="menu-item flex items-center gap-2 svelte-13g6337"><!> <span class="svelte-13g6337">Chá»n nhiá»u</span></button> <!> <!></div>`),UH=W("<!> <!> <!> <!>",1);function vT(e,t){lt(t,!1);const s=()=>mt(qn,"$selectedMessageIds",n),i=()=>mt(Ja,"$selectionMode",n),[n,o]=Zi(),r=J(),a=J(),l=J(),c=J(),d=J();let h=J(!1),u=J(null);qn.subscribe(B=>{B.size===0&&Ja.set(!1)});let f=he(t,"onShareMessage",8,null),p=he(t,"msg",8),m=he(t,"myId",8),v=he(t,"previousMsg",8,null),C=J(),b=J(),y=null;const S=450;let R=J(null),A=J({x:0,y:0}),F=J(!1),T=J([]),k=J(0);const N=String(p().from)===String(m()),I=v()&&v().from===p().from,O=B=>/\.pdf$/i.test(B),V=B=>/\.(mp4|webm|mov|ogg)$/i.test(B),ee=B=>!V(B)&&/\.(jpg|jpeg|png|gif|webp)$/i.test(B);function G(B){Ja.set(!0),qn.update(ae=>{const Ee=new Set(ae);return Ee.add(B),Ee})}function ne(B){qn.update(ae=>{const Ee=new Set(ae);return Ee.has(B)?Ee.delete(B):Ee.add(B),Ee})}function te(){qn.set(new Set),Ja.set(!1),Me()}function K(B){var ae;ne(B==null?void 0:B.id),(ae=f())==null||ae(B),Me()}function ve(B){const ae="https://render-server-ezuf.onrender.com";if(!B)return B;if(/^https?:\/\//i.test(B)){const Ee=new URL(B);return`${ae}${Ee.pathname}`}return`${ae}/${B.replace(/^\/+/,"")}`}function ce(B){B.stopPropagation(),Se(p().reply_to.id)}vs(()=>{var B,ae,Ee,ot;if(w(C))return(B=w(C))==null||B.addEventListener("touchstart",se,{passive:!0}),(ae=w(C))==null||ae.addEventListener("touchmove",we,{passive:!0}),(Ee=w(C))==null||Ee.addEventListener("touchend",De,{passive:!0}),w(b)&&((ot=w(b))==null||ot.addEventListener("touchstart",ce,{passive:!0})),()=>{var U,ue,xe,le;(U=w(C))==null||U.removeEventListener("touchstart",se),(ue=w(C))==null||ue.removeEventListener("touchmove",we),(xe=w(C))==null||xe.removeEventListener("touchend",De),(le=w(b))==null||le.removeEventListener("touchstart",ce)}});async function Se(B){if(!B)return;let ae=document.getElementById(`msg-${B}`);if(ae){Ce(ae);return}let Ee=0;for(;!ae&&Ee<1e3;){Ee++;const ot=jt(Kn);if(!ot.length)break;const U=ot[0];Tg(jt(Pi),{firstMsg:U}),await Qr(),await new Promise(ue=>setTimeout(ue,80)),ae=document.getElementById(`msg-${B}`)}ae?Ce(ae):console.warn("â KhÃ´ng tÃ¬m tháº¥y message gá»c:",B)}function Ce(B){B.scrollIntoView({behavior:"smooth",block:"center"}),B.classList.add("flash-highlight"),setTimeout(()=>{B.classList.remove("flash-highlight")},1200)}async function re(B){try{if(!(B!=null&&B.message))return;await navigator.clipboard.writeText(B.message),console.log("Copied message:",B.message)}catch(ae){console.error("Copy failed",ae)}finally{Me()}}function ie(B=[]){const ae={};for(const Ee of B)ae[Ee]=(ae[Ee]||0)+1;return Object.entries(ae).sort((Ee,ot)=>ot[1]-Ee[1])}function X(B,ae){const ot=N?180:150,U=8,ue=window.innerWidth,xe=window.innerHeight;B+180>ue&&(B=ue-180-U),ae+ot>xe&&(ae=xe-ot-U),B<U&&(B=U),ae<U&&(ae=U),L(R,p()),L(A,{x:B,y:ae})}function Q(B){B.preventDefault(),X(B.clientX,B.clientY)}function se(B){if(B.touches.length!==1)return;const ae=B.touches[0];y=setTimeout(()=>{X(ae.clientX,ae.clientY)},S)}function De(){clearTimeout(y),y=null}function we(){clearTimeout(y),y=null}function Me(){L(R,null)}function je(B){Pn.set({id:B.id,senderId:B.from,content:B.message,type:B.type}),Me()}function nt(B){B.target.closest(".context-menu")||Me()}function bt(B){B.key==="Escape"&&Me()}window.addEventListener("click",nt),window.addEventListener("keydown",bt),Bt(()=>(s(),me(p())),()=>{L(r,s().has(p().id))}),Bt(()=>me(p()),()=>{var B;L(a,p().type==="media"?ve(((B=p().media)==null?void 0:B.url)||p().message):null)}),Bt(()=>(me(p()),w(a)),()=>{var B,ae;L(l,p().type==="media"?{url:w(a),name:((B=p().media)==null?void 0:B.name)||((ae=w(a))==null?void 0:ae.split("/").pop())}:null)}),Bt(()=>me(p()),()=>{L(c,(()=>{if(p().type!=="album"||!p().message)return null;try{const B=typeof p().message=="string"?JSON.parse(p().message):p().message;return{urls:(B.urls||[]).map(ve),fullUrls:(B.fullUrls||B.urls||[]).map(ve)}}catch{return console.warn("â Invalid album message:",p().message),null}})())}),Bt(()=>me(p()),()=>{L(d,p().type==="share"&&p().message?(()=>{try{return typeof p().message=="string"?JSON.parse(p().message):p().message}catch{return console.warn("Invalid share payload",p().message),null}})():null)}),ki(),ut();var We=UH(),gt=j(We);{var Fe=B=>{var ae=EH(),Ee=D(ae),ot=D(Ee),U=D(ot),ue=M(ot,2),xe=D(ue);Ae(le=>{Ht(ae,1,`w-full flex ${N?"justify-end":"justify-start"} select-none`,"svelte-13g6337"),Ht(Ee,1,`relative max-w-[68%]
             px-3 py-2 pb-4
             text-sm
             rounded-2xl
             border border-dashed
             italic
             text-gray-400
             bg-gray-50
             ${N?"rounded-br-md":"rounded-bl-md"}
             ${I?"mt-[2px]":"mt-2"}`,"svelte-13g6337"),ze(U,N?"ð« Báº¡n ÄÃ£ thu há»i tin nháº¯n":"ð« Tin nháº¯n ÄÃ£ ÄÆ°á»£c thu há»i"),ze(xe,le)},[()=>(me(Vp),me(p()),Y(()=>Vp(p().time||p().created_at)))]),z("contextmenu",Ee,le=>le.preventDefault()),_(B,ae)},Ze=B=>{var ae=VH(),Ee=D(ae),ot=D(Ee);{var U=ht=>{var xt=AH(),Ns=D(xt);Ae(()=>ze(Ns,(me(p()),Y(()=>N?"Báº¡n":p().fromName||"User "+p().from)))),_(ht,xt)};Z(ot,ht=>{I||ht(U)})}var ue=M(ot,2);{var xe=ht=>{var xt=FH(),Ns=D(xt),Jo=D(Ns),io=M(Ns,2);{let Gt=Hr(()=>(me(p()),Y(()=>{var hs;return(hs=p())==null?void 0:hs.reply_to.content})));mT(io,{get preview(){return w(Gt)}})}ss(xt,Gt=>L(b,Gt),()=>w(b)),Ae(Gt=>ze(Jo,Gt),[()=>(me(p()),me(m()),Y(()=>p().reply_to.sender_id===String(m())?"Báº¡n":p().fromName||"User "+p().from))]),z("click",xt,il(()=>Se(p().reply_to.id))),_(ht,xt)};Z(ue,ht=>{me(p()),Y(()=>{var xt,Ns;return(Ns=(xt=p())==null?void 0:xt.reply_to)==null?void 0:Ns.id})&&ht(xe)})}var le=M(ue,2);{var ke=ht=>{var xt=PH(),Ns=D(xt);Ae(()=>ze(Ns,(me(p()),Y(()=>p().message)))),_(ht,xt)};Z(le,ht=>{me(p()),Y(()=>p().type==="text")&&ht(ke)})}var Ie=M(le,2);{var _e=ht=>{RH(ht,{get payload(){return w(d)},get isMine(){return N}})};Z(Ie,ht=>{me(p()),w(d),Y(()=>p().type==="share"&&w(d))&&ht(_e)})}var Le=M(Ie,2);{var Ue=ht=>{var xt=de(),Ns=j(xt);{var Jo=Gt=>{var hs=TH();hs.muted=!0,Ae(()=>xs(hs,"src",(w(l),Y(()=>w(l).url)))),_(Gt,hs)},io=Gt=>{var hs=de(),no=j(hs);{var ra=As=>{hH(As,{get url(){return w(l),Y(()=>w(l).url)},onOpen:Xs=>{L(u,Xs),L(h,!0)}})},xl=As=>{var Xs=de(),Tu=j(Xs);{var Du=wd=>{var Rl=DH();Ae(()=>xs(Rl,"src",(w(l),Y(()=>w(l).url)))),z("click",Rl,()=>{L(T,[w(l).url]),L(F,!0)}),_(wd,Rl)},HM=wd=>{var Rl=_H(),BM=D(Rl);Ae(()=>{xs(Rl,"href",(w(l),Y(()=>w(l).url))),ze(BM,`ð ${w(l),Y(()=>w(l).name)??""}`)}),_(wd,Rl)};Z(Tu,wd=>{w(l),Y(()=>ee(w(l).url))?wd(Du):wd(HM,!1)},!0)}_(As,Xs)};Z(no,As=>{w(l),Y(()=>O(w(l).url))?As(ra):As(xl,!1)},!0)}_(Gt,hs)};Z(Ns,Gt=>{w(l),Y(()=>V(w(l).url))?Gt(Jo):Gt(io,!1)})}_(ht,xt)};Z(Le,ht=>{me(p()),Y(()=>p().type==="media")&&ht(Ue)})}var yt=M(Le,2);{var Mt=ht=>{var xt=de(),Ns=j(xt);{var Jo=Gt=>{var hs=kH();let no;fs(hs,5,()=>(w(c),Y(()=>w(c).urls)),gi,(ra,xl,As)=>{var Xs=MH();Ae(()=>{xs(Xs,"src",w(xl)),Ht(Xs,1,`rounded-md cursor-pointer object-cover
            ${w(c),Y(()=>w(c).urls.length===3&&As===0?"col-span-2 row-span-2 aspect-square":"aspect-square")??""}
            ${w(c),Y(()=>w(c).urls.length===5&&As===0?"col-span-2 row-span-2 aspect-square":"")??""}`,"svelte-13g6337")}),z("click",Xs,()=>{L(T,w(c).fullUrls),L(k,As),L(F,!0)}),_(ra,Xs)}),Ae(()=>no=Ht(hs,1,"grid gap-1 mt-1 svelte-13g6337",null,no,{"grid-cols-1":w(c).urls.length===1,"grid-cols-2":w(c).urls.length===2,"grid-cols-3":w(c).urls.length>=3})),_(Gt,hs)},io=Gt=>{var hs=OH(),no=D(hs);fs(no,1,()=>(w(c),Y(()=>w(c).urls.slice(0,6))),gi,(As,Xs,Tu)=>{var Du=IH();Ae(()=>xs(Du,"src",w(Xs))),z("click",Du,()=>{L(T,w(c).fullUrls),L(k,Tu),L(F,!0)}),_(As,Du)});var ra=M(no,2);{var xl=As=>{var Xs=LH(),Tu=D(Xs);Ae(()=>ze(Tu,`+${w(c),Y(()=>w(c).urls.length-6)??""}`)),_(As,Xs)};Z(ra,As=>{w(c),Y(()=>w(c).urls.length>6)&&As(xl)})}_(Gt,hs)};Z(Ns,Gt=>{w(c),Y(()=>w(c).urls.length<6)?Gt(Jo):Gt(io,!1)})}_(ht,xt)};Z(yt,ht=>{me(p()),w(c),Y(()=>p().type==="album"&&w(c))&&ht(Mt)})}var Yt=M(yt,2),rt=D(Yt),Os=M(Yt,2);{var En=ht=>{var xt=HH();fs(xt,5,()=>(me(p()),Y(()=>ie(p().reactions))),gi,(Ns,Jo)=>{var io=Ml(()=>LE(w(Jo),2));let Gt=()=>w(io)[0],hs=()=>w(io)[1];var no=NH(),ra=D(no),xl=D(ra),As=M(ra,2),Xs=D(As);Ae(()=>{ze(xl,Gt()),ze(Xs,hs())}),_(Ns,no)}),Ae(()=>Ht(xt,1,`absolute -bottom-2
          ${N?"right-2":"left-2"}
          flex gap-1 px-1.5 py-[2px]
          rounded-full shadow-md
          bg-white dark:bg-gray-800
          border dark:border-gray-700
          text-[11px] z-10`,"svelte-13g6337")),_(ht,xt)};Z(Os,ht=>{me(p()),Y(()=>{var xt;return(xt=p().reactions)==null?void 0:xt.length})&&ht(En)})}var oa=M(Os,2);{var Cd=ht=>{var xt=GH(),Ns=M(j(xt),2),Jo=D(Ns);{var io=Gt=>{var hs=BH();_(Gt,hs)};Z(Jo,Gt=>{w(r)&&Gt(io)})}_(ht,xt)};Z(oa,ht=>{i()&&ht(Cd)})}ss(Ee,ht=>L(C,ht),()=>w(C));var OM=M(Ee,2),NM=D(OM);bO(NM,{get messageId(){return me(p()),Y(()=>p().id)},get fromMe(){return N},onSelect:({messageId:ht,reaction:xt})=>{Xn({type:"reaction",messageId:ht,reaction:xt})}}),Ae(ht=>{Ht(ae,1,`w-full flex ${N?"justify-end":"justify-start"} select-none group`,"svelte-13g6337"),xs(Ee,"id",(me(p()),Y(()=>"msg-"+p().id))),Ht(Ee,1,`relative max-w-[68%] px-3 py-2 pb-4 text-sm shadow-md rounded-2xl
    ${N?"bg-gradient-to-br from-blue-200 to-blue-300 text-gray-800 rounded-br-md":"bg-white dark:bg-gray-800  text-gray-800 dark:text-gray-200   border border-gray-200 dark:border-gray-700  rounded-bl-md"}
    ${I?"mt-[2px]":"mt-2"}`,"svelte-13g6337"),ze(rt,ht)},[()=>(me(Vp),me(p()),Y(()=>Vp(p().time||p().created_at)))]),z("click",Ee,il(()=>{i()&&ne(p().id)})),z("contextmenu",Ee,Q),_(B,ae)};Z(gt,B=>{me(p()),Y(()=>p().status===1)?B(Fe):B(Ze,!1)})}var Pe=M(gt,2);{var Oe=B=>{var ae=$H(),Ee=D(ae),ot=D(Ee);DS(ot,{size:"16"});var U=M(Ee,2),ue=D(U);iI(ue,{size:"16"});var xe=M(U,2),le=D(xe);V1(le,{size:"16"});var ke=M(xe,2),Ie=D(ke);lI(Ie,{size:"16"});var _e=M(ke,2);{var Le=Mt=>{var Yt=zH(),rt=M(j(Yt),2),Os=D(rt);Cx(Os,{size:"16"});var En=M(rt,2),oa=D(En);jA(oa,{size:"16"}),z("click",rt,()=>{Xn({type:"recall",messageId:w(R).id}),Me()}),z("click",En,()=>{Xn({type:"delete",messageId:w(R).id}),Me()}),_(Mt,Yt)};Z(_e,Mt=>{w(R),me(m()),Y(()=>String(w(R).from)===String(m()))&&Mt(Le)})}var Ue=M(_e,2);{var yt=Mt=>{var Yt=WH(),rt=M(j(Yt),2),Os=M(D(rt)),En=D(Os),oa=M(rt,2),Cd=D(oa);Cx(Cd,{size:"16"}),Ae(()=>ze(En,(s(),Y(()=>s().size)))),z("click",oa,te),_(Mt,Yt)};Z(Ue,Mt=>{i()&&Mt(yt)})}Ae(()=>wn(ae,`top:${w(A),Y(()=>w(A).y)??""}px; left:${w(A),Y(()=>w(A).x)??""}px`)),z("click",Ee,()=>K(w(R))),z("click",U,()=>je(w(R))),z("click",xe,()=>re(w(R))),z("click",ke,()=>{G(w(R).id),Me()}),z("click",ae,il(function(Mt){uC.call(this,t,Mt)})),_(B,ae)};Z(Pe,B=>{w(R)&&B(Oe)})}var dt=M(Pe,2);{var Ot=B=>{fO(B,{get images(){return w(T)},index:0,onClose:()=>L(F,!1)})};Z(dt,B=>{w(F)&&B(Ot)})}var q=M(dt,2);{var ye=B=>{gH(B,{get url(){return w(u)},onClose:()=>L(h,!1)})};Z(q,B=>{w(h)&&B(ye)})}_(e,We),ct(),o()}var jH=W('<span class="text-[11px] text-gray-400 whitespace-nowrap"> </span>'),KH=W("<div></div>"),qH=W('<span class="absolute right-2 bottom-2 text-[10px] px-1.5 py-0.5 rounded bg-blue-100 text-blue-600">GROUP</span>'),YH=W(`<div><div class="w-10 h-10 rounded-full flex items-center justify-center
      bg-gray-200 text-gray-600 font-semibold text-lg uppercase"> </div> <div class="flex-1 min-w-0"><div class="flex items-center justify-between"><span class="font-medium text-gray-800 truncate"> </span> <!></div> <!></div> <!> <!></div>`);function QS(e,t){lt(t,!1);const s=J();let i=he(t,"conversation",8),n=he(t,"selectedId",8),o=he(t,"className",8,""),r=he(t,"onSelect",8,()=>{});function a(A){return A?new Date(A).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}Bt(()=>(me(n()),me(i())),()=>{L(s,n()===i().conversationId)}),ki(),ut();var l=YH();l.__click=()=>r()(i());var c=D(l),d=D(c),h=M(c,2),u=D(h),f=D(u),p=D(f),m=M(f,2);{var v=A=>{var F=jH(),T=D(F);Ae(k=>ze(T,k),[()=>(me(i()),Y(()=>a(i().lastMessageAt)))]),_(A,F)};Z(m,A=>{me(i()),Y(()=>i().lastMessageAt)&&A(v)})}var C=M(u,2);mT(C,{get preview(){return me(i()),Y(()=>i().lastMessagePreview)}});var b=M(h,2);{var y=A=>{var F=KH();Ae(()=>Ht(F,1,`
        w-3 h-3 rounded-full absolute left-2 bottom-2
        ${me(i()),Y(()=>i().online?"bg-green-500":"bg-gray-300")??""}
      `)),_(A,F)};Z(b,A=>{me(i()),Y(()=>i().type==="direct")&&A(y)})}var S=M(b,2);{var R=A=>{var F=qH();_(A,F)};Z(S,A=>{me(i()),Y(()=>i().type==="group")&&A(R)})}Ae(A=>{Ht(l,1,`p-2 rounded-md mb-1 cursor-pointer transition select-none relative
    flex items-center gap-3 border border-transparent
    hover:bg-blue-50 active:scale-[0.98]
    ${w(s)?"bg-blue-100 border-blue-300 shadow-sm":""} ${o()??""}
  `),ze(d,A),ze(p,(me(i()),Y(()=>i().title)))},[()=>(me(i()),Y(()=>{var A,F;return((F=(A=i())==null?void 0:A.title)==null?void 0:F.charAt(0))??"?"}))]),_(e,l),ct()}Cp(["click"]);var ed=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,s){const i=t?this.allAsyncListeners:this.allSyncListeners;let n=i.get(e);return!n&&s&&(n=new Set,i.set(e,n)),n}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,s=!1){this.getListeners(e,s,!0).add(t)}removeEventListener(e,t,s=!1){const i=this.getListeners(e,s,!1);i&&(i.delete(t),i.size===0&&(s?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const s=e.type;if(t&&"event"in e){const a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}const{frameworkOverrides:i}=this,n=a=>{const l=i?()=>i.wrapIncoming(a):a;t?this.dispatchAsync(l):l()},o=this.getListeners(s,t,!1);if(((o==null?void 0:o.size)??0)>0){const a=new Set(o);for(const l of a)o!=null&&o.has(l)&&n(()=>l(e))}const r=this.getGlobalListeners(t);if(r.size>0){const a=new Set(r);for(const l of a)n(()=>l(s,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];for(const t of e)t()}};function zr(e){return e==null||e===""?null:e}function pe(e){return e!=null&&e!==""}function Wt(e){return!pe(e)}function Py(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function Ig(e,t){const s=e?JSON.stringify(e):null,i=t?JSON.stringify(t):null;return s===i}function XH(e,t,s=!1){const i=e==null,n=t==null;if(e!=null&&e.toNumber&&(e=e.toNumber()),t!=null&&t.toNumber&&(t=t.toNumber()),i&&n)return 0;if(i)return-1;if(n)return 1;function o(r,a){return r>a?1:r<a?-1:0}if(typeof e!="string"||!s)return o(e,t);try{return e.localeCompare(t)}catch{return o(e,t)}}var QH=/[&<>"']/g,JH={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Eu(e){return(e==null?void 0:e.toString().toString())??null}function mg(e){var t;return((t=Eu(e))==null?void 0:t.replace(QH,s=>JH[s]))??null}function lo(e){return e.eRootDiv.getRootNode()}function qt(e){return lo(e).activeElement}function ks(e){const{gos:t,eRootDiv:s}=e;let i=null;const n=t.get("getDocument");return n&&pe(n)?i=n():s&&(i=s.ownerDocument),i&&pe(i)?i:document}function CT(e){const t=qt(e);return t===null||t===ks(e).body}function wT(e){return ks(e).defaultView||window}function JS(e){let t=null,s=null;try{t=ks(e).fullscreenElement}catch{}finally{t||(t=lo(e));const i=t.querySelector("body");i?s=i:t instanceof ShadowRoot?s=t:t instanceof Document?s=t==null?void 0:t.documentElement:s=t}return s}function ZH(e){const t=JS(e);return(t==null?void 0:t.clientWidth)??(window.innerWidth||-1)}function eB(e){const t=JS(e);return(t==null?void 0:t.clientHeight)??(window.innerHeight||-1)}function so(e,t,s){s==null||typeof s=="string"&&s==""?bT(e,t):Rn(e,t,s)}function Rn(e,t,s){e.setAttribute(yT(t),s.toString())}function bT(e,t){e.removeAttribute(yT(t))}function yT(e){return`aria-${e}`}function cl(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function tB(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function sB(e){return e.getAttribute("aria-label")}function uu(e,t){so(e,"label",t)}function Lg(e,t){so(e,"labelledby",t)}function ST(e,t){so(e,"live",t)}function iB(e,t){so(e,"atomic",t)}function nB(e,t){so(e,"relevant",t)}function oB(e,t){so(e,"invalid",t)}function rB(e,t){so(e,"disabled",t)}function xT(e,t){so(e,"hidden",t)}function Ty(e,t){Rn(e,"expanded",t)}function aB(e,t){Rn(e,"setsize",t)}function lB(e,t){Rn(e,"posinset",t)}function cB(e,t){Rn(e,"multiselectable",t)}function dB(e,t){Rn(e,"rowcount",t)}function gv(e,t){Rn(e,"rowindex",t)}function hB(e,t){Rn(e,"rowspan",t)}function uB(e,t){Rn(e,"colcount",t)}function RT(e,t){Rn(e,"colindex",t)}function gB(e,t){Rn(e,"colspan",t)}function fB(e,t){Rn(e,"sort",t)}function pB(e){bT(e,"sort")}function ET(e,t){so(e,"selected",t)}function mB(e,t){so(e,"controls",t)}function vB(e,t){mB(e,t.id),Lg(t,e.id)}function eR(e,t){so(e,"owns",t)}function xC(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var CB="[tabindex], input, select, button, textarea, [href]",AT="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function vg(e){return!e||!e.matches("input, select, button, textarea")||!e.matches(AT)?!1:Xo(e)}function Vt(e,t,s={}){const{skipAriaHidden:i}=s;e.classList.toggle("ag-hidden",!t),i||xT(e,!t)}function wB(e,t,s={}){const{skipAriaHidden:i}=s;e.classList.toggle("ag-invisible",!t),i||xT(e,!t)}function Og(e,t){const s="disabled",i=t?o=>o.setAttribute(s,""):o=>o.removeAttribute(s);i(e);const n=e.querySelectorAll("input")??[];for(const o of n)i(o)}function Wc(e,t,s){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof s=="number"){if(++i>s)break}else if(e===s)break}return!1}function fd(e){const{height:t,width:s,borderTopWidth:i,borderRightWidth:n,borderBottomWidth:o,borderLeftWidth:r,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:d,marginTop:h,marginRight:u,marginBottom:f,marginLeft:p,boxSizing:m}=window.getComputedStyle(e),v=Number.parseFloat;return{height:v(t||"0"),width:v(s||"0"),borderTopWidth:v(i||"0"),borderRightWidth:v(n||"0"),borderBottomWidth:v(o||"0"),borderLeftWidth:v(r||"0"),paddingTop:v(a||"0"),paddingRight:v(l||"0"),paddingBottom:v(c||"0"),paddingLeft:v(d||"0"),marginTop:v(h||"0"),marginRight:v(u||"0"),marginBottom:v(f||"0"),marginLeft:v(p||"0"),boxSizing:m}}function ZS(e){const t=fd(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom-t.borderTopWidth-t.borderBottomWidth:t.height}function Ng(e){const t=fd(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight-t.borderLeftWidth-t.borderRightWidth:t.width}function FT(e){const{height:t,marginBottom:s,marginTop:i}=fd(e);return Math.floor(t+s+i)}function fv(e){const{width:t,marginLeft:s,marginRight:i}=fd(e);return Math.floor(t+s+i)}function PT(e){const t=e.getBoundingClientRect(),{borderTopWidth:s,borderLeftWidth:i,borderRightWidth:n,borderBottomWidth:o}=fd(e);return{top:t.top+(s||0),left:t.left+(i||0),right:t.right+(n||0),bottom:t.bottom+(o||0)}}function pv(e,t){let s=e.scrollLeft;return t&&(s=Math.abs(s)),s}function mv(e,t,s){s&&(t*=-1),e.scrollLeft=t}function Ks(e){for(;e!=null&&e.firstChild;)e.firstChild.remove()}function Qn(e){e!=null&&e.parentNode&&e.remove()}function TT(e){return!!e.offsetParent}function Xo(e){return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!TT(e)||window.getComputedStyle(e).visibility!=="visible")}function e0(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function DT(e,t,s){s&&s.nextSibling===t||(e.firstChild?s?s.nextSibling?e.insertBefore(t,s.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t):e.appendChild(t))}function _T(e,t){for(let s=0;s<t.length;s++){const i=t[s],n=e.children[s];n!==i&&e.insertBefore(i,n)}}function bB(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}function Ep(e,t){if(t)for(const s of Object.keys(t)){const i=t[s];if(!(s!=null&&s.length)||i==null)continue;const n=bB(s),o=i.toString(),r=o.replace(/\s*!important/g,""),a=r.length!=o.length?"important":void 0;e.style.setProperty(n,r,a)}}function Bm(e){return()=>{const t=e();return t?t0(t)||MT(t):!0}}function t0(e){return e.clientWidth<e.scrollWidth}function MT(e){return e.clientHeight<e.scrollHeight}function vv(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Go(e,t)}function Go(e,t){t=s0(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function Cg(e,t){t=s0(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function s0(e){return typeof e=="number"?`${e}px`:e}function i0(e){return e instanceof Node||e instanceof HTMLElement}function qi(e,t,s){s==null||s===""?e.removeAttribute(t):e.setAttribute(t,s.toString())}function Cl(e,t,s){const n=wT(e).ResizeObserver,o=n?new n(s):null;return o==null||o.observe(t),()=>o==null?void 0:o.disconnect()}function ia(e,t){const s=wT(e);s.requestAnimationFrame?s.requestAnimationFrame(t):s.webkitRequestAnimationFrame?s.webkitRequestAnimationFrame(t):s.setTimeout(t,0)}var kT="data-ref",iw;function tR(){return iw??(iw=document.createTextNode(" ")),iw.cloneNode()}function Ap(e){const{attrs:t,children:s,cls:i,ref:n,role:o,tag:r}=e,a=document.createElement(r);if(i&&(a.className=i),n&&a.setAttribute(kT,n),o&&a.setAttribute("role",o),t)for(const l of Object.keys(t))a.setAttribute(l,t[l]);if(s)if(typeof s=="string")a.textContent=s;else{let l=!0;for(const c of s)c&&(typeof c=="string"?(a.appendChild(document.createTextNode(c)),l=!1):typeof c=="function"?a.appendChild(c()):(l&&(a.appendChild(tR()),l=!1),a.append(Ap(c)),a.appendChild(tR())))}return a}var yB=["touchstart","touchend","touchmove","touchcancel","scroll"],SB=["wheel"],nw={},IT=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return s=>{if(typeof nw[s]=="boolean")return nw[s];const i=document.createElement(e[s]||"div");return s="on"+s,nw[s]=s in i}})();function xB(e,t){return!t||!e?!1:EB(t).indexOf(e)>=0}function RB(e){const t=[];let s=e.target;for(;s;)t.push(s),s=s.parentElement;return t}function EB(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():RB(t)}function AB(e,t,s){const i=FB(t);let n;i!=null&&(n={passive:i}),e.addEventListener(t,s,n)}var FB=e=>{const t=yB.includes(e),s=SB.includes(e);if(t)return!0;if(s)return!1};function LT(e,t,s){if(s===0)return!1;const i=Math.abs(e.clientX-t.clientX),n=Math.abs(e.clientY-t.clientY);return Math.max(i,n)<=s}var wg=(e,t)=>{const s=e.identifier;for(let i=0,n=t.length;i<n;++i){const o=t[i];if(o.identifier===s)return o}return null};function Hg(e,t){return e.gos.isElementInThisInstance(t.target)}function PB(e,t,s){const n=e.getBoundingClientRect().height,o=ZH(s)-2,r=eB(s)-2;if(!e.offsetParent)return;const l=PT(e.offsetParent),{clientY:c,clientX:d}=t;let h=c-l.top-n/2,u=d-l.left-10;const f=ks(s),p=f.defaultView||window,m=p.pageYOffset||f.documentElement.scrollTop,v=p.pageXOffset||f.documentElement.scrollLeft;o>0&&u+e.clientWidth>o+v&&(u=o+v-e.clientWidth),u<0&&(u=0),r>0&&h+e.clientHeight>r+m&&(h=r+m-e.clientHeight),h<0&&(h=0),e.style.left=`${u}px`,e.style.top=`${h}px`}var Gm=(e,...t)=>{for(const s of t){const[i,n,o,r]=s;i.addEventListener(n,o,r),e.push(s)}},n0=e=>{if(e){for(const[t,s,i,n]of e)t.removeEventListener(s,i,n);e.length=0}},pa=e=>{e.cancelable&&e.preventDefault()};function TB(e,t){return t}function OT(e){return(e==null?void 0:e.getLocaleTextFunc())??TB}function DB(e,t,s,i){const n=t[s];return e.getLocaleTextFunc()(s,typeof n=="function"?n(i):n,i)}function _B(e){return(t,s,i)=>e({key:t,defaultValue:s,variableValues:i})}function MB(e){return(t,s,i)=>{let n=e==null?void 0:e[t];if(n&&(i!=null&&i.length)){let o=0;for(;!(o>=i.length||n.indexOf("${variable}")===-1);)n=n.replace("${variable}",i[o++])}return n??s}}var Qo=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,s){this.localEventService||(this.localEventService=new ed),this.localEventService.addEventListener(e,t,s)}removeEventListener(e,t,s){var i;(i=this.localEventService)==null||i.removeEventListener(e,t,s)}dispatchLocalEvent(e){var t;(t=this.localEventService)==null||t.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const s=[];for(const i of Object.keys(t)){const n=t[i];n&&s.push(this._setupListener(e,i,n))}return s}_setupListener(e,t,s){if(this.destroyed)return()=>null;let i;if(kB(e))e.__addEventListener(t,s),i=()=>(e.__removeEventListener(t,s),null);else{const n=IB(e);e instanceof HTMLElement?AB(e,t,s):n?e.addListener(t,s):e.addEventListener(t,s),i=n?()=>(e.removeListener(t,s),null):()=>(e.removeEventListener(t,s),null)}return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==i),null)}setupPropertyListener(e,t){const{gos:s}=this;s.addPropertyEventListener(e,t);const i=()=>(s.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupPropertyListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const s=e.join("-")+this.propertyListenerId++,i=n=>{if(n.changeSet){if(n.changeSet&&n.changeSet.id===this.lastChangeSetIdLookup[s])return;this.lastChangeSetIdLookup[s]=n.changeSet.id}const o={type:"propertyChanged",changeSet:n.changeSet,source:n.source};t(o)};for(const n of e)this.setupPropertyListener(n,i)}getLocaleTextFunc(){return OT(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const s=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),s}createBean(e,t,s){return(t||this.stubContext).createBean(e,s)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function kB(e){return e.__addEventListener!==void 0}function IB(e){return e.eventServiceType==="global"}var $=class extends Qo{},sR={};function o0(e,t){sR[t]||(e(),sR[t]=!0)}var LB={pending:!1,funcs:[]},OB={pending:!1,funcs:[]};function Dy(e,t="setTimeout",s){const i=t==="raf"?OB:LB;if(i.funcs.push(e),i.pending)return;i.pending=!0;const n=()=>{const o=i.funcs.slice();i.funcs.length=0,i.pending=!1;for(const r of o)r()};t==="raf"?ia(s,n):window.setTimeout(n,0)}function Us(e,t,s){let i;return function(...n){const o=this;window.clearTimeout(i),i=window.setTimeout(function(){e.isAlive()&&t.apply(o,n)},s)}}function iR(e,t){let s=0;return function(...i){const n=this,o=Date.now();o-s<t||(s=o,e.apply(n,i))}}function NB(e,t,s,i=100){const n=Date.now();let o=null,r=!1;const a=()=>{o!=null&&(window.clearInterval(o),o=null)};e.addDestroyFunc(a);const l=()=>{const c=Date.now()-n>i;(t()||c)&&(s(),r=!0,a())};l(),r||(o=window.setInterval(l,10))}var NT=new Set(["__proto__","constructor","prototype"]);function HB(e,t){if(e!=null){if(Array.isArray(e)){for(let s=0;s<e.length;s++)t(s.toString(),e[s]);return}for(const s of Object.keys(e).filter(i=>!NT.has(i)))t(s,e[s])}}function mi(e,t,s=!0,i=!1){pe(t)&&HB(t,(n,o)=>{let r=e[n];r!==o&&(i&&r==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(r={},e[n]=r),nR(o)&&nR(r)&&!Array.isArray(r)?mi(r,o,s,i):(s||o!==void 0)&&(e[n]=o))})}function nR(e){return typeof e=="object"&&e!==null}var r0=class nr{static applyGlobalGridOptions(t){if(!nr.gridOptions)return{...t};let s={};return mi(s,nr.gridOptions,!0,!0),nr.mergeStrategy==="deep"?mi(s,t,!0,!0):s={...s,...t},nr.gridOptions.context&&(s.context=nr.gridOptions.context),t.context&&(nr.mergeStrategy==="deep"&&s.context&&mi(t.context,s.context,!0,!0),s.context=t.context),s}static applyGlobalGridOption(t,s){if(nr.mergeStrategy==="deep"){const i=BB(t);if(i&&typeof i=="object"&&typeof s=="object")return nr.applyGlobalGridOptions({[t]:s})[t]}return s}};r0.gridOptions=void 0;r0.mergeStrategy="shallow";var a0=r0;function BB(e){var t;return(t=a0.gridOptions)==null?void 0:t[e]}var GB={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1,enableFilterHandlers:!1},HT="https://www.ag-grid.com";function dl(e,t,...s){e.get("debug")&&console.log("AG Grid: "+t,...s)}function bg(e,...t){o0(()=>console.warn("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function Ud(e,...t){o0(()=>console.error("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}var BT=new Set,Cv={},jd={},Vm,GT=!1,VT=!1,VB=!1;function zB(e){const[t,s]=e.version.split(".")||[],[i,n]=Vm.split(".")||[];return t===i&&s===n}function WB(e){var i;Vm||(Vm=e.version);const t=n=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${n} Please update all modules to the same version.`;e.version?zB(e)||Ud(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${Vm}.`)):Ud(t(`'${e.moduleName}' is incompatible.`));const s=(i=e.validate)==null?void 0:i.call(e);s&&!s.isValid&&Ud(`${s.message}`)}function Bg(e,t,s=!1){s||(GT=!0),WB(e);const i=e.rowModels??["all"];BT.add(e);let n;t!==void 0?(VT=!0,jd[t]===void 0&&(jd[t]={}),n=jd[t]):n=Cv;for(const o of i)n[o]===void 0&&(n[o]={}),n[o][e.moduleName]=e;if(e.dependsOn)for(const o of e.dependsOn)Bg(o,t,s)}function $B(e){delete jd[e]}function _y(e,t,s){const i=n=>{var o,r,a;return!!((o=Cv[n])!=null&&o[e])||!!((a=(r=jd[t])==null?void 0:r[n])!=null&&a[e])};return i(s)||i("all")}function l0(){return VT}function UB(e,t){const s=jd[e]??{};return[...Object.values(Cv.all??{}),...Object.values(s.all??{}),...Object.values(Cv[t]??{}),...Object.values(s[t]??{})]}function jB(){return new Set(BT)}function KB(){return GT}function qB(){return VB}var YB=class{static register(e){Bg(e,void 0)}static registerModules(e){for(const t of e)Bg(t,void 0)}},fe="34.3.1",oR=2e3,rR=100,zT="_version_",zm=null,Kd=`${HT}/javascript-data-grid`;function XB(e){zm=e}function QB(e){Kd=e}function WT(e,t,s){return(zm==null?void 0:zm(e,t))??[tG(e,t,s)]}function c0(e,t,s,i,n){e(`${i?"warning":"error"} #${t}`,...WT(t,s,n))}function JB(e){if(!e)return String(e);const t={};for(const s of Object.keys(e))typeof e[s]!="object"&&typeof e[s]!="function"&&(t[s]=e[s]);return JSON.stringify(t)}function ZB(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=JB(e)),t}function wv(e){return e===void 0?"undefined":e===null?"null":e}function My(e,t){return`${e}?${t.toString()}`}function eG(e,t,s){const i=Array.from(t.entries()).sort((o,r)=>r[1].length-o[1].length);let n=My(e,t);for(const[o,r]of i){if(o===zT)continue;const a=n.length-s;if(a<=0)break;const l="...",c=a+l.length,d=r.length-c>rR?r.slice(0,r.length-c)+l:r.slice(0,rR)+l;t.set(o,d),n=My(e,t)}return n}function $T(e,t){const s=new URLSearchParams;if(s.append(zT,fe),t)for(const o of Object.keys(t))s.append(o,ZB(t[o]));const i=`${Kd}/errors/${e}`,n=My(i,s);return n.length<=oR?n:eG(i,s,oR)}var tG=(e,t,s)=>{const i=$T(e,t);return`${`${s?s+` 
`:""}Visit ${i}`}${s?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function oe(...e){c0(bg,e[0],e[1],!0)}function Pt(...e){c0(Ud,e[0],e[1],!1)}function rg(e,t,s){c0(Ud,e,t,!1,s)}function sG(e,t){const s=t[0];return`error #${s} `+WT(s,t[1],e).join(" ")}function Vo(...e){return sG(void 0,e)}function UT(e,t){return e.get("rowModelType")===t}function rs(e,t){return UT(e,"clientSide")}function Au(e,t){return UT(e,"serverSide")}function qs(e,t){return e.get("domLayout")===t}function $c(e){return yv(e)!==void 0}function jT(e){return typeof e.get("getRowHeight")=="function"}function iG(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function hl(e,t,s=!1,i){const{gos:n,environment:o}=e;if(i==null&&(i=o.getDefaultRowHeight()),jT(n)){if(s)return{height:i,estimated:!0};const l={node:t,data:t.data},c=n.getCallback("getRowHeight")(l);if(ky(c))return c===0&&oe(23),{height:Math.max(1,c),estimated:!1}}if(t.detail&&n.get("masterDetail"))return nG(n);const r=n.get("rowHeight");return{height:r&&ky(r)?r:i,estimated:!1}}function nG(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return ky(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function Uc(e){const{environment:t,gos:s}=e,i=s.get("rowHeight");if(!i||Wt(i))return t.getDefaultRowHeight();const n=t.refreshRowHeightVariable();return n!==-1?n:(oe(24),t.getDefaultRowHeight())}function ky(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function KT(e,t,s){const i=t[e.getDomDataKey()];return i?i[s]:void 0}function td(e,t,s,i){const n=e.getDomDataKey();let o=t[n];Wt(o)&&(o={},t[n]=o),o[s]=i}function qd(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function qT(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||qs(e,"print"))}function Lo(e){const t=e.get("autoGroupColumnDef");return!(t!=null&&t.comparator)&&!e.get("treeData")}function Iy(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function YT(e){return e.get("grandTotalRow")}function XT(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function QT(e,t,s){return!!t.group&&!t.footer&&XT(e,s)}function gu(e){const t=e.getCallback("getRowId");return t===void 0?t:s=>{let i=t(s);return typeof i!="string"&&(o0(()=>oe(25,{id:i}),"getRowIdString"),i=String(i)),i}}function oG(e,t){const s=e.get("groupHideParentOfSingleChild");return!!(s===!0||s==="leafGroupsOnly"&&t.leafGroup||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")&&t.leafGroup)}function rG(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function Yd(e){return(e==null?void 0:e.checkboxes)??!0}function Wm(e){return(e==null?void 0:e.mode)==="multiRow"&&(e.headerCheckbox??!0)}function bv(e){if(typeof e=="object")return e.checkboxLocation??"selectionColumn"}function ow(e){return(e==null?void 0:e.hideDisabledCheckboxes)??!1}function aG(e){return typeof e.get("rowSelection")!="string"}function Jr(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function JT(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const s=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return s&&i?!1:s?"enableDeselection":i?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function lG(e){const t=JT(e);return t===!0||t==="enableSelection"}function cG(e){const t=JT(e);return t===!0||t==="enableDeselection"}function Ly(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t==null?void 0:t.isRowSelectable}function yv(e){const t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t==null?void 0:t.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function Gg(e){return yv(e)==="multiRow"}function dG(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):(t==null?void 0:t.enableSelectionWithoutKeys)??!1}function Sv(e){const t=e.get("rowSelection");if(typeof t=="string"){const s=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return s&&i?"filteredDescendants":s?"descendants":"self"}return(t==null?void 0:t.mode)==="multiRow"?t.groupSelects:void 0}function ZT(e,t=!0){const s=e.get("rowSelection");return typeof s!="object"?t?"all":void 0:s.mode==="multiRow"?s.selectAll:"all"}function hG(e){const t=e.get("rowSelection");return typeof t=="string"?!1:(t==null?void 0:t.mode)==="multiRow"?t.ctrlASelectsRows??!1:!1}function Vg(e){const t=Sv(e);return t==="descendants"||t==="filteredDescendants"}function aR(e){const t=e.get("rowSelection");return typeof t=="object"&&t.masterSelects||"self"}function uG(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function Yi(e){return e.get("columnMenu")==="legacy"}function gG(e){return!Yi(e)}function fG(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function Be(e,t){return e.addCommon(t)}function lR({gos:e},t){return t.button===2||t.ctrlKey&&e.get("allowContextMenuWithControlKey")}var pG={resizable:!0,sortable:!0},mG=0;function eD(){return mG++}function ul(e){return e instanceof pd}var pd=class extends ${constructor(e,t,s,i){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=s,this.primary=i,this.isColumn=!0,this.instanceId=eD(),this.autoHeaderHeight=null,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new ed,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=mg(s)}destroy(){var e;super.destroy(),(e=this.beans.rowSpanSvc)==null||e.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:s,colFlex:i}}=this;t==null||t.initCol(this);const n=e.hide;n!==void 0?this.visible=!n:this.visible=!e.initialHide,s==null||s.initCol(this),i==null||i.initCol(this)}setColDef(e,t,s){var n;const i=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),i&&((n=this.beans.rowSpanSvc)==null||n.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",s)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:s}}=this,i=e.get("suppressFieldDotNotation");this.fieldContainsDots=pe(t)&&t.includes(".")&&!i,this.tooltipFieldContainsDots=pe(s)&&s.includes(".")&&!i}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){var e;(e=this.beans.tooltipSvc)==null||e.initCol(this)}initRowSpan(){var e;this.colDef.spanRows&&((e=this.beans.rowSpanSvc)==null||e.register(this))}addPivotListener(){const e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;!e||!t||this.addManagedListeners(t,{colDefChanged:s=>{const i=e.recreateColDef(this.colDef);this.setColDef(i,i,s.source)}})}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const s=e.width,i=e.initialWidth;return s!=null?t=s:i!=null?t=i:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){var t;return((t=this.beans.showRowGroupCols)==null?void 0:t.isRowGroupDisplayed(this,e))??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){var i,n,o;this.frameworkEventListenerService=(n=(i=this.beans.frameworkOverrides).createLocalEventListenerWrapper)==null?void 0:n.call(i,this.frameworkEventListenerService,this.colEventSvc);const s=((o=this.frameworkEventListenerService)==null?void 0:o.wrap(e,t))??t;this.colEventSvc.addEventListener(e,s)}removeEventListener(e,t){var i;const s=((i=this.frameworkEventListenerService)==null?void 0:i.unwrap(e,t))??t;this.colEventSvc.removeEventListener(e,s)}createColumnFunctionCallbackParams(e){return Be(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){var t;return((t=this.beans.cellNavigation)==null?void 0:t.isSuppressNavigable(this,e))??!1}isCellEditable(e){var t;return((t=this.beans.editSvc)==null?void 0:t.isCellEditable({rowNode:e,column:this}))??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){var t;return((t=this.beans.selectionSvc)==null?void 0:t.isCellCheckboxSelection(this,e))??!1}isSuppressPaste(e){var t;return this.isColumnFunc(e,((t=this.colDef)==null?void 0:t.suppressPaste)??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??pG[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const s=this.createColumnFunctionCallbackParams(e);return t(s)}return!1}createColumnEvent(e,t){return Be(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Wt(this.sort)}isSorting(){return pe(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){var e;return oe(261),!!((e=this.beans.colHover)!=null&&e.isHovered(this))}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const s=e===!0;this.visible!==s&&(this.visible=s,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e!=null&&e.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!(e!=null&&e.isPadding()))return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let s=!0;for(;e;){if(!e.isPadding()){s=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:s}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return Be(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Wt(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),s=this.colDef.colSpan(t);return Math.max(s,1)}getRowSpan(e){if(Wt(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),s=this.colDef.rowSpan(t);return Math.max(s,1)}setActualWidth(e,t,s=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),s||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchColEvent(e,t,s){const i=this.createColumnEvent(e,t);s&&mi(i,s),this.colEventSvc.dispatchEvent(i)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function ni(e){return e instanceof $m}var $m=class extends ${constructor(e,t,s,i){super(),this.colGroupDef=e,this.groupId=t,this.padding=s,this.level=i,this.isColumn=!1,this.expandable=!1,this.instanceId=eD(),this.expandableListenerRemoveCallback=null,this.expanded=!!(e!=null&&e.openByDefault)}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)ul(t)?e(t):ni(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){if(this.children)for(const t of this.children)ul(t)?e.push(t):ni(t)&&t.addLeafColumns(e)}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);for(const t of this.getLeafColumns())t.__addEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=()=>{for(const t of this.getLeafColumns())t.__removeEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,s=!1;const i=this.findChildrenRemovingPadding();for(let o=0,r=i.length;o<r;o++){const a=i[o];if(!a.isVisible())continue;const l=a.getColumnGroupShow();l==="open"?(e=!0,s=!0):l==="closed"?(t=!0,s=!0):(e=!0,t=!0)}const n=e&&t&&s;this.expandable!==n&&(this.expandable=n,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=s=>{for(const i of s)ni(i)&&i.isPadding()?t(i.children):e.push(i)};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},vG={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function cR(e,t,s){const i={},n=e.gos;return Object.assign(i,n.get("defaultColGroupDef")),Object.assign(i,t),n.validateColDef(i,s),i}var CG=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Py(e);let s=0;for(;;){let i=e??t;if(i?s!==0&&(i+="_"+s):i=s,!this.existingKeys[i]){const n=String(i);return e&&s>0&&oe(273,{providedId:e,usedId:n}),this.existingKeys[n]=!0,n}s++}}};function It(e){if(e!=null&&e.length)return e[e.length-1]}function wl(e,t,s){if(e===t)return!0;if(!e||!t)return e==null&&t==null;const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(e[n]!==t[n]&&!(s!=null&&s(e[n],t[n])))return!1;return!0}function Ou(e,t){if(e)for(const s of e)t(s)}function to(e,t){const s=e.indexOf(t);s>=0&&e.splice(s,1)}function dR(e,t,s){for(let i=0;i<t.length;i++)to(e,t[i]);for(let i=t.length-1;i>=0;i--)e.splice(s,0,t[i])}var RC="ag-Grid-AutoColumn",tD="ag-Grid-SelectionColumn",sD="ag-Grid-RowNumbersColumn";function iD(e){const t=[],s=i=>{for(let n=0;n<i.length;n++){const o=i[n];ul(o)?t.push(o):ni(o)&&s(o.getChildren())}};return s(e),t}function ar(e){return e.reduce((t,s)=>t+s.getActualWidth(),0)}function xv(e,t,s){const i={};if(!t)return;$r(null,t,o=>{i[o.getInstanceId()]=o}),s&&$r(null,s,o=>{i[o.getInstanceId()]=null});const n=Object.values(i).filter(o=>o!=null);e.context.destroyBeans(n)}function d0(e){return e.getId().startsWith(RC)}function na(e){const t=typeof e=="string"?e:"getColId"in e?e.getColId():e.colId;return(t==null?void 0:t.startsWith(tD))??!1}function Wr(e){const t=typeof e=="string"?e:"getColId"in e?e.getColId():e.colId;return(t==null?void 0:t.startsWith(sD))??!1}function wG(e){return na(e)||Wr(e)}function Rv(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function bG(e,t){return wl(e,t,(s,i)=>s.getColId()===i.getColId())}function yG(e){e.map={};for(const t of e.list)e.map[t.getId()]=t}function Xd(e){return e==="optionsUpdated"?"gridOptionsChanged":e}function yg(e,t){const s=e===t,i=e.getColDef()===t,n=e.getColId()==t;return s||i||n}var SG=(e,t)=>(s,i)=>{const n={value1:void 0,value2:void 0};let o=!1;return e&&(e[s]!==void 0&&(n.value1=e[s],o=!0),pe(i)&&e[i]!==void 0&&(n.value2=e[i],o=!0)),!o&&t&&(t[s]!==void 0&&(n.value1=t[s]),pe(i)&&t[i]!==void 0&&(n.value2=t[i])),n},xG=(e,t)=>{ni(e)&&e.setupExpandable(),e.originalParent=t};function RG(e,t=null,s,i,n){const o=new CG,{existingCols:r,existingGroups:a,existingColKeys:l}=EG(i);o.addExistingKeys(l);const c=nD(e,t,0,s,r,o,a,n),{colGroupSvc:d}=e,h=(d==null?void 0:d.findMaxDepth(c,0))??0,u=d?d.balanceColumnTree(c,0,h,o):c;return $r(null,u,xG),{columnTree:u,treeDepth:h}}function EG(e){const t=[],s=[],i=[];return e&&$r(null,e,n=>{if(ni(n)){const o=n;s.push(o)}else{const o=n;i.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:s,existingColKeys:i}}function nD(e,t,s,i,n,o,r,a){if(!t)return[];const{colGroupSvc:l}=e,c=new Array(t.length);for(let d=0;d<c.length;d++){const h=t[d];l&&_G(h)?c[d]=l.createProvidedColumnGroup(i,h,s,n,o,r,a):c[d]=AG(e,i,h,n,o,a)}return c}function AG(e,t,s,i,n,o){var l;const r=PG(s,i);r&&(i==null||i.splice(r.idx,1));let a=r==null?void 0:r.column;if(a){const c=Oy(e,s,a.getColId());a.setColDef(c,s,o),FG(e,a,c,o)}else{const c=n.getUniqueKey(s.colId,s.field),d=Oy(e,s,c);a=new pd(d,s,c,t),e.context.createBean(a)}return(l=e.dataTypeSvc)==null||l.addColumnListeners(a),a}function oD(e,t,s,i,n,o,r,a){const{sortSvc:l,pinnedCols:c,colFlex:d}=e;s!==void 0&&t.setVisible(!s,a),l&&(l.updateColSort(t,i,a),n!==void 0&&l.setColSortIndex(t,n)),o!==void 0&&(c==null||c.setColPinned(t,o)),r!==void 0&&(d==null||d.setColFlex(t,r))}function FG(e,t,s,i){oD(e,t,s.hide,s.sort,s.sortIndex,s.pinned,s.flex,i);const n=t.getFlex();if(!(n!=null&&n>0))if(s.width!=null)t.setActualWidth(s.width,i);else{const o=t.getActualWidth();t.setActualWidth(o,i)}}function PG(e,t){if(t)for(let s=0;s<t.length;s++){const i=t[s].getUserProvidedColDef();if(!i)continue;if(e.colId!=null){if(t[s].getId()===e.colId)return{idx:s,column:t[s]};continue}if(e.field!=null){if(i.field===e.field)return{idx:s,column:t[s]};continue}if(i===e)return{idx:s,column:t[s]}}}function Oy(e,t,s,i){const{gos:n,dataTypeSvc:o}=e,r={},a=n.get("defaultColDef");mi(r,a,!1,!0);const l=TG(e,r,t,s);l&&DG(e,l,r);const c=r.cellDataType;mi(r,t,!1,!0),c!==void 0&&(r.cellDataType=c);const d=n.get("autoGroupColumnDef"),h=Lo(n);return t.rowGroup&&d&&h&&mi(r,{sort:d.sort,initialSort:d.initialSort},!1,!0),o&&(o.postProcess(r),o.validateColDef(r)),n.validateColDef(r,s,i),r}function TG(e,t,s,i){var r;const n=(r=e.dataTypeSvc)==null?void 0:r.updateColDefAndGetColumnType(t,s,i),o=s.type??n??t.type;return t.type=o,o?Rv(o):void 0}function DG(e,t,s){if(!t.length)return;const i=Object.assign({},vG),n=e.gos.get("columnTypes")||{};for(const o of Object.keys(n)){const r=n[o];o in i?oe(34,{key:o}):(r.type&&oe(35),i[o]=r)}for(const o of t){const r=i[o.trim()];r?mi(s,r,!1,!0):oe(36,{t:o})}}function _G(e){return e.children!==void 0}function $r(e,t,s){if(t)for(let i=0;i<t.length;i++){const n=t[i];ni(n)&&$r(n,n.getChildren(),s),s(n,e)}}function rD(e,t){const s=[],i=[],n=[];return e.forEach(r=>{const a=r.getColDef().lockPosition;a==="right"?n.push(r):a==="left"||a===!0?s.push(r):i.push(r)}),t.get("enableRtl")?[...n,...i,...s]:[...s,...i,...n]}function aD(e,t){let s=!0;return $r(null,t,i=>{if(!ni(i))return;const n=i,o=n.getColGroupDef();if(!(o==null?void 0:o.marryChildren))return;const a=[];for(const u of n.getLeafColumns()){const f=e.indexOf(u);a.push(f)}const l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),d=l-c,h=n.getLeafColumns().length-1;d>h&&(s=!1)}),s}function lD(e,t){if(!e||e.length==0)return;const s=t(e[0]);for(let i=1;i<e.length;i++)if(s!==t(e[i]))return;return s}function cD(e,t,s){if(!t.length)return;const i=t.length===1?t[0]:null,n=lD(t,o=>o.getPinned());e.dispatchEvent({type:"columnPinned",pinned:n??null,columns:t,column:i,source:s})}function MG(e,t,s){if(!t.length)return;const i=t.length===1?t[0]:null,n=lD(t,o=>o.isVisible());e.dispatchEvent({type:"columnVisible",visible:n,columns:t,column:i,source:s})}function kG(e,t,s,i){e.dispatchEvent({type:t,columns:s,column:s&&s.length==1?s[0]:null,source:i})}function fu(e,t,s,i,n=null){t!=null&&t.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:n,finished:s,source:i})}function Zn(e,t,s){var R;const{colModel:i,rowGroupColsSvc:n,pivotColsSvc:o,autoColSvc:r,selectionColSvc:a,colAnimation:l,visibleCols:c,pivotResultCols:d,environment:h,valueColsSvc:u,eventSvc:f,gos:p}=e,m=i.getColDefCols()??[],v=a==null?void 0:a.getColumns();if(!m.length&&!(v!=null&&v.length))return!1;if(t!=null&&t.state&&!t.state.forEach)return oe(32),!1;const C=(A,F,T,k,N)=>{if(!A)return;const I=SG(F,t.defaultState),O=I("flex").value1;if(oD(e,A,I("hide").value1,I("sort").value1,I("sortIndex").value1,I("pinned").value1,O,s),O==null){const V=I("width").value1;if(V!=null){const ee=A.getColDef().minWidth??h.getDefaultColumnMinWidth();ee!=null&&V>=ee&&A.setActualWidth(V,s)}}N||!A.isPrimary()||(u==null||u.syncColumnWithState(A,s,I),n==null||n.syncColumnWithState(A,s,I,T),o==null||o.syncColumnWithState(A,s,I,k))},b=(A,F,T)=>{var Se,Ce;const k=dD(e,s),N=F.slice(),I={},O={},V=[],ee=[],G=[];let ne=0;const te=(n==null?void 0:n.columns.slice())??[],K=(o==null?void 0:o.columns.slice())??[];for(const re of A){const ie=re.colId;if(ie.startsWith(RC)){V.push(re),G.push(re);continue}if(na(ie)){ee.push(re),G.push(re);continue}const Q=T(ie);Q?(C(Q,re,I,O,!1),to(N,Q)):(G.push(re),ne+=1)}const ve=re=>C(re,null,I,O,!1);N.forEach(ve),n==null||n.sortColumns(hR.bind(n,I,te)),o==null||o.sortColumns(hR.bind(o,O,K)),i.refreshCols(!1,s);const ce=(re,ie,X=[])=>{for(const Q of ie){const se=re(Q.colId);to(X,se),C(se,Q,null,null,!0)}X.forEach(ve)};return ce(re=>(r==null?void 0:r.getColumn(re))??null,V,(Se=r==null?void 0:r.getColumns())==null?void 0:Se.slice()),ce(re=>(a==null?void 0:a.getColumn(re))??null,ee,(Ce=a==null?void 0:a.getColumns())==null?void 0:Ce.slice()),LG(t,i,p),c.refresh(s),f.dispatchEvent({type:"columnEverythingChanged",source:s}),k(),{unmatchedAndAutoStates:G,unmatchedCount:ne}};l==null||l.start();let{unmatchedAndAutoStates:y,unmatchedCount:S}=b(t.state||[],m,A=>i.getColDefCol(A));if(y.length>0||pe(t.defaultState)){const A=((R=d==null?void 0:d.getPivotResultCols())==null?void 0:R.list)??[];S=b(y,A,F=>(d==null?void 0:d.getPivotResultCol(F))??null).unmatchedCount}return l==null||l.finish(),S===0}function IG(e,t){var b,y;const{colModel:s,autoColSvc:i,selectionColSvc:n,eventSvc:o,gos:r}=e,a=s.getColDefCols();if(!(a!=null&&a.length))return;const l=s.getColDefColTree(),c=iD(l),d=[];let h=1e3,u=1e3;const f=S=>{const R=hD(S);Wt(R.rowGroupIndex)&&R.rowGroup&&(R.rowGroupIndex=h++),Wt(R.pivotIndex)&&R.pivot&&(R.pivotIndex=u++),d.push(R)};(b=i==null?void 0:i.getColumns())==null||b.forEach(f),(y=n==null?void 0:n.getColumns())==null||y.forEach(f),c==null||c.forEach(f),Zn(e,{state:d},t);const p=(i==null?void 0:i.getColumns())??[],C=[...(n==null?void 0:n.getColumns())??[],...p,...a].map(S=>({colId:S.colId}));Zn(e,{state:C,applyOrder:!0},t),o.dispatchEvent(Be(r,{type:"columnsReset",source:t}))}function dD(e,t){const{rowGroupColsSvc:s,pivotColsSvc:i,valueColsSvc:n,colModel:o,sortSvc:r,eventSvc:a}=e,l={rowGroupColumns:(s==null?void 0:s.columns.slice())??[],pivotColumns:(i==null?void 0:i.columns.slice())??[],valueColumns:(n==null?void 0:n.columns.slice())??[]},c=Ev(e),d={};for(const h of c)d[h.colId]=h;return()=>{const h=(A,F,T,k)=>{const N=F.map(k),I=T.map(k);if(wl(N,I))return;const V=new Set(F);for(const G of T)V.delete(G)||V.add(G);const ee=[...V];a.dispatchEvent({type:A,columns:ee,column:ee.length===1?ee[0]:null,source:t})},u=A=>{const F=[];return o.forAllCols(T=>{const k=d[T.getColId()];k&&A(k,T)&&F.push(T)}),F},f=A=>A.getColId();h("columnRowGroupChanged",l.rowGroupColumns,(s==null?void 0:s.columns)??[],f),h("columnPivotChanged",l.pivotColumns,(i==null?void 0:i.columns)??[],f);const m=u((A,F)=>{const T=A.aggFunc!=null,k=T!=F.isValueActive(),N=T&&A.aggFunc!=F.getAggFunc();return k||N});m.length>0&&kG(a,"columnValueChanged",m,t),fu(a,u((A,F)=>A.width!=F.getActualWidth()),!0,t),cD(a,u((A,F)=>A.pinned!=F.getPinned()),t),MG(a,u((A,F)=>A.hide==F.isVisible()),t);const S=u((A,F)=>A.sort!=F.getSort()||A.sortIndex!=F.getSortIndex());S.length>0&&(r==null||r.dispatchSortChangedEvents(t,S));const R=Ev(e);NG(c,R,t,o,a)}}function Ev(e){const{colModel:t,rowGroupColsSvc:s,pivotColsSvc:i}=e,n=t.getColDefCols();if(Wt(n)||!t.isAlive())return[];const o=s==null?void 0:s.columns,r=i==null?void 0:i.columns,a=[],l=d=>{const h=d.isRowGroupActive()&&o?o.indexOf(d):null,u=d.isPivotActive()&&r?r.indexOf(d):null,f=d.isValueActive()?d.getAggFunc():null,p=d.getSort()!=null?d.getSort():null,m=d.getSortIndex()!=null?d.getSortIndex():null;a.push({colId:d.getColId(),width:d.getActualWidth(),hide:!d.isVisible(),pinned:d.getPinned(),sort:p,sortIndex:m,aggFunc:f,rowGroup:d.isRowGroupActive(),rowGroupIndex:h,pivot:d.isPivotActive(),pivotIndex:u,flex:d.getFlex()??null})};t.forAllCols(d=>l(d));const c=new Map(t.getCols().map((d,h)=>[d.getColId(),h]));return a.sort((d,h)=>{const u=c.has(d.colId)?c.get(d.colId):-1,f=c.has(h.colId)?c.get(h.colId):-1;return u-f}),a}function hD(e){const t=(p,m)=>p??m??null,s=e.getColDef(),i=t(s.sort,s.initialSort),n=t(s.sortIndex,s.initialSortIndex),o=t(s.hide,s.initialHide),r=t(s.pinned,s.initialPinned),a=t(s.width,s.initialWidth),l=t(s.flex,s.initialFlex);let c=t(s.rowGroupIndex,s.initialRowGroupIndex),d=t(s.rowGroup,s.initialRowGroup);c==null&&!d&&(c=null,d=null);let h=t(s.pivotIndex,s.initialPivotIndex),u=t(s.pivot,s.initialPivot);h==null&&!u&&(h=null,u=null);const f=t(s.aggFunc,s.initialAggFunc);return{colId:e.getColId(),sort:i,sortIndex:n,hide:o,pinned:r,width:a,flex:l,rowGroup:d,rowGroupIndex:c,pivot:u,pivotIndex:h,aggFunc:f}}function LG(e,t,s){if(!e.applyOrder||!e.state)return;const i=[];for(const n of e.state)n.colId!=null&&i.push(n.colId);OG(t.cols,i,t,s)}function OG(e,t,s,i){if(e==null)return;let n=[];const o={};for(const a of t){if(o[a])continue;const l=e.map[a];l&&(n.push(l),o[a]=!0)}let r=0;for(const a of e.list){const l=a.getColId();if(o[l]!=null)continue;l.startsWith(RC)?n.splice(r++,0,a):n.push(a)}if(n=rD(n,i),!aD(n,s.getColTree())){oe(39);return}e.list=n}function NG(e,t,s,i,n){const o={};for(const d of t)o[d.colId]=d;const r={};for(const d of e)o[d.colId]&&(r[d.colId]=!0);const a=e.filter(d=>r[d.colId]),l=t.filter(d=>r[d.colId]),c=[];l.forEach((d,h)=>{const u=a==null?void 0:a[h];if(u&&u.colId!==d.colId){const f=i.getCol(u.colId);f&&c.push(f)}}),c.length&&n.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,finished:!0,source:s})}var hR=(e,t,s,i)=>{const n=e[s.getId()],o=e[i.getId()],r=n!=null,a=o!=null;if(r&&a)return n-o;if(r)return-1;if(a)return 1;const l=t.indexOf(s),c=t.indexOf(i),d=l>=0,h=c>=0;return d&&h?l-c:d?-1:1},HG=class extends ${constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(Xd(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),Xd(e.source)))}createColsFromColDefs(e){var b,y,S;const{beans:t}=this,{valueCache:s,colAutosize:i,rowGroupColsSvc:n,pivotColsSvc:o,valueColsSvc:r,visibleCols:a,eventSvc:l,groupHierarchyColSvc:c}=t,d=this.colDefs?dD(t,e):void 0;s==null||s.expire();const h=(b=this.colDefCols)==null?void 0:b.list,u=(y=this.colDefCols)==null?void 0:y.tree,f=RG(t,this.colDefs,!0,u,e);xv(t,(S=this.colDefCols)==null?void 0:S.tree,f.columnTree);const p=f.columnTree,m=f.treeDepth,v=iD(p),C={};for(const R of v)C[R.getId()]=R;this.colDefCols={tree:p,treeDepth:m,list:v,map:C},this.createColumnsForService([c],this.colDefCols,e),n==null||n.extractCols(e,h),o==null||o.extractCols(e,h),r==null||r.extractCols(e,h),this.ready=!0,this.refreshCols(!0,e),a.refresh(e),l.dispatchEvent({type:"columnEverythingChanged",source:e}),d&&(this.changeEventsDispatching=!0,d(),this.changeEventsDispatching=!1),l.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&(i==null||i.applyAutosizeStrategy())}refreshCols(e,t){var v;if(!this.colDefCols)return;const s=(v=this.cols)==null?void 0:v.tree;this.saveColOrder();const{autoColSvc:i,selectionColSvc:n,rowNumbersSvc:o,quickFilter:r,pivotResultCols:a,showRowGroupCols:l,rowAutoHeight:c,visibleCols:d,colViewport:h,eventSvc:u}=this.beans,f=this.selectCols(a,this.colDefCols);this.createColumnsForService([i,n,o],f,t);const p=iG(this.gos,this.showingPivotResult);(!e||p)&&this.restoreColOrder(f),this.positionLockedCols(f),l==null||l.refresh(),r==null||r.refreshCols(),this.setColSpanActive(),c==null||c.setAutoHeightActive(f),d.clear(),h.clear(),!wl(s,this.cols.tree)&&u.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t,s){for(const i of e)i&&(i.createColumns(t,n=>{this.lastOrder=n(this.lastOrder),this.lastPivotOrder=n(this.lastPivotOrder)},s),i.addColumns(t))}selectCols(e,t){const s=(e==null?void 0:e.getPivotResultCols())??null;this.showingPivotResult=s!=null;const{map:i,list:n,tree:o,treeDepth:r}=s??t;return this.cols={list:n.slice(),map:{...i},tree:o.slice(),treeDepth:r},s&&(s.list.some(l=>{var c;return((c=this.cols)==null?void 0:c.map[l.getColId()])!==void 0})||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];const{valueColsSvc:e,selectionColSvc:t,gos:s}=this.beans,i=this.isPivotMode()&&!this.showingPivotResult,n=t==null?void 0:t.isSelectionColumnEnabled(),o=s.get("rowNumbers"),r=e==null?void 0:e.columns;return this.cols.list.filter(l=>{const c=d0(l);if(i){const d=r==null?void 0:r.includes(l);return c||d||n&&na(l)||o&&Wr(l)}else return c||l.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1,e),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,s){Zn(this.beans,{state:e.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!t}))},s)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const s=t.filter(h=>e.map[h.getId()]!=null);if(s.length===0)return;if(s.length===e.list.length){e.list=s;return}const i=h=>{const u=h.getOriginalParent();return u?u.getChildren().length>1?!0:i(u):!1};if(!s.some(h=>i(h))){const h=new Set(s);for(const u of e.list)h.has(u)||s.push(u);e.list=s;return}const n=new Map;for(let h=0;h<s.length;h++){const u=s[h];n.set(u,h)}const o=e.list.filter(h=>!n.has(h));if(o.length===0){e.list=s;return}const r=(h,u)=>{const f=u?u.getOriginalParent():h.getOriginalParent();if(!f)return null;let p=null,m=null;for(const v of f.getChildren())if(!(v===u||v===h)){if(v instanceof pd){const C=n.get(v);if(C==null)continue;(p==null||p<C)&&(p=C,m=v);continue}v.forEachLeafColumn(C=>{const b=n.get(C);b!=null&&(p==null||p<b)&&(p=b,m=C)})}return m??r(h,f)},a=[],l=new Map;for(const h of o){const u=r(h,null);if(u==null){a.push(h);continue}const f=l.get(u);f===void 0?l.set(u,h):Array.isArray(f)?f.push(h):l.set(u,[f,h])}const c=new Array(e.list.length);let d=c.length-1;for(let h=a.length-1;h>=0;h--)c[d--]=a[h];for(let h=s.length-1;h>=0;h--){const u=s[h],f=l.get(u);if(f)if(Array.isArray(f))for(let p=f.length-1;p>=0;p--){const m=f[p];c[d--]=m}else c[d--]=f;c[d--]=u}e.list=c}positionLockedCols(e){e.list=rD(e.list,this.gos)}saveColOrder(){var e,t;this.showingPivotResult?this.lastPivotOrder=((e=this.cols)==null?void 0:e.list)??null:this.lastOrder=((t=this.cols)==null?void 0:t.list)??null}getColumnDefs(e){var t,s;return this.colDefCols&&((s=this.beans.colDefFactory)==null?void 0:s.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,((t=this.cols)==null?void 0:t.list)??[],e))}setColSpanActive(){var e;this.colSpanActive=!!((e=this.cols)!=null&&e.list.some(t=>t.getColDef().colSpan!=null))}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1,t);const{visibleCols:s,eventSvc:i}=this.beans;s.refresh(t),i.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){var t;const e=(t=this.beans.pivotColsSvc)==null?void 0:t.columns;return this.pivotMode&&!!(e!=null&&e.length)}recreateColumnDefs(e){var s;if(!this.cols)return;(s=this.beans.autoColSvc)==null||s.updateColumns(e);const t=Xd(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e;xv(this.beans,(e=this.colDefCols)==null?void 0:e.tree),super.destroy()}getColTree(){var e;return((e=this.cols)==null?void 0:e.tree)??[]}getColDefColTree(){var e;return((e=this.colDefCols)==null?void 0:e.tree)??[]}getColDefCols(){var e;return((e=this.colDefCols)==null?void 0:e.list)??null}getCols(){var e;return((e=this.cols)==null?void 0:e.list)??[]}forAllCols(e){var o,r,a,l,c;const{pivotResultCols:t,autoColSvc:s,selectionColSvc:i,groupHierarchyColSvc:n}=this.beans;Ou((o=this.colDefCols)==null?void 0:o.list,e),Ou((r=s==null?void 0:s.columns)==null?void 0:r.list,e),Ou((a=i==null?void 0:i.columns)==null?void 0:a.list,e),Ou((l=n==null?void 0:n.columns)==null?void 0:l.list,e),Ou((c=t==null?void 0:t.getPivotResultCols())==null?void 0:c.list,e)}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){var t;return(t=this.colDefCols)!=null&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColById(e){var t;return((t=this.cols)==null?void 0:t.map[e])??null}getColFromCollection(e,t){if(t==null)return null;const{map:s,list:i}=t;if(typeof e=="string"&&s[e])return s[e];for(let a=0;a<i.length;a++)if(yg(i[a],e))return i[a];const{autoColSvc:n,selectionColSvc:o,groupHierarchyColSvc:r}=this.beans;return(n==null?void 0:n.getColumn(e))??(o==null?void 0:o.getColumn(e))??(r==null?void 0:r.getColumn(e))??null}},uD=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let s;return typeof t!="number"?s=0:s=t+1,this.existingIds[e]=s,s}};function Fp(e,t,s){return s&&e.addDestroyFunc(()=>t.destroyBean(s)),s??e}var ge=null;function uR(e){return typeof(e==null?void 0:e.getGui)=="function"}var gD=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){var i;if(!e)return;if(e.indexOf(" ")>=0){const n=(e||"").split(" ");if(n.length>1){for(const o of n)this.toggleCss(o,t);return}}this.cssClassStates[e]!==t&&e.length&&((i=this.getGui())==null||i.classList.toggle(e,t),this.cssClassStates[e]=t)}},BG=0,Pp=class extends Qo{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=BG++,this.cssManager=new gD(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(s=>[s.selector,s])),e&&this.setTemplate(e)}preConstruct(){var t,s;this.wireTemplate(this.getGui());const e="component-"+((s=(t=Object.getPrototypeOf(this))==null?void 0:t.constructor)==null?void 0:s.name);for(const i of this.css??[])this.beans.environment.addGlobalCSS(i,e)}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(kT):null}applyElementsToComponent(e,t,s,i=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){const n=this[t];if(n===ge)this[t]=i??e;else{const o=s==null?void 0:s[t];if(!this.suppressDataRefValidation&&!o)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${n}`)}}}createChildComponentsFromTags(e,t){const s=[];for(const i of e.childNodes??[])s.push(i);for(const i of s){if(!(i instanceof HTMLElement))continue;const n=this.createComponentFromElement(i,o=>{const r=o.getGui();if(r)for(const a of i.attributes??[])r.setAttribute(a.name,a.value)},t);if(n){if(n.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);const o=Array.prototype.slice.call(i.children);n.addItems(o)}this.swapComponentForNode(n,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)}}createComponentFromElement(e,t,s){const i=e.nodeName,n=this.getDataRefAttribute(e),o=i.indexOf("AG-")===0,r=o?this.componentSelectors.get(i):null;let a=null;if(r){const l=s&&n?s[n]:void 0;a=new r.component(l),a.setParentComponent(this),this.createBean(a,null,t)}else if(o)throw new Error(`selector: ${i}`);return this.applyElementsToComponent(e,n,s,a),a}swapComponentForNode(e,t,s){const i=e.getGui();t.replaceChild(i,s),t.insertBefore(document.createComment(s.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui());for(const s of e)s.setAttribute("tabindex",t.toString())}setTemplate(e,t,s){let i;typeof e=="string"||e==null?i=e0(e):i=Ap(e),this.setTemplateFromElement(i,t,s)}setTemplateFromElement(e,t,s,i=!1){if(this.eGui=e,this.suppressDataRefValidation=i,t)for(let n=0;n<t.length;n++){const o=t[n];this.componentSelectors.set(o.selector,o)}this.wireTemplate(e,s)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let s=t;return e==null?null:(s||(s=this.eGui),i0(e)?{element:e,parent:s}:{element:e.getGui(),parent:s})}prependChild(e,t){const{element:s,parent:i}=this.getContainerAndElement(e,t)||{};!s||!i||i.insertAdjacentElement("afterbegin",s)}appendChild(e,t){const{element:s,parent:i}=this.getContainerAndElement(e,t)||{};!s||!i||i.appendChild(s)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:s}=t;wB(this.eGui,e,{skipAriaHidden:s})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:s}=t;Vt(this.eGui,e,{skipAriaHidden:s});const i={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(i)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,s){this.eGui.addEventListener(e,t,s),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}},Et=class extends Pp{};function fD(e){return typeof e=="object"&&!!e.component}function GG(e,t){return new es(s=>{s(window.setInterval(e,t))})}var es=class ag{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(s=>this.onDone(s),s=>this.onReject(s))}static all(t){return t.length?new ag(s=>{let i=t.length;const n=new Array(i);t.forEach((o,r)=>{o.then(a=>{n[r]=a,i--,i===0&&s(n)})})}):ag.resolve()}static resolve(t=null){return new ag(s=>s(t))}then(t){return new ag(s=>{this.status===1?s(t(this.resolution)):this.waiters.push(i=>s(t(i)))})}onDone(t){this.status=1,this.resolution=t;for(const s of this.waiters)s(t)}onReject(t){}};function VG(e){return e?e.prototype&&"getGui"in e.prototype:!1}function pD(e,t,s,i){const{name:n}=s;let o,r,a,l,c,d;if(t){const h=t,u=h[n+"Selector"],f=u?u(i):null,p=m=>{typeof m=="string"?o=m:m!=null&&m!==!0&&(e.isFrameworkComponent(m)?a=m:r=m)};f?(p(f.component),l=f.params,c=f.popup,d=f.popupPosition):p(h[n])}return{compName:o,jsComp:r,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:d}}var zG=class extends ${constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,s,i=!1){return this.getCompDetails(this.gridOptions,e,t,s,i)}getCompDetails(e,t,s,i,n=!1){var y;const{name:o,cellRenderer:r}=t;let{compName:a,jsComp:l,fwComp:c,paramsFromSelector:d,popupFromSelector:h,popupPositionFromSelector:u}=pD(this.beans.frameworkOverrides,e,t,i),f,p;const m=S=>{const R=this.registry.getUserComponent(o,S);R&&(l=R.componentFromFramework?void 0:R.component,c=R.componentFromFramework?R.component:void 0,f=R.params,p=R.processParams)};if(a!=null&&m(a),l==null&&c==null&&s!=null&&m(s),l&&r&&!VG(l)&&(l=(y=this.agCompUtils)==null?void 0:y.adaptFunction(t,l)),!l&&!c){const{validation:S}=this.beans;n&&(a!==s||!s)?a?S!=null&&S.isProvidedUserComp(a)||Pt(50,{compName:a}):s?S||Pt(260,{...this.gos.getModuleErrorParams(),propName:o,compName:s}):Pt(216,{name:o}):s&&!S&&Pt(146,{comp:s});return}const v=this.mergeParams(e,t,i,d,f,p),C=l==null,b=l??c;return{componentFromFramework:C,componentClass:b,params:v,type:t,popupFromSelector:h,popupPositionFromSelector:u,newAgStackInstance:()=>this.newAgStackInstance(b,C,v,t)}}newAgStackInstance(e,t,s,i){var a;const n=!t;let o;n?o=new e:o=this.frameworkCompWrapper.wrap(e,i.mandatoryMethods,i.optionalMethods,i),this.createBean(o);const r=(a=o.init)==null?void 0:a.call(o,s);return r==null?es.resolve(o):r.then(()=>o)}mergeParams(e,t,s,i=null,n,o){const r={...s,...n},a=e,l=a==null?void 0:a[t.name+"Params"];if(typeof l=="function"){const c=l(s);mi(r,c)}else typeof l=="object"&&mi(r,l);return mi(r,i),o?o(r):r}},WG={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},$G={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},UG={name:"headerComponent",optionalMethods:["refresh"]},jG={name:"innerHeaderComponent"},KG={name:"innerHeaderGroupComponent"},qG={name:"headerGroupComponent"},YG={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},XG={name:"loadingCellRenderer",cellRenderer:!0},QG={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},JG={name:"loadingOverlayComponent",optionalMethods:["refresh"]},ZG={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},eV={name:"tooltipComponent"},h0={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},tV={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},sV={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},iV={name:"loadingCellRenderer",cellRenderer:!0},nV={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},oV={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function rV(e,t){return e.getCompDetailsFromGridOptions($G,"agDragAndDropImage",t,!0)}function aV(e,t,s){return e.getCompDetails(t,UG,"agColumnHeader",s)}function lV(e,t,s){return e.getCompDetails(t,jG,void 0,s)}function cV(e,t){const s=t.columnGroup.getColGroupDef();return e.getCompDetails(s,qG,"agColumnGroupHeader",t)}function dV(e,t,s){return e.getCompDetails(t,KG,void 0,s)}function hV(e,t){return e.getCompDetailsFromGridOptions(sV,void 0,t,!0)}function uV(e,t){return e.getCompDetailsFromGridOptions(iV,"agLoadingCellRenderer",t,!0)}function gV(e,t){return e.getCompDetailsFromGridOptions(nV,"agGroupRowRenderer",t,!0)}function fV(e,t){return e.getCompDetailsFromGridOptions(oV,"agDetailCellRenderer",t,!0)}function gR(e,t,s){return e.getCompDetails(t,YG,void 0,s)}function fR(e,t,s){return e.getCompDetails(t,XG,"agSkeletonCellRenderer",s,!0)}function mD(e,t,s){return e.getCompDetails(t,QG,"agCellEditor",s,!0)}function pV(e,t,s,i){const n=t.filter;return fD(n)&&(t={filter:n.component,filterParams:t.filterParams}),e.getCompDetails(t,h0,i,s,!0)}function mV(e,t,s){return e.getCompDetails(t,WG,"agDateInput",s,!0)}function vV(e,t){return e.getCompDetailsFromGridOptions(JG,"agLoadingOverlay",t,!0)}function CV(e,t){return e.getCompDetailsFromGridOptions(ZG,"agNoRowsOverlay",t,!0)}function wV(e,t){return e.getCompDetails(t.colDef,eV,"agTooltipComponent",t,!0)}function bV(e,t,s,i){return e.getCompDetails(t,tV,i,s)}function vD(e,t){return pD(e,t,h0)}function rw(e,t,s){return e.mergeParams(t,h0,s)}function zg(e){const t=e;return(t==null?void 0:t.getFrameworkComponentInstance)!=null?t.getFrameworkComponentInstance():e}function yV(e){return typeof e=="object"&&!!e.getComp}var H={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},u0=class extends Pp{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;(e==null?void 0:e.isAlive())&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},aw,lw,cw,dw,Ny,Hy,hw;function bl(){return aw===void 0&&(aw=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),aw}function CD(){return lw===void 0&&(lw=/(firefox)/i.test(navigator.userAgent)),lw}function wD(){return cw===void 0&&(cw=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),cw}function jc(){return dw===void 0&&(dw=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),dw}function By(e){if(!e)return null;const t=e.tabIndex,s=e.getAttribute("tabIndex");return t===-1&&(s===null||s===""&&!CD())?null:t.toString()}function SV(){if(hw!==void 0)return hw;if(!document.body)return-1;let e=1e6;const t=CD()?6e6:1e9,s=document.createElement("div");for(document.body.appendChild(s);;){const i=e*2;if(s.style.height=i+"px",i>t||s.clientHeight!==i)break;e=i}return s.remove(),hw=e,e}function xV(){return Hy==null&&bD(),Hy}function bD(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let s=t.offsetWidth-t.clientWidth;s===0&&t.clientWidth===0&&(s=null),t.parentNode&&t.remove(),s!=null&&(Hy=s,Ny=s===0)}function yD(){return Ny==null&&bD(),Ny}var g0="T",RV=new RegExp(`[${g0} ]`),EV=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${g0}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function Oo(e,t){return e.toString().padStart(t,"0")}function Qi(e,t=!0,s=g0){if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(n=>Oo(n,2)).join("-");return t&&(i+=s+[e.getHours(),e.getMinutes(),e.getSeconds()].map(n=>Oo(n,2)).join(":")),i}function Kp(e,t=!0){return e?t?[String(e.getFullYear()),String(e.getMonth()+1),Oo(e.getDate(),2),Oo(e.getHours(),2),`:${Oo(e.getMinutes(),2)}`,`:${Oo(e.getSeconds(),2)}`]:[e.getFullYear(),e.getMonth()+1,Oo(e.getDate(),2)].map(String):null}var uw=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},pR=["January","February","March","April","May","June","July","August","September","October","November","December"],gw=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Gy(e,t){if(t==null)return Qi(e,!1);const s=Oo(e.getFullYear(),4),i={YYYY:()=>s.slice(s.length-4,s.length),YY:()=>s.slice(s.length-2,s.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>pR[e.getMonth()],MMM:()=>pR[e.getMonth()].slice(0,3),MM:()=>Oo(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${uw(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${uw(e.getDate())}`,DD:()=>Oo(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>gw[e.getDay()],ddd:()=>gw[e.getDay()].slice(0,3),dd:()=>gw[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${uw(e.getDay())}`,d:()=>`${e.getDay()}`},n=new RegExp(Object.keys(i).join("|"),"g");return t.replace(n,o=>o in i?i[o]():o)}function Um(e,t=!1){return!!Mi(e,t)}function AV(e){return Um(e,!0)}function Mi(e,t=!1,s){if(!e||!s&&!EV.test(e))return null;const[i,n]=e.split(RV);if(!i)return null;const o=i.split("-").map(f=>Number.parseInt(f,10));if(o.filter(f=>!isNaN(f)).length!==3)return null;const[r,a,l]=o,c=new Date(r,a-1,l);if(c.getFullYear()!==r||c.getMonth()!==a-1||c.getDate()!==l||!n&&t)return null;if(!n||n==="00:00:00")return c;const[d,h,u]=n.split(":").map(f=>Number.parseInt(f,10));if(d>=0&&d<24)c.setHours(d);else if(t)return null;if(h>=0&&h<60)c.setMinutes(h);else if(t)return null;if(u>=0&&u<60)c.setSeconds(u);else if(t)return null;return c}function Vy(e){const{inputValue:t,allSuggestions:s,hideIrrelevant:i,filterByPercentageOfBestMatch:n}=e;let o=(s??[]).map((l,c)=>({value:l,relevance:FV(t,l),idx:c}));if(o.sort((l,c)=>l.relevance-c.relevance),i&&(o=o.filter(l=>l.relevance<Math.max(l.value.length,t.length))),o.length>0&&n&&n>0){const c=o[0].relevance*n;o=o.filter(d=>c-d.relevance<0)}const r=[],a=[];for(const l of o)r.push(l.value),a.push(l.idx);return{values:r,indices:a}}function FV(e,t){e.length<t.length&&([e,t]=[t,e]);let s=[],i=[];const n=e.length,o=t.length;for(let a=0;a<=o;a++)s[a]=a;let r=0;for(let a=1;a<=n;a++){i[0]=a;for(let l=1;l<=o;l++){const c=e[a-1],d=t[l-1];if(c.toLocaleLowerCase()===d.toLocaleLowerCase())++r,c===d&&++r,a>1&&l>1&&e[a-2].toLocaleLowerCase()===t[l-2].toLocaleLowerCase()&&(++r,e[a-2]===t[l-2]&&++r),a<n/2-10&&++r,i[l]=s[l-1];else{const h=i[l-1],u=s[l],f=s[l-1];i[l]=1+Math.min(h,u,f)}}[s,i]=[i,s]}return s[o]/(r+1)}function SD(e){var s;return e.altKey||e.ctrlKey||e.metaKey?!1:((s=e.key)==null?void 0:s.length)===1}var zy=!1,Av=0;function PV(e){Av>0||(e.addEventListener("keydown",Fv),e.addEventListener("mousedown",Fv))}function TV(e){Av>0||(e.removeEventListener("keydown",Fv),e.removeEventListener("mousedown",Fv))}function Fv(e){const t=zy,s=e.type==="keydown";s&&(e.ctrlKey||e.metaKey||e.altKey)||t!==s&&(zy=s)}function DV(e){const t=ks(e);return PV(t),Av++,()=>{Av--,TV(t)}}function _V(){return zy}function Qd(e,t,s=!1){const i=CB;let n=AT;t&&(n+=", "+t),s&&(n+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(e.querySelectorAll(i)).filter(l=>Xo(l)),r=Array.prototype.slice.apply(e.querySelectorAll(n));return r.length?((l,c)=>l.filter(d=>c.indexOf(d)===-1))(o,r):o}function sd(e,t=!1,s=!1,i=!1){const n=Qd(e,i?".ag-tab-guard":null,s),o=t?It(n):n[0];return o?(o.focus({preventScroll:!0}),!0):!1}function md(e,t,s,i){const n=Qd(t,s?':not([tabindex="-1"])':null),o=qt(e);let r;s?r=n.findIndex(l=>l.contains(o)):r=n.indexOf(o);const a=r+(i?-1:1);return a<0||a>=n.length?null:n[a]}function xD(e,t=5){let s=0;for(;e&&By(e)===null&&++s<=t;)e=e.parentElement;return By(e)===null?null:e}var MV=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",kV=class extends Pp{constructor(e,t,s){super(t,s),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(MV)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:s,labelAlignment:i,disabled:n}=this.config;n!=null&&this.setDisabled(n),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),s!=null&&this.setLabelWidth(s),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;Ks(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?(Vt(t,!1),cl(t,"presentation")):(Vt(t,!0),cl(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const s=this.getGui().classList;return s.toggle("ag-label-align-left",e==="left"),s.toggle("ag-label-align-right",e==="right"),s.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(vv(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return Og(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},RD=class extends kV{constructor(e,t,s,i){super(e,t,s),this.className=i}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:s}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),s!=null&&this.onValueChange(s),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),s=this.getLabel();s==null||s==""||sB(e)!==null?Lg(e,""):Lg(e,t??"")}setAriaLabel(e){return uu(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Go(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function IV(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}var Nl=class extends RD{constructor(e,t,s="text",i="input"){super(e,(e==null?void 0:e.template)??IV(i),[],t),this.inputType=s,this.displayFieldTag=i,this.eLabel=ge,this.eWrapper=ge,this.eInput=ge}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:e,eWrapper:t,eInput:s,className:i}=this;e.classList.add(`${i}-label`),t.classList.add(`${i}-input-wrapper`),s.classList.add(`${i}-input`),this.addCss("ag-input-field"),s.id=s.id||`ag-${this.getCompId()}-input`;const{inputName:n,inputWidth:o}=this.config;n!=null&&this.setInputName(n),o!=null&&this.setInputWidth(o),this.addInputListeners(),this.activateTabIndex([s])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){this.displayFieldTag==="input"&&(this.inputType=e,qi(this.eInput,"type",e))}getInputElement(){return this.eInput}setInputWidth(e){return vv(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return qi(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return uu(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Og(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)qi(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";qi(this.eInput,"autocomplete",t)}return this}},f0=class extends Nl{constructor(e,t="ag-checkbox",s="checkbox"){super(e,t,s),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;const s=this.eInput;s.checked=e,s.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,s){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:s});const i=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:i.id,name:i.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),s=this.selected=e.target.checked;this.refreshSelectedClass(s),this.dispatchChange(s,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},p0={selector:"AG-CHECKBOX",component:f0},LV=class extends f0{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},vd=class extends Nl{constructor(e,t="ag-text-field",s="text"){super(e,t,s)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const s=this.eInput;return s.value!==e&&(s.value=pe(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=s=>{SD(s)&&s.key&&!e.test(s.key)&&s.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:s=>{var n;const i=(n=s.clipboardData)==null?void 0:n.getData("text");i!=null&&i.split("").some(o=>!e.test(o))&&s.preventDefault()}})}},EC={selector:"AG-INPUT-TEXT-FIELD",component:vd},OV=class extends Nl{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const s=super.setValue(e,t);return this.eInput.value=e,s}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},NV={selector:"AG-INPUT-TEXT-AREA",component:OV},m0=class extends vd{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const o=Number.parseFloat(e.value),r=isNaN(o)?"":this.normalizeValue(o.toString());this.value!==r&&this.setValue(r)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:s,max:i,step:n}=this.config;typeof t=="number"&&this.setPrecision(t),typeof s=="number"&&this.setMin(s),typeof i=="number"&&this.setMax(i),typeof n=="number"&&this.setStep(n)}onWheel(e){qt(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return e===""?"":(this.precision!=null&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){const s=this.precision;if(s==null)return e;if(t){const n=Number.parseFloat(e).toFixed(s);return Number.parseFloat(n).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=s)return e;if(s>0)return`${i[0]}.${i[1].slice(0,s)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,qi(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,qi(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,qi(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(s=>super.setValue(s,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,s){if(pe(s)){let i=this.isScientificNotation(s);if(i&&this.eInput.validity.valid)return e(s);if(!i){s=this.adjustPrecision(s);const n=this.normalizeValue(s);i=s!=n}if(i)return t(s)}return e(s)}getValue(){const e=this.eInput;if(!e.validity.valid)return;const t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},HV={selector:"AG-INPUT-NUMBER-FIELD",component:m0},BV=class extends vd{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=bl();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){qt(this.beans)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?Qi(e??null,!!this.includeTime)??void 0:e;return this.min===t?this:(this.min=t,qi(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?Qi(e??null,!!this.includeTime)??void 0:e;return this.max===t?this:(this.max=t,qi(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,qi(this.eInput,"step",e),this)}setIncludeTime(e){return this.includeTime===e?this:(this.includeTime=e,super.setInputType(e?"datetime-local":"date"),e&&this.setStep(1),this)}getDate(){if(this.eInput.validity.valid)return Mi(this.getValue())??void 0}setDate(e,t){this.setValue(Qi(e??null,this.includeTime),t)}},ED={selector:"AG-INPUT-DATE-FIELD",component:BV},GV=".ag-list-item{align-items:center;display:flex;height:var(--ag-list-item-height);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}",VV="ag-active-item",zV=(e,t)=>({tag:"div",cls:`ag-list-item ag-${e}-list-item`,attrs:{role:"option"},children:[{tag:"span",ref:"eText",children:t}]}),WV=class extends Pp{constructor(e,t,s){super(zV(e,t)),this.label=t,this.value=s,this.eText=ge}postConstruct(){this.createTooltip(),this.addEventListeners()}setHighlighted(e){const t=this.getGui();t.classList.toggle(VV,e),ET(t,e),this.dispatchLocalEvent({type:"itemHighlighted",highlighted:e})}getHeight(){return this.getGui().clientHeight}setIndex(e,t){const s=this.getGui();lB(s,e),aB(s,t)}createTooltip(){const e={getTooltipValue:()=>this.label,getGui:()=>this.getGui(),getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>t0(this.eText)},t=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("highlightTooltipFeature",!1,e,this));t&&(this.tooltipFeature=t)}addEventListeners(){const e=this.getParentComponent();e&&(this.addGuiEventListener("mouseover",()=>{e.highlightItem(this)}),this.addGuiEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation(),e.setValue(this.value)}))}},$V=class extends Pp{constructor(e="default"){super({tag:"div",cls:`ag-list ag-${e}-list`}),this.cssIdentifier=e,this.options=[],this.listItems=[],this.highlightedItem=null,this.registerCSS(GV)}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()})}handleKeyDown(e){const t=e.key;switch(t){case H.ENTER:if(!this.highlightedItem)this.setValue(this.getValue());else{const s=this.listItems.indexOf(this.highlightedItem);this.setValueByIndex(s)}break;case H.DOWN:case H.UP:e.preventDefault(),this.navigate(t);break;case H.PAGE_DOWN:case H.PAGE_UP:case H.PAGE_HOME:case H.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}addOptions(e){for(const t of e)this.addOption(t);return this}addOption(e){const{value:t,text:s}=e,i=s??t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0);for(const e of this.listItems)e.destroy();Ks(this.getGui()),this.listItems=[],this.refreshAriaRole()}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const s=this.options.findIndex(i=>i.value===e);if(s!==-1){const i=this.options[s];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.listItems[s]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.listItems[e])}highlightItem(e){const t=e.getGui();if(!Xo(t))return;this.clearHighlighted(),e.setHighlighted(!0),this.highlightedItem=e;const s=this.getGui(),{scrollTop:i,clientHeight:n}=s,{offsetTop:o,offsetHeight:r}=t;(o+r>i+n||o<i)&&t.scrollIntoView({block:"nearest"})}hideItemTooltip(){var e,t;(t=(e=this.highlightedItem)==null?void 0:e.tooltipFeature)==null||t.attemptToHideTooltip()}destroy(){this.hideItemTooltip(),super.destroy()}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}clearHighlighted(){var e;(e=this.highlightedItem)==null||e.setHighlighted(!1),this.highlightedItem=null}renderOption(e,t){const s=new WV(this.cssIdentifier,t,e);s.setParentComponent(this);const i=this.createManagedBean(s);this.listItems.push(i),this.getGui().appendChild(i.getGui())}navigate(e){const t=e===H.DOWN;let s;const{listItems:i,highlightedItem:n}=this;if(!n)s=t?i[0]:It(i);else{let r=i.indexOf(n)+(t?1:-1);r=Math.min(Math.max(r,0),i.length-1),s=i[r]}this.highlightItem(s)}navigateToPage(e){const{listItems:t,highlightedItem:s}=this;if(!s||t.length===0)return;const i=t.indexOf(s),n=this.options.length-1,o=t[0].getHeight(),r=Math.floor(this.getGui().clientHeight/o);let a=-1;e===H.PAGE_HOME?a=0:e===H.PAGE_END?a=n:e===H.PAGE_DOWN?a=Math.min(i+r,n):e===H.PAGE_UP&&(a=Math.max(i-r,0)),a!==-1&&this.highlightItem(t[a])}refreshAriaRole(){cl(this.getGui(),this.options.length===0?"presentation":"listbox")}updateIndices(){this.refreshAriaRole();const e=this.listItems,t=e.length;e.forEach((s,i)=>{s.setIndex(i+1,t)})}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},UV=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}",jV={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},KV=class extends RD{constructor(e){if(super(e,(e==null?void 0:e.template)||jV,(e==null?void 0:e.agComponents)||[],e==null?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=ge,this.eWrapper=ge,this.eDisplayField=ge,this.eIcon=ge,this.registerCSS(UV),this.ariaRole=e==null?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:s,variableWidth:i,minPickerWidth:n,maxPickerWidth:o}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!i,s!=null&&this.setPickerMaxHeight(s),n!=null&&this.setPickerMinWidth(n),o!=null&&this.setPickerMaxWidth(o)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:s,inputWidth:i}=this.config;if(s){const n=this.beans.iconSvc.createIconNoSpan(s);n&&this.eIcon.appendChild(n)}i!=null&&this.setInputWidth(i)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),Ty(e,!1),this.ariaRole&&cl(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(e==null?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case H.UP:case H.DOWN:case H.ENTER:case H.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case H.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:s,pickerAriaLabelValue:i,modalPicker:n=!0},maxPickerHeight:o,minPickerWidth:r,maxPickerWidth:a,variableWidth:l,beans:c,eWrapper:d}=this,h={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{const m=CT(c);this.beforeHidePicker(),m&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(s,i),anchorToElement:d};e.style.position="absolute";const u=c.popupSvc,f=u.addPopup(h);l?(r&&(e.style.minWidth=r),e.style.width=s0(fv(d)),a&&(e.style.maxWidth=a)):vv(e,a??fv(d));const p=o??`${ZS(u.getPopupParent())}px`;return e.style.setProperty("max-height",p),this.alignPickerToComponent(),f.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:s,gos:i},eWrapper:n,pickerComponent:o}=this,r=i.get("enableRtl")?"right":"left";s.positionPopupByComponent({type:t,eventSource:n,ePopup:o.getGui(),position:"under",alignSide:r,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();Ty(t,e);const s=this.eWrapper.classList;s.toggle("ag-picker-expanded",e),s.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(e){return vv(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},qV=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}",v0=class extends KV{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...e}),this.registerCSS(qV)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:Bm(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:s}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),s&&t==null&&(this.eDisplayField.textContent=s),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new $V("select"));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),s=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",s),vB(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:i=>{i==null||i.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}beforeHidePicker(){var e;(e=this.listComponent)==null||e.hideItemTooltip(),super.beforeHidePicker()}onKeyDown(e){var s;const{key:t}=e;switch(t===H.TAB&&this.hidePicker(),t){case H.ENTER:case H.UP:case H.DOWN:case H.PAGE_UP:case H.PAGE_DOWN:case H.PAGE_HOME:case H.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(s=this.listComponent)==null||s.handleKeyDown(e):super.onKeyDown(e);break;case H.ESCAPE:super.onKeyDown(e);break;case H.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){for(const t of e)this.addOption(t);return this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this.setValue(void 0,!0),this}setValue(e,t,s){const{listComponent:i,config:{placeholder:n},eDisplayField:o,tooltipFeature:r}=this;if(this.value===e||!i)return this;if(s||i.setValue(e,!0),i.getValue()===this.getValue())return this;let l=i.getDisplayValue();return l==null&&n&&(l=n),o.textContent=l,r==null||r.setTooltipAndRefresh(l??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},YV={selector:"AG-SELECT",component:v0},XV=':where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',TE,DE,C0=typeof window!="object"||!((DE=(TE=window==null?void 0:window.document)==null?void 0:TE.fonts)!=null&&DE.forEach),pu=(e,t,s,i,n,o)=>{if(C0)return;i&&(e=`@layer ${CSS.escape(i)} { ${e} }`);let r=Jd.map.get(t);if(r||(r=[],Jd.map.set(t,r)),r.some(d=>d.css===e))return;const a=document.createElement("style");o&&a.setAttribute("nonce",o),a.dataset.agGlobalCss=s,a.textContent=e;const l={css:e,el:a,priority:n};let c;for(const d of r){if(d.priority>n)break;c=d}if(c){c.el.insertAdjacentElement("afterend",a);const d=r.indexOf(c);r.splice(d+1,0,l)}else t.insertBefore(a,t.querySelector(":not(title, meta)")),r.push(l)},AD=(e,t,s,i)=>{pu(XV,e,"shared",t,0,s),i==null||i.forEach((n,o)=>n.forEach(r=>pu(r,e,o,t,0,s)))},QV=e=>{Jd.grids.add(e)},JV=e=>{if(Jd.grids.delete(e),Jd.grids.size===0){Jd.map=new WeakMap;for(const t of document.head.querySelectorAll("style[data-ag-global-css]"))t.remove()}},mR,Jd=(mR=typeof window=="object"?window:{}).agStyleInjectionState??(mR.agStyleInjectionState={map:new WeakMap,grids:new Set}),Wo=e=>new FD(e),ma="$default",ZV=0,FD=class{constructor({feature:e,params:t,modeParams:s={},css:i,cssImports:n}){this.feature=e,this.css=i,this.cssImports=n,this.modeParams={[ma]:{...s[ma]??{},...t??{}},...s}}use(e,t,s){let i=this._inject;if(i==null){let{css:n}=this;if(n){const o=`ag-theme-${this.feature??"part"}-${++ZV}`;typeof n=="function"&&(n=n()),n=`:where(.${o}) {
${n}
}
`;for(const r of this.cssImports??[])n=`@import url(${JSON.stringify(r)});
${n}`;i={css:n,class:o}}else i=!1;this._inject=i}return i&&e&&pu(i.css,e,i.class,t,1,s),i?i.class:!1}},ez=e=>e.replace(/[A-Z]/g,t=>`-${t}`).toLowerCase(),PD=e=>`--ag-${ez(e)}`,$o=e=>`var(${PD(e)})`,tz=(e,t,s)=>Math.max(t,Math.min(s,e)),sz=e=>{const t=new Map;return s=>{const i=s;return t.has(i)||t.set(i,e(s)),t.get(i)}},co=e=>({ref:"accentColor",mix:e}),sn=e=>({ref:"foregroundColor",mix:e}),pn=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),iz=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),Ti={ref:"backgroundColor"},Nd={ref:"foregroundColor"},Or={ref:"accentColor"},Pv={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:sn(.15),chromeBackgroundColor:pn(.02),browserColorScheme:"light"},nz={...Pv,textColor:Nd,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:co(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:Ti,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Or,toggleButtonOffBackgroundColor:pn(.3),toggleButtonSwitchBackgroundColor:Ti,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}}},oz=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],rz=sz(e=>(e=e.toLowerCase(),oz.find(t=>e.endsWith(t.toLowerCase()))??"length")),AC=e=>typeof e=="object"&&(e!=null&&e.ref)?$o(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,w0=e=>{if(typeof e=="string")return e;if(e&&"ref"in e){const t=$o(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?$o(e.onto):"transparent"}, ${t} ${tz(e.mix*100,0,100)}%)`}return!1},az=AC,Hd=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,s=>s[0]==="-"?s:" "+$o(s)+" ")})`:e&&"ref"in e?$o(e.ref):!1,lz=AC,Wy=(e,t)=>typeof e=="string"?e:e===!0?Wy({},t):e===!1?t==="columnBorder"?Wy({color:"transparent"},t):"none":e&&"ref"in e?$o(e.ref):TD(e.style??"solid")+" "+Hd(e.width??{ref:"borderWidth"})+" "+w0(e.color??{ref:"borderColor"}),cz=e=>typeof e=="string"?e:e===!1?"none":e&&"ref"in e?$o(e.ref):[Hd(e.offsetX??0),Hd(e.offsetY??0),Hd(e.radius??0),Hd(e.spread??0),w0(e.color??{ref:"foregroundColor"})].join(" "),TD=AC,DD=e=>typeof e=="string"?e.includes(",")?e:vR(e):e&&"googleFont"in e?DD(e.googleFont):e&&"ref"in e?$o(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),vR(t))).join(", "):!1,vR=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),dz=AC,_D=e=>typeof e=="string"?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?_D({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):e&&"ref"in e?$o(e.ref):!1,hz=(e,t,s)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&s.warn(104,{value:e,param:t}),`${e}s`):e&&"ref"in e?$o(e.ref):!1,uz={color:w0,colorScheme:az,length:Hd,scale:lz,border:Wy,borderStyle:TD,shadow:cz,image:_D,fontFamily:DD,fontWeight:dz,duration:hz},gz=(e,t,s)=>{const i=rz(e);return uz[i](t,e,s)},fz=e=>new MD(e),MD=class kD{constructor(t,s=[]){this.themeLogger=t,this.parts=s}withPart(t){return typeof t=="function"&&(t=t()),t instanceof FD?new kD(this.themeLogger,[...this.parts,t]):(this.themeLogger.preInitErr(259,"Invalid part",{part:t}),this)}withoutPart(t){return this.withPart(Wo({feature:t}))}withParams(t,s=ma){return this.withPart(Wo({modeParams:{[s]:t}}))}_startUse({styleContainer:t,cssLayer:s,nonce:i,loadThemeGoogleFonts:n,moduleCss:o}){if(C0)return;mz(),AD(t,s,i,o);const r=pz(this);if(r.length>0)for(const a of r)n&&vz(a,i);for(const a of this.parts)a.use(t,s,i)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=CR(this.parts).map(t=>t.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let t=this._paramsCache;if(!t){const s={[ma]:{...nz}};for(const i of CR(this.parts))for(const n of Object.keys(i.modeParams)){const o=i.modeParams[n];if(o){const r=s[n]??(s[n]={}),a=new Set;for(const l of Object.keys(o)){const c=o[l];c!==void 0&&(r[l]=c,a.add(l))}if(n===ma)for(const l of Object.keys(s)){const c=s[l];if(l!==ma)for(const d of a)delete c[d]}}}this._paramsCache=t=s}return t}_getPerInstanceCss(t){const s="##SELECTOR##";let i=this._paramsCssCache;if(!i){let n="",o="";const r=this._getModeParams();for(const l of Object.keys(r)){const c=r[l];if(l!==ma){const h=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(l):l}"]) & {
`;n+=h,o+=h}for(const d of Object.keys(c).sort()){const h=c[d],u=gz(d,h,this.themeLogger);if(u===!1)this.themeLogger.error(107,{key:d,value:h});else{const f=PD(d),p=f.replace("--ag-","--ag-inherited-");n+=`	${f}: var(${p}, ${u});
`,o+=`	${p}: var(${f});
`}}l!==ma&&(n+=`}
`,o+=`}
`)}let a=`${s} {
${n}}
`;a+=`:has(> ${s}):not(${s}) {
${o}}
`,this._paramsCssCache=i=a}return i.replaceAll(s,`:where(.${t})`)}},CR=e=>{const t=new Map;for(const i of e)t.set(i.feature,i);const s=[];for(const i of e)(!i.feature||t.get(i.feature)===i)&&s.push(i);return s},pz=e=>{const t=new Set,s=o=>{if(Array.isArray(o))o.forEach(s);else{const r=o==null?void 0:o.googleFont;typeof r=="string"&&t.add(r)}};return Object.values(e._getModeParams()).flatMap(o=>Object.values(o)).forEach(s),Array.from(t).sort()},wR=!1,mz=()=>{if(!wR){wR=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},vz=async(e,t)=>{const s=`@import url('https://${Cz}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;pu(s,document.head,`googleFont:${e}`,void 0,0,t)},Cz="fonts.googleapis.com",wz=1,bz=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=wz++,e!=null&&e.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){this.id=e.id,this.beans.context=this,this.destroyCallback=e.destroyCallback;for(const t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];for(const t of e.beanClasses){const s=new t;s.beanName?this.beans[s.beanName]=s:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(s)}for(const t of e.derivedBeans??[]){const{beanName:s,bean:i}=t(this);this.beans[s]=i,this.createdBeans.push(i)}e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){var i,n,o,r;const s=this.beans;for(const a of e)(i=a.preWireBeans)==null||i.call(a,s),(n=a.wireBeans)==null||n.call(a,s);for(const a of e)(o=a.preConstruct)==null||o.call(a);t&&e.forEach(t);for(const a of e)(r=a.postConstruct)==null||r.call(a)}getBeans(){return this.beans}getBean(e){return this.beans[e]}getId(){return this.id}destroy(){var t;if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[],(t=this.destroyCallback)==null||t.call(this)}destroyBean(e){var t;(t=e==null?void 0:e.destroy)==null||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},yz=0,Sz=class extends Qo{constructor(){super(...arguments),this.beanName="environment",this.paramsClass=`ag-theme-params-${++yz}`,this.globalCSS=[]}wireBeans(e){this.eRootDiv=e.eRootDiv}postConstruct(){const{gos:e,eRootDiv:t}=this;e.setInstanceDomData(t),this.eStyleContainer=e.get("themeStyleContainer")??(t.getRootNode()===document?document.head:t),this.cssLayer=e.get("themeCssLayer"),this.styleNonce=e.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.initVariables(),this.addDestroyFunc(()=>JV(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(e,t=[]){const{theme:s}=this;let i;s?i=`${this.paramsClass} ${s._getCssClass()}`:i=this.applyLegacyThemeClasses();for(const n of Array.from(e.classList))n.startsWith("ag-theme-")&&e.classList.remove(n);if(i){const n=e.className;e.className=`${n}${n?" ":""}${i}${t!=null&&t.length?" "+t.join(" "):""}`}}applyLegacyThemeClasses(){let e="";this.mutationObserver.disconnect();let t=this.eRootDiv;for(;t;){let s=!1;for(const i of Array.from(t.classList))i.startsWith("ag-theme-")&&(s=!0,e=e?`${e} ${i}`:i);s&&this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}return e}addGlobalCSS(e,t){this.theme?pu(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}handleThemeChange(){const{gos:e,theme:t}=this,s=e.get("theme");let i;if(s==="legacy")i=void 0;else{const n=s??this.getDefaultTheme();n instanceof MD?i=n:this.themeError(n)}i!==t&&this.handleNewTheme(i),this.postProcessThemeChange(i,s)}handleNewTheme(e){const{gos:t,eRootDiv:s,globalCSS:i}=this,n=this.getAdditionalCss();if(e){QV(this),AD(this.eStyleContainer,this.cssLayer,this.styleNonce,n);for(const[r,a]of i)pu(r,this.eStyleContainer,a,this.cssLayer,0,this.styleNonce);i.length=0}this.theme=e,e==null||e._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:n});let o=this.eParamsStyle;if(!o){o=this.eParamsStyle=Ap({tag:"style"});const r=t.get("styleNonce");r&&o.setAttribute("nonce",r),s.appendChild(o)}C0||(o.textContent=(e==null?void 0:e._getPerInstanceCss(this.paramsClass))||""),this.applyThemeClasses(s),this.fireStylesChangedEvent("themeChanged")}},xz=class extends Qo{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(e){if(e){this.dynamicBeans??(this.dynamicBeans={});for(const t of Object.keys(e))this.dynamicBeans[t]=e[t]}}createDynamicBean(e,t,...s){if(!this.dynamicBeans)throw new Error(this.getDynamicError(e,!0));const i=this.dynamicBeans[e];if(i==null){if(t)throw new Error(this.getDynamicError(e,!1));return}return new i(...s)}},Rz=class extends Qo{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new ed}addListener(e,t,s){this.globalSvc.addEventListener(e,t,s)}removeListener(e,t,s){this.globalSvc.removeEventListener(e,t,s)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchEvent(e){this.globalSvc.dispatchEvent(this.gos.addCommon(e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(this.gos.addCommon(e))}},ID=class extends Qo{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){const s="title",i=this.ctrl.getGui();i&&(e!=null&&(e!=""||t)?i.setAttribute(s,e):i.removeAttribute(s))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){if(this.tooltipManager==null){const e=this.beans.registry.createDynamicBean("tooltipStateManager",!0,this.ctrl,()=>this.tooltip);e&&(this.tooltipManager=this.createBean(e,this.beans.context))}}attemptToShowTooltip(){var e;(e=this.tooltipManager)==null||e.prepareToShowTooltip()}attemptToHideTooltip(){var e;(e=this.tooltipManager)==null||e.hideTooltip()}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},Ez=1e3,Az=1e3,bR=100,yR,qp=!1,Fz=class extends Qo{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){var t,s,i,n;return e==="show"?((s=(t=this.tooltipCtrl).getTooltipShowDelayOverride)==null?void 0:s.call(t))??this.getGridOptionsTooltipDelay("tooltipShowDelay"):((n=(i=this.tooltipCtrl).getTooltipHideDelayOverride)==null?void 0:n.call(i))??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!jc()&&(qp?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},bR):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var n;const t=e.relatedTarget,s=this.tooltipCtrl.getGui(),i=(n=this.tooltipComp)==null?void 0:n.getGui();this.isInteractingWithTooltip||s.contains(t)||this.interactionEnabled&&(i!=null&&i.contains(t))||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||qp)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-yR<Ez}setToDoNothing(e){!e&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.clearEventHandlers(),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){var n,o;const e=this.getTooltipValue(),t=this.tooltipCtrl;if(!pe(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip()){this.setToDoNothing();return}const s=this.gos.addCommon({location:((n=t.getLocation)==null?void 0:n.call(t))??"UNKNOWN",value:e,hideTooltipCallback:()=>this.hideTooltip(!0),...(o=t.getAdditionalParams)==null?void 0:o.call(t)});this.state=2,this.tooltipInstanceCount++;const i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.createTooltipComp(s,i)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),yR=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){var r;if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(t);return}const i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");const n=this.getLocaleTextFunc(),o=(r=this.popupSvc)==null?void 0:r.addPopup({eChild:i,ariaLabel:n("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const a=()=>this.setToDoNothing();[this.onBodyScrollEventCallback]=this.addManagedEventListeners({bodyScroll:a}),this.setEventHandlers(a)}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(ks(this.beans),{keydown:a=>{i.contains(a==null?void 0:a.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var s;const e=(s=this.tooltipComp)==null?void 0:s.getGui(),t=qt(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){var t,s;const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?(t=this.popupSvc)==null||t.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):(s=this.popupSvc)==null||s.positionPopupByComponent({...e,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,s=this.tooltipTrigger===0?Az:0;window.setTimeout(()=>{e(),this.destroyBean(t)},s),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){for(const e of[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener])e&&e();this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){qp=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},bR)}unlockService(){qp=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}},Pz=class extends ID{constructor(e,t,s){super(e,s),this.highlightTracker=t,this.onHighlight=this.onHighlight.bind(this)}postConstruct(){super.postConstruct(),this.wireHighlightListeners()}wireHighlightListeners(){this.addManagedPropertyListener("tooltipTrigger",({currentValue:e})=>{this.setTooltipMode(e)}),this.setTooltipMode(this.gos.get("tooltipTrigger")),this.highlightTracker.addEventListener("itemHighlighted",this.onHighlight)}onHighlight(e){this.tooltipMode===1&&(e.highlighted?this.attemptToShowTooltip():this.attemptToHideTooltip())}setTooltipMode(e="focus"){this.tooltipMode=e==="focus"?1:0}destroy(){this.highlightTracker.removeEventListener("itemHighlighted",this.onHighlight),super.destroy()}},Yp=0,Tz=200,Dz=class extends Qo{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}getPopupParent(){const e=this.gos.get("popupParent");return e||this.getDefaultPopupParent()}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:s,nudgeY:i,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:s,nudgeY:i,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e,e.type,e.ePopup,null,e.mouseEvent)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:s,nudgeY:i,keepWithinBounds:n,eventSource:o,alignSide:r="left",position:a="over",type:l}=e,c=o.getBoundingClientRect(),d=this.getParentRect();this.setAlignedTo(o,t);const h=()=>{let u=c.left-d.left;r==="right"&&(u-=t.offsetWidth-c.width);let f;return a==="over"?(f=c.top-d.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,c,d,e.nudgeY||0)==="under"?f=c.top-d.top+c.height:f=c.top-t.offsetHeight-(i||0)*2-d.top),{x:u,y:f}};this.positionPopup({ePopup:t,nudgeX:s,nudgeY:i,keepWithinBounds:n,updatePosition:h,postProcessCallback:()=>this.callPostProcessPopup(e,l,t,o,null)})}shouldRenderUnderOrAbove(e,t,s,i){const n=s.bottom-t.bottom,o=t.top-s.top,r=e.offsetHeight+i;return n>r?"under":o>r||o>n?"above":"under"}setAlignedStyles(e,t){const s=this.getPopupIndex(e);if(s===-1)return;const i=this.popupList[s],{alignedToElement:n}=i;if(!n)return;const o=["right","left","over","above","under"];for(const r of o)n.classList.remove(`ag-has-popup-positioned-${r}`),e.classList.remove(`ag-popup-positioned-${r}`);t&&(n.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){const s=this.getPopupIndex(t);if(s!==-1){const i=this.popupList[s];i.alignedToElement=e}}positionPopup(e){const{ePopup:t,keepWithinBounds:s,nudgeX:i,nudgeY:n,skipObserver:o,updatePosition:r}=e,a={width:0,height:0},l=(c=!1)=>{let{x:d,y:h}=r();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,i&&(d+=i),n&&(h+=n),s&&(d=this.keepXYWithinBounds(t,d,1),h=this.keepXYWithinBounds(t,h,0)),t.style.left=`${d}px`,t.style.top=`${h}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!o){const c=Cl(this.beans,t,()=>l(!0));setTimeout(()=>c(),Tz)}}getParentRect(){const e=ks(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),PT(t)}keepXYWithinBounds(e,t,s){const i=s===0,n=i?"clientHeight":"clientWidth",o=i?"top":"left",r=i?"height":"width",a=i?"scrollTop":"scrollLeft",l=ks(this.beans),c=l.documentElement,d=this.getPopupParent(),h=e.getBoundingClientRect(),u=d.getBoundingClientRect(),f=l.documentElement.getBoundingClientRect(),p=d===l.body,m=Math.ceil(h[r]);let C=p?(i?FT:fv)(c)+c[a]:d[n];p&&(C-=Math.abs(f[o]-u[o]));const b=C-m;return Math.min(Math.max(t,0),Math.max(b,0))}addPopup(e){const{eChild:t,ariaLabel:s,ariaOwns:i,alwaysOnTop:n,positionCallback:o,anchorToElement:r}=e,a=this.getPopupIndex(t);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(t);const l=this.createPopupWrapper(t,!!n,s,i),c=this.addEventListenersToPopup({...e,wrapperEl:l});return o&&o(),this.addPopupToPopupList(t,l,c,r),{hideFunc:c}}initialisePopupPosition(e){const s=this.getPopupParent().getBoundingClientRect();pe(e.style.top)||(e.style.top=`${s.top*-1}px`),pe(e.style.left)||(e.style.left=`${s.left*-1}px`)}createPopupWrapper(e,t,s,i){const n=this.getPopupParent(),{environment:o,gos:r}=this.beans,a=Ap({tag:"div"});return o.applyThemeClasses(a),a.classList.add("ag-popup"),e.classList.add(r.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||cl(e,"dialog"),s?uu(e,s):i&&(e.id||(e.id=`popup-component-${Yp}`),eR(i,e.id)),a.appendChild(e),n.appendChild(a),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),a}addEventListenersToPopup(e){const t=this.beans,s=ks(t),{wrapperEl:i,eChild:n,closedCallback:o,afterGuiAttached:r,closeOnEsc:a,modal:l,ariaOwns:c}=e;let d=!1;const h=m=>{if(!i.contains(qt(t)))return;m.key===H.ESCAPE&&!this.isStopPropagation(m)&&p({keyboardEvent:m})},u=m=>p({mouseEvent:m}),f=m=>p({touchEvent:m}),p=(m={})=>{const{mouseEvent:v,touchEvent:C,keyboardEvent:b,forceHide:y}=m;!y&&(this.isEventFromCurrentPopup({mouseEvent:v,touchEvent:C},n)||d)||(d=!0,i.remove(),s.removeEventListener("keydown",h),s.removeEventListener("mousedown",u),s.removeEventListener("touchstart",f),s.removeEventListener("contextmenu",u),this.eventSvc.removeListener("dragStarted",u),o&&o(v||C||b),this.removePopupFromPopupList(n,c))};return r&&r({hidePopup:p}),window.setTimeout(()=>{a&&s.addEventListener("keydown",h),l&&(s.addEventListener("mousedown",u),this.eventSvc.addListener("dragStarted",u),s.addEventListener("touchstart",f),s.addEventListener("contextmenu",u))},0),p}addPopupToPopupList(e,t,s,i){this.popupList.push({element:e,wrapper:t,hideFunc:s,instanceId:Yp,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i),Yp=Yp+1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const s=this.getPopupIndex(e);if(s===-1)return;const i=this.popupList[s];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(o=>o&&o()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;const n=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=n,i.isAnchored=!0,n}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&eR(t,null),this.popupList=this.popupList.filter(s=>s.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),s=t.getBoundingClientRect(),{element:i,ePopup:n}=e,o=i.getBoundingClientRect(),r=h=>Number.parseInt(h.substring(0,h.length-1),10),a=(h,u)=>{const f=s[h]-o[h],p=r(n.style[h]);return{initialDiff:f,lastDiff:f,initial:p,last:p,direction:u}},l=a("top",0),c=a("left",1),d=this.beans.frameworkOverrides;return new es(h=>{d.wrapIncoming(()=>{GG(()=>{const u=t.getBoundingClientRect(),f=i.getBoundingClientRect();if(f.top==0&&f.left==0&&f.height==0&&f.width==0){e.hidePopup();return}const m=(v,C)=>{const b=r(n.style[C]);v.last!==b&&(v.initial=b,v.last=b);const y=u[C]-f[C];if(y!=v.lastDiff){const S=this.keepXYWithinBounds(n,v.initial+v.initialDiff-y,v.direction);n.style[C]=`${S}px`,v.last=S}v.lastDiff=y};m(l,"top"),m(c,"left")},200).then(u=>{h(()=>{u!=null&&window.clearInterval(u)})})},"popupPositioning")})}isEventFromCurrentPopup(e,t){const{mouseEvent:s,touchEvent:i}=e,n=s||i;if(!n)return!1;const o=this.getPopupIndex(t);if(o===-1)return!1;for(let r=o;r<this.popupList.length;r++){const a=this.popupList[r];if(xB(a.element,n))return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){const t=ks(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const s=this.getWrapper(e);s&&(s.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(s))}bringPopupToFront(e){const t=this.getPopupParent(),s=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=s.length,n=this.getWrapper(e);if(!n||i<=1||!t.contains(e))return;const o=[],r=[];for(const u of s)u!==n&&(u.classList.contains("ag-always-on-top")?r.push(u):o.push(u));const a=[],l=r.length,h=n.classList.contains("ag-always-on-top")||!l?[...o,...r,n]:[...o,n,...r];for(let u=0;u<=i;u++){const f=h[u];if(s[u]===h[u]||f===n)continue;const p=f.querySelectorAll("div");for(const m of p)m.scrollTop!==0&&a.push([m,m.scrollTop]);u===0?t.insertAdjacentElement("afterbegin",f):h[u-1].insertAdjacentElement("afterend",f)}for(;a.length;){const u=a.pop();u[0].scrollTop=u[1]}}},_z=class extends u0{constructor(){super({tag:"div",cls:"ag-tooltip"})}init(e){const{value:t}=e,s=this.getGui();s.textContent=Eu(t);const i=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();s.classList.add(`ag-${i}-tooltip`)}},LD=(e,t)=>{if(t!=null&&(e!=null&&e.setPointerCapture))try{return e.setPointerCapture(t),e.hasPointerCapture(t)}catch{}return!1},Mz=(e,t)=>{if(typeof PointerEvent>"u"||!(t instanceof PointerEvent))return null;const s=t.pointerId;if(!LD(e,s))return null;const i={eElement:e,pointerId:s,onLost(n){Iz(i,n)}};return e.addEventListener("lostpointercapture",i.onLost),i},kz=e=>{if(!e)return;OD(e);const{eElement:t,pointerId:s}=e;if(t){try{t.releasePointerCapture(s)}catch{}e.eElement=null}},OD=e=>{const{eElement:t,onLost:s}=e;t&&s&&(t.removeEventListener("lostpointercapture",s),e.onLost=null)},Iz=(e,t)=>{OD(e);const{eElement:s,pointerId:i}=e;s&&t.pointerId===i&&LD(s,i)},tn,ko,sr=e=>{if(!ko)ko=new WeakSet;else if(ko.has(e))return!1;return ko.add(e),!0},Lz=class extends Qo{constructor(){super(...arguments),this.beanName="dragSvc",this.dragging=!1,this.drag=null,this.dragSources=[]}get startTarget(){var e;return((e=this.drag)==null?void 0:e.start.target)??null}isPointer(){return!!(tn!=null&&tn.has(lo(this.beans)))}hasPointerCapture(){var t,s,i;const e=(t=this.drag)==null?void 0:t.pointerCapture;return!!(e&&((i=(s=this.beans.eRootDiv).hasPointerCapture)!=null&&i.call(s,e.pointerId)))}destroy(){this.drag&&this.cancelDrag();const e=this.dragSources;for(const t of e)SR(t);e.length=0,super.destroy()}removeDragSource(e){const t=this.dragSources;for(let s=0,i=t.length;s<i;++s){const n=t[s];if(n.params===e){t.splice(s,1),SR(n);break}}}addDragSource(e){if(!this.isAlive())return;const{eElement:t,includeTouch:s}=e,i=[];let n;if(s){const c=t.style;c&&(n=c.touchAction,c.touchAction="none")}const o={handlers:i,params:e,oldTouchAction:n};this.dragSources.push(o),Gm(i,[t,"pointerdown",c=>this.onPointerDown(e,c),{passive:!1}],[t,"mousedown",c=>this.onMouseDown(e,c)]);const l=this.gos.get("suppressTouch");s&&!l&&Gm(i,[t,"touchstart",d=>this.onTouchStart(e,d),{passive:!1}])}cancelDrag(e){var s,i;const t=this.drag;e??(e=t==null?void 0:t.eElement),e&&this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),(i=t==null?void 0:(s=t.params).onDragCancel)==null||i.call(s),this.destroyDrag()}shouldPreventMouseEvent(e){const t=e.type;return(t==="mousemove"||t==="pointermove")&&e.cancelable&&Hg(this.beans,e)&&!vg(pw(e))}initDrag(e,...t){this.drag=e;const s=this.beans,i=a=>this.onScroll(a),n=a=>this.onKeyDown(a),o=lo(s),r=ks(s);Gm(e.handlers,[o,"contextmenu",pa],[o,"keydown",n],[r,"scroll",i,{capture:!0}],[r.defaultView||window,"scroll",i],...t)}destroyDrag(){this.dragging=!1;const e=this.drag;if(e){const t=e.rootEl;(tn==null?void 0:tn.get(t))===e&&(tn==null||tn.delete(t)),this.drag=null,kz(e.pointerCapture),n0(e.handlers)}}onPointerDown(e,t){if(this.isPointer())return;const s=this.beans;if(ko!=null&&ko.has(t))return;const i=t.pointerType;if(i==="touch"&&(s.gos.get("suppressTouch")||!e.includeTouch||(e.stopPropagationForTouch&&t.stopPropagation(),vg(pw(t))))||!t.isPrimary||i==="mouse"&&t.button!==0)return;this.destroyDrag();const n=lo(s),o=e.eElement,r=t.pointerId,a=new fw(n,e,t,r);tn??(tn=new WeakMap),tn.set(n,a);const l=h=>{h.pointerId===r&&this.onMouseOrPointerMove(h)},c=h=>{h.pointerId===r&&this.onMouseOrPointerUp(h)},d=h=>{h.pointerId===r&&sr(h)&&this.cancelDrag()};this.initDrag(a,[n,"pointerup",c],[n,"pointercancel",d],[n,"pointermove",l,{passive:!1}],[n,"touchmove",pa,{passive:!1}],[o,"mousemove",pa,{passive:!1}]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):sr(t)}onTouchStart(e,t){if(this.gos.get("suppressTouch")||!e.includeTouch||!sr(t)||vg(pw(t)))return;if(e.stopPropagationForTouch&&t.stopPropagation(),this.isPointer()){pa(t);return}this.destroyDrag();const i=this.beans,n=lo(i),o=new fw(n,e,t.touches[0]),r=c=>this.onTouchMove(c),a=c=>this.onTouchUp(c),l=t.target??e.eElement;this.initDrag(o,[lo(i),"touchmove",pa,{passive:!1}],[l,"touchmove",r,{passive:!0}],[l,"touchend",a,{passive:!0}],[l,"touchcancel",a,{passive:!0}]),e.dragStartPixels===0&&this.onMove(o.start)}onMouseDown(e,t){if(t.button!==0||ko!=null&&ko.has(t)||this.isPointer())return;const s=this.beans;this.destroyDrag();const i=new fw(lo(s),e,t),n=a=>this.onMouseOrPointerMove(a),o=a=>this.onMouseOrPointerUp(a),r=lo(s);this.initDrag(i,[r,"mousemove",n],[r,"mouseup",o]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):sr(t)}onScroll(e){var i;if(!sr(e))return;const t=this.drag,s=t==null?void 0:t.lastDrag;s&&this.dragging&&((i=t.params)==null||i.onDragging(s))}onMouseOrPointerMove(e){var t;sr(e)&&(bl()&&((t=ks(this.beans).getSelection())==null||t.removeAllRanges()),this.shouldPreventMouseEvent(e)&&pa(e),this.onMove(e))}onTouchMove(e){const t=this.drag;if(!t||!sr(e))return;const s=wg(t.start,e.touches);s&&(e.preventDefault(),this.onMove(s))}onMove(e){const t=this.drag;if(!t)return;t.lastDrag=e;const s=t.params;if(!this.dragging){const i=t.start,o=s.dragStartPixels??4;if(LT(e,i,o)||(this.dragging=!0,s.capturePointer&&(t.pointerCapture=Mz(this.beans.eRootDiv,e)),this.eventSvc.dispatchEvent({type:"dragStarted",target:s.eElement}),s.onDragStart(i),this.drag!==t)||(s.onDragging(i),this.drag!==t))return}s.onDragging(e)}onTouchUp(e){const t=this.drag;t&&sr(e)&&this.onUp(wg(t.start,e.changedTouches))}onMouseOrPointerUp(e){sr(e)&&this.onUp(e)}onUp(e){const t=this.drag;t&&(e||(e=t.lastDrag),e&&this.dragging&&(this.dragging=!1,t.params.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t.params.eElement})),this.destroyDrag())}onKeyDown(e){e.key===H.ESCAPE&&this.cancelDrag()}},SR=e=>{n0(e.handlers);const t=e.oldTouchAction;if(t!=null){const s=e.params.eElement.style;s&&(s.touchAction=t)}},fw=class{constructor(e,t,s,i=null){this.rootEl=e,this.params=t,this.start=s,this.pointerId=i,this.handlers=[],this.lastDrag=null,this.pointerCapture=null,this.eElement=t.eElement}},pw=e=>{const t=e.target;return t instanceof Element?t:null},Oz=class extends Qo{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageParent=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.lastDropTarget=null}addDragSource(e,t=!1){const s={capturePointer:!0,dragSource:e,eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:i=>this.onDragStart(e,i),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push(s),this.beans.dragSvc.addDragSource(s)}setDragImageCompIcon(e,t=!1){const s=this.dragImageComp;s&&(t||this.dragImageLastIcon!==e)&&(this.dragImageLastIcon=e,s.setIcon(e,t))}removeDragSource(e){var n;const{dragSourceAndParamsList:t,beans:s}=this,i=t.find(o=>o.dragSource===e);i&&((n=s.dragSvc)==null||n.removeDragSource(i),to(t,i))}destroy(){const{dragSourceAndParamsList:e,dropTargets:t,beans:s}=this,i=s.dragSvc;for(const n of e)i==null||i.removeDragSource(n);e.length=0,t.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){const e=this.lastMouseEvent;e&&this.onDragging(e,!0)}onDragStart(e,t){var i;this.lastMouseEvent=t,this.dragSource=e,this.dragItem=e.getDragItem();const s=e.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=t.clientX-s.left,this.dragInitialSourcePointerOffsetY=t.clientY-s.top,(i=e.onDragStarted)==null||i.call(e),this.createAndUpdateDragImageComp(e)}onDragStop(e){var i,n;const{dragSource:t,lastDropTarget:s}=this;if((i=t==null?void 0:t.onDragStopped)==null||i.call(t),s){const o=this.dropTargetEvent(s,e,!1);(n=s.onDragStop)==null||n.call(s,o)}this.clearDragAndDropProperties()}onDragCancel(){var i,n;const{dragSource:e,lastDropTarget:t,lastMouseEvent:s}=this;if((i=e==null?void 0:e.onDragCancelled)==null||i.call(e),t&&s){const o=this.dropTargetEvent(t,s,!1);(n=t.onDragCancel)==null||n.call(t,o)}this.clearDragAndDropProperties()}onDragging(e,t=!1){var a,l,c;this.positionDragImageComp(e);const s=this.findCurrentDropTarget(e),{lastDropTarget:i,dragSource:n,dragItem:o}=this;let r=!1;if(s!==i){if(r=!0,i){const d=this.dropTargetEvent(i,e,t);(a=i.onDragLeave)==null||a.call(i,d)}if(i!==null&&!s?this.handleExit(n,o):i===null&&s&&this.handleEnter(n,o),s){const d=this.dropTargetEvent(s,e,t);(l=s.onDragEnter)==null||l.call(s,d)}this.lastDropTarget=s}else if(s){const d=this.dropTargetEvent(s,e,t);(c=s.onDragging)==null||c.call(s,d),d!=null&&d.changed&&(r=!0)}this.lastMouseEvent=e,r&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageParent=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.dragSource=null}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,s=[[e.getContainer()]];return t?s.concat(t):s}isMouseOnDropTarget(e,t){const s=this.getAllContainersFromDropTarget(t);let i=!1;const n=(a,l)=>{for(const c of l){const{width:d,height:h,left:u,right:f,top:p,bottom:m}=c.getBoundingClientRect();if(d===0||h===0)return!1;const v=a.clientX>=u&&a.clientX<f,C=a.clientY>=p&&a.clientY<m;if(!v||!C)return!1}return!0};for(const a of s)if(n(e,a)){i=!0;break}const{eElement:o,type:r}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(o)?!1:i&&t.isInterestedIn(r,o)}findCurrentDropTarget(e){const t=this.dropTargets.filter(o=>this.isMouseOnDropTarget(e,o)),s=t.length;if(s===0)return null;if(s===1)return t[0];const n=lo(this.beans).elementsFromPoint(e.clientX,e.clientY);for(const o of n)for(const r of t)if(this.getAllContainersFromDropTarget(r).flatMap(l=>l).indexOf(o)!==-1)return r;return null}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.find(t=>t.external&&t.getContainer()===e)||null}dropTargetEvent(e,t,s){const{dragSource:i,dragItem:n,lastDraggingEvent:o,lastMouseEvent:r,dragInitialSourcePointerOffsetX:a,dragInitialSourcePointerOffsetY:l}=this,c=e.getContainer(),d=c.getBoundingClientRect(),{clientX:h,clientY:u}=t,f=h-((r==null?void 0:r.clientX)||0),p=u-((r==null?void 0:r.clientY)||0),m=this.createEvent({event:t,x:h-d.left,y:u-d.top,vDirection:p>0?"down":p<0?"up":null,hDirection:f<0?"left":f>0?"right":null,initialSourcePointerOffsetX:a,initialSourcePointerOffsetY:l,dragSource:i,fromNudge:s,dragItem:n,dropZoneTarget:c,dropTarget:(o==null?void 0:o.dropTarget)??null,changed:!!(o!=null&&o.changed)});return this.lastDraggingEvent=m,m}positionDragImageComp(e){var s;const t=(s=this.dragImageComp)==null?void 0:s.getGui();t&&PB(t,e,this.beans)}removeDragImageComp(e){var t;this.dragImageComp===e&&(this.dragImageComp=null),e&&((t=e.getGui())==null||t.remove(),this.destroyBean(e))}createAndUpdateDragImageComp(e){const t=this.createDragImageComp(e)??null;this.dragImageCompPromise=t,t==null||t.then(s=>{if(t!==this.dragImageCompPromise||!this.lastMouseEvent||!this.isAlive()){this.destroyBean(s);return}this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;const i=this.dragImageComp;i!==s&&(this.dragImageComp=s,this.removeDragImageComp(i)),s&&(this.appendDragImageComp(s),this.updateDragImageComp())})}appendDragImageComp(e){var n;const t=e.getGui(),s=t.style;s.position="absolute",s.zIndex="9999",(n=this.beans.dragSvc)!=null&&n.hasPointerCapture()&&(s.pointerEvents="none"),this.gos.setInstanceDomData(t),this.beans.environment.applyThemeClasses(t),s.top="20px",s.left="20px";const i=JS(this.beans);this.dragImageParent=i,i?i.appendChild(t):this.warnNoBody()}updateDragImageComp(){var r;const{dragImageComp:e,dragSource:t,lastDropTarget:s,lastDraggingEvent:i,dragImageLastLabel:n}=this;if(!e)return;this.setDragImageCompIcon(((r=s==null?void 0:s.getIconName)==null?void 0:r.call(s,i))??null);let o=t==null?void 0:t.dragItemName;typeof o=="function"&&(o=o(i)),o||(o=""),n!==o&&(this.dragImageLastLabel=o,e.setLabel(o))}},Nz=class extends Oz{createEvent(e){return Be(this.gos,e)}createDragImageComp(e){const{gos:t,beans:s}=this,i=rV(s.userCompFactory,Be(t,{dragSource:e}));return i==null?void 0:i.newAgStackInstance()}handleEnter(e,t){var s;(s=e==null?void 0:e.onGridEnter)==null||s.call(e,t)}handleExit(e,t){var s;(s=e==null?void 0:e.onGridExit)==null||s.call(e,t)}warnNoBody(){oe(54)}isDropZoneWithinThisGrid(e){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(e.dropZoneTarget)}registerGridDropTarget(e,t){const s={getContainer:e,isInterestedIn:i=>i===1||i===0,getIconName:()=>"notAllowed"};this.addDropTarget(s),t.addDestroyFunc(()=>this.removeDropTarget(s))}};function ND(e,t){return e+"_"+t}function os(e){return e instanceof Wg}var Wg=class extends ${constructor(e,t,s,i){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=s,this.pinned=i,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=mg(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return ND(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){for(const e of this.displayedChildren)os(e)&&e.checkLeft();if(this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=It(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;for(const t of this.displayedChildren??[])e+=t.getActualWidth();return e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;for(const t of this.displayedChildren)t.isResizable()&&(e=!0);return e}getMinWidth(){let e=0;for(const t of this.displayedChildren)e+=t.getMinWidth();return e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!!((e=this.getColGroupDef())!=null&&e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){for(const t of this.displayedChildren??[])ul(t)?e.push(t):os(t)&&t.addDisplayedLeafColumns(e)}addLeafColumns(e){for(const t of this.children??[])ul(t)?e.push(t):os(t)&&t.addLeafColumns(e)}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!(e!=null&&e.isPadding())?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){var s;this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}for(const i of this.children??[]){if(os(i)&&!((s=i.displayedChildren)!=null&&s.length))continue;switch(i.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},$y="row-group-",b0="t-",y0="b-",Hz=0,gl=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this._leafs=void 0,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Hz++,this.alreadyRendered=!1,this.hovered=!1,this.__selected=!1,this.beans=e}get allLeafChildren(){var t,s;const e=this._leafs;return e===void 0?((s=(t=this.beans.groupStage)==null?void 0:t.loadLeafs)==null?void 0:s.call(t,this))??null:e}set allLeafChildren(e){this._leafs=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){var a,l,c;const{valueCache:s,eventSvc:i}=this.beans,n=this.data;this.data=e,s==null||s.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();const o=this.createDataChangedEvent(e,n,t);if((a=this.__localEventService)==null||a.dispatchEvent(o),this.sibling){this.sibling.data=e;const d=this.sibling.createDataChangedEvent(e,n,t);(l=this.sibling.__localEventService)==null||l.dispatchEvent(d)}i.dispatchEvent({type:"rowNodeDataChanged",node:this});const r=this.pinnedSibling;r&&(r.data=e,(c=r.__localEventService)==null||c.dispatchEvent(r.createDataChangedEvent(e,n,t)),i.dispatchEvent({type:"rowNodeDataChanged",node:r}))}updateDataOnDetailNode(){const e=this.detailNode;e&&(e.data=this.data)}createDataChangedEvent(e,t,s){return{type:"dataChanged",node:this,oldData:t,newData:e,update:s}}getRowIndexString(){return this.rowIndex==null?(Pt(13),null):this.rowPinned==="top"?b0+this.rowIndex:this.rowPinned==="bottom"?y0+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){var r,a;const{selectionSvc:s}=this.beans,i=(r=s==null?void 0:s.createDaemonNode)==null?void 0:r.call(s,this),n=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),s&&(s.updateRowSelectable(this),s.syncInRowNode(this,i));const o=this.createDataChangedEvent(e,n,!1);(a=this.__localEventService)==null||a.dispatchEvent(o)}setId(e){var s;const t=gu(this.beans.gos);if(t)if(this.data){const i=((s=this.parent)==null?void 0:s.getRoute())??[];this.id=t({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith($y)&&Pt(14,{groupPrefix:$y})}else this.id=void 0;else this.id=e}setRowTop(e){if(this.oldRowTop=this.rowTop,this.rowTop===e)return;this.rowTop=e,this.dispatchRowEvent("topChanged");const t=e!==null;this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,s){var i;(i=this.beans.expansionSvc)==null||i.setExpanded(this,e,t,s)}setDataValue(e,t,s){var d;const{colModel:i,valueSvc:n,gos:o,editSvc:r}=this.beans,a=typeof e!="string"?e:i.getCol(e)??i.getColDefCol(e);if(!a)return!1;const l=n.getValueForDisplay(a,this,void 0,void 0,"api").value;if(o.get("readOnlyEdit")){const{beans:{eventSvc:h},data:u,rowIndex:f,rowPinned:p}=this;return h.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:f,rowPinned:p,column:a,colDef:a.colDef,data:u,node:this,oldValue:l,newValue:t,value:t,source:s}),!1}if(r&&!r.committing){const h=r.setDataValue({rowNode:this,column:a},t,s);if(h!=null)return h}const c=n.setValue(this,a,t,s);return this.dispatchCellChangedEvent(a,t,l),c&&((d=this.pinnedSibling)==null||d.dispatchCellChangedEvent(a,t,l)),c}updateHasChildren(){var s;let e=this.group&&!this.footer||!!((s=this.childrenAfterGroup)!=null&&s.length);const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,s){var n;const i={type:"cellChanged",node:this,column:e,newValue:t,oldValue:s};(n=this.__localEventService)==null||n.dispatchEvent(i)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){var e;return((e=this.beans.expansionSvc)==null?void 0:e.isExpandable(this))??!1}isSelected(){if(this.footer)return this.sibling.isSelected();const e=this.rowPinned&&this.pinnedSibling;return e?e.isSelected():this.__selected}depthFirstSearch(e){const t=this.childrenAfterGroup;if(t)for(let s=0,i=t.length;s<i;++s)t[s].depthFirstSearch(e);e(this)}dispatchRowEvent(e){var t;(t=this.__localEventService)==null||t.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,s="api"){var i;(i=this.beans.selectionSvc)==null||i.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:s})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){(this.__localEventService??(this.__localEventService=new ed)).addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){var n,o,r,a;(n=this.beans.validation)==null||n.checkRowEvents(e);const s=this.__localEventService??(this.__localEventService=new ed);this.frameworkEventListenerService=(r=(o=this.beans.frameworkOverrides).createLocalEventListenerWrapper)==null?void 0:r.call(o,this.frameworkEventListenerService,s);const i=((a=this.frameworkEventListenerService)==null?void 0:a.wrap(e,t))??t;s.addEventListener(e,i)}removeEventListener(e,t){var i;const s=((i=this.frameworkEventListenerService)==null?void 0:i.unwrap(e,t))??t;this.removeLocalListener(e,s)}removeLocalListener(e,t){const s=this.__localEventService;s&&(s.removeEventListener(e,t),s.noRegisteredListenersExist()&&(this.__localEventService=null))}isFullWidthCell(){if(oe(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const e=[];let t=this;for(;(t==null?void 0:t.key)!=null;)e.push(t.key),t=t.parent;return e.reverse()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){var t;const e=this.childStore;return e?e.getFirstNode():((t=this.childrenAfterSort)==null?void 0:t[0])??null}};function Bz(e,t,s){return Be(t,{type:s,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var Gz=new Set(["__autoHeights","__checkAutoHeightsDebounced","__localEventService","__objectId","_leafs","childStore","oldRowTop","sticky","treeNodeFlags","treeParent"]),Vz=(e,t)=>{const s=new gl(t);for(const i of Object.keys(e))Gz.has(i)||(s[i]=e[i]);return s.oldRowTop=null,s},HD=e=>{for(;e!=null&&e.length;){const t=e[0];if(t.data)return t;e=t.childrenAfterGroup}},BD={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},zz=new Set(Object.values(BD));function la(e,t){const s=e.filterUi;if(!s)return null;if(s.created)return s.promise;if(t)return null;const i=s.create(s.refreshed),n=s;return n.created=!0,n.promise=i,i}function Wz(e,t,s,i,n,o,r){var a;return(a=t.refresh)==null||a.call(t,{...s,model:i,source:o,additionalEventAttributes:r}),e().then(l=>{if(l){const{filter:c,filterParams:d}=l;GD(c,d,i,n,o,r)}})}function GD(e,t,s,i,n,o){var r;(r=e==null?void 0:e.refresh)==null||r.call(e,{...t,model:s,state:i,source:n,additionalEventAttributes:o})}function VD(e,t,s){const i=e();i!=null&&i.created&&i.promise.then(n=>{const o=t();GD(n,i.filterParams,o,s()??{model:o},"ui")})}function xR(e,t,s,i,n,o,r){let a,l=!1,c;switch(e){case"apply":{const d=i();c=(d==null?void 0:d.model)??null,r&&(c=r(c)),a={state:d==null?void 0:d.state,model:c},l=!0;break}case"clear":{a={model:null};break}case"reset":{a={model:null},l=!0,c=null;break}case"cancel":{a={model:s()};break}}n(a),l?o(c):VD(t,s,i)}function Fs(e,t){return e[t]??null}function ls(e){return Ap(e)}function $z(e){return{tag:"div",cls:e}}var Uz=class extends Et{constructor(e){const{className:t="ag-filter-apply-panel"}=e??{};super($z(t)),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){const s=this.buttons;if(this.buttons=e,s===e)return;const i=this.getGui();Ks(i);let n;this.destroyListeners();const o=document.createDocumentFragment(),r=this.className,a=({type:c,label:d})=>{const h=C=>{this.dispatchLocalEvent({type:c,event:C})};["apply","clear","reset","cancel"].includes(c)||oe(75);const u=c==="apply",p=ls({tag:"button",attrs:{type:u&&t?"submit":"button"},ref:`${c}FilterButton`,cls:`ag-button ag-standard-button ${r}-button${u?" "+r+"-apply-button":""}`,children:d});this.activateTabIndex([p]),u&&(n=p);const m=C=>{C.key===H.ENTER&&(C.preventDefault(),h(C))},v=this.listeners;p.addEventListener("click",h),v.push(()=>p.removeEventListener("click",h)),p.addEventListener("keydown",m),v.push(()=>p.removeEventListener("keydown",m)),o.append(p)};for(const c of e)a(c);this.eApply=n;const l=this.validationTooltipFeature;n&&!l?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3})):!n&&l&&(this.validationTooltipFeature=this.destroyBean(l)),i.append(o)}getApplyButton(){return this.eApply}updateValidity(e,t=null){var i;const s=this.eApply;s&&(Og(s,e===!1),this.validationMessage=t??null,(i=this.validationTooltipFeature)==null||i.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){for(const e of this.listeners)e();this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}},jz={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:e=>`(${e[0]}, ${e[1]})`,filterSummaryTextQuote:e=>`"${e[0]}"`};function wa(e,t,s){return DB(e,jz,t,s)}function S0(e,t){const{debounceMs:s}=e;return FC(e)?(s!=null&&oe(71),0):s??t}function FC(e){var t;return(((t=e.buttons)==null?void 0:t.indexOf("apply"))??-1)>=0}var Kz=class extends Et{constructor(e,t,s,i,n,o){super(),this.column=e,this.wrapper=t,this.eventParent=s,this.updateModel=i,this.isGlobalButtons=n,this.enableGlobalButtonCheck=o,this.hidePopup=null,this.applyActive=!1}postConstruct(){const{comp:e,params:t}=this.wrapper,s=t,i=s.useForm,n=i?"form":"div";this.setTemplate({tag:n,cls:"ag-filter-wrapper"}),i&&this.addManagedElementListeners(this.getGui(),{submit:o=>{o==null||o.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=s,this.resetButtonsPanel(s),this.addManagedListeners(this.eventParent,{filterParamsChanged:({column:o,params:r})=>{o===this.column&&this.resetButtonsPanel(r,this.params)},filterStateChanged:({column:o,state:r})=>{var a;o===this.column&&((a=this.eButtons)==null||a.updateValidity(r.valid!==!1))},filterAction:({column:o,action:r,event:a})=>{o===this.column&&this.afterAction(r,a)},...this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:o})=>{if(o!==this.isGlobalButtons){this.isGlobalButtons=o;const r=this.params;this.resetButtonsPanel(r,r,!0)}}}:void 0})}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,s){const{buttons:i,readOnly:n}=t??{},{buttons:o,readOnly:r,useForm:a}=e;if(!s&&n===r&&Ig(i,o))return;const l=o&&o.length>0&&!e.readOnly&&!this.isGlobalButtons;let c=this.eButtons;if(l){const d=o.map(h=>{const u=`${h}Filter`;return{type:h,label:wa(this,u)}});if(this.applyActive=FC(this.params),!c){c=this.createBean(new Uz),this.appendChild(c.getGui());const h=this.column,u=f=>({event:p})=>{this.updateModel(h,f,{fromButtons:!0}),this.afterAction(f,p)};c==null||c.addManagedListeners(c,{apply:u("apply"),clear:u("clear"),reset:u("reset"),cancel:u("cancel")}),this.eButtons=c}c.updateButtons(d,a)}else this.applyActive=!1,c&&(Qn(c.getGui()),this.eButtons=this.destroyBean(c))}close(e){const t=this.hidePopup;if(!t)return;const s=e,i=s==null?void 0:s.key;let n;(i===H.ENTER||i===H.SPACE)&&(n={keyboardEvent:s}),t(n),this.hidePopup=null}afterAction(e,t){const{params:s,applyActive:i}=this,n=s==null?void 0:s.closeOnApply;switch(e){case"apply":{t==null||t.preventDefault(),n&&i&&this.close(t);break}case"reset":{n&&i&&this.close();break}case"cancel":{n&&this.close(t);break}}}handleKeyDown(e){!e.defaultPrevented&&e.key===H.ENTER&&this.applyActive&&(this.updateModel(this.column,"apply",{fromButtons:!0}),this.afterAction("apply",e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},qz={tag:"div",cls:"ag-filter"},Yz=class extends Et{constructor(e,t,s){super(qz),this.column=e,this.source=t,this.enableGlobalButtonCheck=s,this.wrapper=null}postConstruct(){var e;(e=this.beans.colFilter)==null||e.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return this.wrapper!=null}getFilter(){var e;return((e=this.wrapper)==null?void 0:e.then(t=>t.comp))??null}afterInit(){var e;return((e=this.wrapper)==null?void 0:e.then(()=>{}))??es.resolve()}afterGuiAttached(e){var t;this.afterGuiAttachedParams=e,(t=this.wrapper)==null||t.then(s=>{var i,n,o;(i=this.comp)==null||i.afterGuiAttached(e),(o=(n=s==null?void 0:s.comp)==null?void 0:n.afterGuiAttached)==null||o.call(n,e)})}afterGuiDetached(){var e;(e=this.wrapper)==null||e.then(t=>{var s,i;(i=(s=t==null?void 0:t.comp)==null?void 0:s.afterGuiDetached)==null||i.call(s)})}createFilter(e){const{column:t,source:s,beans:{colFilter:i}}=this,n=i.getFilterUiForDisplay(t)??null;this.wrapper=n,n==null||n.then(o=>{var c;if(!o)return;const{isHandler:r,comp:a}=o;let l;if(r){const d=!!this.enableGlobalButtonCheck,h=this.createBean(new Kz(t,o,i,i.updateModel.bind(i),d&&i.isGlobalButtons,d));this.comp=h,l=h.getGui()}else l=a.getGui(),pe(l)||oe(69,{guiFromFilter:l});this.appendChild(l),e?this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:s,eGui:this.getGui()}):(c=a.afterGuiAttached)==null||c.call(a,this.afterGuiAttachedParams)})}onFilterDestroyed(e){const{source:t,column:s}=e;(t==="api"||t==="paramsUpdated")&&s.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(Ks(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){var e;(e=this.beans.colFilter)==null||e.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},RR={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},ER=["january","february","march","april","may","june","july","august","september","october","november","december"];function Xz(e,t){return e==null?-1:t==null?1:Number.parseFloat(e)-Number.parseFloat(t)}function AR(e){return e instanceof Date&&!isNaN(e.getTime())}var Uy={number:()=>{},boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>t===!1,numberOfInputs:0}]}),date:()=>({isValidDate:AR}),dateString:({dataTypeDefinition:e})=>({comparator:(t,s)=>{const i=e.dateParser(s);return s==null||i<t?-1:i>t?1:0},isValidDate:t=>typeof t=="string"&&AR(e.dateParser(t))}),dateTime:e=>Uy.date(e),dateTimeString:e=>Uy.dateString(e),object:()=>{},text:()=>{}},jy={number:()=>({comparator:Xz}),boolean:({t:e})=>({valueFormatter:t=>pe(t.value)?e(String(t.value),t.value?"True":"False"):e("blanks","(Blanks)")}),date:({formatValue:e,t})=>({valueFormatter:s=>{const i=e(s);return pe(i)?i:t("blanks","(Blanks)")},treeList:!0,treeListFormatter:(s,i)=>{if(s==="NaN")return t("invalidDate","Invalid Date");if(i===1&&s!=null){const n=ER[Number(s)-1];return t(n,RR[n])}return s??t("blanks","(Blanks)")},treeListPathGetter:s=>Kp(s,!1)}),dateString:({formatValue:e,dataTypeDefinition:t,t:s})=>({valueFormatter:i=>{const n=e(i);return pe(n)?n:s("blanks","(Blanks)")},treeList:!0,treeListPathGetter:i=>Kp(t.dateParser(i??void 0),!1),treeListFormatter:(i,n)=>{if(n===1&&i!=null){const o=ER[Number(i)-1];return s(o,RR[o])}return i??s("blanks","(Blanks)")}}),dateTime:e=>{const t=jy.date(e);return t.treeListPathGetter=Kp,t},dateTimeString(e){const t=e.dataTypeDefinition.dateParser,s=jy.dateString(e);return s.treeListPathGetter=i=>Kp(t(i??void 0)),s},object:({formatValue:e,t})=>({valueFormatter:s=>{const i=e(s);return pe(i)?i:t("blanks","(Blanks)")}}),text:()=>{}};function Qz(e,t,s,i,n,o,r){let a=t,l=s;const c=e==="agSetColumnFilter";!l&&i.baseDataType==="object"&&!c&&(l=({column:f,node:p})=>n({column:f,node:p,value:o.valueSvc.getValue(f,p)}));const h=(c?jy:Uy)[i.baseDataType],u=h({dataTypeDefinition:i,formatValue:n,t:r});return a=typeof t=="object"?{...u,...t}:u,{filterParams:a,filterValueGetter:l}}var Jz={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},Zz={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};function eW(e,t=!1){return(t?Zz:Jz)[e??"text"]}var zD="ag-resizer-wrapper",ca=(e,t)=>({tag:"div",ref:`${e}Resizer`,cls:`ag-resizer ag-resizer-${t}`}),tW={tag:"div",cls:zD,children:[ca("eTopLeft","topLeft"),ca("eTop","top"),ca("eTopRight","topRight"),ca("eRight","right"),ca("eBottomRight","bottomRight"),ca("eBottom","bottom"),ca("eBottomLeft","bottomLeft"),ca("eLeft","left")]},sW=class extends ${constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){const{clientHeight:t,clientWidth:s}=this.offsetParent,i=s/2-this.getWidth()/2,n=t/2-this.getHeight()/2;this.offsetElement(i,n,e)}initialisePosition(e){if(this.positioned)return;const{centered:t,forcePopupParentAsOffsetParent:s,minWidth:i,width:n,minHeight:o,height:r,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let c=0,d=0;const h=Xo(this.element);if(h){const u=this.findBoundaryElement(),f=window.getComputedStyle(u);if(f.minWidth!=null){const p=u.offsetWidth-this.element.offsetWidth;d=Number.parseInt(f.minWidth,10)-p}if(f.minHeight!=null){const p=u.offsetHeight-this.element.offsetHeight;c=Number.parseInt(f.minHeight,10)-p}}if(this.minHeight=o||c,this.minWidth=i||d,n&&this.setWidth(n),r&&this.setHeight(r),(!n||!r)&&this.refreshSize(),t)this.center(e);else if(a||l)this.offsetElement(a,l,e);else if(h&&s){let u=this.boundaryEl,f=!0;if(u||(u=this.findBoundaryElement(),f=!1),u){const p=Number.parseFloat(u.style.top),m=Number.parseFloat(u.style.left);f?this.offsetElement(isNaN(m)?0:m,isNaN(p)?0:p,e):this.setPosition(m,p)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){var i,n;if(!this.config.popup||e===this.movable)return;this.movable=e;const s=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?((i=this.dragSvc)==null||i.addDragSource(s),this.moveElementDragListener=s):((n=this.dragSvc)==null||n.removeDragSource(s),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{var r;const i=!!e[t],n=this.getResizerElement(t),o={dragStartPixels:0,eElement:n,onDragStart:a=>this.onResizeStart(a,t),onDragging:this.onResize.bind(this),onDragStop:a=>this.onResizeEnd(a,t)};(i||!this.isAlive()&&!i)&&(i?((r=this.dragSvc)==null||r.addDragSource(o),this.resizeListeners.push(o),n.style.pointerEvents="all"):n.style.pointerEvents="none",this.resizable[t]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,s=this.element;let i=!1;if(typeof e=="string"&&e.includes("%"))Cg(s,e),e=FT(s),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const n=this.getAvailableHeight();n&&e>n&&(e=n)}this.getHeight()!==e&&(i?(s.style.maxHeight="unset",s.style.minHeight="unset"):t?Cg(s,e):(s.style.height=`${e}px`,s.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:Number.parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:s}=this.offsetParent;if(!s)return null;const i=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:i.top,r=e?0:n.top;let a=0;if(t){const c=this.element.parentElement;if(c){const{bottom:d}=c.getBoundingClientRect();a=d-i.bottom}}return s+r-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:s}=this.config;let i=!1;if(typeof e=="string"&&e.includes("%"))Go(t,e),e=fv(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:n}=this.offsetParent,o=s?this.position.x:this.element.getBoundingClientRect().left;n&&e+o>n&&(e=n-o)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Go(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:Number.parseFloat(e)))}offsetElement(e=0,t=0,s){var o;const{forcePopupParentAsOffsetParent:i}=this.config,n=i?this.boundaryEl:this.element;n&&((o=this.popupSvc)==null||o.positionPopup({ePopup:n,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t}),postProcessCallback:s}),this.setPosition(Number.parseFloat(n.style.left),Number.parseFloat(n.style.top)))}constrainSizeToAvailableHeight(e){var s,i;if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};e&&this.popupSvc?((s=this.resizeObserverSubscriber)==null||s.call(this),this.resizeObserverSubscriber=Cl(this.beans,(i=this.popupSvc)==null?void 0:i.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:s,isTop:i,anywhereWithin:n,topBuffer:o}=e,r=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!s,!!n,r)?0:r,c=this.shouldSkipY(t,!!i,o,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,s,i){const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:n.left;let l=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=r.right;return l?!0:(t?l=i<0&&e.clientX>a+o.left||i>0&&e.clientX<a+o.left:s?l=i<0&&e.clientX>r.right||i>0&&e.clientX<a+o.left:l=i<0&&e.clientX>r.right||i>0&&e.clientX<r.right,l)}shouldSkipY(e,t,s=0,i){const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:n.top;let l=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=r.bottom;return l?!0:(t?l=i<0&&e.clientY>a+o.top+s||i>0&&e.clientY<a+o.top:l=i<0&&e.clientY>r.bottom||i>0&&e.clientY<r.bottom,l)}createResizeMap(){const e=t=>({element:this.element.querySelector(`[data-ref=${t}Resizer]`)});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;const e=this.element;e&&(e.appendChild(ls(tW)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${zD}`);e==null||e.remove(),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:s,forcePopupParentAsOffsetParent:i}=this.config;!s&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(s=>!s.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,s=0;for(let i=0;i<e.length;i++){const n=e[i],o=!!n.style.flex&&n.style.flex!=="0 0 auto";if(n===this.element)continue;let r=this.minHeight||0,a=this.minWidth||0;if(o){const l=window.getComputedStyle(n);l.minHeight&&(r=Number.parseInt(l.minHeight,10)),l.minWidth&&(a=Number.parseInt(l.minWidth,10))}else r=n.offsetHeight,a=n.offsetWidth;t+=r,s+=a}return{height:t,width:s}}applySizeToSiblings(e){let t=null;const s=this.getSiblings();if(s){for(let i=0;i<s.length;i++){const n=s[i];n!==t&&(e?n.style.height=`${n.offsetHeight}px`:n.style.width=`${n.offsetWidth}px`,n.style.flex="0 0 auto",n===this.element&&(t=s[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:s}=this.config,{isTop:i,isRight:n,isBottom:o,isLeft:r}=this.currentResizer,a=n||r,l=o||i,{movementX:c,movementY:d}=this.calculateMouseMovement({e,isLeft:r,isTop:i}),h=this.position.x,u=this.position.y;let f=0,p=0;if(a&&c){const m=r?-1:1,v=this.getWidth(),C=v+c*m;let b=!1;r&&(f=v-C,(h+f<=0||C<=this.minWidth)&&(b=!0,f=0)),b||this.setWidth(C)}if(l&&d){const m=i?-1:1,v=this.getHeight(),C=v+d*m;let b=!1;i?(p=v-C,(u+p<=0||C<=this.minHeight)&&(b=!0,p=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&v<C&&this.getMinSizeOfSiblings().height+C>this.element.parentElement.offsetHeight&&(b=!0),b||this.setHeight(C)}this.updateDragStartPosition(e.clientX,e.clientY),((t||s)&&f||p)&&this.offsetElement(h+f,u+p)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:s}=this.position;let i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());const{movementX:n,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+n,s+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){var e;for(;this.resizeListeners.length;){const t=this.resizeListeners.pop();(e=this.dragSvc)==null||e.removeDragSource(t)}}destroy(){var e;super.destroy(),this.moveElementDragListener&&((e=this.dragSvc)==null||e.removeDragSource(this.moveElementDragListener)),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},WD="__ag_Grid_Stop_Propagation";function id(e){e[WD]=!0}function Ur(e){return e[WD]===!0}var iW="ag-focus-managed",Fu=class extends ${constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:s=>{if(s.defaultPrevented)return;const i=md(this.beans,this.eFocusable,!1,s.shiftKey);i&&(i.focus(),s.preventDefault())},...t}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:s}}=this;e.classList.add(iW),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),s&&this.addManagedElementListeners(e,{focusout:s})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||Ur(t))return;const{callbacks:s}=this;if(s.shouldStopEventPropagation(t)){id(t);return}t.key===H.TAB?s.onTabKeyDown(t):s.handleKeyDown&&s.handleKeyDown(t)}})}},nW=class extends Et{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){const e={tag:"div",cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new Fu(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new sW(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){const t=e;this.setParams(t),this.setModelIntoUi(t.state.model,!0).then(()=>this.updateUiVisibility())}refresh(e){const t=e,s=this.params;this.params=t,t.source==="colDef"&&this.updateParams(t,s);const n=t.state,o=this.state;return this.state=n,(n.model!==o.model||n.state!==o.state)&&this.setModelIntoUi(n.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=FC(e),this.setupApplyDebounced()}doesFilterPass(e){oe(283);const{getHandler:t,model:s,column:i}=this.params;return t().doesFilterPass({...e,model:s,handlerParams:this.beans.colFilter.getHandlerParams(i)})}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return oe(284),this.params.model!=null}setupApplyDebounced(){const e=S0(this.params,this.defaultDebounceMs),t=Us(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return oe(285),this.params.model}setModel(e){oe(286);const{beans:t,params:s}=this;return t.colFilter.setModelForColumnLegacy(s.column,e)}applyModel(e="api"){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){const{params:t,state:s}=this,i=!this.areModelsEqual(t.model,s.model);return i&&t.onAction("apply",e),i}onNewRowsLoaded(){}onUiChanged(e,t=!1){this.updateUiVisibility();const s=this.getModelFromUi(),i={model:s,state:this.getState(),valid:this.canApply(s)};this.state=i;const n=this.params;n.onStateChange(i),n.onUiChange(this.getUiChangeEventParams()),this.gos.get("enableFilterHandlers")||this.eventSvc.dispatchEvent({type:"filterModified",column:n.column,filterInstance:this}),e??(e=this.applyActive?void 0:"debounce"),e==="immediately"?this.doApplyModel({afterFloatingFilter:t,afterDataChange:!1}):e==="debounce"&&this.applyDebounced()}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=e==null?void 0:e.container,this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:s}=this;if(!t)return;const i=e==="floatingFilter"||e==="columnFilter";i?(t.restoreLastSize(),t.setResizable(s.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(i)}afterGuiDetached(){var e;this.checkApplyDebounce(),(e=this.positionableFeature)==null||e.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e){return wa(this,e)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||e==null&&t==null?!0:e==null||t==null?!1:this.areNonNullModelsEqual(e,t)}};function $D(e){return!!e.operator}function oW(e,t,s){if(t==null)return null;let i=null;const{compName:n,jsComp:o,fwComp:r}=vD(e,t);return n?i={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[n]:o==null&&r==null&&t.filter===!0&&(i=s()),i}var Un={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},x0=class extends ${constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},s=t.autoHeight?Un.AUTO_HEIGHT:t.print?Un.PRINT:Un.NORMAL;this.view.updateLayoutClasses(s,t)}},da="Viewport",FR="fakeVScrollComp",mw=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],PR=100,vw=150,rW=class extends ${constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=Us(this,()=>this.lastScrollSource[1]=null,vw),this.resetLastVScrollDebounced=Us(this,()=>this.lastScrollSource[0]=null,vw)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,s=>{this.centerRowsCtrl=s.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,da)});for(const e of mw){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),s=t?Us(this,this.onVScroll.bind(this,da),PR):this.onVScroll.bind(this,da),i=t?Us(this,this.onVScroll.bind(this,FR),PR):this.onVScroll.bind(this,FR);this.addManagedElementListeners(this.eBodyViewport,{scroll:s}),this.registerScrollPartner(e,i)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...mw,da]){if(this.lastScrollSource[1]===t)continue;const s=this.getViewportForSource(t);mv(s,e,this.enableRtl)}}getViewportForSource(e){return e===da?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:s}=t;if(this.shouldBlockScrollUpdate(1,s,!0))return;const i=pv(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(i),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===da?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:s}=this;s==null||s.setScrollTop(t),this.nextScrollTop=t,e===da?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,s!=null&&s.active?s.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},vw)}shouldBlockScrollUpdate(e,t,s=!1){return s&&!jc()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=ZS(this.eBodyViewport),{scrollHeight:s}=this.eBodyViewport;return e<0||e+t>s}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:s}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>s}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const e=this.scrollLeft;let t=!1;for(const s of mw)if(this.getViewportForSource(s).scrollLeft!==e){t=!0;break}t&&this.onHScroll(da)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:i:e=Math.min(Math.max(e,0),i)),mv(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:s,lastScrollTop:i}=this;return{top:i,bottom:i+s}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:s}=this.beans,i=s.getRowCount();let n=-1;for(let o=0;o<i;o++){const r=s.getRow(o);if(typeof e=="function"){if(r&&e(r)){n=o;break}}else if(e===r||e===r.data){n=o;break}}n>=0&&this.ensureIndexVisible(n,t)}ensureIndexVisible(e,t,s=0){if(qs(this.gos,"print"))return;const{rowModel:i}=this.beans,n=i.getRowCount();if(typeof e!="number"||e<0||e>=n){oe(88,{index:e});return}this.clearRetryListeners();const{frameworkOverrides:o,pageBounds:r,rowContainerHeight:a,rowRenderer:l}=this.beans;o.wrapIncoming(()=>{var p,m;const c=this.ctrlsSvc.getGridBodyCtrl(),d=i.getRow(e);let h,u,f=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:v,stickyBottomHeight:C}=c,b=d.rowTop,y=d.rowHeight,S=r.getPixelOffset(),R=d.rowTop-S,A=R+d.rowHeight,F=this.getVScrollPosition(),T=a.divStretchOffset,k=F.top+T,N=F.bottom+T,I=N-k,O=a.getScrollPositionForPixel(R),V=a.getScrollPositionForPixel(A-I),ee=Math.min((O+V)/2,R),G=k+v>R,ne=N-C<A;let te=null;t==="top"?te=O-v:t==="bottom"?te=V+C:t==="middle"?te=ee:G?te=O-v:ne&&(V-O>I?te=O-v:te=V+C),te!==null&&(this.setVerticalScrollPosition(te),l.redraw({afterScroll:!0})),h=b!==d.rowTop||y!==d.rowHeight,u=v!==c.stickyTopHeight||C!==c.stickyBottomHeight,f++}while((h||u)&&f<10);if((p=this.animationFrameSvc)==null||p.flushAllFrames(),s<10&&(d!=null&&d.stub||!((m=this.beans.rowAutoHeight)!=null&&m.areRowsMeasured()))){const v=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const C=this.getVScrollPosition().top;v!==C&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(e>=i.getRowCount())&&this.ensureIndexVisible(e,t,s+1)}})}})}clearRetryListeners(){for(const e of this.clearRetryListenerFncs)e();this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){const{colModel:s,frameworkOverrides:i}=this.beans,n=s.getCol(e);if(!n||n.isPinned()||!this.visibleCols.isColDisplayed(n))return;const o=this.getPositionedHorizontalScroll(n,t);i.wrapIncoming(()=>{var r;o!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(o),this.centerRowsCtrl.onHorizontalViewportChanged(),(r=this.animationFrameSvc)==null||r.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:s,columnAfterEnd:i}=this.isColumnOutsideViewport(e),n=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let a=(r?s:i)||n,l=r?i:s;t!=="auto"&&(a=t==="start",l=t==="end");const c=t==="middle";if(a||l||c){const{colLeft:d,colMiddle:h,colRight:u}=this.getColumnBounds(e);return c?h-o/2:a?r?u:d:r?d-o:u-o}return null}isColumnOutsideViewport(e){const{start:t,end:s}=this.getViewportBounds(),{colLeft:i,colRight:n}=this.getColumnBounds(e),o=this.enableRtl,r=o?t>n:s<n,a=o?s<i:t>i;return{columnBeforeStart:r,columnAfterEnd:a}}getColumnBounds(e){const t=this.enableRtl,s=this.visibleCols.bodyWidth,i=e.getActualWidth(),n=e.getLeft(),o=t?-1:1,r=t?s-n:n,a=r+i*o,l=r+i/2*o;return{colLeft:r,colMiddle:l,colRight:a}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),s=t,i=e+t;return{start:s,end:i,width:e}}},R0=class extends ${constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=qs(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:s}=this.beans,i=t.bodyWidth,n=t.getColsLeftWidth(),o=t.getDisplayedColumnsRightWidth();let r;e?r=i+n+o:(r=i,this.addSpacer&&(this.gos.get("enableRtl")?n:o)===0&&s.verticalScrollShowing&&(r+=s.getScrollbarWidth())),this.callback(r)}},aW=class extends ${constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:s}=this,i=()=>{ia(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(i),s.registerBodyViewportResizeListener(i)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;e==null||e.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const s=this.centerContainerCtrl.getCenterWidth();s!==this.centerWidth&&(this.centerWidth=s,t==null||t.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.eBodyViewport,t=ZS(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function jm(e,t,s,i){var o;const n=(o=t.getColDef().cellRendererParams)==null?void 0:o.suppressMouseEventHandling;return UD(e,t,s,i,n)}function lW(e,t,s,i){const n=t==null?void 0:t.suppressMouseEventHandling;return UD(e,void 0,s,i,n)}function UD(e,t,s,i,n){return n?n(Be(e,{column:t,node:s,event:i})):!1}function jD(e,t,s){let i=t;for(;i;){const n=KT(e,i,s);if(n)return n;i=i.parentElement}return null}var Tv="cellCtrl";function E0(e,t){return jD(e,t,Tv)}var Dv="renderedRow";function cW(e,t){return jD(e,t,Dv)}function Ky(e,t,s,i,n){const o=i?i.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const r=Be(e,{event:t,editing:n,column:i,node:s,data:s.data,colDef:i.getColDef()});return!!(o&&o(r))}function dW(e){const{pinnedRowModel:t,rowModel:s}=e,[i,n]=[(t==null?void 0:t.isEmpty("top"))??!0,(t==null?void 0:t.isEmpty("bottom"))??!0],o=i?null:"top";let r,a;n?(r=null,a=s.getRowCount()-1):(r="bottom",a=(t==null?void 0:t.getPinnedBottomRowCount())??-1);const{visibleCols:l,rangeSvc:c}=e,d=l.allCols;!c||!(d!=null&&d.length)||c.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:a,rowEndPinned:r})}var hW=65,uW=67,gW=86,fW=68,pW=90,mW=89;function vW(e){const{keyCode:t}=e;let s;switch(t){case hW:s=H.A;break;case uW:s=H.C;break;case gW:s=H.V;break;case fW:s=H.D;break;case pW:s=H.Z;break;case mW:s=H.Y;break;default:s=e.code}return s}var CW=class extends ${constructor(e){super(),this.element=e}postConstruct(){var e;this.addKeyboardListeners(),this.addMouseListeners(),(e=this.beans.touchSvc)==null||e.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){const t=["dblclick","contextmenu","mouseover","mouseout","click",IT("touchstart")?"touchstart":"mousedown"];for(const s of t){const i=this.processMouseEvent.bind(this,s);this.addManagedElementListeners(this.element,{[s]:i})}}processMouseEvent(e,t){var n;if(!Hg(this.beans,t)||Ur(t))return;const{cellCtrl:s,rowCtrl:i}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(s!=null&&s.column&&s.dispatchCellContextMenuEvent(t),(n=this.beans.contextMenuSvc)==null||n.handleContextMenuMouseEvent(t,void 0,i,s)):(s&&s.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:E0(t,e),rowCtrl:cW(t,e)}}processKeyboardEvent(e,t){const{cellCtrl:s,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(s?this.processCellKeyboardEvent(s,e,t):i!=null&&i.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,s){var o,r;const i=((o=this.editSvc)==null?void 0:o.isEditing(e,{withOpenEditor:!0}))??!1;!Ky(this.gos,s,e.rowNode,e.column,i)&&t==="keydown"&&(!i&&((r=this.beans.navigation)!=null&&r.handlePageScrollingKey(s))||e.onKeyDown(s),this.doGridOperations(s,i),SD(s)&&e.processCharacter(s)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(s,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,s){const{rowNode:i}=e,{focusSvc:n,navigation:o}=this.beans,r=n.getFocusedCell(),a=r==null?void 0:r.column;if(!Ky(this.gos,s,i,a,!1)){const c=s.key;if(t==="keydown")switch(c){case H.PAGE_HOME:case H.PAGE_END:case H.PAGE_UP:case H.PAGE_DOWN:o==null||o.handlePageScrollingKey(s,!0);break;case H.LEFT:case H.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case H.UP:case H.DOWN:e.onKeyboardNavigate(s);break;case H.TAB:e.onTabKeyDown(s);break}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",s))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!Hg(this.beans,e))return;const s=vW(e),{clipboardSvc:i,undoRedo:n}=this.beans;if(s===H.A)return this.onCtrlAndA(e);if(s===H.C)return this.onCtrlAndC(i,e);if(s===H.D)return this.onCtrlAndD(i,e);if(s===H.V)return this.onCtrlAndV(i,e);if(s===H.X)return this.onCtrlAndX(i,e);if(s===H.Y)return this.onCtrlAndY(n);if(s===H.Z)return this.onCtrlAndZ(n,e)}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:s,selectionSvc:i},gos:n}=this;s&&Jr(n)&&!hG(n)&&t.isRowsToRender()?dW(this.beans):i&&i.selectAllRowNodes({source:"keyboardSelectAll",selectAll:ZT(n)}),e.preventDefault()}onCtrlAndC(e,t){var i;if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:s}=this.getControlsForEventTarget(t.target);(i=this.editSvc)!=null&&i.isEditing(s,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){var i;if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:s}=this.getControlsForEventTarget(t.target);(i=this.editSvc)!=null&&i.isEditing(s,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){var i;const{cellCtrl:s}=this.getControlsForEventTarget(t.target);(i=this.editSvc)!=null&&i.isEditing(s,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e==null||e.redo("ui")}},KD=class extends ${constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,s=t!=null?`${t}px`:"";this.eContainer.style.height=s,this.eViewport&&(this.eViewport.style.height=s)}},Xp=e=>e.topRowCtrls,Qp=e=>e.getStickyTopRowCtrls(),Jp=e=>e.getStickyBottomRowCtrls(),Zp=e=>e.bottomRowCtrls,em=e=>e.allRowCtrls,Cw=e=>e.getCtrls("top"),ww=e=>e.getCtrls("center"),bw=e=>e.getCtrls("bottom"),wW={center:{type:"center",name:"center-cols",getRowCtrls:em,getSpannedRowCtrls:ww},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:em,getSpannedRowCtrls:ww},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:em,getSpannedRowCtrls:ww},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:em},topCenter:{type:"center",name:"floating-top",getRowCtrls:Xp,getSpannedRowCtrls:Cw},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Xp,getSpannedRowCtrls:Cw},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Xp,getSpannedRowCtrls:Cw},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:Xp},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:Qp},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Qp},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Qp},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:Qp},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:Jp},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Jp},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Jp},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:Jp},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:Zp,getSpannedRowCtrls:bw},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Zp,getSpannedRowCtrls:bw},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Zp,getSpannedRowCtrls:bw},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:Zp}};function qD(e){return`ag-${Tp(e).name}-viewport`}function Km(e){const t=Tp(e);return t.container??`ag-${t.name}-container`}function bW(e){return`ag-${Tp(e).name}-spanned-cells-container`}function Tp(e){return wW[e]}var yW=["topCenter","topLeft","topRight"],SW=["bottomCenter","bottomLeft","bottomRight"],xW=["center","left","right"],RW=["center","left","right","fullWidth"],EW=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],AW=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],FW=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],YD=["stickyTopCenter","stickyTopLeft","stickyTopRight"],XD=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],PW=[...YD,"stickyTopFullWidth",...XD,"stickyBottomFullWidth"],TW=[...yW,...SW,...xW,...YD,...XD],DW=class extends ${constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=Tp(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new aW(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,s,i){this.comp=e,this.eContainer=t,this.eSpannedContainer=s,this.eViewport=i,this.createManagedBean(new CW(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:n,rangeSvc:o}=this.beans,r=()=>this.onPinnedWidthChanged();this.forContainers(AW,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(n==null?void 0:n.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:r})}),this.forContainers(FW,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(n==null?void 0:n.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:r})}),this.forContainers(RW,()=>this.createManagedBean(new KD(this.eContainer,this.name==="center"?i:void 0))),o&&this.forContainers(TW,()=>this.createManagedBean(o.createDragListenerFeature(this.eContainer))),this.forContainers(EW,()=>this.createManagedBean(new R0(a=>this.comp.setContainerWidth(`${a}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,s=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:s,displayedColumnsWidthChanged:s,displayedRowsChanged:i=>this.onDisplayedRowsChanged(i.afterScroll)}),s(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const i=this.options.getSpannedRowCtrls(e);i&&this.comp.setSpannedRowCtrls(i,!1)}})}listenOnDomOrder(){if(PW.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const s=this.gos.get("ensureDomOrder"),i=qs(this.gos,"print");this.comp.setDomOrder(s||i)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=s=>{e.dragging&&s.cancelable&&s.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),s=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,s,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return Ng(this.eViewport)}getCenterViewportScrollLeft(){return pv(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=Cl(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return TT(this.eViewport)}getViewportScrollLeft(){return pv(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||t0(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){mv(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const s=qs(this.gos,"print"),n=this.gos.get("embedFullWidthRows")||s,o=t.filter(r=>{const a=r.isFullWidth();return this.options.fullWidth?!n&&a:n||!a});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},QD="ag-force-vertical-scroll",_W="ag-selectable",MW="ag-column-moving",kW=class extends ${constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,s,i,n,o,r){var a,l;this.comp=e,this.eGridBody=t,this.eBodyViewport=s,this.eTop=i,this.eBottom=n,this.eStickyTop=o,this.eStickyBottom=r,this.eCenterColsViewport=s.querySelector(`.${qD("center")}`),this.eFullWidthContainer=s.querySelector(`.${Km("fullWidth")}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${Km("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=r.querySelector(`.${Km("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",c=>this.setCellTextSelection(c.currentValue)),this.createManagedBean(new x0(this.comp)),this.scrollFeature=this.createManagedBean(new rW(s)),(a=this.beans.rowDragSvc)==null||a.setupRowDrag(s,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,s,n,o,r]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),(l=this.filterManager)==null||l.setupAdvFilterHeaderComp(i),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),s=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:s,rowResizeEnded:s}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t=e.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const s=t&&e.getScrollbarWidth()||0,i=yD()?16:0,n=`calc(100% + ${s+i}px)`;ia(this.beans,()=>this.comp.setBodyViewportWidth(n)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t}=this;let s=this.gos.get("treeData");if(!s){const i=t.isPivotMode();s=(e?e.columns.length:0)>=(i?2:1)}this.comp.setGridRootRole(s?"treegrid":"grid")}addFocusListeners(e){for(const t of e)this.addManagedElementListeners(t,{focusin:s=>{const{target:i}=s,n=Wc(i,"ag-root",t);t.classList.toggle("ag-has-focus",!n)},focusout:s=>{const{target:i,relatedTarget:n}=s,o=t.contains(n),r=Wc(n,"ag-root",t);Wc(i,"ag-root",t)||(!o||r)&&t.classList.remove("ag-has-focus")}})}setColumnMovingCss(e){this.comp.setColumnMovingCss(MW,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(_W,e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){var e;(e=this.beans.editSvc)==null||e.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){var n,o;const e=(((n=this.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:n.getRowCount())??0)+(((o=this.filterManager)==null?void 0:o.getHeaderRowCount())??0),{rowModel:t}=this.beans,s=t.isLastRowIndexKnown()?t.getRowCount():-1,i=s===-1?-1:e+s;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?QD:null,s=qs(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||s&&MT(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let s=t.sizesMeasured;const i=()=>{const n=s&&qd(this.gos)&&!e.stretching,o=n?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(o,n)};i(),this.addManagedEventListeners({heightScaleChanged:i}),this.addManagedPropertyListener("animateRows",i),this.addManagedEventListeners({gridStylesChanged:()=>{!s&&t.sizesMeasured&&(s=!0,i())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:s,eTop:i,eBottom:n,beans:{popupSvc:o,touchSvc:r}}=this,a=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:a}),r==null||r.mockBodyContextMenu(this,a),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,o)});const l=this.onStickyWheel.bind(this);for(const d of[t,s,i,n])this.addManagedElementListeners(d,{wheel:l});const c=this.onHorizontalWheel.bind(this);for(const d of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(d).eContainer,{wheel:c});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:s,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(s))&&Hg(this.beans,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){const{deltaX:t,deltaY:s,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(s))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:s}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||s})}onBodyViewportContextMenu(e,t,s){var n;if(!e&&!s)return;this.gos.get("preventDefaultOnContextMenu")&&(e||s).preventDefault();const{target:i}=e||t;(i===this.eBodyViewport||i===this.ctrlsSvc.get("center").eViewport)&&((n=this.beans.contextMenuSvc)==null||n.showContextMenu({mouseEvent:e,touchEvent:s,value:null,anchorToElement:this.eGridBody,source:"ui"}))}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e!=null&&e.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,s=e==null?void 0:e.getPinnedTopTotalHeight(),i=e==null?void 0:e.getPinnedBottomTotalHeight(),n=t.getPinnedRowBorderWidth(),o=t.getRowBorderWidth(),r=n-o,a=s?r+s:0,l=i?r+i:0;this.comp.setTopHeight(a),this.comp.setBottomHeight(l),this.comp.setTopInvisible(a<=0),this.comp.setBottomInvisible(l<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){var n,o;const t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(((n=this.filterManager)==null?void 0:n.getHeaderHeight())??0),s=((o=this.pinnedRowModel)==null?void 0:o.getPinnedTopTotalHeight())??0;let i=0;t>0&&(i+=t),s>0&&(i+=s),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:s}=this,i=(e==null?void 0:e.getPinnedBottomTotalHeight())??0,o=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,r=i+o;s.setStickyBottomBottom(`${r}px`)}};function IW(e,t){var s;return((s=E0(e,t.target))==null?void 0:s.getFocusedCellPosition())??null}function TR(e,t){const s=qs(e.gos,"normal"),i=t;let n,o;i.clientX!=null||i.clientY!=null?(n=i.clientX,o=i.clientY):(n=i.x,o=i.y);const{pageFirstPixel:r}=e.pageBounds.getCurrentPagePixelRange();if(o+=r,s){const a=e.ctrlsSvc.getScrollFeature(),l=a.getVScrollPosition(),c=a.getHScrollPosition();n+=c.left,o+=l.top}return{x:n,y:o}}var JD=class extends Et{constructor(e,t){super(),this.direction=t,this.eViewport=ge,this.eContainer=ge,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",wD()||jc())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=yD(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),s=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:s,touchend:s})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),ia(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;NB(this,()=>Xo(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},LW={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},OW=class extends JD{constructor(){super(LW,"horizontal"),this.eLeftSpacer=ge,this.eRightSpacer=ge,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new R0(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){var t;if(!this.invisibleScrollbar)return;const e=((t=this.beans.pinnedRowModel)==null?void 0:t.getPinnedBottomTotalHeight())??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const s=!this.enableRtl&&e,i=this.scrollVisibleSvc.getScrollbarWidth();s&&(t+=i),Go(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let n=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(n+=i),Go(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=i)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,s=this.gos.get("suppressHorizontalScroll"),i=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,o=s?0:i===0&&t?16:i,r=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),Cg(this.getGui(),o),Cg(this.eViewport,o),Cg(this.eContainer,o),o||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(r,100):r()}getScrollPosition(){return pv(this.eViewport,this.enableRtl)}setScrollPosition(e){Xo(this.eViewport)||this.attemptSettingScrollPosition(e),mv(this.eViewport,e,this.enableRtl)}},NW={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:OW},HW={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},BW=class extends JD{constructor(){super(HW,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new KD(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,s=this.invisibleScrollbar,i=t&&e.getScrollbarWidth()||0,n=i===0&&s?16:i;this.toggleCss("ag-scrollbar-invisible",s),Go(this.getGui(),n),Go(this.eViewport,n),Go(this.eContainer,n),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const s=e.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),n=s.scrollTop;i!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!Xo(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}},GW={selector:"AG-FAKE-VERTICAL-SCROLL",component:BW},VW="ag-column-first",zW="ag-column-last";function ZD(e,t,s,i){return Wt(e)?[]:$W(e.headerClass,e,t,s,i)}function e_(e,t,s){e.toggleCss(VW,s.isColAtEdge(t,"first")),e.toggleCss(zW,s.isColAtEdge(t,"last"))}function WW(e,t,s,i){return Be(t,{colDef:e,column:s,columnGroup:i})}function $W(e,t,s,i,n){if(Wt(e))return[];let o;if(typeof e=="function"){const r=WW(t,s,i,n);o=e(r)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}function UW(e,t,s){t.addManagedElementListeners(s,{keydown:i=>{if(!i.defaultPrevented&&i.key===H.TAB){const n=i.shiftKey;md(e,s,!1,n)||mu(e,n)&&i.preventDefault()}}})}function jW(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function Kc(e){var t;return e.gos.get("suppressHeaderFocus")||!!((t=e.overlays)!=null&&t.isExclusive())}function PC(e){var t;return e.gos.get("suppressCellFocus")||!!((t=e.overlays)!=null&&t.isExclusive())}function mu(e,t,s=!1){const i=e.ctrlsSvc.get("gridCtrl");return!s&&i.focusNextInnerContainer(t)?!0:((s||!t&&!i.isDetailGrid())&&i.forceFocusOutOfContainer(t),!1)}function Ho(e){var t;return((t=e.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:t.getRowCount())??0}function A0(e){const t=[],s=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const i of s){if(!i)continue;const n=i.getGroupRowCount()||0;for(let o=0;o<n;o++){const r=i.getGroupRowCtrlAtIndex(o),a=t[o];if(r){const l=KW(e,r);(a==null||l>a)&&(t[o]=l)}}}return t}function KW(e,t){let i=e.colModel.isPivotMode()?YW(e):s_(e);const n=t.getHeaderCellCtrls();for(const o of n){const{column:r}=o,a=r.getAutoHeaderHeight();a!=null&&a>i&&r.isAutoHeaderHeight()&&(i=a)}return i}function F0(e){let s=e.colModel.isPivotMode()?qW(e):Dp(e);return e.colModel.forAllCols(i=>{const n=i.getAutoHeaderHeight();n!=null&&n>s&&i.isAutoHeaderHeight()&&(s=n)}),s}function Dp(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function t_(e){return e.gos.get("floatingFiltersHeight")??Dp(e)}function s_(e){return e.gos.get("groupHeaderHeight")??Dp(e)}function qW(e){return e.gos.get("pivotHeaderHeight")??Dp(e)}function YW(e){return e.gos.get("pivotGroupHeaderHeight")??s_(e)}function XW(e,t){return e.headerRowIndex===t.headerRowIndex&&e.column===t.column}var QW=class extends ${setComp(e,t,s){this.comp=e,this.eGui=t;const{beans:i}=this,{headerNavigation:n,touchSvc:o,ctrlsSvc:r}=i;n&&this.createManagedBean(new Fu(s,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,i),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,i)}),this.onPivotModeChanged(i),this.setupHeaderHeight();const a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),o==null||o.mockHeaderContextMenu(this,a),r.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>ia(this.beans,()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){var o;const{beans:e}=this;let t=0;const s=A0(e).reduce((r,a)=>r+a,0),i=F0(e);if((o=e.filterManager)!=null&&o.hasFloatingFilters()&&(t+=t_(e)),t+=s,t+=i,this.headerHeight===t)return;this.headerHeight=t;const n=`${t+1}px`;this.comp.setHeightAndMinHeight(n),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const s=e.visibleCols.allCols.some(i=>i.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",s)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),s=e.shiftKey,i=s!==t?"LEFT":"RIGHT",{beans:n}=this,{headerNavigation:o,focusSvc:r}=n;(o.navigateHorizontally(i,!0,e)||!s&&r.focusOverlay(!1)||mu(n,s,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:s}=this.beans;switch(e.key){case H.LEFT:t="LEFT";case H.RIGHT:{pe(t)||(t="RIGHT"),s.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case H.UP:t="UP";case H.DOWN:{pe(t)||(t="DOWN"),s.navigateVertically(t,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:s,beans:i}=this;!t&&s.contains(qt(i))||s.contains(t)||(i.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,s){var r;const{menuSvc:i,ctrlsSvc:n}=this.beans;if(!e&&!s||!(i!=null&&i.isHeaderContextMenuEnabled()))return;const{target:o}=e??t;(o===this.eGui||o===((r=n.getHeaderRowContainerCtrl())==null?void 0:r.eViewport))&&i.showHeaderContextMenu(void 0,e,s)}},P0=class extends Et{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},JW={tag:"div",cls:"ag-header-cell",role:"columnheader",children:[{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"},{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"}]},ZW=class extends P0{constructor(e){super(JW,e),this.eResize=ge,this.eHeaderCompWrapper=ge,this.headerCompVersion=0}postConstruct(){const e=this.getGui(),t=()=>{const i=this.ctrl.getSelectAllGui();i&&(this.eResize.insertAdjacentElement("afterend",i),this.addDestroyFunc(()=>i.remove()))},s={setWidth:i=>e.style.width=i,toggleCss:(i,n)=>this.toggleCss(i,n),setUserStyles:i=>Ep(e,i),setAriaSort:i=>i?fB(e,i):pB(e),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerComp,refreshSelectAllGui:t,removeSelectAllGui:()=>{var i;return(i=this.ctrl.getSelectAllGui())==null?void 0:i.remove()}};this.ctrl.setComp(s,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0),t()}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){var e;this.headerComp&&((e=this.headerCompGui)==null||e.remove(),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const t=this.headerCompVersion;e.newAgStackInstance().then(s=>this.afterCompCreated(t,s))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},e$={tag:"div",cls:"ag-header-group-cell",role:"columnheader",children:[{tag:"div",ref:"eHeaderCompWrapper",cls:"ag-header-cell-comp-wrapper",role:"presentation"},{tag:"div",ref:"eResize",cls:"ag-header-cell-resize",role:"presentation"}]},t$=class extends P0{constructor(e){super(e$,e),this.eResize=ge,this.eHeaderCompWrapper=ge}postConstruct(){const e=this.getGui(),t=(i,n)=>n!=null?e.setAttribute(i,n):e.removeAttribute(i),s={toggleCss:(i,n)=>this.toggleCss(i,n),setUserStyles:i=>Ep(e,i),setHeaderWrapperHidden:i=>{i?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:i=>{i!=null?this.eHeaderCompWrapper.style.setProperty("max-height",`${i}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",i!=null)},setResizableDisplayed:i=>Vt(this.eResize,i),setWidth:i=>e.style.width=i,setAriaExpanded:i=>t("aria-expanded",i),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(s,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){const t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}const s=this.getGui(),i=e.getGui();this.eHeaderCompWrapper.appendChild(i),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(s)}},s$={tag:"div",cls:"ag-header-cell ag-floating-filter",role:"gridcell",children:[{tag:"div",ref:"eFloatingFilterBody",role:"presentation"},{tag:"div",ref:"eButtonWrapper",cls:"ag-floating-filter-button ag-hidden",role:"presentation",children:[{tag:"button",ref:"eButtonShowMainFilter",cls:"ag-button ag-floating-filter-button-button",attrs:{type:"button",tabindex:"-1"}}]}]},i$=class extends P0{constructor(e){super(s$,e),this.eFloatingFilterBody=ge,this.eButtonWrapper=ge,this.eButtonShowMainFilter=ge}postConstruct(){const e=this.getGui(),t={toggleCss:(s,i)=>this.toggleCss(s,i),setUserStyles:s=>Ep(e,s),addOrRemoveBodyCssClass:(s,i)=>this.eFloatingFilterBody.classList.toggle(s,i),setButtonWrapperDisplayed:s=>Vt(this.eButtonWrapper,s),setCompDetails:s=>this.setCompDetails(s),getFloatingFilterComp:()=>this.compPromise,setWidth:s=>e.style.width=s,setMenuIcon:s=>this.eButtonShowMainFilter.appendChild(s)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.floatingFilterComp.getGui().remove(),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},n$=class extends Et{constructor(e){super({tag:"div",cls:e.headerRowClass,role:"row"}),this.ctrl=e,this.headerComps={}}postConstruct(){this.getGui().setAttribute("tabindex",String(this.gos.get("tabIndex"))),gv(this.getGui(),this.ctrl.getAriaRowIndex());const t={setHeight:s=>this.getGui().style.height=s,setTop:s=>this.getGui().style.top=s,setHeaderCtrls:(s,i)=>this.setHeaderCtrls(s,i),setWidth:s=>this.getGui().style.width=s,setRowIndex:s=>gv(this.getGui(),s)};this.ctrl.setComp(t,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;const s=this.headerComps;this.headerComps={};for(const i of e){const n=i.instanceId;let o=s[n];delete s[n],o==null&&(o=this.createHeaderComp(i),this.getGui().appendChild(o.getGui())),this.headerComps[n]=o}if(Object.values(s).forEach(i=>{i.getGui().remove(),this.destroyBean(i)}),t){const i=Object.values(this.headerComps);i.sort((o,r)=>{const a=o.getCtrl().column.getLeft(),l=r.getCtrl().column.getLeft();return a-l});const n=i.map(o=>o.getGui());_T(this.getGui(),n)}}createHeaderComp(e){let t;switch(this.ctrl.type){case"group":t=new t$(e);break;case"filter":t=new i$(e);break;default:t=new ZW(e);break}return this.createBean(t),t.setParentComponent(this),t}},T0=class extends ${constructor(e,t,s,i){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=i,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=s}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?It(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,s=e.get("suppressColumnMoveAnimation"),i=pe(this.columnOrGroup.getOldLeft());(t==null?void 0:t.isActive())&&i&&!s?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),s=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=s,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===s&&this.setLeft(s)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:s,visibleCols:i}=this.beans;if(!qs(s,"print")||e.getPinned()==="left")return t;const o=i.getColsLeftWidth();if(e.getPinned()==="right"){const r=i.bodyWidth;return o+r+t}return o+t}setLeft(e){if(pe(e)&&(this.eCell.style.left=`${e}px`),os(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&gB(this.ariaEl,t.length)}}},o$=0,i_="headerCtrl",D0=class extends ${constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=e.getUniqueId()+"-"+o$++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}setComp(e,t,s,i,n){t.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(e,t,s,i,n),this.reAttemptToFocus&&(this.reAttemptToFocus=!1,this.focus(this.lastFocusEvent??void 0))}shouldStopEventPropagation(e){const{headerRowIndex:t,column:s}=this.beans.focusSvc.focusedHeader,i=s.getDefinition(),n=i==null?void 0:i.suppressHeaderKeyboardEvent;if(!pe(n))return!1;const o=Be(this.gos,{colDef:i,column:s,headerRowIndex:t,event:e});return!!n(o)}getWrapperHasFocus(){return qt(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let s;if(typeof t=="function"){const i=this.getHeaderClassParams();s=t(i)}else s=t;s&&this.comp.setUserStyles(s)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:s,compBean:i}=e,{beans:n}=this,o=h=>{if(!this.isAlive()||!i.isAlive())return;const{paddingTop:u,paddingBottom:f,borderBottomWidth:p,borderTopWidth:m}=fd(this.eGui),v=u+f+p+m,b=t.offsetHeight+v;if(h<5){const y=ks(n),S=!(y!=null&&y.contains(t)),R=b==0;if(S||R){Dy(()=>o(h+1),"raf",n);return}}this.setColHeaderHeight(this.column,b)};let r=!1,a;const l=()=>{const h=this.column.isAutoHeaderHeight();h&&!r&&c(),!h&&r&&d()},c=()=>{r=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),o(0),a=Cl(this.beans,t,()=>o(0))},d=()=>{r=!1,a&&a(),this.comp.toggleCss("ag-header-cell-auto-height",!1),a=void 0};l(),i.addDestroyFunc(()=>d()),i.addManagedListeners(this.column,{widthChanged:()=>r&&o(0)}),i.addManagedEventListeners({sortChanged:()=>{r&&window.setTimeout(()=>o(0))}}),s&&s(l)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:s,eGui:i}=this;!e||!t||!i||(e_(e,t,s.visibleCols),RT(i,s.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=Kc(this.beans);this.eGui&&qi(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){var o;const t=qt(this.beans),s=e.key===H.LEFT||e.key===H.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||s)&&(e.preventDefault(),e.stopImmediatePropagation()),!s))return;const n=e.key===H.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const r=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(r,e.shiftKey),(o=this.resizeFeature)==null||o.toggleColumnResizing(!0)}else this.moveHeader(n)}moveHeader(e){var t;(t=this.beans.colMoves)==null||t.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:s}=this.beans;return s?s.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:s}=this;let i=e.key===H.LEFT!==t.get("enableRtl");const n=s.getPinned(),o=t.get("enableRtl");return n&&o!==(n==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var e;(e=this.resizeFeature)==null||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case H.PAGE_DOWN:case H.PAGE_UP:case H.PAGE_HOME:case H.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=i_,{eGui:s,gos:i}=this;td(i,s,t,this),e.addDestroyFunc(()=>td(i,s,t,null))}focus(e){if(!this.isAlive())return!1;const{eGui:t}=this;return t?(t.focus(),this.lastFocusEvent=e||null):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){var e;this.dragSource&&((e=this.beans.dragAndDrop)==null||e.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,s){const i=e??t,{menuSvc:n,gos:o}=this.beans;o.get("preventDefaultOnContextMenu")&&i.preventDefault(),n!=null&&n.isHeaderContextMenuEnabled(s)&&n.showHeaderContextMenu(s,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",s)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:s}=this;e.isColumn?s.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):s.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},r$=class extends D0{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(e,t,s,i,n){this.comp=e;const{rowCtrl:o,column:r,beans:a}=this,{colResize:l,context:c,colHover:d,rangeSvc:h}=a,u=Fp(this,c,n);this.setGui(t,u),this.updateState(),this.setupWidth(u),this.setupMovingCss(u),this.setupMenuClass(u),this.setupSortableClass(u),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:i,checkMeasuringCallback:p=>this.setRefreshFunction("measuring",p),compBean:u}),this.addColumnHoverListener(u),this.setupFilterClass(u),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(u),this.setupSelectAll(u),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=u.createManagedBean(l.createResizeFeature(o.pinned,r,s,e,this)):Vt(s,!1),d==null||d.createHoverFeature(u,[r],t),h==null||h.createRangeHighlightFeature(u,r,e),u.createManagedBean(new T0(r,t,a)),u.createManagedBean(new Fu(t,{shouldStopEventPropagation:p=>this.shouldStopEventPropagation(p),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(u),u.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),u.addManagedListeners(r,{colDefChanged:()=>this.refresh()}),u.addManagedListeners(r,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const f=()=>this.checkDisplayName();u.addManagedEventListeners({columnValueChanged:f,columnRowGroupChanged:f,columnPivotChanged:f,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),u.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){var s;(s=this.beans.colResize)==null||s.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,s=e.colDef;return Be(t.gos,{colDef:s,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return aV(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:s,gos:i}=this.beans;return Be(i,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!(e!=null&&e.isHeaderFilterButtonEnabled(this.column)),enableFilterIcon:!!s&&(!this.openFilterEnabled||Yi(this.gos)),showColumnMenu:(o,r)=>{e==null||e.showColumnMenu({column:this.column,buttonElement:o,positionBy:"button",onClosedCallback:r})},showColumnMenuAfterMouseClick:(o,r)=>{e==null||e.showColumnMenu({column:this.column,mouseEvent:o,positionBy:"mouse",onClosedCallback:r})},showFilter:o=>{e==null||e.showFilterMenu({column:this.column,buttonElement:o,containerType:"columnFilter",positionBy:"button"})},progressSort:o=>{t==null||t.progressSort(this.column,!!o,"uiColumnSorted")},setSort:(o,r)=>{t==null||t.setSortForColumn(this.column,o,!!r,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(o,r)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(o,r)}})}setupSelectAll(e){var s;const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createOptionalManagedBean(t.createSelectAllFeature(this.column)),(s=this.selectAllFeature)==null||s.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{var n;const i=t.createSelectAllFeature(this.column);i&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(i),(n=this.selectAllFeature)==null||n.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!i&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){var e;return(e=this.selectAllFeature)==null?void 0:e.getCheckboxGui()}handleKeyDown(e){var t;super.handleKeyDown(e),e.key===H.SPACE&&((t=this.selectAllFeature)==null||t.onSpaceKeyDown(e)),e.key===H.ENTER&&this.onEnterKeyDown(e),e.key===H.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){var t;e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&((t=this.beans.sortSvc)==null||t.progressSort(this.column,e.shiftKey,"uiColumnSorted"))}showMenuOnKeyPress(e,t){const s=this.comp.getUserCompInstance();DR(s)&&s.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),_V()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){var s;this.tooltipFeature=(s=this.beans.tooltipSvc)==null?void 0:s.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),s=ZD(t,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(s);for(const n of s)i.has(n)?i.delete(n):this.comp.toggleCss(n,!0);for(const n of i)this.comp.toggleCss(n,!1)};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){var t;this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=((t=this.beans.colMoves)==null?void 0:t.setDragSourceForHeader(e,this.column,this.displayName))??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!(e!=null&&e.isColumnMenuInHeaderEnabled(this.column)),this.openFilterEnabled=!!(e!=null&&e.isFilterMenuInHeaderEnabled(this.column)),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria();for(const e of Object.values(this.refreshFunctions))e()}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const s=this.column.getActualWidth();this.comp.setWidth(`${s}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{var s;(s=this.comp)==null||s.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const s=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",s),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,s=e===1;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",s)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){var u;const{eGui:e,column:t,comp:s,beans:i}=this,n=A0(this.beans),o=n.reduce((f,p)=>f+p,0)===0;if(s.toggleCss("ag-header-parent-hidden",o),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),s.toggleCss("ag-header-span-height",!1),s.toggleCss("ag-header-span-total",!1);return}const{numberOfParents:r,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();s.toggleCss("ag-header-span-height",r>0);const l=F0(i);if(r===0){s.toggleCss("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${l}px`);return}s.toggleCss("ag-header-span-total",a);const c=(((u=this.column.getFirstRealParent())==null?void 0:u.getLevel())??-1)+1,d=n.length-c;let h=0;for(let f=0;f<d;f++)h+=n[n.length-1-f];e.style.setProperty("top",`${-h}px`),e.style.setProperty("height",`${l+h}px`)}refreshAriaSort(){var e;if(this.sortable){const t=this.getLocaleTextFunc(),s=((e=this.beans.sortSvc)==null?void 0:e.getDisplaySortForColumn(this.column))||null;this.comp.setAriaSort(tB(s)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!Yi(this.gos)){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){var t;if(!this.eGui.contains(qt(this.beans)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((s,i)=>s==="filter"?-1:i.charCodeAt(0)-s.charCodeAt(0)).map(s=>this.ariaDescriptionProperties.get(s)).join(". ");(t=this.beans.ariaAnnounce)==null||t.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){var t;(t=this.beans.colHover)==null||t.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=n=>this.handleMouseOverChange(n.type==="mouseenter"),s=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},i=n=>this.handleContextMenuMouseEvent(n,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:s,contextmenu:i})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return DR(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function DR(e){return typeof(e==null?void 0:e.getAnchorElementForMenu)=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var a$=0,yw=class extends ${constructor(e,t,s){super(),this.rowIndex=e,this.pinned=t,this.type=s,this.instanceId=a$++,this.comp=null,this.allCtrls=[];let i="ag-header-row-column";s==="group"?i="ag-header-row-group":s==="filter"&&(i="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${i}`}setRowIndex(e){var t;this.rowIndex=e,(t=this.comp)==null||t.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=qs(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(e=>e.eGui!=null):!1}setComp(e,t,s=!0){this.comp=e,t=Fp(this,this.beans.context,t),s&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),s=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:s,virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",s),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=qs(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0;const t=A0(this.beans);for(let n=0;n<t.length;n++){if(n===this.rowIndex&&this.type==="group")return{topOffset:e,rowHeight:t[n]};e+=t[n]}const s=F0(this.beans);if(this.type==="column")return{topOffset:e,rowHeight:s};e+=s;const i=t_(this.beans);return{topOffset:e,rowHeight:i}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;const t=this.getUpdatedHeaderCtrls(),s=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,s,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const i of t)this.recycleAndCreateHeaderCtrls(i,this.ctrlsById,e);const s=i=>{const{focusSvc:n,visibleCols:o}=this.beans;return n.isHeaderWrapperFocused(i)?o.isVisible(i.column):!1};if(e)for(const[i,n]of e)s(n)?this.ctrlsById.set(i,n):this.destroyBean(n);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,s){if(e.isEmptyGroup())return;const i=e.getUniqueId();let n;if(s&&(n=s.get(i),s.delete(i)),n&&n.column!=e&&(this.destroyBean(n),n=void 0),n==null)switch(this.type){case"filter":{n=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":n=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:n=this.createBean(new r$(e,this));break}t.set(i,n)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const e=[];for(const t of["left",null,"right"])e.push(...this.getComponentsToRender(t));return e}getComponentsToRender(e=this.pinned){return this.type==="group"?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){const s=this.allCtrls.find(n=>n.column==e);return s?s.focus(t):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},l$=class extends ${constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:s,ctrlsSvc:i,colModel:n,colMoves:o}=this.beans;this.setupCenterWidth(),s==null||s.setupHeaderPinnedWidth(this),this.setupDragAndDrop(o,this.eViewport);const r=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:r,advancedFilterEnabledChanged:r});const a=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;i.register(a,this),n.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,filterManager:s,visibleCols:i}=this.beans;let n=0;const o=t.getFocusHeaderToUseAfterRefresh(),r=()=>{const h=i.headerGroupRowCount;n=h,e||(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls));const u=this.groupsRowCtrls.length;if(u!==h){if(u>h){for(let f=h;f<u;f++)this.destroyBean(this.groupsRowCtrls[f]);this.groupsRowCtrls.length=h;return}for(let f=u;f<h;f++){const p=this.createBean(new yw(f,this.pinned,"group"));this.groupsRowCtrls.push(p)}}},a=()=>{const h=n++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}this.columnsRowCtrl==null||!e?(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new yw(h,this.pinned,"column"))):this.columnsRowCtrl.rowIndex!==h&&this.columnsRowCtrl.setRowIndex(h)},l=()=>{this.includeFloatingFilter=!!(s!=null&&s.hasFloatingFilters())&&!this.hidden;const h=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){h();return}e||h();const u=n++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==u&&this.filtersRowCtrl.setRowIndex(u):this.filtersRowCtrl=this.createBean(new yw(u,this.pinned,"filter"))},c=this.getAllCtrls();r(),a(),l();const d=this.getAllCtrls();this.comp.setCtrls(d),this.restoreFocusOnHeader(t,o),c.length!==d.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){const t=s=>s==null?void 0:s.getHeaderCellCtrls().find(i=>i.column===e);if(ul(e))return t(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let s=0;s<this.groupsRowCtrls.length;s++){const i=t(this.groupsRowCtrls[s]);if(i)return i}}getHtmlElementForColumnHeader(e){var t;return((t=this.getHeaderCtrlForColumn(e))==null?void 0:t.eGui)??null}getRowType(e){var t;return(t=this.getAllCtrls()[e])==null?void 0:t.type}focusHeader(e,t,s){const n=this.getAllCtrls()[e];return n?n.focusHeader(t,s):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const s=e==null?void 0:e.createBodyDropTarget(this.pinned,t);s&&this.createManagedBean(s)}restoreFocusOnHeader(e,t){if(!t)return;const{column:s}=t;s.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t,scroll:!1})}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new R0(e=>this.comp.setCenterWidth(`${e}px`),!0))}},c$=class extends ${constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(MR(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,s){var i;(i=this.activeMenuFactory)==null||i.showMenuAfterContextMenuEvent(e,t,s)}hidePopupMenu(){var e,t;(e=this.beans.contextMenuSvc)==null||e.hideActiveMenu(),(t=this.activeMenuFactory)==null||t.hideActiveMenu()}hideFilterMenu(){var e;(e=MR(this.beans))==null||e.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){var s;const{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!((s=this.activeMenuFactory)!=null&&s.isMenuEnabled(e))&&(Yi(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!!((t=this.beans.filterManager)!=null&&t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&ul(e)?e.getColDef():e==null?void 0:e.getColGroupDef();return!(t!=null&&t.suppressHeaderContextMenu)&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(jc()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!Yi(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!!((t=this.beans.filterManager)!=null&&t.isFilterAllowed(e))&&!Yi(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return Yi(e)?e.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(e,t,s,i){const{positionBy:n,onClosedCallback:o}=t,r=t.column;if(n==="button"){const{buttonElement:a}=t;e==null||e.showMenuAfterButtonClick(r,a,s,o,i)}else if(n==="mouse"){const{mouseEvent:a}=t;e==null||e.showMenuAfterMouseEvent(r,a,s,o,i)}else if(r){const a=this.beans,l=a.ctrlsSvc;l.getScrollFeature().ensureColumnVisible(r,"auto"),ia(a,()=>{var d;const c=(d=l.getHeaderRowContainerCtrl(r.getPinned()))==null?void 0:d.getHeaderCtrlForColumn(r);c&&(e==null||e.showMenuAfterButtonClick(r,c.getAnchorElementForMenu(i),s,o,i))})}}};function _R(e,t,s){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",s))}function MR(e){const{enterpriseMenuFactory:t,filterMenuFactory:s,gos:i}=e;return t&&Yi(i)?t:s}var TC=class extends u0{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange(()=>e.validate())}destroy(){this.errorMessages=null}},n_=class extends Et{constructor(){super()}},d$={tag:"span",cls:"ag-overlay-loading-center"},h$=class extends n_{init(){var t;const e=zr((t=this.gos.get("overlayLoadingTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??d$),!e){const i=this.getLocaleTextFunc()("loadingOoo","Loading...");this.getGui().textContent=i,this.beans.ariaAnnounce.announceValue(i,"overlay")}}},u$={tag:"span",cls:"ag-overlay-no-rows-center"},g$=class extends n_{init(){var t;const e=zr((t=this.gos.get("overlayNoRowsTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??u$),!e){const i=this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=i,this.beans.ariaAnnounce.announceValue(i,"overlay")}}};function f$(e,t,s){const i=Cn(e,t,s);if(i){const{className:o}=i;if(typeof o=="string"&&o.includes("ag-icon")||typeof o=="object"&&o["ag-icon"])return i}const n=ls({tag:"span"});return n.appendChild(i),n}function Cn(e,t,s){var o;let i=null;e==="smallDown"?oe(262):e==="smallLeft"?oe(263):e==="smallRight"&&oe(264);const n=s==null?void 0:s.getColDef().icons;if(n&&(i=n[e]),t.gos&&!i){const r=t.gos.get("icons");r&&(i=r[e])}if(i){let r;if(typeof i=="function")r=i();else if(typeof i=="string")r=i;else{oe(38,{iconName:e});return}if(typeof r=="string")return e0(r);if(i0(r))return r;oe(133,{iconName:e});return}else{const r=t.registry.getIcon(e);return r||(o=t.validation)==null||o.validateIcon(e),ls({tag:"span",cls:`ag-icon ag-icon-${r??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var p$=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}",m$={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},v$=class extends Et{constructor(){super(),this.dragSource=null,this.eIcon=ge,this.eLabel=ge,this.eGhost=ge,this.registerCSS(p$)}postConstruct(){const e=t=>f$(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(m$),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eGhost:s,eIcon:i,dragSource:n,dropIconMap:o,gos:r}=this;Ks(i);let a=null;e||(e=n!=null&&n.getDefaultIconName?n.getDefaultIconName():"notAllowed"),a=o[e],s.classList.toggle("ag-dnd-ghost-not-allowed",e==="notAllowed"),i.classList.toggle("ag-shake-left-to-right",t),!(a===o.hide&&r.get("suppressDragLeaveHidesColumns"))&&a&&i.appendChild(a)}setLabel(e){this.eLabel.textContent=e}},C$=".ag-checkbox-cell{height:100%}",w$={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},b$=class extends Et{constructor(){super(w$,[p0]),this.eCheckbox=ge,this.registerCSS(C$)}init(e){this.refresh(e);const{eCheckbox:t,beans:s}=this,i=t.getInputElement();i.setAttribute("tabindex","-1"),ST(i,"polite"),this.addManagedListeners(i,{click:n=>{if(id(n),t.isDisabled())return;const o=t.getValue();this.onCheckboxChanged(o)},dblclick:n=>{id(n)}}),this.addManagedElementListeners(e.eGridCell,{keydown:n=>{if(n.key===H.SPACE&&!t.isDisabled()){e.eGridCell===qt(s)&&t.toggle();const o=t.getValue();this.onCheckboxChanged(o),n.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,s=!0;const{value:i,column:n,node:o}=e;if(o.group&&n)if(typeof i=="boolean")t=i;else{const h=n.getColId();h.startsWith(RC)?t=i==null||i===""?void 0:i==="true":o.aggData&&o.aggData[h]!==void 0||o.sourceRowIndex>=0?t=i??void 0:s=!1}else t=i??void 0;const{eCheckbox:r}=this;if(!s){r.setDisplayed(!1);return}r.setValue(t);const a=e.disabled??!(n!=null&&n.isCellEditable(o));r.setDisabled(a);const l=this.getLocaleTextFunc(),c=xC(l,t),d=a?c:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${c})`;r.setInputAriaLabel(d)}onCheckboxChanged(e){var r,a,l,c;const{params:t}=this,{column:s,node:i,value:n}=t;(a=(r=this.beans)==null?void 0:r.editSvc)==null||a.setEditingCells([{column:s,colId:s.getColId(),rowIndex:i.rowIndex,rowPinned:i.rowPinned,state:"changed",oldValue:n,newValue:n}],{update:!0,forceRefreshOfEditCellsOnly:!0});const o=i.setDataValue(s,e,"renderer");(c=this.beans.editSvc)==null||c.stopEditing({rowNode:i,column:s},{source:(l=this.beans.editSvc)!=null&&l.isBatchEditing()?"ui":"api"}),o||this.updateCheckbox(t)}},kR=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){const{all:t,visible:s,order:i}=this;t.has(e)||(t.add(e),s.add(e),i.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),to(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(const t of this.visible)if(t.id==e)return t}clear(){const{all:e,visible:t,order:s,queued:i}=this;e.clear(),i.clear(),t.clear(),s.length=0}sort(){const{sortSvc:e,rowNodeSorter:t,gos:s}=this.beans,i=(e==null?void 0:e.getSortOptions())??[],n=x$(this.order);if(this.order.sort((r,a)=>{var l,c;return(((l=r.pinnedSibling)==null?void 0:l.rowIndex)??0)-(((c=a.pinnedSibling)==null?void 0:c.rowIndex)??0)}),this.order=(t==null?void 0:t.doFullSort(this.order,i))??this.order,!n)return;const o=YT(s);o==="bottom"||o==="pinnedBottom"?this.order.push(n):this.order.unshift(n)}hide(e){const{all:t,visible:s}=this;t.forEach(i=>e(i)?s.delete(i):s.add(i)),this.order=Array.from(s),this.sort()}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function o_(e){var s;if(e.level===-1)return!0;const t=e.parent;return(s=t==null?void 0:t.childrenAfterSort)!=null&&s.some(i=>i==e)?o_(t):!1}function Sw(e,t){const{gos:s,rowModel:i,filterManager:n}=e;return Au(s)?!i.getRowNode(t.id):n!=null&&n.isAnyFilterPresent()?!o_(t):s.get("pivotMode")?!t.group:!1}function y$(e){return!!e.footer&&e.level===-1}function S$(e){return!!e.pinnedSibling&&y$(e.pinnedSibling)}function x$(e){var s;const t=e.findIndex(S$);if(t>-1)return(s=e.splice(t,1))==null?void 0:s[0]}var IR=class extends ${postConstruct(){const{gos:e,beans:t}=this;this.top=new kR(t,"top"),this.bottom=new kR(t,"bottom");const s=n=>Sw(t,n.pinnedSibling),i=()=>{const n=e.get("isRowPinned");n&&e.get("enableRowPinning")&&t.rowModel.forEachNode(o=>this.pinRow(o,n(o)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:({keepRenderedRows:n})=>{this.tryToEmptyQueues(),this.pinGrandTotalRow(),this.forContainers(r=>r.hide(s));const o=this.refreshRowPositions();(!n||o)&&this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(E$),this.refreshRowPositions()},rowNodeDataChanged:({node:n})=>{const o=e.get("isRowPinnable");((o==null?void 0:o(n))??!0)||this.pinRow(n,null)},firstDataRendered:i}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(n=>n.hide(s)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",({currentValue:n})=>{this._grandTotalPinned=n==="pinnedBottom"?"bottom":n==="pinnedTop"?"top":null}),this.addManagedPropertyListener("isRowPinned",i)}destroy(){this.reset(!1),super.destroy()}reset(e=!0){this.forContainers(t=>{const s=[];t.forEach(i=>s.push(i)),s.forEach(i=>this.pinRow(i,null)),t.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,s){var r;if(e.footer&&e.level>-1)return;if(e.footer&&e.level===-1){this._grandTotalPinned=t,F$(this.beans);return}const i=e.rowPinned??((r=e.pinnedSibling)==null?void 0:r.rowPinned);if(i!=null&&t!=null&&t!=i){const a=e.rowPinned?e:e.pinnedSibling,l=e.rowPinned?e.pinnedSibling:e;this.pinRow(a,null,s),this.pinRow(l,t,s);return}const o=s&&A$(this.beans,e,s);if(o){o.forEach(a=>this.pinRow(a,t));return}if(t==null){const a=e.rowPinned?e:e.pinnedSibling,l=this.findPinnedRowNode(a);if(!l)return;l.delete(a);const c=a.pinnedSibling;xw(a),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(c)}else{const a=LR(this.beans,e,t),l=this.getContainer(t);l.add(a),Sw(this.beans,e)&&l.hide(c=>Sw(this.beans,c.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return this.getContainer(e).size()===0}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0;const s=i=>{if(i.rowHeightEstimated){const n=hl(this.beans,i);i.setRowTop(t),i.setRowHeight(n.height),t+=n.height,e=!0}};return this.bottom.forEach(s),t=0,this.top.forEach(s),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){return OR(this.top)}getPinnedBottomTotalHeight(){return OR(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){const e=t=>{const s=[];return this.forEachPinnedRow(t,i=>s.push(i.pinnedSibling.id)),s};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers((t,s)=>{for(const i of e[s]){const n=this.beans.rowModel.getRowNode(i);n?this.pinRow(n,s):t.queue(i)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{const s=new Set;e.forEachQueued(i=>{const n=this.beans.rowModel.getRowNode(i);n&&s.add(n)});for(const i of s)e.unqueue(i.id),this.pinRow(i,t)})}pinGrandTotalRow(){var a;const{gos:e,beans:t,_grandTotalPinned:s}=this,i=t.rowModel;if(!rs(e))return;const n=(a=i.rootNode)==null?void 0:a.sibling;if(!n)return;const o=n.pinnedSibling,r=o&&this.findPinnedRowNode(o);if(s){if(r&&r.floating!==s&&(r.delete(o),xw(o)),!r||r.floating!==s){const l=LR(t,n,s);this.getContainer(s).add(l)}}else{if(!r)return;r.delete(o),xw(o)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers(t=>t.forEach(s=>s.setRowHeight(s.rowHeight,!0)))}getContainer(e){return e==="top"?this.top:this.bottom}findPinnedRowNode(e){if(this.top.has(e))return this.top;if(this.bottom.has(e))return this.bottom}refreshRowPositions(e){const t=i=>R$(this.beans,i);if(e)return t(this.getContainer(e));let s=!1;return this.forContainers(i=>{const n=t(i);s||(s=n)}),s}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),e==null||e.dispatchRowEvent("rowPinned")}};function R$(e,t){let s=0,i=!1;return t.forEach((n,o)=>{if(i||(i=n.rowTop!==s),n.setRowTop(s),n.rowHeightEstimated||n.rowHeight==null){const r=hl(e,n).height;i||(i=n.rowHeight!==r),n.setRowHeight(r)}n.setRowIndex(o),s+=n.rowHeight}),i}function LR(e,t,s){if(t.pinnedSibling)return t.pinnedSibling;const i=Vz(t,e);i.setRowTop(null),i.setRowIndex(null),i.rowPinned=s;const n=s==="top"?b0:y0;return i.id=`${n}${s}-${t.id}`,i.pinnedSibling=t,t.pinnedSibling=i,i}function xw(e){if(!e.pinnedSibling)return;e.rowPinned=null,e.setRowTop(null),e.setRowIndex(null);const t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function E$(e){const t=new Set;e.forEach(s=>{s.group&&t.add(s)}),t.forEach(s=>e.delete(s))}function A$(e,t,s){var o;const{rowSpanSvc:i}=e,n=(s&&(i==null?void 0:i.isCellSpanning(s,t)))??!1;if(s&&n)return(o=i==null?void 0:i.getCellSpan(s,t))==null?void 0:o.spannedNodes}function OR(e){const t=e.size();if(t===0)return 0;const s=e.getByIndex(t-1);return s===void 0?0:s.rowTop+s.rowHeight}function F$({gos:e,rowModel:t}){rs(e)&&t.refreshModel({step:"map"})}var NR=class extends ${constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",t=>this.setPinnedRowData(t.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",t=>this.setPinnedRowData(t.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return this.getCache(e).order.length===0}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){const t=s=>{s.setRowHeight(s.rowHeight,!0)};Nu(this.pinnedBottomRows,t),Nu(this.pinnedTopRows,t)}}ensureRowHeightsValid(){let e=!1,t=0;const s=i=>{if(i.rowHeightEstimated){const n=hl(this.beans,i);i.setRowTop(t),i.setRowHeight(n.height),t+=n.height,e=!0}};return Nu(this.pinnedBottomRows,s),t=0,Nu(this.pinnedTopRows,s),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){var d;const s=this.getCache(t);if(e===void 0){s.order.length=0,s.cache={};return}const i=gu(this.gos),n=t==="top"?b0:y0,o=new Set(s.order),r=[],a=new Set;let l=0,c=-1;for(const h of e){const u=(i==null?void 0:i({data:h,level:0,rowPinned:t}))??n+this.nextId++;if(a.has(u)){oe(96,{id:u,data:h});continue}c++,a.add(u),r.push(u);const f=Sg(s,u);if(f!==void 0)f.data!==h&&f.updateData(h),l+=this.setRowTopAndRowIndex(f,l,c),o.delete(u);else{const p=new gl(this.beans);p.id=u,p.data=h,p.rowPinned=t,l+=this.setRowTopAndRowIndex(p,l,c),s.cache[u]=p,s.order.push(u)}}for(const h of o)(d=Sg(s,h))==null||d.clearRowTopAndRowIndex(),delete s.cache[h];s.order=r}setRowTopAndRowIndex(e,t,s){return e.setRowTop(t),e.setRowHeight(hl(this.beans,e).height),e.setRowIndex(s),e.rowHeight}getPinnedTopTotalHeight(){return HR(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return HR(this.pinnedBottomRows)}getPinnedTopRowCount(){return Yy(this.pinnedTopRows)}getPinnedBottomRowCount(){return Yy(this.pinnedBottomRows)}getPinnedTopRow(e){return qy(this.pinnedTopRows,e)}getPinnedBottomRow(e){return qy(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return Sg(this.getCache(t),e)}forEachPinnedRow(e,t){return Nu(this.getCache(e),t)}getCache(e){return e==="top"?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function HR(e){const t=Yy(e);if(t===0)return 0;const s=qy(e,t-1);return s===void 0?0:s.rowTop+s.rowHeight}function Sg(e,t){return e.cache[t]}function qy(e,t){return Sg(e,e.order[t])}function Nu(e,t){e.order.forEach((s,i)=>{const n=Sg(e,s);n&&t(n,i)})}function Yy(e){return e.order.length}var P$=class extends ${constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){const{gos:e}=this,t=()=>{const s=e.get("enableRowPinning"),i=YT(e),o=!!s||(i==="pinnedBottom"||i==="pinnedTop"),r=o?this.inner instanceof NR:this.inner instanceof IR;this.inner&&r&&this.destroyBean(this.inner),(r||!this.inner)&&(this.inner=this.createManagedBean(o?new IR:new NR))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,s){return this.inner.pinRow(e,t,s)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}};function _p(e){return!!(e.rowPinned&&e.pinnedSibling)}function nn(e,t,s,i){const n=t==="top";if(!s)return nn(e,t,n?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),i);if(!i){const l=n?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return nn(e,t,s,n?e.getPinnedTopRow(l-1):e.getPinnedBottomRow(l-1))}let o=!1,r=!1;const a=[];return e.forEachPinnedRow(t,l=>{if(l===s&&!o){o=!0,a.push(l);return}if(o&&l===i){r=!0,a.push(l);return}o&&!r&&a.push(l)}),a}var T$={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},D$=class extends Et{constructor(){super(T$,[p0]),this.eCheckbox=ge}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:s}=this,i=t.isSelected(),n=xC(e,i),[o,r]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],a=e(o,r);s.setValue(i,!0),s.setInputAriaLabel(`${a} (${n})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:id,click:i=>{var n;id(i),(n=this.beans.selectionSvc)==null||n.handleSelectionEvent(i,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:n})=>{const o=typeof i=="object"?ow(i):void 0,r=typeof n=="object"?ow(n):void 0;o!==r&&this.onSelectableChanged()}),Ly(this.gos)||typeof this.getIsVisible()=="function"){const i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:s,gos:i}=this,n=t.selectable,o=this.getIsVisible();let r;if(typeof o=="function"){const h=s==null?void 0:s.callbackParams;if(!e)r=o({...h,node:t,data:t.data});else{const u=e.createColumnFunctionCallbackParams(t);r=o({...h,...u})}}else r=o??!1;const a=n&&!r||!n&&r,l=n||r,c=i.get("rowSelection"),d=c&&typeof c!="string"?!ow(c):!!(e!=null&&e.getColDef().showDisabledCheckboxes);this.setVisible(l&&(a?d:!0)),this.setDisplayed(l&&(a?d:!0)),l&&this.eCheckbox.setDisabled(a),s!=null&&s.removeHidden&&this.setDisplayed(l)}getIsVisible(){var s,i;const e=this.overrides;if(e)return e.isVisible;const t=this.gos.get("rowSelection");return t&&typeof t!="string"?Yd(t):(i=(s=this.column)==null?void 0:s.getColDef())==null?void 0:i.checkboxSelection}},_$=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.getNodesInRange(e,t)??[]}return this.cachedRange}isInRange(e){return this.rootId===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(e){if(this.rootId)return this.getRowNode(this.rootId);if(e)return this.setRoot(e),e}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t;const{rowModel:s,pinnedRowModel:i}=this;return t??(t=s.getRowNode(e)),i!=null&&i.isManual()&&(t??(t=i.getPinnedRowById(e,"top")),t??(t=i.getPinnedRowById(e,"bottom"))),t}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const s=t[0].id===this.rootId,i=t.findIndex(n=>n.id===e.id);if(i>-1){const n=t.slice(0,i),o=t.slice(i+1);return this.setEndRange(e),s?{keep:n,discard:o}:{keep:o,discard:n}}else return{keep:t,discard:[]}}extend(e,t=!1){const s=this.getRoot();if(s==null){const n=this.getRange().slice();return t&&e.depthFirstSearch(o=>!o.group&&n.push(o)),n.push(e),this.setRoot(e),{keep:n,discard:[]}}const i=this.getNodesInRange(s,e);if(!i)return this.setRoot(e),{keep:[e],discard:[]};if(i.find(n=>n.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const n=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:n}}}getNodesInRange(e,t){const{pinnedRowModel:s,rowModel:i}=this;if(!(s!=null&&s.isManual()))return i.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&!t.rowPinned)return nn(s,"top",e,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),t)??[]);if(e.rowPinned==="bottom"&&!t.rowPinned){const n=nn(s,"bottom",void 0,e),o=i.getRowCount(),r=i.getRow(o-1);return(i.getNodesInRangeForSelection(t,r)??[]).concat(n)}if(!e.rowPinned&&!t.rowPinned)return i.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&t.rowPinned==="top")return nn(s,"top",e,t);if(e.rowPinned==="bottom"&&t.rowPinned==="top"){const n=nn(s,"top",t,void 0),o=nn(s,"bottom",void 0,e),r=i.getRow(0),a=i.getRow(i.getRowCount()-1);return n.concat(i.getNodesInRangeForSelection(r,a)??[]).concat(o)}if(!e.rowPinned&&t.rowPinned==="top")return nn(s,"top",t,void 0).concat(i.getNodesInRangeForSelection(i.getRow(0),e)??[]);if(e.rowPinned==="top"&&t.rowPinned==="bottom"){const n=nn(s,"top",e,void 0),o=nn(s,"bottom",void 0,t),r=i.getRow(0),a=i.getRow(i.getRowCount()-1);return n.concat(i.getNodesInRangeForSelection(r,a)??[]).concat(o)}if(e.rowPinned==="bottom"&&t.rowPinned==="bottom")return nn(s,"bottom",e,t);if(!e.rowPinned&&t.rowPinned==="bottom"){const n=nn(s,"bottom",void 0,t),o=i.getRow(i.getRowCount());return(i.getNodesInRangeForSelection(e,o)??[]).concat(n)}return null}},M$=class extends ${constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(qt(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new f0);this.cbSelectAll=t,t.addCss("ag-header-select-all"),cl(t.getGui(),"presentation"),this.showOrHideSelectAll();const s=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:s,paginationChanged:s,modelUpdated:s}),this.addManagedPropertyListener("rowSelection",({currentValue:i,previousValue:n})=>{const o=r=>typeof r=="string"||!r||r.mode==="singleRow"?void 0:r.selectAll;o(i)!==o(n)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source==="uiColumnMoved")}showOrHideSelectAll(e=!1){const t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,s=this.cbSelectAll,i=t.getSelectAllState(e);s.setValue(i);const n=t.hasNodesToSelect(e);s.setDisabled(!n),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){const t=this.getLocaleTextFunc(),{headerCellCtrl:s,cbSelectAll:i,cbSelectAllVisible:n}=this,o=i.getValue(),r=xC(t,o),a=t("ariaRowSelectAll","Press Space to toggle all rows selection");s.setAriaDescriptionProperty("selectAll",n?`${a} (${r})`:null),i.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||s.announceAriaDescription()}checkSelectionType(e){return Gg(this.gos)?!0:(oe(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:s}=this.beans;return rs(t)||Au(t)?!0:(oe(129,{feature:e,rowModel:s.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let s="uiSelectAll";t==="currentPage"?s="uiSelectAllCurrentPage":t==="filtered"&&(s="uiSelectAllFiltered");const i={source:s,selectAll:t},n=this.beans.selectionSvc;e?n.selectAllRowNodes(i):n.deselectAllRowNodes(i)}isCheckboxSelection(){const{column:e,gos:t,beans:s}=this,o=typeof t.get("rowSelection")=="object"?"headerCheckbox":"headerCheckboxSelection";return r_(s,e)&&this.checkRightRowModelType(o)&&this.checkSelectionType(o)}getSelectAllMode(){const e=ZT(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:s}=this.column.getColDef();return t?"currentPage":s?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function r_({gos:e,selectionColSvc:t},s){const i=e.get("rowSelection"),n=s.getColDef(),{headerCheckboxSelection:o}=n;let r=!1;if(typeof i=="object"){const l=na(s),c=d0(s);(bv(i)==="autoGroupColumn"&&c||l&&(t!=null&&t.isSelectionColumnEnabled()))&&(r=Wm(i))}else typeof o=="function"?r=o(Be(e,{column:s,colDef:n})):r=!!o;return r}var k$=class extends ${postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new _$(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{const s=Ly(e);s!==this.isRowSelectable&&(this.isRowSelectable=s,this.updateSelectable())}),this.isRowSelectable=Ly(e),this.addManagedEventListeners({cellValueChanged:s=>this.updateRowSelectable(s.node),rowNodeDataChanged:s=>this.updateRowSelectable(s.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new D$}createSelectAllFeature(e){if(r_(this.beans,e))return new M$(e)}isMultiSelect(){return Gg(this.gos)}onRowCtrlSelected(e,t,s){const i=!!e.rowNode.isSelected();e.forEachGui(s,n=>{n.rowComp.toggleCss("ag-row-selected",i);const o=n.element;ET(o,i),o.contains(qt(this.beans))&&t(n)})}announceAriaRowSelection(e){var o,r;if(this.isRowSelectionBlocked(e))return;const t=e.isSelected(),s=(o=this.beans.editSvc)==null?void 0:o.isEditing({rowNode:e});if(!e.selectable||s)return;const n=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);(r=this.beans.ariaAnnounce)==null||r.announceValue(n,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!_p(e)||!$c(this.gos)}updateRowSelectable(e,t){var i;const s=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:((i=this.isRowSelectable)==null?void 0:i.call(this,e))??!0;return this.setRowSelectable(e,s,t),s}setRowSelectable(e,t,s){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),s)return;if(Vg(this.gos)){const n=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:n??!1,source:"selectableChanged"});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){var i;let t=!1,s=!1;if(!((i=e.childrenAfterGroup)!=null&&i.length))return e.selectable?e.__selected:null;for(let n=0;n<e.childrenAfterGroup.length;n++){const o=e.childrenAfterGroup[n];let r=o.isSelected();if(!o.selectable){const a=this.calculateSelectedFromChildren(o);if(a===null)continue;r=a}switch(r){case!0:t=!0;break;case!1:s=!0;break;default:return}}if(!(t&&s))return t?!0:s?!1:e.selectable?e.__selected:null}selectRowNode(e,t,s,i="api"){const n=!e.selectable&&t,o=e.__selected===t;if(n||o)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const r=e.sibling;r&&r.footer&&r.__localEventService&&r.dispatchRowEvent("rowSelected");const a=e.pinnedSibling;return a!=null&&a.rowPinned&&a.__localEventService&&a.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent({...Bz(e,this.gos,"rowSelected"),event:s||null,source:i}),!0}isCellCheckboxSelection(e,t){const s=this.gos.get("rowSelection");if(s&&typeof s!="string"){const i=na(e)&&Yd(s);return e.isColumnFunc(t,i)}else return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,s,i){const{gos:n,selectionCtx:o}=this,r=e.isSelected(),a=Vg(n),l=lG(n),c=cG(n),d=this.isMultiSelect(),h=i==="rowClicked";if(h&&!(l||c))return null;if(t&&s&&d){const u=o.getRoot();if(u)if(u.isSelected()){const f=o.isInRange(e)?o.truncate(e):o.extend(e,a);return{deselect:f.discard,select:f.keep,reset:!1}}else{const f=o.extend(e,a);return{select:[],deselect:f.keep,reset:!1}}else return null}else if(t&&d){const u=o.selectAll?this.beans.rowModel.getRow(0):void 0,f=o.getRoot(u),p=o.isInRange(e)?o.truncate(e):o.extend(e,a);return{select:p.keep,deselect:p.discard,reset:o.selectAll||!!(f&&!f.isSelected())}}else if(s){if(h){const u=!r;return u&&!l||!u&&!c?null:(o.setRoot(e),{node:e,newValue:u,clearSelection:!1})}return o.setRoot(e),{node:e,newValue:!r,clearSelection:!d}}else{o.setRoot(e);const u=dG(n),f=Sv(n)==="filteredDescendants",p=h&&(!u||!l);if(f&&r===void 0&&rs(n))return{node:e,newValue:!1,checkFilteredNodes:!0,clearSelection:!d||p};if(h){const m=r?!u:l;return m===r&&!p||m&&!l||!m&&!c?null:{node:e,newValue:m,clearSelection:!d||p,keepDescendants:e.group&&a}}return{node:e,newValue:!r,clearSelection:!d||p}}}},Rw={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},I$=class extends ${constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:s,eBottomGuard:i,focusTrapActive:n,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:r,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:d,onTabKeyDown:h,handleKeyDown:u,isEmpty:f,eFocusableElement:p}=e;this.comp=t,this.eTopGuard=s,this.eBottomGuard=i,this.providedFocusInnerElement=a,this.eFocusableElement=p,this.focusTrapActive=!!n,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!r,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=d,this.providedOnTabKeyDown=h,this.providedHandleKeyDown=u,this.providedIsEmpty=f}postConstruct(){this.createManagedBean(new Fu(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards();for(const e of[this.eTopGuard,this.eBottomGuard])this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():Qd(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){var l;const t=ks(this.beans),s=Qd(t.body,null,!0),i=s.indexOf(e?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let n,o;e?(n=0,o=i):(n=i+1,o=s.length);const r=s.slice(n,o),a=this.gos.get("tabIndex");r.sort((c,d)=>{const h=Number.parseInt(c.getAttribute("tabindex")||"0"),u=Number.parseInt(d.getAttribute("tabindex")||"0");return u===a?1:h===a?-1:h===0?1:u===0?-1:h-u}),(l=r[e?r.length-1:0])==null||l.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const s=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),s&&(s.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=Qd(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return md(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},L$=class extends ${constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:s,eFocusableElement:i}=this,n=[t,s],o={setTabIndex:v=>{for(const C of n)v!=null?C.setAttribute("tabindex",v):C.removeAttribute("tabindex")}};this.addTabGuards(t,s);const{focusTrapActive:r=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:d,onTabKeyDown:h,shouldStopEventPropagation:u,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:m}=e;this.tabGuardCtrl=this.createManagedBean(new I$({comp:o,focusTrapActive:r,eTopGuard:t,eBottomGuard:s,eFocusableElement:i,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:d,onTabKeyDown:h,shouldStopEventPropagation:u,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:m}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=ks(this.beans).createElement("div"),s=e==="top"?Rw.TAB_GUARD_TOP:Rw.TAB_GUARD_BOTTOM;return t.classList.add(Rw.TAB_GUARD,s),cl(t,"presentation"),t}addTabGuards(e,t){const s=this.eFocusableElement;s.insertAdjacentElement("afterbegin",e),s.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];Ks(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,s){i0(t)||(t=t.getGui());const{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):e(t,s)}destroy(){const{eTopGuard:e,eBottomGuard:t}=this;Qn(e),Qn(t),super.destroy()}},a_=class extends Et{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new L$(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},O$=500,N$=550,tm,H$=e=>{if(!tm)tm=new WeakSet;else if(tm.has(e))return!1;return tm.add(e),!0},_l=class{constructor(e,t=!1){this.eElement=e,this.preventClick=t,this.startListener=null,this.handlers=[],this.eventSvc=void 0,this.touchStart=null,this.lastTapTime=null,this.longPressTimer=0,this.moved=!1}addEventListener(e,t){let s=this.eventSvc;if(!s){if(s===null)return;this.eventSvc=s=new ed;const i=this.onTouchStart.bind(this);this.startListener=i,this.eElement.addEventListener("touchstart",i,{passive:!0})}s.addEventListener(e,t)}removeEventListener(e,t){var s;(s=this.eventSvc)==null||s.removeEventListener(e,t)}onTouchStart(e){if(this.touchStart||!H$(e))return;const t=e.touches[0];this.touchStart=t;const s=this.handlers;if(!s.length){const i=this.eElement,n=i.ownerDocument,o=this.onTouchMove.bind(this),r=this.onTouchEnd.bind(this),a=this.onTouchCancel.bind(this),l={passive:!0},c={passive:!1};Gm(s,[i,"touchmove",o,l],[n,"touchcancel",a,l],[n,"touchend",r,c],[n,"contextmenu",pa,c])}this.clearLongPress(),this.longPressTimer=window.setTimeout(()=>{var i;this.longPressTimer=0,this.touchStart===t&&!this.moved&&(this.moved=!0,(i=this.eventSvc)==null||i.dispatchEvent({type:"longTap",touchStart:t,touchEvent:e}))},N$)}onTouchMove(e){const{moved:t,touchStart:s}=this;if(!t&&s){const i=wg(s,e.touches);i&&!LT(i,s,4)&&(this.clearLongPress(),this.moved=!0)}}onTouchEnd(e){var s;const t=this.touchStart;!t||!wg(t,e.changedTouches)||(this.moved||((s=this.eventSvc)==null||s.dispatchEvent({type:"tap",touchStart:t}),this.checkDoubleTap(t)),this.preventClick&&pa(e),this.cancel())}onTouchCancel(e){const t=this.touchStart;!t||!wg(t,e.changedTouches)||(this.lastTapTime=null,this.cancel())}checkDoubleTap(e){var i;let t=Date.now();const s=this.lastTapTime;s&&t-s>O$&&((i=this.eventSvc)==null||i.dispatchEvent({type:"doubleTap",touchStart:e}),t=null),this.lastTapTime=t}cancel(){this.clearLongPress(),n0(this.handlers),this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer),this.longPressTimer=0,this.moved=!1}destroy(){const e=this.startListener;e&&(this.startListener=null,this.eElement.removeEventListener("touchstart",e)),this.cancel(),this.eElement=null,this.eventSvc=null}},B$=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.includes("x"),this.scrollVertically=e.scrollAxis.includes("y"),this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}get scrolling(){return this.tickingInterval!==null}check(e,t=!1){const s=t||this.shouldSkipVerticalScroll();if(s&&this.shouldSkipHorizontalScroll())return;const i=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=e.clientX<i.left+n,this.tickRight=e.clientX>i.right-n,this.tickUp=e.clientY<i.top+n&&!s,this.tickDown=e.clientY>i.bottom-n&&!s,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},G$=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${HT}/${this.frameworkName}-data-grid`,QB(this.baseDocLink)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return this.baseDocLink+(e?"/"+e:"")}};function V$(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var z$=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],BR=Object.fromEntries(z$.map((e,t)=>[e,t]));function W$(e,t){const s=(e.beanName?BR[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(t.beanName?BR[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return s-i}function $$(e,t){return(e==null?void 0:e.beanName)==="gridDestroySvc"?-1:(t==null?void 0:t.beanName)==="gridDestroySvc"?1:0}var U$={tag:"div",cls:"ag-pinned-left-header",role:"rowgroup"},j$={tag:"div",cls:"ag-pinned-right-header",role:"rowgroup"},K$={tag:"div",cls:"ag-header-viewport",role:"rowgroup",attrs:{tabindex:"-1"},children:[{tag:"div",ref:"eCenterContainer",cls:"ag-header-container",role:"presentation"}]},Ew=class extends Et{constructor(e){super(),this.eCenterContainer=ge,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();const e={setDisplayed:s=>this.setDisplayed(s),setCtrls:s=>this.setCtrls(s),setCenterWidth:s=>this.eCenterContainer.style.width=s,setViewportScrollLeft:s=>this.getGui().scrollLeft=s,setPinnedContainerWidth:s=>{const i=this.getGui();i.style.width=s,i.style.maxWidth=s,i.style.minWidth=s}};this.createManagedBean(new l$(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){const e=this.pinned=="left",t=this.pinned=="right",s=e?U$:t?j$:K$;this.setTemplate(s),this.eRowContainer=this.eCenterContainer!==ge?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),e.getGui().remove()}setCtrls(e){const t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let s;const i=n=>{const o=n.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),s&&DT(this.eRowContainer,o,s),s=o};for(const n of e){const o=n.instanceId,r=t[o];delete t[o];const a=r||this.createBean(new n$(n));this.headerRowComps[o]=a,this.rowCompsList.push(a),i(a)}for(const n of Object.values(t))this.destroyRowComp(n)}},q$={tag:"div",cls:"ag-header",role:"presentation"},Y$=class extends Et{constructor(){super(q$)}postConstruct(){const e={toggleCss:(i,n)=>this.toggleCss(i,n),setHeightAndMinHeight:i=>{this.getGui().style.height=i,this.getGui().style.minHeight=i}};this.createManagedBean(new QW).setComp(e,this.getGui(),this.getFocusableElement());const s=i=>{this.createManagedBean(i),this.appendChild(i)};s(new Ew("left")),s(new Ew(null)),s(new Ew("right"))}},X$={selector:"AG-HEADER-ROOT",component:Y$},Q$=class extends Et{constructor(e,t,s,i,n){super(),this.cellCtrl=t,this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.gos=e.gos,this.column=t.column,this.rowNode=t.rowNode,this.eRow=i;const o=ls({tag:"div",role:t.getCellAriaRole(),attrs:{"comp-id":`${this.getCompId()}`,"col-id":t.column.colIdSanitised}});this.eCell=o;let r;t.isCellSpanning()?(r=ls({tag:"div",cls:"ag-spanned-cell-wrapper",role:"presentation"}),r.appendChild(o),this.setTemplateFromElement(r)):this.setTemplateFromElement(o),this.cellCssManager=new gD(()=>o),this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);const a={toggleCss:(l,c)=>this.cellCssManager.toggleCss(l,c),setUserStyles:l=>Ep(o,l),getFocusableElement:()=>o,setIncludeSelection:l=>this.includeSelection=l,setIncludeRowDrag:l=>this.includeRowDrag=l,setIncludeDndSource:l=>this.includeDndSource=l,setRenderDetails:(l,c,d)=>this.setRenderDetails(l,c,d),setEditDetails:(l,c,d)=>this.setEditDetails(l,c,d),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue(),refreshEditStyles:(l,c)=>this.refreshEditStyles(l,c)};t.setComp(a,o,r,this.eCellWrapper,s,n,void 0)}getParentOfValue(){return this.eCellValue??this.eCellWrapper??this.eCell}setRenderDetails(e,t,s){var o;if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;const n=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(s||n)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t)),(o=this.rowDraggingComp)==null||o.refreshVisibility()}setEditDetails(e,t,s){e?this.createCellEditorInstance(e,t,s):this.destroyEditor()}removeControls(){const e=this.beans.context;this.checkboxSelectionComp=e.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=e.destroyBean(this.dndSourceComp),this.rowDraggingComp=e.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const t=this.includeRowDrag||this.includeDndSource||this.includeSelection,s=t||this.forceWrapper,i=s&&this.eCellWrapper==null;i&&(this.eCellWrapper=ls({tag:"div",cls:"ag-cell-wrapper",role:"presentation"}),this.eCell.appendChild(this.eCellWrapper));const n=!s&&this.eCellWrapper!=null;n&&(Qn(this.eCellWrapper),this.eCellWrapper=void 0),this.cellCssManager.toggleCss("ag-cell-value",!s);const o=!e&&s,r=o&&this.eCellValue==null;if(r){const c=this.cellCtrl.getCellValueClass();this.eCellValue=ls({tag:"span",cls:c,role:"presentation"}),this.eCellWrapper.appendChild(this.eCellValue)}const a=!o&&this.eCellValue!=null;a&&(Qn(this.eCellValue),this.eCellValue=void 0);const l=i||n||r||a;return l&&this.removeControls(),!e&&t&&this.addControls(),l}addControls(){const{cellCtrl:e,eCellWrapper:t,eCellValue:s,includeRowDrag:i,includeDndSource:n,includeSelection:o}=this,r=a=>{a&&t.insertBefore(a.getGui(),s)};i&&this.rowDraggingComp==null&&(this.rowDraggingComp=e.createRowDragComp(),r(this.rowDraggingComp)),n&&this.dndSourceComp==null&&(this.dndSourceComp=e.createDndSource(),r(this.dndSourceComp)),o&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=e.createSelectionCheckbox(),r(this.checkboxSelectionComp))}createCellEditorInstance(e,t,s){const i=this.editorVersion,n=e.newAgStackInstance(),{params:o}=e;n.then(a=>this.afterCellEditorCreated(i,a,o,t,s)),Wt(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const t=this.getParentOfValue();Ks(t);const s=Eu(e);s!=null&&(t.textContent=s)}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),Qn(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){var s,i;const{context:e}=this.beans;(((s=this.cellEditorPopupWrapper)==null?void 0:s.getGui().contains(qt(this.beans)))||this.cellCtrl.hasBrowserFocus())&&this.eCell.focus({preventScroll:!0}),(i=this.hideEditorPopup)==null||i.call(this),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),Qn(this.cellEditorGui),this.cellCtrl.disableEditorTooltipFeature(),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){var s;if(((s=this.cellRenderer)==null?void 0:s.refresh)==null||this.cellRendererClass!==e.componentClass)return!1;const t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){var o;const t=this.rendererVersion,s=r=>a=>{if(this.rendererVersion!==t||!this.isAlive())return;const c=r.newAgStackInstance(),d=this.afterCellRendererCreated.bind(this,t,r.componentClass);c==null||c.then(d)},{animationFrameSvc:i}=this.beans;let n;if(i!=null&&i.active&&this.firstRender?n=(r,a=!1)=>{i.createTask(s(r),this.rowNode.rowIndex,"p2",r.componentFromFramework,a)}:n=r=>s(r)(),(o=e.params)!=null&&o.deferRender&&!this.cellCtrl.rowNode.group){const{loadingComp:r,onReady:a}=this.cellCtrl.getDeferLoadingCellRenderer();r&&(n(r),a.then(()=>n(e,!0)))}else n(e)}afterCellRendererCreated(e,t,s){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(s);return}this.cellRenderer=s,this.cellRendererClass=t;const n=s.getGui();if(this.cellRendererGui=n,n!=null){const o=this.getParentOfValue();Ks(o),o.appendChild(n)}}afterCellEditorCreated(e,t,s,i,n){var c,d,h;const o=e!==this.editorVersion,{context:r}=this.beans;if(o){r.destroyBean(t);return}if((c=t.isCancelBeforeStart)==null?void 0:c.call(t)){r.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){oe(97,{colId:this.column.getId()}),r.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();const l=i||((d=t.isPopup)==null?void 0:d.call(t));l?this.addPopupCellEditor(s,n):this.addInCellEditor(),this.refreshEditStyles(!0,l),(h=t.afterGuiAttached)==null||h.call(t),this.cellCtrl.enableEditorTooltipFeature(t),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){const{cellCssManager:s}=this;s.toggleCss("ag-cell-inline-editing",e&&!t),s.toggleCss("ag-cell-popup-editing",e&&!!t),s.toggleCss("ag-cell-not-inline-editing",!e||!!t)}addInCellEditor(){const{eCell:e}=this;e.contains(qt(this.beans))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),Ks(this.getParentOfValue()),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){var S;const{gos:s,context:i,popupSvc:n,editSvc:o}=this.beans;s.get("editType")==="fullRow"&&oe(98);const r=this.cellEditorPopupWrapper=i.createBean(o.createPopupEditorWrapper(e)),{cellEditor:a,cellEditorGui:l,eCell:c,rowNode:d,column:h,cellCtrl:u}=this,f=r.getGui();l&&f.appendChild(l);const p=s.get("stopEditingWhenCellsLoseFocus"),m=t??((S=a.getPopupPosition)==null?void 0:S.call(a))??"over",v=s.get("enableRtl"),C={ePopup:f,column:h,rowNode:d,type:"popupCellEditor",eventSource:c,position:m,alignSide:v?"right":"left",keepWithinBounds:!0},b=n.positionPopupByComponent.bind(n,C),y=n.addPopup({modal:p,eChild:f,closeOnEsc:!0,closedCallback:()=>{u.onPopupEditorClosed()},anchorToElement:c,positionCallback:b,ariaOwns:c});y&&(this.hideEditorPopup=y.hideFunc)}detach(){this.getGui().remove()}destroy(){this.destroyRenderer(),this.destroyEditor(),this.removeControls(),super.destroy()}},J$=class extends Et{constructor(e,t,s){super(),this.cellComps=new Map,this.beans=t,this.rowCtrl=e;const i=ls({tag:"div",role:"row",attrs:{"comp-id":`${this.getCompId()}`}});this.setInitialStyle(i,s),this.setTemplateFromElement(i);const n=i.style;this.domOrder=this.rowCtrl.getDomOrder();const o={setDomOrder:r=>this.domOrder=r,setCellCtrls:r=>this.setCellCtrls(r),showFullWidth:r=>this.showFullWidth(r),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,getFullWidthCellRendererParams:()=>this.fullWidthCellRendererParams,toggleCss:(r,a)=>this.toggleCss(r,a),setUserStyles:r=>Ep(i,r),setTop:r=>n.top=r,setTransform:r=>n.transform=r,setRowIndex:r=>i.setAttribute("row-index",r),setRowId:r=>i.setAttribute("row-id",r),setRowBusinessKey:r=>i.setAttribute("row-business-key",r),refreshFullWidth:r=>{var l,c;const a=r();return this.fullWidthCellRendererParams=a,((c=(l=this.fullWidthCellRenderer)==null?void 0:l.refresh)==null?void 0:c.call(l,a))??!1}};e.setComp(o,this.getGui(),s,void 0),this.addDestroyFunc(()=>{e.unsetComp(s)})}setInitialStyle(e,t){const s=this.rowCtrl.getInitialTransform(t);if(s)e.style.setProperty("transform",s);else{const i=this.rowCtrl.getInitialRowTop(t);i&&e.style.setProperty("top",i)}}showFullWidth(e){const t=i=>{if(this.isAlive()){const n=i.getGui();this.getGui().appendChild(n),this.rowCtrl.setupDetailRowAutoHeight(n),this.setFullWidthRowComp(i,e.params)}else this.beans.context.destroyBean(i)};e.newAgStackInstance().then(t)}setCellCtrls(e){const t=new Map(this.cellComps);for(const s of e){const i=s.instanceId;this.cellComps.has(i)?t.delete(i):this.newCellComp(s)}this.destroyCells(t),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const t=[];for(const s of e){const i=this.cellComps.get(s.instanceId);i&&t.push(i.getGui())}_T(this.getGui(),t)}newCellComp(e){var i;const t=((i=this.beans.editSvc)==null?void 0:i.isEditing(e,{withOpenEditor:!0}))??!1,s=new Q$(this.beans,e,this.rowCtrl.printLayout,this.getGui(),t);this.cellComps.set(e.instanceId,s),this.getGui().appendChild(s.getGui())}destroy(){super.destroy(),this.destroyCells(this.cellComps)}setFullWidthRowComp(e,t){this.fullWidthCellRenderer=e,this.fullWidthCellRendererParams=t,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer),this.fullWidthCellRendererParams=void 0})}destroyCells(e){for(const t of e.values()){if(!t)return;const s=t.cellCtrl.instanceId;if(this.cellComps.get(s)!==t)return;t.detach(),t.destroy(),this.cellComps.delete(s)}}};function Z$(e,t,s){const i=!!s.gos.get("enableCellSpan")&&!!t.getSpannedRowCtrls,n={tag:"div",ref:"eContainer",cls:Km(e),role:"rowgroup"};if(t.type==="center"||i){const o={tag:"div",ref:"eSpannedContainer",cls:`ag-spanning-container ${bW(e)}`,role:"presentation"};return n.role="presentation",{tag:"div",ref:"eViewport",cls:`ag-viewport ${qD(e)}`,role:"rowgroup",children:[n,i?o:null]}}return n}var e3=class extends Et{constructor(e){super(),this.eViewport=ge,this.eContainer=ge,this.eSpannedContainer=ge,this.rowCompsNoSpan={},this.rowCompsWithSpan={},this.name=e==null?void 0:e.name,this.options=Tp(this.name)}postConstruct(){this.setTemplate(Z$(this.name,this.options,this.beans));const e={setHorizontalScroll:s=>this.eViewport.scrollLeft=s,setViewportHeight:s=>this.eViewport.style.height=s,setRowCtrls:({rowCtrls:s})=>this.setRowCtrls(s),setSpannedRowCtrls:s=>this.setRowCtrls(s,!0),setDomOrder:s=>{this.domOrder=s},setContainerWidth:s=>{this.eContainer.style.width=s,this.eSpannedContainer&&(this.eSpannedContainer.style.width=s)},setOffsetTop:s=>{const i=`translateY(${s})`;this.eContainer.style.transform=i,this.eSpannedContainer&&(this.eSpannedContainer.style.transform=i)}};this.createManagedBean(new DW(this.name)).setComp(e,this.eContainer,this.eSpannedContainer,this.eViewport)}destroy(){this.setRowCtrls([]),this.setRowCtrls([],!0),super.destroy(),this.lastPlacedElement=null}setRowCtrls(e,t){const{beans:s,options:i}=this,n=t?this.eSpannedContainer:this.eContainer,o=t?{...this.rowCompsWithSpan}:{...this.rowCompsNoSpan},r={};t?this.rowCompsWithSpan=r:this.rowCompsNoSpan=r,this.lastPlacedElement=null;const a=[];for(const l of e){const c=l.instanceId,d=o[c];let h;if(d)h=d,delete o[c];else{if(!l.rowNode.displayed)continue;h=new J$(l,s,i.type)}r[c]=h,a.push([h,!d])}this.removeOldRows(Object.values(o)),this.addRowNodes(a,n)}addRowNodes(e,t){const{domOrder:s}=this;for(const[i,n]of e){const o=i.getGui();s?this.ensureDomOrder(o,t):n&&t.appendChild(o)}}removeOldRows(e){for(const t of e)t.getGui().remove(),t.destroy()}ensureDomOrder(e,t){DT(t,e,this.lastPlacedElement),this.lastPlacedElement=e}},t3={selector:"AG-ROW-CONTAINER",component:e3};function Hu(e,t){return t.map(s=>{const i=`e${s[0].toUpperCase()+s.substring(1)}RowContainer`;return e[i]={name:s},{tag:"ag-row-container",ref:i,attrs:{name:s}}})}function s3(e){const t={},s={tag:"div",ref:"eGridRoot",cls:"ag-root ag-unselectable",children:[{tag:"ag-header-root"},{tag:"div",ref:"eTop",cls:"ag-floating-top",role:"presentation",children:Hu(t,["topLeft","topCenter","topRight","topFullWidth"])},{tag:"div",ref:"eBody",cls:"ag-body",role:"presentation",children:[{tag:"div",ref:"eBodyViewport",cls:"ag-body-viewport",role:"presentation",children:Hu(t,["left","center","right","fullWidth"])},{tag:"ag-fake-vertical-scroll"}]},{tag:"div",ref:"eStickyTop",cls:"ag-sticky-top",role:"presentation",children:Hu(t,["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])},{tag:"div",ref:"eStickyBottom",cls:"ag-sticky-bottom",role:"presentation",children:Hu(t,["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])},{tag:"div",ref:"eBottom",cls:"ag-floating-bottom",role:"presentation",children:Hu(t,["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])},{tag:"ag-fake-horizontal-scroll"},e?{tag:"ag-overlay-wrapper"}:null]};return{paramsMap:t,elementParams:s}}var i3=class extends Et{constructor(){super(...arguments),this.eGridRoot=ge,this.eBodyViewport=ge,this.eStickyTop=ge,this.eStickyBottom=ge,this.eTop=ge,this.eBottom=ge,this.eBody=ge}postConstruct(){const{overlays:e,rangeSvc:t}=this.beans,s=e==null?void 0:e.getOverlayWrapperSelector(),{paramsMap:i,elementParams:n}=s3(!!s);this.setTemplate(n,[...s?[s]:[],NW,GW,X$,t3],i);const o=(a,l)=>{const c=`${a}px`;l.style.minHeight=c,l.style.height=c},r={setRowAnimationCssOnBodyViewport:(a,l)=>this.setRowAnimationCssOnBodyViewport(a,l),setColumnCount:a=>uB(this.getGui(),a),setRowCount:a=>dB(this.getGui(),a),setTopHeight:a=>o(a,this.eTop),setBottomHeight:a=>o(a,this.eBottom),setTopInvisible:a=>this.eTop.classList.toggle("ag-invisible",a),setBottomInvisible:a=>this.eBottom.classList.toggle("ag-invisible",a),setStickyTopHeight:a=>this.eStickyTop.style.height=a,setStickyTopTop:a=>this.eStickyTop.style.top=a,setStickyTopWidth:a=>this.eStickyTop.style.width=a,setStickyBottomHeight:a=>{this.eStickyBottom.style.height=a,this.eStickyBottom.classList.toggle("ag-invisible",a==="0px")},setStickyBottomBottom:a=>this.eStickyBottom.style.bottom=a,setStickyBottomWidth:a=>this.eStickyBottom.style.width=a,setColumnMovingCss:(a,l)=>this.toggleCss(a,l),updateLayoutClasses:(a,l)=>{const c=[this.eBodyViewport.classList,this.eBody.classList];for(const d of c)d.toggle(Un.AUTO_HEIGHT,l.autoHeight),d.toggle(Un.NORMAL,l.normal),d.toggle(Un.PRINT,l.print);this.toggleCss(Un.AUTO_HEIGHT,l.autoHeight),this.toggleCss(Un.NORMAL,l.normal),this.toggleCss(Un.PRINT,l.print)},setAlwaysVerticalScrollClass:(a,l)=>this.eBodyViewport.classList.toggle(QD,l),registerBodyViewportResizeListener:a=>{const l=Cl(this.beans,this.eBodyViewport,a);this.addDestroyFunc(()=>l())},setPinnedTopBottomOverflowY:a=>this.eTop.style.overflowY=this.eBottom.style.overflowY=a,setCellSelectableCss:(a,l)=>{for(const c of[this.eTop,this.eBodyViewport,this.eBottom])c.classList.toggle(a,l)},setBodyViewportWidth:a=>this.eBodyViewport.style.width=a,setGridRootRole:a=>cl(this.eGridRoot,a)};this.ctrl=this.createManagedBean(new kW),this.ctrl.setComp(r,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(t&&Jr(this.gos)||Gg(this.gos))&&cB(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){const s=this.eBodyViewport.classList;s.toggle("ag-row-animation",t),s.toggle("ag-row-no-animation",!t)}},n3={selector:"AG-GRID-BODY",component:i3},o3=class extends ${constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,s){this.view=e,this.eGridHostDiv=t,this.eGui=s,this.eGui.setAttribute("grid-id",this.beans.context.getId());const{dragAndDrop:i,ctrlsSvc:n}=this.beans;i==null||i.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new x0(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const o=Cl(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>o()),n.register("gridCtrl",this)}isDetailGrid(){var t;const e=xD(this.getGui());return((t=e==null?void 0:e.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}getOptionalSelectors(){var t,s,i,n,o;const e=this.beans;return{paginationSelector:(t=e.pagination)==null?void 0:t.getPaginationSelector(),gridHeaderDropZonesSelector:(s=e.registry)==null?void 0:s.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:(i=e.sideBar)==null?void 0:i.getSelector(),statusBarSelector:(n=e.registry)==null?void 0:n.getSelector("AG-STATUS-BAR"),watermarkSelector:(o=e.licenseManager)==null?void 0:o.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){const{view:t}=this;if(e===!1)t.setCursor(null);else{const s=e===1?"ew-resize":"ns-resize";t.setCursor(s)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:s,nextIndex:i}=this.getNextFocusableIndex(t,e);if(i<0||i>=t.length)return!1;if(i===0){if(s>0){const{visibleCols:n,focusSvc:o}=this.beans,r=n.allCols,a=It(r);if(o.focusGridView({column:a,backwards:!0}))return!0}return!1}return this.focusContainer(t[i],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t!=null&&t({fromBottom:!!e}))return!0;const s=this.getFocusableContainers(),{focusSvc:i,visibleCols:n}=this.beans,o=n.allCols;if(e){if(s.length>1)return this.focusContainer(It(s),e);const r=It(o);if(i.focusGridView({column:r,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||Kc(this.beans)){if(i.focusGridView({column:o[0],backwards:e}))return!0;for(let r=1;r<s.length;r++)if(sd(s[r].getGui(),e))return!0;return!1}return i.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){var o;const t=this.view.getFocusableContainers(),{nextIndex:s,indexWithFocus:i}=this.getNextFocusableIndex(t,e);if(i===-1||s<0||s>=t.length)return;const n=t[s];(o=n.setAllowFocus)==null||o.call(n,!0),setTimeout(()=>{var r;(r=n.setAllowFocus)==null||r.call(n,!1)})}isFocusable(){var t,s;const e=this.beans;return!PC(e)||!Kc(e)||!!((s=(t=e.sideBar)==null?void 0:t.comp)!=null&&s.isDisplayed())}getNextFocusableIndex(e,t){const s=qt(this.beans),i=e.findIndex(o=>o.getGui().contains(s)),n=i+(t?-1:1);return{indexWithFocus:i,nextIndex:n}}focusContainer(e,t){var i,n;(i=e.setAllowFocus)==null||i.call(e,!0);const s=sd(e.getGui(),t,!1,!0);return(n=e.setAllowFocus)==null||n.call(e,!1),s}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},r3=class extends a_{constructor(e){super(),this.gridBody=ge,this.sideBar=ge,this.pagination=ge,this.rootWrapperBody=ge,this.eGridDiv=e}postConstruct(){const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:o=>this.addCss(o),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:o=>{this.getGui().style.userSelect=o??"",this.getGui().style.webkitUserSelect=o??""},setCursor:o=>{this.getGui().style.cursor=o??""}},t=this.createManagedBean(new o3),s=t.getOptionalSelectors(),i=this.createTemplate(s),n=[n3,...Object.values(s).filter(o=>!!o)];this.setTemplate(i,n),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>t.focusInnerElement(o),forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:()=>!t.isFocusable()})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{e.remove(),dl(this.gos,"Grid removed from DOM")})}updateLayoutClasses(e,t){const s=this.rootWrapperBody.classList,{AUTO_HEIGHT:i,NORMAL:n,PRINT:o}=Un,{autoHeight:r,normal:a,print:l}=t;s.toggle(i,r),s.toggle(n,a),s.toggle(o,l),this.toggleCss(i,r),this.toggleCss(n,a),this.toggleCss(o,l)}createTemplate(e){const t=e.gridHeaderDropZonesSelector?{tag:"ag-grid-header-drop-zones"}:null,s=e.sideBarSelector?{tag:"ag-side-bar",ref:"sideBar"}:null,i=e.statusBarSelector?{tag:"ag-status-bar"}:null,n=e.watermarkSelector?{tag:"ag-watermark"}:null,o=e.paginationSelector?{tag:"ag-pagination",ref:"pagination"}:null;return{tag:"div",cls:"ag-root-wrapper",role:"presentation",children:[t,{tag:"div",ref:"rootWrapperBody",cls:"ag-root-wrapper-body",role:"presentation",children:[{tag:"ag-grid-body",ref:"gridBody"},s]},i,o,n]}}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){var t;if(!e&&((t=this.pagination)!=null&&t.isDisplayed())){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){const e=[this.gridBody];for(const t of[this.sideBar,this.pagination])t&&e.push(t);return e.filter(t=>Xo(t.getGui()))}},$e=(e,t)=>{for(const s of Object.keys(t))t[s]=e;return t},GR={dispatchEvent:"CommunityCore",...$e("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...$e("GridState",{getState:0,setState:0}),...$e("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...$e("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...$e("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...$e("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...$e("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...$e("ValueCache",{expireValueCache:0}),...$e("CellApi",{getCellValue:0}),...$e("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...$e("Sort",{onSortChanged:0}),...$e("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...$e("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...$e("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...$e("HighlightChanges",{flashCells:0}),...$e("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),...$e("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...$e("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...$e("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...$e("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...$e("ColumnResize",{setColumnWidths:0}),...$e("ColumnHover",{isColumnHovered:0}),...$e("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),...$e("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),...$e("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...$e("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...$e("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),...$e("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...$e("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...$e("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...$e("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0}),...$e("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...$e("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0}),...$e("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...$e("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...$e("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...$e("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...$e("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...$e("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...$e("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...$e("ContextMenu",{showContextMenu:0}),...$e("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...$e("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...$e("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...$e("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...$e("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...$e("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0}),...$e("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...$e("StatusBar",{getStatusPanel:0}),...$e("AiToolkit",{getStructuredSchema:0})},Aw={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},a3=(e,t)=>e.eventSvc.dispatchEvent(t),l_=class{};Reflect.defineProperty(l_,"name",{value:"GridApi"});var l3=class extends ${constructor(){super(),this.beanName="apiFunctionSvc",this.api=new l_,this.fns={...Aw,dispatchEvent:a3},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(GR))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){var n;const{fns:s,beans:i}=this;s!==Aw&&(s[e]=((n=i==null?void 0:i.validation)==null?void 0:n.validateApiFunction(e,t))??t)}makeApi(e){return{[e]:(...t)=>{const{beans:s,fns:{[e]:i}}=this;return i?i(s,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:s,preDestroyLink:i}=this;if(!t)oe(26,{fnName:e,preDestroyLink:i});else{const n=GR[e];s.assertModuleRegistered(n,`api.${e}`)&&oe(27,{fnName:e,module:n})}}destroy(){super.destroy(),this.fns=Aw,this.beans=null}};function c3(e){return e.context.getId()}function d3(e){e.gridDestroySvc.destroy()}function h3(e){return e.gridDestroySvc.destroyCalled}function u3(e,t){return e.gos.get(t)}function g3(e,t,s){c_(e,{[t]:s})}function c_(e,t){e.gos.updateGridOptions({options:t})}function f3(e,t){const s=t.replace(/Module$/,"");return e.gos.isModuleRegistered(s)}var p3={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}},m3=class extends Et{constructor(e,t,s){super(p3),this.rowNode=e,this.column=t,this.eCell=s}postConstruct(){this.getGui().appendChild(Cn("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:s,eCell:i,gos:n}=this,o=s.getColDef().dndSourceOnRowDrag,r=e.dataTransfer;if(r.setDragImage(i,0,0),o){const a=Be(n,{rowNode:t,dragEvent:e});o(a)}else try{const a=JSON.stringify(t.data);r.setData("application/json",a),r.setData("text/plain",a)}catch{}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};function v3(e,t){var s,i;(i=(s=e.rowDragSvc)==null?void 0:s.rowDragFeature)==null||i.addRowDropZone(t)}function C3(e,t){var i,n;const s=(i=e.dragAndDrop)==null?void 0:i.findExternalZone(t.getContainer());s&&((n=e.dragAndDrop)==null||n.removeDropTarget(s))}function w3(e,t){var s,i;return(i=(s=e.rowDragSvc)==null?void 0:s.rowDragFeature)==null?void 0:i.getRowDropZone(t)}function b3(e){const t=e.rowDropHighlightSvc;return t?{row:t.row,dropIndicatorPosition:t.position}:{row:null,dropIndicatorPosition:"none"}}function y3(e,t){const s=e.rowDropHighlightSvc;if(!s)return;const i=t==null?void 0:t.row;let n=t==null?void 0:t.dropIndicatorPosition;n!=="above"&&n!=="below"&&n!=="inside"&&(n="none");const o=i==null?void 0:i.rowIndex;o==null||n==="none"?s.clear():s.set(i,n)}var S3=class extends Lz{shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(e)}},x3=class extends ${constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:s}=this.beans;return s.addDragSource(t),()=>s.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const s=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(s)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},R3={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},E3=class extends Et{constructor(e,t,s,i,n,o=!1){super(),this.cellValueFn=e,this.rowNode=t,this.column=s,this.customGui=i,this.dragStartPixels=n,this.alwaysVisible=o,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){const{beans:e,customGui:t}=this;t?this.setDragElement(t,this.dragStartPixels):(this.setTemplate(R3),this.getGui().appendChild(Cn("rowDrag",e,null)),this.addDragSource()),this.alwaysVisible||this.initCellDrag()}initCellDrag(){const{beans:e,gos:t,rowNode:s}=this,i=this.refreshVisibility.bind(this);this.addManagedPropertyListener("suppressRowDrag",i),this.addManagedListeners(s,{dataChanged:i,cellChanged:i}),this.addManagedListeners(e.eventSvc,t.get("rowDragManaged")?{sortChanged:i,filterChanged:i,columnRowGroupChanged:i,newColumnsLoaded:i}:{newColumnsLoaded:i})}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}refreshVisibility(){if(this.alwaysVisible)return;const e={skipAriaHidden:!0};if(this.isNeverDisplayed()){this.setDisplayed(!1,e);return}const t=this.column;let s=typeof(t==null?void 0:t.getColDef().rowDrag)=="function",i=!t||this.isCustomGui()||t.isRowDrag(this.rowNode);i&&this.rowNode.footer&&this.gos.get("rowDragManaged")&&(i=!1,s=!0),this.setDisplayed(s||i,e),this.setVisible(i,e)}isNeverDisplayed(){var s,i;const{gos:e,beans:t}=this;return!!(e.get("suppressRowDrag")||e.get("rowDragManaged")&&((s=t.rowDragSvc.rowDragFeature)!=null&&s.shouldPreventRowMove())&&!((i=t.dragAndDrop)!=null&&i.hasExternalDropZones()))}getSelectedNodes(){var i;const e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];const s=((i=this.beans.selectionSvc)==null?void 0:i.getSelectedNodes())??[];return s.indexOf(e)!==-1?s:[e]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){if(this.dragSource&&this.removeDragSource(),this.gos.get("rowDragManaged")&&this.rowNode.footer)return;const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:i=>{i==null||i.preventDefault()}})[0]);const s=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:i=>{var a,l;const n=(i==null?void 0:i.dragItem)||this.getDragItem(),o=(((a=i==null?void 0:i.dropTarget)==null?void 0:a.rows.length)??((l=n.rowNodes)==null?void 0:l.length))||1,r=this.getRowDragText(this.column);return r?r(n,o):o===1?this.cellValueFn():`${o} ${s("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},qm=class{constructor(){this.reordered=!1,this.removals=new Set,this.updates=new Set,this.adds=new Set}};function A3(e){const{rowIndex:t,rowPinned:s,column:i}=e;return`${t}.${s??"null"}.${i.getId()}`}function d_(e,t){const s=e.column===t.column,i=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return s&&i&&n}function F3(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(pe(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function P3(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}function T3(e){let t=0,s;const{pinnedRowModel:i,rowModel:n,pageBounds:o}=e;return i!=null&&i.getPinnedTopRowCount()?s="top":n.getRowCount()?(s=null,t=o.getFirstRow()):i!=null&&i.getPinnedBottomRowCount()&&(s="bottom"),s===void 0?null:{rowIndex:t,rowPinned:s}}function D3(e){let t,s=null;const{pinnedRowModel:i,pageBounds:n}=e,o=i==null?void 0:i.getPinnedBottomRowCount(),r=i==null?void 0:i.getPinnedTopRowCount();return o?(s="bottom",t=o-1):e.rowModel.getRowCount()?t=n.getLastRow():r&&(s="top",t=r-1),t===void 0?null:{rowIndex:t,rowPinned:s}}function Zr(e,t){var s,i;switch(t.rowPinned){case"top":return(s=e.pinnedRowModel)==null?void 0:s.getPinnedTopRow(t.rowIndex);case"bottom":return(i=e.pinnedRowModel)==null?void 0:i.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function Bd(e,t){var n;const s=(n=e.spannedRowRenderer)==null?void 0:n.getCellByPosition(t);if(s)return s;const i=e.rowRenderer.getRowByPosition(t);return i?i.getCellCtrl(t.column):null}function _3(e,t,s){const{rowModel:i,pinnedRowModel:n}=e;let o;return o??(o=i==null?void 0:i.getRowNode(t)),s?o??(o=n==null?void 0:n.getPinnedRowById(t,s)):(o??(o=n==null?void 0:n.getPinnedRowById(t,"top")),o??(o=n==null?void 0:n.getPinnedRowById(t,"bottom"))),o}function _v(e,t,s=!1){const{rowIndex:i,rowPinned:n}=t,{pageBounds:o,pinnedRowModel:r,rowModel:a}=e;if(i===0)return n==="top"?null:n==="bottom"&&a.isRowsToRender()?{rowIndex:o.getLastRow(),rowPinned:null}:r!=null&&r.isRowsToRender("top")?{rowIndex:r.getPinnedTopRowCount()-1,rowPinned:"top"}:null;if(s){const l=n?void 0:a.getRow(i);return h_(e,l,!0)??{rowIndex:i-1,rowPinned:n}}return{rowIndex:i-1,rowPinned:n}}function VR(e,t,s=!1){const{rowIndex:i,rowPinned:n}=t,{pageBounds:o,pinnedRowModel:r,rowModel:a}=e;if(M3(e,t))return n==="bottom"?null:n==="top"&&a.isRowsToRender()?{rowIndex:o.getFirstRow(),rowPinned:null}:r!=null&&r.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;if(s){const l=n?void 0:a.getRow(i);return h_(e,l)??{rowIndex:i+1,rowPinned:n}}return{rowIndex:i+1,rowPinned:n}}function h_(e,t,s=!1){const{gos:i,rowRenderer:n}=e;if(!(t!=null&&t.sticky)||!qT(i))return;const o=n.getStickyTopRowCtrls(),r=n.getStickyBottomRowCtrls(),a=!r.some(h=>h.rowNode.rowIndex===t.rowIndex),l=a?o:r,c=(s?-1:1)*(a?-1:1);let d;for(let h=0;h<l.length;h++)if(l[h].rowNode.rowIndex===t.rowIndex){d=l[h+c];break}return d?{rowIndex:d.rowNode.rowIndex,rowPinned:null}:void 0}function M3(e,t){const{rowPinned:s,rowIndex:i}=t,{pinnedRowModel:n,pageBounds:o}=e;return s==="top"?((n==null?void 0:n.getPinnedTopRowCount())??0)-1<=i:s==="bottom"?((n==null?void 0:n.getPinnedBottomRowCount())??0)-1<=i:o.getLastRow()<=i}var $g=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:s,children:i}=e;if(i)for(let n=0;n<i.length;++n)this.depthFirstSearchChangedPath(i[n],t);t(s)}depthFirstSearchEverything(e,t,s){const i=e.childrenAfterGroup;if(i)for(let n=0,o=i.length;n<o;++n){const r=i[n];r.childrenAfterGroup?this.depthFirstSearchEverything(r,t,s):s&&t(r)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,s=!1){this.active&&!s?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,s=0;for(;!this.mapToItems[t.id];){const i={rowNode:t,children:null};this.mapToItems[t.id]=i,s++,t=t.parent}return s}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let s=e;for(;s;){this.nodeIdsToColumns[s.id]||(this.nodeIdsToColumns[s.id]={});for(const i of t)this.nodeIdsToColumns[s.id][i.getId()]=!0;s=s.parent}}linkPathItems(e,t){let s=e;for(let i=0;i<t;i++){const n=this.mapToItems[s.id],o=this.mapToItems[s.parent.id];o.children||(o.children=[]),o.children.push(n),s=s.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const s=this.createPathItems(e);this.linkPathItems(e,s),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const s=this.nodeIdsToColumns[e.id];return t.filter(n=>s[n.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const s=this.nodeIdsToColumns[e.id];return t.filter(n=>!s[n.getId()])}},k3=class{constructor(e,t){this.beans=e,this.groupThrottled=!1,this.scrollChanged=!1,this.scrollChanging=!1,this.oldVScroll=null,this.groupTimer=null,this.groupTarget=null,this.onGroupThrottle=()=>{var i;this.groupTimer=null,this.groupThrottled=!0,(i=this.beans.dragAndDrop)==null||i.nudge()};const s=()=>t.scrollFeature.getVScrollPosition().top;this.autoScroll=new B$({scrollContainer:t.eBodyViewport,scrollAxis:"y",getVerticalPosition:s,setVerticalPosition:i=>t.scrollFeature.setVerticalScrollPosition(i),onScrollCallback:()=>{var o;const i=s();if(this.oldVScroll!==i){this.oldVScroll=i,this.scrollChanging=!0;return}const n=this.scrollChanging;this.scrollChanged=n,this.scrollChanging=!1,n&&((o=this.beans.dragAndDrop)==null||o.nudge(),this.scrollChanged=!1)}})}updateGroup(e,t){var s,i;this.groupTarget&&this.groupTarget!==e&&this.clearGroup(),e&&(t&&this.groupThrottled&&!e.expanded&&((s=e.childrenAfterSort)!=null&&s.length)&&e.isExpandable()&&e.setExpanded(!0,void 0,!0),e.expanded&&((i=e.childrenAfterSort)!=null&&i.length)&&(this.groupThrottled=!0,this.groupTarget=e))}startGroup(e){this.groupTarget=e,this.groupTimer===null&&(this.groupTimer=window.setTimeout(this.onGroupThrottle,this.beans.gos.get("rowDragInsertDelay")))}clearGroup(){this.groupThrottled=!1,this.groupTarget=null;const e=this.groupTimer;e!==null&&(this.groupTimer=null,window.clearTimeout(e))}clear(){this.clearGroup(),this.autoScroll.ensureCleared(),this.oldVScroll=null,this.scrollChanged=!1,this.scrollChanging=!1}},I3=class extends ${constructor(e){super(),this.eContainer=e,this.lastDraggingEvent=null,this.nudger=null}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,t=>{this.nudger=new k3(e,t.gridBodyCtrl)})}destroy(){var e;super.destroy(),(e=this.nudger)==null||e.clear(),this.nudger=null,this.lastDraggingEvent=null,this.eContainer=null}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(e){var t;return((t=e==null?void 0:e.dropTarget)==null?void 0:t.allowed)===!1||this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){const{rowGroupColsSvc:e,filterManager:t,sortSvc:s}=this.beans;return!!(((e==null?void 0:e.columns)??[]).length||(t==null?void 0:t.isAnyFilterPresent())||(s==null?void 0:s.isSortActive()))}getRowNodes(e){var s;if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const i=(s=this.beans.selectionSvc)==null?void 0:s.getSelectedNodes();if(i&&i.indexOf(t)>=0)return i.slice().sort(N3)}return[t]}onDragEnter(e){this.dragging(e,!0)}onDragging(e){this.dragging(e,!1)}dragging(e,t){var r,a,l,c;const{lastDraggingEvent:s,beans:i}=this;if(t){const d=this.getRowNodes(e);e.dragItem.rowNodes=d,$R(d,!0)}this.lastDraggingEvent=e;const n=e.fromNudge,o=this.makeRowsDrop(s,e,n,!1);(r=i.rowDropHighlightSvc)==null||r.fromDrag(e),t&&this.dispatchGridEvent("rowDragEnter",e),this.dispatchGridEvent("rowDragMove",e),o!=null&&o.rowDragManaged&&o.moved&&o.allowed&&o.sameGrid&&!o.suppressMoveWhenRowDragging&&(!n&&!((a=this.nudger)!=null&&a.autoScroll.scrolling)||(l=this.nudger)!=null&&l.scrollChanged)&&this.dropRows(o),(c=this.nudger)==null||c.autoScroll.check(e.event)}isFromThisGrid(e){return e.dragSource.dragSourceDomDataKey===this.gos.getDomDataKey()}makeRowsDrop(e,t,s,i){var y,S;const{beans:n,gos:o}=this,r=this.newRowsDrop(t,i),a=n.rowModel;if(t.dropTarget=r,t.changed=!1,!r)return null;let{sameGrid:l,rootNode:c,source:d,target:h,rows:u}=r;h??(h=a.getRow(a.getRowCount()-1)??null);const f=!!((y=this.beans.groupStage)!=null&&y.treeData)&&l;let p=null;if(h!=null&&h.footer){const R=Ym(a,-1,h)??Ym(a,1,h);p=h.sibling??c,h=R??null}h!=null&&h.detail&&(h=h.parent),r.moved&&(r.moved=d!==h);let m=.5;if(h&&(l&&r.moved&&(p||!f)?m=d.rowIndex>h.rowIndex?-.5:.5:m=(r.y-h.rowTop-h.rowHeight/2)/h.rowHeight||0),!f&&l&&h&&r.moved&&rs(o)){const R=H3(a,r);R&&(m=d.rowIndex>R.rowIndex?-.5:.5,h=R,r.moved&&(r.moved=d!==h))}const v=this.nudger;v==null||v.updateGroup(h,s),f&&!p&&v&&(!h||m>=.5&&h.rowIndex===n.pageBounds.getLastRow()?p=c:r.moved&&this.targetShouldBeParent(h,m,u)&&(v.groupThrottled&&(p=h),!s&&(!p||h&&!h.expanded&&((S=h.childrenAfterSort)!=null&&S.length))&&v.startGroup(h)),p??(p=(h==null?void 0:h.parent)??c));let C=!1;if(p){if(p===h&&p!==c){const R=p.expanded?Ym(a,1,h):null;(R==null?void 0:R.parent)===p?(h=R,m=-.5):C=!0}if(h&&!C){let R=h;for(;R&&R!==c&&R!==p;)h=R,R=R.parent}}r.target=h,r.newParent=p,r.moved&&(r.moved=d!==h);const b=m<0?"above":"below";return r.position=r.moved?C?"inside":b:"none",this.validateRowsDrop(r,f,b,i),t.changed||(t.changed=O3(e==null?void 0:e.dropTarget,r)),r}newRowsDrop(e,t){const{beans:s,gos:i}=this,n=s.rowModel.rootNode,o=rs(i)?i.get("rowDragManaged"):!1,r=i.get("suppressMoveWhenRowDragging"),a=this.isFromThisGrid(e);let{rowNode:l,rowNodes:c}=e.dragItem;if(c||(c=l?[l]:[]),l||(l=c[0]),!l||!n)return null;const d=this.beans.dragAndDrop.isDropZoneWithinThisGrid(e);let h=!0;o&&(!c.length||this.shouldPreventRowMove()||(r||!a)&&!d)&&(h=!1);const u=TR(s,e).y,f=this.getOverNode(u);return{api:s.gridApi,context:s.gridOptions.context,draggingEvent:e,rowDragManaged:o,suppressMoveWhenRowDragging:r,sameGrid:a,withinGrid:d,rootNode:n,moved:l!==f,y:u,overNode:f,overIndex:(f==null?void 0:f.rowIndex)??-1,position:"none",source:l,target:f??null,newParent:null,rows:c,allowed:h,highlight:!t&&o&&r&&(d||!a)}}validateRowsDrop(e,t,s,i){const{rowDragManaged:n,suppressMoveWhenRowDragging:o}=e;t||(e.newParent=null),o&&!e.moved&&(e.allowed=!1);const r=(!n||e.allowed)&&this.gos.get("isRowValidDropPosition");if(r){t&&e.newParent&&zR(e.rows,e.newParent)&&(e.newParent=null);const a=r(e);if(!a)e.allowed=!1;else if(typeof a=="object"){a.rows!==void 0&&(e.rows=a.rows??[]),t&&a.newParent!==void 0&&(e.newParent=a.newParent),a.target!==void 0&&(e.target=a.target),a.position&&(e.position=a.position),a.allowed!==void 0?e.allowed=a.allowed:n||(e.allowed=!0);const l=e.draggingEvent;a.changed&&l&&(l.changed=!0),!i&&a.highlight!==void 0&&(e.highlight=a.highlight)}}n&&(e.rows=this.filterRows(e)),t&&e.newParent&&zR(e.rows,e.newParent)&&(e.newParent=null),o&&(!e.rows.length||e.position==="none")&&(e.allowed=!1),(!e.allowed||!e.newParent)&&e.position==="inside"&&(e.position=s)}targetShouldBeParent(e,t,s){const i=e.rowIndex,n=.25;if(t<-.5+n)return!1;if(t<.5-n)return!0;let o,r=i+1;const a=this.beans.rowModel;do o=a.getRow(r++);while(o!=null&&o.footer);const l=e.childrenAfterGroup;if(o&&o.parent===e&&(l!=null&&l.length)){const c=new Set(s);for(const d of l)if(d.rowIndex!==null&&!c.has(d))return!0}return!1}addRowDropZone(e){if(!e.getContainer()){oe(55);return}const t=this.beans.dragAndDrop;if(t.findExternalZone(e.getContainer())){oe(56);return}const s=e.fromGrid?e:{getContainer:e.getContainer,onDragEnter:e.onDragEnter&&(n=>e.onDragEnter(this.rowDragEvent("rowDragEnter",n))),onDragLeave:e.onDragLeave&&(n=>e.onDragLeave(this.rowDragEvent("rowDragLeave",n))),onDragging:e.onDragging&&(n=>e.onDragging(this.rowDragEvent("rowDragMove",n))),onDragStop:e.onDragStop&&(n=>e.onDragStop(this.rowDragEvent("rowDragEnd",n))),onDragCancel:e.onDragCancel&&(n=>e.onDragCancel(this.rowDragEvent("rowDragCancel",n)))},i={isInterestedIn:n=>n===2,getIconName:()=>"move",external:!0,...s};t.addDropTarget(i),this.addDestroyFunc(()=>t.removeDropTarget(i))}getRowDropZone(e){return{getContainer:this.getContainer.bind(this),onDragEnter:s=>{var i;this.onDragEnter(s),(i=e==null?void 0:e.onDragEnter)==null||i.call(e,this.rowDragEvent("rowDragEnter",s))},onDragLeave:s=>{var i;this.onDragLeave(s),(i=e==null?void 0:e.onDragLeave)==null||i.call(e,this.rowDragEvent("rowDragLeave",s))},onDragging:s=>{var i;this.onDragging(s),(i=e==null?void 0:e.onDragging)==null||i.call(e,this.rowDragEvent("rowDragMove",s))},onDragStop:s=>{var i;this.onDragStop(s),(i=e==null?void 0:e.onDragStop)==null||i.call(e,this.rowDragEvent("rowDragEnd",s))},onDragCancel:s=>{var i;this.onDragCancel(s),(i=e==null?void 0:e.onDragCancel)==null||i.call(e,this.rowDragEvent("rowDragCancel",s))},fromGrid:!0}}getOverNode(e){const{pageBounds:t,rowModel:s}=this.beans,n=e>t.getCurrentPagePixelRange().pageLastPixel?-1:s.getRowIndexAtPixel(e);return n>=0?s.getRow(n):void 0}rowDragEvent(e,t){const s=this.beans,{dragItem:i,dropTarget:n,event:o,vDirection:r}=t,a=(n==null?void 0:n.rootNode)===s.rowModel.rootNode,l=a?n.y:TR(s,t).y,c=a?n.overNode:this.getOverNode(l),d=a?n.overIndex:(c==null?void 0:c.rowIndex)??-1;return{api:s.gridApi,context:s.gridOptions.context,type:e,event:o,node:i.rowNode,nodes:i.rowNodes,overIndex:d,overNode:c,y:l,vDirection:r,rowsDrop:n}}dispatchGridEvent(e,t){const s=this.rowDragEvent(e,t);this.eventSvc.dispatchEvent(s)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e)}onDragStop(e){var s;const t=this.makeRowsDrop(this.lastDraggingEvent,e,!1,!0);this.dispatchGridEvent("rowDragEnd",e),t!=null&&t.allowed&&t.rowDragManaged&&(t.suppressMoveWhenRowDragging||!t.sameGrid||(s=this.nudger)!=null&&s.autoScroll.scrolling)&&this.dropRows(t),this.stopDragging(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e)}stopDragging(e){var t,s;(t=this.nudger)==null||t.clear(),(s=this.beans.rowDropHighlightSvc)==null||s.fromDrag(null),$R(e.dragItem.rowNodes,!1)}dropRows(e){return e.sameGrid?this.csrmMoveRows(e):this.csrmAddRows(e)}csrmAddRows({position:e,target:t,rows:s}){const i=gu(this.gos),n=this.beans.rowModel,o=s.filter(({data:a,rowPinned:l})=>!n.getRowNode((i==null?void 0:i({data:a,level:0,rowPinned:l}))??a.id)).map(({data:a})=>a);if(o.length===0)return!1;const r=t?WR(t)+(e==="above"?0:1):void 0;return n.updateRowData({add:o,addIndex:r}),!0}filterRows({newParent:e,rows:t}){let s;for(let i=0,n=t.length;i<n;++i){let o=!0;const r=t[i];(!r||r.footer||r.rowTop===null&&r!==this.beans.rowModel.getRowNode(r.id)||e&&r.parent!==e&&L3(r,e)||!Xy(r))&&(o=!1),o?s==null||s.push(r):s??(s=t.slice(0,i))}return s??t}csrmMoveRows({position:e,target:t,rows:s,newParent:i,rootNode:n}){let o=!1;const r=new Set;for(const u of s){i&&u.parent!==i&&(u.treeParent=i,o=!0);const f=Xy(u);f&&r.add(f)}if(!o&&r.size===0)return!1;const a=this.beans.focusSvc,l=a.getFocusedCell(),c=l&&Bd(this.beans,l);if(r.size&&this.reorderLeafChildren(r,...this.getMoveRowsBounds(r,t,e==="above"))&&(o=!0),!o)return!1;const d=this.beans.rowModel,h=new qm;return h.reordered=!0,d.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new $g(!1,n),changedRowNodes:h}),c?c.focusCell():a.clearFocusedCell(),!0}getMoveRowsBounds(e,t,s){var a,l;const i=((l=(a=this.beans.rowModel.rootNode)==null?void 0:a._leafs)==null?void 0:l.length)??0;let n=t?WR(t):-1;n<0||n>=i?n=i:s||++n;let o=n,r=Math.min(n,i-1);for(const c of e){const d=c.sourceRowIndex;d<o&&(o=d),d>r&&(r=d)}return[o,n,r]}reorderLeafChildren(e,t,s,i){var l;let n=!1;const o=(l=this.beans.rowModel.rootNode)==null?void 0:l._leafs;if(!e.size||!o)return!1;let r=t;for(let c=t;c<s;++c){const d=o[c];e.has(d)||(d.sourceRowIndex!==r&&(d.sourceRowIndex=r,o[r]=d,n=!0),++r)}let a=i;for(let c=i;c>=s;--c){const d=o[c];e.has(d)||(d.sourceRowIndex!==a&&(d.sourceRowIndex=a,o[a]=d,n=!0),--a)}for(const c of e)c.sourceRowIndex!==r&&(c.sourceRowIndex=r,o[r]=c,n=!0),++r;return n}},Ym=(e,t,s)=>{if(s){const i=e.getRowCount();let n=s.rowIndex+t;for(;n>=0&&n<i;){const o=e.getRow(n);if(!o||!o.footer&&!o.detail)return o;n+=t}}},L3=(e,t)=>{let s=t;for(;s;){if(s===e)return!0;s=s.parent}return!1},zR=(e,t)=>{for(let s=0,i=e.length;s<i;++s)if(e[s].parent!==t)return!1;return!0},WR=e=>{const t=Xy(e);return t!==void 0?t.sourceRowIndex:-1},Xy=e=>e.data?e:HD(e.childrenAfterGroup),O3=(e,t)=>e!==t&&(!e||e.sameGrid!==t.sameGrid||e.allowed!==t.allowed||e.position!==t.position||e.target!==t.target||e.source!==t.source||e.newParent!==t.newParent||!wl(e.rows,t.rows)),N3=({rowIndex:e},{rowIndex:t})=>e!==null&&t!==null?e-t:0,$R=(e,t)=>{for(let s=0,i=(e==null?void 0:e.length)||0;s<i;++s){const n=e[s];n.dragging!==t&&(n.dragging=t,n.dispatchRowEvent("draggingChanged"))}},H3=(e,t)=>{let s=null,i=t.target;if(i&&t.rows.indexOf(i)<0)return null;const n=t.source;if(!i||!n)return null;let o=i.rowIndex-n.rowIndex;const r=o<0?-1:1;o=t.suppressMoveWhenRowDragging?Math.abs(o):1;const a=new Set(t.rows);do{const l=Ym(e,r,i);if(!l)break;a.has(l)||(s=l,--o),i=l}while(o>0);return s},B3=class extends ${constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(e,t){const s=t.createManagedBean(new I3(e)),i=this.beans.dragAndDrop;i.addDropTarget(s),t.addDestroyFunc(()=>i.removeDropTarget(s)),this.rowDragFeature=s}createRowDragComp(e,t,s,i,n,o){return new E3(e,t,s,i,n,o)}createRowDragCompForRow(e,t){if(Jr(this.gos))return;const s=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${s("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,s,i,n,o){const r=this.gos;return r.get("rowDragManaged")&&(!rs(r)||r.get("pagination"))?void 0:this.createRowDragComp(s,e,t,i,n,o)}},G3=class extends ${constructor(){super(...arguments),this.beanName="rowDropHighlightSvc",this.uiLevel=0,this.dragging=!1,this.row=null,this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){const e=this.row,t=this.dragging;!e||(e==null?void 0:e.rowIndex)===null||this.position==="none"?this.clear():this.set(e,this.position),this.dragging=t}destroy(){this.clear(),super.destroy()}clear(){const e=this.row;this.dragging=!1,e&&(this.uiLevel=0,this.position="none",this.row=null,e.dispatchRowEvent("rowHighlightChanged"))}set(e,t){const s=e!==this.row,i=e.uiLevel,n=t!==this.position,o=i!==this.uiLevel;this.dragging=!1,(s||n||o)&&(s&&this.clear(),this.uiLevel=i,this.position=t,this.row=e,e.dispatchRowEvent("rowHighlightChanged"))}fromDrag(e){const t=e==null?void 0:e.dropTarget;if(t){const{highlight:s,target:i,position:n}=t;if(s&&i&&n!=="none"){this.set(i,n),this.dragging=!0;return}}this.dragging&&this.clear()}},u_={moduleName:"Drag",version:fe,beans:[S3]},V3={moduleName:"DragAndDrop",version:fe,dynamicBeans:{dndSourceComp:m3},icons:{rowDrag:"grip"}},g_={moduleName:"SharedDragAndDrop",version:fe,beans:[Nz],dependsOn:[u_],userComponents:{agDragAndDropImage:v$},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},z3={moduleName:"RowDrag",version:fe,beans:[G3,B3],apiFunctions:{addRowDropZone:v3,removeRowDropZone:C3,getRowDropZoneParams:w3,getRowDropPositionIndicator:b3,setRowDropPositionIndicator:y3},dependsOn:[g_]},W3={moduleName:"HorizontalResize",version:fe,beans:[x3],dependsOn:[u_]},$3=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",U3=class extends ${constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:s,executeLaterFuncs:i}=this;if(s.length===0&&i.length===0){e(),t();return}const n=o=>{for(;o.length;){const r=o.pop();r&&r()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),n(s)},0),window.setTimeout(()=>{t(),n(i)},200)})}};function j3(e,t,s){var i;(i=e.colMoves)==null||i.moveColumnByIndex(t,s,"api")}function K3(e,t,s){var i;(i=e.colMoves)==null||i.moveColumns(t,s,"api")}var q3=class extends ${constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;if(t)for(const s of t)s.isPrimary()&&(s.isAnyFunctionActive()||(s.isAllowValue()?this.columnsToAggregate.push(s):s.isAllowRowGroup()?this.columnsToGroup.push(s):s.isAllowPivot()&&this.columnsToPivot.push(s)))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:s,pivotColsSvc:i}=this.beans;this.columnsToAggregate.length>0&&(t==null||t.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop")),this.columnsToGroup.length>0&&(s==null||s.addColumns(this.columnsToGroup,"toolPanelDragAndDrop")),this.columnsToPivot.length>0&&(i==null||i.addColumns(this.columnsToPivot,"toolPanelDragAndDrop"))}onDragCancel(){this.clearColumnsList()}};function Y3(e,t){!t||t.length<=1||t.filter(i=>e.indexOf(i)<0).length>0||t.sort((i,n)=>{const o=e.indexOf(i),r=e.indexOf(n);return o-r})}function X3(e){var s;const t=[...e];for(const i of e){let n=null,o=i.getParent();for(;o!=null&&o.getDisplayedLeafColumns().length===1;)n=o,o=o.getParent();if(n!=null){const a=!!((s=n.getColGroupDef())!=null&&s.marryChildren)?n.getProvidedColumnGroup().getLeafColumns():n.getLeafColumns();for(const l of a)t.includes(l)||t.push(l)}}return t}function Q3(e,t,s,i){const n=i.allCols;let o=null,r=null;for(let a=0;a<e.length;a++){const l=e[a],c=s.getProposedColumnOrder(t,l);if(!s.doesOrderPassRules(c))continue;const d=c.filter(u=>n.includes(u));if(r===null)r=d;else if(!wl(d,r))break;const h=Z3(c);(o===null||h<o.fragCount)&&(o={move:l,fragCount:h})}return o}function f_(e){const{isFromHeader:t,fromLeft:s,xPosition:i,fromEnter:n,fakeEvent:o,pinned:r,gos:a,colModel:l,colMoves:c,visibleCols:d}=e;let{allMovingColumns:h}=e;t&&(h=X3(h));const u=h.slice();Y3(l.getCols(),u);const f=tU({movingCols:u,draggingRight:s,xPosition:i,pinned:r,gos:a,colModel:l,visibleCols:d}),p=J3(u,l);if(f.length===0)return;const m=f[0];if(p!==null&&(t||!n)&&!o&&(!s&&m>=p||s&&m<=p))return;const C=Q3(f,u,c,d);if(!C)return;const b=C.move;if(!(b>l.getCols().length-u.length))return{columns:u,toIndex:b}}function p_(e){const{columns:t,toIndex:s}=f_(e)||{},{finished:i,colMoves:n}=e;return!t||s==null?null:(n.moveColumns(t,s,"uiColumnMoved",i),i?null:{columns:t,toIndex:s})}function J3(e,t){const s=t.getCols(),i=e.map(l=>s.indexOf(l)).sort((l,c)=>l-c),n=i[0];return It(i)-n!==i.length-1?null:n}function Z3(e){function t(i){const n=[];let o=i.getOriginalParent();for(;o!=null;)n.push(o),o=o.getOriginalParent();return n}let s=0;for(let i=0;i<e.length-1;i++){let n=t(e[i]),o=t(e[i+1]);[n,o]=n.length>o.length?[n,o]:[o,n];for(const r of n)o.indexOf(r)===-1&&s++}return s}function eU(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function tU(e){const{movingCols:t,draggingRight:s,xPosition:i,pinned:n,gos:o,colModel:r,visibleCols:a}=e;if(o.get("suppressMovableColumns")||t.some(y=>y.getColDef().suppressMovable))return[];const c=eU(a,n),d=r.getCols(),h=c.filter(y=>t.includes(y)),u=c.filter(y=>!t.includes(y)),f=d.filter(y=>!t.includes(y));let p=0,m=i;if(s){let y=0;for(const S of h)y+=S.getActualWidth();m-=y}if(m>0){for(let y=0;y<u.length;y++){const S=u[y];if(m-=S.getActualWidth(),m<0)break;p++}s&&p++}let v;if(p>0){const y=u[p-1];v=f.indexOf(y)+1}else v=f.indexOf(u[0]),v===-1&&(v=0);const C=[v],b=(y,S)=>y-S;if(s){let y=v+1;const S=d.length-1;for(;y<=S;)C.push(y),y++;C.sort(b)}else{let y=v;const S=d.length-1;let R=d[y];for(;y<=S&&c.indexOf(R)<0;)y++,C.push(y),R=d[y];y=v-1;const A=0;for(;y>=A;)C.push(y),y--;C.sort(b).reverse()}return C}function Qy(e){var c;const{pinned:t,fromKeyboard:s,gos:i,ctrlsSvc:n,useHeaderRow:o,skipScrollPadding:r}=e;let a=(c=n.getHeaderRowContainerCtrl(t))==null?void 0:c.eViewport,{x:l}=e;return a?(s&&(l-=a.getBoundingClientRect().left),i.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),t==null&&!r&&(l+=n.get("center").getCenterViewportScrollLeft()),l):0}function Fw(e,t){for(const s of e)s.moving=t,s.dispatchColEvent("movingChanged","uiColumnMoved")}var UR=7,Jy=100,sm=Jy/2,sU=5,iU=100,nU=class extends ${constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!pe(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,{dragItem:s}=t||{},i=(s==null?void 0:s.columns)??[];for(const n of i){const o=n.getPinned();if(n.getColDef().lockPinned){if(o==e)return"move";continue}const r=s==null?void 0:s.containerType;if(r===e||!e)return"move";if(e&&(!o||r!==e))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,s=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(s,!0,"uiColumnDragged");else{const n=t.visibleState,o=(s||[]).filter(r=>n[r.getId()]&&!r.isVisible());this.setColumnsVisible(o,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(s,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,s=!1,i=!1){const{gos:n,ctrlsSvc:o}=this.beans,r=n.get("suppressMoveWhenColumnDragging");if(i&&!r){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!i&&Wt(e.hDirection))return;const a=Qy({x:e.x,pinned:this.pinned,gos:n,ctrlsSvc:o});t||this.checkCenterForScrolling(a),r?this.handleColumnDragWhileSuppressingMovement(e,t,s,a,i):this.handleColumnDragWhileAllowingMovement(e,t,s,a,i)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,s){if(!(e!=null&&e.length))return;const i=e.filter(n=>!n.getColDef().lockVisible);i.length&&this.beans.colModel.setColsVisible(i,t,s)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:s}=e;this.beans.colMoves.moveColumns(t,s,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,s,i,n){const o=this.getAllMovingColumns(e,!0);if(n){const r=this.isAttemptingToPin(o);r&&this.attemptToPinColumns(o,void 0,!0);const{fromLeft:a,xPosition:l}=this.getNormalisedXPositionInfo(o,r)||{};if(a==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:l,fromEnter:t,fakeEvent:s,fromLeft:a})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,i)}}handleColumnDragWhileAllowingMovement(e,t,s,i,n){const o=this.getAllMovingColumns(e),r=this.normaliseDirection(e.hDirection)==="right",a=e.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:i,fromLeft:r,fromEnter:t,fakeEvent:s}),c=p_({...l,finished:n});c&&(this.lastMovedInfo=c)}getAllMovingColumns(e,t=!1){const s=e.dragSource.getDragItem();let i=null;t?(i=s.columnsInSplit,i||(i=s.columns)):i=s.columns;const n=o=>o.getColDef().lockPinned?o.getPinned()==this.pinned:!0;return i?i.filter(n):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:s,xPosition:i,fromLeft:n,fromEnter:o,fakeEvent:r}=e,{gos:a,colModel:l,colMoves:c,visibleCols:d}=this.beans;return{allMovingColumns:t,isFromHeader:s,fromLeft:n,xPosition:i,pinned:this.pinned,fromEnter:o,fakeEvent:r,gos:a,colModel:l,colMoves:c,visibleCols:d}}highlightHoveredColumn(e,t){var d;const{gos:s,colModel:i}=this.beans,n=s.get("enableRtl"),o=i.getCols().filter(h=>h.isVisible()&&h.getPinned()===this.pinned);let r=null,a=null,l=null;for(const h of o){if(a=h.getActualWidth(),r=this.getNormalisedColumnLeft(h,0,n),r!=null){const u=r+a;if(r<=t&&u>=t){l=h;break}}r=null,a=null}if(l)e.indexOf(l)!==-1&&(l=null);else{for(let h=o.length-1;h>=0;h--){const u=o[h],f=o[h].getParent();if(!f){l=u;break}const p=f==null?void 0:f.getDisplayedLeafColumns();if(p.length){l=It(p);break}}if(!l)return;r=this.getNormalisedColumnLeft(l,0,n),a=l.getActualWidth()}if(((d=this.lastHighlightedColumn)==null?void 0:d.column)!==l&&this.clearHighlighted(),l==null||r==null||a==null)return;let c;t-r<a/2!==n?c=0:c=1,jR(l,c),this.lastHighlightedColumn={column:l,position:c}}getNormalisedXPositionInfo(e,t){const{gos:s,visibleCols:i}=this.beans,n=s.get("enableRtl"),{firstMovingCol:o,column:r,position:a}=this.getColumnMoveAndTargetInfo(e,t,n);if(!o||!r||a==null)return;const l=i.allCols,c=l.indexOf(o),d=l.indexOf(r),h=a===0!==n,u=c<d||c===d&&!h;let f=0;if(h?u&&(f-=1):u||(f+=1),d+f===c)return;const p=l[d+f];if(!p)return;const m=this.getNormalisedColumnLeft(p,20,n);return{fromLeft:u,xPosition:m}}getColumnMoveAndTargetInfo(e,t,s){const i=this.lastHighlightedColumn||{},{firstMovingCol:n,lastMovingCol:o}=oU(e);if(!n||!o||i.column||!t)return{firstMovingCol:n,...i};const a=this.getPinDirection()==="left";return{firstMovingCol:n,position:a?1:0,column:a!==s?n:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,s){const{gos:i,ctrlsSvc:n}=this.beans,o=e.getLeft();if(o==null)return null;const r=e.getActualWidth();return Qy({x:s?o+r-t:o+t,pinned:e.getPinned(),useHeaderRow:s,skipScrollPadding:!0,gos:i,ctrlsSvc:n})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,s=this.failedMoveAttempts>UR;return t&&s||e.some(i=>i.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:s,fromEnter:i,fakeEvent:n,fromLeft:o}=e,r=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:s,fromLeft:o,fromEnter:i,fakeEvent:n}),{columns:a,toIndex:l}=f_(r)||{};a&&l!=null&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(jR(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),s=t.getCenterViewportScrollLeft(),i=s+t.getCenterWidth();let n,o;this.gos.get("enableRtl")?(n=e<s+sm,o=e>i-sm):(o=e<s+sm,n=e>i-sm),this.needToMoveRight=n,this.needToMoveLeft=o,o||n?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),iU),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){var i;let e;this.intervalCount++,e=10+this.intervalCount*sU,e>Jy&&(e=Jy);let t=null;const s=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=s.scrollHorizontally(-e):this.needToMoveRight&&(t=s.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:n,dragAndDrop:o,gos:r}=this.beans;if(this.failedMoveAttempts<=UR+1||!n)return;if(o.setDragImageCompIcon("pinned"),!r.get("suppressMoveWhenColumnDragging")){const a=(i=this.lastDraggingEvent)==null?void 0:i.dragItem.columns;this.attemptToPinColumns(a,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,s=!1){const i=(e||[]).filter(r=>!r.getColDef().lockPinned);if(!i.length)return 0;s&&(t=this.getPinDirection());const{pinnedCols:n,dragAndDrop:o}=this.beans;return n==null||n.setColsPinned(i,t,"uiColumnDragged"),s&&o.nudge(),i.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function jR(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function oU(e){const t=e.length;let s,i;for(let n=0;n<t;n++){if(!s){const o=e[n];o.getLeft()!=null&&(s=o)}if(!i){const o=e[t-1-n];o.getLeft()!=null&&(i=o)}if(s&&i)break}return{firstMovingCol:s,lastMovingCol:i}}var rU=class extends ${constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,s=this.pinned;e.whenReady(this,i=>{let n;const o=i.gridBodyCtrl.eBodyViewport;switch(s){case"left":n=[[o,i.left.eContainer],[i.bottomLeft.eContainer],[i.topLeft.eContainer]];break;case"right":n=[[o,i.right.eContainer],[i.bottomRight.eContainer],[i.topRight.eContainer]];break;default:n=[[o,i.center.eViewport],[i.bottomCenter.eViewport],[i.topCenter.eViewport]];break}this.eSecondaryContainers=n}),this.moveColumnFeature=this.createManagedBean(new nU(s)),this.bodyDropPivotTarget=this.createManagedBean(new q3(s)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},aU=class extends ${constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,s){const i=this.beans.colModel.getCols();if(!i)return;const n=i[e];this.moveColumns([n],t,s)}moveColumns(e,t,s,i=!0){const{colModel:n,colAnimation:o,visibleCols:r,eventSvc:a}=this.beans,l=n.getCols();if(!l)return;if(t>l.length-e.length){oe(30,{toIndex:t});return}o==null||o.start();const c=n.getColsForKeys(e);this.doesMovePassRules(c,t)&&(dR(n.getCols(),c,t),r.refresh(s),a.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,toIndex:t,finished:i,source:s})),o==null||o.finish()}doesMovePassRules(e,t){const s=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(s)}doesOrderPassRules(e){const{colModel:t,gos:s}=this.beans;return!(!aD(e,t.getColTree())||!(n=>{const o=c=>c?c==="left"||c===!0?-1:1:0,r=s.get("enableRtl");let a=r?1:-1,l=!0;for(const c of n){const d=o(c.getColDef().lockPosition);r?d>a&&(l=!1):d<a&&(l=!1),a=d}return l})(e))}getProposedColumnOrder(e,t){const i=this.beans.colModel.getCols().slice();return dR(i,e,t),i}createBodyDropTarget(e,t){return new rU(e,t)}moveHeader(e,t,s,i,n){const{ctrlsSvc:o,gos:r,colModel:a,visibleCols:l,focusSvc:c}=this.beans,d=t.getBoundingClientRect(),h=d.left,u=os(s),f=u?d.width:s.getActualWidth(),p=e==="left"!==r.get("enableRtl"),m=Qy({x:p?h-20:h+f+20,pinned:i,fromKeyboard:!0,gos:r,ctrlsSvc:o}),v=c.focusedHeader;p_({allMovingColumns:u?s.getLeafColumns():[s],isFromHeader:!0,fromLeft:e==="right",xPosition:m,pinned:i,fromEnter:!1,fakeEvent:!1,gos:r,colModel:a,colMoves:this,visibleCols:l,finished:!0});let C;if(u){const b=s.getDisplayedLeafColumns();C=p?b[0]:It(b)}else C=s;if(o.getScrollFeature().ensureColumnVisible(C,"auto"),(!n.isAlive()||r.get("ensureDomOrder"))&&v){let b;if(u){const y=s.getGroupId(),S=s.getLeafColumns();if(!S.length)return;const R=S[0].getParent();if(!R)return;b=lU(R,y)}else b=s;b&&c.focusHeaderPosition({headerPosition:{...v,column:b}})}}setDragSourceForHeader(e,t,s){const{gos:i,colModel:n,dragAndDrop:o,visibleCols:r}=this.beans;let a=!i.get("suppressDragLeaveHidesColumns");const l=os(t),c=l?t.getProvidedColumnGroup().getLeafColumns():[t],h={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:l?()=>dU(t,r.allCols):()=>cU(t),dragItemName:s,onDragStarted:()=>{a=!i.get("suppressDragLeaveHidesColumns"),Fw(c,!0)},onDragStopped:()=>Fw(c,!1),onDragCancelled:()=>Fw(c,!1),onGridEnter:u=>{if(a){const{columns:f=[],visibleState:p}=u??{},m=l?C=>!p||p[C.getColId()]:()=>!0,v=f.filter(C=>!C.getColDef().lockVisible&&m(C));n.setColsVisible(v,!0,"uiColumnMoved")}},onGridExit:u=>{var f;if(a){const p=((f=u==null?void 0:u.columns)==null?void 0:f.filter(m=>!m.getColDef().lockVisible))||[];n.setColsVisible(p,!1,"uiColumnMoved")}}};return o.addDragSource(h,!0),h}};function lU(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function cU(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}function dU(e,t){var a;const s=e.getProvidedColumnGroup().getLeafColumns(),i={};for(const l of s)i[l.getId()]=l.isVisible();const n=[];for(const l of t)s.indexOf(l)>=0&&(n.push(l),to(s,l));for(const l of s)n.push(l);const o=[],r=e.getLeafColumns();for(const l of n)r.indexOf(l)!==-1&&o.push(l);return{columns:n,columnsInSplit:o,visibleState:i,containerType:(a=o[0])==null?void 0:a.pinned}}var hU={moduleName:"ColumnMove",version:fe,beans:[aU,U3],apiFunctions:{moveColumnByIndex:j3,moveColumns:K3},dependsOn:[g_],css:[$3]},uU=class extends ${constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const s=this.getHeaderCellForColumn(e);if(!s)return-1;const i=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||i.push(s),this.getPreferredWidthForElements(i)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const s=document.createElement("form");s.style.position="fixed";const i=this.centerRowContainerCtrl.eContainer;for(const o of e)this.cloneItemIntoDummy(o,s);i.appendChild(s);const n=s.offsetWidth;return s.remove(),t=t??this.gos.get("autoSizePadding"),n+t}getHeaderCellForColumn(e){let t=null;for(const s of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){const i=s.getHtmlElementForColumnHeader(e);i!=null&&(t=i)}return t}cloneItemIntoDummy(e,t){const s=e.cloneNode(!0);s.style.width="",s.style.position="static",s.style.left="";const i=document.createElement("div"),n=i.classList;["ag-header-cell","ag-header-group-cell"].some(a=>s.classList.contains(a))?(n.add("ag-header","ag-header-row"),i.style.position="static"):n.add("ag-row");let r=e.parentElement;for(;r;){if(["ag-header-row","ag-row"].some(l=>r.classList.contains(l))){for(let l=0;l<r.classList.length;l++){const c=r.classList[l];c!="ag-row-position-absolute"&&n.add(c)}break}r=r.parentElement}i.appendChild(s),t.appendChild(i)}},m_={moduleName:"AutoWidth",version:fe,beans:[uU]};function gU(e,t,s=!0,i="api"){var n;(n=e.colResize)==null||n.setColumnWidths(t,!1,s,i)}var fU=class extends ${constructor(e,t,s,i){super(),this.comp=e,this.eResize=t,this.pinned=s,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const{horizontalResizeSvc:e,gos:t,colAutosize:s}=this.beans,i=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(i),!t.get("suppressAutoSize")&&s&&this.addDestroyFunc(s.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:s,resizeRatios:i,groupAfterColumns:n,groupAfterStartWidth:o,groupAfterRatios:r}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=s,this.resizeRatios=i,this.resizeTakeFromCols=n,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=r,this.toggleColumnResizing(!0)}onResizing(e,t,s="uiColumnResized"){const i=this.normaliseDragChange(t),n=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(n,s,e)}getInitialValues(e){var l;const t=c=>c.reduce((d,h)=>d+h.getActualWidth(),0),s=(c,d)=>c.map(h=>h.getActualWidth()/d),i=this.getColumnsToResize(),n=t(i),o=s(i,n),r={columnsToResize:i,resizeStartWidth:n,resizeRatios:o};let a=null;if(e&&(a=((l=this.beans.colGroupSvc)==null?void 0:l.getGroupAtDirection(this.columnGroup,"After"))??null),a){const c=a.getDisplayedLeafColumns(),d=r.groupAfterColumns=c.filter(u=>u.isResizable()),h=r.groupAfterStartWidth=t(d);r.groupAfterRatios=s(d,h)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),s=this.getInitialValues();t>s.resizeStartWidth&&this.resizeColumns(s,t,e,!0)}resizeColumnsFromLocalValues(e,t,s=!0){if(!this.resizeCols||!this.resizeRatios)return;const i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(i,e,t,s)}resizeColumns(e,t,s,i=!0){var h;const{columnsToResize:n,resizeStartWidth:o,resizeRatios:r,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,d=[];if(d.push({columns:n,ratios:r,width:t}),a){const u=t-o;d.push({columns:a,ratios:c,width:l-u})}(h=this.beans.colResize)==null||h.resizeColumnSets({resizeSets:d,finished:i,source:s}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},pU=class extends ${constructor(e,t,s,i,n){super(),this.pinned=e,this.column=t,this.eResize=s,this.comp=i,this.ctrl=n}postConstruct(){const e=[];let t,s;const i=()=>{if(Vt(this.eResize,t),!t)return;const{horizontalResizeSvc:r,colAutosize:a}=this.beans,l=r.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(l),s&&a&&e.push(a.addColumnAutosizeListeners(this.eResize,this.column))},n=()=>{for(const r of e)r();e.length=0},o=()=>{const r=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(r!==t||a!==s)&&(t=r,s=a,n(),i())};o(),this.addDestroyFunc(n),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){const{column:s,lastResizeAmount:i,resizeStartWidth:n,beans:o}=this,r=this.normaliseResizeAmount(t),a=n+r,l=[{key:s,newWidth:a}],{pinnedCols:c,ctrlsSvc:d,colResize:h}=o;if(this.column.getPinned()){const u=(c==null?void 0:c.leftWidth)??0,f=(c==null?void 0:c.rightWidth)??0,p=Ng(d.getGridBodyCtrl().eBodyViewport)-50;if(u+f+(r-i)>p)return}this.lastResizeAmount=r,h==null||h.setColumnWidths(l,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const s=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?s&&(t*=-1):i&&(t*=-1),t}},mU=class extends ${constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,s,i){const n=[],{colModel:o,gos:r,visibleCols:a}=this.beans;for(const l of e){const c=o.getColDefCol(l.key)||o.getCol(l.key);if(!c)continue;if(n.push({width:l.newWidth,ratios:[1],columns:[c]}),r.get("colResizeDefault")==="shift"&&(t=!t),t){const h=a.getColAfter(c);if(!h)continue;const u=c.getActualWidth()-l.newWidth,f=h.getActualWidth()+u;n.push({width:f,ratios:[1],columns:[h]})}}n.length!==0&&this.resizeColumnSets({resizeSets:n,finished:s,source:i})}resizeColumnSets(e){const{resizeSets:t,finished:s,source:i}=e;if(!(!t||t.every(d=>vU(d)))){if(s){const d=t&&t.length>0?t[0].columns:null;fu(this.eventSvc,d,s,i)}return}const o=[],r=[];for(const d of t){const{width:h,columns:u,ratios:f}=d,p={},m={};for(const b of u)r.push(b);let v=!0,C=0;for(;v;){if(C++,C>1e3){Pt(31);break}v=!1;const b=[];let y=0,S=h;u.forEach((A,F)=>{if(m[A.getId()])S-=p[A.getId()];else{b.push(A);const k=f[F];y+=k}});const R=1/y;b.forEach((A,F)=>{const T=F===b.length-1;let k;T?k=S:(k=Math.round(f[F]*h*R),S-=k);const N=A.getMinWidth(),I=A.getMaxWidth();k<N?(k=N,m[A.getId()]=!0,v=!0):I>0&&k>I&&(k=I,m[A.getId()]=!0,v=!0),p[A.getId()]=k})}for(const b of u){const y=p[b.getId()];b.getActualWidth()!==y&&(b.setActualWidth(y,i),o.push(b))}}const a=o.length>0;let l=[];if(a){const{colFlex:d,visibleCols:h,colViewport:u}=this.beans;l=(d==null?void 0:d.refreshFlexedColumns({resizingCols:r,skipSetLeft:!0}))??[],h.setLeftValues(i),h.updateBodyWidths(),u.checkViewportColumns()}const c=r.concat(l);(a||s)&&fu(this.eventSvc,c,s,i,l)}resizeHeader(e,t,s){if(!e.isResizable())return;const i=e.getActualWidth(),n=e.getMinWidth(),o=e.getMaxWidth(),r=Math.min(Math.max(i+t,n),o);this.setColumnWidths([{key:e,newWidth:r}],s,!0,"uiColumnResized")}createResizeFeature(e,t,s,i,n){return new pU(e,t,s,i,n)}createGroupResizeFeature(e,t,s,i){return new fU(e,t,s,i)}};function vU(e){const{columns:t,width:s}=e;let i=0,n=0,o=!0;for(const l of t){const c=l.getMinWidth();i+=c||0;const d=l.getMaxWidth();d>0?n+=d:o=!1}const r=s>=i,a=!o||s<=n;return r&&a}var CU={moduleName:"ColumnResize",version:fe,beans:[mU],apiFunctions:{setColumnWidths:gU},dependsOn:[W3,m_]},wU=class extends ${constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);for(const t of this.columnGroup.getLeafColumns())t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})}removeListenersOnChildrenColumns(){for(const e of this.removeChildListenersFuncs)e();this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",e===0)}},bU=class extends D0{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(e,t,s,i,n){const{column:o,beans:r}=this,{context:a,colNames:l,colHover:c,rangeSvc:d,colResize:h}=r;this.comp=e,n=Fp(this,a,n),this.setGui(t,n),this.displayName=l.getDisplayNameForColumnGroup(o,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(n),this.setupExpandable(n),this.setupTooltip(),this.setupAutoHeight({wrapperElement:i,compBean:n}),this.setupUserComp(),this.addHeaderMouseListeners(n),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const u=this.rowCtrl.pinned,f=o.getProvidedColumnGroup().getLeafColumns();c==null||c.createHoverFeature(n,f,t),d==null||d.createRangeHighlightFeature(n,o,e),n.createManagedBean(new T0(o,t,r)),n.createManagedBean(new wU(e,o)),h?this.resizeFeature=n.createManagedBean(h.createGroupResizeFeature(e,s,u,o)):e.setResizableDisplayed(!1),n.createManagedBean(new Fu(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(n,f),n.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(n),n.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,s=e.getDefinition();return Be(t.gos,{colDef:s,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,s=e.get("groupHeaderHeight");s!=null?s===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(s):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const s of t)e.addManagedListeners(s,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,s)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),s=t[0]===e,i=It(t)===e;if(!s&&!i)return;const n=e.getHighlighted(),o=!!this.rowCtrl.getHeaderCellCtrls().find(l=>l.column.isMoving());let r=!1,a=!1;if(o){const l=this.beans.gos.get("enableRtl"),c=n===1,d=n===0;s&&(l?a=c:r=d),i&&(l?r=d:a=c)}this.comp.toggleCss("ag-header-highlight-before",r),this.comp.toggleCss("ag-header-highlight-after",a)}resizeHeader(e,t){const{resizeFeature:s}=this;if(!s)return;const i=s.getInitialValues(t);s.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){var t;(t=this.resizeFeature)==null||t.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:s,enterpriseMenuFactory:i}=this.beans,n=this.column,o=n.getProvidedColumnGroup(),r=Be(s,{displayName:this.displayName,columnGroup:n,setExpanded:l=>{e.setColumnGroupOpened(o,l,"gridInitializing")},setTooltip:(l,c)=>{s.assertModuleRegistered("Tooltip",3),this.setupTooltip(l,c)},showColumnMenu:(l,c)=>i==null?void 0:i.showMenuAfterButtonClick(o,l,"columnMenu",c),showColumnMenuAfterMouseClick:(l,c)=>i==null?void 0:i.showMenuAfterMouseEvent(o,l,"columnMenu",c),eGridHeader:this.eGui}),a=cV(t,r);a&&this.comp.setUserCompDetails(a)}addHeaderMouseListeners(e){const t=n=>this.handleMouseOverChange(n.type==="mouseenter"),s=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),i=n=>this.handleContextMenuMouseEvent(n,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:s,contextmenu:i})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){var s;this.tooltipFeature=(s=this.beans.tooltipSvc)==null?void 0:s.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const s=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:s,expandableChanged:s})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),s=ZD(t,this.gos,null,e);e.isPadding()?(s.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(n=>n.isSpanHeaderHeight())&&s.push("ag-header-span-height")):(s.push("ag-header-group-cell-with-group"),t!=null&&t.wrapHeaderText&&s.push("ag-header-cell-wrap-text"));for(const i of s)this.comp.toggleCss(i,!0)}setupMovingCss(e){const{column:t}=this,i=t.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());for(const o of i)e.addManagedListeners(o,{movingChanged:n});n()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===H.ENTER){const s=this.column,i=!s.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(s.getProvidedColumnGroup(),i,"uiColumnExpanded")}}setDragSource(e){var t;!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=((t=this.beans.colMoves)==null?void 0:t.setDragSourceForHeader(e,this.column,this.displayName))??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function yU(e,t,s){var i;(i=e.colGroupSvc)==null||i.setColumnGroupOpened(t,s,"api")}function SU(e,t,s){var i;return((i=e.colGroupSvc)==null?void 0:i.getColumnGroup(t,s))??null}function xU(e,t){var s;return((s=e.colGroupSvc)==null?void 0:s.getProvidedColGroup(t))??null}function RU(e,t,s){return e.colNames.getDisplayNameForColumnGroup(t,s)||""}function EU(e){var t;return((t=e.colGroupSvc)==null?void 0:t.getColumnGroupState())??[]}function AU(e,t){var s;(s=e.colGroupSvc)==null||s.setColumnGroupState(t,"api")}function FU(e){var t;(t=e.colGroupSvc)==null||t.resetColumnGroupState("api")}function PU(e){return e.visibleCols.treeLeft}function TU(e){return e.visibleCols.treeCenter}function DU(e){return e.visibleCols.treeRight}function _U(e){return e.visibleCols.getAllTrees()}function MU(e,t){for(let s=0;s<t.length;s++){const i=e.indexOf(t[s]);i>=0&&(e[i]=e[e.length-1],e.pop())}}var kU=class extends ${constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){const{colFlex:s,colModel:i,colGroupSvc:n,colViewport:o,selectionColSvc:r}=this.beans;t||this.buildTrees(i,n),n==null||n.updateOpenClosedVisibility(),this.leftCols=Pw(this.treeLeft),this.centerCols=Pw(this.treeCenter),this.rightCols=Pw(this.treeRight),r==null||r.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(i),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(a=>a.isAutoHeight()),s==null||s.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(i,this.leftCols,this.rightCols,e),o.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(const t of this.allCols){let s=t.getParent();for(;s;){if(!s.isPadding()){const i=s.getProvidedColumnGroup().getLevel()+1;i>e&&(e=i);break}s=s.getParent()}}return e}updateBodyWidths(){const e=ar(this.centerCols),t=ar(this.leftCols),s=ar(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==s)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=s,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,s,i){let n,o;this.gos.get("enableRtl")?(n=t?t[0]:null,o=s?It(s):null):(n=t?It(t):null,o=s?s[0]:null);for(const r of e.getCols())r.setLastLeftPinned(r===n,i),r.setFirstRightPinned(r===o,i)}buildTrees(e,t){const s=e.getColsToShow(),i=s.filter(l=>l.getPinned()=="left"),n=s.filter(l=>l.getPinned()=="right"),o=s.filter(l=>l.getPinned()!="left"&&l.getPinned()!="right"),r=new uD,a=l=>t?t.createColumnGroups(l):l.columns;this.treeLeft=a({columns:i,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:n,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:o,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),s=[],i=[],n=[];for(const o of t){const r=o.getPinned();r?r===!0||r==="left"?s.push(o):n.push(o):i.push(o)}this.ariaOrderColumns=s.concat(i).concat(n)}getAriaColIndex(e){let t;return os(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){for(const e of[this.treeLeft,this.treeRight,this.treeCenter])for(const t of e)os(t)&&t.checkLeft()}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const i=t.getCols().slice(0),n=this.gos.get("enableRtl");for(const o of[this.leftCols,this.rightCols,this.centerCols]){if(n){let r=ar(o);for(const a of o)r-=a.getActualWidth(),a.setLeft(r,e)}else{let r=0;for(const a of o)a.setLeft(r,e),r+=a.getActualWidth()}MU(i,o)}for(const o of i)o.setLeft(null,e)}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:s}}=this;return s.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:s}}=this;return s.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,s,i){const n=[];let o=null;for(let r=0;r<t.length;r++){const a=t[r],l=t.length-r,c=Math.min(a.getColSpan(e),l),d=[a];if(c>1){const u=c-1;for(let f=1;f<=u;f++)d.push(t[r+f]);r+=u}let h;if(s){h=!1;for(const u of d)s(u)&&(h=!0)}else h=!0;h&&(n.length===0&&o&&(i&&i(a))&&n.push(o),n.push(a)),o=a}return n}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,s=t.indexOf(e);return s>0?t[s-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};qc(this.treeCenter,!1,e),qc(this.treeLeft,!1,e),qc(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let s=0;s<t.length;s++){const i=this[t[s]];if(i.length)return e?It(i):i[0]}return null}getColAfter(e){const t=this.allCols,s=t.indexOf(e);return s<t.length-1?t[s+1]:null}getColsLeftWidth(){return ar(this.leftCols)}getDisplayedColumnsRightWidth(){return ar(this.rightCols)}isColAtEdge(e,t){const s=this.allCols;if(!s.length)return!1;const i=t==="first";let n;if(os(e)){const o=e.getDisplayedLeafColumns();if(!o.length)return!1;n=i?o[0]:It(o)}else n=e;return(i?s[0]:It(s))===n}};function qc(e,t,s){if(e)for(let i=0;i<e.length;i++){const n=e[i];if(os(n)){const o=t?n.getDisplayedChildren():n.getChildren();qc(o,t,s)}s(n)}}function Pw(e){const t=[];return qc(e,!0,s=>{ul(s)&&t.push(s)}),t}var IU=class extends ${constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[],t=this.beans.colModel.getColTree();return $r(null,t,s=>{ni(s)&&e.push({groupId:s.getGroupId(),open:s.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const s=[];$r(null,t,i=>{if(ni(i)){const n=i.getColGroupDef(),o={groupId:i.getGroupId(),open:n?n.openByDefault:void 0};s.push(o)}}),this.setColumnGroupState(s,e)}setColumnGroupState(e,t){const{colModel:s,colAnimation:i,visibleCols:n,eventSvc:o}=this.beans;if(!s.getColTree().length)return;i==null||i.start();const a=[];for(const l of e){const c=l.groupId,d=l.open,h=this.getProvidedColGroup(c);h&&h.isExpanded()!==d&&(h.setExpanded(d),a.push(h))}n.refresh(t,!0),a.length&&o.dispatchEvent({type:"columnGroupOpened",columnGroup:a.length===1?a[0]:void 0,columnGroups:a}),i==null||i.finish()}setColumnGroupOpened(e,t,s){let i;ni(e)?i=e.getId():i=e||"",this.setColumnGroupState([{groupId:i,open:t}],s)}getProvidedColGroup(e){let t=null;return $r(null,this.beans.colModel.getColTree(),s=>{ni(s)&&s.getId()===e&&(t=s)}),t}getGroupAtDirection(e,t){const s=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),n=t==="After"?It(i):i[0],o=`getCol${t}`;for(;;){const r=this.beans.visibleCols[o](n);if(!r)return null;const a=this.getColGroupAtLevel(r,s);if(a!==e)return a}}getColGroupAtLevel(e,t){let s=e.getParent(),i,n;for(;i=s.getProvidedColumnGroup().getLevel(),n=s.getPaddingLevel(),!(i+n<=t);)s=s.getParent();return s}updateOpenClosedVisibility(){const e=this.beans.visibleCols.getAllTrees();qc(e,!1,t=>{os(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(os(e))return e;const s=this.beans.visibleCols.getAllTrees(),i=typeof t=="number";let n=null;return qc(s,!1,o=>{if(os(o)){const r=o;let a;i?a=e===r.getGroupId()&&t===r.getPartId():a=e===r.getGroupId(),a&&(n=r)}}),n}createColumnGroups(e){const{columns:t,idCreator:s,pinned:i,oldDisplayedGroups:n,isStandaloneStructure:o}=e,r=this.mapOldGroupsById(n),a=[];let l=t;for(;l.length;){const c=l;l=[];let d=0;const h=u=>{const f=d;d=u;const p=c[f],v=(os(p)?p.getProvidedColumnGroup():p).getOriginalParent();if(v==null){for(let b=f;b<u;b++)a.push(c[b]);return}const C=this.createColumnGroup(v,s,r,i,o);for(let b=f;b<u;b++)C.addChild(c[b]);l.push(C)};for(let u=1;u<c.length;u++){const f=c[u],m=(os(f)?f.getProvidedColumnGroup():f).getOriginalParent(),v=c[d],b=(os(v)?v.getProvidedColumnGroup():v).getOriginalParent();m!==b&&h(u)}d<c.length&&h(c.length)}return o||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,s,i,n,o,r){const a=n.getUniqueKey(t.groupId||null,null),l=cR(this.beans,t,a),c=new $m(l,a,!1,s);this.createBean(c);const d=this.findExistingGroup(t,o);d&&o.splice(d.idx,1);const h=d==null?void 0:d.group;h&&c.setExpanded(h.isExpanded());const u=nD(this.beans,l.children,s+1,e,i,n,o,r);return c.setChildren(u),c}balanceColumnTree(e,t,s,i){const n=[];for(let o=0;o<e.length;o++){const r=e[o];if(ni(r)){const a=r,l=this.balanceColumnTree(a.getChildren(),t+1,s,i);a.setChildren(l),n.push(a)}else{let a,l;for(let c=t;c<s;c++){const d=i.getUniqueKey(null,null),h=cR(this.beans,null,d),u=new $m(h,d,!0,c);this.createBean(u),l&&l.setChildren([u]),l=u,a||(a=l)}if(a&&l)if(n.push(a),e.some(d=>ni(d))){l.setChildren([r]);continue}else{l.setChildren(e);break}n.push(r)}}return n}findDepth(e){let t=0,s=e;for(;s!=null&&s[0]&&ni(s[0]);)t++,s=s[0].getChildren();return t}findMaxDepth(e,t){let s=t;for(let i=0;i<e.length;i++){const n=e[i];if(ni(n)){const o=n,r=this.findMaxDepth(o.getChildren(),t+1);s<r&&(s=r)}}return s}balanceTreeForAutoCols(e,t){const s=[];for(const i of e){let n=i;for(let o=t-1;o>=0;o--){const r=new $m(null,`FAKE_PATH_${i.getId()}}_${o}`,!0,o);this.createBean(r),r.setChildren([n]),n.originalParent=r,n=r}t===0&&(i.originalParent=null),s.push(n)}return s}findExistingGroup(e,t){if(e.groupId!=null)for(let i=0;i<t.length;i++){const n=t[i];if(n.getColGroupDef()&&n.getId()===e.groupId)return{idx:i,group:n}}}createColumnGroup(e,t,s,i,n){const o=e.getGroupId(),r=t.getInstanceIdForKey(o),a=ND(o,r);let l=s[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),pe(l)?l.reset():(l=new Wg(e,o,r,i),n||this.createBean(l)),l}mapOldGroupsById(e){const t={},s=i=>{for(const n of i)if(os(n)){const o=n;t[n.getUniqueId()]=o,s(o.getChildren())}};return e&&s(e),t}setupParentsIntoCols(e,t){for(const s of e??[])if(s.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),s.parent=t,os(s)){const i=s;this.setupParentsIntoCols(i.getChildren(),i)}}},LU={moduleName:"ColumnGroup",version:fe,dynamicBeans:{headerGroupCellCtrl:bU},beans:[IU],apiFunctions:{getAllDisplayedColumnGroups:_U,getCenterDisplayedColumnGroups:TU,getColumnGroup:SU,getColumnGroupState:EU,getDisplayNameForColumnGroup:RU,getLeftDisplayedColumnGroups:PU,getProvidedColumnGroup:xU,getRightDisplayedColumnGroups:DU,resetColumnGroupState:FU,setColumnGroupOpened:yU,setColumnGroupState:AU}},OU={tag:"div",cls:"ag-skeleton-container"},NU=class extends Et{constructor(){super(OU)}init(e){const t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>Lg(e.eParentOfValue)),Lg(e.eParentOfValue,t),e.deferRender?this.setupLoading(e):e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.getLocaleTextFunc();this.getGui().textContent=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");uu(this.getGui(),t)}setupLoading(e){const t=ls({tag:"div",cls:"ag-skeleton-effect"}),s=e.node.rowIndex;if(s!=null){const o=75+25*(s%2===0?Math.sin(s):Math.cos(s));t.style.width=`${o}%`}this.getGui().appendChild(t);const i=this.getLocaleTextFunc(),n=e.deferRender?i("ariaDeferSkeletonCellLoading","Cell is loading"):i("ariaSkeletonCellLoading","Row data is loading");uu(this.getGui(),n)}refresh(e){return!1}},HU={moduleName:"CheckboxCellRenderer",version:fe,userComponents:{agCheckboxCellRenderer:b$}},BU={moduleName:"SkeletonCellRenderer",version:fe,userComponents:{agSkeletonCellRenderer:NU}};function GU(e,t){const s=e.colModel.getColDefCol(t);return s?s.getColDef():null}function VU(e){return e.colModel.getColumnDefs(!0)}function zU(e,t,s){return e.colNames.getDisplayNameForColumn(t,s)||""}function WU(e,t){return e.colModel.getColDefCol(t)}function $U(e){return e.colModel.getColDefCols()}function UU(e,t){return Zn(e,t,"api")}function jU(e){return Ev(e)}function KU(e){IG(e,"api")}function qU(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()}function YU(e){return e.visibleCols.isPinningLeft()}function XU(e){return e.visibleCols.isPinningRight()}function QU(e,t){return e.visibleCols.getColAfter(t)}function JU(e,t){return e.visibleCols.getColBefore(t)}function ZU(e,t,s){e.colModel.setColsVisible(t,s,"api")}function e5(e,t,s){var i;(i=e.pinnedCols)==null||i.setColsPinned(t,s,"api")}function t5(e){return e.colModel.getCols()}function s5(e){return e.visibleCols.leftCols}function i5(e){return e.visibleCols.centerCols}function n5(e){return e.visibleCols.rightCols}function o5(e){return e.visibleCols.allCols}function r5(e){return e.colViewport.getViewportColumns()}function Zy(e,t){if(!e)return;const s=e,i={};for(const n of Object.keys(s)){if(t&&t.indexOf(n)>=0||NT.has(n))continue;const o=s[n];typeof o=="object"&&o!==null&&o.constructor===Object?i[n]=Zy(o):i[n]=o}return i}var a5=class extends ${constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,s,i,n=!1){var l,c;const o=e.slice();t?o.sort((d,h)=>s.indexOf(d)-s.indexOf(h)):(s||n)&&o.sort((d,h)=>i.indexOf(d)-i.indexOf(h));const r=(l=this.rowGroupColsSvc)==null?void 0:l.columns,a=(c=this.pivotColsSvc)==null?void 0:c.columns;return this.buildColumnDefs(o,r,a)}buildColumnDefs(e,t=[],s=[]){const i=[],n={};for(const o of e){const r=this.createDefFromColumn(o,t,s);let a=!0,l=r,c=o.getOriginalParent(),d=null;for(;c;){let h=null;if(c.isPadding()){c=c.getOriginalParent();continue}const u=n[c.getGroupId()];if(u){u.children.push(l),a=!1;break}if(h=this.createDefFromGroup(c),h&&(h.children=[l],n[h.groupId]=h,l=h,c=c.getOriginalParent()),c!=null&&d===c){a=!1;break}d=c}a&&i.push(l)}return i}createDefFromGroup(e){const t=Zy(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,s){const i=Zy(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?s.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=e.isVisible()?void 0:!0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSort()?e.getSort():null,i.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,i}},l5=class extends ${constructor(){super(...arguments),this.beanName="colFlex",this.columnsHidden=!1}refreshFlexedColumns(e={}){const t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);const s=this.flexViewportWidth,{visibleCols:i,colDelayRenderSvc:n}=this.beans,o=i.centerCols;let r=-1;if(e.resizingCols){const m=new Set(e.resizingCols);for(let v=o.length-1;v>=0;v--)if(m.has(o[v])){r=v;break}}let a=!1;const l=o.map((m,v)=>{const C=m.getFlex(),b=C!=null&&C>0&&v>r;return a||(a=b),{col:m,isFlex:b,flex:Math.max(0,C??0),initialSize:m.getActualWidth(),min:m.getMinWidth(),max:m.getMaxWidth(),targetSize:0}});if(a?(n==null||n.hideColumns("colFlex"),this.columnsHidden=!0):this.columnsHidden&&this.revealColumns(n),!s||!a)return[];let c=l.length,d=l.reduce((m,v)=>m+v.flex,0),h=s;const u=(m,v)=>{m.frozenSize=v,m.col.setActualWidth(v,t),h-=v,d-=m.flex,c-=1},f=m=>m.frozenSize!=null;for(const m of l)m.isFlex||u(m,m.initialSize);for(;c>0;){const m=Math.round(d<1?h*d:h);let v,C=0,b=0;for(const R of l){if(f(R))continue;v=R,b+=m*(R.flex/d);const A=b-C,F=Math.round(A);R.targetSize=F,C+=F}v&&(v.targetSize+=m-C);let y=0;for(const R of l){if(f(R))continue;const A=R.targetSize,F=Math.min(Math.max(A,R.min),R.max);y+=F-A,R.violationType=F===A?void 0:F<A?"max":"min",R.targetSize=F}const S=y===0?"all":y>0?"min":"max";for(const R of l)f(R)||(S==="all"||R.violationType===S)&&u(R,R.targetSize)}e.skipSetLeft||i.setLeftValues(t),e.updateBodyWidths&&i.updateBodyWidths();const p=l.filter(m=>m.isFlex&&!m.violationType).map(m=>m.col);if(e.fireResizedEvent){const m=l.filter(C=>C.initialSize!==C.frozenSize).map(C=>C.col),v=l.filter(C=>C.flex).map(C=>C.col);fu(this.eventSvc,m,!0,t,v)}return this.revealColumns(n),p}revealColumns(e){this.columnsHidden&&(e==null||e.revealColumns("colFlex"),this.columnsHidden=!1)}initCol(e){const{flex:t,initialFlex:s}=e.colDef;t!==void 0?e.flex=t:s!==void 0&&(e.flex=s)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}};function xg(e,t,s){if(!t||!e)return;if(!s)return e[t];const i=t.split(".");let n=e;for(let o=0;o<i.length;o++){if(n==null)return;n=n[i[o]]}return n}var c5=["dateTimeString","dateString","text","number","boolean","date"],d5=class extends ${constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===H.SPACE}},date({formatValue:e}){return{cellEditor:"agDateCellEditor",keyCreator:e}},dateString({formatValue:e}){return{cellEditor:"agDateStringCellEditor",keyCreator:e}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object({formatValue:e,colModel:t,colId:s}){return{cellEditorParams:{useFormatter:!0},comparator:(i,n)=>{const o=t.getColDefCol(s),r=o==null?void 0:o.getColDef();if(!o||!r)return 0;const a=i==null?"":e({column:o,node:null,value:i}),l=n==null?"":e({column:o,node:null,value:n});return a===l?0:a>l?1:-1},keyCreator:e}},text(){return{}}}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={},s={},i=d=>h=>{const{column:u,node:f,value:p}=h;let m=u.getColDef().valueFormatter;return m===d.groupSafeValueFormatter&&(m=d.valueFormatter),this.beans.valueSvc.formatValue(u,f,p,m)};for(const d of Object.keys(e)){const h=e[d],u={...h,groupSafeValueFormatter:YR(h,this.gos)};t[d]=u,s[d]=i(u)}const n=this.gos.get("dataTypeDefinitions")??{},o={};for(const d of Object.keys(n)){const h=n[d],u=this.processDataTypeDefinition(h,n,[d],e);u&&(t[d]=u,h.dataTypeMatcher&&(o[d]=h.dataTypeMatcher),s[d]=i(u))}const{valueParser:r,valueFormatter:a}=e.object,{valueParser:l,valueFormatter:c}=t.object;this.hasObjectValueParser=l!==r,this.hasObjectValueFormatter=c!==a,this.formatValueFuncs=s,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(o,e)}sortKeysInMatchers(e,t){const s={...e};for(const i of c5)delete s[i],s[i]=e[i]??t[i].dataTypeMatcher;return s}processDataTypeDefinition(e,t,s,i){let n;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let r=i[o];const a=t[o];if(r&&a&&(r=a),!qR(e,r,o))return;n=KR(r,e)}else{if(s.includes(o)){oe(44);return}const r=t[o];if(!qR(e,r,o))return;const a=this.processDataTypeDefinition(r,t,[...s,o],i);if(!a)return;n=KR(a,e)}return{...n,groupSafeValueFormatter:YR(n,this.gos)}}updateColDefAndGetColumnType(e,t,s){let{cellDataType:i}=t;const{field:n}=t;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,t)?this.inferCellDataType(n,s):!1),!i){e.cellDataType=!1;return}const o=this.dataTypeDefinitions[i];if(!o){oe(47,{cellDataType:i});return}return e.cellDataType=i,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,i,o,s),o.columnTypes}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const s=i=>{t.add(i.key)};e.__addEventListener("columnStateUpdated",s),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",s))}canInferCellDataType(e,t){const{gos:s}=this;if(!rs(s))return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(Tw(t,i))return!1;const n=t.type===null?e.type:t.type;if(n){const o=s.get("columnTypes")??{};if(Rv(n).some(a=>{const l=o[a.trim()];return l&&Tw(l,i)}))return!1}return!Tw(e,i)}inferCellDataType(e,t){if(!e)return;let s;const i=this.getInitialData();if(i){const o=e.includes(".")&&!this.gos.get("suppressFieldDotNotation");s=xg(i,e,o)}else this.initWaitForRowData(t);return s==null?void 0:Object.keys(this.dataTypeMatchers).find(o=>this.dataTypeMatchers[o](s))??"object"}getInitialData(){var t;const e=this.gos.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const s=(t=this.beans.rowModel.rootNode)==null?void 0:t._leafs;if(s!=null&&s.length)return s[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:s,eventSvc:i}=this.beans;t&&s&&(s.shouldQueueResizeOperations=!0);const[n]=this.addManagedEventListeners({rowDataUpdateStarted:o=>{const{firstRowData:r}=o;r&&(n==null||n(),this.isPendingInference=!1,this.processColumnsPendingInference(r,t),this.columnStateUpdatesPendingInference={},t&&(s==null||s.processResizeOperations()),i.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const s=[];this.destroyColumnStateUpdateListeners();const i={},n={};for(const o of Object.keys(this.columnStateUpdatesPendingInference)){const r=this.columnStateUpdatesPendingInference[o],a=this.colModel.getCol(o);if(!a)return;const l=a.getColDef();if(!this.resetColDefIntoCol(a,"cellDataTypeInferred"))return;const c=a.getColDef();if(t&&c.type&&c.type!==l.type){const d=u5(a,r);d.rowGroup&&d.rowGroupIndex==null&&(i[o]=d),d.pivot&&d.pivotIndex==null&&(n[o]=d),s.push(d)}}t&&s.push(...this.generateColumnStateForRowGroupAndPivotIndexes(i,n)),s.length&&Zn(this.beans,{state:s},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const s={},{rowGroupColsSvc:i,pivotColsSvc:n}=this.beans;return i==null||i.restoreColumnOrder(s,e),n==null||n.restoreColumnOrder(s,t),Object.values(s)}resetColDefIntoCol(e,t){const s=e.getUserProvidedColDef();if(!s)return!1;const i=Oy(this.beans,s,e.getColId());return e.setColDef(i,s,t),!0}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return e==="dateTime"||e==="dateTimeString"}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var i;if(t==null)return!0;const s=(i=this.getDataTypeDefinition(e))==null?void 0:i.dataTypeMatcher;return s?s(t):!0}validateColDef(e){const t=s=>oe(48,{property:s});if(e.cellDataType==="object"){const{object:s}=this.dataTypeDefinitions;e.valueFormatter===s.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===s.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){var r;const t=e.cellDataType;if(!t||typeof t!="string")return;const{dataTypeDefinitions:s,beans:i,formatValueFuncs:n}=this,o=s[t];o&&((r=i.colFilter)==null||r.setColDefPropsForDataType(e,o,n[t]))}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,s,i){const n=this.formatValueFuncs[t],o=this.columnDefinitionPropsPerDataType[s.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:s,colId:i,formatValue:n});Object.assign(e,o)}getDateObjectTypeDef(e){const t=this.getLocaleTextFunc(),s=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:i=>Mi(i.newValue&&String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):Qi(i.value,s)??"",dataTypeMatcher:i=>i instanceof Date}}getDateStringTypeDef(e){const t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:s=>Mi(s)??void 0,dateFormatter:s=>Qi(s??null,t)??void 0,valueParser:s=>Um(String(s.newValue))?s.newValue:null,valueFormatter:s=>Um(String(s.value))?String(s.value):"",dataTypeMatcher:s=>typeof s=="string"&&Um(s)}}getDefaultDataTypes(){const e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>{var s,i;return((i=(s=t.newValue)==null?void 0:s.trim)==null?void 0:i.call(s))===""?null:Number(t.newValue)},valueFormatter:t=>t.value==null?"":typeof t.value!="number"||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:t=>typeof t=="number"},text:{baseDataType:"text",valueParser:t=>t.newValue===""?null:Py(t.newValue),dataTypeMatcher:t=>typeof t=="string"},boolean:{baseDataType:"boolean",valueParser:t=>{var s,i;return t.newValue==null?t.newValue:((i=(s=t.newValue)==null?void 0:s.trim)==null?void 0:i.call(s))===""?null:String(t.newValue).toLowerCase()==="true"},valueFormatter:t=>t.value==null?"":String(t.value),dataTypeMatcher:t=>typeof t=="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:{...this.getDateStringTypeDef("dateTimeString"),dataTypeMatcher:t=>typeof t=="string"&&AV(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>Py(t.value)??""}}}destroyColumnStateUpdateListeners(){for(const e of this.columnStateUpdateListenerDestroyFuncs)e();this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function KR(e,t){const s={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(s.columnTypes=[...Rv(e.columnTypes),...Rv(t.columnTypes)]),s}function qR(e,t,s){return t?t.baseDataType!==e.baseDataType?(oe(46),!1):!0:(oe(45,{parentCellDataType:s}),!1)}function YR(e,t){if(e.valueFormatter)return s=>{var i,n;if((i=s.node)!=null&&i.group){const o=(s.colDef.pivotValueColumn??s.column).getAggFunc();if(o){if(o==="first"||o==="last")return e.valueFormatter(s);if(e.baseDataType==="number"&&o!=="count"){if(typeof s.value=="number")return e.valueFormatter(s);if(typeof s.value=="object"){if(!s.value)return;if("toNumber"in s.value)return e.valueFormatter({...s,value:s.value.toNumber()});if("value"in s.value)return e.valueFormatter({...s,value:s.value.value})}}return}}else if(t.get("groupHideOpenParents")&&s.column.isRowGroupActive()&&typeof s.value=="string"&&!((n=e.dataTypeMatcher)!=null&&n.call(e,s.value)))return;return e.valueFormatter(s)}}function h5(e,t,s,i){if(!t[s])return!1;const n=e[s];return n===null?(t[s]=!1,!1):i===void 0?!!n:n===i}function Tw(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([s,i])=>h5(e,t,s,i))}function u5(e,t){const s=hD(e);for(const i of t)delete s[i],i==="rowGroup"?delete s.rowGroupIndex:i==="pivot"&&delete s.pivotIndex;return s}var g5={moduleName:"DataType",version:fe,beans:[d5],dependsOn:[HU]},f5={moduleName:"ColumnFlex",version:fe,beans:[l5]},v_={moduleName:"ColumnApi",version:fe,beans:[a5],apiFunctions:{getColumnDef:GU,getDisplayNameForColumn:zU,getColumn:WU,getColumns:$U,applyColumnState:UU,getColumnState:jU,resetColumnState:KU,isPinning:qU,isPinningLeft:YU,isPinningRight:XU,getDisplayedColAfter:QU,getDisplayedColBefore:JU,setColumnsVisible:ZU,setColumnsPinned:e5,getAllGridColumns:t5,getDisplayedLeftColumns:s5,getDisplayedCenterColumns:i5,getDisplayedRightColumns:n5,getAllDisplayedColumns:o5,getAllDisplayedVirtualColumns:r5,getColumnDefs:VU}};function p5(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,s=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(s,"$1 $2$3").replace(/\./g," ").split(" ").map(n=>n.substring(0,1).toUpperCase()+(n.length>1?n.substring(1,n.length):"")).join(" ")}var m5=class extends ${constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,s=!1){if(!e)return null;const i=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:n}=this.beans;return s&&n?n.getHeaderName(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,s){const i=t==null?void 0:t.getColGroupDef();return i?this.getHeaderName(i,null,e,t,s):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,s,i,n){var r;const o=e.headerValueGetter;if(o){const a=Be(this.gos,{colDef:e,column:t,columnGroup:s,providedColumnGroup:i,location:n});return typeof o=="function"?o(a):typeof o=="string"?((r=this.beans.expressionSvc)==null?void 0:r.evaluate(o,a))??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return p5(e.field)}return""}},v5=class extends ${constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,s=!1){const{visibleCols:i}=this,n=i.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!n)){if(this.scrollWidth=e,this.scrollPosition=t,i.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const r=i.bodyWidth;this.viewportLeft=r-t-e,this.viewportRight=r-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(s)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let s;switch(e){case"left":s=this.rowsOfHeadersToRenderLeft[t];break;case"right":s=this.rowsOfHeadersToRenderRight[t];break;default:s=this.rowsOfHeadersToRenderCenter[t];break}return s??[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||C5(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,s=t+e.getActualWidth(),i=this.viewportLeft-200,n=this.viewportRight+200,o=t<i&&s<i,r=t>n&&s>n;return!o&&!r}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=o=>{const r=o.getLeft();return pe(r)&&r>this.viewportLeft},s=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,n=i.centerCols;return i.getColsForRow(e,n,s,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){const{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;const s=i=>{const n=new Set,o={};for(const r of i){let a=r.getParent();const l=r.isSpanHeaderHeight();for(;a&&!n.has(a);){if(l&&a.isPadding()){a=a.getParent();continue}const d=a.getProvidedColumnGroup().getLevel();o[d]??(o[d]=[]),o[d].push(a),n.add(a),a=a.getParent()}}return o};this.rowsOfHeadersToRenderLeft=s(e),this.rowsOfHeadersToRenderRight=s(t),this.rowsOfHeadersToRenderCenter=s(this.headerColsWithinViewport)}extractViewport(){const e=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),s=this.colsWithinViewportHash!==t;return s&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),s}};function C5(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var w5=class extends ${constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class s{refresh(){return!1}getGui(){return this.eGui}init(n){const o=t(n),r=typeof o;if(r==="string"||r==="number"||r==="boolean"){this.eGui=e0("<span>"+o+"</span>");return}if(o==null){this.eGui=ls({tag:"span"});return}this.eGui=o}}return s}},b5={moduleName:"CellRendererFunction",version:fe,beans:[w5]},y5=class extends xz{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(e!=null)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:s,dynamicBeans:i,selectors:n}=e;if(s){const o=(r,a,l,c)=>{this.agGridDefaults[r]=a,(l||c)&&(this.agGridDefaultOverrides[r]={params:l,processParams:c})};for(const r of Object.keys(s)){let a=s[r];if(yV(a)&&(a=a.getComp(this.beans)),typeof a=="object"){const{classImp:l,params:c,processParams:d}=a;o(r,l,c,d)}else o(r,a)}}this.registerDynamicBeans(i);for(const o of n??[])this.selectors[o.selector]=o;if(t)for(const o of Object.keys(t))this.icons[o]=t[o]}getUserComponent(e,t){var a;const s=(l,c,d,h)=>({componentFromFramework:c,component:l,params:d,processParams:h}),{frameworkOverrides:i}=this.beans,n=i.frameworkComponent(t,this.gos.get("components"));if(n!=null)return s(n,!0);const o=this.jsComps[t];if(o){const l=i.isFrameworkComponent(o);return s(o,l)}const r=this.agGridDefaults[t];if(r){const l=this.agGridDefaultOverrides[t];return s(r,!1,l==null?void 0:l.params,l==null?void 0:l.processParams)}return(a=this.beans.validation)==null||a.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}getDynamicError(e,t){var s;return t?Vo(279,{name:e}):((s=this.beans.validation)==null?void 0:s.missingDynamicBean(e))??Vo(256)}},S5=23,x5=class extends ${constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){var e,t;this.addEventListener("ready",()=>{if(this.updateReady(),this.ready){for(const s of this.readyCallbacks)s(this.params);this.readyCallbacks.length=0}},((t=(e=this.beans.frameworkOverrides).runWhenReadyAsync)==null?void 0:t.call(e))??!1)}updateReady(){const e=Object.values(this.params);this.ready=e.length===S5&&e.every(t=>(t==null?void 0:t.isAlive())??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const s=this.readyCallbacks.indexOf(t);s>=0&&this.readyCallbacks.splice(s,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:s}=this.params;return[e,s,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},R5='.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-virtual-list-item{height:var(--ag-list-item-height);position:absolute;width:100%}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}',E5={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:Ti,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Or,rangeSelectionBackgroundColor:co(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:co(.5),rangeHeaderHighlightColor:iz(.08),rowNumbersSelectedColor:co(.5),rowHoverColor:co(.08),columnHoverColor:co(.05),selectedRowBackgroundColor:co(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:Ti,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:sn(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:sn(.1),iconButtonActiveColor:Or,iconButtonActiveBackgroundColor:co(.28),iconButtonActiveIndicatorColor:Or,menuBorder:{color:sn(.2)},menuBackgroundColor:pn(.03),menuTextColor:pn(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:sn(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Or},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:sn(.2)},panelBackgroundColor:Ti,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:sn(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:sn(.13)},selectCellBackgroundColor:sn(.07),selectCellBorder:{color:sn(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:Ti,filterPanelApplyButtonBackgroundColor:Or,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:Nd,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:Nd,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:sn(.15),statusBarLabelColor:Nd,statusBarLabelFontWeight:500,statusBarValueColor:Nd,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"}},A5=".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}",C_={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},F5={...C_,cellBatchEditTextColor:"#f3d0b3"},P5=()=>Wo({feature:"batchEditStyle",params:C_,css:A5}),T5=P5(),D5=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",_5={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},M5=()=>Wo({feature:"buttonStyle",params:{..._5,buttonBackgroundColor:Ti,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Or}},css:D5}),k5=M5(),I5=".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",L5=()=>Wo({feature:"columnDropStyle",css:I5}),w_=L5(),O5={warn:(...e)=>{oe(e[0],e[1])},error:(...e)=>{Pt(e[0],e[1])},preInitErr:(...e)=>{rg(e[0],e[2],e[1])}},N5=()=>fz(O5).withParams(E5).withPart(k5).withPart(w_).withPart(T5),H5='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',B5=()=>Wo({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:Ti,checkboxUncheckedBorderColor:pn(.3),checkboxCheckedBackgroundColor:Or,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:Ti,checkboxIndeterminateBackgroundColor:pn(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:Ti,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:H5}),G5=B5(),b_=()=>({...Pv,...F5,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:pn(.05),rowHoverColor:co(.15),selectedRowBackgroundColor:co(.2),menuBackgroundColor:pn(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:Nd,findMatchColor:Ti,findActiveMatchColor:Ti,checkboxUncheckedBorderColor:pn(.4),toggleButtonOffBackgroundColor:pn(.4),rowBatchEditBackgroundColor:pn(.1)}),V5=()=>({...b_(),backgroundColor:"#1f2836"}),z5=()=>Wo({feature:"colorScheme",params:Pv,modeParams:{light:Pv,dark:b_(),"dark-blue":V5()}}),W5=z5(),y_={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},S_={"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>'},$5=(e={})=>{let t="";for(const s of[...Object.keys(y_),...Object.keys(S_)]){const i=U5(s,e.strokeWidth);t+=`.ag-icon-${s}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(i)}'); }
`}return t},U5=(e,t=1.5)=>{const s=S_[e];if(s)return s;const i=y_[e];if(!i)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+i+"</svg>"},j5=(e={})=>Wo({feature:"iconSet",css:()=>$5(e)}),K5=j5(),q5=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',Y5=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}",X5={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},Q5=()=>Wo({feature:"inputStyle",params:{...X5,inputBackgroundColor:Ti,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Or},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:pn(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>q5+Y5}),J5=Q5(),Z5='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}',e4={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},t4=()=>Wo({feature:"tabStyle",params:{...e4,tabBarBorder:!0,tabBarBackgroundColor:sn(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:Ti},css:Z5}),s4=t4(),i4=()=>N5().withPart(G5).withPart(W5).withPart(K5).withPart(s4).withPart(J5).withPart(w_).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),n4=i4(),o4={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},r4={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},a4={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},XR={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},QR={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},JR={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},Dw={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},ZR={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0};function l4(e,t){for(const s of t.sort((i,n)=>i.moduleName.localeCompare(n.moduleName))){const i=s.css;i&&e.set(`module-${s.moduleName}`,i)}}var c4=class extends Sz{constructor(){super(...arguments),this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1}initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(XR),this.getSizeEl(QR),this.getSizeEl(JR),this.getSizeEl(Dw),this.getSizeEl(ZR),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(ZR)}getRowBorderWidth(){return this.getCSSVariablePixelValue(Dw)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(XR)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(QR)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(o4)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(r4),s=this.getCSSVariablePixelValue(a4);return e-1+s*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(JR)}refreshRowHeightVariable(){const{eRootDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),s=this.gos.get("rowHeight");if(s==null||isNaN(s)||!isFinite(s))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;const i=`${s}px`;return t!=i?(e.style.setProperty("--ag-line-height",i),s):t!=""?Number.parseFloat(t):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const s=this.measureSizeEl(e);return s==="detached"||s==="no-styles"?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,s),s)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const s=t.offsetWidth;return s===_w?"no-styles":(this.sizesMeasured=!0,s)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=ls({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const s=this.getMeasurementContainer();t=ls({tag:"div"});const{border:i,noWarn:n}=e;i?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${_w}px)`)):t.style.width=`var(${e.cssName}, ${_w}px)`,s.appendChild(t),this.sizeEls.set(e,t);let o=this.measureSizeEl(e);o==="no-styles"&&!n&&oe(9,{variable:e});const r=Cl(this.beans,t,()=>{const a=this.measureSizeEl(e);a==="detached"||a==="no-styles"||(this.lastKnownValues.set(e,a),a!==o&&(o=a,this.fireStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>r()),t}fireStylesChangedEvent(e){e==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(Dw);this.eRootDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}postProcessThemeChange(e,t){e&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&Pt(t?106:239)}getAdditionalCss(){const e=new Map;return e.set("core",[R5]),l4(e,Array.from(jB())),e}getDefaultTheme(){return n4}themeError(e){Pt(240,{theme:e})}},_w=15538,d4=class extends Rz{postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}};function x_(e,t,s){const i=e.visibleCols.headerGroupRowCount;if(s>=i)return{column:t,headerRowIndex:s};let n=t.getParent();for(;n&&n.getProvidedColumnGroup().getLevel()>s;)n=n.getParent();const o=t.isSpanHeaderHeight();return!n||o&&n.isPadding()?{column:t,headerRowIndex:i}:{column:n,headerRowIndex:n.getProvidedColumnGroup().getLevel()}}var h4=class extends ${constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,s=>{this.gridBodyCon=s.gridBodyCtrl});const t=ks(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let s;const{colModel:i,colGroupSvc:n,ctrlsSvc:o}=this.beans;if(typeof e=="string"?(s=i.getCol(e),s||(s=(n==null?void 0:n.getColumnGroup(e))??null)):s=e,!s)return null;const r=o.getHeaderRowContainerCtrl(),a=r==null?void 0:r.getAllCtrls(),l=It(a||[]).type==="filter",c=Ho(this.beans)-1;let d=-1,h=s;for(;h;)d++,h=h.getParent();let u=d;return t&&l&&u===c-1&&u++,u===-1?null:{headerRowIndex:u,column:s}}navigateVertically(e,t){const{focusSvc:s,visibleCols:i}=this.beans,{focusedHeader:n}=s;if(!n)return!1;const{headerRowIndex:o}=n,r=n.column,a=Ho(this.beans),l=this.getHeaderRowType(o),c=i.headerGroupRowCount;let{headerRowIndex:d,column:h,headerRowIndexWithoutSpan:u}=e==="UP"?u4(l,r,o):g4(r,o,c),f=!1;return d<0&&(d=0,h=r,f=!0),d>=a?(d=-1,this.currentHeaderRowWithoutSpan=-1):u!==void 0&&(this.currentHeaderRowWithoutSpan=u),!f&&!h?!1:s.focusHeaderPosition({headerPosition:{headerRowIndex:d,column:h},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,s){const{focusSvc:i,gos:n}=this.beans,o={...i.focusedHeader};let r,a;this.currentHeaderRowWithoutSpan!==-1?o.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=o.headerRowIndex,e==="LEFT"!==n.get("enableRtl")?(a="Before",r=this.findHeader(o,a)):(a="After",r=this.findHeader(o,a));const l=n.getCallback("tabToNextHeader");if(t&&l){const c=i.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:r,direction:a});if(c){const{headerRowIndex:d}=i.focusedHeader||{};d!=null&&d!=o.headerRowIndex&&(this.currentHeaderRowWithoutSpan=d)}return c}return r||!t?i.focusHeaderPosition({headerPosition:r,direction:a,fromTab:t,allowUserOverride:!0,event:s}):this.focusNextHeaderRow(o,a,s)}focusNextHeaderRow(e,t,s){const i=this.beans,n=e.headerRowIndex;let o=null,r;const a=Ho(i),l=this.beans.visibleCols.allCols;if(t==="Before"){if(n<=0)return!1;o=It(l),r=n-1,this.currentHeaderRowWithoutSpan-=1}else o=l[0],r=n+1,this.currentHeaderRowWithoutSpan<a?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:c,headerRowIndex:d}=x_(this.beans,o,r);return d>=a&&(d=-1),i.focusSvc.focusHeaderPosition({headerPosition:{column:c,headerRowIndex:d},direction:t,fromTab:!0,allowUserOverride:!0,event:s})}scrollToColumn(e,t="After"){if(e.getPinned())return;let s;if(os(e)){const i=e.getDisplayedLeafColumns();s=t==="Before"?It(i):i[0]}else s=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(s)}findHeader(e,t){const{colGroupSvc:s,visibleCols:i}=this.beans;let n=e.column;if(n instanceof Wg){const l=n.getDisplayedLeafColumns();n=t==="Before"?l[0]:l[l.length-1]}const o=t==="Before"?i.getColBefore(n):i.getColAfter(n);if(!o)return;const r=i.headerGroupRowCount;if(e.headerRowIndex>=r)return{headerRowIndex:e.headerRowIndex,column:o};const a=s==null?void 0:s.getColGroupAtLevel(o,e.headerRowIndex);return a?a.isPadding()&&o.isSpanHeaderHeight()?{headerRowIndex:i.headerGroupRowCount,column:o}:{headerRowIndex:e.headerRowIndex,column:a??o}:{headerRowIndex:o instanceof pd&&o.isSpanHeaderHeight()?i.headerGroupRowCount:e.headerRowIndex,column:o}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}};function u4(e,t,s){const i=s-1;if(e!=="filter"){const n=t instanceof pd&&t.isSpanHeaderHeight();let o=t.getParent();for(;o&&(o.getProvidedColumnGroup().getLevel()>i||n&&o.isPadding());)o=o.getParent();if(o)return n?{column:o,headerRowIndex:o.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:i}:{column:o,headerRowIndex:i,headerRowIndexWithoutSpan:i}}return{column:t,headerRowIndex:i,headerRowIndexWithoutSpan:i}}function g4(e,t,s){const i=t+1,n={column:e,headerRowIndex:i,headerRowIndexWithoutSpan:i};if(e instanceof Wg){if(i>=s)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:s,headerRowIndexWithoutSpan:i};let r=e.getDisplayedChildren()[0];if(r instanceof Wg&&r.isPadding()){const l=r.getDisplayedLeafColumns()[0];l.isSpanHeaderHeight()&&(r=l)}n.column=r,r instanceof pd&&r.isSpanHeaderHeight()&&(n.headerRowIndex=s,n.headerRowIndexWithoutSpan=i)}return n}var f4=class extends ${constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(DV(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy(qt(this.beans),i_)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){const e=qt(this.beans);return this.isDomDataPresentInHierarchy(e,Tv)?!0:this.isDomDataPresentInHierarchy(e,Dv)}isDomDataPresentInHierarchy(e,t){let s=e;for(;s;){if(KT(this.gos,s,t))return!0;s=s.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:s,column:i}=e,n={rowIndex:t,rowPinned:s,column:i,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:s});return o&&(n.isFullWidthCell=o.isFullWidth()),n}clearFocusedCell(){if(this.focusedCell==null)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:s,rowPinned:i,forceBrowserFocus:n=!1,preventScrollOnBrowserFocus:o=!1,sourceEvent:r}=e,a=this.colModel.getCol(t);if(!a){this.focusedCell=null;return}this.focusedCell={rowIndex:s,rowPinned:zr(i),column:a};const l=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:"cellFocused",...l,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:n,preventScrollOnBrowserFocus:o,sourceEvent:r}),this.previousCellFocusParams=l}isCellFocused(e){return this.focusedCell==null?!1:d_(e,this.focusedCell)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;const{column:t,rowCtrl:{rowIndex:s,pinned:i}}=e,{column:n,headerRowIndex:o}=this.focusedHeader;return t===n&&s===o&&i==n.getPinned()}focusHeaderPosition(e){var c;if(this.setFocusRecovered(),Kc(this.beans))return!1;const{direction:t,fromTab:s,allowUserOverride:i,event:n,fromCell:o,rowWithoutSpanValue:r,scroll:a=!0}=e;let{headerPosition:l}=e;if(o&&((c=this.filterManager)!=null&&c.isAdvFilterHeaderActive()))return this.focusAdvancedFilter(l);if(i){const d=this.focusedHeader,h=Ho(this.beans);if(s){const u=this.gos.getCallback("tabToNextHeader");u&&(l=this.getHeaderPositionFromUserFunc({userFunc:u,direction:t,currentPosition:d,headerPosition:l,headerRowCount:h}))}else{const u=this.gos.getCallback("navigateToNextHeader");if(u&&n){const f={key:n.key,previousHeaderPosition:d,nextHeaderPosition:l,headerRowCount:h,event:n};l=u(f)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:t,event:n,fromCell:o,rowWithoutSpanValue:r,scroll:a}):!1}focusHeaderPositionFromUserFunc(e){if(Kc(this.beans))return!1;const{userFunc:t,headerPosition:s,direction:i,event:n}=e,o=this.focusedHeader,r=Ho(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:i,currentPosition:o,headerPosition:s,headerRowCount:r});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:i,event:n})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:s,currentPosition:i,headerPosition:n,headerRowCount:o}=e,a=t({backwards:s==="Before",previousHeaderPosition:i,nextHeaderPosition:n,headerRowCount:o});return a===!0?i:a===!1?null:a}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:s,fromCell:i,rowWithoutSpanValue:n,event:o,scroll:r=!0}=e,{column:a,headerRowIndex:l}=t,{filterManager:c,ctrlsSvc:d,headerNavigation:h}=this.beans;if(this.focusedHeader&&XW(e.headerPosition,this.focusedHeader))return!1;if(l===-1)return c!=null&&c.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:a,event:o});r&&(h==null||h.scrollToColumn(a,s));const u=d.getHeaderRowContainerCtrl(a.getPinned()),f=(u==null?void 0:u.focusHeader(t.headerRowIndex,a,o))||!1;return h&&f&&(n!=null||i)&&(h.currentHeaderRowWithoutSpan=n??-1),f}focusFirstHeader(){var s;if((s=this.overlays)!=null&&s.isExclusive()&&this.focusOverlay())return!0;const e=this.visibleCols.allCols[0];if(!e)return!1;const t=x_(this.beans,e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){var i;if((i=this.overlays)!=null&&i.isExclusive()&&this.focusOverlay(!0))return!0;const t=Ho(this.beans)-1,s=It(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:s},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){var t;return(t=this.filterManager)!=null&&t.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===zr(t)}focusOverlay(e){var s,i;const t=((s=this.overlays)==null?void 0:s.isVisible())&&((i=this.overlays.eWrapper)==null?void 0:i.getGui());return!!t&&sd(t,e)}focusGridView(e){var o,r,a,l,c,d;const{backwards:t=!1,canFocusOverlay:s=!0,event:i}=e;if((o=this.overlays)!=null&&o.isExclusive())return s&&this.focusOverlay(t);if(PC(this.beans))return t&&!Kc(this.beans)?this.focusLastHeader():s&&this.focusOverlay(t)?!0:t?!1:mu(this.beans,t);const n=t?D3(this.beans):T3(this.beans);if(n){const h=e.column??((r=this.focusedHeader)==null?void 0:r.column),{rowIndex:u,rowPinned:f}=n,p=Zr(this.beans,n);if(!h||!p||u==null)return!1;if(h.isSuppressNavigable(p)){const m=this.gos.get("enableRtl");let v;return!i||i.key===H.TAB?v=m?H.LEFT:H.RIGHT:v=i.key,(a=this.beans.navigation)==null||a.navigateToNextCell(null,v,{rowIndex:u,column:h,rowPinned:f||null},!0),!0}if((l=this.navigation)==null||l.ensureCellVisible({rowIndex:u,column:h,rowPinned:f}),t){const m=this.rowRenderer.getRowByPosition(n);if(m!=null&&m.isFullWidth()&&((c=this.navigation)!=null&&c.tryToFocusFullWidthRow(n,t)))return!0}return this.setFocusedCell({rowIndex:u,column:h,rowPinned:zr(f),forceBrowserFocus:!0}),(d=this.beans.rangeSvc)==null||d.setRangeToCell({rowIndex:u,rowPinned:f,column:h}),!0}return!!(s&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){var t;return this.advFilterFocusColumn=e==null?void 0:e.column,((t=this.beans.advancedFilter)==null?void 0:t.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(e,t){var i;const s=(t?void 0:this.advFilterFocusColumn)??((i=this.visibleCols.allCols)==null?void 0:i[0]);return e?this.focusHeaderPosition({headerPosition:{column:s,headerRowIndex:Ho(this.beans)-1}}):this.focusGridView({column:s})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},p4=class extends ${constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.horizontalScrollShowing=this.gos.get("alwaysShowHorizontalScroll")===!0,this.verticalScrollShowing=this.gos.get("alwaysShowVerticalScroll")===!0,this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;e!=null&&e.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){var s;const e=this.ctrlsSvc.get("center");if(!e||(s=this.colAnimation)!=null&&s.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),s=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==s)&&(this.horizontalScrollGap=t,this.verticalScrollGap=s,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),s=typeof e=="number"&&e>=0?e:xV();s!=null&&(this.scrollbarWidth=s,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},m4=class extends ${constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){var i;if(this.destroyCalled)return;const{stateSvc:e,ctrlsSvc:t,context:s}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:(e==null?void 0:e.getState())??{}}),this.destroyCalled=!0,(i=t.get("gridCtrl"))==null||i.destroyGridUi(),s.destroy(),super.destroy()}},Xm=new Set(["gridPreDestroyed","fillStart","pasteStart"]),v4=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"],_0=v4.reduce((e,t)=>(e[t]=fG(t),e),{}),Bu=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),C4={tag:"span",cls:"ag-sort-indicator-container",children:[Bu("Order","order"),Bu("Asc","ascending-icon"),Bu("Desc","descending-icon"),Bu("Mixed","mixed-icon"),Bu("None","none-icon")]},M0=class extends Et{constructor(e){super(),this.eSortOrder=ge,this.eSortAsc=ge,this.eSortDesc=ge,this.eSortMixed=ge,this.eSortNone=ge,e||this.setTemplate(C4)}attachCustomElements(e,t,s,i,n){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=s,this.eSortMixed=i,this.eSortNone=n}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const s=this.updateIcons.bind(this),i=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",s),this.addManagedEventListeners({newColumnsLoaded:s,sortChanged:i,columnRowGroupChanged:i}),this.onSortChanged()}addInIcon(e,t,s){if(t==null)return;const i=Cn(e,this.beans,s);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortNone:s,column:i,gos:n,beans:o}=this,r=o.sortSvc.getDisplaySortForColumn(i);if(e&&Vt(e,r==="asc",{skipAriaHidden:!0}),t&&Vt(t,r==="desc",{skipAriaHidden:!0}),s){const a=!i.getColDef().unSortIcon&&!n.get("unSortIcon"),l=r==null;Vt(s,!a&&l,{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:s}=this;this.addInIcon("sortUnSort",e,t);const i=t.getColDef().showRowGroup;Lo(s)&&i&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:s}=this;if(e){const i=t.sortSvc.getDisplaySortForColumn(s)==="mixed";Vt(e,i,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:s}}=this;if(!e)return;const i=s.getColumnsWithSortingOrdered(),n=s.getDisplaySortIndexForColumn(t)??-1,o=i.some(a=>s.getDisplaySortIndexForColumn(a)??!1),r=n>=0&&o;Vt(e,r,{skipAriaHidden:!0}),n>=0?e.textContent=(n+1).toString():Ks(e)}},w4={selector:"AG-SORT-INDICATOR",component:M0},Ug=["asc","desc",null],b4=class extends ${constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,s){const i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,s)}progressSortFromEvent(e,t){const i=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,i,"uiColumnSorted")}setSortForColumn(e,t,s,i){var d;t!=="asc"&&t!=="desc"&&(t=null);const{gos:n,showRowGroupCols:o}=this.beans,r=Lo(n);let a=[e];if(r&&e.getColDef().showRowGroup){const h=(d=o==null?void 0:o.getSourceColumnsForGroupColumn)==null?void 0:d.call(o,e),u=h==null?void 0:h.filter(f=>f.isSortable());u&&(a=[e,...u])}for(const h of a)this.setColSort(h,t,i);const l=(s||n.get("alwaysMultiSort"))&&!n.get("suppressMultiSort"),c=[];if(!l){const h=this.clearSortBarTheseColumns(a,i);c.push(...h)}this.updateSortIndex(e),c.push(...a),this.dispatchSortChangedEvents(i,c)}updateSortIndex(e){const{gos:t,colModel:s,showRowGroupCols:i}=this.beans,n=Lo(t),o=i==null?void 0:i.getShowRowGroupCol(e.getId()),r=n&&o||e,a=this.getColumnsWithSortingOrdered();s.forAllCols(d=>this.setColSortIndex(d,null));const l=a.filter(d=>n&&d.getColDef().showRowGroup?!1:d!==r);(r.getSort()?[...l,r]:l).forEach((d,h)=>this.setColSortIndex(d,h))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{t.getSort()&&(e=!0)}),e}dispatchSortChangedEvents(e,t){const s={type:"sortChanged",source:e};t&&(s.columns=t),this.eventSvc.dispatchEvent(s)}clearSortBarTheseColumns(e,t){const s=[];return this.beans.colModel.forAllCols(i=>{e.includes(i)||(i.getSort()&&s.push(i),this.setColSort(i,void 0,t))}),s}getNextSortDirection(e){const t=e.getColDef().sortingOrder??this.gos.get("sortingOrder")??Ug,s=t.indexOf(e.getSort()),i=s<0,n=s==t.length-1;return i||n?t[0]:t[s+1]}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:s,rowGroupColsSvc:i}=this.beans;let n=[];if(t.forAllCols(c=>{c.getSort()&&n.push(c)}),t.isPivotMode()){const c=Lo(e);n=n.filter(d=>{const h=!!d.getAggFunc(),u=!d.isPrimary(),f=c?s==null?void 0:s.getShowRowGroupCol(d.getId()):d.getColDef().showRowGroup;return h||u||f})}const o=(i==null?void 0:i.columns.filter(c=>!!c.getSort()))??[],r={};n.forEach((c,d)=>r[c.getId()]=d),n.sort((c,d)=>{const h=c.getSortIndex(),u=d.getSortIndex();if(h!=null&&u!=null)return h-u;if(h==null&&u==null){const f=r[c.getId()],p=r[d.getId()];return f>p?1:-1}else return u==null?-1:1});const a=Lo(e)&&!!o.length;a&&(n=[...new Set(n.map(c=>(s==null?void 0:s.getShowRowGroupCol(c.getId()))??c))]);const l=new Map;if(n.forEach((c,d)=>l.set(c,d)),a)for(const c of o){const d=s.getShowRowGroupCol(c.getId());l.set(c,l.get(d))}return l}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=Lo(this.gos),s=!!e.getColDef().showRowGroup;return t&&s}getDisplaySortForColumn(e){var r;const t=(r=this.beans.showRowGroupCols)==null?void 0:r.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSort();const i=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,n=i[0].getSort();return i.every(a=>a.getSort()==n)?n:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,s){let i=0;e.addManagedListeners(t,{movingChanged:()=>{i=Date.now()}}),s&&e.addManagedElementListeners(s,{click:o=>{const r=t.isMoving(),l=Date.now()-i<50;r||l||this.progressSortFromEvent(t,o)}});const n=()=>{var r;const o=t.getSort();if(e.toggleCss("ag-header-cell-sorted-asc",o==="asc"),e.toggleCss("ag-header-cell-sorted-desc",o==="desc"),e.toggleCss("ag-header-cell-sorted-none",!o),t.getColDef().showRowGroup){const a=(r=this.beans.showRowGroupCols)==null?void 0:r.getSourceColumnsForGroupColumn(t),c=!(a==null?void 0:a.every(d=>t.getSort()==d.getSort()));e.toggleCss("ag-header-cell-sorted-mixed",c)}};e.addManagedEventListeners({sortChanged:n,columnRowGroupChanged:n})}initCol(e){const{sort:t,initialSort:s,sortIndex:i,initialSortIndex:n}=e.colDef;t!==void 0?(t==="asc"||t==="desc")&&(e.sort=t):(s==="asc"||s==="desc")&&(e.sort=s),i!==void 0?i!==null&&(e.sortIndex=i):n!==null&&(e.sortIndex=n)}updateColSort(e,t,s){t!==void 0&&(t==="desc"||t==="asc"?this.setColSort(e,t,s):this.setColSort(e,void 0,s))}setColSort(e,t,s){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",s)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new M0(e)}getSortIndicatorSelector(){return w4}},Zd={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"};function eE(e){return`"${e}"`}var y4=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."},rowGroupingHierarchy:{version:"34.3",message:"Use `colDef.groupHierarchy` instead."}}),S4={aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t})=>t?typeof e=="string"?Zd[e]??"CustomEditor":"CustomEditor":null,cellRenderer:({cellRenderer:e})=>typeof e!="string"?null:Zd[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&typeof e!="string"&&typeof e!="boolean"?"CustomFilter":typeof e=="string"?Zd[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{var s;const t=["columnsMenuTab","generalMenuTab"];return(s=e.menuTabs)!=null&&s.some(i=>t.includes(i))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"},x4=()=>({autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(t,{paginationAutoPageSize:s})=>s?"colDef.autoHeight is not supported with paginationAutoPageSize.":null},cellRendererParams:{validate:t=>(t.rowGroup!=null||t.rowGroupIndex!=null||t.cellRenderer==="agGroupCellRenderer")&&"checkbox"in t.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},flex:{validate:(t,s)=>s.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(t,{rowSelection:s})=>s==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:s})=>s==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:s})=>s==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerValueGetter:{validate:t=>{const s=t.headerValueGetter;return typeof s=="function"||typeof s=="string"?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:t})=>{if(t){if(t.smallDown)return Vo(262);if(t.smallLeft)return Vo(263);if(t.smallRight)return Vo(264)}return null}},sortingOrder:{validate:t=>{const s=t.sortingOrder;if(Array.isArray(s)&&s.length>0){const i=s.filter(n=>!Ug.includes(n));if(i.length>0)return`sortingOrder must be an array with elements from [${Ug.map(wv).join()}], currently it includes [${i.map(wv).join()}]`}else if(!Array.isArray(s)||s.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${s}`;return null}},type:{validate:t=>{const s=t.type;return s instanceof Array?s.some(n=>typeof n!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof s=="string"?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(t,{suppressRowTransform:s})=>s?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(t,{rowSelection:s,cellSelection:i,suppressRowTransform:n,enableCellSpan:o,rowDragEntireRow:r,enableCellTextSelection:a})=>typeof s=="object"&&(s==null?void 0:s.mode)==="singleRow"&&s!=null&&s.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":i?"colDef.spanRows is not supported with cellSelection.":n?"colDef.spanRows is not supported with suppressRowTransform.":o?r?"colDef.spanRows is not supported with rowDragEntireRow.":a?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."},groupHierarchy:{validate(t,{groupHierarchyConfig:s={}},i){var r;const n=new Set(["year","quarter","month","formattedMonth","day","hour","minute","second"]),o=[];for(const a of t.groupHierarchy??[]){if(typeof a=="object"){(r=i.validation)==null||r.validateColDef(a);continue}!n.has(a)&&!(a in s)&&o.push(eE(a))}if(o.length>0){const a=`The following parts of colDef.groupHierarchy are not recognised: ${o.join(", ")}.`,l=`Choose one of ${[...n].map(eE).join(", ")}, or define your own parts in gridOptions.groupHierarchyConfig.`;return`${a}
${l}`}return null}}}),R4={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,headerTooltipValueGetter:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,tooltipComponentSelector:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0,rowGroupingHierarchy:void 0,groupHierarchy:void 0},E4=()=>Object.keys(R4),A4=()=>({objectName:"colDef",allProperties:E4(),docsUrl:"column-properties/",deprecations:y4(),validations:x4()}),F4=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"],P4=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers","groupHierarchyConfig"],T4=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],R_=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"],D4=["theme","rowSelection"],_4=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],E_=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows","ssrmExpandAllAffectsAllRows"],M4=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"],k4=()=>[...T4,...P4,...F4,...R_,...M4,...E_,..._4,...D4],I4=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}});function ro(e,t,s){return typeof t=="number"||t==null?t==null||t>=s?null:`${e}: value should be greater than or equal to ${s}`:`${e}: value should be a number`}var L4={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},O4=()=>{const e={autoSizePadding:{validate({autoSizePadding:s}){return ro("autoSizePadding",s,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:s}){return ro("cacheBlockSize",s,1)}},cacheOverflowSize:{validate({cacheOverflowSize:s}){return ro("cacheOverflowSize",s,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:s=>{const i=s.domLayout,n=["autoHeight","normal","print"];return i&&!n.includes(i)?`domLayout must be one of [${n.join()}], currently it's ${i}`:null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate({enableRowPinning:s,pinnedTopRowData:i,pinnedBottomRowData:n}){return s&&(i||n)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:["clientSide"],validate({enableRowPinning:s,isRowPinnable:i,pinnedTopRowData:n,pinnedBottomRowData:o}){return i&&(n||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!s&&i?"`isRowPinnable` requires `enableRowPinning` to be set.":null}},isRowPinned:{supportedRowModels:["clientSide"],validate({enableRowPinning:s,isRowPinned:i,pinnedTopRowData:n,pinnedBottomRowData:o}){return i&&(n||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!s&&i?"`isRowPinned` requires `enableRowPinning` to be set.":null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},groupHierarchyConfig:{validate({groupHierarchyConfig:s={}},i,n){var o;for(const r of Object.keys(s))(o=n.validation)==null||o.validateColDef(s[r]);return null}},icons:{validate:({icons:s})=>{if(s){if(s.smallDown)return Vo(262);if(s.smallLeft)return Vo(263);if(s.smallRight)return Vo(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:s}){return ro("infiniteInitialRowCount",s,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},ssrmExpandAllAffectsAllRows:{validate:s=>{if(typeof s.ssrmExpandAllAffectsAllRows=="boolean"){if(s.rowModelType!=="serverSide")return"'ssrmExpandAllAffectsAllRows' is only supported with the Server Side Row Model.";if(s.ssrmExpandAllAffectsAllRows&&typeof s.getRowId!="function")return"'getRowId' callback must be provided for Server Side Row Model grouping to work correctly."}return null}},keepDetailRowsCount:{validate({keepDetailRowsCount:s}){return ro("keepDetailRowsCount",s,1)}},paginationPageSize:{validate({paginationPageSize:s}){return ro("paginationPageSize",s,1)}},paginationPageSizeSelector:{validate:s=>{const i=s.paginationPageSizeSelector;return typeof i=="boolean"||i==null||i.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate({rowBuffer:s}){return ro("rowBuffer",s,0)}},rowClass:{validate:s=>typeof s.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate({rowSelection:s}){return s&&typeof s=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':s&&typeof s!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":s&&s.mode!=="multiRow"&&s.mode!=="singleRow"?`Selection mode "${s.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null}},rowStyle:{validate:s=>{const i=s.rowStyle;return i&&typeof i=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:s}){return ro("serverSideInitialRowCount",s,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:s=>{const i=s.sortingOrder;if(Array.isArray(i)&&i.length>0){const n=i.filter(o=>!Ug.includes(o));if(n.length>0)return`sortingOrder must be an array with elements from [${Ug.map(wv).join()}], currently it includes [${n.map(wv).join()}]`}else if(!Array.isArray(i)||i.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${i}`;return null}},tooltipHideDelay:{validate:s=>s.tooltipHideDelay&&s.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:s=>s.tooltipShowDelay&&s.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:s=>{const i=s.rowModelType??"clientSide";switch(i){case"clientSide":{const{treeDataChildrenField:n,treeDataParentIdField:o,getDataPath:r,getRowId:a}=s;if(!n&&!o&&!r)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(n){if(r)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(o)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(o){if(!a)return"getRowId callback not provided, tree data with parent id cannot be built.";if(r)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{const n=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${i} row model.`;return s.isServerSideGroup&&s.getServerSideGroupKey?null:n}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:s}){return ro("viewportRowModelBufferSize",s,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:s}){return ro("viewportRowModelPageSize",s,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate({autoGroupColumnDef:s,showOpenedGroup:i}){return s!=null&&s.field&&i?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":s!=null&&s.valueGetter&&i?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}},renderingMode:{validate:s=>{const i=s.renderingMode,n=["default","legacy"];return i&&!n.includes(i)?`renderingMode must be one of [${n.join()}], currently it's ${i}`:null}},autoSizeStrategy:{validate:({autoSizeStrategy:s})=>{if(!s)return null;const i=["fitCellContents","fitGridWidth","fitProvidedWidth"],n=s.type;return n!=="fitCellContents"&&n!=="fitGridWidth"&&n!=="fitProvidedWidth"?`Invalid Auto-size strategy. \`autoSizeStrategy\` must be one of ${i.map(o=>'"'+o+'"').join(", ")}, currently it's ${n}`:n==="fitProvidedWidth"&&typeof s.width!="number"?`When using the 'fitProvidedWidth' auto-size strategy, must provide a numeric \`width\`. You provided ${s.width}`:null}}},t={};for(const s of E_)t[s]={expectedType:"boolean"};for(const s of R_)t[s]={expectedType:"number"};return mi(t,e),t},N4=()=>({objectName:"gridOptions",allProperties:[...k4(),...Object.values(_0)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:I4(),validations:O4()}),H4=0,B4=0,tE="__ag_grid_instance",G4=class extends ${constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=B4++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new ed,this.globalEventHandlerFactory=e=>(t,s)=>{if(!this.isAlive())return;const i=Xm.has(t);if(i&&!e||!i&&e||!V4(t))return;const n=(o,r)=>{const a=_0[o],l=this.gridOptions[a];typeof l=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>l(r))};if(this.gridReadyFired)n(t,s);else if(t==="gridReady"){n(t,s),this.gridReadyFired=!0;for(const o of this.queueEvents)n(o.eventName,o.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:s})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??GB[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return pe(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(s=>e(this.addCommon(s)))}updateGridOptions({options:e,force:t,source:s="api"}){const i={id:H4++,properties:[]},n=[],{gridOptions:o,validation:r}=this;for(const a of Object.keys(e)){const l=a0.applyGlobalGridOption(a,e[a]);r==null||r.warnOnInitialPropertyUpdate(s,a);const c=t||typeof l=="object"&&s==="api",d=o[a];if(c||d!==l){o[a]=l;const h={type:a,currentValue:l,previousValue:d,changeSet:i,source:s};n.push(h)}}this.validateGridOptions(this.gridOptions),i.properties=n.map(a=>a.type);for(const a of n)dl(this,`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propEventSvc.dispatchEvent(a)}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addCommon(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const s of Object.keys(e)){const i=e[s];if(i==null||i===!1)continue;let n=t[s];typeof n=="function"&&(n=n(e,this.gridOptions,this.beans)),n&&this.assertModuleRegistered(n,s)}}validateGridOptions(e){var t;this.validateOptions(e,L4),(t=this.validation)==null||t.processGridOptions(e)}validateColDef(e,t,s){var i,n;(s||!((i=this.beans.dataTypeSvc)!=null&&i.isColPendingInference(t)))&&(this.validateOptions(e,S4),(n=this.validation)==null||n.validateColDef(e))}assertModuleRegistered(e,t){const s=Array.isArray(e)?e.some(i=>this.isModuleRegistered(i)):this.isModuleRegistered(e);return s||Pt(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),s}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:l0(),rowModelType:this.get("rowModelType"),isUmd:qB()}}isModuleRegistered(e){return _y(e,this.gridId,this.get("rowModelType"))}setInstanceDomData(e){e[tE]=this.instanceId}isElementInThisInstance(e){let t=e;for(;t;){const s=t[tE];if(pe(s))return s===this.instanceId;t=t.parentElement}return!1}};function V4(e){return!!_0[e]}function A_(e){const t={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:t},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:t},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:t},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var z4=A_(!0),W4=A_(!1),$4=class extends Et{constructor(){super(...arguments),this.eFilter=ge,this.eFilterButton=ge,this.eSortIndicator=ge,this.eMenu=ge,this.eLabel=ge,this.eText=ge,this.eSortOrder=ge,this.eSortAsc=ge,this.eSortDesc=ge,this.eSortMixed=ge,this.eSortNone=ge,this.isLoadingInnerComponent=!1}refresh(e){var s,i,n;const t=this.params;if(this.params=e,this.workOutTemplate(e,!!((s=this.beans)!=null&&s.sortSvc))!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){const o={...e};mi(o,e.innerHeaderComponentParams),(n=(i=this.innerHeaderComponent).refresh)==null||n.call(i,o)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const s=e.template;return s?s!=null&&s.trim?s.trim():s:t?z4:W4}init(e){this.params=e;const{sortSvc:t,touchSvc:s,rowNumbersSvc:i,userCompFactory:n}=this.beans,o=t==null?void 0:t.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!o),this.setTemplate(this.currentTemplate,o?[o]:void 0),s==null||s.setupForHeader(this),this.setMenu(),this.setupSort(),i==null||i.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(n,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const s=lV(e,t,t);s&&(this.isLoadingInnerComponent=!0,s.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderComponent=i,this.eText&&this.eText.appendChild(i.getGui())):this.destroyBean(i))}))}setDisplayName(e){const{displayName:t}=e,s=this.currentDisplayName;this.currentDisplayName=t,!(!this.eText||s===t||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=Eu(t))}addInIcon(e,t,s){const i=Cn(e,this.beans,s);i&&t.appendChild(i)}workOutShowMenu(){var e;return this.params.enableMenu&&!!((e=this.beans.menuSvc)!=null&&e.isHeaderMenuButtonEnabled())}shouldSuppressMenuHide(){var e;return!!((e=this.beans.menuSvc)!=null&&e.isHeaderMenuButtonAlwaysShowEnabled())}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Qn(this.eMenu),this.eMenu=void 0;return}const{gos:e,eMenu:t,params:s}=this,i=Yi(e);this.addInIcon(i?"menu":"menuAlt",t,s.column),t.classList.toggle("ag-header-menu-icon",!i);const n=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=n,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(n)}toggleMenuAlwaysShow(e){var t;(t=this.eMenu)==null||t.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:s}=this;t||this.toggleMenuAlwaysShow(!0),s.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){var l;const{params:t,gos:s,beans:i,eMenu:n,eFilterButton:o}=this,r=t.column,a=Yi(s);if(e&&!a){if((l=i.menuSvc)!=null&&l.isFilterMenuInHeaderEnabled(r))return t.showFilter(o??n??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(n??o??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:s}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:i,eSortOrder:n,eSortAsc:o,eSortDesc:r,eSortMixed:a,eSortNone:l}=this;i.attachCustomElements(n,o,r,a,l)}this.eSortIndicator.setupSort(s),this.currentSort&&e.setupHeader(this,s,this.eLabel)}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;const s=()=>{const i=t.column.isFilterActive();Vt(e,i,{skipAriaHidden:!0})};this.configureFilter(t.enableFilterIcon,e,s,"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,s,i){if(!e)return Qn(t),!1;const n=this.params.column;return this.addInIcon(i,t,n),this.addManagedListeners(n,{filterChanged:s}),s(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:s}=this;return e?t??s??this.getGui():s??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}},U4={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},j4=class extends Et{constructor(){super(U4),this.agOpened=ge,this.agClosed=ge,this.agLabel=ge,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:s}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),s==null||s.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&oe(89)}workOutInnerHeaderGroupComponent(e,t){const s=dV(e,t,t);s&&(this.isLoadingInnerComponent=!0,s.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderGroupComponent=i,this.agLabel.appendChild(i.getGui())):this.destroyBean(i))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:s},beans:i}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const n=l=>{if(Ur(l))return;const c=!s.isExpanded();i.colGroupSvc.setColumnGroupOpened(s.getProvidedColumnGroup(),c,"uiColumnExpanded")};this.addTouchAndClickListeners(i,t,n),this.addTouchAndClickListeners(i,e,n);const o=l=>{id(l)};this.addManagedElementListeners(t,{dblclick:o}),this.addManagedElementListeners(e,{dblclick:o}),this.addManagedElementListeners(this.getGui(),{dblclick:n}),this.updateIconVisibility();const r=s.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(r,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t,s){var i;(i=e.touchSvc)==null||i.setupForHeaderGroupElement(this,t,s),this.addManagedElementListeners(t,{click:s})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:s}}=this;if(s.isExpandable()){const i=s.isExpanded();Vt(e,i),Vt(t,!i)}else Vt(e,!1),Vt(t,!1)}addInIcon(e,t){const s=Cn(e,this.beans,null);s&&t.appendChild(s)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:t,agClosed:s}=this;Vt(t,!1),Vt(s,!1)}}setupLabel(e){var n;const{displayName:t,columnGroup:s}=e,i=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;pe(t)&&!i&&(this.agLabel.textContent=Eu(t)),this.toggleCss("ag-sticky-label",!((n=s.getColGroupDef())!=null&&n.suppressStickyLabel))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},K4={moduleName:"ColumnHeaderComp",version:fe,userComponents:{agColumnHeader:$4},icons:{menu:"menu",menuAlt:"menu-alt"}},q4={moduleName:"ColumnGroupHeaderComp",version:fe,userComponents:{agColumnGroupHeader:j4},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},Y4=class extends ${constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,e===0&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&oe(92)}createTask(e,t,s,i,n=!1){this.verify();let o=s;i&&this.batchFrameworkComps&&(o="f1");const r={task:e,index:t,createOrder:++this.taskCount,deferred:n};this.addTaskToList(this[o],r),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((s,i)=>s.deferred!==i.deferred?s.deferred?-1:1:s.index!==i.index?t*(i.index-s.index):i.createOrder-s.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:s,f1:i,destroyTasks:n,beans:o}=this,{ctrlsSvc:r,frameworkOverrides:a}=o,l=t.list,c=s.list,d=i.list,h=Date.now();let u=0;const f=e<=0,p=r.getScrollFeature();for(;f||u<e;){if(!p.scrollGridIfNeeded()){let v;if(l.length)this.sortTaskList(t),v=l.pop().task;else if(c.length)this.sortTaskList(s),v=c.pop().task;else if(d.length)a.wrapOutgoing(()=>{for(;(f||u<e)&&!p.scrollGridIfNeeded();){if(d.length)this.sortTaskList(i),v=d.pop().task,v();else break;u=Date.now()-h}}),v=()=>{};else if(n.length)v=n.pop();else break;v()}u=Date.now()-h}l.length||c.length||d.length||n.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);ia(this.beans,e)}isQueueEmpty(){return!this.ticking}},X4={moduleName:"AnimationFrame",version:fe,beans:[Y4]},Q4=class extends ${constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(e,t){return Cn(e,this.beans,t==null?void 0:t.column)}},J4=class extends ${constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!jc())return;const t=(s,i,n)=>{var a;const{rowCtrl:o,cellCtrl:r}=e.getControlsForEventTarget((n==null?void 0:n.target)??null);r!=null&&r.column&&r.dispatchCellContextMenuEvent(n??null),(a=this.beans.contextMenuSvc)==null||a.handleContextMenuMouseEvent(void 0,n,o,r)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!jc()||IT("dblclick"))return!1;const i=Date.now(),n=i-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=i,n})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){const{gos:t,sortSvc:s,menuSvc:i}=this.beans;if(t.get("suppressTouch"))return;const{params:n,eMenu:o,eFilterButton:r}=e,a=new _l(e.getGui(),!0);e.addDestroyFunc(()=>a.destroy());const l=e.shouldSuppressMenuHide(),c=l&&pe(o)&&n.enableMenu;let d=a;if(c&&(d=new _l(o,!0),e.addDestroyFunc(()=>d.destroy())),n.enableMenu||i!=null&&i.isHeaderContextMenuEnabled(n.column)){const h=c?"tap":"longTap",u=f=>n.showColumnMenuAfterMouseClick(f.touchStart);e.addManagedListeners(d,{[h]:u}),e.addManagedListeners(a,{longTap:u})}if(n.enableSorting){const h=u=>{const f=u.touchStart.target;l&&(o!=null&&o.contains(f)||r!=null&&r.contains(f))||s==null||s.progressSort(n.column,!1,"uiColumnSorted")};e.addManagedListeners(a,{tap:h})}if(n.enableFilterButton&&r){const h=new _l(r,!0);e.addManagedListeners(h,{tap:()=>n.showFilter(r)}),e.addDestroyFunc(()=>h.destroy())}}setupForHeaderGroup(e){var s;const t=e.params;if((s=this.beans.menuSvc)!=null&&s.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){const i=new _l(t.eGridHeader,!0),n=o=>t.showColumnMenuAfterMouseClick(o.touchStart);e.addManagedListeners(i,{longTap:n}),e.addDestroyFunc(()=>i.destroy())}}setupForHeaderGroupElement(e,t,s){const i=new _l(t,!0);e.addManagedListeners(i,{tap:s}),e.addDestroyFunc(()=>i.destroy())}mockContextMenu(e,t,s){if(!jc())return;const i=new _l(t),n=o=>{Hg(this.beans,o.touchEvent)&&s(void 0,o.touchStart,o.touchEvent)};e.addManagedListeners(i,{longTap:n}),e.addDestroyFunc(()=>i.destroy())}},Z4={moduleName:"Touch",version:fe,beans:[J4]},e6=class extends ${constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,s=!1){return s?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const s=e===H.UP,i=e===H.DOWN,n=e===H.LEFT;let o,r;const{pageBounds:a,gos:l,visibleCols:c,pinnedRowModel:d}=this.beans,{rowPinned:h}=t;if(s||i)h&&d?s?r=0:r=h==="top"?d.getPinnedTopRowCount()-1:d.getPinnedBottomRowCount()-1:r=s?a.getFirstRow():a.getLastRow(),o=t.column;else{const u=l.get("enableRtl");r=t.rowIndex,o=(n!==u?c.allCols:[...c.allCols].reverse()).find(p=>this.isCellGoodToFocusOn({rowIndex:r,rowPinned:null,column:p}))}return o?{rowIndex:r,rowPinned:h,column:o}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let s=t,i=!1;for(;!i;){switch(e){case H.UP:s=this.getCellAbove(s);break;case H.DOWN:s=this.getCellBelow(s);break;case H.RIGHT:s=this.gos.get("enableRtl")?this.getCellToLeft(s):this.getCellToRight(s);break;case H.LEFT:s=this.gos.get("enableRtl")?this.getCellToRight(s):this.getCellToLeft(s);break;default:s=null,oe(8,{key:e});break}s?i=this.isCellGoodToFocusOn(s):i=!0}return s}isCellGoodToFocusOn(e){const t=e.column;let s;const{pinnedRowModel:i,rowModel:n}=this.beans;switch(e.rowPinned){case"top":s=i==null?void 0:i.getPinnedTopRow(e.rowIndex);break;case"bottom":s=i==null?void 0:i.getPinnedBottomRow(e.rowIndex);break;default:s=n.getRow(e.rowIndex);break}return s?!this.isSuppressNavigable(t,s):!1}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){var i;if(!e)return null;const t=((i=this.rowSpanSvc)==null?void 0:i.getCellEnd(e))??e,s=VR(this.beans,t,!0);return s?{rowIndex:s.rowIndex,column:e.column,rowPinned:s.rowPinned}:null}getCellAbove(e){var i;if(!e)return null;const t=((i=this.rowSpanSvc)==null?void 0:i.getCellStart(e))??e,s=_v(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned},!0);return s?{rowIndex:s.rowIndex,column:e.column,rowPinned:s.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:s}=this.beans,i=t.allCols;let n=e.rowIndex,o=e.rowPinned,r=t.getColAfter(e.column);if(!r){r=i[0];const a=VR(this.beans,e,!0);if(Wt(a)||!a.rowPinned&&!((s==null?void 0:s.isRowInPage(a.rowIndex))??!0))return null;n=a?a.rowIndex:null,o=a?a.rowPinned:null}return{rowIndex:n,column:r,rowPinned:o}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:s,pagination:i}=t,n=s.allCols;let o=e.rowIndex,r=e.rowPinned,a=s.getColBefore(e.column);if(!a){a=It(n);const l=_v(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);if(Wt(l)||!l.rowPinned&&!((i==null?void 0:i.isRowInPage(l.rowIndex))??!0))return null;o=l?l.rowIndex:null,r=l?l.rowPinned:null}return{rowIndex:o,column:a,rowPinned:r}}isSuppressNavigable(e,t){const{suppressNavigable:s}=e.colDef;if(typeof s=="boolean")return s;if(typeof s=="function"){const i=e.createColumnFunctionCallbackParams(t);return s(i)}return!1}};function t6(e){return e.focusSvc.getFocusedCell()}function s6(e){return e.focusSvc.clearFocusedCell()}function i6(e,t,s,i){e.focusSvc.setFocusedCell({rowIndex:t,column:s,rowPinned:i,forceBrowserFocus:!0})}function n6(e,t){var s;return((s=e.navigation)==null?void 0:s.tabToNextCell(!1,t))??!1}function o6(e,t){var s;return((s=e.navigation)==null?void 0:s.tabToNextCell(!0,t))??!1}function r6(e,t,s=!1){var n;const i=(n=e.headerNavigation)==null?void 0:n.getHeaderPositionForColumn(t,s);i&&e.focusSvc.focusHeaderPosition({headerPosition:i})}var a6=class extends ${constructor(){super(...arguments),this.beanName="editModelSvc",this.edits=new Map,this.cellValidations=new F_,this.rowValidations=new P_,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits({rowNode:e,column:t}){if(!this.hasEdits({rowNode:e})||!e)return;const s=this.getEditRow(e);t?s.delete(t):s.clear(),s.size===0&&this.edits.delete(e)}getEditRow(e,t={}){if(this.suspendEdits||this.edits.size===0)return;const s=e&&this.edits.get(e);if(s)return s;if(t.checkSiblings){const i=e.pinnedSibling;if(i)return this.getEditRow(i)}}getEditRowDataValue(e,{checkSiblings:t}={}){if(!e||this.edits.size===0)return;const s=this.getEditRow(e),i=e.pinnedSibling,n=t&&i&&this.getEditRow(i);if(!s&&!n)return;const o=Object.assign({},e.data),r=(a,l)=>a.forEach(({pendingValue:c},d)=>{c!==xn&&(l[d.getColId()]=c)});return s&&r(s,o),n&&r(n,o),o}getEdit(e,t){const s=this._getEdit(e);return t&&s?{...s}:s}_getEdit(e){var t;if(!this.suspendEdits&&this.edits.size!==0)return e.rowNode&&e.column&&((t=this.getEditRow(e.rowNode))==null?void 0:t.get(e.column))}getEditMap(e=!0){if(this.suspendEdits||this.edits.size===0)return new Map;if(!e)return this.edits;const t=new Map;return this.edits.forEach((s,i)=>{const n=new Map;s.forEach(({editorState:o,...r},a)=>n.set(a,{...r})),t.set(i,n)}),t}setEditMap(e){this.edits.clear(),e.forEach((t,s)=>{const i=new Map;t.forEach((n,o)=>i.set(o,{...n})),this.edits.set(s,i)})}setEdit(e,t){(this.edits.size===0||!this.edits.has(e.rowNode))&&this.edits.set(e.rowNode,new Map);const s=this._getEdit(e),i=Object.assign({editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0},...s,...t});return this.getEditRow(e.rowNode).set(e.column,i),i}clearEditValue(e){var i;const{rowNode:t,column:s}=e;if(t)if(s){const n=this._getEdit(e);n&&(n.editorValue=void 0,n.pendingValue=n.sourceValue,n.state="changed")}else(i=this.getEditRow(t))==null||i.forEach(n=>{n.editorValue=void 0,n.pendingValue=n.sourceValue,n.state="changed"})}getState(e){var t;if(!this.suspendEdits)return(t=this.getEdit(e))==null?void 0:t.state}getEditPositions(e){if(this.suspendEdits||(e??this.edits).size===0)return[];const t=[];return(e??this.edits).forEach((s,i)=>{for(const n of s.keys()){const{editorState:o,...r}=s.get(n);t.push({rowNode:i,column:n,...r})}}),t}hasRowEdits(e,t){return this.suspendEdits||this.edits.size===0?!1:!!this.getEditRow(e,t)}hasEdits(e={},t={}){var o;if(this.suspendEdits||this.edits.size===0)return!1;const{rowNode:s,column:i}=e,{withOpenEditor:n}=t;if(s){const r=this.getEditRow(s,t);return r?i?n?((o=this.getEdit(e))==null?void 0:o.state)==="editing":r.has(i)??!1:r.size!==0?n?Array.from(r.values()).some(({state:a})=>a==="editing"):!0:!1:!1}return n?this.getEditPositions().some(({state:r})=>r==="editing"):this.edits.size>0}start(e){const t=this.getEditRow(e.rowNode)??new Map,{rowNode:s,column:i}=e;i&&!t.has(i)&&t.set(i,{editorValue:void 0,pendingValue:xn,sourceValue:this.beans.valueSvc.getValue(i,s,!1,"api"),state:"editing",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}}),this.edits.set(s,t)}stop(e){this.hasEdits(e)&&(e?this.removeEdits(e):this.clear())}clear(){for(const e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},F_=class{constructor(){this.cellValidations=new Map}getCellValidation(e){var i,n;const{rowNode:t,column:s}=e||{};return(n=(i=this.cellValidations)==null?void 0:i.get(t))==null?void 0:n.get(s)}hasCellValidation(e){return!(e!=null&&e.rowNode)||!e.column?this.cellValidations.size>0:!!this.getCellValidation(e)}setCellValidation(e,t){const{rowNode:s,column:i}=e;this.cellValidations.has(s)||this.cellValidations.set(s,new Map),this.cellValidations.get(s).set(i,t)}clearCellValidation(e){var i;const{rowNode:t,column:s}=e;(i=this.cellValidations.get(t))==null||i.delete(s)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},P_=class{constructor(){this.rowValidations=new Map}getRowValidation(e){const{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return e!=null&&e.rowNode?!!this.getRowValidation(e):this.rowValidations.size>0}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function k0(e,t={}){var c;const{rowIndex:s,rowId:i,rowCtrl:n,rowPinned:o}=t;if(n)return n;const{rowModel:r,rowRenderer:a}=e;let{rowNode:l}=t;return l||(i?l=_3(e,i,o):s!=null&&(l=r.getRow(s))),(c=a.getRowCtrls(l?[l]:[]))==null?void 0:c[0]}function Ut(e,t={}){var d;const{cellCtrl:s,colId:i,columnId:n,column:o}=t;if(s)return s;const r=e.colModel.getCol(i??n??eS(o)),a=t.rowCtrl??k0(e,t),l=(a==null?void 0:a.getCellCtrl(r))??void 0;if(l)return l;const c=t.rowNode??(a==null?void 0:a.rowNode);if(c)return(d=e.rowRenderer.getCellCtrls([c],[r]))==null?void 0:d[0]}function sE(e){const{editSvc:t}=e;t!=null&&t.isBatchEditing()?eh(e):t==null||t.stopEditing(void 0,{source:"api"})}function l6(e,t,s){const{gos:i,popupSvc:n}=t;if(!i.get("stopEditingWhenCellsLoseFocus"))return;const o=r=>{const a=r.relatedTarget;if(By(a)===null){sE(t);return}let l=s.some(c=>c.contains(a))&&i.isElementInThisInstance(a);l||(l=!!n&&(n.getActivePopups().some(c=>c.contains(a))||n.isElementWithinCustomPopup(a))),l||sE(t)};for(const r of s)e.addManagedElementListeners(r,{focusout:o})}function eS(e){if(e)return typeof e=="string"?e:e.getColId()}var xn=Symbol("unedited");function T_(e,t={}){var n;const s=[],i=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(const o of i){const r=(n=o.comp)==null?void 0:n.getCellEditor();r&&s.push({ctrl:o,editor:zg(r)})}return s}var c6=(e,t={})=>T_(e,t).map(s=>s.editor);function d6(e,t,s,i,n,o){var h;t.length===0&&(s!=null&&s.rowNode)&&(s!=null&&s.column)&&vu(e,s,{key:i,event:n,cellStartedEdit:o});const{valueSvc:r,editSvc:a,editModelSvc:l}=e,{rowNode:c,column:d}=s??{};for(const u of t){const{rowNode:f,column:p}=u,m=Ut(e,u);if(!m){if(f&&p){const C=r.getValue(p,f,void 0,"api"),S=((s==null?void 0:s.rowNode)===f&&(s==null?void 0:s.column)===p&&i||void 0)??(a==null?void 0:a.getCellDataValue(u,!1))??((h=r.getValueForDisplay(p,f))==null?void 0:h.value)??C??xn;l==null||l.setEdit(u,{pendingValue:S,sourceValue:C,state:"editing"})}continue}const v=o&&c===m.rowNode&&m.column===d;vu(e,{rowNode:c,column:m.column},{key:v?i:null,event:v?n:null,cellStartedEdit:v&&o})}}function Br({pendingValue:e,sourceValue:t}){return e===xn&&(e=t),e!==t}function vu(e,t,s){var C,b,y,S,R,A,F,T,k,N;const i=e.gos.get("enableGroupEdit"),{key:n,event:o,cellStartedEdit:r,silent:a}=s??{},l=Ut(e,t),c=(C=l==null?void 0:l.comp)==null?void 0:C.getCellEditor(),d=__(e,t,n,r&&!a),h=(b=e.editModelSvc)==null?void 0:b.getEdit(t);let u=d.value;if(u===void 0&&(u=h==null?void 0:h.sourceValue),(y=e.editModelSvc)==null||y.setEdit(t,{editorValue:u,state:"editing"}),c){(S=c.refresh)==null||S.call(c,d);return}const f=t.column.getColDef(),p=mD(e.userCompFactory,f,d),m=(p==null?void 0:p.popupFromSelector)!=null?p.popupFromSelector:!!f.cellEditorPopup,v=(p==null?void 0:p.popupPositionFromSelector)!=null?p.popupPositionFromSelector:f.cellEditorPopupPosition;if(M_(p.params,o),l){l.editCompDetails=p,l.onEditorAttachedFuncs.push(()=>{var O;return(O=l.rangeFeature)==null?void 0:O.unsetComp()}),(R=l.comp)==null||R.setEditDetails(p,m,v,e.gos.get("reactiveCustomComponents")),(A=l==null?void 0:l.rowCtrl)==null||A.refreshRow({suppressFlash:!0});const I=(F=e.editModelSvc)==null?void 0:F.getEdit(t,!0);!a&&!((T=I==null?void 0:I.editorState)!=null&&T.cellStartedEditing)&&((k=e.editSvc)==null||k.dispatchCellEvent(t,o,"cellEditingStarted",i?{value:u}:{}),(N=e.editModelSvc)==null||N.setEdit(t,{editorState:{cellStartedEditing:!0}}))}}function D_(e,t,s){var o,r;const i={editorValueExists:!1};if(I0(e)){const a=(o=t.getValidationErrors)==null?void 0:o.call(t);if(((a==null?void 0:a.length)??0)>0)return i}if(s!=null&&s.isCancelling)return i;if(s!=null&&s.isStopping){const a=(r=t==null?void 0:t.isCancelAfterEnd)==null?void 0:r.call(t);if(a)return{...i,isCancelAfterEnd:a}}return{editorValue:t.getValue(),editorValueExists:!0}}function __(e,t,s,i){var b,y,S,R;const{valueSvc:n,gos:o,editSvc:r}=e,a=e.gos.get("enableGroupEdit"),l=Ut(e,t),c=((b=t.rowNode)==null?void 0:b.rowIndex)??void 0,d=r==null?void 0:r.isBatchEditing(),h=e.colModel.getCol(t.column.getId()),{rowNode:u,column:f}=t,p=(y=l.comp)==null?void 0:y.getCellEditor(),m=r==null?void 0:r.getCellDataValue(t,!1),v=m===void 0?p?(S=D_(e,p))==null?void 0:S.editorValue:void 0:m,C=v===xn?(R=n.getValueForDisplay(h,u))==null?void 0:R.value:v;return Be(o,{value:a?v:C,eventKey:s??null,column:f,colDef:f.getColDef(),rowIndex:c,node:u,data:u.data,cellStartedEdit:i??!1,onKeyDown:l==null?void 0:l.onKeyDown.bind(l),stopEditing:A=>{r.stopEditing(t,{source:d?"ui":"api",suppressNavigateAfterEdit:A}),Mv(e,t)},eGridCell:l==null?void 0:l.eGui,parseValue:A=>n.parseValue(h,u,A,l==null?void 0:l.value),formatValue:l==null?void 0:l.formatValue.bind(l),validate:()=>{r==null||r.validateEdit()}})}function tS(e,t){const{editModelSvc:s}=e;s==null||s.getEditMap().forEach((i,n)=>{i.forEach((o,r)=>{!t&&(o.state==="editing"||o.pendingValue===xn)||!Br(o)&&(o.state!=="editing"||t)&&(s==null||s.removeEdits({rowNode:n,column:r}))})})}function h6(e,t){var c;const s=(c=t.comp)==null?void 0:c.getCellEditor();if(!(s!=null&&s.refresh))return;const{eventKey:i,cellStartedEdit:n}=t.editCompDetails.params,{column:o}=t,r=__(e,t,i,n),a=o.getColDef(),l=mD(e.userCompFactory,a,r);s.refresh(M_(l.params,i))}function M_(e,t){var s;return t instanceof KeyboardEvent&&e.column.getColDef().cellEditor==="agNumberCellEditor"?e.suppressPreventDefault=["-","+",".","e"].includes((t==null?void 0:t.key)??"")||e.suppressPreventDefault:(s=t==null?void 0:t.preventDefault)==null||s.call(t),e}function Hl(e,t){var s,i,n;for(const o of((s=e.editModelSvc)==null?void 0:s.getEditPositions())??[]){const r=Ut(e,o);if(!r)continue;const a=(i=r.comp)==null?void 0:i.getCellEditor();if(!a)continue;const{editorValue:l,editorValueExists:c,isCancelAfterEnd:d}=D_(e,a,t);d&&((n=e.editModelSvc)==null||n.setEdit(o,{editorState:{isCancelAfterEnd:d}})),Qm(e,o,l,void 0,!c,t)}}function Qm(e,t,s,i,n,o){const{editModelSvc:r,valueSvc:a}=e;if(!r)return;const{rowNode:l,column:c}=t;if(!(l&&c))return;let d=r.getEdit(t,!0);d!=null&&d.sourceValue||(d=r.setEdit(t,{sourceValue:a.getValue(c,l,void 0,"api"),pendingValue:d?d.editorValue:xn})),r.setEdit(t,{editorValue:n?d.sourceValue:s}),o!=null&&o.persist&&u6(e,t)}function u6(e,t){const{editModelSvc:s}=e,i=s==null?void 0:s.getEdit(t,!0);s==null||s.setEdit(t,{pendingValue:i==null?void 0:i.editorValue})}function eh(e,t,s){var i;t||(t=(i=e.editModelSvc)==null?void 0:i.getEditPositions());for(const n of t??[])Mv(e,n,s)}function Mv(e,t,s){var c,d;const i=e.gos.get("enableGroupEdit"),{editModelSvc:n}=e,o=Ut(e,t),r=n==null?void 0:n.getEdit(t,!0);if(!o){r&&(n==null||n.setEdit(t,{state:"changed"}));return}const{comp:a}=o;if(a&&!a.getCellEditor()){if(o==null||o.refreshCell(),r){n==null||n.setEdit(t,{state:"changed"});const h=i?iE(s,r):{valueChanged:!1,newValue:void 0,oldValue:r.sourceValue};nE(e,t,h,s)}return}if(I0(e)){const h=(d=(c=a==null?void 0:a.getCellEditor())==null?void 0:c.getValidationErrors)==null?void 0:d.call(c),u=n==null?void 0:n.getCellValidationModel();h!=null&&h.length?u==null||u.setCellValidation(t,{errorMessages:h}):u==null||u.clearCellValidation(t)}n==null||n.setEdit(t,{state:"changed"}),a==null||a.setEditDetails(),a==null||a.refreshEditStyles(!1,!1),o==null||o.refreshCell({force:!0,suppressFlash:!0});const l=n==null?void 0:n.getEdit(t);if(l&&l.state==="changed"){const h=i?iE(s,l):{valueChanged:Br(l)&&!(s!=null&&s.cancel),newValue:s!=null&&s.cancel||l.editorState.isCancelAfterEnd?void 0:(l==null?void 0:l.editorValue)??(r==null?void 0:r.pendingValue),oldValue:l==null?void 0:l.sourceValue};nE(e,t,h,s)}}function iE(e,t){return e!=null&&e.cancel?{valueChanged:!1,oldValue:t.sourceValue,newValue:void 0,value:t.sourceValue}:{valueChanged:!1,oldValue:t.sourceValue,newValue:t.pendingValue,value:t.sourceValue}}function nE(e,t,s,{silent:i,event:n}={}){const{editSvc:o,editModelSvc:r}=e,a=r==null?void 0:r.getEdit(t),{editorState:l}=a||{},{isCancelBeforeStart:c}=l||{};!i&&!c&&(o==null||o.dispatchCellEvent(t,n,"cellEditingStopped",s),r==null||r.setEdit(t,{editorState:{cellStoppedEditing:!0}}))}function I0(e){var r;const{gos:t,colModel:s}=e,i=!!t.get("getFullRowEditValidationErrors"),n=(r=s.getColumnDefs())==null?void 0:r.filter(a=>a.editable).some(({cellEditorParams:a})=>{const{minLength:l,maxLength:c,getValidationErrors:d,min:h,max:u}=a||{};return l!==void 0||c!==void 0||d!==void 0||h!==void 0||u!==void 0}),o=e.gridApi.getCellEditorInstances().some(a=>a.getValidationElement||a.getValidationErrors);return n||i||o}function nd(e,t){var u,f,p,m,v,C,b,y;if(!(t||I0(e)))return;const s=T_(e),i=new F_,{ariaAnnounce:n,localeSvc:o,editModelSvc:r,gos:a}=e,l=a.get("editType")==="fullRow",d=OT(o)("ariaValidationErrorPrefix","Cell Editor Validation");for(const S of s){const{ctrl:R,editor:A}=S,{rowNode:F,column:T}=R,k=((u=A.getValidationErrors)==null?void 0:u.call(A))??[],N=((f=A.getValidationElement)==null?void 0:f.call(A,!1))||!((p=A.isPopup)!=null&&p.call(A))&&R.eGui;if(N){const I=k!=null&&k.length>0,O=I?k.join(". "):"";oB(N,I),I&&n.announceValue(`${d} ${k}`,"editorValidation"),N instanceof HTMLInputElement?N.setCustomValidity(O):N.classList.toggle("invalid",I)}(k==null?void 0:k.length)>0&&i.setCellValidation({rowNode:F,column:T},{errorMessages:k})}Hl(e,{persist:!1}),r==null||r.setCellValidationModel(i);const h=new Set;for(const{ctrl:S}of s)h.add(S.rowCtrl);if(l){const S=g6(e);r==null||r.setRowValidationModel(S)}for(const S of h.values()){(m=S.rowEditStyleFeature)==null||m.applyRowStyles();for(const R of S.getAllCellCtrls())(v=R.tooltipFeature)==null||v.refreshTooltip(!0),(C=R.editorTooltipFeature)==null||C.refreshTooltip(!0),(y=(b=R.editStyleFeature)==null?void 0:b.applyCellStyles)==null||y.call(b)}}var g6=e=>{var n;const t=new P_,s=e.gos.get("getFullRowEditValidationErrors"),i=(n=e.editModelSvc)==null?void 0:n.getEditMap();if(!i)return t;for(const o of i.keys()){const r=i.get(o);if(!r)continue;const a=[],{rowIndex:l,rowPinned:c}=o;for(const h of r.keys()){const u=r.get(h);if(!u)continue;const{editorValue:f,pendingValue:p,sourceValue:m}=u,v=f??(p===xn?void 0:p)??m;a.push({column:h,colId:h.getColId(),rowIndex:l,rowPinned:c,oldValue:m,newValue:v})}const d=(s==null?void 0:s({editorsState:a}))??[];d.length>0&&t.setRowValidation({rowNode:o},{errorMessages:d})}return t};function f6(e){var i;nd(e,!0);const t=(i=e.editModelSvc)==null?void 0:i.getCellValidationModel().getCellValidationMap();if(!t)return null;const s=[];return t.forEach((n,o)=>{n.forEach(({errorMessages:r},a)=>{s.push({column:a,rowIndex:o.rowIndex,rowPinned:o.rowPinned,messages:r??null})})}),s}function p6(e,t,s,{rowNode:i,column:n},o){return Be(e.gos,{type:s,node:i,data:i.data,value:o,column:n,colDef:n.getColDef(),rowPinned:i.rowPinned,event:t,rowIndex:i.rowIndex})}function m6(e,t=!1){return e===H.DELETE?!0:!t&&e===H.BACKSPACE?wD():!1}var v6=class extends ${constructor(e,t,s,i){super(),this.cellCtrl=e,this.rowNode=s,this.rowCtrl=i,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case H.ENTER:this.onEnterKeyDown(e);break;case H.F2:this.onF2KeyDown(e);break;case H.ESCAPE:this.onEscapeKeyDown(e);break;case H.TAB:this.onTabKeyDown(e);break;case H.BACKSPACE:case H.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case H.DOWN:case H.UP:case H.RIGHT:case H.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){var n,o;const{cellCtrl:s,beans:i}=this;if(!((n=i.editSvc)!=null&&n.isEditing(s,{withOpenEditor:!0}))){if(e.shiftKey&&s.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const r=s.getFocusedCellPosition();(o=i.navigation)==null||o.navigateToNextCell(e,t,r,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:s}=this.beans;if(!t)return;const i=t.extendLatestRangeInDirection(e);i&&(e.key===H.LEFT||e.key===H.RIGHT?s==null||s.ensureColumnVisible(i.column):s==null||s.ensureRowVisible(i.rowIndex))}onTabKeyDown(e){var t;(t=this.beans.navigation)==null||t.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){var c;const{cellCtrl:s,beans:i,rowNode:n}=this,{gos:o,rangeSvc:r,eventSvc:a,editSvc:l}=i;if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),m6(e,o.get("enableCellEditingOnBackspace"))&&!(l!=null&&l.isEditing(s,{withOpenEditor:!0}))){if(r&&Jr(o))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(s.isCellEditable()){const{column:d}=s,h=this.beans.valueSvc.getDeleteValue(d,n);n.setDataValue(d,h,"cellClear")}}else l!=null&&l.isEditing(s,{withOpenEditor:!0})||(c=i.editSvc)==null||c.startEditing(s,{startedEdit:!0,event:t});a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){var c;const{cellCtrl:t,beans:s}=this,{editSvc:i,navigation:n}=s,o=i==null?void 0:i.isEditing(t,{withOpenEditor:!0}),r=t.rowNode,a=i==null?void 0:i.isRowEditing(r,{withOpenEditor:!0}),l=d=>{(i==null?void 0:i.startEditing(d,{startedEdit:!0,event:e,source:"edit"}))&&e.preventDefault()};if(o||a){if(this.isCtrlEnter(e)){i==null||i.applyBulkEdit(t,((c=s==null?void 0:s.rangeSvc)==null?void 0:c.getCellRanges())||[]);return}if(nd(s),(i==null?void 0:i.checkNavWithValidation(void 0,e))==="block-stop")return;i!=null&&i.isEditing(t,{withOpenEditor:!0})?i==null||i.stopEditing(t,{event:e,source:"edit"}):a&&!t.isCellEditable()?i==null||i.stopEditing({rowNode:r},{event:e,source:"edit"}):l(t)}else if(s.gos.get("enterNavigatesVertically")){const d=e.shiftKey?H.UP:H.DOWN;n==null||n.navigateToNextCell(null,d,t.cellPosition,!1)}else{if(i!=null&&i.hasValidationErrors())return;i!=null&&i.hasValidationErrors(t)&&i.revertSingleCellEdit(t,!0),l(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===H.ENTER}onF2KeyDown(e){const{cellCtrl:t,beans:{editSvc:s}}=this;s!=null&&s.isEditing()&&(nd(this.beans),(s==null?void 0:s.checkNavWithValidation(void 0,e))==="block-stop")||s==null||s.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){const{cellCtrl:t,beans:{editSvc:s}}=this;(s==null?void 0:s.checkNavWithValidation(t,e))==="block-stop"&&s.revertSingleCellEdit(t),s==null||s.stopEditing(t,{event:e,cancel:!0})}processCharacter(e){var r;const s=e.target!==this.eGui,{beans:{editSvc:i},cellCtrl:n}=this;if(s||i!=null&&i.isEditing(n,{withOpenEditor:!0}))return;if(e.key===H.SPACE)this.onSpaceKeyDown(e);else if(i!=null&&i.isCellEditable(n,"ui")){if(i!=null&&i.hasValidationErrors()&&!(i!=null&&i.hasValidationErrors(n)))return;i==null||i.startEditing(n,{startedEdit:!0,event:e,source:"api"});const a=n.editCompDetails;!((r=a==null?void 0:a.params)!=null&&r.suppressPreventDefault)&&e.preventDefault()}}onSpaceKeyDown(e){var n;const{gos:t,editSvc:s}=this.beans,{rowNode:i}=this.cellCtrl;!(s!=null&&s.isEditing(this.cellCtrl,{withOpenEditor:!0}))&&$c(t)&&((n=this.beans.selectionSvc)==null||n.handleSelectionEvent(e,i,"spaceKey")),e.preventDefault()}},C6=class extends ${constructor(e,t,s){super(),this.cellCtrl=e,this.column=s,this.beans=t}onMouseEvent(e,t){if(!Ur(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){var m;if((m=this.beans.touchSvc)!=null&&m.handleCellDoubleClick(this,e))return;const{eventSvc:t,rangeSvc:s,editSvc:i,editModelSvc:n,frameworkOverrides:o,gos:r}=this.beans,a=e.ctrlKey||e.metaKey,{cellCtrl:l}=this,{column:c,cellPosition:d,rowNode:h}=l,u=jm(r,c,h,e);s&&a&&!u&&s.getCellRangeCount(d)>1&&s.intersectLastRange(!0);const f=l.createEvent(e,"cellClicked");f.isEventHandlingSuppressed=u,t.dispatchEvent(f);const p=c.getColDef();if(p.onCellClicked&&window.setTimeout(()=>{o.wrapOutgoing(()=>{p.onCellClicked(f)})},0),!u&&(n==null?void 0:n.getState(l))!=="editing"){const v=i==null?void 0:i.isEditing(),C=(n==null?void 0:n.getCellValidationModel().getCellValidationMap().size)??0,b=(n==null?void 0:n.getRowValidationModel().getRowValidationMap().size)??0;if(v&&(C>0||b>0))return;i!=null&&i.shouldStartEditing(l,e)?i==null||i.startEditing(l,{event:e}):i!=null&&i.shouldStopEditing(l,e)&&(this.beans.gos.get("editType")==="fullRow"?i==null||i.stopEditing(l,{event:e,source:"edit"}):i==null||i.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){const{column:t,beans:s,cellCtrl:i}=this,{eventSvc:n,frameworkOverrides:o,editSvc:r,editModelSvc:a,gos:l}=s,c=jm(l,i.column,i.rowNode,e),d=t.getColDef(),h=i.createEvent(e,"cellDoubleClicked");if(h.isEventHandlingSuppressed=c,n.dispatchEvent(h),typeof d.onCellDoubleClicked=="function"&&window.setTimeout(()=>{o.wrapOutgoing(()=>{d.onCellDoubleClicked(h)})},0),!c&&r!=null&&r.shouldStartEditing(i,e)&&(a==null?void 0:a.getState(i))!=="editing"){const u=r==null?void 0:r.isEditing(),f=(a==null?void 0:a.getCellValidationModel().getCellValidationMap().size)??0,p=(a==null?void 0:a.getRowValidationModel().getRowValidationMap().size)??0;if(u&&(f>0||p>0))return;r==null||r.startEditing(i,{event:e})}}onMouseDown(e){const{ctrlKey:t,metaKey:s,shiftKey:i}=e,n=e.target,{cellCtrl:o,beans:r}=this,{eventSvc:a,rangeSvc:l,rowNumbersSvc:c,focusSvc:d,gos:h,editSvc:u}=r,{column:f,rowNode:p,cellPosition:m}=o,v=jm(h,f,p,e),C=()=>{const R=o.createEvent(e,"cellMouseDown");R.isEventHandlingSuppressed=v,a.dispatchEvent(R)};if(v){C();return}if(this.isRightClickInExistingRange(e))return;const b=l&&!l.isEmpty(),y=this.containsWidget(n),S=Wr(f);if(c&&S&&!c.handleMouseDownOnCell(m,e)){l&&e.preventDefault(),e.stopImmediatePropagation();return}if(!i||!b){const R=u==null?void 0:u.isEditing(o),F=h.get("enableCellTextSelection")&&e.defaultPrevented,T=(bl()||F)&&!R&&!vg(n)&&!y;o.focusCell(T,e)}if(i&&b&&!d.isCellFocused(m)){e.preventDefault();const R=d.getFocusedCell();if(R){const{column:A,rowIndex:F,rowPinned:T}=R;u!=null&&u.isEditing(R)&&(u==null||u.stopEditing(R)),d.setFocusedCell({column:A,rowIndex:F,rowPinned:T,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}if(!y){if(l){S&&e.preventDefault();const R=lR(r,e)&&S;if(i)l.extendLatestRangeToCell(m);else if(!R){const A=t||s;l.setRangeToCell(m,A)}}C()}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const s=t.isCellInAnyRange(this.cellCtrl.cellPosition),i=lR(this.beans,e);if(s&&i)return!0}return!1}containsWidget(e){return Wc(e,"ag-selection-checkbox",3)||Wc(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:s}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),s==null||s.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:s}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),s==null||s.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,s=t.contains(e.target),i=t.contains(e.relatedTarget);return s&&i}},w6=class extends ${constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();wl(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,s=e.getColSpan(t),i=[];if(s===1)i.push(e);else{let n=e;const o=e.getPinned();for(let r=0;n&&r<s&&(i.push(n),n=this.beans.visibleCols.getColAfter(n),!(!n||Wt(n)||o!==n.getPinned()));r++);}return i}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=It(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;const{visibleCols:t}=this.beans,s=t.getColsLeftWidth();if(this.column.getPinned()==="right"){const i=t.bodyWidth;return s+i+(e||0)}return s+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;const s=Uc(this.beans)*this.rowSpan;this.eContent.style.height=`${s}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},b6="ag-cell",y6="ag-cell-auto-height",S6="ag-cell-normal-height",x6="ag-cell-focus",R6="ag-cell-first-right-pinned",E6="ag-cell-last-left-pinned",A6="ag-cell-not-inline-editing",F6="ag-cell-wrap-text",P6=0,th=class extends ${constructor(e,t,s,i){super(),this.column=e,this.rowNode=t,this.rowCtrl=i,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=s,this.gos=s.gos,this.editSvc=s.editSvc,this.hasEdit=!!s.editSvc;const{colId:n}=e;this.instanceId=n+"-"+P6++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){var i,n;const{beans:e}=this;this.positionFeature=new w6(this,e),this.customStyleFeature=(i=e.cellStyles)==null?void 0:i.createCellCustomStyleFeature(this,e),this.editStyleFeature=(n=e.editSvc)==null?void 0:n.createCellStyleFeature(this,e),this.mouseListener=new C6(this,e,this.column),this.keyboardListener=new v6(this,e,this.rowNode,this.rowCtrl),this.enableTooltipFeature();const{rangeSvc:t}=e;t&&Jr(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(e,this)),Wr(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(e,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){var s;this.tooltipFeature=(s=this.beans.tooltipSvc)==null?void 0:s.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(e){var t;this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=(t=this.beans.tooltipSvc)==null?void 0:t.setupCellEditorTooltip(this,e),nd(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,s,i,n,o,r){var a,l,c,d,h,u,f,p,m;if(this.comp=e,this.eGui=t,this.printLayout=n,r??(r=this),this.addDomData(r),this.addFeatures(),r.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,r),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(a=this.positionFeature)==null||a.init(),(l=this.customStyleFeature)==null||l.setComp(e),(c=this.editStyleFeature)==null||c.setComp(e),(d=this.tooltipFeature)==null||d.refreshTooltip(),(h=this.keyboardListener)==null||h.init(),(u=this.rangeFeature)==null||u.setComp(e),(f=this.rowResizeFeature)==null||f.refreshRowResizer(),o&&this.isCellEditable()||this.hasEdit&&((p=this.editSvc)!=null&&p.isEditing(this,{withOpenEditor:!0}))?(m=this.editSvc)==null||m.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0}):this.showValue(!1,!0),this.onCompAttachedFuncs.length){for(const v of this.onCompAttachedFuncs)v();this.onCompAttachedFuncs=[]}}setupAutoHeight(e,t){var s;this.isAutoHeight=((s=this.beans.rowAutoHeight)==null?void 0:s.setupCellAutoHeight(this,e,t))??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){var l,c;const{beans:e,column:t}=this,{userCompFactory:s,ctrlsSvc:i,eventSvc:n}=e,o=t.getColDef(),r=this.createCellRendererParams();r.deferRender=!0;const a=fR(s,o,r);if((c=(l=i.getGridBodyCtrl())==null?void 0:l.scrollFeature)!=null&&c.isScrolling()){let d;const h=new es(f=>{d=f}),[u]=this.addManagedListeners(n,{bodyScrollEnd:()=>{d(),u()}});return{loadingComp:a,onReady:h}}return{loadingComp:a,onReady:es.resolve()}}showValue(e,t){var h,u,f,p;const{beans:s,column:i,rowNode:n,rangeFeature:o}=this,{userCompFactory:r}=s;let a=this.getValueToDisplay(),l;const c=n.stub&&((h=n.groupData)==null?void 0:h[i.getId()])==null,d=i.getColDef();if(c||this.isCellRenderer()){const m=this.createCellRendererParams();!c||Wr(i)?l=gR(r,d,m):l=fR(r,d,m)}if(!l&&!c&&((u=s.findSvc)!=null&&u.isMatch(n,i))){const m=this.createCellRendererParams();l=gR(r,{...i.getColDef(),cellRenderer:"agFindCellRenderer"},m)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(n,{checkSiblings:!0})){const m=this.editSvc.prepDetailsDuringBatch(this,{compDetails:l,valueToDisplay:a});m&&(m.compDetails?l=m.compDetails:m.valueToDisplay&&(a=m.valueToDisplay))}this.comp.setRenderDetails(l,a,e),(f=this.customRowDragComp)==null||f.refreshVisibility(),!t&&o&&ia(s,()=>o==null?void 0:o.refreshHandle()),(p=this.rowResizeFeature)==null||p.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){const e="ag-cell-value",t=this.column.getColDef().cellRenderer==="agCheckboxCellRenderer";let s="";return t&&(s=" ag-allow-overflow"),`${e}${s}`}isIncludeControl(e,t=!1){return(this.rowNode.rowPinned==null||t&&_p(this.rowNode))&&!!e}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:s}=this.beans.gridOptions,i=bv(t),n=na(this.column);return s==="custom"&&i!=="selectionColumn"&&n?!1:e.checkboxSelection||n&&typeof t=="object"&&Yd(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),s=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),i=this.includeDndSource!=this.isIncludeControl(e.dndSource),n=this.isAutoHeight!=this.column.isAutoHeight();return t||s||i||n}onPopupEditorClosed(){const{editSvc:e}=this.beans;e!=null&&e.isEditing(this,{withOpenEditor:!0})&&(e==null||e.stopEditing(this,{source:e!=null&&e.isBatchEditing()?"ui":"api"}))}stopEditing(e=!1){const{editSvc:t}=this.beans;return(t==null?void 0:t.stopEditing(this,{cancel:e,source:t!=null&&t.isBatchEditing()?"ui":"api"}))??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:s,rowNode:i,comp:n,eGui:o,beans:{valueSvc:r,gos:a,editSvc:l}}=this;return Be(a,{value:e,valueFormatted:t,getValue:()=>r.getValueForDisplay(s,i).value,setValue:d=>(l==null?void 0:l.setDataValue({rowNode:i,column:s},d))||i.setDataValue(s,d),formatValue:this.formatValue.bind(this),data:i.data,node:i,pinned:s.getPinned(),colDef:s.getColDef(),column:s,refreshCell:this.refreshCell.bind(this),eGridCell:o,eParentOfValue:n.getParentOfValue(),registerRowDragger:(d,h,u,f)=>this.registerRowDragger(d,h,f),setTooltip:(d,h)=>{var u;a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(d,h),(u=this.tooltipFeature)==null||u.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;if(this.refreshShouldDestroy()?(t=this.rowCtrl)==null||t.recreateCell(this):this.refreshCell(e),this.hasEdit&&this.editCompDetails){const{editSvc:s,comp:i}=this;!(i!=null&&i.getCellEditor())&&s.isEditing(this,{withOpenEditor:!0})&&s.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell({force:e,suppressFlash:t,newData:s}={}){var R;const{editStyleFeature:i,customStyleFeature:n,rowCtrl:{rowEditStyleFeature:o},beans:{cellFlashSvc:r,filterManager:a},column:l,comp:c,suppressRefreshCell:d,tooltipFeature:h}=this;if(d)return;const{field:u,valueGetter:f,showRowGroup:p,enableCellChangeFlash:m}=l.getColDef(),v=u==null&&f==null&&p==null,C=e||v||s,b=!!c,y=this.updateAndFormatValue(b),S=C||y;if(b){if(S){this.showValue(!!s,!1);const A=a==null?void 0:a.isSuppressFlashingCellsBecauseFiltering();!t&&!A&&m&&(r==null||r.flashCell(this)),(R=i==null?void 0:i.applyCellStyles)==null||R.call(i),n==null||n.applyUserStyles(),n==null||n.applyClassesFromColDef(),o==null||o.applyRowStyles()}h==null||h.refreshTooltip(),n==null||n.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,s=this.valueFormatted,{value:i,valueFormatted:n}=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode,!0);return this.value=i,this.valueFormatted=n,e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=s:!0}valuesAreEqual(e,t){const s=this.column.getColDef();return s.equals?s.equals(e,t):e===t}addDomData(e){const t=this.eGui;td(this.beans.gos,t,Tv,this),e.addDestroyFunc(()=>td(this.beans.gos,t,Tv,null))}createEvent(e,t){const{rowNode:s,column:i,value:n,beans:o}=this;return p6(o,e,t,{rowNode:s,column:i},n)}processCharacter(e){var t;(t=this.keyboardListener)==null||t.processCharacter(e)}onKeyDown(e){var t;(t=this.keyboardListener)==null||t.onKeyDown(e)}onMouseEvent(e,t){var s;(s=this.mouseListener)==null||s.onMouseEvent(e,t)}getColSpanningList(){var e;return((e=this.positionFeature)==null?void 0:e.getColSpanningList())??[]}onLeftChanged(){var e;this.comp&&((e=this.positionFeature)==null||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:s}=this;e_(e,t,s.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);RT(this.eGui,e)}onWidthChanged(){var e;return(e=this.positionFeature)==null?void 0:e.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){var e;this.comp&&((e=this.rangeFeature)==null||e.updateRangeBordersIfRangeCount())}onCellSelectionChanged(){var e;this.comp&&((e=this.rangeFeature)==null||e.onCellSelectionChanged())}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1,t){var i;const s=(i=this.editSvc)==null?void 0:i.allowedFocusTargetOnValidation(this);s&&s!==this||this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e,sourceEvent:t})}restoreFocus(e=!1){const{beans:{editSvc:t,focusSvc:s},comp:i}=this;if(!i||t!=null&&t.isEditing(this)||!this.isCellFocused()||!s.shouldTakeFocus())return;const n=()=>{if(!this.isAlive())return;const o=i.getFocusableElement();this.isCellFocused()&&o.focus({preventScroll:!0})};if(e){setTimeout(n,0);return}n()}onRowIndexChanged(){var e,t;this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),(e=this.rangeFeature)==null||e.onCellSelectionChanged(),(t=this.rowResizeFeature)==null||t.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(Wr(this.column)&&(e=!0),qi(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss(R6,e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss(E6,e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){var n;const{beans:t}=this;if(PC(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}const s=this.isCellFocused(),i=((n=t.editSvc)==null?void 0:n.isEditing(this))??!1;if(this.comp.toggleCss(x6,s),s&&(e!=null&&e.forceBrowserFocus)){let o=this.comp.getFocusableElement();if(i){const r=Qd(o,null,!0);r.length&&(o=r[0])}o.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}s&&e&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:zr(t),column:this.column}}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss(b6,!0),e.toggleCss(A6,!0);const t=this.column.isAutoHeight()==!0;e.toggleCss(y6,t),e.toggleCss(S6,!t)}onColumnHover(){var e;(e=this.beans.colHover)==null||e.onCellColumnHover(this.column,this.comp)}onColDefChanged(){var e,t;this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),(e=this.editSvc)!=null&&e.isEditing(this)?(t=this.editSvc)==null||t.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.comp.toggleCss(F6,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),s=this.createEvent(e,"cellContextMenu"),{beans:i}=this;i.eventSvc.dispatchEvent(s),t.onCellContextMenu&&window.setTimeout(()=>{i.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(s)})},0)}getCellRenderer(){var e;return((e=this.comp)==null?void 0:e.getCellRenderer())??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){var e;return((e=this.eGui)==null?void 0:e.contains(qt(this.beans)))??!1}createSelectionCheckbox(){var t;const e=(t=this.beans.selectionSvc)==null?void 0:t.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,s){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const i=this.createRowDragComp(e,t,s);i&&(this.customRowDragComp=i,this.addDestroyFunc(()=>{this.beans.context.destroyBean(i),this.customRowDragComp=null}),i.refreshVisibility())}createRowDragComp(e,t,s){var n;const i=(n=this.beans.rowDragSvc)==null?void 0:n.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,s);if(i)return this.beans.context.createBean(i),i}cellEditorAttached(){for(const e of this.onEditorAttachedFuncs)e();this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function L0(e,t,s,i,n,o){if(s==null&&t==null)return;const r={},a={},l=(c,d)=>{for(const h of c.split(" "))h.trim()!=""&&d(h)};if(s){const c=Object.keys(s);for(let d=0;d<c.length;d++){const h=c[d],u=s[h];let f;typeof u=="string"?f=e?e.evaluate(u,i):!0:typeof u=="function"&&(f=u(i)),l(h,p=>{f?r[p]=!0:a[p]=!0})}}if(t&&o)for(const c of Object.keys(t))l(c,d=>{r[d]||(a[d]=!0)});o&&Object.keys(a).forEach(o),Object.keys(r).forEach(n)}function oE(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var T6=class extends ${constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const s=this.gos,i=r=>{if(typeof r=="string")e.push(r);else if(Array.isArray(r))for(const a of r)e.push(a)},n=s.get("rowClass");n&&i(n);const o=s.getCallback("getRowClass");if(o){const r={data:t.data,node:t,rowIndex:t.rowIndex},a=o(r);i(a)}}preProcessRowClassRules(e,t){this.processRowClassRules(t,s=>{e.push(s)},()=>{})}processRowClassRules(e,t,s){const{gos:i,expressionSvc:n}=this.beans,o=Be(i,{data:e.data,node:e,rowIndex:e.rowIndex});L0(n,void 0,i.get("rowClassRules"),o,t,s)}processStylesFromGridOptions(e){const t=this.gos,s=t.get("rowStyle"),i=t.getCallback("getRowStyle");let n;if(i){const o={data:e.data,node:e,rowIndex:e.rowIndex};n=i(o)}if(n||s)return Object.assign({},s,n)}},D6=0,kv=class extends ${constructor(e,t,s,i,n){var o,r;super(),this.rowNode=e,this.useAnimationFrameForCreate=i,this.printLayout=n,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=((o=t.pagination)==null?void 0:o.getCurrentPage())??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+D6++,this.rowId=mg(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=oE(this.rowNode),this.setRowType(),this.setAnimateFlags(s),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=(r=t.editSvc)==null?void 0:r.createRowStyleFeature(this,t),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=mg(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,s,i){var h,u;const{context:n,focusSvc:o}=this.beans;i=Fp(this,n,i);const r={rowComp:e,element:t,containerType:s,compBean:i};this.allRowGuis.push(r),this.updateGui(s,r),this.initialiseRowComp(r);const a=this.rowNode,l=this.rowType==="FullWidthLoading"||a.stub,c=!a.data&&this.beans.rowModel.getType()==="infinite";!l&&!c&&!a.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent();const d=(h=this.fullWidthGui)==null?void 0:h.element;d&&!((u=this.beans.editSvc)!=null&&u.isEditing(this))&&o.isRowFocused(a.rowIndex,a.rowPinned)&&o.shouldTakeFocus()&&setTimeout(()=>d.focus({preventScroll:!0}),0)}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";for(const s of this.allRowGuis)s.element.style.display=t}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),$c(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const s=e.rowComp,i=this.getInitialRowClasses(e.containerType);for(const n of i)s.toggleCss(n,!0);this.executeSlideAndFadeAnimations(e),this.rowNode.group&&Ty(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(s),this.setRowCompRowBusinessKey(s),td(t,e.element,Dv,this),e.compBean.addDestroyFunc(()=>td(t,e.element,Dv,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=mg(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(Dy(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(Dy(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){var i;const t=(i=this.beans.rowDragSvc)==null?void 0:i.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;const s=this.createBean(t,this.beans.context);this.rowDragComps.push(s),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(n=>n!==s),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(s,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),s=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(s)}getFullWidthCellRenderers(){var e,t;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(s=>{var i;return(i=s==null?void 0:s.rowComp)==null?void 0:i.getFullWidthCellRenderer()}):[(t=(e=this.fullWidthGui)==null?void 0:e.rowComp)==null?void 0:t.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:s,beans:{visibleCols:i}}=this,n=!!e||!i.isPinningLeft(),o=!!t,r=!!s||!i.isPinningRight();return n&&o&&r}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),s=this.gos.get("masterDetail")&&this.rowNode.detail,i=this.beans.colModel.isPivotMode(),n=QT(this.gos,this.rowNode,i);e?this.rowType="FullWidthLoading":s?this.rowType="FullWidthDetail":t?this.rowType="FullWidth":n?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:s}=this.beans;if(!(s!=null&&s.active)||e||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(s.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){var s;if(!((s=this.beans.rowSpanSvc)!=null&&s.isCellSpanning(e,this.rowNode)))return new th(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){var t;return!((t=this.beans.rowSpanSvc)!=null&&t.isCellSpanning(e.column,this.rowNode))}createCellCtrls(e,t,s=null){const i={list:[],map:{}},n=(c,d,h)=>{h!=null?i.list.splice(h,0,d):i.list.push(d),i.map[c]=d},o=[];for(const c of t){const d=c.getInstanceId();let h=e.map[d];h&&!this.isCorrectCtrlForSpan(h)&&(h.destroy(),h=void 0),h||(h=this.getNewCellCtrl(c)),h&&n(d,h)}for(const c of e.list){const d=c.column.getInstanceId();if(i.map[d]!=null)continue;!this.isCellEligibleToBeRemoved(c,s)?o.push([d,c]):c.destroy()}if(o.length)for(const[c,d]of o){const h=i.list.findIndex(f=>f.column.getLeft()>d.column.getLeft()),u=h===-1?void 0:Math.max(h-1,0);n(c,d,u)}const{focusSvc:r,visibleCols:a}=this.beans,l=r.getFocusedCell();if(l&&l.column.getPinned()==s){const c=l.column.getInstanceId();if(!i.map[c]&&a.allCols.includes(l.column)){const h=this.createFocusedCellCtrl();if(h){const u=i.list.findIndex(p=>p.column.getLeft()>h.column.getLeft()),f=u===-1?void 0:Math.max(u-1,0);n(c,h,f)}}}return i}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,s=e.getFocusedCell();if(!s)return;const i=t==null?void 0:t.getCellSpan(s.column,this.rowNode);if(i){if(i.firstNode!==this.rowNode||!i.doesSpanContain(s))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(s.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){for(const t of this.allRowGuis){const s=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(s,e)}}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const s=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,s);const i=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,i,"left");const n=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,n,"right")}}isCellEligibleToBeRemoved(e,t){const{column:n}=e;if(n.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;const{visibleCols:o,editSvc:r}=this.beans,a=r==null?void 0:r.isEditing(e),l=e.isCellFocused();return a||l?!(o.allCols.indexOf(n)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||qs(this.gos,"print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=pe(this.rowNode.oldRowTop),{visibleCols:s}=this.beans,i=s.isPinningLeft(),n=s.isPinningRight();if(t){const{slideInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=i,o.right=n}else{const{fadeInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=i,o.right=n}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const e=(r,a)=>r?r.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(r.element,a).params):!0,t=e(this.fullWidthGui,null),s=e(this.centerGui,null),i=e(this.leftGui,"left"),n=e(this.rightGui,"right");return t&&s&&i&&n}addListeners(){const{beans:e,gos:t,rowNode:s}=this,{expansionSvc:i,eventSvc:n,context:o,rowSpanSvc:r}=e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...(i==null?void 0:i.getRowExpandedListeners(this))??{}}),s.detail&&this.addManagedListeners(s.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(s,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(n,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),r&&this.addManagedListeners(r,{spannedCellsUpdated:({pinned:a})=>{a&&!s.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,o),this.tooltipFeature=this.destroyBean(this.tooltipFeature,o),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,o)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(t.get("rowDragEntireRow")){for(const l of this.allRowGuis)this.addRowDraggerToRow(l);return}this.rowDragComps=this.destroyBeans(this.rowDragComps,o)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(const e of this.getAllCellCtrls())e.onRowIndexChanged()},cellChanged:e=>{for(const t of this.getAllCellCtrls())t.onCellChanged(e)}})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}for(const s of this.getAllCellCtrls())s.refreshCell(e);for(const s of this.allRowGuis)this.setRowCompRowId(s.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(s.rowComp);this.onRowSelected(),this.postProcessCss()}postProcessCss(){var e;this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),(e=this.rowEditStyleFeature)==null||e.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.beans.rowDropHighlightSvc,t=(e==null?void 0:e.row)===this.rowNode?e.position:"none",s=t==="above",i=t==="inside",n=t==="below",r=this.gos.get("treeData")&&(n||s),a=this.rowNode.uiLevel.toString();for(const l of this.allRowGuis){const c=l.rowComp;c.toggleCss("ag-row-highlight-above",s),c.toggleCss("ag-row-highlight-inside",i),c.toggleCss("ag-row-highlight-below",n),c.toggleCss("ag-row-highlight-indent",r),r?l.element.style.setProperty("--ag-row-highlight-level",a):l.element.style.removeProperty("--ag-row-highlight-level")}}postProcessRowDragging(){const e=this.rowNode.dragging;for(const t of this.allRowGuis)t.rowComp.toggleCss("ag-row-dragging",e)}onDisplayedColumnsChanged(){var e;this.updateColumnLists(!0),(e=this.beans.rowAutoHeight)==null||e.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:zr(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:s,column:i}=t;if(!(s.element===e.target))return;const r=this.rowNode,{focusSvc:a,navigation:l}=this.beans,c=a.getFocusedCell(),d={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:(c==null?void 0:c.column)??i};l==null||l.navigateToNextCell(e,e.key,d,!0),e.preventDefault()}onTabKeyDown(e){var a;if(e.defaultPrevented||Ur(e))return;const t=this.allRowGuis.find(l=>l.element.contains(e.target)),s=t?t.element:null,i=s===e.target,n=qt(this.beans);let o=!1;s&&n&&(o=s.contains(n)&&n.classList.contains("ag-cell"));let r=null;!i&&!o&&(r=md(this.beans,s,!1,e.shiftKey)),(this.isFullWidth()&&i||!r)&&((a=this.beans.navigation)==null||a.onTabKeyDown(this,e))}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var t;const e=(t=this.allRowGuis.find(s=>Xo(s.element)))==null?void 0:t.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:this.gos.get("tabIndex");for(const s of this.allRowGuis)qi(s.element,"tabindex",t)}onFullWidthRowFocused(e){var n,o,r;const t=this.rowNode,s=e?this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned:!1;let i;if(this.fullWidthGui)i=this.fullWidthGui.element;else{const a=this.beans.colModel.getCol(e==null?void 0:e.column),l=a==null?void 0:a.pinned;l?i=l==="right"?(n=this.rightGui)==null?void 0:n.element:(o=this.leftGui)==null?void 0:o.element:i=(r=this.centerGui)==null?void 0:r.element}i&&(i.classList.toggle("ag-full-width-focus",s),s&&(e!=null&&e.forceBrowserFocus)&&i.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const s={list:[],map:{}};for(const i of e.list)i!==t&&(s.list.push(i),s.map[i.column.getInstanceId()]=i);return s}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){const{rowNode:s}=this;return Be(this.gos,{type:e,node:s,data:s.data,rowIndex:s.rowIndex,rowPinned:s.rowPinned,event:t})}createRowEventWithSource(e,t){const s=this.createRowEvent(e,t);return s.source=this,s}onRowDblClick(e){if(Ur(e))return;const t=this.createRowEventWithSource("rowDoubleClicked",e);t.isEventHandlingSuppressed=this.isSuppressMouseEvent(e),this.beans.eventSvc.dispatchEvent(t)}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),s=this.getColumnForFullWidth(t);if(!(!t||!s))return{rowGui:t,column:s}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(e==null?void 0:e.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=Wc(e.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(e))return;const{rangeSvc:t,focusSvc:s}=this.beans;t==null||t.removeAllCellRanges();const i=this.findFullWidthInfoForEvent(e);if(!i)return;const{rowGui:n,column:o}=i,r=n.element,a=e.target,l=this.rowNode;let c=e.defaultPrevented||bl();r&&r.contains(a)&&vg(a)&&(c=!1),s.setFocusedCell({rowIndex:l.rowIndex,column:o,rowPinned:l.rowPinned,forceBrowserFocus:c})}isSuppressMouseEvent(e){const{gos:t,rowNode:s}=this;if(this.isFullWidth()){const n=this.findFullWidthRowGui(e.target);return lW(t,n==null?void 0:n.rowComp.getFullWidthCellRendererParams(),s,e)}const i=E0(t,e.target);return i!=null&&jm(t,i.column,s,e)}onRowClick(e){if(Ur(e)||this.lastMouseDownOnDragger)return;const s=this.isSuppressMouseEvent(e),{eventSvc:i,selectionSvc:n}=this.beans,o=this.createRowEventWithSource("rowClicked",e);o.isEventHandlingSuppressed=s,i.dispatchEvent(o),!s&&(n==null||n.handleSelectionEvent(e,this.rowNode,"rowClicked"))}setupDetailRowAutoHeight(e){var t;this.rowType==="FullWidthDetail"&&((t=this.beans.masterDetailSvc)==null||t.setupDetailRowAutoHeight(this,e))}createFullWidthCompDetails(e,t){const{gos:s,rowNode:i}=this,n=Be(s,{fullWidth:!0,data:i.data,node:i,value:i.key,valueFormatted:i.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(r,a,l,c)=>this.addFullWidthRowDragging(r,a,l,c),setTooltip:(r,a)=>{s.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(r,a)}}),o=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return fV(o,n);case"FullWidthGroup":{const{value:r,valueFormatted:a}=this.beans.valueSvc.getValueForDisplay(void 0,this.rowNode,!0);return n.value=r,n.valueFormatted=a,gV(o,n)}case"FullWidthLoading":return uV(o,n);default:return hV(o,n)}}setupFullWidthRowTooltip(e,t){var s;this.fullWidthGui&&(this.tooltipFeature=(s=this.beans.tooltipSvc)==null?void 0:s.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,s="",i){const{rowDragSvc:n,context:o}=this.beans;if(!n||!this.isFullWidth())return;const r=n.createRowDragComp(()=>s,this.rowNode,void 0,e,t,i);this.createBean(r,o),this.addDestroyFunc(()=>{this.destroyBean(r,o)})}onUiLevelChanged(){const e=oE(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,s="ag-row-level-"+this.rowLevel;for(const i of this.allRowGuis)i.rowComp.toggleCss(t,!0),i.rowComp.toggleCss(s,!1)}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();if(this.firstRowOnPage!==e){this.firstRowOnPage=e;for(const s of this.allRowGuis)s.rowComp.toggleCss("ag-row-first",e)}if(this.lastRowOnPage!==t){this.lastRowOnPage=t;for(const s of this.allRowGuis)s.rowComp.toggleCss("ag-row-last",t)}}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){var t;const e=[];if((t=this.beans.rowStyleSvc)==null||t.processClassesFromGridOptions(e,this.rowNode),!!e.length)for(const s of e)for(const i of this.allRowGuis)i.rowComp.toggleCss(s,!0)}postProcessRowClassRules(){var e;(e=this.beans.rowStyleSvc)==null||e.processRowClassRules(this.rowNode,t=>{for(const s of this.allRowGuis)s.rowComp.toggleCss(t,!0)},t=>{for(const s of this.allRowGuis)s.rowComp.toggleCss(t,!1)})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,s=>s.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){var a,l;const t=this.getPinnedForContainer(e),s=this.isFullWidth(),{rowNode:i,beans:n}=this,o=[];o.push("ag-row"),o.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&o.push("ag-opacity-zero"),o.push(i.rowIndex%2===0?"ag-row-even":"ag-row-odd"),i.isRowPinned()&&(o.push("ag-row-pinned"),(a=n.pinnedRowModel)!=null&&a.isManual()&&o.push("ag-row-pinned-manual")),!i.isRowPinned()&&i.pinnedSibling&&o.push("ag-row-pinned-source"),i.isSelected()&&o.push("ag-row-selected"),i.footer&&o.push("ag-row-footer"),o.push("ag-row-level-"+this.rowLevel),i.stub&&o.push("ag-row-loading"),s&&o.push("ag-full-width-row"),(l=n.expansionSvc)==null||l.addExpandedCss(o,i),i.dragging&&o.push("ag-row-dragging");const{rowStyleSvc:r}=n;return r&&(r.processClassesFromGridOptions(o,i),r.preProcessRowClassRules(o,i)),o.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&o.push("ag-row-first"),this.isLastRowOnPage()&&o.push("ag-row-last"),s&&(t==="left"&&o.push("ag-cell-last-left-pinned"),t==="right"&&o.push("ag-cell-first-right-pinned")),o}processStylesFromGridOptions(){var e;return((e=this.beans.rowStyleSvc)==null?void 0:e.processStylesFromGridOptions(this.rowNode))??this.emptyStyle}onRowSelected(e){var t;(t=this.beans.selectionSvc)==null||t.onRowCtrlSelected(this,s=>{(s===this.centerGui||s===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){var e;(e=this.beans.selectionSvc)==null||e.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:s}=e,{rowNode:i,beans:n,gos:o}=this;s.addManagedListeners(t,{pointerenter:r=>{r.pointerType==="mouse"&&i.dispatchRowEvent("mouseEnter")},pointerleave:r=>{r.pointerType==="mouse"&&i.dispatchRowEvent("mouseLeave")}}),s.addManagedListeners(i,{mouseEnter:()=>{var r;!((r=n.dragSvc)!=null&&r.dragging)&&!o.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),i.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(s=>s.element);for(const s of t)s.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),s=this.applyPaginationOffset(t.top,!0)-100,i=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(s,e),i)}forEachGui(e,t){if(e)t(e);else for(const s of this.allRowGuis)t(s)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,s=this.beans.environment.getDefaultRowHeight(),n=jT(this.gos)?hl(this.beans,this.rowNode).height:void 0,o=n?`${Math.min(s,n)-2}px`:void 0;this.forEachGui(e,r=>{r.element.style.height=`${t}px`,o&&r.element.style.setProperty("--ag-line-height",o)})}destroyFirstPass(e=!1){var i;this.active=!1;const{rowNode:t}=this;if(!e&&qd(this.gos)&&!t.sticky)if(t.rowTop!=null){const o=this.roundRowTopToBounds(t.rowTop);this.setRowTop(o)}else for(const o of this.allRowGuis)o.rowComp.toggleCss("ag-opacity-zero",!0);(i=this.fullWidthGui)!=null&&i.element.contains(qt(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);const s=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(s),this.beans.eventSvc.dispatchEvent(s),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const e=t=>{for(const s of t.list)s.destroy();return{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.toggleCss("ag-row-focus",this.rowFocused),t.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){var t;const e=((t=this.beans.pagination)==null?void 0:t.getCurrentPage())??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const s=this.beans.pageBounds.getPixelOffset();return e+s*(t?1:-1)}setRowTop(e){if(!this.printLayout&&pe(e)){const t=this.applyPaginationOffset(e),n=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(n)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let s;if(t.sticky)s=t.stickyRowTop;else{const i=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,n=this.applyPaginationOffset(i);s=t.isRowPinned()?n:this.beans.rowContainerHeight.getRealPixelPosition(n)}return s+"px"}setRowTopStyle(e){for(const t of this.allRowGuis)this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)}getCellCtrl(e,t=!1){let s=null;for(const i of this.getAllCellCtrls())i.column==e&&(s=i);if(s!=null||t)return s;for(const i of this.getAllCellCtrls())(i==null?void 0:i.getColSpanningList().indexOf(e))>=0&&(s=i);return s}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){var o,r;const t=this.rowNode.getRowIndexString();if(t===null)return;const s=(((o=this.beans.ctrlsSvc.getHeaderRowContainerCtrl())==null?void 0:o.getRowCount())??0)+(((r=this.beans.filterManager)==null?void 0:r.getHeaderRowCount())??0),i=this.rowNode.rowIndex%2===0,n=s+this.rowNode.rowIndex+1;this.forEachGui(e,a=>{a.rowComp.setRowIndex(t),a.rowComp.toggleCss("ag-row-even",i),a.rowComp.toggleCss("ag-row-odd",!i),gv(a.element,n)})}},_6=class extends ${constructor(){super(),this.beanName="navigation",this.onPageDown=iR(this.onPageDown,100),this.onPageUp=iR(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const s=e.key,i=e.altKey,n=e.ctrlKey||e.metaKey,o=!!this.beans.rangeSvc&&e.shiftKey,r=IW(this.gos,e);let a=!1;switch(s){case H.PAGE_HOME:case H.PAGE_END:!n&&!i&&(this.onHomeOrEndKey(s),a=!0);break;case H.LEFT:case H.RIGHT:case H.UP:case H.DOWN:if(!r)return!1;n&&!i&&!o&&(this.onCtrlUpDownLeftRight(s,r),a=!0);break;case H.PAGE_DOWN:case H.PAGE_UP:!n&&!i&&(a=this.handlePageUpDown(s,r,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,s){return s&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===H.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:s,focusIndex:i,focusColumn:n,isAsync:o,rowPinned:r}){const{scrollFeature:a}=this.gridBodyCon;pe(s)&&!s.isPinned()&&a.ensureColumnVisible(s),pe(e)&&a.ensureIndexVisible(e,t),o||a.ensureIndexVisible(i);const{focusSvc:l,rangeSvc:c}=this.beans;l.setFocusedCell({rowIndex:i,column:n,rowPinned:r,forceBrowserFocus:!0}),c==null||c.setRangeToCell({rowIndex:i,rowPinned:r,column:n})}onPageDown(e){const t=this.beans,s=Mw(t),i=this.getViewportHeight(),{pageBounds:n,rowModel:o,rowAutoHeight:r}=t,a=n.getPixelOffset(),l=s.top+i,c=o.getRowIndexAtPixel(l+a);r!=null&&r.active?this.navigateToNextPageWithAutoHeight(e,c):this.navigateToNextPage(e,c)}onPageUp(e){const t=this.beans,s=Mw(t),{pageBounds:i,rowModel:n,rowAutoHeight:o}=t,r=i.getPixelOffset(),a=s.top,l=n.getRowIndexAtPixel(a+r);o!=null&&o.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t,s=!1){const{pageBounds:i,rowModel:n}=this.beans,o=this.getViewportHeight(),r=i.getFirstRow(),a=i.getLastRow(),l=i.getPixelOffset(),c=n.getRow(e.rowIndex),d=s?(c==null?void 0:c.rowHeight)-o-l:o-l,h=(c==null?void 0:c.rowTop)+d;let u=n.getRowIndexAtPixel(h+l);if(u===e.rowIndex){const p=s?-1:1;t=u=e.rowIndex+p}let f;s?(f="bottom",u<r&&(u=r),t<r&&(t=r)):(f="top",u>a&&(u=a),t>a&&(t=a)),this.isRowTallerThanView(n.getRow(u))&&(t=u,f="top"),this.navigateTo({scrollIndex:t,scrollType:f,scrollColumn:null,focusIndex:u,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,s=!1){this.navigateTo({scrollIndex:t,scrollType:s?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const i=this.getNextFocusIndexForAutoHeight(e,s);this.navigateTo({scrollIndex:t,scrollType:s?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const s=t?-1:1,i=this.getViewportHeight(),{pageBounds:n,rowModel:o}=this.beans,r=n.getLastRow();let a=0,l=e.rowIndex;for(;l>=0&&l<=r;){const c=o.getRow(l);if(c){const d=c.rowHeight??0;if(a+d>i)break;a+=d}l+=s}return Math.max(0,Math.min(l,r))}getViewportHeight(){const e=this.beans,t=Mw(e),s=this.beans.scrollVisibleSvc.getScrollbarWidth();let i=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(i-=s),i}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const s=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),i=this.getNormalisedPosition(s),{rowIndex:n,rowPinned:o,column:r}=i??s,a=r;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:a,focusIndex:n,focusColumn:a,rowPinned:o})}onHomeOrEndKey(e){const t=e===H.PAGE_HOME,{visibleCols:s,pageBounds:i,rowModel:n}=this.beans,o=s.allCols,r=t?i.getFirstRow():i.getLastRow(),a=n.getRow(r);if(!a)return;const l=(t?o:[...o].reverse()).find(c=>!c.isSuppressNavigable(a));l&&this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:l,focusIndex:r,focusColumn:l})}onTabKeyDown(e,t){const s=t.shiftKey,i=this.tabToNextCellCommon(e,s,t),n=this.beans,{ctrlsSvc:o,pageBounds:r,focusSvc:a,gos:l}=n;if(i!==!1){i?t.preventDefault():i===null&&o.get("gridCtrl").allowFocusForNextCoreContainer(s);return}if(s){const{rowIndex:c,rowPinned:d}=e.getRowPosition();(d?c===0:c===r.getFirstRow())&&(l.get("headerHeight")===0||Kc(n)?mu(n,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof th&&e.focusCell(!0),(a.focusOverlay(!1)||mu(n,s))&&t.preventDefault()}tabToNextCell(e,t){const s=this.beans,{focusSvc:i,rowRenderer:n}=s,o=i.getFocusedCell();if(!o)return!1;let r=Bd(s,o);return!r&&(r=n.getRowByPosition(o),!(r!=null&&r.isFullWidth()))?!1:!!this.tabToNextCellCommon(r,e,t,"api")}tabToNextCellCommon(e,t,s,i="ui"){var l;const{editSvc:n,focusSvc:o}=this.beans;let r;const a=e instanceof th?e:(l=e.getAllCellCtrls())==null?void 0:l[0];return n!=null&&n.isEditing()?r=n==null?void 0:n.moveToNextCell(a,t,s,i):r=this.moveToNextCellNotEditing(e,t,s),r===null?r:r||!!o.focusedHeader}moveToNextCellNotEditing(e,t,s){const i=this.beans.visibleCols.allCols;let n;if(e instanceof kv){if(n={...e.getRowPosition(),column:t?i[0]:It(i)},this.gos.get("embedFullWidthRows")&&s){const r=e.findFullWidthInfoForEvent(s);r&&(n.column=r.column)}}else n=e.getFocusedCellPosition();const o=this.findNextCellToFocusOn(n,{backwards:t,startEditing:!1});if(o===!1)return null;if(o instanceof th)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o,t);return pe(o)}findNextCellToFocusOn(e,{backwards:t,startEditing:s,skipToNextEditableCell:i}){let n=e;const o=this.beans,{cellNavigation:r,gos:a,focusSvc:l,rowRenderer:c,rangeSvc:d}=o;for(;;){e!==n&&(e=n),t||(n=this.getLastCellOfColSpan(n)),n=r.getNextTabbedCell(n,t);const h=a.getCallback("tabToNextCell");if(pe(h)){const m=h({backwards:t,editing:s,previousCellPosition:e,nextCellPosition:n||null});if(m===!0)n=e;else{if(m===!1)return!1;n={rowIndex:m.rowIndex,column:m.column,rowPinned:m.rowPinned}}}if(!n)return null;if(n.rowIndex<0){const p=Ho(o);return l.focusHeaderPosition({headerPosition:{headerRowIndex:p+n.rowIndex,column:n.column},fromCell:!0}),null}const u=a.get("editType")==="fullRow";if(s&&(!u||i)&&!this.isCellEditable(n))continue;this.ensureCellVisible(n);const f=Bd(o,n);if(!f){const p=c.getRowByPosition(n);if(!p||!p.isFullWidth()||s)continue;return{...p.getRowPosition(),column:n==null?void 0:n.column}}if(!r.isSuppressNavigable(f.column,f.rowNode))return f.setFocusedCellPosition(n),d==null||d.setRangeToCell(n),f}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:s,rowModel:i}=this.beans;return t==="top"?s==null?void 0:s.getPinnedTopRow(e):t==="bottom"?s==null?void 0:s.getPinnedBottomRow(e):i.getRow(e)}navigateToNextCell(e,t,s,i){let n=s,o=!1;const r=this.beans,{cellNavigation:a,focusSvc:l,gos:c}=r;for(;n&&(n===s||!this.isValidNavigateCell(n));)c.get("enableRtl")?t===H.LEFT&&(n=this.getLastCellOfColSpan(n)):t===H.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=a.getNextCellToFocus(t,n),o=Wt(n);if(o&&e&&e.key===H.UP&&(n={rowIndex:-1,rowPinned:null,column:s.column}),i){const h=c.getCallback("navigateToNextCell");if(pe(h)){const f=h({key:t,previousCellPosition:s,nextCellPosition:n||null,event:e});pe(f)?n={rowPinned:f.rowPinned,rowIndex:f.rowIndex,column:f.column}:n=null}}if(!n)return;if(n.rowIndex<0){const h=Ho(r);l.focusHeaderPosition({headerPosition:{headerRowIndex:h+n.rowIndex,column:s.column},event:e||void 0,fromCell:!0});return}const d=this.getNormalisedPosition(n);d?this.focusPosition(d):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){var i;if(!!((i=this.beans.spannedRowRenderer)!=null&&i.getCellByPosition(e)))return e;this.ensureCellVisible(e);const s=Bd(this.beans,e);return s?(e=s.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:s,rowRenderer:i,focusSvc:n,eventSvc:o}=this.beans,r=s.allCols,a=i.getRowByPosition(e);if(!(a!=null&&a.isFullWidth()))return!1;const l=n.getFocusedCell(),c={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?It(r):r[0])};this.focusPosition(c);const d=t??(l!=null&&F3(c,l));return o.dispatchEvent({type:"fullWidthRowFocused",rowIndex:c.rowIndex,rowPinned:c.rowPinned,column:c.column,isFullWidthCell:!0,fromBelow:d}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:s}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),s==null||s.setRangeToCell(e)}isValidNavigateCell(e){return!!Zr(this.beans,e)}getLastCellOfColSpan(e){const t=Bd(this.beans,e);if(!t)return e;const s=t.getColSpanningList();return s.length===1?e:{rowIndex:e.rowIndex,column:It(s),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=qT(this.gos),s=this.beans.rowModel.getRow(e.rowIndex),i=t&&(s==null?void 0:s.sticky),{scrollFeature:n}=this.gridBodyCon;!i&&Wt(e.rowPinned)&&n.ensureIndexVisible(e.rowIndex),e.column.isPinned()||n.ensureColumnVisible(e.column)}ensureColumnVisible(e){const t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}};function Mw(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var M6={moduleName:"KeyboardNavigation",version:fe,beans:[_6,e6,h4],apiFunctions:{getFocusedCell:t6,clearFocusedCell:s6,setFocusedCell:i6,setFocusedHeader:r6,tabToNextCell:n6,tabToPreviousCell:o6}},k6=class extends ${constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:(e==null?void 0:e.animate)??!1,newData:(e==null?void 0:e.newData)??!1,newPage:(e==null?void 0:e.newPage)??!1,newPageSize:(e==null?void 0:e.newPageSize)??!1,keepRenderedRows:(e==null?void 0:e.keepRenderedRows)??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:s}=this.beans;t?t.calculatePages():e.calculateBounds(0,s.getRowCount()-1)}},I6=class extends ${constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){var e;return((e=this.topRowBounds)==null?void 0:e.rowIndex)??-1}getLastRow(){var e;return((e=this.bottomRowBounds)==null?void 0:e.rowIndex)??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this,s=(e==null?void 0:e.rowTop)??0,i=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:s,pageLastPixel:i}}calculateBounds(e,t){const{rowModel:s}=this.beans,i=s.getRowBounds(e);i&&(i.rowIndex=e),this.topRowBounds=i;const n=s.getRowBounds(t);n&&(n.rowIndex=t),this.bottomRowBounds=n,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){var t;const e=((t=this.topRowBounds)==null?void 0:t.rowTop)??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},L6=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",O6=class extends ${constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const s of this.elements)s&&(Vt(s,t),Go(s,e))}},N6=class extends ${constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:s}=this.beans,i=qs(e,"print"),n=i?0:t.getColsLeftWidth(),o=i?0:t.getDisplayedColumnsRightWidth();n!=this.leftWidth&&(this.leftWidth=n,s.dispatchEvent({type:"leftPinnedWidthChanged"})),o!=this.rightWidth&&(this.rightWidth=o,s.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.eBodyViewport,t=Ng(e);if(t<=50)return;const s=this.getPinnedColumnsOverflowingViewport(t-50),i=this.gos.getCallback("processUnpinnedColumns"),{columns:n,hasLockedPinned:o}=s;let r=n;!r.length&&!o||(i&&(r=i({columns:r,viewportWidth:t})),r!=null&&r.length&&(r=r.filter(a=>!Wr(a)),this.setColsPinned(r,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new O6(e,t)}setColsPinned(e,t,s){const{colModel:i,colAnimation:n,visibleCols:o,gos:r}=this.beans;if(!i.cols||!(e!=null&&e.length))return;if(qs(r,"print")){oe(37);return}n==null||n.start();let a;t===!0||t==="left"?a="left":t==="right"?a="right":a=null;const l=[];for(const c of e){if(!c)continue;const d=i.getCol(c);d&&d.getPinned()!==a&&(this.setColPinned(d,a),l.push(d))}l.length&&(o.refresh(s),cD(this.eventSvc,l,s)),n==null||n.finish()}initCol(e){const{pinned:t,initialPinned:s}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,s)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;const s=e.pinned==="left",i=e.pinned==="right";e.hidden=!0;const n=()=>{const o=s?this.leftWidth:this.rightWidth;if(o==null)return;const r=o==0,a=e.hidden!==r,l=this.gos.get("enableRtl"),c=t.getScrollbarWidth(),h=t.verticalScrollShowing&&(l&&s||!l&&i)?o+c:o;e.comp.setPinnedContainerWidth(`${h}px`),e.comp.setDisplayed(!r),a&&(e.hidden=r,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:n,rightPinnedWidthChanged:n,scrollVisibilityChanged:n,scrollbarWidthChanged:n})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:i,rightWidth:n}=this,o=Ng(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(i+n+e>o)if(o>i+n)e=o-i-n;else return 0}return e}getPinnedColumnsOverflowingViewport(e){const t=this.rightWidth??0,s=this.leftWidth??0,i=t+s;let n=!1;if(i<e)return{columns:[],hasLockedPinned:n};const{visibleCols:o}=this.beans,r=[...o.leftCols],a=[...o.rightCols];let l=0,c=0;const d=0,h=[];let u=i-d-e;for(;(c<r.length||l<a.length)&&u>0;){if(l<a.length){const f=a[l++];if(f.colDef.lockPinned){n=!0;continue}u-=f.getActualWidth(),h.push(f)}if(c<r.length&&u>0){const f=r[c++];if(f.colDef.lockPinned){n=!0;continue}u-=f.getActualWidth(),h.push(f)}}return{columns:h,hasLockedPinned:n}}},H6={moduleName:"PinnedColumn",version:fe,beans:[N6],css:[L6]},B6=class extends ${constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=Us(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=ks(e),s=this.descriptionContainer=t.createElement("div");s.classList.add("ag-aria-description-container"),ST(s,"polite"),nB(s,"additions text"),iB(s,!0),e.eGridDiv.appendChild(s)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;if(t==null||t.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}this.lastAnnouncement===t&&(t=`${t}â`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(Ks(e),e.remove()),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},G6={moduleName:"Aria",version:fe,beans:[B6]},V6=":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}",rE="ag-delay-render",z6=class extends ${constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(e){this.alreadyRevealed||this.requesters.has(e)||(this.requesters.add(e),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,t=>{t.gridBodyCtrl.eGridBody.classList.add(rE)}),this.hideRequested=!0))}revealColumns(e){if(this.alreadyRevealed||!this.isAlive()||(this.requesters.delete(e),this.requesters.size>0))return;const{renderStatus:t,ctrlsSvc:s}=this.beans;if(t){if(!t.areHeaderCellsRendered()&&this.timesRetried<5){this.timesRetried++,setTimeout(()=>this.revealColumns(e));return}this.timesRetried=0}s.getGridBodyCtrl().eGridBody.classList.remove(rE),this.alreadyRevealed=!0}},W6={moduleName:"ColumnDelayRender",version:fe,beans:[z6],css:[V6]};function $6(e){var t;(t=e.overlays)==null||t.showLoadingOverlay()}function U6(e){var t;(t=e.overlays)==null||t.showNoRowsOverlay()}function j6(e){var t;(t=e.overlays)==null||t.hideOverlay()}var K6=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}",q6={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},k_=class extends Et{constructor(){super(q6),this.eOverlayWrapper=ge,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(K6)}handleKeyDown(e){if(e.key!==H.TAB||e.defaultPrevented||Ur(e))return;const t=this.beans;if(md(t,this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;e.shiftKey?i=t.focusSvc.focusGridView({column:It(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):i=mu(t,!1),i&&e.preventDefault()}updateLayoutClasses(e,t){const s=this.eOverlayWrapper.classList,{AUTO_HEIGHT:i,NORMAL:n,PRINT:o}=Un;s.toggle(i,t.autoHeight),s.toggle(n,t.normal),s.toggle(o,t.print)}postConstruct(){this.createManagedBean(new x0(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,s,i){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),s&&this.isGridFocused()){const n=qt(this.beans);n&&!CT(this.beans)&&(this.elToFocusAfter=n)}e.then(n=>{if(this.activePromise!==e){this.activeOverlay!==n&&(this.destroyBean(n),n=null);return}if(this.activePromise=null,!!n){if(this.activeOverlay!==n&&(this.eOverlayWrapper.appendChild(n.getGui()),this.activeOverlay=n,i)){const o=n;this.updateListenerDestroyFunc=this.addManagedPropertyListener(i,({currentValue:r})=>{var a;(a=o.refresh)==null||a.call(o,Be(this.gos,{...r??{}}))})}s&&this.isGridFocused()&&sd(this.eOverlayWrapper)}})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){var i;this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.isGridFocused()&&(t=null);const s=this.updateListenerDestroyFunc;s&&(s(),this.updateListenerDestroyFunc=null),this.destroyBean(e),Ks(this.eOverlayWrapper),(i=t==null?void 0:t.focus)==null||i.call(t,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=qt(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},Y6={selector:"AG-OVERLAY-WRAPPER",component:k_},X6=class extends ${constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=rs(this.gos),this.isServerSide=!this.isClientSide&&Au(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos,t=e.get("loading");!t&&(t!==void 0||e.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){oe(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return Y6}getOverlayWrapperCompClass(){return k_}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}const{state:e,isClientSide:t,isServerSide:s,beans:{gos:i,colModel:n,rowModel:o}}=this;let r=this.gos.get("loading");r!==void 0&&(this.showInitialOverlay=!1),this.showInitialOverlay&&r===void 0&&!i.get("suppressLoadingOverlay")&&(r=!i.get("columnDefs")||!n.ready||!i.get("rowData")&&t),r?e!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&o.isEmpty()&&!i.get("suppressNoRowsOverlay")?e!==2&&this.doShowNoRowsOverlay():(e===1||!s&&e!==0)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay(vV(this.beans.userCompFactory,Be(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay(CV(this.beans.userCompFactory,Be(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,s){var n;const i=(e==null?void 0:e.newAgStackInstance())??null;(n=this.eWrapper)==null||n.showOverlay(i,t,this.isExclusive(),s),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const e=this.eWrapper;if(!e)return;let t=0;if(this.state===2){const s=this.beans.ctrlsSvc.get("gridHeaderCtrl");t=(s==null?void 0:s.headerHeight)||0}this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}},Q6={moduleName:"Overlay",version:fe,userComponents:{agLoadingOverlay:h$,agNoRowsOverlay:g$},apiFunctions:{showLoadingOverlay:$6,showNoRowsOverlay:U6,hideOverlay:j6},beans:[X6]},J6=class extends ${constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=SV(),dl(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;dl(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),s=e/t;return this.maxScrollY*s}},Z6=400,e8=class extends ${constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{for(const o of this.getAllCellCtrls())o.onCellSelectionChanged()},t=()=>{for(const o of this.getAllCellCtrls())o.updateRangeBordersIfRangeCount()},s=()=>{this.eventSvc.addListener("cellSelectionChanged",e),this.eventSvc.addListener("columnMoved",t),this.eventSvc.addListener("columnPinned",t),this.eventSvc.addListener("columnVisible",t)},i=()=>{this.eventSvc.removeListener("cellSelectionChanged",e),this.eventSvc.removeListener("columnMoved",t),this.eventSvc.removeListener("columnPinned",t),this.eventSvc.removeListener("columnVisible",t)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Jr(this.gos)?s():i()}),Jr(this.gos)&&s()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",i=>this.onSuppressCellFocusChanged(i.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:i,previousValue:n})=>{(!n&&i||n&&!i)&&this.redrawRows()});const{stickyRowSvc:e,gos:t,showRowGroupCols:s}=this.beans;if(s&&this.addManagedPropertyListener("showOpenedGroup",()=>{const i=s.getShowRowGroupCols();i.length&&this.refreshCells({columns:i,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const i=this.gridBodyCtrl;i.setStickyTopHeight(0),i.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=qs(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new t8(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){var e;return((e=this.stickyRowFeature)==null?void 0:e.stickyTopRowCtrls)??[]}getStickyBottomRowCtrls(){var e;return((e=this.stickyRowFeature)==null?void 0:e.stickyBottomRowCtrls)??[]}updateAllRowCtrls(){var i;const e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),s=((i=this.cachedRowCtrls)==null?void 0:i.getEntries())??[];t.length>0||s.length>0?this.allRowCtrls=[...e,...t,...s]:this.allRowCtrls=e}isCellBeingRendered(e,t){var n;const s=this.rowCtrlsByRowIndex[e];return!t||!s?!!s:s.isFullWidth()?!0:!!((n=this.beans.spannedRowRenderer)==null?void 0:n.getCellByPosition({rowIndex:e,column:t,rowPinned:null}))||!!s.getCellCtrl(t)||!s.isRowRendered()}updateCellFocus(e){for(const t of this.getAllCellCtrls())t.onCellFocused(e);for(const t of this.getFullWidthRowCtrls())t.onFullWidthRowFocused(e)}onCellFocusChanged(e){if((e==null?void 0:e.rowIndex)!=null&&!e.rowPinned){const t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){for(const t of this.getAllCellCtrls())t.onSuppressCellFocusChanged(e);for(const t of this.getFullWidthRowCtrls())t.onSuppressCellFocusChanged(e)}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;if(t)for(const s of this.getAllCellCtrls())t.onFlashCells(s,e)},columnHoverChanged:()=>{for(const e of this.getAllCellCtrls())e.onColumnHover()},displayedColumnsChanged:()=>{for(const e of this.getAllCellCtrls())e.onDisplayedColumnsChanged()},displayedColumnsWidthChanged:()=>{if(this.printLayout)for(const e of this.getAllCellCtrls())e.onLeftChanged()}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(const e of this.destroyFuncsForColumnListeners)e();this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();const e=this.colModel.getCols();for(const t of e){const s=l=>{for(const c of this.getAllCellCtrls())c.column===t&&l(c)},i=()=>{s(l=>l.onLeftChanged())},n=()=>{s(l=>l.onWidthChanged())},o=()=>{s(l=>l.onFirstRightPinnedChanged())},r=()=>{s(l=>l.onLastLeftPinnedChanged())},a=()=>{s(l=>l.onColDefChanged())};t.__addEventListener("leftChanged",i),t.__addEventListener("widthChanged",n),t.__addEventListener("firstRightPinnedChanged",o),t.__addEventListener("lastLeftPinnedChanged",r),t.__addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",i),t.__removeEventListener("widthChanged",n),t.__removeEventListener("firstRightPinnedChanged",o),t.__removeEventListener("lastLeftPinnedChanged",r),t.__removeEventListener("colDefChanged",a)})}}onDomLayoutChanged(){const e=qs(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),s=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,s&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){var s;const t=[];for(const i of this.getAllRowCtrls()){const n=(s=i.getCellCtrl(e,!0))==null?void 0:s.eGui;n&&t.push(n)}return t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,s){const{pinnedRowModel:i,beans:n,printLayout:o}=this,r=Object.fromEntries(e.map(l=>[l.rowNode.id,l]));i==null||i.forEachPinnedRow(t,(l,c)=>{const d=e[c];d&&i.getPinnedRowById(d.rowNode.id,t)===void 0&&(d.destroyFirstPass(),d.destroySecondPass()),l.id in r&&s?(e[c]=r[l.id],delete r[l.id]):e[c]=new kv(l,n,!1,!1,o)});const a=(t==="top"?i==null?void 0:i.getPinnedTopRowCount():i==null?void 0:i.getPinnedBottomRowCount())??0;e.length=a}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){var s,i;if(e.sticky)(s=this.stickyRowFeature)==null||s.refreshStickyNode(e);else if((i=this.cachedRowCtrls)!=null&&i.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const n=o=>{const r=o[e.rowIndex];r&&r.rowNode===e&&(r.destroyFirstPass(),r.destroySecondPass(),o[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){const{editSvc:t}=this.beans;if(t!=null&&t.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"})),e!=null){for(const i of e??[])this.redrawRow(i,!0);this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){var a;this.getLockOnRefresh();const t=(a=this.beans.focusSvc)==null?void 0:a.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);const s=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&qd(this.gos),n=s?this.getRowsToRecycle():null;s||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:o,gos:r}=this;if(o){o.checkStickyRows();const l=o.extraTopHeight+o.extraBottomHeight;l&&this.updateContainerHeights(l)}this.recycleRows(n,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(r.get("enableRowPinning")?s:void 0),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){var i;const t=e.newData||e.newPage,s=this.gos.get("suppressScrollOnNewData");t&&!s&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),(i=this.stickyRowFeature)==null||i.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let s=this.pageBounds.getCurrentPageHeight();s===0&&(s=1),t.setModelHeight(s+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error(Vo(252));this.refreshInProgress=!0,(t=(e=this.beans.frameworkOverrides).getLockOnRefresh)==null||t.call(e)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,(t=(e=this.beans.frameworkOverrides).releaseLockOnRefresh)==null||t.call(e)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,s=this.findPositionToFocus(e);if(!s){t.focusHeaderPosition({headerPosition:{headerRowIndex:Ho(this.beans)-1,column:e.column}});return}if(e.rowIndex!==s.rowIndex||e.rowPinned!=s.rowPinned){t.setFocusedCell({...s,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0});return}t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(Be(this.gos,{...s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}findPositionToFocus(e){const{pagination:t,pageBounds:s}=this.beans;let i=e;for(i.rowPinned==null&&t&&s&&!t.isRowInPage(i.rowIndex)&&(i={rowPinned:null,rowIndex:s.getFirstRow()});i;){if(i.rowPinned==null&&s)if(i.rowIndex<s.getFirstRow()){if(i=_v(this.beans,{rowPinned:null,rowIndex:0}),!i)return null}else i.rowIndex>s.getLastRow()&&(i={rowPinned:null,rowIndex:s.getLastRow()});const n=this.getRowByPosition(i);if(n!=null&&n.isAlive())return{...n.getRowPosition(),column:e.column};i=_v(this.beans,i)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),s=t.length;for(let i=0;i<s;i++){const n=t[i].getAllCellCtrls(),o=n.length;for(let r=0;r<o;r++)e.push(n[r])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),s=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...s,...(e==null?void 0:e.getCtrls("top"))??[],...(e==null?void 0:e.getCtrls("bottom"))??[],...(e==null?void 0:e.getCtrls("center"))??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,s){const i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,s)}refreshCells({rowNodes:e,columns:t,force:s,suppressFlash:i}={}){const n={force:s,newData:!1,suppressFlash:i};for(const o of this.getCellCtrls(e,t))o.refreshOrDestroyCell(n);this.refreshFullWidth(e)}refreshRows(e={}){for(const t of this.getRowCtrls(e.rowNodes))t.refreshRow(e);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const s of this.getRowCtrls(e)){if(!s.isFullWidth())continue;s.refreshFullWidth()||(t=!0,this.redrawRow(s.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=sS(e),s=this.getAllRowCtrls();return!e||!t?s:s.filter(i=>{const n=i.rowNode;return iS(n,t)})}getCellCtrls(e,t){let s;pe(t)&&(s={},t.forEach(n=>{const o=this.colModel.getCol(n);pe(o)&&(s[o.getId()]=!0)}));const i=[];for(const n of this.getRowCtrls(e))for(const o of n.getAllCellCtrls()){const r=o.column.getId();s&&!s[r]||i.push(o)}return i}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){var s;const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),(s=this.stickyRowFeature)==null||s.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const s of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[s].rowNode.id==null&&e.push(s);this.removeRowCtrls(e);const t={};for(const s of Object.values(this.rowCtrlsByRowIndex)){const i=s.rowNode;t[i.id]=s}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){for(const s of e){const i=this.rowCtrlsByRowIndex[s];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[s]}}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{focusSvc:t,animationFrameSvc:s}=this.beans,{afterScroll:i}=e;let n;const o=this.stickyRowFeature;o&&(n=(t==null?void 0:t.getFocusCellToUseAfterRefresh())||void 0);const r=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;if(o){l=o.checkStickyRows();const d=o.extraTopHeight+o.extraBottomHeight;d&&this.updateContainerHeights(d)}const c=this.firstRenderedRow!==r||this.lastRenderedRow!==a;if(!(i&&!l&&!c)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,i),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(i&&!l),n!=null)){const d=t==null?void 0:t.getFocusCellToUseAfterRefresh();n!=null&&d==null&&(s==null||s.flushAllFrames(),this.restoreFocusedCell(n))}}removeRowCompsNotToDraw(e,t){const s={};for(const o of e)s[o]=!0;const n=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!s[o]);this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){var r,a;const t=[];for(let l=this.firstRenderedRow;l<=this.lastRenderedRow;l++)t.push(l);const s=this.beans.pagination,i=(a=(r=this.beans.focusSvc)==null?void 0:r.getFocusedCell())==null?void 0:a.rowIndex;i!=null&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&(!s||s.isRowInPage(i))&&i<this.rowModel.getRowCount()&&t.push(i);const n=l=>{const c=l.rowNode.rowIndex;c==null||c===i||(c<this.firstRenderedRow||c>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(l)&&t.push(c)};for(const l of Object.values(this.rowCtrlsByRowIndex))n(l);if(e)for(const l of Object.values(e))n(l);t.sort((l,c)=>l-c);const o=[];for(let l=0;l<t.length;l++){const c=t[l],d=this.rowModel.getRow(c);d&&!d.sticky&&o.push(c)}return o}recycleRows(e,t=!1,s=!1){const i=this.calculateIndexesToDraw(e);(this.printLayout||s)&&(t=!1),this.removeRowCompsNotToDraw(i,!t);for(const n of i)this.createOrUpdateRowCtrl(n,e,t,s);if(e){const{animationFrameSvc:n}=this.beans;(n==null?void 0:n.active)&&s&&!this.printLayout?n.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),s=e.isPinningRight();(this.pinningLeft!==t||s!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=s,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];for(const t of this.getFullWidthRowCtrls()){const s=t.rowNode.rowIndex;e.push(s.toString())}this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=sS(e);return this.getAllRowCtrls().filter(s=>{if(!s.isFullWidth())return!1;const i=s.rowNode;return!(t!=null&&!iS(i,t))})}createOrUpdateRowCtrl(e,t,s,i){let n,o=this.rowCtrlsByRowIndex[e];if(o||(n=this.rowModel.getRow(e),pe(n)&&pe(t)&&t[n.id]&&n.alreadyRendered&&(o=t[n.id],t[n.id]=null)),!o)if(n||(n=this.rowModel.getRow(e)),pe(n))o=this.createRowCon(n,s,i);else return;n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o}destroyRowCtrls(e,t){const s=[];if(e){for(const i of Object.values(e))if(i){if(this.cachedRowCtrls&&i.isCacheable()){this.cachedRowCtrls.addRow(i);continue}if(i.destroyFirstPass(!t),t){const n=i.instanceId;this.zombieRowCtrls[n]=i,s.push(()=>{i.destroySecondPass(),delete this.zombieRowCtrls[n]})}else i.destroySecondPass()}}t&&(s.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>{for(const i of s)i()},Z6))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=Uc(this.beans);return e*t}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:s}=this;e.updateOffset();let i,n;if(!s.isRowsToRender())i=0,n=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),i=t.getFirstRow(),n=t.getLastRow();else{const d=this.getRowBufferInPixels(),h=this.ctrlsSvc.getScrollFeature(),u=this.gos.get("suppressRowVirtualisation");let f=!1,p,m;do{const S=t.getPixelOffset(),{pageFirstPixel:R,pageLastPixel:A}=t.getCurrentPagePixelRange(),F=e.divStretchOffset,T=h.getVScrollPosition(),k=T.top,N=T.bottom;u?(p=R+F,m=A+F):(p=Math.max(k+S-d,R)+F,m=Math.min(N+S+d,A)+F),this.firstVisibleVPixel=Math.max(k+S,R)+F,this.lastVisibleVPixel=Math.min(N+S,A)+F,f=this.ensureAllRowsInRangeHaveHeightsCalculated(p,m)}while(f);let v=s.getRowIndexAtPixel(p),C=s.getRowIndexAtPixel(m);const b=t.getFirstRow(),y=t.getLastRow();v<b&&(v=b),C>y&&(C=y),i=v,n=C}const o=qs(this.gos,"normal"),r=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);o&&!r&&n-i>a&&(n=i+a);const l=i!==this.firstRenderedRow,c=n!==this.lastRenderedRow;(l||c)&&(this.firstRenderedRow=i,this.lastRenderedRow=n,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:i,lastRow:n}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,ia(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var a,l;const s=(a=this.pinnedRowModel)==null?void 0:a.ensureRowHeightsValid(),i=(l=this.stickyRowFeature)==null?void 0:l.ensureRowHeightsValid(),{pageBounds:n,rowModel:o}=this,r=o.ensureRowHeightsValid(e,t,n.getFirstRow(),n.getLastRow());return(r||i)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),i||r||s?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){var c;const i=e.rowNode,n=this.focusSvc.isRowFocused(i.rowIndex,i.rowPinned),o=(c=this.editSvc)==null?void 0:c.isEditing(e),r=i.detail;return n||o||r?!!this.isRowPresent(i):!1}isRowPresent(e){var t;return this.rowModel.isRowPresent(e)?((t=this.beans.pagination)==null?void 0:t.isRowInPage(e.rowIndex))??!0:!1}createRowCon(e,t,s){var r,a;const i=((r=this.cachedRowCtrls)==null?void 0:r.getRow(e))??null;if(i)return i;const n=s&&!this.printLayout&&!!((a=this.beans.animationFrameSvc)!=null&&a.active);return new kv(e,this.beans,t,n,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(i=>i.rowNode),t=this.getStickyTopRowCtrls().map(i=>i.rowNode),s=this.getStickyBottomRowCtrls().map(i=>i.rowNode);return[...t,...e,...s]}getRowByPosition(e){let t;const{rowIndex:s}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[s];break;case"bottom":t=this.bottomRowCtrls[s];break;default:t=this.rowCtrlsByRowIndex[s],t||(t=this.getStickyTopRowCtrls().find(i=>i.rowNode.rowIndex===s)||null,t||(t=this.getStickyBottomRowCtrls().find(i=>i.rowNode.rowIndex===s)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},t8=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if((e==null?void 0:e.id)==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,s=this.entriesMap[t];delete this.entriesMap[t],to(this.entriesList,s)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],to(this.entriesList,e)}getEntries(){return this.entriesList}};function sS(e){if(!e)return;const t={top:{},bottom:{},normal:{}};for(const s of e){const i=s.id;switch(s.rowPinned){case"top":t.top[i]=s;break;case"bottom":t.bottom[i]=s;break;default:t.normal[i]=s;break}}return t}function iS(e,t){const s=e.id;switch(e.rowPinned){case"top":return t.top[s]!=null;case"bottom":return t.bottom[s]!=null;default:return t.normal[s]!=null}}var s8=class extends ${constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=Lo(e),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Lo(e))}doFullSort(e,t){const s=e.map((i,n)=>({currentPos:n,rowNode:i}));return s.sort(this.compareRowNodes.bind(this,t)),s.map(i=>i.rowNode)}compareRowNodes(e,t,s){const i=t.rowNode,n=s.rowNode;for(let o=0,r=e.length;o<r;o++){const a=e[o],l=a.sort==="desc",c=this.getValue(i,a.column),d=this.getValue(n,a.column);let h;const u=this.getComparator(a,i);if(u?h=u(c,d,i,n,l):h=XH(c,d,this.isAccentedSort),!isNaN(h)&&h!==0)return a.sort==="asc"?h:h*-1}return t.currentPos-s.currentPos}getComparator(e,t){const s=e.column,i=s.getColDef().comparator;if(i!=null)return i;if(!s.getColDef().showRowGroup)return;const n=!t.group&&s.getColDef().field;if(!n)return;const o=this.beans.colModel.getColDefCol(n);if(o)return o.getColDef().comparator}getValue(e,t){var a;const{valueSvc:s,colModel:i,showRowGroupCols:n,gos:o}=this.beans;if(!this.primaryColumnsSortGroups)return s.getValue(t,e,!1);if(e.rowGroupColumn===t){if(XT(o,i.isPivotActive())){const d=e.data?e:HD(e.childrenAfterGroup);return d&&s.getValue(t,d,!1)}const c=n==null?void 0:n.getShowRowGroupCol(t.getId());return c?(a=e.groupData)==null?void 0:a[c.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return s.getValue(t,e,!1)}};function i8(e){var t;(t=e.sortSvc)==null||t.onSortChanged("api")}var I_={moduleName:"Sort",version:fe,beans:[b4,s8],apiFunctions:{onSortChanged:i8},userComponents:{agSortIndicator:M0},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}},n8=class extends ${constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:s}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),s.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),dl(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,Xd(e.source))}}};function o8(e){var t;(t=e.valueCache)==null||t.expire()}function r8(e,t){const{colKey:s,rowNode:i,useFormatter:n}=t,o=e.colModel.getColDefCol(s)??e.colModel.getCol(s);if(Wt(o))return null;const r=e.valueSvc.getValueForDisplay(o,i,n);return n?r.valueFormatted??Eu(r.value):r.value}var a8="paste",l8=class extends ${constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;rs(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:s}=this.beans;if(e.source===a8||t.get("suppressChangeDetection"))return;const i=e.node,n=[i],o=this.clientSideRowModel,r=o==null?void 0:o.rootNode;if(r&&!i.isRowPinned()){const a=t.get("aggregateOnlyChangedColumns"),l=new $g(a,r);l.addParentNode(i.parent,[e.column]),o.doAggregate(l),l.forEachChangedNodeDepthFirst(c=>{n.push(c),c.sibling&&n.push(c.sibling)})}s.refreshCells({rowNodes:n})}},c8=class extends ${constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);Pt(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(s){return Pt(16,{expression:e,params:t,e:s}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const s=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",s);return t[e]=i,i}createFunctionBody(e){return e.includes("return")?e:"return "+e+";"}},d8=class extends ${constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,s){if(this.active){const i=this.cacheVersion;e.__cacheVersion!==i&&(e.__cacheVersion=i,e.__cacheData={}),e.__cacheData[t]=s}}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},h8={moduleName:"ValueCache",version:fe,beans:[d8],apiFunctions:{expireValueCache:o8}},u8={moduleName:"Expression",version:fe,beans:[c8]},g8={moduleName:"ChangeDetection",version:fe,beans:[l8]},f8={moduleName:"CellApi",version:fe,apiFunctions:{getCellValue:r8}},p8=class extends ${constructor(){super(...arguments),this.beanName="valueSvc",this.hasEditSvc=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEditSvc=!!e.editSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=Au(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=t=>this.callColumnCellValueChangedHandler(t);this.eventSvc.addListener("cellValueChanged",e,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",e,!0)),this.addManagedPropertyListener("treeData",t=>this.isTreeData=t.currentValue)}getValueForDisplay(e,t,s=!1,i=!1,n="ui"){const{showRowGroupColValueSvc:o}=this.beans,r=!e&&t.group,a=e==null?void 0:e.colDef.showRowGroup,l=!this.isTreeData||t.footer;if(o&&l&&(r||a)){const m=o.getGroupValue(t,e);if(m==null)return{value:null,valueFormatted:null};if(!s)return{value:m.value,valueFormatted:null};const v=o.formatAndPrefixGroupColValue(m,e,i);return{value:m.value,valueFormatted:v}}if(!e)return{value:t.key,valueFormatted:null};const c=t.leafGroup&&this.colModel.isPivotMode(),d=t.group&&t.expanded&&!t.footer&&!c,h=this.gos.get("groupSuppressBlankHeader")||!t.sibling,u=d&&!h,f=this.getValue(e,t,u,n),p=s&&!(i&&e.colDef.useValueFormatterForExport===!1);return{value:f,valueFormatted:p?this.formatValue(e,t,f):null}}getValue(e,t,s=!1,i="ui"){var m;if(this.initialised||this.init(),!t)return;const n=e.getColDef(),o=n.field,r=e.getColId(),a=t.data;if(this.hasEditSvc&&i==="ui"){const v=this.editSvc;if(v.isEditing()){const C=v.getCellDataValue({rowNode:t,column:e},!0);if(C!==void 0)return C}}let l;const c=n.showRowGroup;if(typeof c=="string"&&(((m=this.beans.rowGroupColsSvc)==null?void 0:m.getColumnIndex(c))??-1)>t.level)return null;const d=typeof c!="string"||!t.group,h=t.groupData&&r in t.groupData,u=!s&&t.aggData&&t.aggData[r]!==void 0,f=this.isSsrm&&s&&!!n.aggFunc,p=this.isSsrm&&t.footer&&t.field&&(n.showRowGroup===!0||n.showRowGroup===t.field);if(this.isTreeData&&u)l=t.aggData[r];else if(this.isTreeData&&n.valueGetter)l=this.executeValueGetter(n.valueGetter,a,e,t);else if(this.isTreeData&&o&&a)l=xg(a,o,e.isFieldContainsDots());else if(h)l=t.groupData[r];else if(u)l=t.aggData[r];else if(n.valueGetter&&!f){if(!d)return l;l=this.executeValueGetter(n.valueGetter,a,e,t)}else if(p)l=xg(a,t.field,e.isFieldContainsDots());else if(o&&a&&!f){if(!d)return l;l=xg(a,o,e.isFieldContainsDots())}if(this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){const v=l.substring(1);l=this.executeValueGetter(v,a,e,t)}return l}parseValue(e,t,s,i){var r;const n=e.getColDef(),o=n.valueParser;if(pe(o)){const a=Be(this.gos,{node:t,data:t==null?void 0:t.data,oldValue:i,newValue:s,colDef:n,column:e});return typeof o=="function"?o(a):(r=this.expressionSvc)==null?void 0:r.evaluate(o,a)}return s}getDeleteValue(e,t){return pe(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t).value)??null:null}formatValue(e,t,s,i,n=!0){const{expressionSvc:o}=this.beans;let r=null,a;const l=e.getColDef();if(i?a=i:n&&(a=l.valueFormatter),a){const c=t?t.data:null,d=Be(this.gos,{value:s,node:t,data:c,colDef:l,column:e});typeof a=="function"?r=a(d):r=o?o.evaluate(a,d):null}else if(l.refData)return l.refData[s]||"";return r==null&&Array.isArray(s)&&(r=s.join(", ")),r}setValue(e,t,s,i){var d,h;const n=this.colModel.getColDefCol(t);if(!e||!n)return!1;Wt(e.data)&&(e.data={});const{field:o,valueSetter:r}=n.getColDef();if(Wt(o)&&Wt(r))return oe(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(n,s))return oe(135),!1;const a=Be(this.gos,{node:e,data:e.data,oldValue:this.getValue(n,e,void 0,i),newValue:s,colDef:n.getColDef(),column:n});a.newValue=s;let l;if(pe(r)?typeof r=="function"?l=r(a):l=(d=this.expressionSvc)==null?void 0:d.evaluate(r,a):l=this.setValueUsingField(e.data,o,s,n.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),(h=this.valueCache)==null||h.onDataChanged();const c=this.getValue(n,e);return this.dispatchCellValueChangedEvent(e,a,c,i),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,a,c,i),!0}dispatchCellValueChangedEvent(e,t,s,i){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:s,value:s,source:i})}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,s,i){if(!t)return!1;let n=!1;if(!i)n=e[t]===s,n||(e[t]=s);else{const o=t.split(".");let r=e;for(;o.length>0&&r;){const a=o.shift();o.length===0?(n=r[a]===s,n||(r[a]=s)):r=r[a]}}return!n}executeValueGetterWithValueCache(e,t,s,i){const n=s.getColId(),o=this.valueCache.getValue(i,n);if(o!==void 0)return o;const r=this.executeValueGetterWithoutValueCache(e,t,s,i);return this.valueCache.setValue(i,n,r),r}executeValueGetterWithoutValueCache(e,t,s,i){var r;const n=Be(this.gos,{data:t,node:i,column:s,colDef:s.getColDef(),getValue:this.getValueCallback.bind(this,i)});let o;return typeof e=="function"?o=e(n):o=(r=this.expressionSvc)==null?void 0:r.evaluate(e,n),o}getValueCallback(e,t){const s=this.colModel.getColDefCol(t);return s?this.getValue(s,e):null}getKeyForNode(e,t){const s=this.getValue(e,t),i=e.getColDef().keyCreator;let n=s;if(i){const o=Be(this.gos,{value:s,colDef:e.getColDef(),column:e,node:t,data:t.data});n=i(o)}return typeof n=="string"||n==null||(n=String(n),n==="[object Object]"&&oe(121)),n}},m8={moduleName:"CommunityCore",version:fe,beans:[m4,l3,y5,zG,J6,kU,d4,G4,HG,I6,k6,e8,p8,f4,c4,p4,x5,n8,m5,v5,Q4],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:c3,destroy:d3,isDestroyed:h3,getGridOption:u3,setGridOption:g3,updateGridOptions:c_,isModuleRegistered:f3},dependsOn:[g5,hU,CU,I_,K4,LU,q4,Q6,g8,X4,M6,H6,G6,Z4,b5,f5,u8,BU,W6]},L_={AdvancedFilter:1,AiToolkit:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},kw=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],v8={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:kw,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],RowModelSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...kw,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...kw,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},C8={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function w8(e,t){const s=[];for(const i of Array.isArray(e)?e:[e]){const n=v8[i];if(n)for(const o of n){const r=C8[o];(!r||r===t)&&s.push(o)}else s.push(i)}return s}var O_=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `,b8=e=>{const t=e.map(i=>`import { ${Rg(i)} } from '${L_[i]?"ag-grid-enterprise":"ag-grid-community"}';`);return e.some(i=>i==="IntegratedCharts"||i==="Sparklines")&&t.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(i=>Rg(i,!0)).join(", ")} ]); 

For more info see: ${Kd}/modules/`};function Rg(e,t=!1){return t&&(e==="IntegratedCharts"||e==="Sparklines")?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function y8(e,t){const s=t.filter(o=>o==="IntegratedCharts"||o==="Sparklines");let i="";return!(globalThis==null?void 0:globalThis.agCharts)&&s.length>0?i=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(o=>L_[o])&&(i=i+`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),i}function N_({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var aE=({reasonOrId:e,moduleName:t,gridScoped:s,gridId:i,rowModelType:n,additionalText:o,isUmd:r})=>{const a=w8(t,n),l=typeof e=="string"?e:E8[e];if(r)return y8(l,a);const c=a.filter(u=>u==="IntegratedCharts"||u==="Sparklines"),d=c.length>0?`${c.map(u=>Rg(u)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${l} as ${a.length>1?"one of "+a.map(u=>Rg(u)).join(", "):Rg(a[0])} is not registered${s?" for gridId: "+i:""}. ${d} Check if you have registered the module:
`}
${b8(a)}`+(o?` 

${o}`:"")},lE=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,S8=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,x8={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e==null?void 0:e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e==null?void 0:e.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:s})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",s],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
${S8(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:s,pageSizeOptions:i})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${s?"":" the default"} paginationPageSizeSelector=[${i==null?void 0:i.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:({propertyName:e,componentName:t,agGridDefaults:s,jsComps:i})=>{const n=[],o=[...Object.keys(s??[]).filter(a=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(a)),...Object.keys(i??[]).filter(a=>!!i[a])],r=Vy({inputValue:t,allSuggestions:o,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return n.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),r.length>0&&n.push(`         Did you mean: [${r.slice(0,3)}]?
`),n.push("If using a custom component check it has been registered correctly."),n},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${Kd}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({inputValue:e,allSuggestions:t})=>{const s=Vy({inputValue:e,allSuggestions:t,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return[`Could not find '${e}' aggregate function. It was configured as "aggFunc: '${e}'" but it wasn't found in the list of registered aggregations.`,s.length>0?`         Did you mean: [${s.slice(0,3)}]?`:"","If using a custom aggregation function check it has been registered correctly."].join(`
`)},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:s})=>["duplicate group keys for row data, keys should be unique",e,t,...s??[]],187:({rowId:e,firstData:t,secondData:s})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",s],188:e=>`getRowId callback must be provided for Server Side Row Model ${(e==null?void 0:e.feature)||"selection"} to work correctly.`,189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:aE,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${Kd}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,229:({index:e})=>["invalid row index for ensureIndexVisible: ",e],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e==null?void 0:e.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>lE("IntegratedChartsModule"),258:()=>lE("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:s,gridId:i,rowModelType:n})=>aE({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:Zd[t],gridId:i,gridScoped:s,rowModelType:n}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${Kd}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:e,parentId:t})=>`Cycle detected for row with id='${e}' and parent id='${t}'. Resetting the parent for row with id='${e}' and showing it as a root-level node.`,271:({id:e,parentId:t})=>`Parent row not found for row with id='${e}' and parent id='${t}'. Showing row with id='${e}' as a root-level node.`,272:()=>O_(),273:({providedId:e,usedId:t})=>`Provided column id '${e}' was already in use, ensure all column and group ids are unique. Using '${t}' instead.`,274:({prop:e})=>{let t=`Since v33, ${e} has been deprecated.`;switch(e){case"maxComponentCreationTimeMs":t+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":t+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":t+=" For multiple versions AgGridReact does not support children.";break}return t},275:N_,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:({colId:e})=>`'enableFilterHandlers' is set to true, but column '${e}' does not have 'filter.doesFilterPass' or 'filter.handler' set.`,278:({colId:e})=>`Unable to create filter handler for column '${e}'`,279:e=>{},280:({colId:e})=>`'name' must be provided for custom filter components for column '${e}`,281:({colId:e})=>`Filter for column '${e}' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.`,282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler(colKey)`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:({rowModelType:e})=>`Row Model '${e}' is not supported with Batch Editing`,290:({rowIndex:e,rowPinned:t})=>`Row with index '${e}' and pinned state '${t}' not found`,291:()=>"License Key being set multiple times with different values. This can result in an incorrect license key being used,",292:({colId:e})=>`The Multi Filter for column '${e}' has buttons configured against the child filters. When 'enableFilterHandlers=true', buttons must instead be provided against the parent Multi Filter params. The child filter buttons will be ignored.`};function R8(e,t){const s=x8[e];if(!s)return[`Missing error text for error id ${e}!`];const i=s(t),o=`
See ${$T(e,t)}`;return Array.isArray(i)?i.concat(o):[i,o]}var E8={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},cE=new WeakMap,dE=new WeakMap;function A8(e,t,s){if(!t)return Pt(11),{};let i;{const o=ls({tag:"div"});o.style.height="100%",e.appendChild(o),e=o,i=()=>e.remove()}return new P8().create(e,t,o=>{const r=new r3(e);o.createBean(r)},void 0,s,i)}var F8=1,P8=class{create(e,t,s,i,n,o){const r=a0.applyGlobalGridOptions(t),a=r.gridId??String(F8++),l=this.getRegisteredModules(n,a,r.rowModelType),c=this.createBeansList(r.rowModelType,l,a),d=this.createProvidedBeans(e,r,n);if(!c)return;const u={providedBeanInstances:d,beanClasses:c,id:a,beanInitComparator:W$,beanDestroyComparator:$$,derivedBeans:[V$],destroyCallback:()=>{dE.delete(p),cE.delete(e),$B(a),o==null||o()}},f=new bz(u);this.registerModuleFeatures(f,l),s(f),f.getBean("syncSvc").start(),i==null||i(f);const p=f.getBean("gridApi");return cE.set(e,p),dE.set(p,e),p}getRegisteredModules(e,t,s){var i;return Bg(m8,void 0,!0),(i=e==null?void 0:e.modules)==null||i.forEach(n=>Bg(n,t)),UB(t,hE(s))}registerModuleFeatures(e,t){const s=e.getBean("registry"),i=e.getBean("apiFunctionSvc");for(const n of t){s.registerModule(n);const o=n.apiFunctions;if(o){const r=Object.keys(o);for(const a of r)i==null||i.addFunction(a,o[a])}}}createProvidedBeans(e,t,s){let i=s?s.frameworkOverrides:null;Wt(i)&&(i=new G$);const n={gridOptions:t,eGridDiv:e,eRootDiv:e,globalListener:s?s.globalListener:null,globalSyncListener:s?s.globalSyncListener:null,frameworkOverrides:i};return s!=null&&s.providedBeanInstances&&Object.assign(n,s.providedBeanInstances),n}createBeansList(e,t,s){const i={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},n=hE(e),o=i[n];if(!o){rg(201,{rowModelType:n},`Unknown rowModelType ${n}.`);return}if(!KB()){rg(272,void 0,O_());return}if(!e){const a=Object.entries(i).filter(([l,c])=>_y(c,s,l));if(a.length==1){const[l,c]=a[0];if(l!==n){const d={moduleName:c,rowModelType:l};rg(275,d,N_(d));return}}}if(!_y(o,s,n)){rg(200,{reasonOrId:`rowModelType = '${n}'`,moduleName:o,gridScoped:l0(),gridId:s,rowModelType:n},`Missing module ${o}Module for rowModelType ${n}.`);return}const r=new Set;for(const a of t)for(const l of a.beans??[])r.add(l);return Array.from(r)}};function hE(e){return e??"clientSide"}function yl(e){const t=e.rowModel;return t.getType()==="clientSide"?t:void 0}function DC(e){const t=e.rowModel;return t.getType()==="infinite"?t:void 0}function T8(e){const t=e.rowModel;return t.getType()==="serverSide"?t:void 0}var D8=class extends ${constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");return t?_B(t):MB(e.get("localeText"))}};function _8(e,t=!1){const s=[],i=[],n=[],o=[],r=[],a=[],l=[],c=[],d=[];let h=0;for(let u=0;u<e.length;u++){const{colId:f,sort:p,sortIndex:m,rowGroup:v,rowGroupIndex:C,aggFunc:b,pivot:y,pivotIndex:S,pinned:R,hide:A,width:F,flex:T}=e[u];d.push(f),p&&(s[m??h++]={colId:f,sort:p}),v&&(i[C??0]=f),typeof b=="string"&&n.push({colId:f,aggFunc:b}),y&&(o[S??0]=f),R&&(R==="right"?a:r).push(f),A&&l.push(f),(T!=null||F)&&c.push({colId:f,flex:T??void 0,width:F})}return{sort:s.length?{sortModel:Iw(s)}:void 0,rowGroup:i.length?{groupColIds:Iw(i)}:void 0,aggregation:n.length?{aggregationModel:n}:void 0,pivot:o.length||t?{pivotMode:t,pivotColIds:Iw(o)}:void 0,columnPinning:r.length||a.length?{leftColIds:r,rightColIds:a}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:c.length?{columnSizingModel:c}:void 0,columnOrder:d.length?{orderedColIds:d}:void 0}}function Iw(e){return e.filter(t=>t!=null)}function M8(e){const t=[];for(const{groupId:s,open:i}of e)i&&t.push(s);return t.length?{openColumnGroupIds:t}:void 0}function Lw(e){return e.get("tooltipShowMode")==="whenTruncated"}function k8(e,t){if(typeof e!="number")return"";const s=t(),i=s("thousandSeparator",","),n=s("decimalSeparator",".");return e.toString().replace(".",n).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${i}`)}var I8=class extends ${getFileName(e){const t=this.getDefaultFileExtension();return e!=null&&e.length||(e=this.getDefaultFileName()),e.includes(".")?e:`${e}.${t}`}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},L8=class{constructor(e){const{colModel:t,rowGroupColsSvc:s,colNames:i,valueSvc:n,gos:o,processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.colModel=t,this.rowGroupColsSvc=s,this.colNames=i,this.valueSvc=n,this.gos=o,this.processCellCallback=r,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,s,i,n){var u;const o=t===0&&QT(this.gos,n,this.colModel.isPivotMode());if(this.processRowGroupCallback&&(this.gos.get("treeData")||n.group)&&(e.isRowGroupDisplayed(((u=n.rowGroupColumn)==null?void 0:u.getColId())??"")||o))return{value:this.processRowGroupCallback(Be(this.gos,{column:e,node:n}))??""};if(this.processCellCallback)return{value:this.processCellCallback(Be(this.gos,{accumulatedRowIndex:s,column:e,node:n,value:this.valueSvc.getValueForDisplay(e,n,void 0,void 0).value,type:i,parseValue:f=>this.valueSvc.parseValue(e,n,f,this.valueSvc.getValue(e,n,void 0)),formatValue:f=>this.valueSvc.formatValue(e,n,f)??f}))??""};const r=this.gos.get("treeData"),a=this.valueSvc,l=n.level===-1&&n.footer,c=e.colDef.showRowGroup===!0&&(n.group||r);if(!l&&(o||c)){let f="",p=n;for(;p&&p.level!==-1;){const{value:m,valueFormatted:v}=a.getValueForDisplay(o?void 0:e,p,!0,!0);f=` -> ${v??m??""}${f}`,p=p.parent}return{value:f,valueFormatted:f}}const{value:d,valueFormatted:h}=a.getValueForDisplay(e,n,!0,!0);return{value:d??"",valueFormatted:h}}getHeaderName(e,t){return e?e(Be(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}};function O8(e,t){const s=document.defaultView||window;if(!s){oe(52);return}const i=document.createElement("a"),n=s.URL.createObjectURL(t);i.setAttribute("href",n),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:s})),i.remove(),s.setTimeout(()=>{s.URL.revokeObjectURL(n)},0)}var N8={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},bi="clientSide",Qs="serverSide",Sd="infinite",H8={onGroupExpandedOrCollapsed:[bi],refreshClientSideRowModel:[bi],isRowDataEmpty:[bi],forEachLeafNode:[bi],forEachNodeAfterFilter:[bi],forEachNodeAfterFilterAndSort:[bi],resetRowHeights:[bi,Qs],applyTransaction:[bi],applyTransactionAsync:[bi],flushAsyncTransactions:[bi],getBestCostNodeSelection:[bi],getServerSideSelectionState:[Qs],setServerSideSelectionState:[Qs],applyServerSideTransaction:[Qs],applyServerSideTransactionAsync:[Qs],applyServerSideRowData:[Qs],retryServerSideLoads:[Qs],flushServerSideAsyncTransactions:[Qs],refreshServerSide:[Qs],getServerSideGroupLevelState:[Qs],refreshInfiniteCache:[Sd],purgeInfiniteCache:[Sd],getInfiniteRowCount:[Sd],isLastRowIndexKnown:[Sd,Qs],expandAll:[bi,Qs],collapseAll:[bi,Qs],onRowHeightChanged:[bi,Qs],setRowCount:[Sd,Qs],getCacheBlockState:[Sd,Qs]},B8={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function G8(e,t,s){const i=B8[e];if(i){const{version:o,new:r,old:a,message:l}=i,c=a??e;return(...d)=>{const h=r?`Please use ${r} instead. `:"";return bg(`Since ${o} api.${c} is deprecated. ${h}${l??""}`),t.apply(t,d)}}const n=H8[e];return n?(...o)=>{const r=s.rowModel.getType();if(!n.includes(r)){Ud(`api.${e} can only be called when gridOptions.rowModelType is ${n.join(" or ")}`);return}return t.apply(t,o)}:t}var V8={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",highlightTooltipFeature:"Tooltip",tooltipStateManager:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"},z8={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},W8={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},$8=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),U8=class extends ${constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,XB(R8)}warnOnInitialPropertyUpdate(e,t){e==="api"&&N8[t]&&oe(22,{key:t})}processGridOptions(e){this.processOptions(e,N4())}validateApiFunction(e,t){return G8(e,t,this.beans)}missingUserComponent(e,t,s,i){const n=Zd[t];n?this.gos.assertModuleRegistered(n,`AG Grid '${e}' component: ${t}`):oe(101,{propertyName:e,componentName:t,agGridDefaults:s,jsComps:i})}missingDynamicBean(e){const t=V8[e];return t?Vo(200,{...this.gos.getModuleErrorParams(),moduleName:t,reasonOrId:e}):void 0}checkRowEvents(e){K8.has(e)&&oe(10,{eventType:e})}validateIcon(e){if($8.has(e)&&oe(43,{iconName:e}),z8[e])return;const t=W8[e];if(t){Pt(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:l0(),gridId:this.beans.context.getId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}oe(134,{iconName:e})}isProvidedUserComp(e){return!!Zd[e]}validateColDef(e){this.processOptions(e,A4())}processOptions(e,t){const{validations:s,deprecations:i,allProperties:n,propertyExceptions:o,objectName:r,docsUrl:a}=t;n&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...o??[],...Object.keys(i)],n,r,a);const l=new Set;if(Object.keys(e).forEach(d=>{const h=i[d];if(h){const{message:b,version:y}=h;l.add(`As of v${y}, ${String(d)} is deprecated. ${b??""}`)}const u=e[d];if(u==null||u===!1)return;const f=s[d];if(!f)return;const{dependencies:p,validate:m,supportedRowModels:v,expectedType:C}=f;if(C){const b=typeof u;if(b!==C){l.add(`${String(d)} should be of type '${C}' but received '${b}' (${u}).`);return}}if(v){const b=this.gridOptions.rowModelType??"clientSide";if(!v.includes(b)){l.add(`${String(d)} is not supported with the '${b}' row model. It is only valid with: ${v.join(", ")}.`);return}}if(p){const b=this.checkForRequiredDependencies(d,p,e);if(b){l.add(b);return}}if(m){const b=m(e,this.gridOptions,this.beans);if(b){l.add(b);return}}}),l.size>0)for(const d of l)bg(d)}checkForRequiredDependencies(e,t,s){const n=Object.entries(t).filter(([o,r])=>{const a=s[o];return!r.required.includes(a)});return n.length===0?null:n.map(([o,r])=>`'${String(e)}' requires '${o}' to be one of [${r.required.map(a=>a===null?"null":a===void 0?"undefined":a).join(", ")}]. ${r.reason??""}`).join(`
           `)}checkProperties(e,t,s,i,n){const o=["__ob__","__v_skip","__metadata__"],r=j8(Object.getOwnPropertyNames(e),[...o,...t,...s],s),a=Object.keys(r);for(const l of a){const c=r[l];let d=`invalid ${i} property '${l}' did you mean any of these: ${c.slice(0,8).join(", ")}.`;s.includes("context")&&(d+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),bg(d)}if(a.length>0&&n){const l=this.beans.frameworkOverrides.getDocLink(n);bg(`to see all the valid ${i} properties please check: ${l}`)}}};function j8(e,t,s){const i={},n=e.filter(o=>!t.some(r=>r===o));if(n.length>0)for(const o of n)i[o]=Vy({inputValue:o,allSuggestions:s}).values;return i}var K8=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),q8={moduleName:"Validation",version:fe,beans:[U8]};function H_(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter)}var Y8=class extends ${constructor(){super(...arguments),this.beanName="filterStage",this.step="filter",this.refreshProps=["excludeChildrenWhenTreeDataFiltering"]}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){var s;const t=!!((s=this.filterManager)!=null&&s.isChildFilterPresent());this.filterNodes(t,e)}filterNodes(e,t){const s=(i,n)=>{i.hasChildren()&&e&&!n?i.childrenAfterFilter=i.childrenAfterGroup.filter(o=>{const r=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,a=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return r||a}):i.childrenAfterFilter=i.childrenAfterGroup,H_(i)};if(this.doingTreeDataFiltering()){const i=(o,r)=>{if(o.childrenAfterGroup)for(let a=0;a<o.childrenAfterGroup.length;a++){const l=o.childrenAfterGroup[a],c=r||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?i(o.childrenAfterGroup[a],c):s(l,c)}s(o,r)},n=o=>i(o,!1);t.executeFromRootNode(n)}else{const i=n=>s(n,!1);t.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},X8=class extends D0{constructor(){super(...arguments),this.iconCreated=!1}wireComp(e,t,s,i,n){this.comp=e;const o=Fp(this,this.beans.context,n);this.eButtonShowMainFilter=s,this.eFloatingFilterBody=i,this.setGui(t,o),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(o),this.setupLeft(o),this.setupHover(o),this.setupFocus(o),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(o),this.setupUi(),o.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(o);const r=()=>this.onColDefChanged(o);o.addManagedListeners(this.column,{colDefChanged:r}),o.addManagedEventListeners({filterSwitched:({column:a})=>{a===this.column&&r()}}),o.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,s=e.colDef;return Be(t.gos,{colDef:s,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,s=!!e.floatingFilter;this.active=t&&s}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Cn("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Fu(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();uu(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){var r;const{beans:t}=this;if(qt(t)===this.eGui)return;const n=md(t,this.eGui,null,e.shiftKey);if(n){(r=t.headerNavigation)==null||r.scrollToColumn(this.column),e.preventDefault(),n.focus();return}const o=this.findNextColumnWithFloatingFilter(e.shiftKey);o&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let s=this.column;do if(s=e?t.getColBefore(s):t.getColAfter(s),!s)break;while(!s.getColDef().filter||!s.getColDef().floatingFilter);return s}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case H.UP:case H.DOWN:case H.LEFT:case H.RIGHT:if(t)return;id(e);case H.ENTER:t&&sd(this.eGui)&&e.preventDefault();break;case H.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const s=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&Wc(e.relatedTarget,"ag-floating-filter");if(s&&i&&e.target===this.eGui){const n=this.lastFocusEvent,o=!!(n&&n.key===H.TAB);if(n&&o){const r=n.shiftKey;sd(this.eGui,r)}}this.focusThis()}setupHover(e){var t;(t=this.beans.colHover)==null||t.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new T0(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){var e;this.suppressFilterButton=!((e=this.beans.menuSvc)!=null&&e.isFloatingFilterButtonEnabled(this.column)),this.highlightFilterButtonWhenActive=!Yi(this.gos)}setupUserComp(){var t;if(!this.active)return;const e=(t=this.beans.colFilter)==null?void 0:t.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){var t;const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;(t=this.beans.menuSvc)==null||t.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{beans:{colFilter:t},column:s,gos:i}=this,n=o=>{if((o==null?void 0:o.source)==="filterDestroyed"&&(!this.isAlive()||!(t!=null&&t.isAlive())))return;const r=this.comp.getFloatingFilterComp();r&&r.then(a=>{if(a){if(i.get("enableFilterHandlers")){const d=o;let h="filter";d!=null&&d.afterFloatingFilter?h="ui":d!=null&&d.afterDataChange?h="dataChanged":(o==null?void 0:o.source)==="api"&&(h="api"),this.updateFloatingFilterParams(this.userCompDetails,h);return}const l=t==null?void 0:t.getCurrentFloatingFilterParentModel(s),c=o?{...o,columns:o.columns??[],source:o.source==="api"?"api":"columnFilter"}:null;a.onParentModelChanged(l,c)}})};[this.destroySyncListener]=e.addManagedListeners(s,{filterChanged:n}),t!=null&&t.isFilterActive(s)&&n(null)}setupWidth(e){const t=()=>{const s=`${this.column.getActualWidth()}px`;this.comp.setWidth(s)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){var e;if(!this.suppressFilterButton&&this.comp){const t=!!((e=this.beans.filterManager)!=null&&e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const s=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const i=this.beans.colFilter,n=this.active?i==null?void 0:i.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();!o||!n?this.updateCompDetails(e,n,s):o.then(r=>{!r||i!=null&&i.areFilterCompsDifferent(this.userCompDetails??null,n)?this.updateCompDetails(e,n,s):this.updateFloatingFilterParams(n,"colDef")})}updateCompDetails(e,t,s){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),s&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){var i;if(!e)return;let s=e.params;(i=this.comp.getFloatingFilterComp())==null||i.then(n=>{var o;typeof(n==null?void 0:n.refresh)=="function"&&(this.gos.get("enableFilterHandlers")&&(s={...s,model:Fs(((o=this.beans.colFilter)==null?void 0:o.model)??{},this.column.getColId()),source:t}),n.refresh(s))})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function Q8(e,t){var i;const s=e.colModel.getCol(t);if(!s){Pt(12,{colKey:t});return}(i=e.menuSvc)==null||i.showColumnMenu({column:s,positionBy:"auto"})}function J8(e){var t;(t=e.menuSvc)==null||t.hidePopupMenu()}var Z8={moduleName:"SharedMenu",version:fe,beans:[c$],apiFunctions:{showColumnMenu:Q8,hidePopupMenu:J8}},ej=class extends Dz{postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getDefaultPopupParent(){return this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:s,event:i}=e,n=t.getBoundingClientRect(),o=this.getParentRect();this.setAlignedTo(t,s);let r=!1;const a=()=>{const l=this.keepXYWithinBounds(s,n.top-o.top,0),c=s.clientWidth>0?s.clientWidth:200;r||(s.style.minWidth=`${c}px`,r=!0);const h=o.right-o.left-c;let u;return this.gos.get("enableRtl")?(u=p(),u<0&&(u=f(),this.setAlignedStyles(s,"left")),u>h&&(u=0,this.setAlignedStyles(s,"right"))):(u=f(),u>h&&(u=p(),this.setAlignedStyles(s,"right")),u<0&&(u=0,this.setAlignedStyles(s,"left"))),{x:u,y:l};function f(){return n.right-o.left-2}function p(){return n.left-o.left-c}};this.positionPopup({ePopup:s,keepWithinBounds:!0,updatePosition:a,postProcessCallback:()=>this.callPostProcessPopup(e,"subMenu",s,t,i instanceof MouseEvent?i:void 0)})}callPostProcessPopup(e,t,s,i,n){const o=this.gos.getCallback("postProcessPopup");if(o){const{column:r,rowNode:a}=e;o({column:r,rowNode:a,ePopup:s,type:t,eventSource:i,mouseEvent:n})}}getActivePopups(){return this.popupList.map(e=>e.element)}handleThemeChange(e){if(e.themeChanged){const t=this.beans.environment;for(const s of this.popupList)t.applyThemeClasses(s.wrapper)}}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isStopPropagation(e){return Ur(e)}},_C={moduleName:"Popup",version:fe,beans:[ej]},tj=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function sj(e){const t=e.filterManager;return!!(t!=null&&t.isColumnFilterPresent())||!!(t!=null&&t.isAggregateFilterPresent())}function ij(e,t){var s;return((s=e.filterManager)==null?void 0:s.getColumnFilterInstance(t))??Promise.resolve(void 0)}function nj(e,t){var i;const s=e.colModel.getColDefCol(t);if(s)return(i=e.colFilter)==null?void 0:i.destroyFilter(s,"api")}function oj(e,t){e.frameworkOverrides.wrapIncoming(()=>{var s;return(s=e.filterManager)==null?void 0:s.setFilterModel(t)})}function rj(e){var t;return((t=e.filterManager)==null?void 0:t.getFilterModel())??{}}function aj(e,t,s){const{gos:i,colModel:n,colFilter:o}=e;s&&!i.get("enableFilterHandlers")&&(oe(288),s=!1);const r=n.getColDefCol(t);return r?(o==null?void 0:o.getModelForColumn(r,s))??null:null}function lj(e,t,s){var i;return((i=e.filterManager)==null?void 0:i.setColumnFilterModel(t,s))??Promise.resolve()}function cj(e,t){var i;const s=e.colModel.getCol(t);if(!s){Pt(12,{colKey:t});return}(i=e.menuSvc)==null||i.showFilterMenu({column:s,containerType:"columnFilter",positionBy:"auto"})}function dj(e){var t;(t=e.menuSvc)==null||t.hideFilterMenu()}function hj(e,t){var i;const s=e.colModel.getCol(t);if(!s){Pt(12,{colKey:t});return}return(i=e.colFilter)==null?void 0:i.getHandler(s,!0)}function uj(e,t){const{colModel:s,colFilter:i,gos:n}=e;if(!n.get("enableFilterHandlers")){oe(287);return}const{colId:o,action:r}=t;if(o){const a=s.getColById(o);a&&(i==null||i.updateModel(a,r))}else i==null||i.updateAllModels(r)}var gj={filterHandler:()=>({doesFilterPass:()=>!0})},fj=class extends ${constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap={...BD},this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){var s,i;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});const e=this.gos,t={...((i=(s=e.get("initialState"))==null?void 0:s.filter)==null?void 0:i.filterModel)??{}};this.initialModel=t,this.model={...t},e.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(e,t="api",s){const{colModel:i,dataTypeSvc:n,filterManager:o}=this.beans;if(n!=null&&n.isPendingInference){this.modelUpdates.push({model:e,source:t});return}const r=[],a=this.getModel(!0);if(e){const l=new Set(Object.keys(e));this.allColumnFilters.forEach((c,d)=>{const h=e[d];r.push(this.setModelOnFilterWrapper(c,h)),l.delete(d)}),l.forEach(c=>{const d=i.getColDefCol(c)||i.getCol(c);if(!d){oe(62,{colId:c});return}if(!d.isFilterAllowed()){oe(63,{colId:c});return}const h=this.getOrCreateFilterWrapper(d,!0);if(!h){oe(64,{colId:c});return}r.push(this.setModelOnFilterWrapper(h,e[c],!0))})}else this.model={},this.allColumnFilters.forEach(l=>{r.push(this.setModelOnFilterWrapper(l,null))});es.all(r).then(()=>{const l=this.getModel(!0),c=[];this.allColumnFilters.forEach((d,h)=>{const u=a?a[h]:null,f=l?l[h]:null;Ig(u,f)||c.push(d.column)}),c.length>0?o==null||o.onFilterChanged({columns:c,source:t}):s&&this.updateActive("filterChanged")})}getModel(e){var o;const t={},{allColumnFilters:s,initialModel:i,beans:{colModel:n}}=this;if(s.forEach((r,a)=>{const l=this.getModelFromFilterWrapper(r);pe(l)&&(t[a]=l)}),!e)for(const r of Object.keys(i)){const a=i[r];pe(a)&&!s.has(r)&&((o=n.getCol(r))!=null&&o.isFilterAllowed())&&(t[r]=a)}return t}setState(e,t,s="api"){if(this.state.clear(),t)for(const i of Object.keys(t)){const n=t[i];this.state.set(i,{model:Fs(this.model,i),state:n})}this.setModel(e,s,!0)}getState(){const e=this.state;if(!e.size)return;const t={};let s=!1;return e.forEach((i,n)=>{const o=i.state;o!=null&&(s=!0,t[n]=o)}),s?t:void 0}getModelFromFilterWrapper(e){const s=e.column.getColId();if(e.isHandler)return Fs(this.model,s);const i=e.filter;return i?typeof i.getModel!="function"?(oe(66),null):i.getModel():Fs(this.initialModel,s)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};const{allColumnFilters:e}=this;return e.size?(e.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}updateActiveFilters(){const e=c=>c?c.isFilterActive?c.isFilterActive():(oe(67),!1):!1,{colModel:t,gos:s}=this.beans,i=!!Iy(s),n=c=>{if(!c.isPrimary())return!0;const h=!t.isPivotActive();return!c.isValueActive()||!h?!1:t.isPivotMode()?!0:i},o=[],r=[],a=(c,d,h)=>{d&&(n(c)?o.push(h):r.push(h))},l=[];return this.allColumnFilters.forEach(c=>{const d=c.column,h=d.getColId();if(c.isHandler)l.push(es.resolve().then(()=>{a(d,this.isHandlerActive(d),{colId:h,isHandler:!0,handler:c.handler,handlerParams:c.handlerParams})}));else{const u=la(c);u&&l.push(u.then(f=>{a(d,e(f),{colId:h,isHandler:!1,comp:f})}))}}),es.all(l).then(()=>{this.activeAggregateFilters=o,this.activeColumnFilters=r})}updateFilterFlagInColumns(e,t){var i;const s=[];return this.allColumnFilters.forEach(n=>{const o=n.column;if(n.isHandler)s.push(es.resolve().then(()=>{this.setColFilterActive(o,this.isHandlerActive(o),e,t)}));else{const r=la(n);r&&s.push(r.then(a=>{this.setColFilterActive(o,a.isFilterActive(),e,t)}))}}),(i=this.beans.groupFilter)==null||i.updateFilterFlags(e,t),es.all(s)}doFiltersPass(e,t,s){const{data:i,aggData:n}=e,o=s?this.activeAggregateFilters:this.activeColumnFilters,r=s?n:i,a=this.model;for(let l=0;l<o.length;l++){const c=o[l],{colId:d,isHandler:h}=c;if(d!==t)if(h){const{handler:u,handlerParams:f}=c;if(!u.doesFilterPass({node:e,data:r,model:Fs(a,d),handlerParams:f}))return!1}else{const u=c.comp;if(typeof u.doesFilterPass!="function"){Pt(91);continue}if(!u.doesFilterPass({node:e,data:r}))return!1}}return!0}getHandlerParams(e){const t=this.allColumnFilters.get(e.getColId());return t!=null&&t.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:s}=this.beans,i=()=>{this.isAlive()&&(s==null||s.onFilterChanged(e))};t.isRefreshInProgress()?setTimeout(i,0):i()}updateBeforeFilterChanged(e={}){const{column:t,additionalEventAttributes:s}=e,i=t==null?void 0:t.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",s).then(()=>{this.allColumnFilters.forEach(n=>{var a,l,c;const{column:o,isHandler:r}=n;i!==o.getColId()&&(r&&((l=(a=n.handler).onAnyFilterChanged)==null||l.call(a)),(c=la(n,r))==null||c.then(d=>{typeof(d==null?void 0:d.onAnyFilterChanged)=="function"&&d.onAnyFilterChanged()}))}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){const t=[];this.allColumnFilters.forEach(s=>{var o,r;const i=s.isHandler;i&&((r=(o=s.handler).onNewRowsLoaded)==null||r.call(o));const n=la(s,i);n&&t.push(n.then(a=>{var l;(l=a.onNewRowsLoaded)==null||l.call(a)}))}),es.all(t).then(()=>this.updateActive(e,{afterDataChange:!0}))}updateActive(e,t){this.updateFilterFlagInColumns(e,t).then(()=>this.updateActiveFilters())}createGetValue(e,t){const{filterValueSvc:s,colModel:i}=this.beans;return(n,o)=>{const r=o?i.getCol(o):e;return r?s.getValue(r,n,t):void 0}}isFilterActive(e){const t=this.cachedFilter(e);if(t!=null&&t.isHandler)return this.isHandlerActive(e);const s=t==null?void 0:t.filter;return s?s.isFilterActive():Fs(this.initialModel,e.getColId())!=null}isHandlerActive(e){const t=pe(Fs(this.model,e.getColId()));if(t)return t;const s=this.beans.groupFilter;return s!=null&&s.isGroupFilter(e)?s.isFilterActive(e):!1}getOrCreateFilterUi(e){const t=this.getOrCreateFilterWrapper(e,!0);return t?la(t):null}getFilterUiForDisplay(e){const t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;const s=la(t);return s?s.then(i=>({comp:i,params:t.filterUi.filterParams,isHandler:t.isHandler})):null}getHandler(e,t){const s=this.getOrCreateFilterWrapper(e,t);return s!=null&&s.isHandler?s.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let s=this.cachedFilter(e);return!s&&t&&(s=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,s)),s}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e,t=!1){return this.getDefaultFilterFromDataType(()=>{var s;return(s=this.beans.dataTypeSvc)==null?void 0:s.getBaseDataType(e)},t)}getDefaultFilterFromDataType(e,t=!1){return uG(this.gos)?t?"agSetColumnFloatingFilter":"agSetColumnFilter":eW(e(),t)}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,s,i,n,o){const r=()=>{const c=this.createFilterCompParams(e,n,o),d=i(c,n);return pV(this.beans.userCompFactory,t,d,s)},a=r();return a?{compDetails:a,createFilterUi:c=>(c?r():a).newAgStackInstance()}:null}createFilterInstance(e,t,s,i){var h,u;const n=this.beans.selectableFilter;n!=null&&n.isSelectable(t)&&(t=n.getFilterDef(e,t));const{handler:o,handlerParams:r,handlerGenerator:a}=this.createHandler(e,t,s)??{},l=this.createFilterComp(e,t,s,i,!!o,"init");if(!l)return{compDetails:null,createFilterUi:null,handler:o,handlerGenerator:a,handlerParams:r};const{compDetails:c,createFilterUi:d}=l;return this.isGlobalButtons&&((u=(h=c.params)==null?void 0:h.buttons)!=null&&u.length||oe(281,{colId:e.getColId()})),{compDetails:c,handler:o,handlerGenerator:a,handlerParams:r,createFilterUi:d}}createBaseFilterParams(e,t){const{filterManager:s,rowModel:i}=this.beans;return Be(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:n=>(s==null?void 0:s.doesRowPassOtherFilters(e.getColId(),n))??!0,rowModel:i})}createFilterCompParams(e,t,s,i){const n=this.filterChangedCallbackFactory(e),o=this.createBaseFilterParams(e,i);if(o.filterChangedCallback=n,o.filterModifiedCallback=i?()=>{}:r=>this.filterModified(e,r),t){const r=o,a=e.getColId(),l=Fs(this.model,a);r.model=l,r.state=this.state.get(a)??{model:l},r.onModelChange=(c,d)=>{this.updateStoredModel(a,c),this.refreshHandlerAndUi(e,c,"ui",!1,d).then(()=>{n({...d,source:"columnFilter"})})},r.onStateChange=c=>{this.updateState(e,c),this.updateOrRefreshFilterUi(e)},r.onAction=(c,d,h)=>{this.updateModel(e,c,d),this.dispatchLocalEvent({type:"filterAction",column:e,action:c,event:h})},r.getHandler=()=>this.getHandler(e,!0),r.onUiChange=c=>this.filterUiChanged(e,c),r.source=s}return o}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,s){const i=t(),n={created:!0,create:t,filterParams:e.params,compDetails:e,promise:i};return i.then(s),n}createFilterWrapper(e){var a;const{compDetails:t,handler:s,handlerGenerator:i,handlerParams:n,createFilterUi:o}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),l=>l),r=e.getColId();if(s)return delete this.initialModel[r],(a=s.init)==null||a.call(s,{...n,source:"init",model:Fs(this.model,r)}),{column:e,isHandler:!0,handler:s,handlerGenerator:i,handlerParams:n,filterUi:this.createFilterUiForHandler(t,o)};if(o){const l={column:e,filterUi:null,isHandler:!1};return l.filterUi=this.createFilterUiLegacy(t,o,c=>{l.filter=c??void 0}),l}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t,s){var f;const{gos:i,frameworkOverrides:n,registry:o}=this.beans;let r;const a=p=>{const m=p.filter;if(fD(m)){const v=m.handler;return v||(r=m.doesFilterPass,r?()=>({doesFilterPass:r}):void 0)}return typeof m=="string"?m:void 0},l=i.get("enableFilterHandlers"),c=l?a(t):void 0,d=p=>()=>this.createBean(o.createDynamicBean(p,!0));let h,u;if(typeof c=="string"){const p=(f=i.get("filterHandlers"))==null?void 0:f[c];p!=null?h=p:zz.has(c)&&(h=d(c),u=c)}else h=c;if(!h){let p;const{compName:m,jsComp:v,fwComp:C}=vD(n,t);m?p=m:v==null&&C==null&&t.filter===!0&&(p=s),u=this.handlerMap[p],u&&(h=d(u))}return h?{filterHandler:h,handlerNameOrCallback:r??u}:l?(rs(i)&&oe(277,{colId:e.getColId()}),gj):void 0}createHandler(e,t,s){const i=this.createHandlerFunc(e,t,s);if(!i)return;const n=rw(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,"init")),{handlerNameOrCallback:o,filterHandler:r}=i,{handler:a,handlerParams:l}=this.createHandlerFromFunc(e,r,n);return{handler:a,handlerParams:l,handlerGenerator:o??r}}createHandlerFromFunc(e,t,s){const i=e.getColDef(),n=t(Be(this.gos,{column:e,colDef:i})),o=this.createHandlerParams(e,s);return{handler:n,handlerParams:o}}createHandlerParams(e,t){const s=e.getColDef(),i=e.getColId(),n=this.filterChangedCallbackFactory(e);return Be(this.gos,{colDef:s,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:o=>{var r;return((r=this.beans.filterManager)==null?void 0:r.doesRowPassOtherFilters(i,o))??!0},onModelChange:(o,r)=>{this.updateStoredModel(i,o),this.refreshHandlerAndUi(e,o,"handler",!1,r).then(()=>{n({...r,source:"columnFilter"})})},filterParams:t})}onColumnsChanged(){const e=[],{colModel:t,filterManager:s,groupFilter:i}=this.beans;this.allColumnFilters.forEach((o,r)=>{let a;o.column.isPrimary()?a=t.getColDefCol(r):a=t.getCol(r),!(a&&a===o.column)&&(e.push(o.column),this.disposeFilterWrapper(o,"columnChanged"),this.disposeColumnListener(r))});const n=i&&e.every(o=>i.isGroupFilter(o));e.length>0&&!n&&(s==null||s.onFilterChanged({columns:e,source:"api"}))}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const s=this.beans.groupFilter;return s!=null&&s.isGroupFilter(e)?s.isFilterAllowed(e):!0}getFloatingFilterCompDetails(e,t){const{userCompFactory:s,frameworkOverrides:i,selectableFilter:n}=this.beans,o=u=>{const f=this.getOrCreateFilterUi(e);f!=null&&f.then(p=>{u(zg(p))})},r=e.getColDef(),a=n!=null&&n.isSelectable(r)?n.getFilterDef(e,r):r,l=oW(i,a,()=>this.getDefaultFloatingFilter(e))??"agReadOnlyFloatingFilter",c=this.gos.get("enableFilterHandlers"),d=rw(s,a,this.createFilterCompParams(e,c,"init",!0)),h=Be(this.gos,{column:e,filterParams:d,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:o,showParentFilter:t});if(c){const u=h,f=e.getColId(),p=this.filterChangedCallbackFactory(e);u.onUiChange=m=>this.floatingFilterUiChanged(e,m),u.model=Fs(this.model,f),u.onModelChange=(m,v)=>{this.updateStoredModel(f,m),this.refreshHandlerAndUi(e,m,"floating",!0,v).then(()=>{p({...v,source:"columnFilter"})})},u.getHandler=()=>this.getHandler(e,!0),u.source="init"}return bV(s,r,h,l)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilterUi(e,t,s,i){const n="paramsUpdated";if(e.isHandler){const o=t.getColId();delete this.initialModel[o],this.state.delete(o);const r=e.filterUi,a=this.createFilterUiForHandler(s,i);e.filterUi=a;const l=this.eventSvc;r!=null&&r.created?r.promise.then(c=>{this.destroyBean(c),l.dispatchEvent({type:"filterDestroyed",source:n,column:t})}):l.dispatchEvent({type:"filterHandlerDestroyed",source:n,column:t})}else this.destroyFilter(t,n)}destroyFilter(e,t="api"){const s=e.getColId(),i=this.allColumnFilters.get(s);this.disposeColumnListener(s),delete this.initialModel[s],i&&this.disposeFilterWrapper(i,t).then(n=>{var o;n&&this.isAlive()&&((o=this.beans.filterManager)==null||o.onFilterChanged({columns:[e],source:"api"}))})}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let s=!1;const{column:i,isHandler:n,filterUi:o}=e,r=i.getColId();n&&(s=this.isHandlerActive(i),this.destroyBean(e.handler),delete this.model[r],this.state.delete(r));const a=()=>{this.setColFilterActive(i,!1,"filterDestroyed"),this.allColumnFilters.delete(r),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:i})};if(o){if(o.created)return o.promise.then(l=>(s=n?s:!!(l!=null&&l.isFilterActive()),this.destroyBean(l),a(),s));a()}return es.resolve(s)}filterChangedCallbackFactory(e){return t=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:(t==null?void 0:t.source)??"columnFilter"})}}filterParamsChanged(e,t="api"){var v,C,b,y,S,R;const s=this.allColumnFilters.get(e);if(!s)return;const i=this.beans,n=s.column,o=n.getColDef(),r=n.isFilterAllowed(),a=this.getDefaultFilter(n),l=i.selectableFilter,c=l!=null&&l.isSelectable(o)?l.getFilterDef(n,o):o,d=r?this.createHandlerFunc(n,c,this.getDefaultFilter(n)):void 0,h=!!d,u=s.isHandler;if(u!=h){this.destroyFilter(n,"paramsUpdated");return}const{compDetails:f,createFilterUi:p}=(r?this.createFilterComp(n,c,a,A=>A,h,"colDef"):null)??{compDetails:null,createFilterUi:null},m=(f==null?void 0:f.params)??rw(i.userCompFactory,c,this.createFilterCompParams(n,h,"colDef"));if(u){const A=(d==null?void 0:d.handlerNameOrCallback)??(d==null?void 0:d.filterHandler),F=Fs(this.model,e);if(s.handlerGenerator!=A){const T=s.handler,{handler:k,handlerParams:N}=this.createHandlerFromFunc(n,d.filterHandler,m);s.handler=k,s.handlerParams=N,s.handlerGenerator=A,delete this.model[e],(v=k.init)==null||v.call(k,{...N,source:"init",model:null}),this.destroyBean(T),F!=null&&((C=this.beans.filterManager)==null||C.onFilterChanged({columns:[n],source:t}))}else{const T=this.createHandlerParams(n,f==null?void 0:f.params);s.handlerParams=T,(y=(b=s.handler).refresh)==null||y.call(b,{...T,source:"colDef",model:F})}}if(this.areFilterCompsDifferent(((S=s.filterUi)==null?void 0:S.compDetails)??null,f)||!s.filterUi||!f){this.destroyFilterUi(s,n,f,p);return}s.filterUi.filterParams=m,(R=la(s,u))==null||R.then(A=>{(A!=null&&A.refresh?A.refresh(m):!0)===!1?this.destroyFilterUi(s,n,f,p):this.dispatchLocalEvent({type:"filterParamsChanged",column:n,params:m})})}refreshHandlerAndUi(e,t,s,i,n){const o=this.cachedFilter(e);if(!o)return i&&this.getOrCreateFilterWrapper(e,!0),es.resolve();if(!o.isHandler)return es.resolve();const{filterUi:r,handler:a,handlerParams:l}=o;return Wz(()=>{if(r){const{created:c,filterParams:d}=r;if(c)return r.promise.then(h=>h?{filter:h,filterParams:d}:void 0);r.refreshed=!0}return es.resolve(void 0)},a,l,t,this.state.get(e.getColId())??{model:t},s,n)}setColumnFilterWrapper(e,t){const s=e.getColId();this.allColumnFilters.set(s,t),this.allColumnListeners.set(s,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(s)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:s}=e,{componentClass:i}=t;return!(s===i||(s==null?void 0:s.render)&&(i==null?void 0:i.render)&&s.render===i.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e){const t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);const s=this.getOrCreateFilterUi(t);return s?new Promise(i=>{s.then(n=>{i(zg(n))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(({model:e,source:t})=>this.setModel(e,t)),this.modelUpdates=[],this.columnModelUpdates.forEach(({key:e,model:t,resolve:s})=>{this.setModelForColumn(e,t).then(()=>s())}),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){const{state:i,model:n}=this,o=e.getColId(),r=i.get(o);return r?r.model??null:Fs(n,o)}const s=this.cachedFilter(e);return s?this.getModelFromFilterWrapper(s):null}setModelForColumn(e,t){var s;if((s=this.beans.dataTypeSvc)!=null&&s.isPendingInference){let i=()=>{};const n=new Promise(o=>{i=o});return this.columnModelUpdates.push({key:e,model:t,resolve:i}),n}return new Promise(i=>{this.setModelForColumnLegacy(e,t).then(n=>i(n))})}getStateForColumn(e){return this.state.get(e)??{model:Fs(this.model,e)}}setModelForColumnLegacy(e,t){const s=this.beans.colModel.getColDefCol(e),i=s?this.getOrCreateFilterWrapper(s,!0):null;return i?this.setModelOnFilterWrapper(i,t):es.resolve()}setColDefPropsForDataType(e,t,s){var d;const i=e.filter,n=i===!0?this.getDefaultFilterFromDataType(()=>t.baseDataType):i;if(typeof n!="string")return;let o,r;const a=this.beans,{filterParams:l,filterValueGetter:c}=e;n==="agMultiColumnFilter"?{filterParams:o,filterValueGetter:r}=((d=a.multiFilter)==null?void 0:d.getParamsForDataType(l,c,t,s))??{}:{filterParams:o,filterValueGetter:r}=Qz(n,l,c,t,s,a,this.getLocaleTextFunc()),e.filterParams=o,r&&(e.filterValueGetter=r)}setColFilterActive(e,t,s,i){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",s)),e.dispatchColEvent("filterChanged",s,i)}setModelOnFilterWrapper(e,t,s){return new es(i=>{if(e.isHandler){const o=e.column,r=o.getColId(),a=this.model[r];if(this.updateStoredModel(r,t),s&&t===a){i();return}this.refreshHandlerAndUi(o,t,"api").then(()=>i());return}const n=la(e);if(n){n.then(o=>{if(typeof(o==null?void 0:o.setModel)!="function"){oe(65),i();return}(o.setModel(t)||es.resolve()).then(()=>i())});return}i()})}updateStoredModel(e,t){pe(t)?this.model[e]=t:delete this.model[e];const s=this.state.get(e),i={model:t,state:s==null?void 0:s.state};this.state.set(e,i)}filterModified(e,t){var s;(s=this.getOrCreateFilterUi(e))==null||s.then(i=>{this.eventSvc.dispatchEvent({type:"filterModified",column:e,filterInstance:i,...t})})}filterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"filterUiChanged",column:e,...t})}floatingFilterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"floatingFilterUiChanged",column:e,...t})}updateModel(e,t,s){var r;const i=e.getColId(),n=this.cachedFilter(e),o=()=>n==null?void 0:n.filterUi;xR(t,o,()=>Fs(this.model,i),()=>this.state.get(i),a=>this.updateState(e,a),a=>{var l,c;return(c=(l=o())==null?void 0:l.filterParams)==null?void 0:c.onModelChange(a,s)},n!=null&&n.isHandler?(r=n.handler.processModelToApply)==null?void 0:r.bind(n.handler):void 0)}updateAllModels(e,t){const s=[];this.allColumnFilters.forEach((i,n)=>{var r;const o=this.beans.colModel.getColDefCol(n);o&&xR(e,()=>i.filterUi,()=>Fs(this.model,n),()=>this.state.get(n),a=>this.updateState(o,a),a=>{this.updateStoredModel(n,a),this.dispatchLocalEvent({type:"filterAction",column:o,action:e}),s.push(this.refreshHandlerAndUi(o,a,"ui"))},i!=null&&i.isHandler?(r=i.handler.processModelToApply)==null?void 0:r.bind(i.handler):void 0)}),s.length&&es.all(s).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:t,columns:[]})})}updateOrRefreshFilterUi(e){const t=e.getColId();VD(()=>{var s;return(s=this.cachedFilter(e))==null?void 0:s.filterUi},()=>Fs(this.model,t),()=>this.state.get(t))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:"filterStateChanged",column:e,state:t})}canApplyAll(){const{state:e,model:t,activeFilterComps:s}=this;for(const n of s)if(n.source==="COLUMN_MENU")return!1;let i=!1;for(const n of e.keys()){const o=e.get(n);if(o.valid===!1)return!1;(o.model??null)!==Fs(t,n)&&(i=!0)}return i}hasUnappliedModel(e){var i;const{model:t,state:s}=this;return(((i=s.get(e))==null?void 0:i.model)??null)!==Fs(t,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:e})}shouldKeepStateOnDetach(e,t){if(t==="newFiltersToolPanel")return!0;const s=this.beans.filterPanelSvc;return s!=null&&s.isActive?!!s.getState(e.getColId()):!1}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}};function pj(e){var t;return!!((t=e.filterManager)!=null&&t.isAnyFilterPresent())}function mj(e,t="api"){var s;(s=e.filterManager)==null||s.onFilterChanged({source:t})}var vj=class extends ${constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:s}=this;this.alwaysPassFilter=s.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=s.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"&&t(e)}setFilterState(e,t,s="api"){var i;this.isAdvFilterEnabled()||(i=this.colFilter)==null||i.setState(e,t,s)}setFilterModel(e,t="api",s){var i;if(this.isAdvFilterEnabled()){s||this.warnAdvFilters();return}(i=this.colFilter)==null||i.setModel(e,t)}getFilterModel(){var e;return((e=this.colFilter)==null?void 0:e.getModel())??{}}getFilterState(){var e;return(e=this.colFilter)==null?void 0:e.getState()}isColumnFilterPresent(){var e;return!!((e=this.colFilter)!=null&&e.isFilterPresent())}isAggregateFilterPresent(){var e;return!!((e=this.colFilter)!=null&&e.isAggFilterPresent())}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){var t,s;e?(t=this.colFilter)!=null&&t.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):(s=this.advancedFilter)!=null&&s.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){var e;return!!((e=this.advancedFilter)!=null&&e.isEnabled())}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){Iy(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:s,columns:i=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):es.resolve()).then(()=>{var o;const n={source:t,type:"filterChanged",columns:i};s&&mi(n,s),this.eventSvc.dispatchEvent(n),(o=this.colFilter)==null||o.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var e;return!!((e=this.colFilter)!=null&&e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!!((e=this.quickFilter)!=null&&e.isFilterPresent())}updateAggFiltering(){this.aggFiltering=!!Iy(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){var s;const{rowNode:t}=e;return(s=this.alwaysPassFilter)!=null&&s.call(this,t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip,!0))}doesRowPassFilter(e){var s;const{rowNode:t}=e;return(s=this.alwaysPassFilter)!=null&&s.call(this,t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterAllowed(e){var t;return this.isAdvFilterEnabled()?!1:!!((t=this.colFilter)!=null&&t.isFilterAllowed(e))}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){var s;if(this.isAdvFilterEnabled()){if((s=this.beans.dataTypeSvc)!=null&&s.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return this.isAdvFilterEnabled()?!1:!!((e=this.colFilter)!=null&&e.hasFloatingFilters())}getColumnFilterInstance(e){var t;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):((t=this.colFilter)==null?void 0:t.getFilterInstance(e))??Promise.resolve(void 0)}warnAdvFilters(){oe(68)}setupAdvFilterHeaderComp(e){var t;(t=this.advancedFilter)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){for(const e of this.advFilterModelUpdateQueue)this.setAdvFilterModel(e);this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){var s;return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):((s=this.colFilter)==null?void 0:s.setModelForColumn(e,t))??Promise.resolve()}},Cj=class extends ${constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){var e;(e=this.hidePopup)==null||e.call(this)}showMenuAfterMouseEvent(e,t,s,i){e&&!e.isColumn||this.showPopup(e,n=>{var o;(o=this.popupSvc)==null||o.positionPopupUnderMouseEvent({column:e,type:s,mouseEvent:t,ePopup:n})},s,t.target,Yi(this.gos),i)}showMenuAfterButtonClick(e,t,s,i){if(e&&!e.isColumn)return;let n=-1,o="left";const r=Yi(this.gos);!r&&this.gos.get("enableRtl")&&(n=1,o="right");const a=r?void 0:4*n,l=r?void 0:4;this.showPopup(e,c=>{var d;(d=this.popupSvc)==null||d.positionPopupByComponent({type:s,eventSource:t,ePopup:c,nudgeX:a,nudgeY:l,alignSide:o,keepWithinBounds:!0,position:"under",column:e})},s,t,r,i)}showPopup(e,t,s,i,n,o){var m;const r=e?this.createBean(new Yz(e,"COLUMN_MENU")):void 0;if(this.activeMenu=r,!(r!=null&&r.hasFilter())||!e){Pt(57);return}const a=ls({tag:"div",cls:`ag-menu${n?"":" ag-filter-menu"}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(a,{keydown:v=>this.trapFocusWithin(v,a)}),a.appendChild(r==null?void 0:r.getGui());let l;const c=()=>r==null?void 0:r.afterGuiDetached(),d=gG(this.gos)?i??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,h=v=>{_R(e,!1,"contextMenu");const C=v instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),C&&i&&Xo(i)){const b=xD(i);b==null||b.focus({preventScroll:!0})}c(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,s,e),o==null||o()},u=this.getLocaleTextFunc(),f=n&&s!=="columnFilter"?u("ariaLabelColumnMenu","Column Menu"):u("ariaLabelColumnFilter","Column Filter"),p=(m=this.popupSvc)==null?void 0:m.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:h,positionCallback:()=>t(a),anchorToElement:d,ariaLabel:f});p&&(this.hidePopup=l=p.hideFunc),r.afterInit().then(()=>{t(a),r.afterGuiAttached({container:s,hidePopup:l})}),_R(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,s,e)}trapFocusWithin(e,t){e.key!==H.TAB||e.defaultPrevented||md(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),sd(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,s){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:s??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},wj=class extends ${constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t,s){if(!t)return;const i=e.getColDef(),{selectableFilter:n,valueSvc:o}=this.beans,r=s??(n==null?void 0:n.getFilterValueGetter(e.getColId()))??i.filterValueGetter;return r?this.executeFilterValueGetter(r,t.data,e,t,i):o.getValue(e,t)}executeFilterValueGetter(e,t,s,i,n){const{expressionSvc:o,valueSvc:r}=this.beans,a=Be(this.gos,{data:t,node:i,column:s,colDef:n,getValue:r.getValueCallback.bind(r,i)});return typeof e=="function"?e(a):o==null?void 0:o.evaluate(e,a)}},bj={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},yj=class extends Et{constructor(){super(bj,[EC]),this.eFloatingFilterText=ge}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")){const s=e,i=s.getHandler();if(i.getModelAsString){const n=i.getModelAsString(s.model);this.eFloatingFilterText.setValue(n)}}}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const s=t.getModelAsString(e);this.eFloatingFilterText.setValue(s)}})}refresh(e){this.init(e)}},O0=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions??t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){const s=e.filterOptions??t;this.filterOptions!==s&&(this.filterOptions=s,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){const{filterOptions:e}=this;if(e)for(const t of e){if(typeof t=="string")continue;const s=[["displayKey"],["displayName"],["predicate","test"]],i=n=>n.some(o=>t[o]!=null)?!0:(oe(72,{keys:n}),!1);if(!s.every(i)){this.filterOptions=e.filter(n=>n===t)||[];continue}this.customFilterOptions[t.displayKey]=t}}getDefaultItem(e){const{filterOptions:t}=this;if(e)return e;if(t.length>=1){const s=t[0];if(typeof s=="string")return s;if(s.displayKey)return s.displayKey;oe(73)}else oe(74)}getCustomOption(e){return this.customFilterOptions[e]}};function Eg(e,t,s){return s==null?e.splice(t):e.splice(t,s)}function Iv(e){return e==null||typeof e=="string"&&e.trim().length===0}function Sj(e){return e==="AND"||e==="OR"?e:"AND"}function xj(e,t,s){if(e==null)return;const{predicate:i}=e;if(i!=null&&!t.some(n=>n==null))return i(t,s)}function Rj(e,t){let s=e.length;return s>t&&(e.splice(t),oe(78),s=t),s}function jg(e,t){const s=t.getCustomOption(e);if(s){const{numberOfInputs:n}=s;return n??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}var N0=class extends nW{constructor(e,t,s){super(e,"simple-filter"),this.mapValuesFromModel=t,this.defaultOptions=s,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);const t=new O0;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){this.setNumConditions(e),this.defaultJoinOperator=Sj(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions();const t=this.getGui();this.isReadOnly()?t.setAttribute("tabindex","-1"):t.removeAttribute("tabindex")}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,s)=>{const i=s===0?e:this.optionsFactory.defaultOption;t.setValue(i,!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOrs:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?"OR":"AND"}areNonNullModelsEqual(e,t){const s=!e.operator,i=!t.operator;if(!s&&i||s&&!i)return!1;let o;if(s){const r=e,a=t;o=this.areSimpleModelsEqual(r,a)}else{const r=e,a=t;o=r.operator===a.operator&&wl(r.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return o}setModelIntoUi(e,t){if(e==null)return this.resetUiToDefaults(t),es.resolve();if(e.operator){const i=e;let n=i.conditions;n==null&&(n=[],oe(77));const o=Rj(n,this.maxNumConditions),r=this.getNumConditions();if(o<r)this.removeConditionsAndOperators(o);else if(o>r)for(let l=r;l<o;l++)this.createJoinOperatorPanel(),this.createOption();const a=i.operator==="OR";this.eJoinAnds.forEach(l=>l.setValue(!a,!0)),this.eJoinOrs.forEach(l=>l.setValue(a,!0)),n.forEach((l,c)=>{this.eTypes[c].setValue(l.type,!0),this.setConditionIntoUi(l,c)})}else{const i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),es.resolve()}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(oe(79),t=1),this.maxNumConditions=t;let s=e.numAlwaysVisibleConditions??1;s<1&&(oe(80),s=1),s>t&&(oe(81),s=t),this.numAlwaysVisibleConditions=s}createOption(){const e=this.getGui(),t=this.createManagedBean(new v0);this.eTypes.push(t),t.addCss("ag-filter-select"),e.appendChild(t.getGui());const s=this.createEValue();this.eConditionBodies.push(s),e.appendChild(s),this.putOptionsIntoDropdown(t),this.resetType(t);const i=this.getNumConditions()-1;this.forEachPositionInput(i,n=>this.resetInput(n)),this.addChangedListeners(t,i)}createJoinOperatorPanel(){const e=ls({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(e);const t=this.createJoinOperator(this.eJoinAnds,e,"and"),s=this.createJoinOperator(this.eJoinOrs,e,"or");this.getGui().appendChild(e);const i=this.eJoinPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,n),this.resetJoinOperatorOr(s,i,n),this.isReadOnly()||(t.onValueChange(this.listener),s.onValueChange(this.listener))}createJoinOperator(e,t,s){const i=this.createManagedBean(new LV);e.push(i);const n="ag-filter-condition-operator";return i.addCss(n),i.addCss(`${n}-${s}`),t.appendChild(i.getGui()),i}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;for(const s of t)e.addOption(s);e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,s=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:s?this.getLocaleTextFunc()(s.displayKey,s.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let s=0;s<this.getNumConditions();s++)this.isConditionUiComplete(s)?e=s:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const s=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<s){this.removeConditionsAndOperators(s+1);const i=e+1,n=s-i;n>0&&this.removeConditionsAndOperators(i,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((i,n)=>{const o=this.isConditionDisabled(n,e);i.setDisabled(o||this.filterListOptions.length<=1),n===1&&(Og(this.eJoinPanels[0],o),this.eJoinAnds[0].setDisabled(o),this.eJoinOrs[0].setDisabled(o))}),this.eConditionBodies.forEach((i,n)=>{Vt(i,this.isConditionBodyVisible(n))});const s=(t??this.getJoinOperator())==="OR";for(const i of this.eJoinAnds)i.setValue(!s,!0);for(const i of this.eJoinOrs)i.setValue(s,!0);this.forEachInput((i,n,o,r)=>{this.setElementDisplayed(i,n<r),this.setElementDisabled(i,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:s,eConditionBodies:i,eJoinPanels:n,eJoinAnds:o,eJoinOrs:r}=this;this.removeComponents(s,e,t),this.removeElements(i,e,t),this.removeEValues(e,t);const a=Math.max(e-1,0);this.removeElements(n,a,t),this.removeComponents(o,a,t),this.removeComponents(r,a,t)}removeElements(e,t,s){const i=Eg(e,t,s);for(const n of i)Qn(n)}removeComponents(e,t,s){const i=Eg(e,t,s);for(const n of i)Qn(n.getGui()),this.destroyBean(n)}afterGuiAttached(e){var t;if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus)){let s;if(!this.isReadOnly()){const i=this.getInputs(0)[0];i instanceof Nl&&this.isConditionBodyVisible(0)?s=i.getInputElement():s=(t=this.eTypes[0])==null?void 0:t.getFocusableElement()}(s??this.getGui()).focus({preventScroll:!0})}}afterGuiDetached(){var r;super.afterGuiDetached();const e=this.params;if((r=this.beans.colFilter)!=null&&r.shouldKeepStateOnDetach(e.column))return;e.onStateChange({model:e.model});let t=-1,s=-1,i=!1;const n=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))t===-1&&(t=a,s=a);else{const l=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),c=a<t;(l||c)&&(this.removeConditionsAndOperators(a,1),i=!0,c&&s--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(s===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(s,n),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=s}getModelAsString(e){var t,s;return((s=(t=this.params.getHandler())==null?void 0:t.getModelAsString)==null?void 0:s.call(t,e))??""}getPlaceholderText(e,t){let s=this.translate(e);if(typeof this.filterPlaceholder=="function"){const i=this.eTypes[t].getValue(),n=this.translate(i);s=this.filterPlaceholder({filterOptionKey:i,filterOption:n,placeholder:s})}else typeof this.filterPlaceholder=="string"&&(s=this.filterPlaceholder);return s}resetPlaceholder(){const e=this.getLocaleTextFunc();this.forEachInput((t,s,i,n)=>{if(!(t instanceof Nl))return;const o=s===0&&n>1?"inRangeStart":s===0?"filterOoo":"inRangeEnd",r=s===0&&n>1?e("ariaFilterFromValue","Filter from value"):s===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,i)),t.setInputAriaLabel(r)})}setElementValue(e,t,s){e instanceof Nl&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){uR(e)&&Vt(e.getGui(),t)}setElementDisabled(e,t){uR(e)&&Og(e.getGui(),t)}attachElementOnChange(e,t){e instanceof Nl&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,s)=>{this.forEachPositionTypeInput(s,t,e)})}forEachPositionInput(e,t){const s=this.getConditionType(e);this.forEachPositionTypeInput(e,s,t)}forEachPositionTypeInput(e,t,s){const i=jg(t,this.optionsFactory),n=this.getInputs(e);for(let o=0;o<n.length;o++){const r=n[o];r!=null&&s(r,o,e,i)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return jg(t,this.optionsFactory)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(s=>s==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinAnds.forEach((t,s)=>this.resetJoinOperatorAnd(t,s,this.joinOperatorId+s)),this.eJoinOrs.forEach((t,s)=>this.resetJoinOperatorOr(t,s,this.joinOperatorId+s)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){const s=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(s).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,s){this.resetJoinOperator(e,t,this.defaultJoinOperator==="AND",this.translate("andCondition"),s)}resetJoinOperatorOr(e,t,s){this.resetJoinOperator(e,t,this.defaultJoinOperator==="OR",this.translate("orCondition"),s)}resetJoinOperator(e,t,s,i,n){this.updateJoinOperatorDisabled(e.setValue(s,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(i),t)}updateJoinOperatorsDisabled(){const e=(t,s)=>this.updateJoinOperatorDisabled(t,s);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const s=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput((i,n,o)=>{o===t&&this.setElementValue(i,s[n]!=null?s[n]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,s,i)=>{this.setElementValue(t,s===0&&i===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,s=>{this.attachElementOnChange(s,this.listener)}))}hasInvalidInputs(){return!1}isReadOnly(){return!!this.params.readOnly}},B_=class{constructor(e,t,s,i,n,o){this.alive=!0,this.context=e,this.eParent=n;const r=mV(t,s,i);r&&r.newAgStackInstance().then(a=>{var d,h;if(!this.alive){e.destroyBean(a);return}if(this.dateComp=a,!a)return;n.appendChild(a.getGui()),(d=a==null?void 0:a.afterGuiAttached)==null||d.call(a);const{tempValue:l,disabled:c}=this;l&&a.setDate(l),c!=null&&((h=a.setDisabled)==null||h.call(a,c)),o==null||o(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){var s;const t=this.dateComp;t?(s=t.setDisabled)==null||s.call(t,e):this.disabled=e}setDisplayed(e){Vt(this.eParent,e)}setInputPlaceholder(e){var t,s;(s=(t=this.dateComp)==null?void 0:t.setInputPlaceholder)==null||s.call(t,e)}setInputAriaLabel(e){var t,s;(s=(t=this.dateComp)==null?void 0:t.setInputAriaLabel)==null||s.call(t,e)}afterGuiAttached(e){var t,s;(s=(t=this.dateComp)==null?void 0:t.afterGuiAttached)==null||s.call(t,e)}updateParams(e){var t,s;(s=(t=this.dateComp)==null?void 0:t.refresh)==null||s.call(t,e)}},H0=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function G_(e,t){const{dateFrom:s,dateTo:i,type:n}=e||{};return[s&&Mi(s,void 0,!0)||null,i&&Mi(i,void 0,!0)||null].slice(0,jg(n,t))}var uE=1e3,gE=1/0,Ej=class extends N0{constructor(){super("dateFilter",G_,H0),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=uE,this.maxValidYear=gE,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);const t=(l,c)=>{const d=e[l];if(d!=null)if(isNaN(d))oe(82,{param:l});else return d==null?c:Number(d);return c},s=t("minValidYear",uE),i=t("maxValidYear",gE);this.minValidYear=s,this.maxValidYear=i,s>i&&oe(83);const{minValidDate:n,maxValidDate:o}=e,r=n instanceof Date?n:Mi(n);this.minValidDate=r;const a=o instanceof Date?o:Mi(o);this.maxValidDate=a,r&&a&&r>a&&oe(84)}createDateCompWrapper(e){const{beans:{userCompFactory:t,context:s,gos:i},params:n}=this,o=new B_(s,t,n.colDef,Be(i,{onDateChanged:()=>this.onUiChanged(),filterParams:n,location:"filter"}),e);return this.addDestroyFunc(()=>o.destroy()),o}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){const e=ls({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,s,i){const n=ls({tag:"div",cls:`ag-filter-${i} ag-filter-date-${i}`});t.push(n),e.appendChild(n),s.push(this.createDateCompWrapper(n))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),Eg(this.eConditionPanelsFrom,e,t),Eg(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,s){const i=Eg(e,t,s);for(const n of i)n.destroy()}isValidDateValue(e){if(e===null)return!1;const{minValidDate:t,maxValidDate:s,minValidYear:i,maxValidYear:n}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<i)return!1;if(s){if(e>s)return!1}else if(e.getUTCFullYear()>n)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((s,i,n,o)=>{n!==e||!t||i>=o||(t=t&&this.isValidDateValue(s.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),s={},i=this.getValues(e),n=this.params.useIsoSeparator?"T":" ";return i.length>0&&(s.dateFrom=Qi(i[0],!0,n)),i.length>1&&(s.dateTo=Qi(i[1],!0,n)),{dateFrom:null,dateTo:null,filterType:this.filterType,type:t,...s}}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),s=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(t),i.setInputAriaLabel(s)})}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:s}=this;return e>=t.length?[null,null]:[t[e],s[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(s,i,n,o)=>{i<o&&t.push(s.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}},V_=class extends ${constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){const t=e.filterParams,s=new O0;this.optionsFactory=s,s.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(s,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if(e.source==="colDef"){const t=e.filterParams,s=this.optionsFactory;s.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:s,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){const t=e.model;if(t==null)return!0;const{operator:s}=t,i=[];if(s){const r=t;i.push(...r.conditions??[])}else i.push(t);const n=s&&s==="OR"?"some":"every",o=this.params.getValue(e.node);return i[n](r=>this.individualConditionPasses(e,r,o))}getModelAsString(e,t){return this.filterModelFormatter.getModelAsString(e,t)??""}validateModel(e){const{model:t,filterParams:{filterOptions:s,maxNumConditions:i}}=e;if(t==null)return;let o=$D(t)?t.conditions:[t];const r=(s==null?void 0:s.map(d=>typeof d=="string"?d:d.displayKey))??this.defaultOptions;if(!(!o||o.every(d=>r.find(h=>h===d.type)!==void 0))){this.params={...e,model:null},e.onModelChange(null);return}let l=!1;const c=this.filterType;if((o&&!o.every(d=>d.filterType===c)||t.filterType!==c)&&(o=o.map(d=>({...d,filterType:c})),l=!0),typeof i=="number"&&o&&o.length>i&&(o=o.slice(0,i),l=!0),l){const d=o.length>1?{...t,filterType:c,conditions:o}:{...o[0],filterType:c};this.params={...e,model:d},e.onModelChange(d)}}individualConditionPasses(e,t,s){const i=this.optionsFactory,n=this.mapValuesFromModel(t,i),o=i.getCustomOption(t.type),r=xj(o,n,s);return r??(s==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(n,s,t,e))}},z_=class extends V_{evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:s,includeBlanksInGreaterThan:i,includeBlanksInLessThan:n,includeBlanksInRange:o}=this.params.filterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(s)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(i)return!0;break;case"lessThan":case"lessThanOrEqual":if(n)return!0;break;case"inRange":if(o)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,s){const i=s.type;if(!this.isValid(t))return i==="notEqual"||i==="notBlank";const n=this.comparator(),o=e[0]!=null?n(e[0],t):0;switch(i){case"equals":return o===0;case"notEqual":return o!==0;case"greaterThan":return o>0;case"greaterThanOrEqual":return o>=0;case"lessThan":return o<0;case"lessThanOrEqual":return o<=0;case"inRange":{const r=n(e[1],t);return this.params.filterParams.inRangeInclusive?o>=0&&r<=0:o>0&&r<0}case"blank":return Iv(t);case"notBlank":return!Iv(t);default:return oe(76,{filterModelType:i}),!0}}},W_={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},Aj={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},B0=class extends ${constructor(e,t,s){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=s}getModelAsString(e,t){const s=this.getLocaleTextFunc(),i=t==="filterToolPanel";if(!e)return i?wa(this,"filterSummaryInactive"):null;if(e.operator!=null){const o=e,a=(o.conditions??[]).map(c=>this.getModelAsString(c,t)),l=o.operator==="AND"?"andCondition":"orCondition";return a.join(` ${wa(this,l)} `)}else{if(e.type==="blank"||e.type==="notBlank")return i?wa(this,e.type==="blank"?"filterSummaryBlank":"filterSummaryNotBlank"):s(e.type,e.type);{const o=e,r=this.optionsFactory.getCustomOption(o.type),{displayKey:a,displayName:l,numberOfInputs:c}=r||{};return a&&l&&c===0?s(a,l):this.conditionToString(o,i,o.type==="inRange"||c===2,a,l)}}}updateParams(e){const{optionsFactory:t,filterParams:s}=e;this.optionsFactory=t,this.filterParams=s}conditionForToolPanel(e,t,s,i,n,o){let r;const a=this.getTypeKey(e);return a&&(r=wa(this,a)),n&&o&&(r=this.getLocaleTextFunc()(n,o)),r!=null?t?`${r} ${wa(this,"filterSummaryInRangeValues",[s(),i()])}`:`${r} ${s()}`:null}getTypeKey(e){const t=this.filterTypeKeys[e];return t?`filterSummary${t}`:null}formatValue(e){const t=this.valueFormatter;return t?t(e??null)??"":String(e)}},$_=class extends B0{constructor(e,t){super(e,t,s=>{const{dataTypeSvc:i,valueSvc:n}=this.beans,o=t.column,r=i==null?void 0:i.getDateFormatterFunction(o),a=r?r(s??void 0):s;return n.formatValue(o,null,a)}),this.filterTypeKeys=W_}conditionToString(e,t,s,i,n){const{type:o}=e,r=Mi(e.dateFrom),a=Mi(e.dateTo),l=this.filterParams.inRangeFloatingFilterDateFormat,c=t?this.formatValue.bind(this):u=>Gy(u,l),d=()=>r!==null?c(r):"null",h=()=>a!==null?c(a):"null";if(t){const u=this.conditionForToolPanel(o,s,d,h,i,n);if(u!=null)return u}return s?`${d()}-${h()}`:r!=null?c(r):`${o}`}};function Fj(e,t){const s=t;return s<e?-1:s>e?1:0}var Pj=class extends z_{constructor(){super(G_,H0),this.filterType="date",this.FilterModelFormatterClass=$_}comparator(){return this.params.filterParams.comparator??Fj}isValid(e){const t=this.params.filterParams.isValidDate;return!t||t(e)}},U_=class extends Et{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}const t=e.operator;let s;t?s=e.conditions[0]:s=e,this.lastType=s.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const s=e;return this.isTypeEditable(s.type)}init(e){this.params=e;const t=this.gos.get("enableFilterHandlers");if(this.reactive=t,this.setParams(e),t){const s=e;this.onModelUpdated(s.model)}}setParams(e){const t=new O0;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){const s=this.optionsFactory.defaultOption;t||(this.lastType=s),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(s);this.setEditable(i)}refresh(e){this.params=e;const t=e,s=this.reactive;if((!s||t.source==="colDef")&&this.updateParams(e),s){const{source:i,model:n}=t;if(i==="dataChanged"||i==="ui")return;this.onModelUpdated(n)}}updateParams(e){const t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){t!=null&&t.afterFloatingFilter||t!=null&&t.afterDataChange||this.onModelUpdated(e)}hasSingleInput(e){var s;const t=(s=this.optionsFactory.getCustomOption(e))==null?void 0:s.numberOfInputs;return t==null||t==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.readOnly&&this.hasSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},Tj={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},Dj=class extends U_{constructor(){super(Tj,[EC]),this.eReadOnlyText=ge,this.eDateWrapper=ge,this.FilterModelFormatterClass=$_,this.filterType="date",this.defaultOptions=H0}setParams(e){super.setParams(e),this.createDateComponent();const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const s=e?Mi(e.dateFrom):null;this.dateComp.setDate(s),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Vt(this.eDateWrapper,e),Vt(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){const e=this.dateComp.getDate();if(this.reactive){const t=this.params;t.onUiChange();const s=t.model,i=Qi(e),n=i==null?null:{...s??{filterType:this.filterType,type:this.lastType??this.optionsFactory.defaultOption},dateFrom:i};t.onModelChange(n,{afterFloatingFilter:!0})}else this.params.parentFilterInstance(t=>{t==null||t.onFloatingFilterChanged(this.lastType||null,e)})}getDateComponentParams(){const{filterParams:e}=this.params,t=S0(e,this.defaultDebounceMs);return Be(this.gos,{onDateChanged:Us(this,this.onDateChanged.bind(this),t),filterParams:e,location:"floatingFilter"})}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:s,params:i}=this;this.dateComp=new B_(e,t,i.column.getColDef(),this.getDateComponentParams(),s,n=>{n.setInputAriaLabel(this.getAriaLabel(i))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},_j={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},Mj=class extends Et{constructor(){super(_j,[EC]),this.eDateInput=ge,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){var u;const t=this.eDateInput.getInputElement(),s=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=s&&bl();const{minValidYear:i,maxValidYear:n,minValidDate:o,maxValidDate:r,buttons:a,includeTime:l,colDef:c}=e.filterParams||{},d=this.beans.dataTypeSvc,h=l??((u=d==null?void 0:d.getDateIncludesTimeFlag)==null?void 0:u.call(d,c.cellDataType))??!1;if(s?h?(t.type="datetime-local",t.step="1"):t.type="date":t.type="text",o&&i&&oe(85),r&&n&&oe(86),o&&r){const[f,p]=[o,r].map(m=>m instanceof Date?m:Mi(m));f&&p&&f.getTime()>p.getTime()&&oe(87)}o?o instanceof Date?t.min=Gy(o):t.min=o:i&&(t.min=`${i}-01-01`),r?r instanceof Date?t.max=Gy(r):t.max=r:n&&(t.max=`${n}-12-31`),this.isApply=e.location==="floatingFilter"&&!!(a!=null&&a.includes("apply"))}refresh(e){this.params=e,this.setParams(e)}getDate(){return Mi(this.eDateInput.getValue())}setDate(e){var i;const t=this.params.filterParams.colDef.cellDataType,s=((i=this.beans.dataTypeSvc)==null?void 0:i.getDateIncludesTimeFlag(t))??!1;this.eDateInput.setValue(Qi(e,s))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e!=null&&e.suppressFocus||this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){var t;return((t=e==null?void 0:e.filterParams)==null?void 0:t.browserDatePicker)??!0}},G0=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function nS(e){const{allowedCharPattern:t}=e??{};return t??null}function oS(e){return e==null||isNaN(e)?null:e}function j_(e,t){const{filter:s,filterTo:i,type:n}=e||{};return[oS(s),oS(i)].slice(0,jg(n,t))}var kj=class extends N0{constructor(){super("numberFilter",j_,G0),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}setElementValue(e,t,s){const{numberFormatter:i}=this.params,n=!s&&i?i(t??null):t;super.setElementValue(e,n)}createEValue(){const e=nS(this.params),t=ls({tag:"div",cls:"ag-filter-body",role:"presentation"});return this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,s,i){const n=this.createManagedBean(i?new vd({allowedCharPattern:i}):new m0);n.addCss(`ag-filter-${s}`),n.addCss("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeEValues(e,t){const s=i=>this.removeComponents(i,e,t);s(this.eValuesFrom),s(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,(s,i,n,o)=>{i<o&&t.push(oS(this.stringToFloat(s.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}stringToFloat(e){if(typeof e=="number")return e;let t=zr(e);t!=null&&t.trim()===""&&(t=null);const s=this.params.numberParser;return s?s(t):t==null||t.trim()==="-"?null:Number.parseFloat(t)}createCondition(e){const t=this.getConditionType(e),s={filterType:this.filterType,type:t},i=this.getValues(e);return i.length>0&&(s.filter=i[0]),i.length>1&&(s.filterTo=i[1]),s}getInputs(e){const{eValuesFrom:t,eValuesTo:s}=this;return e>=t.length?[null,null]:[t[e],s[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{t.getInputElement().validity.valid||(e=!0)}),e}},K_=class extends B0{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=W_}conditionToString(e,t,s,i,n){const{filter:o,filterTo:r,type:a}=e,l=this.formatValue.bind(this);if(t){const c=this.conditionForToolPanel(a,s,()=>l(o),()=>l(r),i,n);if(c!=null)return c}return s?`${l(o)}-${l(r)}`:o!=null?l(o):`${a}`}},Ij=class extends z_{constructor(){super(j_,G0),this.filterType="number",this.FilterModelFormatterClass=K_}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}},q_=class extends ${constructor(e){super(),this.params=e,this.eInput=ge,this.onValueChanged=()=>{}}setupGui(e){var i;this.eInput=this.createManagedBean(new vd((i=this.params)==null?void 0:i.config));const t=this.eInput.getGui();e.appendChild(t);const s=n=>this.onValueChanged(n);this.addManagedListeners(t,{input:s,keydown:s})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t}){const{eInput:s}=this;s.setInputAriaLabel(e),t!==void 0&&s.setAutoComplete(t)}};function rS(e){const t=e==null?void 0:e.trim();return t===""?e:t}function Y_(e,t){const{filter:s,filterTo:i,type:n}=e||{};return[s||null,i||null].slice(0,jg(n,t))}var Lj={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},X_=class extends U_{constructor(){super(...arguments),this.eFloatingFilterInputContainer=ge,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(Lj)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){const t=e.browserAutoComplete??!1,{inputSvc:s,defaultDebounceMs:i,readOnly:n}=this;if(s.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=FC(e.filterParams),!n){const o=S0(e.filterParams,i),r=Us(this,this.syncUpWithParentFilter.bind(this),o);s.setValueChangedListener(r)}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,s=t.getValue();Ks(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(s,!0)}syncUpWithParentFilter(e){const t=e.key===H.ENTER,s=this.reactive;if(s&&this.params.onUiChange(),this.applyActive&&!t)return;const{inputSvc:i,params:n,lastType:o}=this;let r=i.getValue();if(n.filterParams.trimInput&&(r=rS(r),i.setValue(r,!0)),s){const a=n,l=a.model,c=this.convertValue(r),d=c==null?null:{...l??{filterType:this.filterType,type:o??this.optionsFactory.defaultOption},filter:c};a.onModelChange(d,{afterFloatingFilter:!0})}else n.parentFilterInstance(a=>{a==null||a.onFloatingFilterChanged(o||null,r||null)})}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},Oj=class extends ${constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new m0),this.eTextInput=this.createManagedBean(new vd),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),s=this.eTextInput.getGui();e.appendChild(t),e.appendChild(s),this.setupListeners(t,i=>this.onValueChanged(i)),this.setupListeners(s,i=>this.onValueChanged(i))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},Nj=class extends X_{constructor(){super(...arguments),this.FilterModelFormatterClass=K_,this.filterType="number",this.defaultOptions=G0}updateParams(e){nS(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return this.allowedCharPattern=nS(e.filterParams),this.allowedCharPattern?this.createManagedBean(new q_({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new Oj)}convertValue(e){return e?Number(e):null}},V0=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],Hj=class extends N0{constructor(){super("textFilter",Y_,V0),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){const t=this.getConditionType(e),s={filterType:this.filterType,type:t},i=this.getValues(e);return i.length>0&&(s.filter=i[0]),i.length>1&&(s.filterTo=i[1]),s}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:s}=this;return e>=t.length?[null,null]:[t[e],s[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(s,i,n,o)=>{i<o&&t.push(zr(s.getValue()))}),t}createEValue(){const e=ls({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:t,eValuesTo:s}=this;return this.createFromToElement(e,t,"from"),this.createFromToElement(e,s,"to"),e}createFromToElement(e,t,s){const i=this.createManagedBean(new vd);i.addCss(`ag-filter-${s}`),i.addCss("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeEValues(e,t){const s=o=>this.removeComponents(o,e,t),{eValuesFrom:i,eValuesTo:n}=this;s(i),s(n)}},Q_=class extends B0{constructor(){super(...arguments),this.filterTypeKeys=Aj}conditionToString(e,t,s,i,n){const{filter:o,filterTo:r,type:a}=e;if(t){const l=d=>()=>wa(this,"filterSummaryTextQuote",[d]),c=this.conditionForToolPanel(a,s,l(o),l(r),i,n);if(c!=null)return c}return s?`${o}-${r}`:o!=null?`${o}`:`${a}`}},Bj=({filterOption:e,value:t,filterText:s})=>{if(s==null)return!1;switch(e){case"contains":return t.includes(s);case"notContains":return!t.includes(s);case"equals":return t===s;case"notEqual":return t!=s;case"startsWith":return t.indexOf(s)===0;case"endsWith":{const i=t.lastIndexOf(s);return i>=0&&i===t.length-s.length}default:return!1}},Gj=e=>e,Vj=e=>e==null?null:e.toString().toLowerCase(),zj=class extends V_{constructor(){super(Y_,V0),this.filterType="text",this.FilterModelFormatterClass=Q_}updateParams(e){super.updateParams(e);const t=e.filterParams;this.matcher=t.textMatcher??Bj,this.formatter=t.textFormatter??(t.caseSensitive?Gj:Vj)}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,s,i){const n=e.map(u=>this.formatter(u))||[],o=this.formatter(t),{api:r,colDef:a,column:l,context:c,filterParams:{textFormatter:d}}=this.params;if(s.type==="blank")return Iv(t);if(s.type==="notBlank")return!Iv(t);const h={api:r,colDef:a,column:l,context:c,node:i.node,data:i.data,filterOption:s.type,value:o,textFormatter:d};return n.some(u=>this.matcher({...h,filterText:u}))}processModelToApply(e){if(e&&this.params.filterParams.trimInput){const t=s=>{const i={...s},{filter:n,filterTo:o}=s;return n&&(i.filter=rS(n)??null),o&&(i.filterTo=rS(o)??null),i};return $D(e)?{...e,conditions:e.conditions.map(t)}:t(e)}return e}},Wj=class extends X_{constructor(){super(...arguments),this.FilterModelFormatterClass=Q_,this.filterType="text",this.defaultOptions=V0}createFloatingFilterInputService(){return this.createManagedBean(new q_)}};function $j(e){var t;return!!((t=e.quickFilter)!=null&&t.isFilterPresent())}function Uj(e){var t;return(t=e.quickFilter)==null?void 0:t.getText()}function jj(e){var t;(t=e.quickFilter)==null||t.resetCache()}var Kj=class extends ${constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",s=>this.setFilter(s.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){var l;const{autoColSvc:e,colModel:t,gos:s,pivotResultCols:i}=this.beans,n=t.isPivotMode(),o=e==null?void 0:e.getColumns(),r=t.getColDefCols();let a=(n&&!s.get("applyQuickFilterBeforePivotOrAgg")?(l=i==null?void 0:i.getPivotResultCols())==null?void 0:l.list:r)??[];o&&(a=a.concat(o)),this.colsToUse=s.get("includeHiddenColumnsInQuickFilter")?a:a.filter(c=>c.isVisible()||c.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(s=>t?this.doesRowPassCache(e,s):this.doesRowPassNoCache(e,s))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseFilter(e){return pe(e)?e.toUpperCase():null}setFilter(e){if(e!=null&&typeof e!="string"){oe(70,{newFilter:e});return}const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),s=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,s&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(s=>{const i=this.getTextForColumn(s,e);return pe(i)&&i.includes(t)})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.includes(t)}doesRowPassMatcher(e,t){let s;e?(this.checkGenerateAggText(t),s=t.quickFilterAggregateText):s=this.getAggText(t);const{quickFilterParts:i,matcher:n}=this;return n(i,s)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let s=this.beans.filterValueSvc.getValue(e,t);const i=e.getColDef();if(i.getQuickFilterText){const n=Be(this.gos,{value:s,node:t,data:t.data,column:e,colDef:i});s=i.getQuickFilterText(n)}return pe(s)?s.toString().toUpperCase():null}getAggText(e){const t=[];for(const s of this.colsToUse){const i=this.getTextForColumn(s,e);pe(i)&&t.push(i)}return t.join(`
`)}},qj={moduleName:"ClientSideRowModelFilter",version:fe,rowModels:["clientSide"],beans:[Y8]},z0={moduleName:"FilterCore",version:fe,beans:[vj],apiFunctions:{isAnyFilterPresent:pj,onFilterChanged:mj},css:[tj],dependsOn:[qj]},J_={moduleName:"FilterValue",version:fe,beans:[wj]},MC={moduleName:"ColumnFilter",version:fe,beans:[fj,Cj],dynamicBeans:{headerFilterCellCtrl:X8},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:sj,getColumnFilterInstance:ij,destroyFilter:nj,setFilterModel:oj,getFilterModel:rj,getColumnFilterModel:aj,setColumnFilterModel:lj,showColumnFilter:cj,hideColumnFilter:dj,getColumnFilterHandler:hj,doFilterAction:uj},dependsOn:[z0,_C,J_,Z8]},Yj={moduleName:"CustomFilter",version:fe,userComponents:{agReadOnlyFloatingFilter:yj},dependsOn:[MC]},Xj={moduleName:"TextFilter",version:fe,dependsOn:[MC],userComponents:{agTextColumnFilter:{classImp:Hj,params:{useForm:!0}},agTextColumnFloatingFilter:Wj},dynamicBeans:{agTextColumnFilterHandler:zj}},Qj={moduleName:"NumberFilter",version:fe,dependsOn:[MC],userComponents:{agNumberColumnFilter:{classImp:kj,params:{useForm:!0}},agNumberColumnFloatingFilter:Nj},dynamicBeans:{agNumberColumnFilterHandler:Ij}},Jj={moduleName:"DateFilter",version:fe,dependsOn:[MC],userComponents:{agDateColumnFilter:{classImp:Ej,params:{useForm:!0}},agDateInput:Mj,agDateColumnFloatingFilter:Dj},dynamicBeans:{agDateColumnFilterHandler:Pj}},Zj={moduleName:"QuickFilterCore",version:fe,rowModels:["clientSide"],beans:[Kj],dependsOn:[z0,J_]},eK={moduleName:"QuickFilter",version:fe,apiFunctions:{isQuickFilterPresent:$j,getQuickFilter:Uj,resetQuickFilter:jj},dependsOn:[Zj]},tK={moduleName:"ExternalFilter",version:fe,dependsOn:[z0]},sK=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",Ow=(e,t,s)=>{var a,l,c;const{editModelSvc:i}=e,n=(l=(a=i==null?void 0:i.getCellValidationModel())==null?void 0:a.getCellValidation(t))==null?void 0:l.errorMessages,o=(c=i==null?void 0:i.getRowValidationModel().getRowValidation(t))==null?void 0:c.errorMessages,r=n||o;return r!=null&&r.length?r.join(s("tooltipValidationErrorSeparator",". ")):void 0},iK=class extends ${constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,s,i){e&&t.destroyBean(e);const n=this.gos,o=Lw(n),{column:r,eGui:a}=t,l=r.getColDef();!i&&o&&!l.headerComponent&&(i=Bm(()=>a.querySelector(".ag-header-cell-text")));const c="header",h=this.beans.colNames.getDisplayNameForColumn(r,"header",!0),u=s??h,f={getGui:()=>a,getLocation:()=>c,getTooltipValue:()=>{var m;return s??((m=l==null?void 0:l.headerTooltipValueGetter)==null?void 0:m.call(l,Be(n,{location:c,colDef:l,column:r,value:u,valueFormatted:h})))??(l==null?void 0:l.headerTooltip)},shouldDisplayTooltip:i,getAdditionalParams:()=>({column:r,colDef:r.getColDef()})};let p=this.createTooltipFeature(f);return p&&(p=t.createBean(p),t.setRefreshFunction("tooltip",()=>p.refreshTooltip())),p}setupHeaderGroupTooltip(e,t,s,i){e&&t.destroyBean(e);const n=this.gos,o=Lw(n),{column:r,eGui:a}=t,l=r.getColGroupDef();!i&&o&&!(l!=null&&l.headerGroupComponent)&&(i=Bm(()=>a.querySelector(".ag-header-group-text")));const c="headerGroup",h=this.beans.colNames.getDisplayNameForColumnGroup(r,"header"),u=s??h,f={getGui:()=>a,getLocation:()=>c,getTooltipValue:()=>{var m;return s??((m=l==null?void 0:l.headerTooltipValueGetter)==null?void 0:m.call(l,Be(n,{location:c,colDef:l,column:r,value:u,valueFormatted:h})))??(l==null?void 0:l.headerTooltip)},shouldDisplayTooltip:i,getAdditionalParams:()=>{const m={column:r};return l&&(m.colDef=l),m}},p=this.createTooltipFeature(f);return p&&t.createBean(p)}enableCellTooltipFeature(e,t,s){const{beans:i}=this,{gos:n,editSvc:o}=i,{column:r,rowNode:a}=e;let l="cell";const c=()=>{const f=!!!(o!=null&&o.isEditing(e))&&Ow(i,e,this.getLocaleTextFunc());if(f)return l="cellEditor",f;l="cell";const p=r.getColDef(),m=a.data;if(p.tooltipField&&pe(m))return xg(m,p.tooltipField,r.isTooltipFieldContainsDots());const v=p.tooltipValueGetter;return v?v(Be(n,{location:"cell",colDef:r.getColDef(),column:r,rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,value:e.value,valueFormatted:e.valueFormatted})):null},d=Lw(n);s||(d&&!e.isCellRenderer()?s=()=>{const u=!!(o!=null&&o.isEditing(e));if(!u&&Ow(i,e,this.getLocaleTextFunc()))return!0;if(!r.isTooltipEnabled())return!1;const m=Bm(()=>{const v=e.eGui;return v.children.length===0?v:v.querySelector(".ag-cell-value")});return!u&&m()}:s=()=>!(o!=null&&o.isEditing(e)));const h={getGui:()=>e.eGui,getLocation:()=>l,getTooltipValue:t!=null?()=>t:c,shouldDisplayTooltip:s,getAdditionalParams:()=>({column:r,colDef:r.getColDef(),rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,valueFormatted:e.valueFormatted})};return this.createTooltipFeature(h,i)}setupFullWidthRowTooltip(e,t,s,i){const n={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>s,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i},o=this.beans,r=o.context;e&&t.destroyBean(e,r);const a=this.createTooltipFeature(n,o);if(a)return t.createBean(a,r)}setupCellEditorTooltip(e,t){var a,l;const{beans:s}=this,{context:i}=s,n=((a=t.getValidationElement)==null?void 0:a.call(t,!0))||!((l=t.isPopup)!=null&&l.call(t))&&e.eGui;if(!n)return;const o={getGui:()=>n,getTooltipValue:()=>Ow(s,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{var p,m;const{editModelSvc:c}=s,d=(p=c==null?void 0:c.getRowValidationModel())==null?void 0:p.getRowValidationMap(),h=(m=c==null?void 0:c.getCellValidationModel())==null?void 0:m.getCellValidationMap(),u=!!d&&d.size>0,f=!!h&&h.size>0;return u||f}},r=this.createTooltipFeature(o,s);if(r)return e.createBean(r,i)}initCol(e){const{colDef:t}=e;e.tooltipEnabled=pe(t.tooltipField)||pe(t.tooltipValueGetter)||pe(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}},nK=class extends Fz{createTooltipComp(e,t){const s=wV(this.beans.userCompFactory,e);s==null||s.newAgStackInstance().then(t)}setEventHandlers(e){[this.onColumnMovedEventCallback]=this.addManagedEventListeners({columnMoved:e})}clearEventHandlers(){var e;(e=this.onColumnMovedEventCallback)==null||e.call(this),this.onColumnMovedEventCallback=void 0}},Z_={moduleName:"Tooltip",version:fe,beans:[iK],dynamicBeans:{tooltipFeature:ID,highlightTooltipFeature:Pz,tooltipStateManager:nK},userComponents:{agTooltipComponent:_z},dependsOn:[_C],css:[sK]},Id=class{constructor(e){this.cellValueChanges=e}},Nw=class extends Id{constructor(e,t,s,i){super(e),this.initialRange=t,this.finalRange=s,this.ranges=i}},oK=10,fE=class{constructor(e){this.actionStack=[],this.maxStackSize=e||oK,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},rK=class extends ${constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},s=this.activeCellEdit!==null&&d_(this.activeCellEdit,t),i=this.activeRowEdit!==null&&P3(this.activeRowEdit,t);if(!(s||i||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:r,column:a,oldValue:l,value:c}=e,d={rowPinned:o,rowIndex:r,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(d)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const s=e.get("undoRedoCellEditingLimit");if(s<=0)return;this.undoStack=new fE(s),this.redoStack=new fE(s),this.addListeners();const i=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:n=>{n.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:i,newColumnsLoaded:i,columnGroupOpened:i,columnRowGroupChanged:i,columnMoved:i,columnPinned:i,columnVisible:i,rowDragEnd:i}),t.whenReady(this,n=>{this.gridBodyCtrl=n.gridBodyCtrl})}getCurrentUndoStackSize(){var e;return((e=this.undoStack)==null?void 0:e.getCurrentStackSize())??0}getCurrentRedoStackSize(){var e;return((e=this.redoStack)==null?void 0:e.getCurrentStackSize())??0}undo(e){const{eventSvc:t,undoStack:s,redoStack:i}=this;t.dispatchEvent({type:"undoStarted",source:e});const n=this.undoRedo(s,i,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:n})}redo(e){const{eventSvc:t,undoStack:s,redoStack:i}=this;t.dispatchEvent({type:"redoStarted",source:e});const n=this.undoRedo(i,s,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:n})}undoRedo(e,t,s,i,n){if(!e)return!1;const o=e.pop();return o!=null&&o.cellValueChanges?(this.processAction(o,r=>r[i],n),o instanceof Nw?this.processRange(o.ranges||[o[s]]):this.processCell(o.cellValueChanges),t.push(o),!0):!1}processAction(e,t,s){for(const i of e.cellValueChanges){const{rowIndex:n,rowPinned:o,columnId:r}=i,a={rowIndex:n,rowPinned:o},l=Zr(this.beans,a);l.displayed&&l.setDataValue(r,t(i),s)}}processRange(e){let t;const s=this.beans.rangeSvc;s.removeAllCellRanges(!0),e.forEach((i,n)=>{if(!i)return;const o=i.startRow,r=i.endRow;n===e.length-1&&(t={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(t));const a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:i.startColumn,columns:i.columns};s.addCellRange(a)})}processCell(e){const t=e[0],{rowIndex:s,rowPinned:i}=t,n={rowIndex:s,rowPinned:i},o=Zr(this.beans,n),r={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(r)}setLastFocusedCell(e){const{rowIndex:t,columnId:s,rowPinned:i}=e,{colModel:n,focusSvc:o,rangeSvc:r}=this.beans,a=n.getCol(s);if(!a)return;const{scrollFeature:l}=this.gridBodyCtrl;l.ensureIndexVisible(t),l.ensureColumnVisible(a);const c={rowIndex:t,column:a,rowPinned:i};o.setFocusedCell({...c,forceBrowserFocus:!0}),r==null||r.setRangeToCell(c)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new Id(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const s=new Id(this.cellValueChanges);this.pushActionsToUndoStack(s)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new Id(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new Nw(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:s}=this.beans;t&&Jr(s)?e=new Nw(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):e=new Id(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:({changes:e})=>this.stopBigChange("batchEditing",e),bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:({changes:e})=>this.stopBigChange("bulkEditing",e)})}startBigChange(e){this.updateBigChange(e,!0)}updateBigChange(e,t){e==="bulkEditing"?this.bulkEditing=t:this.batchEditing=t}stopBigChange(e,t){if(e==="bulkEditing"&&!this.bulkEditing||e==="batchEditing"&&!this.batchEditing||(this.updateBigChange(e,!1),(t==null?void 0:t.length)===0))return;const s=new Id(t??[]);this.pushActionsToUndoStack(s),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},aK=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{display:block;height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}",lK={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]},cK=class extends TC{constructor(){super(lK,[p0]),this.eEditor=ge}initialiseEditor(e){const t=e.value??void 0,s=this.eEditor;s.setValue(t),s.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(s,{fieldValueChanged:n=>this.setAriaLabel(n.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),s=xC(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel(`${i} (${s})`)}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{getValidationErrors:t}=e,s=this.getValue();return t?t({value:s,internalErrors:null,cellEditorParams:e}):null}},kC=class extends TC{constructor(e){super(),this.cellEditorInput=e,this.eEditor=ge}initialiseEditor(e){const{cellEditorInput:t}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[t.getTemplate()]},t.getAgComponents());const{eEditor:s}=this,{cellStartedEdit:i,eventKey:n,suppressPreventDefault:o}=e;s.getInputElement().setAttribute("title",""),t.init(s,e);let r,a=!0;i?(this.focusAfterAttached=!0,n===H.BACKSPACE||n===H.DELETE?r="":n&&n.length===1?o?a=!1:r=n:(r=t.getStartValue(),n!==H.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,r=t.getStartValue()),a&&r!=null&&s.setStartValue(r),this.addGuiEventListener("keydown",l=>{const{key:c}=l;(c===H.PAGE_UP||c===H.PAGE_DOWN)&&l.preventDefault()})}afterGuiAttached(){var i,n;const e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;bl()||t.getFocusableElement().focus();const s=t.getInputElement();this.highlightAllOnFocus?s.select():(n=(i=this.cellEditorInput).setCaret)==null||n.call(i)}focusIn(){const{eEditor:e}=this,t=e.getFocusableElement(),s=e.getInputElement();t.focus(),s.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},dK={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},hK=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return dK}getAgComponents(){return[ED]}init(e,t){var r,a;this.eEditor=e,this.params=t;const{min:s,max:i,step:n,colDef:o}=t;s!=null&&e.setMin(s),i!=null&&e.setMax(i),n!=null&&e.setStep(n),this.includeTime=t.includeTime??((a=(r=this.getDataTypeService())==null?void 0:r.getDateIncludesTimeFlag)==null?void 0:a.call(r,o.cellDataType)),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const t=this.eEditor.getInputElement().valueAsDate,{params:s}=this,{min:i,max:n,getValidationErrors:o}=s;let r=[];const a=this.getLocaleTextFunc();if(t instanceof Date&&!isNaN(t.getTime())){if(i){const l=i instanceof Date?i:new Date(i);if(t<l){const c=l.toLocaleDateString();r.push(a("minDateValidation",`Date must be after ${c}`,[c]))}}if(n){const l=n instanceof Date?n:new Date(n);if(t>l){const c=l.toLocaleDateString();r.push(a("maxDateValidation",`Date must be before ${c}`,[c]))}}}return r.length||(r=null),o?o({value:t,cellEditorParams:s,internalErrors:r}):r}getValue(){const{eEditor:e,params:t}=this,s=e.getDate();return!pe(s)&&!pe(t.value)?t.value:s??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Qi(e,this.includeTime??!1)}},uK=class extends kC{constructor(){super(new hK(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},gK={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},fK=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return gK}getAgComponents(){return[ED]}init(e,t){var r,a;this.eEditor=e,this.params=t;const{min:s,max:i,step:n,colDef:o}=t;s!=null&&e.setMin(s),i!=null&&e.setMax(i),n!=null&&e.setStep(n),this.includeTime=t.includeTime??((a=(r=this.getDataTypeService())==null?void 0:r.getDateIncludesTimeFlag)==null?void 0:a.call(r,o.cellDataType)),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const{eEditor:e,params:t}=this,s=e.getInputElement().value,i=this.formatDate(this.parseDate(s??void 0)),{min:n,max:o,getValidationErrors:r}=t;let a=[];if(i){const l=new Date(i),c=this.getLocaleTextFunc();if(n){const d=new Date(n);if(l<d){const h=d.toLocaleDateString();a.push(c("minDateValidation",`Date must be after ${h}`,[h]))}}if(o){const d=new Date(o);if(l>d){const h=d.toLocaleDateString();a.push(c("maxDateValidation",`Date must be before ${h}`,[h]))}}}return a.length||(a=null),r?r({value:this.getValue(),cellEditorParams:t,internalErrors:a}):a}getValue(){const{params:e,eEditor:t}=this,s=this.formatDate(t.getDate());return!pe(s)&&!pe(e.value)?e.value:e.parseValue(s??"")}getStartValue(){return Qi(this.parseDate(this.params.value??void 0)??null,this.includeTime??!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Mi(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Qi(e??null,this.includeTime??!1)??void 0}},pK=class extends kC{constructor(){super(new fK(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},mK={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]},vK=class extends TC{constructor(){super(mK,[NV]),this.eEditor=ge}initialiseEditor(e){const{eEditor:t}=this,{cellStartedEdit:s,eventKey:i,maxLength:n,cols:o,rows:r}=e;this.focusAfterAttached=s,t.getInputElement().setAttribute("title",""),t.setMaxLength(n||200).setCols(o||60).setRows(r||10);let a;s?(this.focusAfterAttached=!0,i===H.BACKSPACE||i===H.DELETE?a="":i&&i.length===1?a=i:(a=this.getStartValue(e),i!==H.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,a=this.getStartValue(e)),a!=null&&t.setValue(a,!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}getStartValue(e){const{value:t}=e;return(t==null?void 0:t.toString())??t}onKeyDown(e){const t=e.key;(t===H.LEFT||t===H.UP||t===H.RIGHT||t===H.DOWN||e.shiftKey&&t===H.ENTER)&&e.stopPropagation()}afterGuiAttached(){const{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:s}=this,i=this.getLocaleTextFunc();e.setInputAriaLabel(i("ariaInputEditor","Input Editor")),t&&(e.getFocusableElement().focus(),s&&e.getInputElement().select())}getValue(){const{eEditor:e,params:t}=this,{value:s}=t,i=e.getValue();return!pe(i)&&!pe(s)?s:t.parseValue(i)}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:s}=e,i=this.getLocaleTextFunc(),n=this.getValue();let o=[];return typeof n=="string"&&t!=null&&n.length>t&&o.push(i("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),s?s({value:n,internalErrors:o,cellEditorParams:e}):o}},CK={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"},wK=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return CK}getAgComponents(){return[HV]}init(e,t){this.eEditor=e,this.params=t;const{max:s,min:i,precision:n,step:o}=t;s!=null&&e.setMax(s),i!=null&&e.setMin(i),n!=null&&e.setPrecision(n),o!=null&&e.setStep(o);const r=e.getInputElement();t.preventStepping?e.addManagedElementListeners(r,{keydown:this.preventStepping}):t.showStepperButtons&&r.classList.add("ag-number-field-input-stepper")}getValidationErrors(){const{params:e}=this,{min:t,max:s,getValidationErrors:i}=e,o=this.eEditor.getInputElement().valueAsNumber,r=this.getLocaleTextFunc();let a=[];return typeof o=="number"&&(t!=null&&o<t&&a.push(r("minValueValidation",`Must be greater than or equal to ${t}.`,[String(t)])),s!=null&&o>s&&a.push(r("maxValueValidation",`Must be less than or equal to ${s}.`,[String(s)]))),a.length||(a=null),i?i({value:o,cellEditorParams:e,internalErrors:a}):a}preventStepping(e){(e.key===H.UP||e.key===H.DOWN)&&e.preventDefault()}getValue(){const{eEditor:e,params:t}=this,s=e.getValue();if(!pe(s)&&!pe(t.value))return t.value;let i=t.parseValue(s);if(i==null)return i;if(typeof i=="string"){if(i==="")return null;i=Number(i)}return isNaN(i)?null:i}getStartValue(){return this.params.value}setCaret(){bl()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},bK=class extends kC{constructor(){super(new wK(()=>this.getLocaleTextFunc()))}},yK={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]},SK=class extends TC{constructor(){super(yK,[YV]),this.eEditor=ge,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}initialiseEditor(e){this.focusAfterAttached=e.cellStartedEdit;const{eEditor:t,valueSvc:s,gos:i}=this,{values:n,value:o,eventKey:r}=e;if(Wt(n)){oe(58);return}this.startedByEnter=r!=null?r===H.ENTER:!1;let a=!1;n.forEach(h=>{const u={value:h},f=s.formatValue(e.column,null,h),p=f!=null;u.text=p?f:h,t.addOption(u),a=a||o===h}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:d}=e;l!=null&&t.setPickerGap(l),d!=null&&t.setPickerMaxHeight(d),c!=null&&t.setPickerMaxWidth(c),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eEditor,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eEditor.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eEditor.showPicker()})}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){const{params:e}=this,{values:t,getValidationErrors:s}=e,i=this.getValue();let n=[];if(t&&!t.includes(i)){const o=this.getLocaleTextFunc();n.push(o("invalidSelectionValidation","Invalid selection."))}else n=null;return s?s({value:i,internalErrors:n,cellEditorParams:e}):n}},xK={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"},RK=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return xK}getAgComponents(){return[EC]}init(e,t){this.eEditor=e,this.params=t;const s=t.maxLength;s!=null&&e.setMaxLength(s)}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:s}=e,i=this.getValue(),n=this.getLocaleTextFunc();let o=[];return t!=null&&typeof i=="string"&&i.length>t&&o.push(n("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),s?s({value:i,cellEditorParams:e,internalErrors:o}):o}getValue(){const{eEditor:e,params:t}=this,s=e.getValue();return!pe(s)&&!pe(t.value)?t.value:t.parseValue(s)}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){bl()&&this.eEditor.getInputElement().focus({preventScroll:!0});const e=this.eEditor,t=e.getValue(),s=pe(t)&&t.length||0;s&&e.getInputElement().setSelectionRange(s,s)}},pE=class extends kC{constructor(){super(new RK(()=>this.getLocaleTextFunc()))}};function EK(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}function AK(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()}function eM(e,t,s="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,s),"ensureVisible")}function tM(e,t,s){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,s),"ensureVisible")}function FK(e,t,s=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,s),"ensureVisible")}function PK(e){var t;(t=e.undoRedo)==null||t.undo("api")}function TK(e){var t;(t=e.undoRedo)==null||t.redo("api")}function DK(e,t){var s;return(s=e.editModelSvc)==null?void 0:s.getEditRowDataValue(t,{checkSiblings:!0})}function _K(e){var i;const t=(i=e.editModelSvc)==null?void 0:i.getEditMap(),s=[];return t==null||t.forEach((n,o)=>{const{rowIndex:r,rowPinned:a}=o;n.forEach((l,c)=>{const{editorValue:d,pendingValue:h,sourceValue:u,state:f}=l,p=Br(l);let m=d??h;m===xn&&(m=void 0);const v={newValue:m,oldValue:u,state:f,column:c,colId:c.getColId(),colKey:c.getColId(),rowIndex:r,rowPinned:a};(f==="editing"||f==="changed"&&p)&&s.push(v)})}),s}function MK(e,t=!1){var i;const{editSvc:s}=e;if(s!=null&&s.isBatchEditing()){if(t)for(const n of((i=e.editModelSvc)==null?void 0:i.getEditPositions())??[])n.state==="editing"&&s.revertSingleCellEdit(n);else Hl(e,{persist:!0});eh(e,void 0,{cancel:t})}else s==null||s.stopEditing(void 0,{cancel:t,source:"edit",forceStop:!t,forceCancel:t})}function kK(e,t){var i;const s=Ut(e,t);return((i=e.editSvc)==null?void 0:i.isEditing(s))??!1}function IK(e,t){const{key:s,colKey:i,rowIndex:n,rowPinned:o}=t,{editSvc:r,colModel:a}=e,l=a.getCol(i);if(!l){oe(12,{colKey:i});return}const d=Zr(e,{rowIndex:n,rowPinned:o||null});if(!d){oe(290,{rowIndex:n,rowPinned:o});return}if(!l.isCellEditable(d))return;o==null&&tM(e,n),eM(e,i),r==null||r.startEditing({rowNode:d,column:l},{event:s?new KeyboardEvent("keydown",{key:s}):void 0,source:"api"})}function LK(e){var t;return((t=e.editSvc)==null?void 0:t.validateEdit())||null}function OK(e){var t;return((t=e.undoRedo)==null?void 0:t.getCurrentUndoStackSize())??0}function NK(e){var t;return((t=e.undoRedo)==null?void 0:t.getCurrentRedoStackSize())??0}var HK={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},BK=class extends u0{constructor(e){super(HK),this.params=e}postConstruct(){td(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,s=i=>{Ky(this.gos,i,t.node,t.column,!0)||t.onKeyDown(i)};this.addManagedElementListeners(e,{keydown:s})}};function GK(e,{column:t},s,i,n="ui"){var c;if(s instanceof KeyboardEvent&&(s.key===H.TAB||s.key===H.ENTER||s.key===H.F2||s.key===H.BACKSPACE&&i))return!0;if((s==null?void 0:s.shiftKey)&&((c=e.rangeSvc)==null?void 0:c.getCellRanges().length)!=0)return!1;const r=t==null?void 0:t.getColDef(),a=VK(e.gos,r),l=s==null?void 0:s.type;return l==="click"&&(s==null?void 0:s.detail)===1&&a===1||l==="dblclick"&&(s==null?void 0:s.detail)===2&&a===2?!0:n==="api"?i??!1:!1}function VK(e,t){return e.get("suppressClickEdit")===!0?0:e.get("singleClickEdit")===!0||t!=null&&t.singleClickEdit?1:2}function aS(e,{rowNode:t,column:s},i="ui"){const n=s.getColDef().editable,o=e.editModelSvc;return s.isColumnFunc(t,n)||!!o&&o.hasEdits({rowNode:t,column:s},{withOpenEditor:!0})}function zK(e,t,s="ui"){const i=aS(e,t,s);return i===!0||s==="ui"?i:e.colModel.getCols().some(o=>aS(e,{rowNode:t.rowNode,column:o},s))}var Lv=(e,t=!1)=>{if(e!==void 0)return Br(e)||t&&e.state==="editing"};function sM(e,t,s=!1){var i;return Lv((i=e.editModelSvc)==null?void 0:i.getEdit(t),s)}var iM=(e,t,s)=>{if(e)for(let i=0,n=e.length;i<n;++i){const o=e[i];if(o.data&&(Lv(t==null?void 0:t.getEdit({rowNode:o,column:s}))||Lv(t==null?void 0:t.getEdit({rowNode:o.pinnedSibling,column:s})))||iM(o.childrenAfterGroup,t,s))return!0}};function nM(e,t){const{column:s,rowNode:i}=t;return e.gos.get("groupTotalRow")&&!(i!=null&&i.footer)?!1:iM(i==null?void 0:i.childrenAfterGroup,e.editModelSvc,s)}function oM(e,{rowNode:t,column:s}){var i;if(t=t.pinnedSibling,!!t)return Lv((i=e.editModelSvc)==null?void 0:i.getEdit({rowNode:t,column:s}))}var WK=class extends ${constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){var n;const{cellCtrl:e,editSvc:t,beans:s}=this;if(t!=null&&t.isBatchEditing()&&t.isEditing()){const o=sM(s,e)||nM(s,e)||oM(s,e);this.applyBatchingStyle(o)}else this.applyBatchingStyle(!1);const i=!!((n=this.editModelSvc)!=null&&n.getCellValidationModel().hasCellValidation(this.cellCtrl));this.cellComp.toggleCss("ag-cell-editing-error",i)}applyBatchingStyle(e){var t;this.cellComp.toggleCss("ag-cell-editing",e??!1),this.cellComp.toggleCss("ag-cell-batch-edit",(e&&((t=this.editSvc)==null?void 0:t.isBatchEditing()))??!1)}},$K=class extends ${constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){var r;const{rowCtrl:e,editModelSvc:t,beans:s}=this;let i=e.rowNode,n=t==null?void 0:t.getEditRow(i);const o=(r=this.editModelSvc)==null?void 0:r.getRowValidationModel().hasRowValidation({rowNode:i});if(!n&&i.pinnedSibling&&(i=i.pinnedSibling,n=t==null?void 0:t.getEditRow(i)),n){const a=Array.from(n.keys()).some(l=>{const c={rowNode:i,column:l};return sM(s,c,!0)||nM(s,c)||oM(s,c)});this.applyStyle(o,a);return}this.applyStyle(o)}applyStyle(e=!1,t=!1){var n,o;const s=((n=this.editSvc)==null?void 0:n.isBatchEditing())??!1,i=this.gos.get("editType")==="fullRow";(o=this.rowCtrl)==null||o.forEachGui(void 0,({rowComp:r})=>{r.toggleCss("ag-row-editing",i&&t),r.toggleCss("ag-row-batch-edit",i&&t&&s),r.toggleCss("ag-row-inline-editing",t),r.toggleCss("ag-row-not-inline-editing",!t),r.toggleCss("ag-row-editing-invalid",i&&t&&e)})}},UK=({rowModel:e,pinnedRowModel:t,editModelSvc:s},i)=>{const n=new Set;e.forEachNode(o=>i.has(o)&&n.add(o)),t==null||t.forEachPinnedRow("top",o=>i.has(o)&&n.add(o)),t==null||t.forEachPinnedRow("bottom",o=>i.has(o)&&n.add(o));for(const o of i)n.has(o)||s.removeEdits({rowNode:o});return n},jK=({editModelSvc:e},t,s)=>{var i;for(const n of t)(i=e==null?void 0:e.getEditRow(n))==null||i.forEach((o,r)=>!s.has(r)&&e.removeEdits({rowNode:n,column:r}))},KK=e=>()=>{const t=new Set(e.colModel.getCols()),s=e.editModelSvc.getEditMap(!0),i=new Set(s.keys());jK(e,UK(e,i),t)},qK=new Set(["undo","redo","paste","bulk","rangeSvc"]),YK=new Set(["ui","api"]),rM={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"},XK=new Set(Object.keys(rM)),QK=new Set(["paste","rangeSvc","renderer","cellClear","redo","undo"]),im={cancel:!0,source:"api"},JK={cancel:!1,source:"api"},xd={checkSiblings:!0},Gu={force:!0,suppressFlash:!0},ZK=class extends ${constructor(){super(...arguments),this.beanName="editSvc",this.batch=!1,this.stopping=!1,this.committing=!1}postConstruct(){const{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener("editType",({currentValue:i})=>{this.stopEditing(void 0,im),this.createStrategy(i)});const t=KK(e),s=()=>{const i=this.model.getCellValidationModel().getCellValidationMap().size>0,n=this.model.getRowValidationModel().getRowValidationMap().size>0;return i||n?this.stopEditing(void 0,im):this.isEditing()&&(this.isBatchEditing()?eh(e,this.model.getEditPositions()):this.stopEditing(void 0,JK)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowExpansionStateChanged:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:s,filterChanged:s,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(e){e?(this.batch=!0,this.stopEditing(void 0,im)):(this.stopEditing(void 0,im),this.batch=!1)}createStrategy(e){const{beans:t,gos:s,strategy:i}=this,n=mE(s,e);if(i){if(i.beanName===n)return i;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(t.registry.createDynamicBean(n,!0))}destroyStrategy(){this.strategy&&(this.strategy.destroy(),this.strategy=this.destroyBean(this.strategy))}shouldStartEditing(e,t,s,i="ui"){const n=GK(this.beans,e,t,s,i);return n&&(this.strategy??(this.strategy=this.createStrategy())),n}shouldStopEditing(e,t,s="ui"){var i;return((i=this.strategy)==null?void 0:i.shouldStop(e,t,s))??null}shouldCancelEditing(e,t,s="ui"){var i;return((i=this.strategy)==null?void 0:i.shouldCancel(e,t,s))??null}validateEdit(){return f6(this.beans)}isEditing(e,t){return this.model.hasEdits(e,t??xd)}isRowEditing(e,t){return(e&&this.model.hasRowEdits(e,t))??!1}startEditing(e,t){const{startedEdit:s=!0,event:i=null,source:n="ui",ignoreEventKey:o=!1,silent:r}=t;if(this.strategy??(this.strategy=this.createStrategy()),!this.isCellEditable(e,"api"))return;const a=Ut(this.beans,e);if(a&&!a.comp){a.onCompAttachedFuncs.push(()=>this.startEditing(e,t));return}const l=this.shouldStartEditing(e,i,s,n);if(l===!1&&n!=="api"){this.isEditing(e)&&this.stopEditing();return}!this.batch&&this.shouldStopEditing(e,void 0,n)&&!t.continueEditing&&this.stopEditing(void 0,{source:n}),l&&this.isBatchEditing()&&this.dispatchBatchEvent("batchEditingStarted",new Map),this.strategy.start({position:e,event:i,source:n,ignoreEventKey:o,startedEdit:s,silent:r})}stopEditing(e,t){var v,C,b;const{event:s,cancel:i,source:n="ui",forceCancel:o,forceStop:r}=t||{},{beans:a,model:l}=this;if(XK.has(n)&&this.isBatchEditing())return this.bulkRefresh(e),!1;const c=this.committing?rM[n]:n;if(!(this.committing||this.isEditing(e)||this.isBatchEditing()&&l.hasEdits(e,xd))||!this.strategy||this.stopping)return!1;this.stopping=!0;const h=Ut(a,e);h&&(h.onEditorAttachedFuncs=[]);let u=l.getEditMap(!0),f=!1;const p=!i&&(!!this.shouldStopEditing(e,s,c)||this.committing&&!this.batch)||(r??!1),m=i&&!!this.shouldCancelEditing(e,s,c)||(o??!1);if(p||m){Hl(a,{persist:!0,isCancelling:m||i,isStopping:p});const y=l.getEditMap(),S=this.processEdits(y,i,n);(v=this.strategy)==null||v.stop(i,s);for(const R of S)l.clearEditValue(R);this.bulkRefresh(void 0,u);for(const R of l.getEditPositions(y)){const A=Ut(a,R),F=Br(R);A==null||A.refreshCell({force:!0,suppressFlash:!F})}u=y,f||(f=p)}else if(s instanceof KeyboardEvent&&this.batch&&((C=this.strategy)!=null&&C.midBatchInputsAllowed(e))&&this.isEditing(e,{withOpenEditor:!0})){const{key:y}=s,S=y===H.ENTER,R=y===H.ESCAPE,A=y===H.TAB;(S||A||R)&&(S||A?Hl(a,{persist:!0}):R&&this.revertSingleCellEdit(h),this.isBatchEditing()?(b=this.strategy)==null||b.cleanupEditors():eh(a,l.getEditPositions(),{event:s,cancel:R}),s.preventDefault(),this.bulkRefresh(e,u,{suppressFlash:!0}),u=l.getEditMap())}else Hl(a,{persist:!0}),u=l.getEditMap();return f&&e&&this.model.removeEdits(e),this.navigateAfterEdit(t,h==null?void 0:h.cellPosition),tS(a),this.model.hasEdits()||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap()),this.bulkRefresh(),m&&this.beans.rowRenderer.refreshRows({rowNodes:Array.from(u.keys())}),this.isBatchEditing()&&(this.beans.rowRenderer.refreshRows({suppressFlash:!0,force:!0}),f&&p&&this.dispatchBatchEvent("batchEditingStopped",u)),this.stopping=!1,f}navigateAfterEdit(e,t){var c;if(!e||!t)return;const{event:s,suppressNavigateAfterEdit:i}=e;if(!(s instanceof KeyboardEvent)||i)return;const{key:o,shiftKey:r}=s,a=this.gos.get("enterNavigatesVerticallyAfterEdit");if(o!==H.ENTER||!a)return;const l=r?H.UP:H.DOWN;(c=this.beans.navigation)==null||c.navigateToNextCell(null,l,t,!1)}processEdits(e,t=!1,s){const i=Array.from(e.keys()),n=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,o=[];for(const r of i){const a=e.get(r);for(const l of a.keys()){const c=a.get(l),d={rowNode:r,column:l},h=Br(c);!t&&h&&!n&&(this.setNodeDataValue(r,l,c.pendingValue,void 0,s)||o.push(d))}}return o}setNodeDataValue(e,t,s,i,n="edit"){const{beans:o}=this,r=Ut(o,{rowNode:e,column:t}),a=YK.has(n)?"edit":n;r&&(r.suppressRefreshCell=!0),this.commitNextEdit();const l=e.setDataValue(t,s,a);return r&&(r.suppressRefreshCell=!1),i&&(r==null||r.refreshCell(Gu)),l}setEditMap(e,t){var i;this.strategy??(this.strategy=this.createStrategy()),(i=this.strategy)==null||i.setEditMap(e,t),this.bulkRefresh();let s=Gu;t!=null&&t.forceRefreshOfEditCellsOnly&&(s={...eq(e),...Gu}),this.beans.rowRenderer.refreshCells(s)}dispatchEditValuesChanged({rowNode:e,column:t},s={}){if(!e||!t||!s)return;const{pendingValue:i,sourceValue:n}=s,{rowIndex:o,rowPinned:r,data:a}=e;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:e,rowIndex:o,rowPinned:r,column:t,source:"api",data:a,newValue:i,oldValue:n,value:i,colDef:t.getColDef()})}bulkRefresh(e={},t,s={}){var a;const{beans:i,gos:n}=this,{editModelSvc:o,rowModel:r}=i;rs(n)&&(e.rowNode&&e.column?this.refCell(e,this.model.getEdit(e),s):t&&((a=o==null?void 0:o.getEditMap(!1))==null||a.forEach((l,c)=>{for(const d of l.keys())this.refCell({rowNode:c,column:d},l.get(d),s)})))}refCell({rowNode:e,column:t},s,i={}){var h,u,f;const{beans:n,gos:o}=this,r=new Set([e]),a=new Set,l=e.pinnedSibling;l&&r.add(l);const c=e.sibling;c&&a.add(c);let d=e.parent;for(;d;)(h=d.sibling)!=null&&h.footer&&o.get("groupTotalRow")||!d.parent&&d.sibling&&o.get("grandTotalRow")?a.add(d.sibling):a.add(d),d=d.parent;for(const p of r)this.dispatchEditValuesChanged({rowNode:p,column:t},s);for(const p of r)(u=Ut(n,{rowNode:p,column:t}))==null||u.refreshCell(i);for(const p of a)(f=Ut(n,{rowNode:p,column:t}))==null||f.refreshCell(i)}stopAllEditing(e=!1,t="ui"){this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e,t="ui"){const{rowNode:s}=e,{gos:i,beans:n}=this;if(s.group){if(i.get("treeData")){if(!s.data&&!i.get("enableGroupEdit"))return!1}else if(!i.get("enableGroupEdit"))return!1}const o=mE(i)==="fullRow"?zK(n,e,t):aS(n,e,t);return o&&(this.strategy??(this.strategy=this.createStrategy())),o}cellEditingInvalidCommitBlocks(){return this.gos.get("invalidEditValueMode")==="block"}checkNavWithValidation(e,t,s=!0){var i,n,o,r;if(this.hasValidationErrors(e)){const a=Ut(this.beans,e);return this.cellEditingInvalidCommitBlocks()?((i=t==null?void 0:t.preventDefault)==null||i.call(t),s&&(!(a!=null&&a.hasBrowserFocus())&&(a==null||a.focusCell()),(r=(o=(n=a==null?void 0:a.comp)==null?void 0:n.getCellEditor())==null?void 0:o.focusIn)==null||r.call(o)),"block-stop"):(a&&this.revertSingleCellEdit(a),"revert-continue")}return"continue"}revertSingleCellEdit(e,t=!1){var i,n,o,r;const s=Ut(this.beans,e);(i=s==null?void 0:s.comp)!=null&&i.getCellEditor()&&(eh(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),vu(this.beans,e,{silent:!0}),nd(this.beans),s==null||s.refreshCell(Gu),t&&(s==null||s.focusCell(),(r=(o=(n=s==null?void 0:s.comp)==null?void 0:n.getCellEditor())==null?void 0:o.focusIn)==null||r.call(o)))}hasValidationErrors(e){var i;nd(this.beans);const t=Ut(this.beans,e);t&&(t.refreshCell(Gu),(i=t.rowCtrl.rowEditStyleFeature)==null||i.applyRowStyles());let s=!1;return e!=null&&e.rowNode?(s||(s=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode})),e.column&&(s||(s=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column})))):(s||(s=this.model.getCellValidationModel().getCellValidationMap().size>0),s||(s=this.model.getRowValidationModel().getRowValidationMap().size>0)),s}moveToNextCell(e,t,s,i="ui"){var a;let n;const o=this.isEditing(),r=o&&this.checkNavWithValidation(void 0,s)==="block-stop";return e instanceof th&&o&&(n=(a=this.strategy)==null?void 0:a.moveToNextEditingCell(e,t,s,i,r)),n===null||(n=n||!!this.beans.focusSvc.focusedHeader,n===!1&&!r&&this.stopEditing()),n}getCellDataValue({rowNode:e,column:t},s=!0){if(!e||!t)return;let i=this.model.getEdit({rowNode:e,column:t});const n=e.pinnedSibling;if(n){const r=this.model.getEdit({rowNode:n,column:t});r&&(i=r)}const o=s?(i==null?void 0:i.editorValue)??(i==null?void 0:i.pendingValue):i==null?void 0:i.pendingValue;return o===xn||!i?(i==null?void 0:i.sourceValue)??this.valueSvc.getValue(t,e,!1,"api"):o}addStopEditingWhenGridLosesFocus(e){l6(this,this.beans,e)}createPopupEditorWrapper(e){return new BK(e)}commitNextEdit(){this.committing=!0}setDataValue(e,t,s){var i;try{if((!this.isEditing()||this.committing)&&!QK.has(s))return;const{beans:n}=this;this.strategy??(this.strategy=this.createStrategy());const o=this.isBatchEditing()?"ui":this.committing?s??"api":"api";if(!s||qK.has(s))return Qm(n,e,t,s,void 0,{persist:!0}),this.setNodeDataValue(e.rowNode,e.column,t,!0,s);const r=this.model.getEdit(e);if(r){if(r.pendingValue===t)return!1;if(r.sourceValue!==t)return Qm(n,e,t,s,void 0,{persist:!0}),this.stopEditing(e,{source:o,suppressNavigateAfterEdit:!0}),!0;if(r.sourceValue===t)return(i=n.editModelSvc)==null||i.removeEdits(e),this.dispatchEditValuesChanged(e,{...r,pendingValue:t}),!0}return Qm(n,e,t,s,void 0,{persist:!0}),this.stopEditing(e,{source:o,suppressNavigateAfterEdit:!0}),!0}finally{this.committing=!1}}handleColDefChanged(e){h6(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){if(!this.batch||!this.model.hasRowEdits(e.rowNode,xd))return;const{rowNode:i,column:n}=e,{compDetails:o,valueToDisplay:r}=t;if(o){const{params:l}=o;return l.data=this.model.getEditRowDataValue(i,xd),{compDetails:o}}const a=this.model.getEditRow(e.rowNode,xd);if(r!==void 0&&(a!=null&&a.has(n)))return{valueToDisplay:this.valueSvc.getValue(n,i)}}cleanupEditors(){var e;(e=this.strategy)==null||e.cleanupEditors()}dispatchCellEvent(e,t,s,i){var n;(n=this.strategy)==null||n.dispatchCellEvent(e,t,s,i)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return Be(this.gos,{type:e,...e==="batchEditingStopped"?{changes:this.toEventChangeList(t)}:{}})}toEventChangeList(e){return this.model.getEditPositions(e).map(t=>({rowIndex:t.rowNode.rowIndex,rowPinned:t.rowNode.rowPinned,columnId:t.column.getColId(),newValue:t.pendingValue,oldValue:t.sourceValue}))}applyBulkEdit({rowNode:e,column:t},s){var c,d;if(!s||s.length===0)return;const{beans:i,rangeSvc:n,valueSvc:o}=this;Hl(i,{persist:!0});const r=this.model.getEditMap(!0),a=(d=(c=r.get(e))==null?void 0:c.get(t))==null?void 0:d.pendingValue;this.batch||this.eventSvc.dispatchEvent({type:"bulkEditingStarted"}),s.forEach(h=>{if(n==null||n.forEachRowInRange(h,u=>{const f=Zr(i,u);if(f===void 0)return;const p=r.get(f)??new Map;for(const m of h.columns)if(m&&this.isCellEditable({rowNode:f,column:m},"api")){const v=o.getValue(m,f,!0,"api");let C=o.parseValue(m,f??null,a,v);Number.isNaN(C)&&(C=null),p.set(m,{editorValue:void 0,pendingValue:C,sourceValue:v,state:"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}p.size>0&&r.set(f,p)}),this.setEditMap(r),this.batch){this.cleanupEditors(),tS(i),this.bulkRefresh();return}this.commitNextEdit(),this.stopEditing(void 0,{source:"bulk"}),this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(r)})}),this.bulkRefresh();const l=Ut(i,{rowNode:e,column:t});l&&l.focusCell(!0)}createCellStyleFeature(e,t){return new WK(e,t)}createRowStyleFeature(e,t){return new $K(e,t)}setEditingCells(e,t){const{beans:s}=this,{colModel:i,valueSvc:n}=s,o=new Map;for(let{colId:r,column:a,colKey:l,rowIndex:c,rowPinned:d,newValue:h,state:u}of e){const f=r?i.getCol(r):l?i.getCol(l):a;if(!f)continue;const p=Zr(s,{rowIndex:c,rowPinned:d});if(!p)continue;const m=n.getValue(f,p,!0,"api");if(!(t!=null&&t.forceRefreshOfEditCellsOnly)&&!Br({pendingValue:h,sourceValue:m})&&u!=="editing")continue;let v=o.get(p);v||(v=new Map,o.set(p,v)),h===void 0&&(h=xn),v.set(f,{editorValue:void 0,pendingValue:h,sourceValue:m,state:u??"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}this.setEditMap(o,t)}onCellFocused(e){var o;const t=Ut(this.beans,e);if(!t||!this.isEditing(t,xd))return;const s=this.model.getEdit(t);if(!s||!Br(s))return;const n=this.getLocaleTextFunc()("ariaPendingChange","Pending Change");(o=this.beans.ariaAnnounce)==null||o.announceValue(n,"pendingChange")}allowedFocusTargetOnValidation(e){return Ut(this.beans,e)}};function eq(e){return{rowNodes:e?Array.from(e.keys()):void 0,columns:e?[...new Set(Array.from(e.values()).flatMap(t=>Array.from(t.keys())))]:void 0}}function mE(e,t){return t??e.get("editType")??"singleCell"}var aM=class extends ${postConstruct(){var e,t;this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:(e=this.onCellFocusChanged)==null?void 0:e.bind(this),cellFocusCleared:(t=this.onCellFocusChanged)==null?void 0:t.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){let t;const s=e.previousParams,{editSvc:i,beans:n}=this,o=e.type==="cellFocused"?e.sourceEvent:null;s&&(t=Ut(n,s));const{gos:r,editModelSvc:a}=n,l=e.type==="cellFocusCleared";if(i.isEditing(void 0,{withOpenEditor:!0})){const{column:c,rowIndex:d,rowPinned:h}=e,u={column:c,rowNode:Zr(n,{rowIndex:d,rowPinned:h})},f=r.get("invalidEditValueMode")==="block";if(f)return;const p=!f,m=!!(a!=null&&a.getCellValidationModel().hasCellValidation(u)),v=p&&m;(s||l?i.stopEditing(void 0,{cancel:v,source:l&&p?"api":void 0,event:o}):!0)||(i.isBatchEditing()?i.cleanupEditors():i.stopEditing(void 0,{source:"api"}))}t==null||t.refreshCell({suppressFlash:!0,force:!0})}stop(e,t){var n,o;const s=this.model.getEditPositions(),i={all:[],pass:[],fail:[]};for(const r of s){i.all.push(r);const a=this.model.getCellValidationModel().getCellValidation(r);if((((n=a==null?void 0:a.errorMessages)==null?void 0:n.length)??0)>0){i.fail.push(r);continue}i.pass.push(r)}if(e)for(const r of s)Mv(this.beans,r,{cancel:e}),this.model.stop(r);else{const r=this.processValidationResults(i);if(r.destroy.length>0)for(const a of r.destroy)Mv(this.beans,a,{event:t,cancel:e}),this.model.stop(a);if(r.keep.length>0)for(const a of r.keep){const l=Ut(this.beans,a);(o=this.editSvc)!=null&&o.cellEditingInvalidCommitBlocks()||l&&this.editSvc.revertSingleCellEdit(l)}}return!0}cleanupEditors({rowNode:e}={},t){Hl(this.beans,{persist:!1});const s=this.model.getEditPositions(),i=[];if(e)for(const n of s)n.rowNode!==e&&i.push(n);else for(const n of s)i.push(n);eh(this.beans,i),tS(this.beans,t)}setFocusOutOnEditor(e){var t,s,i;(i=(s=(t=e.comp)==null?void 0:t.getCellEditor())==null?void 0:s.focusOut)==null||i.call(s)}setFocusInOnEditor(e){const t=e.comp,s=t==null?void 0:t.getCellEditor();if(s!=null&&s.focusIn)s.focusIn();else{const i=this.beans.gos.get("editType")==="fullRow";e.focusCell(i),e.onEditorAttachedFuncs.push(()=>{var n,o;return(o=(n=t==null?void 0:t.getCellEditor())==null?void 0:n.focusIn)==null?void 0:o.call(n)})}}setupEditors(e){const{event:t,ignoreEventKey:s=!1,startedEdit:i,position:n,cells:o=this.model.getEditPositions()}=e,r=t instanceof KeyboardEvent&&!s&&t.key||void 0;d6(this.beans,o,n,r,t,i)}dispatchCellEvent(e,t,s,i){const n=Ut(this.beans,e);n&&this.eventSvc.dispatchEvent({...n.createEvent(t??null,s),...i})}dispatchRowEvent(e,t,s){if(s)return;const i=k0(this.beans,e);i&&this.eventSvc.dispatchEvent(i.createRowEvent(t))}shouldStop(e,t,s="ui"){const i=this.editSvc.isBatchEditing();return i&&s==="api"?!0:i&&(s==="ui"||s==="edit")?!1:s==="api"?!0:t instanceof KeyboardEvent&&!i?t.key===H.ENTER:null}shouldCancel(e,t,s="ui"){const i=this.editSvc.isBatchEditing();return!!(t instanceof KeyboardEvent&&!i&&t.key===H.ESCAPE||i&&s==="api"||s==="api")}setEditMap(e,t){var i;t!=null&&t.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:"api"});const s=[];if(e.forEach((n,o)=>{n.forEach((r,a)=>{r.state==="editing"&&s.push({...r,rowNode:o,column:a})})}),t!=null&&t.update&&(e=new Map([...this.model.getEditMap(),...e])),(i=this.model)==null||i.setEditMap(e),s.length>0){const n=s.at(-1),o=n.pendingValue===xn?void 0:n.pendingValue;this.start({position:n,event:new KeyboardEvent("keydown",{key:o}),source:"api"});const r=Ut(this.beans,n);r&&this.setFocusInOnEditor(r)}}destroy(){this.cleanupEditors(),super.destroy()}},tq=class extends aM{constructor(){super(...arguments),this.beanName="fullRow",this.startedRows=[]}shouldStop(e,t,s="ui"){const{rowNode:i}=e||{};if(!k0(this.beans,{rowNode:this.rowNode}))return!0;const o=super.shouldStop({rowNode:this.rowNode},t,s);return o!==null?o:this.rowNode?i!==this.rowNode:!1}midBatchInputsAllowed({rowNode:e}){return e?this.model.hasEdits({rowNode:e}):!1}clearEdits(e){this.model.clearEditValue(e)}start(e){const{position:t,silent:s,startedEdit:i,event:n,ignoreEventKey:o}=e,{rowNode:r}=t;this.rowNode!==r&&super.cleanupEditors(t);const a=this.beans.visibleCols.allCols,l=[],c=[];for(const d of a)d.isCellEditable(r)&&c.push(d);if(c.length!=0){this.dispatchRowEvent({rowNode:r},"rowEditingStarted",s),this.startedRows.push(r);for(const d of c){const h={rowNode:r,column:d};l.push(h),this.model.hasEdits(h)||this.model.start(h)}this.rowNode=r,this.setupEditors({cells:l,position:t,startedEdit:i,event:n,ignoreEventKey:o})}}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){var n;const{rowNode:s}=this;if(s&&!this.model.hasRowEdits(s))return!1;const i=[];if(e||this.model.getEditMap().forEach((o,r)=>{if(!(!o||o.size===0)){for(const a of o.values())if(Br(a)){i.push(r);break}}}),nd(this.beans),!e&&((n=this.editSvc)==null?void 0:n.checkNavWithValidation({rowNode:s}))==="block-stop")return!1;super.stop(e,t);for(const o of i)this.dispatchRowEvent({rowNode:o},"rowValueChanged");return this.cleanupEditors({rowNode:s},!0),this.rowNode=void 0,!0}onCellFocusChanged(e){const{rowIndex:t}=e,s=e.previousParams;if((s==null?void 0:s.rowIndex)===t||e.sourceEvent instanceof KeyboardEvent)return;const i=Ut(this.beans,s);this.gos.get("invalidEditValueMode")==="block"&&i&&(this.model.getCellValidationModel().getCellValidation(i)||this.model.getRowValidationModel().getRowValidation(i))||super.onCellFocusChanged(e)}cleanupEditors(e={},t){super.cleanupEditors(e,t);for(const s of this.startedRows)this.dispatchRowEvent({rowNode:s},"rowEditingStopped");this.startedRows.length=0}moveToNextEditingCell(e,t,s,i="ui",n=!1){var u,f,p,m;const o=e.cellPosition;let r;this.model.suspend(!0);try{r=(u=this.beans.navigation)==null?void 0:u.findNextCellToFocusOn(o,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(r===!1)return null;if(r==null)return!1;const a=r.cellPosition,l=e.isCellEditable(),c=r.isCellEditable(),d=a&&o.rowIndex===a.rowIndex&&o.rowPinned===a.rowPinned;l&&this.setFocusOutOnEditor(e),this.restoreEditors();const h=this.gos.get("suppressStartEditOnTab");return c&&!n?h?r.focusCell(!0,s):((f=r.comp)!=null&&f.getCellEditor()||vu(this.beans,r,{event:s,cellStartedEdit:!0}),this.setFocusInOnEditor(r),r.focusCell(!1,s)):(c&&n&&this.setFocusInOnEditor(r),r.focusCell(!0,s)),!d&&!n&&((p=this.editSvc)==null||p.stopEditing({rowNode:e.rowNode},{event:s}),this.cleanupEditors(r,!0),h?r.focusCell(!0,s):this.editSvc.startEditing(r,{startedEdit:!0,event:s,source:i,ignoreEventKey:!0})),(m=e.rowCtrl)==null||m.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach((e,t)=>e.forEach(({state:s},i)=>{var o;if(s!=="editing")return;const n=Ut(this.beans,{rowNode:t,column:i});n&&!((o=n.comp)!=null&&o.getCellEditor())&&vu(this.beans,n,{silent:!0})}))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}},sq=class extends aM{constructor(){super(...arguments),this.beanName="singleCell"}shouldStop(e,t,s="ui"){const i=super.shouldStop(e,t,s);if(i!==null)return i;const{rowNode:n,column:o}=e||{};return(!this.rowNode||!this.column)&&n&&o?null:this.rowNode!==n||this.column!==o}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e){const{position:t,startedEdit:s,event:i,ignoreEventKey:n}=e;(this.rowNode!==t.rowNode||this.column!==t.column)&&super.cleanupEditors(),this.rowNode=t.rowNode,this.column=t.column,this.model.start(t),this.setupEditors({cells:[t],position:t,startedEdit:s,event:i,ignoreEventKey:n})}dispatchRowEvent(e,t,s){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){return super.stop(e,t),this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){const{colModel:t,editSvc:s}=this.beans,{rowIndex:i,column:n,rowPinned:o}=e,r=Zr(this.beans,{rowIndex:i,rowPinned:o}),a=eS(n),l=t.getCol(a),c=e.previousParams;if(c){const d=eS(c.column);if((c==null?void 0:c.rowIndex)===i&&d===a&&(c==null?void 0:c.rowPinned)===o)return}s!=null&&s.isEditing({rowNode:r,column:l},{withOpenEditor:!0})&&e.type==="cellFocused"||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,s,i="ui",n=!1){var p,m,v,C,b,y;const o=this.beans.focusSvc.getFocusedCell();o&&(e=Bd(this.beans,o)??e);const r=e.cellPosition;let a;const l=this.beans.gos.get("editType")==="fullRow";l&&this.model.suspend(!0),n||(e.eGui.focus(),(m=this.editSvc)==null||m.stopEditing(e,{source:(p=this.editSvc)!=null&&p.isBatchEditing()?"ui":"api",event:s}));try{a=(v=this.beans.navigation)==null?void 0:v.findNextCellToFocusOn(r,{backwards:t,startEditing:!0})}finally{l&&this.model.suspend(!1)}if(a===!1)return null;if(a==null)return!1;const c=a.cellPosition,d=e.isCellEditable(),h=a.isCellEditable(),u=c&&r.rowIndex===c.rowIndex&&r.rowPinned===c.rowPinned;d&&!n&&this.setFocusOutOnEditor(e);const f=this.gos.get("suppressStartEditOnTab");if(!u&&!n&&(super.cleanupEditors(a,!0),f?a.focusCell(!0,s):this.editSvc.startEditing(a,{startedEdit:!0,event:s,source:i,ignoreEventKey:!0})),h&&!n){if(a.focusCell(!1,s),f)a.focusCell(!0,s);else if(!((C=a.comp)!=null&&C.getCellEditor())){const S=(b=this.editSvc)==null?void 0:b.isEditing(a,{withOpenEditor:!0});vu(this.beans,a,{event:s,cellStartedEdit:!0,silent:S}),this.setFocusInOnEditor(a),this.cleanupEditors(a)}}else h&&n&&this.setFocusInOnEditor(a),a.focusCell(!0,s);return(y=e.rowCtrl)==null||y.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},Sl={moduleName:"EditCore",version:fe,beans:[a6,ZK],apiFunctions:{getEditingCells:_K,getEditRowValues:DK,getCellEditorInstances:c6,startEditingCell:IK,stopEditing:MK,isEditing:kK,validateEdit:LK},dynamicBeans:{singleCell:sq,fullRow:tq},dependsOn:[_C,Z_],css:[aK]},iq={moduleName:"UndoRedoEdit",version:fe,beans:[rK],apiFunctions:{undoCellEditing:PK,redoCellEditing:TK,getCurrentUndoSize:OK,getCurrentRedoSize:NK},dependsOn:[Sl]},nq={moduleName:"TextEditor",version:fe,userComponents:{agCellEditor:pE,agTextCellEditor:pE},dependsOn:[Sl]},oq={moduleName:"NumberEditor",version:fe,userComponents:{agNumberCellEditor:{classImp:bK}},dependsOn:[Sl]},rq={moduleName:"DateEditor",version:fe,userComponents:{agDateCellEditor:uK,agDateStringCellEditor:pK},dependsOn:[Sl]},aq={moduleName:"CheckboxEditor",version:fe,userComponents:{agCheckboxCellEditor:cK},dependsOn:[Sl]},lq={moduleName:"SelectEditor",version:fe,userComponents:{agSelectCellEditor:SK},dependsOn:[Sl]},cq={moduleName:"LargeTextEditor",version:fe,userComponents:{agLargeTextCellEditor:vK},dependsOn:[Sl]},dq={moduleName:"CustomEditor",version:fe,dependsOn:[Sl]},hq=class extends ${constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,Xd(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){const t=this.columns;t!=null&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),yG(e))}createColumns(e,t){var u,f;const s=()=>{var p;xv(this.beans,(p=this.columns)==null?void 0:p.tree),this.columns=null},i=e.treeDepth,o=(((u=this.columns)==null?void 0:u.treeDepth)??-1)==i,r=this.generateSelectionCols();if(bG(r,((f=this.columns)==null?void 0:f.list)??[])&&o)return;s();const{colGroupSvc:l}=this.beans,c=(l==null?void 0:l.findDepth(e.tree))??0,d=(l==null?void 0:l.balanceTreeForAutoCols(r,c))??[];this.columns={list:r,tree:d,treeDepth:c,map:{}},t(p=>{if(!p)return null;const m=p.filter(v=>!na(v));return[...r,...m]})}updateColumns(e){var s;const t=Xd(e.source);for(const i of((s=this.columns)==null?void 0:s.list)??[]){const n=this.createSelectionColDef(e.currentValue);i.setColDef(n,null,t),Zn(this.beans,{state:[{...n,colId:i.getColId()}]},t)}}getColumn(e){var t;return((t=this.columns)==null?void 0:t.list.find(s=>yg(s,e)))??null}getColumns(){var e;return((e=this.columns)==null?void 0:e.list)??null}isSelectionColumnEnabled(){var r,a;const{gos:e,beans:t}=this,s=e.get("rowSelection");if(typeof s!="object"||!$c(e))return!1;const i=(((a=(r=t.autoColSvc)==null?void 0:r.getColumns())==null?void 0:a.length)??0)>0;if(s.checkboxLocation==="autoGroupColumn"&&i)return!1;const n=!!Yd(s),o=Wm(s);return n||o}createSelectionColDef(e){const{gos:t}=this,s=e??t.get("selectionColumnDef"),i=t.get("enableRtl"),{rowSpan:n,spanRows:o,...r}=s??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:i?"right":"left",comparator(a,l,c,d){const h=c.isSelected(),u=d.isSelected();return h===u?0:h?1:-1},editable:!1,suppressFillHandle:!0,pinned:null,...r,colId:tD,chartDataType:"excluded"}}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);const s=new pd(e,null,t,!1);return this.createBean(s),[s]}onSelectionOptionsChanged(e,t,s){const i=t&&typeof t!="string"?Yd(t):void 0,n=e&&typeof e!="string"?Yd(e):void 0,o=i!==n,r=t&&typeof t!="string"?Wm(t):void 0,a=e&&typeof e!="string"?Wm(e):void 0,l=r!==a,c=bv(e),d=bv(t);(o||l||c!==d)&&this.beans.colModel.refreshAll(s)}destroy(){var e;xv(this.beans,(e=this.columns)==null?void 0:e.tree),super.destroy()}refreshVisibility(e,t,s){var l,c;if(!((l=this.columns)!=null&&l.list.length))return;const i=e.length+t.length+s.length;if(i===0)return;const n=this.columns.list[0];if(!n.isVisible())return;const o=()=>{let d;switch(n.pinned){case"left":case!0:d=e;break;case"right":d=s;break;default:d=t}d&&to(d,n)};(((c=this.beans.rowNumbersSvc)==null?void 0:c.getColumn(sD))?2:1)===i&&o()}};function uq(e,t){var r;if(!t.nodes.every(a=>a.rowPinned&&!_p(a)?(oe(59),!1):a.id===void 0?(oe(60),!1):!0))return;const{nodes:i,source:n,newValue:o}=t;(r=e.selectionSvc)==null||r.setNodesSelected({nodes:i,source:n??"api",newValue:o})}function gq(e,t,s="apiSelectAll"){var i;(i=e.selectionSvc)==null||i.selectAllRowNodes({source:s,selectAll:t})}function fq(e,t,s="apiSelectAll"){var i;(i=e.selectionSvc)==null||i.deselectAllRowNodes({source:s,selectAll:t})}function pq(e,t="apiSelectAllFiltered"){var s;(s=e.selectionSvc)==null||s.selectAllRowNodes({source:t,selectAll:"filtered"})}function mq(e,t="apiSelectAllFiltered"){var s;(s=e.selectionSvc)==null||s.deselectAllRowNodes({source:t,selectAll:"filtered"})}function vq(e,t="apiSelectAllCurrentPage"){var s;(s=e.selectionSvc)==null||s.selectAllRowNodes({source:t,selectAll:"currentPage"})}function Cq(e,t="apiSelectAllCurrentPage"){var s;(s=e.selectionSvc)==null||s.deselectAllRowNodes({source:t,selectAll:"currentPage"})}function wq(e){var t;return((t=e.selectionSvc)==null?void 0:t.getSelectedNodes())??[]}function bq(e){var t;return((t=e.selectionSvc)==null?void 0:t.getSelectedRows())??[]}var yq=class extends k${constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=yv(e),this.groupSelectsDescendants=Vg(e),this.groupSelectsFiltered=Sv(e)==="filteredDescendants",this.masterSelectsDetail=aR(e)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{const t=Vg(e),s=yv(e),i=Sv(e)==="filteredDescendants";this.masterSelectsDetail=aR(e)==="detail",(t!==this.groupSelectsDescendants||i!==this.groupSelectsFiltered||s!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=i,this.mode=s)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,s){if(this.isRowSelectionBlocked(t))return 0;const i=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,s);if(i==null)return 0;if(this.selectionCtx.selectAll=!1,"select"in i)return i.reset?this.resetNodes():this.selectRange(i.deselect,!1,s),this.selectRange(i.select,!0,s);{const n=i.checkFilteredNodes?cM(i.node):i.newValue;return this.setNodesSelected({nodes:[i.node],newValue:n,clearSelection:i.clearSelection,keepDescendants:i.keepDescendants,event:e,source:s})}}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:s,nodes:i,event:n,source:o,keepDescendants:r=!1}){var c;if(i.length===0)return 0;const{gos:a}=this;if(!$c(a)&&e)return oe(132),0;if(i.length>1&&!this.isMultiSelect())return oe(130),0;let l=0;for(let d=0;d<i.length;d++){const h=i[d],u=Rd(h);if(u.rowPinned&&!_p(u)){oe(59);continue}if(u.id===void 0){oe(60);continue}this.groupSelectsFiltered&&u.group&&!a.get("treeData")||this.selectRowNode(u,e,n,o)&&(this.detailSelection.delete(u.id),l++),this.groupSelectsDescendants&&((c=u.childrenAfterGroup)!=null&&c.length)&&(l+=this.selectChildren(u,e,o))}return s||(i.length===1&&o==="api"&&this.selectionCtx.setRoot(Rd(i[0])),e&&(t||!this.isMultiSelect())&&(l+=this.clearOtherNodes(Rd(i[0]),r,o)),l>0&&(this.updateGroupsFromChildrenSelections(o),this.dispatchSelectionChanged(o))),l}selectRange(e,t,s){let i=0;return e.forEach(n=>{const o=Rd(n);if(o.group&&this.groupSelectsDescendants)return;this.selectRowNode(o,t,void 0,s)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(s),this.dispatchSelectionChanged(s)),i}selectChildren(e,t,s){const i=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return i?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:s,nodes:i}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>t.data&&e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((s,i)=>{e(s)&&t.set(i,s)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:s,rowModel:i}=this.beans;if(!rs(s))return!1;const n=i.rootNode;if(!n)return!1;t||(t=new $g(!0,n),t.active=!1);let o=!1;return t.forEachChangedNodeDepthFirst(r=>{if(r!==n){const a=this.calculateSelectedFromChildren(r);o=this.selectRowNode(r,a===null?!1:a,void 0,e)||o}}),o}clearOtherNodes(e,t,s){const i=new Map;let n=0;return this.selectedNodes.forEach(o=>{const r=o.id==e.id;if((t?!xq(e,o):!0)&&!r){const l=this.selectedNodes.get(o.id);n+=this.setNodesSelected({nodes:[l],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:s}),this.groupSelectsDescendants&&o.parent&&i.set(o.parent.id,o.parent)}}),i.forEach(o=>{const r=this.calculateSelectedFromChildren(o);this.selectRowNode(o,r===null?!1:r,void 0,s)}),n}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new gl(this.beans);return t.id=e.id,t.data=e.data,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!rs(e))return;const s=t.getTopLevelNodes();if(s===null)return;const i=[];function n(o){for(let r=0,a=o.length;r<a;r++){const l=o[r];l.isSelected()?i.push(l):l.group&&l.childrenAfterGroup&&n(l.childrenAfterGroup)}}return n(s),i}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:e,selectAll:t}){const s=rs(this.gos);let i=!1;const n=o=>{const r=this.selectRowNode(Rd(o),!1,void 0,e);i||(i=r)};if(t==="currentPage"||t==="filtered"){if(!s){Pt(102);return}this.getNodesToSelect(t).forEach(n)}else this.selectedNodes.forEach(n),this.reset(e);if(this.selectionCtx.selectAll=!1,s&&this.groupSelectsDescendants){const o=this.updateGroupsFromChildrenSelections(e);i||(i=o)}i&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,s=0;return this.getNodesToSelect(e).forEach(i=>{this.groupSelectsDescendants&&i.group||(i.isSelected()?t++:i.selectable&&s++)}),{selectedCount:t,notSelectedCount:s}}getSelectAllState(e){const{selectedCount:t,notSelectedCount:s}=this.getSelectedCounts(e);return lM(t,s)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(t=>t.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[],s=n=>t.push(n);if(e==="currentPage")return this.forEachNodeOnPage(n=>{if(!n.group){s(n);return}if(!n.expanded&&!n.footer){const o=r=>{var a;s(r),(a=r.childrenAfterFilter)==null||a.forEach(o)};o(n);return}this.groupSelectsDescendants||s(n)}),t;const i=this.beans.rowModel;return e==="filtered"?(i.forEachNodeAfterFilter(s),t):(i.forEachNode(s),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:s}=this.beans,i=t.getFirstRow(),n=t.getLastRow();for(let o=i;o<=n;o++){const r=s.getRow(o);r&&e(r)}}selectAllRowNodes(e){const{gos:t,selectionCtx:s}=this;if(!$c(t)){oe(132);return}if(aG(t)&&!Gg(t)){oe(130);return}if(!this.canSelectAll())return;const{source:i,selectAll:n}=e;let o=!1;if(this.getNodesToSelect(n).forEach(r=>{const a=this.selectRowNode(Rd(r),!0,void 0,i);o||(o=a)}),s.selectAll=!0,rs(t)&&this.groupSelectsDescendants){const r=this.updateGroupsFromChildrenSelections(i);o||(o=r)}o&&this.dispatchSelectionChanged(i)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,s){if(e||(e=[]),!Array.isArray(e)){Pt(103);return}const i=new Set(e),n=[];this.beans.rowModel.forEachNode(o=>{i.has(o.id)&&n.push(o)}),s&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:n,source:t})}canSelectAll(){return rs(this.beans.gos)}updateSelectable(e){var l;const{gos:t,rowModel:s}=this.beans;if(!$c(t))return;const i="selectableChanged",n=e!==void 0,o=rs(t)&&this.groupSelectsDescendants,r=[],a=c=>{var h;if(n&&!c.group)return;if(o&&c.group){const u=((h=c.childrenAfterGroup)==null?void 0:h.some(f=>f.selectable))??!1;this.setRowSelectable(c,u,!0);return}!this.updateRowSelectable(c,!0)&&c.isSelected()&&r.push(c)};if(o){if(e===void 0){const c=s.rootNode;e=c?new $g(!1,c):void 0}e==null||e.forEachChangedNodeDepthFirst(a,!n,!n)}else s.forEachNode(a);r.length&&this.setNodesSelected({nodes:r,newValue:!1,source:i}),!n&&o&&((l=this.updateGroupsFromChildrenSelections)==null||l.call(this,i))}updateSelectableAfterGrouping(e){var t;this.updateSelectable(e),this.groupSelectsDescendants&&((t=this.updateGroupsFromChildrenSelections)!=null&&t.call(this,"rowGroupChanged",e))&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(e,t){var o,r;if(!this.masterSelectsDetail)return;const s=(r=(o=e.detailNode)==null?void 0:o.detailGridInfo)==null?void 0:r.api;if(!s)return;const i=Sq(s);if(e.isSelected()!==i&&this.selectRowNode(e,i,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!i){const a=this.detailSelection.get(e.id)??new Set;for(const l of s.getSelectedNodes())a.add(l.id);this.detailSelection.set(e.id,a)}}setDetailSelectionState(e,t,s){if(this.masterSelectsDetail){if(!Gg(t)){oe(269);return}switch(e.isSelected()){case!0:{s.selectAll();break}case!1:{s.deselectAll();break}case void 0:{const i=this.detailSelection.get(e.id);if(i){const n=[];for(const o of i){const r=s.getRowNode(o);r&&n.push(r)}s.setNodesSelected({nodes:n,newValue:!0,source:"masterDetail"})}break}}}}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function Rd(e){return _p(e)?e.pinnedSibling:e.footer?e.sibling:e}function Sq(e){let t=0,s=0;return e.forEachNode(i=>{i.isSelected()?t++:i.selectable&&s++}),lM(t,s)}function lM(e,t){if(e===0&&t===0)return!1;if(!(e>0&&t>0))return e>0}function xq(e,t){let s=t.parent;for(;s;){if(s===e)return!0;s=s.parent}return!1}function cM(e){var i;const t=e.isSelected()===!1,s=((i=e.childrenAfterFilter)==null?void 0:i.some(cM))??!1;return t||s}var Rq={moduleName:"SharedRowSelection",version:fe,beans:[hq],apiFunctions:{setNodesSelected:uq,selectAll:gq,deselectAll:fq,selectAllFiltered:pq,deselectAllFiltered:mq,selectAllOnCurrentPage:vq,deselectAllOnCurrentPage:Cq,getSelectedNodes:wq,getSelectedRows:bq}},Eq={moduleName:"RowSelection",version:fe,rowModels:["clientSide","infinite","viewport"],beans:[yq],dependsOn:[Rq]};function Aq(e){var t;(t=e.expansionSvc)==null||t.expandAll(!0)}function Fq(e){var t;(t=e.expansionSvc)==null||t.expandAll(!1)}function dM(e){var t;(t=e.rowModel)==null||t.onRowHeightChanged()}function hM(e){var t,s;if((t=e.rowAutoHeight)!=null&&t.active){oe(3);return}(s=e.rowModel)==null||s.resetRowHeights()}function Pq(e,t,s){var n,o;const i=T8(e);if(i){if(((n=e.rowGroupColsSvc)==null?void 0:n.columns.length)===0){if(t<0){Pt(238);return}i.setRowCount(t,s);return}Pt(28);return}(o=DC(e))==null||o.setRowCount(t,s)}function Tq(e){var t;return Au(e.gos)?e.rowModel.getBlockStates():((t=e.rowNodeBlockLoader)==null?void 0:t.getBlockState())??{}}function Dq(e){return e.rowModel.isLastRowIndexKnown()}var _q={moduleName:"CsrmSsrmSharedApi",version:fe,apiFunctions:{expandAll:Aq,collapseAll:Fq}},Mq={moduleName:"RowModelSharedApi",version:fe,apiFunctions:{onRowHeightChanged:dM,resetRowHeights:hM}},kq={moduleName:"SsrmInfiniteSharedApi",version:fe,apiFunctions:{setRowCount:Pq,getCacheBlockState:Tq,isLastRowIndexKnown:Dq}},Iq=class extends ${constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";return typeof e=="function"&&(e=e()),e.map(i=>{var o;if(!i){Pt(18),t||Pt(20);return}if(this.isGridApi(i))return i;const n=i;return"current"in n?(o=n.current)==null?void 0:o.api:(n.api||Pt(19),n.api)}).filter(i=>!!i&&!i.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){if(!this.consuming)for(const t of this.getAlignedGridApis())t.isDestroyed()||t.dispatchEvent(e)}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const s=[];return e.columns?e.columns.forEach(i=>{s.push(t(i))}):e.column&&s.push(t(e.column)),s}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":oe(21);break}})}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;if(t)for(const s of e.columnGroups){let i=null;s&&(i=t.getProvidedColGroup(s.getGroupId())),!(s&&!i)&&t.setColumnGroupOpened(i,s.isExpanded(),"alignedGridChanged")}}processColumnEvent(e){const t=e.column;let s=null;const i=this.beans,{colResize:n,ctrlsSvc:o,colModel:r}=i;if(t&&(s=r.getColDefCol(t.getColId())),t&&!s)return;const a=this.getMasterColumns(e);switch(e.type){case"columnMoved":{const h=e.api.getColumnState().map(u=>({colId:u.colId}));Zn(i,{state:h,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const h=e.api.getColumnState().map(u=>({colId:u.colId,hide:u.hide}));Zn(i,{state:h},"alignedGridChanged")}break;case"columnPinned":{const h=e.api.getColumnState().map(u=>({colId:u.colId,pinned:u.pinned}));Zn(i,{state:h},"alignedGridChanged")}break;case"columnResized":{const d=e,h={};for(const u of a)h[u.getId()]={key:u.getColId(),newWidth:u.getActualWidth()};for(const u of d.flexColumns??[])h[u.getId()]&&delete h[u.getId()];n==null||n.setColumnWidths(Object.values(h),!1,d.finished,"alignedGridChanged");break}}const c=o.getGridBodyCtrl().isVerticalScrollShowing();for(const d of this.getAlignedGridApis())d.setGridOption("alwaysShowVerticalScroll",c)}},Lq={moduleName:"AlignedGrids",version:fe,beans:[Iq],dependsOn:[v_]},Oq=class extends ${constructor(e){super(),this.rootNode=e,this.nextId=0,this.allNodesMap={},vE(e)}getRowNode(e){return this.allNodesMap[e]}setNewRowData(e){const{selectionSvc:t,pinnedRowModel:s,groupStage:i}=this.beans;t==null||t.reset("rowDataChanged"),s!=null&&s.isManual()&&s.reset(),this.dispatchRowDataUpdateStarted(e),this.allNodesMap=Object.create(null),this.nextId=0;const n=vE(this.rootNode),o=new Array(e.length);n._leafs=o;let r=0;const a=i==null?void 0:i.getNestedDataGetter(),l=a?new Set:null,c=(d,h)=>{const u=d.level+1;for(let f=0,p=h.length;f<p;++f){const m=h[f];if(!m)continue;const v=this.createRowNode(m,u);if(v.sourceRowIndex=r,o[r++]=v,l&&!l.has(m)){l.add(m),v.treeParent=d;const C=a(m);C&&c(v,C)}}};c(n,e),o.length=r}setImmutableRowData(e,t){var C;const{rootNode:s,gos:i}=this;this.dispatchRowDataUpdateStarted(t);const n=gu(i),o=e.changedRowNodes,{adds:r,updates:a}=o,l=new Set,c=[],d=(C=this.beans.groupStage)==null?void 0:C.getNestedDataGetter();let h=i.get("suppressMaintainUnsortedOrder")?void 0:!1,u=-1,f=!1;const p=(b,y)=>{if(!h&&h!==void 0){const S=b.sourceRowIndex;h=S<=u,u=S}b.data!==y&&(b.updateData(y),r.has(b)||a.add(b),!b.selectable&&b.isSelected()&&c.push(b))},m=(b,y,S)=>{for(let R=0,A=y.length;R<A;++R){const F=y[R];if(!F)continue;let T=this.getRowNode(n({data:F,level:S}));if(T?(p(T,F),f||(f=!!d&&T.treeParent!==b)):(T=this.createRowNode(F,S),r.add(T)),!d||l.has(T)){l.add(T);continue}l.add(T),T.treeParent=b;const k=d(F);k&&m(T,k,S+1)}};m(s,t,0);const v=this.deleteUnusedNodes(l,o,c)||h||r.size>0;if(v){const b=s._leafs??(s._leafs=[]);h===void 0?Vq(b,l,o):Gq(b,l)&&(o.reordered=!0)}(v||f||a.size)&&(e.rowDataUpdated=!0,this.deselect(c))}deleteUnusedNodes(e,{removals:t},s){const i=this.rootNode._leafs;for(let n=0,o=i.length;n<o;n++){const r=i[n];e.has(r)||(t.add(r),r.isSelected()&&s.push(r),this.deleteNode(r))}return t.size>0}updateRowData(e,t){var a;if(this.dispatchRowDataUpdateStarted(e.add),(a=this.beans.groupStage)!=null&&a.getNestedDataGetter())return oe(268),{remove:[],update:[],add:[]};const s=[],i=gu(this.gos),n=this.executeRemove(i,e,t,s),o=this.executeUpdate(i,e,t,s),r=this.executeAdd(e,t);return this.deselect(s),{remove:n,update:o,add:r}}executeRemove(e,{remove:t},{adds:s,updates:i,removals:n},o){const r=this.rootNode._leafs,a=r==null?void 0:r.length,l=t==null?void 0:t.length;if(!l||!a)return[];let c=0,d=a,h=0,u;const f=new Array(l);for(let p=0;p<l;++p){const m=this.lookupNode(e,t[p]);if(!m)continue;const v=m.sourceRowIndex;v<d&&(d=v),v>h&&(h=v),m.isSelected()&&o.push(m),this.deleteNode(m),s.delete(m)?(u??(u=new Set),u.add(m)):(i.delete(m),n.add(m)),f[c++]=m}return f.length=c,c&&Bq(r,d,h,n,u),f}executeUpdate(e,{update:t},{adds:s,updates:i},n){const o=t==null?void 0:t.length;if(!o)return[];const r=new Array(o);let a=0;for(let l=0;l<o;l++){const c=t[l],d=this.lookupNode(e,c);d&&(d.updateData(c),!d.selectable&&d.isSelected()&&n.push(d),r[a++]=d,s.has(d)||i.add(d))}return r.length=a,r}executeAdd(e,t){var s;const i=(s=this.rootNode)._leafs??(s._leafs=[]),n=i.length,o=e.add,r=o==null?void 0:o.length;if(!r)return[];const a=n+r;let l=this.sanitizeAddIndex(i,e.addIndex);if(l<n){for(let h=n-1,u=a-1;h>=l;--h){const f=i[h];f.sourceRowIndex=u,i[u--]=f}t.reordered=!0}i.length=a;const c=new Array(r),d=t.adds;for(let h=0;h<r;h++){const u=this.createRowNode(o[h],0);d.add(u),u.sourceRowIndex=l,i[l]=u,c[h]=u,l++}return c}dispatchRowDataUpdateStarted(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e!=null&&e.length?e[0]:null})}deselect(e){var i;const t="rowDataChanged",s=this.beans.selectionSvc;e.length&&(s==null||s.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t})),(i=s==null?void 0:s.updateGroupsFromChildrenSelections)==null||i.call(s,t),e.length&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:(s==null?void 0:s.getSelectedNodes())??null,serverSideState:null})}createRowNode(e,t){const s=new gl(this.beans);s.parent=this.rootNode,s.level=t,s.group=!1,s.expanded=!1,s.setDataAndId(e,String(this.nextId++));const i=s.id,n=this.allNodesMap;return n[i]&&oe(2,{nodeId:i}),n[i]=s,s}deleteNode(e){var n;e.clearRowTopAndRowIndex();const t=e.id,s=this.allNodesMap;s[t]===e&&delete s[t];const i=e.pinnedSibling;i&&((n=this.beans.pinnedRowModel)==null||n.pinRow(i,null))}lookupNode(e,t){if(!e)return Hq(this.rootNode._leafs,t);const s=e({data:t,level:0}),i=this.allNodesMap[s];return i||(Pt(4,{id:s}),null)}sanitizeAddIndex(e,t){const s=e.length;if(typeof t!="number"||t<0||t>=s||Number.isNaN(t))return s;t=Math.ceil(t);const i=this.gos;return t>0&&i.get("treeData")&&i.get("getDataPath")&&(t=Nq(e,t)),t}},Nq=(e,t)=>{for(let s=0,i=e.length;s<i;s++){const n=e[s];if((n==null?void 0:n.rowIndex)==t-1)return s+1}return t},vE=e=>{var r;e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",((r=e._leafs)==null?void 0:r.length)!==0&&(e._leafs=[]);const t=[],s=[],i=[],n=[];e.childrenAfterGroup=t,e.childrenAfterSort=s,e.childrenAfterAggFilter=i,e.childrenAfterFilter=n;const o=e.sibling;return o&&(o.childrenAfterGroup=t,o.childrenAfterSort=s,o.childrenAfterAggFilter=i,o.childrenAfterFilter=n,o.childrenMapped=e.childrenMapped),e.updateHasChildren(),e},Hq=(e,t)=>{if(e)for(let s=0,i=e.length;s<i;s++){const n=e[s];if(n.data===t)return n}return Pt(5,{data:t}),null},Bq=(e,t,s,i,n)=>{t=Math.max(0,t);for(let o=t,r=e.length;o<r;++o){const a=e[o];o<=s&&(i.has(a)||n!=null&&n.has(a))||(a.sourceRowIndex=t,e[t++]=a)}e.length=t},Gq=(e,t)=>{const s=t.size;e.length=s;let i=0,n=!1,o=!1;for(const r of t){const a=r.sourceRowIndex;a===i?o||(o=n):(a>=0?o=!0:n=!0,r.sourceRowIndex=i,e[i]=r),++i}return o},Vq=(e,t,{removals:s,adds:i})=>{const n=e.length;e.length=t.size;let o=0;for(let r=0;r<n;++r){const a=e[r];s.has(a)||(o!==r&&(a.sourceRowIndex=o,e[o]=a),++o)}for(const r of i)r.sourceRowIndex<0&&(r.sourceRowIndex=o,e[o++]=r);e.length=o},uM=e=>{const t=e.childrenAfterSort,s=e.sibling;if(s&&(s.childrenAfterSort=t),!!t)for(let i=0,n=t.length-1;i<=n;i++){const o=t[i],r=i===0,a=i===n;o.firstChild!==r&&(o.firstChild=r,o.dispatchRowEvent("firstChildChanged")),o.lastChild!==a&&(o.lastChild=a,o.dispatchRowEvent("lastChildChanged")),o.childIndex!==i&&(o.childIndex=i,o.dispatchRowEvent("childIndexChanged"))}},zq=class extends ${constructor(){super(...arguments),this.beanName="sortStage",this.step="sort",this.refreshProps=["postSortRows","groupDisplayType","accentedSort"]}execute(e){const t=this.beans.sortSvc.getSortOptions(),s=t.length>0&&!!e.changedRowNodes&&this.gos.get("deltaSort");this.sort(t,s,e.changedRowNodes,e.changedPath)}sort(e,t,s,i){const{gos:n,colModel:o,rowGroupColsSvc:r,rowNodeSorter:a,rowRenderer:l,showRowGroupCols:c}=this.beans,d=n.get("groupMaintainOrder"),h=o.getCols().some(b=>b.isRowGroupActive()),u=r==null?void 0:r.columns,f=o.isPivotMode(),p=n.getCallback("postSortRows");let m=!1,v;const C=b=>{var A,F;const y=f&&b.leafGroup;let S=d&&h&&!b.leafGroup;S&&(v??(v=this.shouldSortContainsGroupCols(e)),S&&(S=!v));let R=null;if(S){let T=!1;if(u){const k=b.level+1;k<u.length&&(T=u[k].getSort()===null)}T||(R=Uq(b))}else!e.length||y||(t&&s?R=Wq(a,b,s,i,e):R=a.doFullSort(b.childrenAfterAggFilter,e));if(R||(R=((A=b.childrenAfterAggFilter)==null?void 0:A.slice(0))??[]),m||(m=((F=b.childrenAfterSort)==null?void 0:F[0])!==R[0]),b.childrenAfterSort=R,uM(b),p){const T={nodes:b.childrenAfterSort};p(T)}};if(i==null||i.forEachChangedNodeDepthFirst(C),m&&n.get("groupHideOpenParents")){const b=c==null?void 0:c.getShowRowGroupCols();b!=null&&b.length&&l.refreshCells({columns:b,force:!0})}}shouldSortContainsGroupCols(e){const t=e.length;if(!t)return!1;if(Lo(this.gos)){for(let s=0;s<t;++s){const i=e[s].column;if(i.isPrimary()&&i.isRowGroupActive())return!0}return!1}for(let s=0;s<t;++s)if(e[s].column.getColDef().showRowGroup)return!0;return!1}},Wq=(e,t,s,i,n)=>{const o=t.childrenAfterAggFilter,r=t.childrenAfterSort;if(!r)return e.doFullSort(o,n);const a=new Set,l=[],{updates:c,adds:d}=s;for(let u=0,f=o.length;u<f;++u){const p=o[u];c.has(p)||d.has(p)||i&&!i.canSkip(p)?l.push({currentPos:l.length,rowNode:p}):a.add(p)}const h=r.filter(u=>a.has(u)).map((u,f)=>({currentPos:f,rowNode:u}));return l.sort((u,f)=>e.compareRowNodes(n,u,f)),$q(e,n,l,h)},$q=(e,t,s,i)=>{let n=0,o=0;const r=s.length,a=i.length,l=new Array(r+a);let c=0;for(;n<r&&o<a;){const d=s[n],h=i[o];e.compareRowNodes(t,d,h)<0?(l[c++]=d.rowNode,++n):(l[c++]=h.rowNode,++o)}for(;n<r;)l[c++]=s[n++].rowNode;for(;o<a;)l[c++]=i[o++].rowNode;return l},Uq=e=>{const t=e.childrenAfterSort,s=e.childrenAfterAggFilter,i=t==null?void 0:t.length,n=s==null?void 0:s.length;if(!i||!n)return null;const o=new Array(n),r=new Set;for(let l=0;l<n;++l)r.add(s[l]);let a=0;for(let l=0;l<i;++l){const c=t[l];r.delete(c)&&(o[a++]=c)}if(r.size===0&&a===i)return t;for(const l of r)o[a++]=l;return o.length=a,o},jq=class extends ${constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowCountReady=!1,this.nodeManager=void 0,this.rowsToDisplay=[],this.rowDataUpdatedPending=!1,this.asyncTransactions=null,this.asyncTransactionsTimer=0,this.started=!1,this.refreshingModel=!1,this.rowNodesCountReady=!1,this.stages=[],this.stagesRefreshProps=new Map,this.onRowHeightChanged_debounced=Us(this,this.onRowHeightChanged.bind(this),100)}postConstruct(){const e=this.beans,t=new gl(e);this.rootNode=t,this.nodeManager=this.createBean(new Oq(t));const s=this.refreshModel.bind(this,{step:"group"}),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:s,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:s,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this),rowExpansionStateChanged:this.onRowGroupOpened.bind(this)}),this.addPropertyListeners()}addPropertyListeners(){const{beans:e,stagesRefreshProps:t}=this,s=[e.groupStage,e.filterStage,e.pivotStage,e.aggStage,e.sortStage,e.filterAggStage,e.flattenStage].filter(i=>!!i);this.stages=s;for(let i=s.length-1;i>=0;--i)for(const n of s[i].refreshProps)t.set(n,i);this.addManagedPropertyListeners([...t.keys()],i=>{var o;const n=(o=i.changeSet)==null?void 0:o.properties;n&&this.onPropChange(n)}),this.addManagedPropertyListener("rowData",()=>this.onPropChange(["rowData"])),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,s,i){let n,o=!1;do{n=!1;const r=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(r,s),c=Math.min(a,i);for(let d=l;d<=c;d++){const h=this.getRow(d);if(h.rowHeightEstimated){const u=hl(this.beans,h);h.setRowHeight(u.height),n=!0,o=!0}}n&&this.setRowTopAndRowIndex()}while(n);return o}onPropChange(e){const{nodeManager:t,gos:s,beans:i}=this,n=i.groupStage;if(!t)return;const o=new Set(e),r=n==null?void 0:n.onPropChange(o);let a;o.has("rowData")?a=s.get("rowData"):r&&(a=n==null?void 0:n.extractData()),a&&!Array.isArray(a)&&(a=null,oe(1));const l={step:"nothing",changedProps:o};a&&(!r&&!this.isEmpty()&&a.length>0&&s.exists("getRowId")&&!s.get("resetRowDataOnUpdate")?(l.keepRenderedRows=!0,l.animate=!s.get("suppressAnimationFrame"),l.changedRowNodes=new qm,t.setImmutableRowData(l,a)):(l.rowDataUpdated=!0,l.newData=!0,t.setNewRowData(a),this.rowNodesCountReady=!0));const c=l.rowDataUpdated?"group":this.getRefreshedStage(e);c&&(l.step=c,this.refreshModel(l))}getRefreshedStage(e){const{stages:t,stagesRefreshProps:s}=this,i=t.length;let n=i;for(let o=0,r=e.length;o<r&&n;++o)n=Math.min(n,s.get(e[o])??n);return n<i?t[n].step:null}setRowTopAndRowIndex(e){const{beans:t,rowsToDisplay:s}=this,i=t.environment.getDefaultRowHeight();let n=0;const o=qs(this.gos,"normal");for(let r=0,a=s.length;r<a;++r){const l=s[r],c=l.id;if(c!=null&&(e==null||e.add(c)),l.rowHeight==null){const d=hl(t,l,o,i);l.setRowHeight(d.height,d.estimated)}l.setRowTop(n),l.setRowIndex(r),n+=l.rowHeight}}clearRowTopAndRowIndex(e,t){const s=e.active,i=r=>{(r==null?void 0:r.id)!=null&&!t.has(r.id)&&r.clearRowTopAndRowIndex()},n=r=>{i(r),i(r.detailNode),i(r.sibling);const a=r.childrenAfterGroup;if(!r.hasChildren()||!a)return;const l=r.level==-1;if(!(s&&!l&&!r.expanded))for(let d=0,h=a.length;d<h;++d)n(a[d])},o=this.rootNode;o&&n(o)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay.length}getTopLevelRowCount(){var n,o;const{rootNode:e,rowsToDisplay:t}=this;if(!e||!t.length)return 0;if(t[0]===e)return 1;const i=(n=e.sibling)!=null&&n.displayed?1:0;return(((o=e.childrenAfterSort)==null?void 0:o.length)??0)+i}getTopLevelRowDisplayedIndex(e){const{beans:t,rootNode:s,rowsToDisplay:i}=this;if(!s||!i.length||i[0]===s)return e;const o=s.childrenAfterSort,r=l=>{let c=o[l];if(this.gos.get("groupHideOpenParents"))for(;c.expanded&&c.childrenAfterSort&&c.childrenAfterSort.length>0;)c=c.childrenAfterSort[0];return c.rowIndex},a=t.footerSvc;return a?a==null?void 0:a.getTopDisplayIndex(i,e,o,r):r(e)}getTopLevelIndexFromDisplayedIndex(e){var a;const{rootNode:t,rowsToDisplay:s}=this;if(!t||!s.length||s[0]===t)return e;let n=this.getRow(e);n.footer&&(n=n.sibling);let o=n.parent;for(;o&&o!==t;)n=o,o=n.parent;const r=((a=t.childrenAfterSort)==null?void 0:a.indexOf(n))??-1;return r>=0?r:e}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){this.refreshModel({step:"map",keepRenderedRows:!0,animate:qd(this.gos)})}onFilterChanged({afterDataChange:e,columns:t}){if(!e){const i=t.length===0||t.some(n=>n.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:qd(this.gos)})}}onSortChanged(){this.refreshModel({step:"sort",keepRenderedRows:!0,animate:qd(this.gos)})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.beans.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new $g(!1,this.rootNode);return t.active=e,t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:s,rowDataUpdated:i}=e;return!(!t||s||!i||t.removals.size||t.adds.size)}refreshModel(e){var c,d;const{nodeManager:t,beans:s,eventSvc:i,started:n,refreshingModel:o}=this;if(!t)return;const r=!!e.rowDataUpdated,a=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&r));if(n&&r&&i.dispatchEvent({type:"rowDataUpdated"}),!n||o||s.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e)){this.rowDataUpdatedPending||(this.rowDataUpdatedPending=r);return}switch(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.step="group"),this.refreshingModel=!0,(c=s.masterDetailSvc)==null||c.refreshModel(e),r&&e.step!=="group"&&((d=s.colFilter)==null||d.refreshModel()),e.step){case"group":this.doGrouping(e);case"filter":this.doFilter(a);case"pivot":this.doPivot(a);case"aggregate":this.doAggregate(a);case"filter_aggregates":this.doFilterAggregates(a);case"sort":this.doSort(e.changedRowNodes,a);case"map":this.doRowsToDisplay()}const l=new Set;this.setRowTopAndRowIndex(l),this.clearRowTopAndRowIndex(a,l),this.refreshingModel=!1,i.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){var e,t,s;return!((t=(e=this.rootNode)==null?void 0:e._leafs)!=null&&t.length)||!((s=this.beans.colModel)!=null&&s.ready)}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let s=!1,i=!1;const n=[],o=Vg(this.gos);return this.forEachNodeAfterFilterAndSort(r=>{if(i)return;if(s&&(r===t||r===e)&&(i=!0,o&&r.group)){gM(n,r);return}if(!s){if(r!==t&&r!==e)return;s=!0,t===e&&(i=!0)}(!r.group||!o)&&n.push(r)}),n}getTopLevelNodes(){var e;return((e=this.rootNode)==null?void 0:e.childrenAfterGroup)??null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay,s=t.length;if(this.isEmpty()||s===0)return-1;let i=0,n=s-1;if(e<=0)return 0;if(t[n].rowTop<=e)return n;let r=-1,a=-1;for(;;){const l=Math.floor((i+n)/2),c=t[l];if(this.isRowInPixel(c,e)||(c.rowTop<e?i=l+1:c.rowTop>e&&(n=l-1),r===i&&a===n))return l;r=i,a=n}}isRowInPixel(e,t){const s=e.rowTop,i=s+e.rowHeight;return s<=t&&i>t}forEachLeafNode(e){var s;const t=(s=this.rootNode)==null?void 0:s._leafs;if(t)for(let i=0,n=t.length;i<n;++i)e(t[i],i)}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){const t=this.rowsToDisplay;for(let s=0,i=t.length;s<i;++s)e(t[s],s)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,s=>s.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,s=>s.childrenAfterSort)}forEachPivotNode(e,t,s){const{colModel:i,rowGroupColsSvc:n}=this.beans;if(!i.isPivotMode())return;if(!(n!=null&&n.columns.length)){e(this.rootNode,0);return}const o=s?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,r=>r.leafGroup?null:r[o])}depthFirstSearchRowNodes(e,t=!1,s=o=>o.childrenAfterGroup,i=this.rootNode,n=0){let o=n;if(!i)return o;const r=i===this.rootNode;if(r||e(i,o++),i.hasChildren()&&!i.footer){const a=s(i);if(a){const l=this.beans.footerSvc;o=(l==null?void 0:l.addTotalRows(o,i,e,t,r,"top"))??o;for(const c of a)o=this.depthFirstSearchRowNodes(e,t,s,c,o);return(l==null?void 0:l.addTotalRows(o,i,e,t,r,"bottom"))??o}}return o}doAggregate(e){var s;const t=this.rootNode;t&&((s=this.beans.aggStage)==null||s.execute({rowNode:t,changedPath:e}))}doFilterAggregates(e){const t=this.rootNode,s=this.beans.filterAggStage;if(s){s.execute({rowNode:t,changedPath:e});return}t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){const s=this.beans.sortStage;if(s){s.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t});return}t.forEachChangedNodeDepthFirst(i=>{i.childrenAfterSort=i.childrenAfterAggFilter.slice(0),uM(i)})}doGrouping(e){var n;const t=this.rootNode,s=this.beans.groupStage,i=s==null?void 0:s.execute({rowNode:t,changedRowNodes:e.changedRowNodes,changedPath:e.changedPath,afterColumnsChanged:!!e.afterColumnsChanged});if(i===void 0){const o=t._leafs;t.childrenAfterGroup=o,t.updateHasChildren();const r=t.sibling;r&&(r.childrenAfterGroup=o)}(i||e.rowDataUpdated)&&((n=this.beans.colFilter)==null||n.refreshModel()),!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){const t=this.beans.filterStage;if(t){t.execute({rowNode:this.rootNode,changedPath:e});return}e.forEachChangedNodeDepthFirst(s=>{s.childrenAfterFilter=s.childrenAfterGroup,H_(s)},!0)}doPivot(e){var t;(t=this.beans.pivotStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){var i,n;const t=(i=this.nodeManager)==null?void 0:i.getRowNode(e);return typeof t=="object"?t:typeof e=="string"&&e.indexOf($y)===0?(n=this.beans.groupStage)==null?void 0:n.getNode(e):void 0}batchUpdateRowData(e,t){if(!this.asyncTransactionsTimer){this.asyncTransactions=[];const s=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimer=setTimeout(()=>this.executeBatchUpdateRowData(),s)}this.asyncTransactions.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){const e=this.asyncTransactionsTimer;e&&(clearTimeout(e),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var a;const{nodeManager:e,beans:t,eventSvc:s,asyncTransactions:i}=this;if(!e)return;(a=t.valueCache)==null||a.onDataChanged();const n=[],o=[],r=new qm;for(const{rowDataTransaction:l,callback:c}of i??[]){this.rowNodesCountReady=!0;const d=e.updateRowData(l,r);n.push(d),c&&o.push(c.bind(null,d))}this.commitTransactions(r),o.length>0&&setTimeout(()=>{for(let l=0,c=o.length;l<c;l++)o[l]()},0),n.length>0&&s.dispatchEvent({type:"asyncTransactionsFlushed",results:n}),this.asyncTransactionsTimer=0,this.asyncTransactions=null}updateRowData(e){var n;const t=this.nodeManager;if(!t)return null;(n=this.beans.valueCache)==null||n.onDataChanged(),this.rowNodesCountReady=!0;const s=new qm,i=t.updateRowData(e,s);return this.commitTransactions(s),i}commitTransactions(e){this.refreshModel({step:"group",rowDataUpdated:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:e,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){const{beans:e,rootNode:t}=this,s=e.flattenStage;if(s){this.rowsToDisplay=s.execute({rowNode:t});return}const i=this.rootNode.childrenAfterSort??[];for(const n of i)n.setUiLevel(0);this.rowsToDisplay=i}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0);const s=e.sibling;s==null||s.setRowHeight(s.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const s=t.detailNode;s==null||s.setRowHeight(s.rowHeight,!0);const i=t.sibling;i==null||i.setRowHeight(i.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){var t;e.rowHeightChanged&&!((t=this.beans.rowAutoHeight)!=null&&t.active)&&this.resetRowHeights()}onGridReady(){this.started||this.setInitialData()}destroy(){super.destroy(),this.nodeManager=this.destroyBean(this.nodeManager),this.started=!1,this.rootNode=null,this.rowsToDisplay=[],this.asyncTransactions=null,clearTimeout(this.asyncTransactionsTimer)}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}},gM=(e,t)=>{const s=t.childrenAfterGroup;if(s)for(let i=0,n=s.length;i<n;++i){const o=s[i];o.data&&e.push(o),o.group&&gM(e,o)}};function Kq(e){var t;(t=e.expansionSvc)==null||t.onGroupExpandedOrCollapsed()}function qq(e,t){const s=yl(e);s&&((!t||t==="everything")&&(t="group"),s.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))}function Yq(e){var t;return((t=yl(e))==null?void 0:t.isEmpty())??!0}function Xq(e,t){var s;(s=yl(e))==null||s.forEachLeafNode(t)}function Qq(e,t){var s;(s=yl(e))==null||s.forEachNodeAfterFilter(t)}function Jq(e,t){var s;(s=yl(e))==null||s.forEachNodeAfterFilterAndSort(t)}function Zq(e,t){return e.frameworkOverrides.wrapIncoming(()=>{var s;return(s=yl(e))==null?void 0:s.updateRowData(t)})}function e7(e,t,s){e.frameworkOverrides.wrapIncoming(()=>{var i;return(i=yl(e))==null?void 0:i.batchUpdateRowData(t,s)})}function t7(e){e.frameworkOverrides.wrapIncoming(()=>{var t;return(t=yl(e))==null?void 0:t.flushAsyncTransactions()})}function s7(e){var t;return(t=e.selectionSvc)==null?void 0:t.getBestCostNodeSelection()}var i7={moduleName:"ClientSideRowModel",version:fe,rowModels:["clientSide"],beans:[jq,zq],dependsOn:[I_]},n7={moduleName:"ClientSideRowModelApi",version:fe,apiFunctions:{onGroupExpandedOrCollapsed:Kq,refreshClientSideRowModel:qq,isRowDataEmpty:Yq,forEachLeafNode:Xq,forEachNodeAfterFilter:Qq,forEachNodeAfterFilterAndSort:Jq,applyTransaction:Zq,applyTransactionAsync:e7,flushAsyncTransactions:t7,getBestCostNodeSelection:s7,resetRowHeights:hM,onRowHeightChanged:dM},dependsOn:[_q,Mq]},o7=class extends ${constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){const{allColumns:s,columnKeys:i,skipRowGroups:n,exportRowNumbers:o}=t,r=this.getColumnsToExport({allColumns:s,skipRowGroups:n,columnKeys:i,exportRowNumbers:o});return[this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t)].reduce((a,l)=>l(a),e).parse()}processRow(e,t,s,i){var p;const n=t.shouldRowBeSkipped||(()=>!1),r=t.rowPositions!=null||!!t.onlySelected,a=this.gos.get("groupHideOpenParents")&&!r,l=this.colModel.isPivotMode()?i.leafGroup:!i.group,c=!!i.footer,d=i.allChildrenCount===1&&((p=i.childrenAfterGroup)==null?void 0:p.length)===1&&oG(this.gos,i);if(!l&&!c&&(t.skipRowGroups||d||a)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&i.rowPinned==="top"||t.skipPinnedBottom&&i.rowPinned==="bottom"||i.stub||i.level===-1&&!l&&!c||n(Be(this.gos,{node:i})))return;const f=e.onNewBodyRow(i);if(s.forEach((m,v)=>{f.onColumn(m,v,i)}),t.getCustomContentBelowRow){const m=t.getCustomContentBelowRow(Be(this.gos,{node:i}));m&&e.addCustomContent(m)}}appendContent(e){return t=>{const s=e.appendContent;return s&&t.addCustomContent(s),t}}prependContent(e){return t=>{const s=e.prependContent;return s&&t.addCustomContent(s),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return s=>{if(!e.skipColumnGroupHeaders){const i=new uD,{colGroupSvc:n}=this.beans,o=n?n.createColumnGroups({columns:t,idCreator:i,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(o,s,e.processGroupHeaderCallback)}return s}}exportHeaders(e,t){return s=>{if(!e.skipColumnHeaders){const i=s.onNewHeaderRow();t.forEach((n,o)=>{i.onColumn(n,o,void 0)})}return s}}processPinnedTopRows(e,t){return s=>{var n,o;const i=this.processRow.bind(this,s,e,t);return e.rowPositions?e.rowPositions.filter(r=>r.rowPinned==="top").sort((r,a)=>r.rowIndex-a.rowIndex).map(r=>{var a;return(a=this.pinnedRowModel)==null?void 0:a.getPinnedTopRow(r.rowIndex)}).forEach(i):(n=this.pinnedRowModel)!=null&&n.isManual()||(o=this.pinnedRowModel)==null||o.forEachPinnedRow("top",i),s}}processRows(e,t){return s=>{var c;const i=this.rowModel,n=rs(this.gos),o=Au(this.gos),r=!n&&e.onlySelected,a=this.processRow.bind(this,s,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(d=>d.rowPinned==null).sort((d,h)=>d.rowIndex-h.rowIndex).map(d=>i.getRow(d.rowIndex)).forEach(a);else if(this.colModel.isPivotMode())n?i.forEachPivotNode(a,!0,l==="filteredAndSorted"):o?i.forEachNodeAfterFilterAndSort(a,!0):i.forEachNode(a);else if(e.onlySelectedAllPages||r){const d=((c=this.beans.selectionSvc)==null?void 0:c.getSelectedNodes())??[];this.replicateSortedOrder(d),d.forEach(a)}else l==="all"?i.forEachNode(a):n||o?i.forEachNodeAfterFilterAndSort(a,!0):i.forEachNode(a);return s}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:s}=this.beans;if(!t||!s)return;const i=t.getSortOptions(),n=(o,r)=>{var a,l;return o.rowIndex!=null&&r.rowIndex!=null?o.rowIndex-r.rowIndex:o.level===r.level?((a=o.parent)==null?void 0:a.id)===((l=r.parent)==null?void 0:l.id)?s.compareRowNodes(i,{rowNode:o,currentPos:o.rowIndex??-1},{rowNode:r,currentPos:r.rowIndex??-1}):n(o.parent,r.parent):o.level>r.level?n(o.parent,r):n(o,r.parent)};e.sort(n)}processPinnedBottomRows(e,t){return s=>{var n,o;const i=this.processRow.bind(this,s,e,t);return e.rowPositions?e.rowPositions.filter(r=>r.rowPinned==="bottom").sort((r,a)=>r.rowIndex-a.rowIndex).map(r=>{var a;return(a=this.pinnedRowModel)==null?void 0:a.getPinnedBottomRow(r.rowIndex)}).forEach(i):(n=this.pinnedRowModel)!=null&&n.isManual()||(o=this.pinnedRowModel)==null||o.forEachPinnedRow("bottom",i),s}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:s=!1,exportRowNumbers:i=!1,columnKeys:n}=e,{colModel:o,gos:r,visibleCols:a}=this,l=o.isPivotMode(),c=u=>na(u)?!1:!Wr(u)||i;if(n!=null&&n.length)return o.getColsForKeys(n).filter(c);const d=r.get("treeData");let h=[];return t&&!l?h=o.getCols():h=a.allCols,h=h.filter(u=>c(u)&&(s&&!d?!d0(u):!0)),h}recursivelyAddHeaderGroups(e,t,s){const i=[];for(const n of e){const o=n;if(o.getChildren)for(const r of o.getChildren()??[])i.push(r)}e.length>0&&os(e[0])&&this.doAddHeaderHeader(t,e,s),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,s)}doAddHeaderHeader(e,t,s){const i=e.onNewHeaderGroupingRow();let n=0;for(const o of t){const r=o;let a;s?a=s(Be(this.gos,{columnGroup:r})):a=this.beans.colNames.getDisplayNameForColumnGroup(r,"header");const c=(r.isExpandable()?r.getLeafColumns():[]).reduce((d,h,u,f)=>{let p=It(d);return h.getColumnGroupShow()==="open"?(!p||p[1]!=null)&&(p=[u],d.push(p)):p&&p[1]==null&&(p[1]=u-1),u===f.length-1&&p&&p[1]==null&&(p[1]=u),d},[]);i.onColumn(r,a||"",n++,r.getLeafColumns().length-1,c)}}},r7={moduleName:"SharedExport",version:fe,beans:[o7]},CE=`\r
`,a7=class extends L8{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:s}=e;this.suppressQuotes=t,this.columnSeparator=s}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,CE),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((s,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(s.data.value||""),s.mergeAcross&&this.appendEmptyCells(s.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,s,i){s!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,s){t!=0&&(this.result+=this.columnSeparator);const i=this.extractRowCellValue(e,t,t,"csv",s);this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(oe(53),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=CE),this.isFirstLine=!1}},l7=class extends I8{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){oe(51);return}const t=this.getMergedParams(e),s=this.getData(t),i=new Blob(["\uFEFF",s],{type:"text/plain"}),n=typeof t.fileName=="function"?t.fileName(Be(this.gos,{})):t.fileName;O8(this.getFileName(n),i)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const s=t?Object.assign({},e):this.getMergedParams(e);return this.getData(s)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:s,rowGroupColsSvc:i,valueSvc:n,gos:o}=this,{processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:d,columnSeparator:h}=e;return new a7({colModel:t,colNames:s,valueSvc:n,gos:o,processCellCallback:r||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:d||!1,columnSeparator:h||",",rowGroupColsSvc:i})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function c7(e,t){var s;return(s=e.csvCreator)==null?void 0:s.getDataAsCsv(t)}function d7(e,t){var s;(s=e.csvCreator)==null||s.exportDataAsCsv(t)}var h7={moduleName:"CsvExport",version:fe,beans:[l7],apiFunctions:{getDataAsCsv:c7,exportDataAsCsv:d7},dependsOn:[r7]},u7=class extends ${constructor(e,t,s){super(),this.id=e,this.parentCache=t,this.params=s,this.state="needsLoading",this.version=0,this.startRow=e*s.blockSize,this.endRow=this.startRow+s.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,s){this.successCommon(e,{rowData:t,rowCount:s})}isRequestMostRecentAndLive(e){const t=e===this.version,s=this.isAlive();return t&&s}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:s,beans:i,rowNodes:n}=this;for(let o=0;o<e;o++){const r=s+o,a=new gl(i);a.setRowHeight(t),a.uiLevel=0,a.setRowIndex(r),a.setRowTop(t*r),n.push(a)}}getBlockStateJson(){const{id:e,startRow:t,endRow:s,state:i}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:s,pageStatus:i}}}setDataAndId(e,t,s){pe(t)?e.setDataAndId(t,s.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(Wt(this.params.datasource.getRows)){oe(90);return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){const{startRow:e,endRow:t,version:s,params:{sortModel:i,filterModel:n},gos:o}=this;return{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,s),failCallback:this.pageLoadFailed.bind(this,s),sortModel:i,filterModel:n,context:Be(o,{}).context}}forEachNode(e,t,s){this.rowNodes.forEach((i,n)=>{this.startRow+n<s&&e(i,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);const s=e-this.startRow;return this.rowNodes[s]}processServerResult(e){const{rowNodes:t,beans:s}=this;t.forEach((n,o)=>{const r=e.rowData?e.rowData[o]:void 0;!n.id&&n.alreadyRendered&&r&&(t[o]=new gl(s),t[o].setRowIndex(n.rowIndex),t[o].setRowTop(n.rowTop),t[o].setRowHeight(n.rowHeight),n.clearRowTopAndRowIndex()),this.setDataAndId(t[o],r,this.startRow+o)});const i=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,i)}destroy(){for(const e of this.rowNodes)e.clearRowTopAndRowIndex();super.destroy()}},g7=2,f7=class extends ${constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){const s=Math.floor(e/this.params.blockSize);let i=this.blocks[s];if(!i){if(t)return;i=this.createBlock(s)}return i.getRow(e)}createBlock(e){const t=this.params,s=this.createBean(new u7(e,this,t));return this.blocks[s.id]=s,this.blockCount++,this.purgeBlocksIfNeeded(s),t.rowNodeBlockLoader.addBlock(s),s}refreshCache(){if(this.blockCount==0){this.purgeCache();return}for(const t of this.getBlocksInOrder())t.setStateWaitingToLoad();this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){for(const e of this.getBlocksInOrder())this.destroyBlock(e);super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(dl(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(r=>r!=e),s=(r,a)=>a.lastAccessed-r.lastAccessed;t.sort(s);const i=this.params.maxBlocksInCache>0,n=i?this.params.maxBlocksInCache-1:null,o=g7-1;t.forEach((r,a)=>{const l=r.state==="needsLoading"&&a>=o,c=i?a>=n:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(r)||this.isBlockFocused(r))return;this.removeBlockFromCache(r)}})}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const{startRow:s,endRow:i}=e;return t.rowIndex>=s&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:s}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,s-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:s,overflowSize:i}=this.params,o=(e.id+1)*s+i;this.rowCount<o&&(this.rowCount=o)}}setRowCount(e,t){this.rowCount=e,pe(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};for(const s of this.getBlocksInOrder())s.forEachNode(e,t,this.rowCount)}getBlocksInOrder(){const e=(s,i)=>s.id-i.id;return Object.values(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];for(const t of this.getBlocksInOrder())t.id*this.params.blockSize>=this.rowCount&&e.push(t);if(e.length>0)for(const t of e)this.destroyBlock(t)}purgeCache(){for(const e of this.getBlocksInOrder())this.removeBlockFromCache(e);this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const s=[];let i=-1,n=!1;const o={value:0};let r=!1;for(const l of this.getBlocksInOrder())if(!r){if(n&&i+1!==l.id){r=!0;continue}i=l.id,l.forEachNode(c=>{const d=c===e||c===t;(n||d)&&s.push(c),d&&(n=!n)},o,this.rowCount)}return r||n?[]:s}},p7=class extends ${constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){if(this.gos.get("rowModelType")!=="infinite")return;const e=this.beans,t=new gl(e);this.rootNode=t,t.level=-1,this.rowHeight=Uc(e),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache())}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy(),this.rootNode=null}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=Uc(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){var t;let e;this.cacheParams?e=!Ig(this.cacheParams.sortModel,((t=this.beans.sortSvc)==null?void 0:t.getSortModel())??[]):e=!0,e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){var s;return((s=this.infiniteCache)==null?void 0:s.getRowNodesInRange(e,t))??[]}reset(){var s;if(!this.datasource)return;gu(this.gos)!=null||(s=this.beans.selectionSvc)==null||s.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();const e=this.beans,{filterManager:t,sortSvc:s,rowNodeBlockLoader:i,eventSvc:n,gos:o}=e;this.cacheParams={datasource:this.datasource,filterModel:(t==null?void 0:t.getFilterModel())??{},sortModel:(s==null?void 0:s.getSortModel())??[],rowNodeBlockLoader:i,initialRowCount:o.get("infiniteInitialRowCount"),maxBlocksInCache:o.get("maxBlocksInCache"),rowHeight:Uc(e),overflowSize:o.get("cacheOverflowSize"),blockSize:o.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new f7(this.cacheParams)),n.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(s=>{s.id===e&&(t=s)}),t}forEachNode(e){var t;(t=this.infiniteCache)==null||t.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),s=this.getRowCount()-1;return t>s?s:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){var e;(e=this.infiniteCache)==null||e.refreshCache()}purgeCache(){var e;(e=this.infiniteCache)==null||e.purgeCache()}isLastRowIndexKnown(){var e;return((e=this.infiniteCache)==null?void 0:e.isLastRowIndexKnown())??!1}setRowCount(e,t){var s;(s=this.infiniteCache)==null||s.setRowCount(e,t)}resetRowHeights(){}onRowHeightChanged(){}};function m7(e){var t;(t=DC(e))==null||t.refreshCache()}function v7(e){var t;(t=DC(e))==null||t.purgeCache()}function C7(e){var t;return(t=DC(e))==null?void 0:t.getRowCount()}var w7=class extends ${constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=rG(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Us(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){to(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){dl(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(s=>s.state==="needsLoading").slice(0,e);this.activeBlockLoadsCount+=t.length;for(const s of t)s.load();this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach(t=>{const{id:s,state:i}=t.getBlockStateJson();e[s]=i}),e}printCacheStatus(){dl(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},b7={moduleName:"InfiniteRowModelCore",version:fe,rowModels:["infinite"],beans:[p7,w7]},y7={moduleName:"InfiniteRowModel",version:fe,apiFunctions:{refreshInfiniteCache:m7,purgeInfiniteCache:v7,getInfiniteRowCount:C7},dependsOn:[b7,kq]},S7="â",x7="â",R7={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},E7=class extends Et{constructor(){super(R7),this.eValue=ge,this.eDelta=ge,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){const s=Math.abs(t),i=e.formatValue(s),n=pe(i)?i:s,o=t>=0,r=this.eDelta;o?r.textContent=S7+n:r.textContent=x7+n,r.classList.toggle("ag-value-change-delta-up",o),r.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Ks(this.eDelta)}refresh(e,t=!1){var c;const{value:s,valueFormatted:i}=e,{eValue:n,lastValue:o,beans:r}=this;if(s===o||(pe(i)?n.textContent=i:pe(s)?n.textContent=s:Ks(n),(c=r.filterManager)!=null&&c.isSuppressFlashingCellsBecauseFiltering()))return!1;const a=s&&typeof s=="object"&&"toNumber"in s?s.toNumber():s,l=o&&typeof o=="object"&&"toNumber"in o?o.toNumber():o;if(a===l)return!1;if(typeof a=="number"&&typeof l=="number"){const d=a-l;this.showDelta(e,d)}return o&&n.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=s,!0}},A7=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}",F7={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]},P7=class extends Et{constructor(){super(F7),this.eCurrent=ge,this.refreshCount=0,this.registerCSS(A7)}init(e){this.refresh(e,!0)}addSlideAnimation(){var n;this.refreshCount++;const e=this.refreshCount;(n=this.ePrevious)==null||n.remove();const{beans:t,eCurrent:s}=this,i=ls({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=i,i.textContent=s.textContent,this.getGui().insertBefore(i,s),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{var o;e===this.refreshCount&&((o=this.ePrevious)==null||o.remove(),this.ePrevious=null)},3e3)})}refresh(e,t=!1){var n;let s=e.value;if(Wt(s)&&(s=""),s===this.lastValue||(n=this.beans.filterManager)!=null&&n.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=s;const i=this.eCurrent;return pe(e.valueFormatted)?i.textContent=e.valueFormatted:pe(e.value)?i.textContent=s:Ks(i),!0}},T7=class extends ${constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t,s=this.beans.gos.get("cellFlashDuration"),i=this.beans.gos.get("cellFadeDuration")){const n=this.animations[t];n.delete(e);const o=Date.now(),r=o+s,a=o+s+i,l={phase:"flash",flashEndTime:r,fadeEndTime:a};n.set(e,l);const c=`ag-cell-${t}`,d=`${c}-animation`,{comp:h,eGui:{style:u}}=e;h.toggleCss(c,!0),h.toggleCss(d,!1),u.removeProperty("transition"),u.removeProperty("transition-delay"),this.nextAnimationTime&&r+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),s)}),this.nextAnimationTime=r)}advanceAnimations(){const e=Date.now();let t=null;for(const s of Object.keys(this.animations)){const i=this.animations[s],n=`ag-cell-${s}`,o=`${n}-animation`;for(const[r,a]of i){if(!r.isAlive()||!r.comp){i.delete(r);continue}const{phase:l,flashEndTime:c,fadeEndTime:d}=a,h=l==="flash"?c:d;if(!(e+15>=h)){t=Math.min(h,t??1/0);continue}const{comp:f,eGui:{style:p}}=r;switch(l){case"flash":f.toggleCss(n,!1),f.toggleCss(o,!0),p.transition=`background-color ${d-c}ms`,p.transitionDelay=`${c-e}ms`,t=Math.min(d,t??1/0),a.phase="fade";break;case"fade":f.toggleCss(n,!1),f.toggleCss(o,!1),p.removeProperty("transition"),p.removeProperty("transition-delay"),i.delete(r);break}}}t==null?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;const s=A3(e.cellPosition);t.cells[s]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t==null?void 0:t.flashDuration,t==null?void 0:t.fadeDuration)}destroy(){for(const e of Object.keys(this.animations))this.animations[e].clear()}};function D7(e,t={}){const{cellFlashSvc:s}=e;s&&e.frameworkOverrides.wrapIncoming(()=>{for(const i of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns))s.flashCell(i,t)})}var _7={moduleName:"HighlightChanges",version:fe,beans:[T7],userComponents:{agAnimateShowChangeCellRenderer:E7,agAnimateSlideCellRenderer:P7},apiFunctions:{flashCells:D7}};function M7(e){var t;return((t=e.stateSvc)==null?void 0:t.getState())??{}}function k7(e,t,s){var i;return(i=e.stateSvc)==null?void 0:i.setState(t,s)}function wE(e){return e={...e},e.version||(e.version="32.1.0"),e.version==="32.1.0"&&(e=I7(e)),e.version=fe,e}function I7(e){return e.cellSelection=L7(e,"rangeSelection"),e}function L7(e,t){if(e&&typeof e=="object")return e[t]}var O7=class extends ${constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Us(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Us(this,()=>{this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(this.updateCachedState("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowGroupExpansion",void 0)):(this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("ssrmRowGroupExpansion",void 0))},0),this.onRowSelectedDebounced=Us(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){const{gos:e,ctrlsSvc:t,colDelayRenderSvc:s}=this.beans;this.isClientSideRowModel=rs(e);const i=wE(e.get("initialState")??{}),n=i.partialColumnState;delete i.partialColumnState,this.cachedState=i;const o=this.suppressEventsAndDispatchInitEvent.bind(this);t.whenReady(this,()=>o(()=>this.setupStateOnGridReady(i))),(i.columnOrder||i.columnVisibility||i.columnSizing||i.columnPinning||i.columnGroup)&&(s==null||s.hideColumns("columnState"));const[r,a,l]=this.addManagedEventListeners({newColumnsLoaded:({source:c})=>{c==="gridInitializing"&&(r(),o(()=>{this.setupStateOnColumnsInitialised(i,!!n),s==null||s.revealColumns("columnState")}))},rowCountReady:()=>{a==null||a(),o(()=>this.setupStateOnRowCountReady(i))},firstDataRendered:()=>{l==null||l(),o(()=>this.setupStateOnFirstDataRendered(i))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setState(e,t){const s=wE(e);delete s.partialColumnState,this.cachedState=s,this.startSuppressEvents();const i="api",n=t?new Set(t):void 0;this.setGridReadyState(s,i,n),this.setColumnsInitialisedState(s,i,!!n,n),this.setRowCountState(s,i,n),setTimeout(()=>{this.isAlive()&&this.setFirstDataRenderedState(s,i,n),this.stopSuppressEvents(i)})}setGridReadyState(e,t,s){var i,n;t==="api"&&!(s!=null&&s.has("sideBar"))&&((n=(i=this.beans.sideBar)==null?void 0:i.comp)==null||n.setState(e.sideBar)),this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(e){this.setGridReadyState(e,"gridInitializing");const t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(e,t,s,i){this.setColumnState(e,t,s,i),this.setColumnGroupState(e,t,i),this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(e,t){this.setColumnsInitialisedState(e,"gridInitializing",t);const s=i=>()=>this.updateColumnState([i]);this.addManagedEventListeners({columnValueChanged:s("aggregation"),columnMoved:s("columnOrder"),columnPinned:s("columnPinning"),columnResized:s("columnSizing"),columnVisible:s("columnVisibility"),columnPivotChanged:s("pivot"),columnPivotModeChanged:s("pivot"),columnRowGroupChanged:s("rowGroup"),sortChanged:s("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(e,t,s){const{filter:i,rowGroupExpansion:n,ssrmRowGroupExpansion:o,rowSelection:r,pagination:a}=e,l=(d,h)=>!(s!=null&&s.has(d))&&(h||t==="api");l("filter",i)&&this.setFilterState(i),l("rowGroupExpansion",n)&&this.setRowGroupExpansionState(o,n,t),l("rowSelection",r)&&this.setRowSelectionState(r,t),l("pagination",a)&&this.setPaginationState(a,t);const c=this.updateCachedState.bind(this);c("filter",this.getFilterState()),this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(c("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),c("rowGroupExpansion",void 0)):(c("rowGroupExpansion",this.getRowGroupExpansionState()),c("ssrmRowGroupExpansion",void 0)),c("rowSelection",this.getRowSelectionState()),c("pagination",this.getPaginationState())}setupStateOnRowCountReady(e){this.setRowCountState(e,"gridInitializing");const t=this.updateCachedState.bind(this),s=()=>{this.updateRowGroupExpansionStateTimer=0,this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(t("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),t("rowGroupExpansion",void 0)):(t("rowGroupExpansion",this.getRowGroupExpansionState()),t("ssrmRowGroupExpansion",void 0))},i=()=>t("filter",this.getFilterState()),{gos:n,colFilter:o}=this.beans;this.addManagedEventListeners({filterChanged:i,rowExpansionStateChanged:this.onRowGroupOpenedDebounced,expandOrCollapseAll:s,columnRowGroupChanged:s,rowDataUpdated:()=>{(n.get("groupDefaultExpanded")!==0||n.get("isGroupOpenByDefault"))&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(s)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:r=>{(r.newPage||r.newPageSize)&&t("pagination",this.getPaginationState())}}),o&&this.addManagedListeners(o,{filterStateChanged:i})}setFirstDataRenderedState(e,t,s){const{scroll:i,cellSelection:n,focusedCell:o,columnOrder:r,rowPinning:a}=e,l=(h,u)=>!(s!=null&&s.has(h))&&(u||t==="api");l("focusedCell",o)&&this.setFocusedCellState(o),l("cellSelection",n)&&this.setCellSelectionState(n),l("scroll",i)&&this.setScrollState(i),l("rowPinning",a)&&this.setRowPinningState(a),this.setColumnPivotState(!!(r!=null&&r.orderedColIds),t);const c=this.updateCachedState.bind(this);c("sideBar",this.getSideBarState()),c("focusedCell",this.getFocusedCellState());const d=this.getRangeSelectionState();c("rangeSelection",d),c("cellSelection",d),c("scroll",this.getScrollState())}setupStateOnFirstDataRendered(e){this.setFirstDataRenderedState(e,"gridInitializing");const t=this.updateCachedState.bind(this),s=()=>t("focusedCell",this.getFocusedCellState());this.addManagedEventListeners({cellFocused:s,cellFocusCleared:s,cellSelectionChanged:i=>{if(i.finished){const n=this.getRangeSelectionState();t("rangeSelection",n),t("cellSelection",n)}},bodyScrollEnd:()=>t("scroll",this.getScrollState()),pinnedRowsChanged:()=>t("rowPinning",this.getRowPinningState())})}getColumnState(){const e=this.beans;return _8(Ev(e),e.colModel.isPivotMode())}setColumnState(e,t,s,i){const{sort:n,rowGroup:o,aggregation:r,pivot:a,columnPinning:l,columnVisibility:c,columnSizing:d,columnOrder:h}=e;let u=!1;const f=(I,O)=>{const V=!(i!=null&&i.has(I))&&!!(O||t==="api");return u||(u=V),V},p={},m=I=>{let O=p[I];return O||(O={colId:I},p[I]=O,O)},v={},C=f("sort",n);C&&(n==null||n.sortModel.forEach(({colId:I,sort:O},V)=>{const ee=m(I);ee.sort=O,ee.sortIndex=V})),(C||!s)&&(v.sort=null,v.sortIndex=null);const b=f("rowGroup",o);b&&(o==null||o.groupColIds.forEach((I,O)=>{const V=m(I);V.rowGroup=!0,V.rowGroupIndex=O})),(b||!s)&&(v.rowGroup=null,v.rowGroupIndex=null);const y=f("aggregation",r);y&&(r==null||r.aggregationModel.forEach(({colId:I,aggFunc:O})=>{m(I).aggFunc=O})),(y||!s)&&(v.aggFunc=null);const S=f("pivot",a);S&&(a==null||a.pivotColIds.forEach((I,O)=>{const V=m(I);V.pivot=!0,V.pivotIndex=O}),this.gos.updateGridOptions({options:{pivotMode:!!(a!=null&&a.pivotMode)},source:t})),(S||!s)&&(v.pivot=null,v.pivotIndex=null);const R=f("columnPinning",l);if(R){for(const I of(l==null?void 0:l.leftColIds)??[])m(I).pinned="left";for(const I of(l==null?void 0:l.rightColIds)??[])m(I).pinned="right"}(R||!s)&&(v.pinned=null);const A=f("columnVisibility",c);if(A)for(const I of(c==null?void 0:c.hiddenColIds)??[])m(I).hide=!0;(A||!s)&&(v.hide=null);const F=f("columnSizing",d);if(F)for(const{colId:I,flex:O,width:V}of(d==null?void 0:d.columnSizingModel)??[]){const ee=m(I);ee.flex=O??null,ee.width=V}(F||!s)&&(v.flex=null);const T=h==null?void 0:h.orderedColIds,k=!!(T!=null&&T.length)&&!(i!=null&&i.has("columnOrder")),N=k?T.map(I=>m(I)):Object.values(p);(N.length||u)&&(this.columnStates=N,Zn(this.beans,{state:N,applyOrder:k,defaultState:v},t))}setColumnPivotState(e,t){const s=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;this.columnGroupStates=void 0;const n=this.beans,{pivotResultCols:o,colGroupSvc:r}=n;if(o!=null&&o.isPivotResultColsPresent()){if(s){const a=[];for(const l of s)o.getPivotResultCol(l.colId)&&a.push(l);Zn(n,{state:a,applyOrder:e},t)}i&&(r==null||r.setColumnGroupState(i,t))}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;const t=e.getColumnGroupState();return M8(t)}setColumnGroupState(e,t,s){var a;const i=this.beans.colGroupSvc;if(!i||s!=null&&s.has("columnGroup")||t!=="api"&&!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const n=new Set((a=e.columnGroup)==null?void 0:a.openColumnGroupIds),r=i.getColumnGroupState().map(({groupId:l})=>{const c=n.has(l);return c&&n.delete(l),{groupId:l,open:c}});for(const l of n)r.push({groupId:l,open:!0});r.length&&(this.columnGroupStates=r),i.setColumnGroupState(r,t)}getFilterState(){const e=this.beans.filterManager;let t=e==null?void 0:e.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);const s=e==null?void 0:e.getFilterState(),i=(e==null?void 0:e.getAdvFilterModel())??void 0;return t||i||s?{filterModel:t,columnFilterState:s,advancedFilterModel:i}:void 0}setFilterState(e){const t=this.beans.filterManager,{filterModel:s,columnFilterState:i,advancedFilterModel:n}=e??{filterModel:null,columnFilterState:null,advancedFilterModel:null};(s!==void 0||i!==void 0)&&(t==null||t.setFilterState(s??null,i??null,"columnFilter")),n!==void 0&&(t==null||t.setAdvFilterModel(n??null,"advancedFilter"))}getRangeSelectionState(){var t;const e=(t=this.beans.rangeSvc)==null?void 0:t.getCellRanges().map(s=>{const{id:i,type:n,startRow:o,endRow:r,columns:a,startColumn:l}=s;return{id:i,type:n,startRow:o,endRow:r,colIds:a.map(c=>c.getColId()),startColId:l.getColId()}});return e!=null&&e.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:s,colModel:i,visibleCols:n}=this.beans;if(!Jr(t)||!s)return;const o=[];for(const r of(e==null?void 0:e.cellRanges)??[]){const a=[];for(const c of r.colIds){const d=i.getCol(c);d&&a.push(d)}if(!a.length)continue;let l=i.getCol(r.startColId);if(!l){const c=n.allCols,d=new Set(a);l=c.find(h=>d.has(h))}o.push({...r,columns:a,startColumn:l})}s.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=(e==null?void 0:e.getHScrollPosition())??{left:0},{top:s}=(e==null?void 0:e.getVScrollPosition())??{top:0};return s||t?{top:s,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:s}=e??{top:0,left:0},{frameworkOverrides:i,rowRenderer:n,animationFrameSvc:o,ctrlsSvc:r}=this.beans;i.wrapIncoming(()=>{var a;r.get("center").setCenterViewportScrollLeft(s),(a=r.getScrollFeature())==null||a.setVerticalScrollPosition(t),n.redraw({afterScroll:!0}),o==null||o.flushAllFrames()})}getSideBarState(){var e,t;return(t=(e=this.beans.sideBar)==null?void 0:e.comp)==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:s,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:s,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{focusSvc:t,colModel:s}=this.beans;if(!e){t.clearFocusedCell();return}const{colId:i,rowIndex:n,rowPinned:o}=e;t.setFocusedCell({column:s.getCol(i),rowIndex:n,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const s=e.getCurrentPage(),i=t.get("paginationAutoPageSize")?void 0:e.getPageSize();if(!(!s&&!i))return{page:s,pageSize:i}}setPaginationState(e,t){const{pagination:s,gos:i}=this.beans;if(!s)return;const{pageSize:n,page:o}=e??{page:0,pageSize:i.get("paginationPageSize")},r=t==="gridInitializing";n&&!i.get("paginationAutoPageSize")&&s.setPageSize(n,r?"initialState":"pageSizeSelector"),typeof o=="number"&&(r?s.setPage(o):s.goToPage(o))}getRowSelectionState(){var i;const e=this.beans.selectionSvc;if(!e)return;const t=e.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!((i=t==null?void 0:t.toggledNodes)!=null&&i.length)?void 0:t}setRowSelectionState(e,t){var s;(s=this.beans.selectionSvc)==null||s.setSelectionState(e,t,t==="api")}getRowGroupExpansionState(){const{expansionSvc:e}=this.beans;if(e)return e.getExpansionState()}getRowPinningState(){var e;return(e=this.beans.pinnedRowModel)==null?void 0:e.getPinnedState()}setRowPinningState(e){const t=this.beans.pinnedRowModel;e?t==null||t.setPinnedState(e):t==null||t.reset()}setRowGroupExpansionState(e,t,s){const i=this.beans.expansionSvc;if(!i)return;const n=t??{expandedRowGroupIds:[],collapsedRowGroupIds:[]};i.setExpansionState(n,s)}updateColumnState(e){const t=this.getColumnState();let s=!1;const i=this.cachedState;for(const n of Object.keys(t)){const o=t[n];Ig(o,i[n])||(s=!0)}this.cachedState={...i,...t},s&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const s=this.cachedState[e];this.setCachedStateValue(e,t),Ig(t,s)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){const e=this.staleStateKeys;for(const t of e)t==="rowSelection"&&this.setCachedStateValue(t,this.getRowSelectionState());e.clear()}dispatchStateUpdateEvent(e){if(!this.suppressEvents){for(const t of e)this.queuedUpdateSources.add(t);this.dispatchStateUpdateEventDebounced()}}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}startSuppressEvents(){var e;this.suppressEvents=!0,(e=this.beans.colAnimation)==null||e.setSuppressAnimation(!0)}stopSuppressEvents(e){setTimeout(()=>{var t;this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&((t=this.beans.colAnimation)==null||t.setSuppressAnimation(!1),this.dispatchStateUpdateEvent([e]))})}suppressEventsAndDispatchInitEvent(e){this.startSuppressEvents(),e(),this.stopSuppressEvents("gridInitializing")}},N7={moduleName:"GridState",version:fe,beans:[O7],apiFunctions:{getState:M7,setState:k7}};function H7(e){return e.rowModel.isLastRowIndexKnown()}function B7(e){var t;return((t=e.pagination)==null?void 0:t.getPageSize())??100}function G7(e){var t;return((t=e.pagination)==null?void 0:t.getCurrentPage())??0}function V7(e){var t;return((t=e.pagination)==null?void 0:t.getTotalPages())??1}function z7(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()}function W7(e){var t;(t=e.pagination)==null||t.goToNextPage()}function $7(e){var t;(t=e.pagination)==null||t.goToPreviousPage()}function U7(e){var t;(t=e.pagination)==null||t.goToFirstPage()}function j7(e){var t;(t=e.pagination)==null||t.goToLastPage()}function K7(e,t){var s;(s=e.pagination)==null||s.goToPage(t)}var q7=class extends ${constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,s=()=>{const i=Math.max(Uc(t),1),n=Math.floor(e/i);t.pagination.setPageSize(n,"autoCalculated")};this.isBodyRendered?Us(this,s,50)():(s(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},Vu="paginationPageSizeSelector",Y7={tag:"span",cls:"ag-paging-page-size"},X7=class extends Et{constructor(){super(Y7),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(Vu,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!(e!=null&&e.newPageSize))return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){Ks(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(Vu)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),s=!t||!e.includes(t);if(s){const n=this.gos.exists("paginationPageSize"),o=this.gos.get(Vu)!==!0;oe(94,{pageSizeSet:n,pageSizesSet:o,pageSizeOptions:e,paginationPageSizeOption:t}),o||oe(95,{paginationPageSizeOption:t,paginationPageSizeSelector:Vu}),e.unshift("")}const i=String(s?"":t);this.selectPageSizeComp?(wl(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(i,!0)):this.createPageSizeSelectorComp(e,i),this.hasEmptyOption=s}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const s=this.getLocaleTextFunc(),i=s("pageSizeSelectorLabel","Page Size:"),n=s("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new v0).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(n).setLabel(i).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(Vu);return!Array.isArray(t)||!(t!=null&&t.length)?e:[...t].sort((s,i)=>s-i)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},Q7={selector:"AG-PAGE-SIZE-SELECTOR",component:X7},J7=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}",Z7=class extends a_{constructor(){super(),this.btFirst=ge,this.btPrevious=ge,this.btNext=ge,this.btLast=ge,this.lbRecordCount=ge,this.lbFirstRowOnPage=ge,this.lbLastRowOnPage=ge,this.lbCurrent=ge,this.lbTotal=ge,this.pageSizeComp=ge,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(J7)}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[Q7]);const{btFirst:t,btPrevious:s,btNext:i,btLast:n}=this;this.activateTabIndex([t,s,i,n]),t.insertAdjacentElement("afterbegin",Cn(e?"last":"first",this.beans)),s.insertAdjacentElement("afterbegin",Cn(e?"next":"previous",this.beans)),i.insertAdjacentElement("afterbegin",Cn(e?"previous":"next",this.beans)),n.insertAdjacentElement("afterbegin",Cn(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(o):jW(this.beans,o),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){if(!this.areListenersSetup){this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)});for(const e of[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}]){const{el:t,fn:s}=e;this.addManagedListeners(t,{click:s,keydown:i=>{(i.key===H.ENTER||i.key===H.SPACE)&&(i.preventDefault(),s())}})}UW(this.beans,this,this.getGui()),this.areListenersSetup=!0}}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):k8(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${t}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-first-row`}},{tag:"span",attrs:{id:`${t}-to`},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-last-row`}},{tag:"span",attrs:{id:`${t}-of`},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${t}-start-page`},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${t}-start-page-number`}},{tag:"span",attrs:{id:`${t}-of-page`},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${t}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),s=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const i=this.isZeroPagesToDisplay(),n=e===s-1;this.nextButtonDisabled=n||i,this.lastButtonDisabled=!t||i||e===s-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){rB(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),s=this.pagination.getMasterRowCount(),i=e?s:null,n=this.pagination.getCurrentPage(),o=this.pagination.getPageSize();let r,a;this.isZeroPagesToDisplay()?r=a=0:(r=o*n+1,a=r+o-1,e&&a>i&&(a=i));const l=r+o-1,c=!e&&s<l,d=this.formatNumber(r);this.lbFirstRowOnPage.textContent=d;let h;const u=this.getLocaleTextFunc();c?h=u("pageLastRowUnknown","?"):h=this.formatNumber(a),this.lbLastRowOnPage.textContent=h;const p=t>0?n+1:0,m=this.formatNumber(p);this.lbCurrent.textContent=m;let v,C;if(e)v=this.formatNumber(t),C=this.formatNumber(i);else{const b=u("more","more");v=b,C=b}this.lbTotal.textContent=v,this.lbRecordCount.textContent=C,this.announceAriaStatus(d,h,C,m,v)}announceAriaStatus(e,t,s,i,n){var h,u;const o=this.getLocaleTextFunc(),r=o("page","Page"),a=o("to","to"),l=o("of","of"),c=`${e} ${a} ${t} ${l} ${s}`,d=`${r} ${i} ${l} ${n}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,(h=this.ariaAnnounce)==null||h.announceValue(c,"paginationRow")),d!==this.ariaPageStatus&&(this.ariaPageStatus=d,(u=this.ariaAnnounce)==null||u.announceValue(d,"paginationPage"))}},e9={selector:"AG-PAGINATION",component:Z7},t9=class extends ${constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return e9}isPaginateChildRows(){const e=this.gos;return e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")?!0:e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;if(!this.active||t===e||typeof t!="number")return;const{editSvc:s}=this.beans;s!=null&&s.isEditing()&&(s.isBatchEditing()?s.cleanupEditors():s.stopEditing(void 0,{source:"api"})),this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(e){var s,i;if(!this.active)return;let t=e;this.paginateChildRows||(t=((i=(s=this.beans.rowModel).getTopLevelIndexFromDisplayedIndex)==null?void 0:i.call(s,e))??e),this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return this.active?e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return pe(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:pe(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:pe(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:pe(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const s=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}s!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0){this.setZeroRows();return}const s=this.pageSize,i=t-1;this.totalPages=Math.floor(i/s)+1,this.adjustCurrentPageIfInvalid();const n=this.currentPage,o=s*n;let r=s*(n+1)-1;if(r>i&&(r=i),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(o),r===i)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const a=e.getTopLevelRowDisplayedIndex(r+1);this.bottomDisplayedRowIndex=a-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,e===0){this.setZeroRows();return}const{pageSize:t,currentPage:s}=this,i=e-1;this.totalPages=Math.floor(i/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*s,this.bottomDisplayedRowIndex=t*(s+1)-1,this.bottomDisplayedRowIndex>i&&(this.bottomDisplayedRowIndex=i)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:s=!1,newPageSize:i=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:s,newPageSize:i,keepRenderedRows:t})}},s9={moduleName:"Pagination",version:fe,beans:[t9,q7],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:H7,paginationGetPageSize:B7,paginationGetCurrentPage:G7,paginationGetTotalPages:V7,paginationGetRowCount:z7,paginationGoToNextPage:W7,paginationGoToPreviousPage:$7,paginationGoToFirstPage:U7,paginationGoToLastPage:j7,paginationGoToPage:K7},dependsOn:[_C]};function i9(e,t={}){const s=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(s))}function fM(e,t,s,i,n){t&&(i&&t.parent&&t.parent.level!==-1&&fM(e,t.parent,s,i,n),t.setExpanded(s,void 0,n))}function n9(e,t){return e.rowModel.getRowNode(t)}function o9(e,t,s,i){e.rowRenderer.addRenderedRowListener(t,s,i)}function r9(e){return e.rowRenderer.getRenderedNodes()}function a9(e,t,s){e.rowModel.forEachNode(t,s)}function l9(e){return e.rowRenderer.firstRenderedRow}function c9(e){return e.rowRenderer.lastRenderedRow}function d9(e,t){return e.rowModel.getRow(t)}function h9(e){return e.rowModel.getRowCount()}var u9={moduleName:"RowApi",version:fe,apiFunctions:{redrawRows:i9,setRowNodeExpanded:fM,getRowNode:n9,addRenderedRowListener:o9,getRenderedNodes:r9,forEachNode:a9,getFirstDisplayedRowIndex:l9,getLastDisplayedRowIndex:c9,getDisplayedRowAtIndex:d9,getDisplayedRowCount:h9}},g9={moduleName:"ScrollApi",version:fe,apiFunctions:{getVerticalPixelRange:EK,getHorizontalPixelRange:AK,ensureColumnVisible:eM,ensureIndexVisible:tM,ensureNodeVisible:FK}};function f9(e,t,s){if(!t)return;const i=e.ctrlsSvc.getGridBodyCtrl().eGridBody,n=`aria-${t}`;s===null?i.removeAttribute(n):i.setAttribute(n,s)}function p9(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function m9(e){e.frameworkOverrides.wrapIncoming(()=>{for(const t of e.ctrlsSvc.getHeaderRowContainerCtrls())t.refresh()})}function v9(e){var t;return((t=e.animationFrameSvc)==null?void 0:t.isQueueEmpty())??!0}function C9(e){var t;(t=e.animationFrameSvc)==null||t.flushAllFrames()}function w9(e){return{rowHeight:Uc(e),headerHeight:Dp(e)}}function b9(e,t={}){var o;const s=[];for(const r of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns)){const a=r.getCellRenderer();a!=null&&s.push(zg(a))}if((o=t.columns)!=null&&o.length)return s;const i=[],n=sS(t.rowNodes);for(const r of e.rowRenderer.getAllRowCtrls()){if(n&&!iS(r.rowNode,n)||!r.isFullWidth())continue;const a=r.getFullWidthCellRenderers();for(let l=0;l<a.length;l++){const c=a[l];c!=null&&i.push(zg(c))}}return[...i,...s]}var y9={moduleName:"RenderApi",version:fe,apiFunctions:{setGridAriaProperty:f9,refreshCells:p9,refreshHeader:m9,isAnimationFrameQueueEmpty:v9,flushAllAnimationFrames:C9,getSizesForCurrentTheme:w9,getCellRendererInstances:b9}};function S9(e,t){var s,i;typeof t=="number"?(s=e.colAutosize)==null||s.sizeColumnsToFit(t,"api"):(i=e.colAutosize)==null||i.sizeColumnsToFitGridBody(t)}function pM({colAutosize:e,visibleCols:t},s,i){Array.isArray(s)?e==null||e.autoSizeCols({colKeys:s,skipHeader:i,source:"api"}):e==null||e.autoSizeCols({...s,colKeys:s.colIds??t.allCols,source:"api"})}function x9(e,t){var s;t&&typeof t=="object"?pM(e,t):(s=e.colAutosize)==null||s.autoSizeAllColumns({source:"api",skipHeader:t})}var R9=class extends ${constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){var s;const{gos:e}=this,t=e.get("autoSizeStrategy");if(t){let i=!1;const n=t.type;if(n==="fitGridWidth"||n==="fitProvidedWidth")i=!0;else if(n==="fitCellContents"){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered(t)});const o=e.get("rowData");i=o!=null&&o.length>0&&rs(e)}i&&((s=this.beans.colDelayRenderSvc)==null||s.hideColumns(n))}}autoSizeCols(e){const{eventSvc:t,visibleCols:s}=this.beans;this.innerAutoSizeCols(e).then(i=>{var c;const n=d=>fu(t,Array.from(d),!0,"autosizeColumns");if(!e.scaleUpToFitGridWidth)return n(i);const o=bE(this.beans),r=d=>s.leftCols.some(h=>yg(h,d)),a=d=>s.rightCols.some(h=>yg(h,d)),l=e.colKeys.filter(d=>!na(d)&&!Wr(d)&&!r(d)&&!a(d));this.sizeColumnsToFit(o,e.source,!0,{defaultMaxWidth:e.defaultMaxWidth,defaultMinWidth:e.defaultMinWidth,columnLimits:(c=e.columnLimits)==null?void 0:c.map(d=>({...d,key:d.colId})),colKeys:l,onlyScaleUp:!0}),n(i)})}innerAutoSizeCols(e){return new Promise((t,s)=>{if(this.shouldQueueResizeOperations)return this.pushResizeOperation(()=>this.innerAutoSizeCols(e).then(t,s));const{colKeys:i,skipHeader:n,skipHeaderGroups:o,stopAtGroup:r,defaultMaxWidth:a,defaultMinWidth:l,columnLimits:c=[],source:d="api"}=e,{animationFrameSvc:h,renderStatus:u,colModel:f,autoWidthCalc:p,visibleCols:m}=this.beans;if(h==null||h.flushAllFrames(),this.timesDelayed<5&&u&&(!u.areHeaderCellsRendered()||!u.areCellsRendered())){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.innerAutoSizeCols(e).then(t,s)});return}this.timesDelayed=0;const v=new Set;let C=-1;const b=Object.fromEntries(c.map(({colId:R,...A})=>[R,A])),y=n??this.gos.get("skipHeaderOnAutoSize"),S=o??y;for(;C!==0;){C=0;const R=[];for(const A of i){if(!A||wG(A))continue;const F=f.getCol(A);if(!F||v.has(F))continue;const T=p.getPreferredWidthForColumn(F,y);if(T>0){const k=b[F.colId]??{};k.minWidth??(k.minWidth=l),k.maxWidth??(k.maxWidth=a);const N=E9(F,T,k);F.setActualWidth(N,d),v.add(F),C++}R.push(F)}R.length&&m.refresh(d)}S||this.autoSizeColumnGroupsByColumns(i,d,r),t(v)})}autoSizeColumn(e,t,s){this.autoSizeCols({colKeys:[e],skipHeader:s,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,s){const{colModel:i,ctrlsSvc:n}=this.beans,o=new Set,r=i.getColsForKeys(e);for(const l of r){let c=l.getParent();for(;c&&c!=s;)c.isPadding()||o.add(c),c=c.getParent()}let a;for(const l of o){for(const c of n.getHeaderRowContainerCtrls())if(a=c.getHeaderCtrlForColumn(l),a)break;a==null||a.resizeLeafColumnsToFit(t)}}autoSizeAllColumns(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(e));return}this.autoSizeCols({colKeys:this.beans.visibleCols.allCols,...e})}addColumnAutosizeListeners(e,t){const s=this.gos.get("skipHeaderOnAutoSize"),i=()=>{this.autoSizeColumn(t,"uiColumnResized",s)};e.addEventListener("dblclick",i);const n=new _l(e);return n.addEventListener("doubleTap",i),()=>{e.removeEventListener("dblclick",i),n.destroy()}}addColumnGroupResize(e,t,s){const i=this.gos.get("skipHeaderOnAutoSize"),n=()=>{const o=[],r=t.getDisplayedLeafColumns();for(const a of r)a.getColDef().suppressAutoSize||o.push(a.getColId());o.length>0&&this.autoSizeCols({colKeys:o,skipHeader:i,stopAtGroup:t,source:"uiColumnResized"}),s()};return e.addEventListener("dblclick",n),()=>e.removeEventListener("dblclick",n)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const s=bE(this.beans);if(s>0){this.sizeColumnsToFit(s,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):oe(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",s,i){var p,m;if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,s,i));return}const n={};for(const{key:v,...C}of(i==null?void 0:i.columnLimits)??[])n[typeof v=="string"?v:v.getColId()]=C;const o=this.beans.visibleCols.allCols;if(e<=0||!o.length)return;const r=ar(o);if(i!=null&&i.onlyScaleUp&&r>e||e===r&&o.every(C=>{if(C.colDef.suppressSizeToFit)return!0;const b=n==null?void 0:n[C.getId()],y=(b==null?void 0:b.minWidth)??(i==null?void 0:i.defaultMinWidth),S=(b==null?void 0:b.maxWidth)??(i==null?void 0:i.defaultMaxWidth),R=C.getActualWidth();return(y==null||R>=y)&&(S==null||R<=S)}))return;const l=[],c=[];for(const v of o){const C=((p=i==null?void 0:i.colKeys)==null?void 0:p.some(b=>yg(v,b)))??!0;v.getColDef().suppressSizeToFit||!C?c.push(v):l.push(v)}const d=l.slice(0);let h=!1;const u=v=>{to(l,v),c.push(v)};for(const v of l){v.resetActualWidth(t);const C=n==null?void 0:n[v.getId()],b=(C==null?void 0:C.minWidth)??(i==null?void 0:i.defaultMinWidth),y=(C==null?void 0:C.maxWidth)??(i==null?void 0:i.defaultMaxWidth),S=v.getActualWidth();typeof b=="number"&&S<b?v.setActualWidth(b,t,!0):typeof y=="number"&&S>y&&v.setActualWidth(y,t,!0)}for(;!h;){h=!0;const v=e-ar(c);if(v<=0)for(const C of l){const b=((m=n==null?void 0:n[C.getId()])==null?void 0:m.minWidth)??(i==null?void 0:i.defaultMinWidth)??C.minWidth;C.setActualWidth(b,t,!0)}else{const C=v/ar(l);let b=v;for(let y=l.length-1;y>=0;y--){const S=l[y],R=n==null?void 0:n[S.getId()],A=(R==null?void 0:R.minWidth)??(i==null?void 0:i.defaultMinWidth),F=(R==null?void 0:R.maxWidth)??(i==null?void 0:i.defaultMaxWidth),T=S.getMinWidth(),k=S.getMaxWidth(),N=typeof A=="number"&&A>T?A:T,I=typeof F=="number"&&F<k?F:k;let O=Math.round(S.getActualWidth()*C);O<N?(O=N,u(S),h=!1):O>I?(O=I,u(S),h=!1):y===0&&(O=b),S.setActualWidth(O,t,!0),b-=O}}}for(const v of d)v.fireColumnWidthChangedEvent(t);const f=this.beans.visibleCols;f.setLeftValues(t),f.updateBodyWidths(),!s&&fu(this.eventSvc,d,!0,t)}applyAutosizeStrategy(){const{gos:e,colDelayRenderSvc:t}=this.beans,s=e.get("autoSizeStrategy");(s==null?void 0:s.type)!=="fitGridWidth"&&(s==null?void 0:s.type)!=="fitProvidedWidth"||setTimeout(()=>{if(!this.isAlive())return;const i=s.type;if(i==="fitGridWidth"){const{columnLimits:n,defaultMinWidth:o,defaultMaxWidth:r}=s,a=n==null?void 0:n.map(({colId:l,minWidth:c,maxWidth:d})=>({key:l,minWidth:c,maxWidth:d}));this.sizeColumnsToFitGridBody({defaultMinWidth:o,defaultMaxWidth:r,columnLimits:a})}else i==="fitProvidedWidth"&&this.sizeColumnsToFit(s.width,"sizeColumnsToFit");t==null||t.revealColumns(i)})}onFirstDataRendered({colIds:e,...t}){setTimeout(()=>{var i;if(!this.isAlive())return;const s="autosizeColumns";e?this.autoSizeCols({...t,source:s,colKeys:e}):this.autoSizeAllColumns({...t,source:s}),(i=this.beans.colDelayRenderSvc)==null||i.revealColumns(t.type)})}processResizeOperations(){this.shouldQueueResizeOperations=!1;for(const e of this.resizeOperationQueue)e();this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function E9(e,t,s={}){const i=s.minWidth??e.getMinWidth();t<i&&(t=i);const n=s.maxWidth??e.getMaxWidth();return t>n&&(t=n),t}function bE({ctrlsSvc:e,scrollVisibleSvc:t}){const s=e.getGridBodyCtrl(),n=s.isVerticalScrollShowing()?t.getScrollbarWidth():0;return Ng(s.eGridBody)-n}var A9={moduleName:"ColumnAutoSize",version:fe,beans:[R9],apiFunctions:{sizeColumnsToFit:S9,autoSizeColumns:pM,autoSizeAllColumns:x9},dependsOn:[m_]},F9=".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}";function P9(e){var t;return((t=e.pinnedRowModel)==null?void 0:t.getPinnedTopRowCount())??0}function T9(e){var t;return((t=e.pinnedRowModel)==null?void 0:t.getPinnedBottomRowCount())??0}function D9(e,t){var s;return(s=e.pinnedRowModel)==null?void 0:s.getPinnedTopRow(t)}function _9(e,t){var s;return(s=e.pinnedRowModel)==null?void 0:s.getPinnedBottomRow(t)}function M9(e,t,s){var i;return(i=e.pinnedRowModel)==null?void 0:i.forEachPinnedRow(t,s)}var k9={moduleName:"PinnedRow",version:fe,beans:[P$],css:[F9],apiFunctions:{getPinnedTopRowCount:P9,getPinnedBottomRowCount:T9,getPinnedTopRow:D9,getPinnedBottomRow:_9,forEachPinnedRow:M9},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},I9=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column!==this.col||e.rowPinned!=this.firstNode.rowPinned?!1:this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){var s;const e=(s=this.firstNode.__autoHeights)==null?void 0:s[this.col.getColId()];if(e==null)return;let t=0;for(const i of this.spannedNodes)i!==this.lastNode&&(t+=i.rowHeight);return e-t}},L9=class extends ${constructor(e){super(),this.column=e}buildCache(e){var y;const{column:t,beans:{gos:s,pinnedRowModel:i,rowModel:n,valueSvc:o,pagination:r}}=this,{colDef:a}=t,l=this.getNodeMap(e),c=new Map,d=s.getCallback("isFullWidthRow"),h=a.equals,u=a.spanRows,f=typeof u=="function";let p=null,m=null,v;const C=(S,R)=>{p=S,m=null,v=R},b=S=>{const R=!S.isExpandable()&&!S.group&&!S.detail&&(d?!d({rowNode:S}):!0);if(S.rowIndex==null||!R){C(null,null);return}if(p==null||S.level!==p.level||S.footer||m&&S.rowIndex-1!==(m==null?void 0:m.getLastNode().rowIndex)){C(S,o.getValue(t,S));return}const A=o.getValue(t,S);if(f){const F=Be(s,{valueA:v,nodeA:p,valueB:A,nodeB:S,column:t,colDef:a});if(!u(F)){C(S,A);return}}else if(h?!h(v,A):v!==A){C(S,A);return}if(!m){const F=l==null?void 0:l.get(p);(F==null?void 0:F.firstNode)===p?(F.reset(),m=F):m=new I9(t,p),c.set(p,m)}m.addSpannedNode(S),c.set(S,m)};switch(e){case"center":(y=n.forEachDisplayedNode)==null||y.call(n,S=>{(!r||r.isRowInPage(S.rowIndex))&&b(S)}),this.centerValueNodeMap=c;break;case"top":i==null||i.forEachPinnedRow("top",b),this.topValueNodeMap=c;break;case"bottom":i==null||i.forEachPinnedRow("bottom",b),this.bottomValueNodeMap=c;break}}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this.getNodeMap(e.rowPinned).get(e)}getNodeMap(e){switch(e){case"top":return this.topValueNodeMap;case"bottom":return this.bottomValueNodeMap;default:return this.centerValueNodeMap}}},O9=class extends ${constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=Us(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=Us(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){const e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){const{gos:t}=this.beans;if(!t.get("enableCellSpan")||this.spanningColumns.has(e))return;const s=this.createManagedBean(new L9(e));this.spanningColumns.set(e,s),s.buildCache("top"),s.buildCache("bottom"),s.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated({node:e}){const{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(this.pinnedTimeout!=null)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t==null||t.createCtrls("top"),t==null||t.createCtrls("bottom")},0);return}this.modelTimeout==null&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t==null||t.createCtrls("center")},0))}buildModelCaches(){this.modelTimeout!=null&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){this.pinnedTimeout!=null&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){const s=this.spanningColumns.get(e);return s?s.isCellSpanning(t):!1}getCellSpanByPosition(e){const{pinnedRowModel:t,rowModel:s}=this.beans,i=e.column,n=e.rowIndex,o=this.spanningColumns.get(i);if(!o)return;let r;switch(e.rowPinned){case"top":r=t==null?void 0:t.getPinnedTopRow(n);break;case"bottom":r=t==null?void 0:t.getPinnedBottomRow(n);break;default:r=s.getRow(n)}if(r)return o.getCellSpan(r)}getCellStart(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.firstNode.rowIndex}:e}getCellEnd(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.getLastNode().rowIndex}:e}getCellSpan(e,t){const s=this.spanningColumns.get(e);if(s)return s.getCellSpan(t)}forEachSpannedColumn(e,t){for(const[s,i]of this.spanningColumns)if(i.isCellSpanning(e)){const n=i.getCellSpan(e);t(s,n)}}destroy(){super.destroy(),this.spanningColumns.clear()}},N9=class extends th{constructor(e,t,s){super(e.col,e.firstNode,s,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,s,i,n,o,r){this.eWrapper=s,super.setComp(e,t,s,i,n,o,r),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){const{eGui:e,rowNode:t}=this;!e||t.rowIndex==null||gv(e,t.rowIndex)}setAriaRowSpan(){hB(this.eGui,this.cellSpan.spannedNodes.size)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){const e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){const{beans:t}=this;if(PC(t)){this.focusedCellPosition=void 0;return}const s=this.isCellFocused();s||(this.focusedCellPosition=void 0),e&&s&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},H9=class extends kv{onRowIndexChanged(){super.onRowIndexChanged();for(const e of this.getAllCellCtrls())e.refreshAriaRowIndex()}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){var i;const t=(i=this.beans.rowSpanSvc)==null?void 0:i.getCellSpan(e,this.rowNode);if(!(!t||t.firstNode!==this.rowNode))return new N9(t,this,this.beans)}isCorrectCtrlForSpan(e){var i;const t=(i=this.beans.rowSpanSvc)==null?void 0:i.getCellSpan(e.column,this.rowNode);return!t||t.firstNode!==this.rowNode?!1:e.getCellSpan()===t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},B9=class extends ${constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){const{rowSpanSvc:t}=this.beans,s=this.getCtrlsMap(e),i=s.size,n=this.getAllRelevantRowControls(e),o=new Map;let r=!1;for(const l of n)l.isAlive()&&(t==null||t.forEachSpannedColumn(l.rowNode,(c,d)=>{if(o.has(d.firstNode))return;const h=s.get(d.firstNode);if(h){o.set(d.firstNode,h),s.delete(d.firstNode);return}r=!0;const u=new H9(d.firstNode,this.beans,!1,!1,!1);o.set(d.firstNode,u)}));this.setCtrlsMap(e,o);const a=o.size===i;if(!(!r&&a)){for(const l of s.values())l.destroyFirstPass(!0),l.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){const{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){const{rowSpanSvc:t}=this.beans,s=t==null?void 0:t.getCellSpanByPosition(e);if(!s)return;const i=this.getCtrlsMap(e.rowPinned).get(s.firstNode);if(i)return i.getAllCellCtrls().find(n=>n.column===e.column)}getCtrls(e){return[...this.getCtrlsMap(e).values()]}destroyRowCtrls(e){for(const t of this.getCtrlsMap(e).values())t.destroyFirstPass(!0),t.destroySecondPass();this.setCtrlsMap(e,new Map)}getCtrlsMap(e){switch(e){case"top":return this.topCtrls;case"bottom":return this.bottomCtrls;default:return this.centerCtrls}}setCtrlsMap(e,t){switch(e){case"top":this.topCtrls=t;break;case"bottom":this.bottomCtrls=t;break;default:this.centerCtrls=t;break}}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},G9={moduleName:"CellSpan",version:fe,beans:[O9,B9]},V9=class extends ${constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,s=e.colDef,i=s.cellClassRules,n=this.getCellClassParams(e,s);L0(this.beans.expressionSvc,i===this.cellClassRules?void 0:this.cellClassRules,i,n,o=>t.toggleCss(o,!0),o=>t.toggleCss(o,!1)),this.cellClassRules=i}applyUserStyles(){const e=this.column,t=e.colDef,s=t.cellStyle;if(!s)return;let i;if(typeof s=="function"){const n=this.getCellClassParams(e,t);i=s(n)}else i=s;i&&this.cellComp.setUserStyles(i)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,s=e.colDef,i=this.getCellClassParams(e,s);for(const o of this.staticClasses)t.toggleCss(o,!1);const n=this.beans.cellStyles.getStaticCellClasses(s,i);this.staticClasses=n;for(const o of n)t.toggleCss(o,!0)}getCellClassParams(e,t){const{value:s,rowNode:i}=this.cellCtrl;return Be(this.beans.gos,{value:s,data:i.data,node:i,colDef:t,column:e,rowIndex:i.rowIndex})}},z9=class extends ${constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,s,i){L0(this.beans.expressionSvc,void 0,e.cellClassRules,t,s,i),this.processStaticCellClasses(e,t,s)}getStaticCellClasses(e,t){const{cellClass:s}=e;if(!s)return[];let i;return typeof s=="function"?i=s(t):i=s,typeof i=="string"&&(i=[i]),i||[]}createCellCustomStyleFeature(e,t){return new V9(e,t)}processStaticCellClasses(e,t,s){this.getStaticCellClasses(e,t).forEach(n=>{s(n)})}},W9={moduleName:"CellStyle",version:fe,beans:[z9]},$9={moduleName:"RowStyle",version:fe,beans:[T6]};function U9(e,t){var s;return!!((s=e.colHover)!=null&&s.isHovered(t))}var j9=class extends ${constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=s=>{const{beans:i,gos:n,element:o,columns:r}=this,a=i.colHover;if(s??!!n.get("columnHoverHighlight"))this.destroyManagedListeners=this.addManagedElementListeners(o,{mouseover:a.setMouseOver.bind(a,r),mouseout:a.clearMouseOver.bind(a)});else{for(const c of this.destroyManagedListeners)c();this.destroyManagedListeners=[]}}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{this.enableFeature(e)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},K9="ag-column-hover",q9=class extends ${constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{e||this.clearMouseOver()})}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,s){const i=()=>{const n=this.isHovered(s);t.toggleCss("ag-column-hover",n)};e.addManagedEventListeners({columnHoverChanged:i}),i()}onCellColumnHover(e,t){if(!t)return;const s=this.isHovered(e);t.toggleCss(K9,s)}addHeaderFilterColumnHoverListener(e,t,s,i){this.createHoverFeature(e,[s],i);const n=()=>{const o=this.isHovered(s);t.toggleCss("ag-column-hover",o)};e.addManagedEventListeners({columnHoverChanged:n}),n()}createHoverFeature(e,t,s){e.createManagedBean(new j9(t,s))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},Y9={moduleName:"ColumnHover",version:fe,beans:[q9],apiFunctions:{isColumnHovered:U9}},X9=class extends ${constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){var e,t;this.wrapSvc=(t=(e=this.beans.frameworkOverrides).createGlobalEventListenerWrapper)==null?void 0:t.call(e)}addListener(e,t){var o;const s=((o=this.wrapSvc)==null?void 0:o.wrap(e,t))??t,i=!Xm.has(e),n=i?this.asyncListeners:this.syncListeners;n.has(e)||n.set(e,new Set),n.get(e).add(s),this.eventSvc.addListener(e,s,i)}removeListener(e,t){var o,r;const s=((o=this.wrapSvc)==null?void 0:o.unwrap(e,t))??t,i=this.asyncListeners.get(e),n=!!(i!=null&&i.delete(s));n||(r=this.syncListeners.get(e))==null||r.delete(s),this.eventSvc.removeListener(e,s,n)}addGlobalListener(e){var o;const t=((o=this.wrapSvc)==null?void 0:o.wrapGlobal(e))??e,s=(r,a)=>{Xm.has(r)&&t(r,a)},i=(r,a)=>{Xm.has(r)||t(r,a)};this.globalListenerPairs.set(e,{syncListener:s,asyncListener:i});const n=this.eventSvc;n.addGlobalListener(s,!1),n.addGlobalListener(i,!0)}removeGlobalListener(e){const{eventSvc:t,wrapSvc:s,globalListenerPairs:i}=this,n=(s==null?void 0:s.unwrapGlobal(e))??e;if(i.has(n)){const{syncListener:r,asyncListener:a}=i.get(n);t.removeGlobalListener(r,!1),t.removeGlobalListener(a,!0),i.delete(e)}else this.syncGlobalListeners.delete(n),t.removeGlobalListener(n,!1)}destroyEventListeners(e,t){e.forEach((s,i)=>{s.forEach(n=>this.eventSvc.removeListener(i,n,t)),s.clear()}),e.clear()}destroyGlobalListeners(e,t){for(const s of e)this.eventSvc.removeGlobalListener(s,t);e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:s,asyncListener:i})=>{t.removeGlobalListener(s,!1),t.removeGlobalListener(i,!0)}),e.clear()}};function Q9(e,t,s){var i;(i=e.apiEventSvc)==null||i.addListener(t,s)}function J9(e,t,s){var i;(i=e.apiEventSvc)==null||i.removeListener(t,s)}function Z9(e,t){var s;(s=e.apiEventSvc)==null||s.addGlobalListener(t)}function eY(e,t){var s;(s=e.apiEventSvc)==null||s.removeGlobalListener(t)}var tY={moduleName:"EventApi",version:fe,apiFunctions:{addEventListener:Q9,addGlobalListener:Z9,removeEventListener:J9,removeGlobalListener:eY},beans:[X9]},sY={moduleName:"Locale",version:fe,beans:[D8]},iY=class extends ${constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=Us(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){var a,l,c,d;const{visibleCols:e,rowModel:t,rowSpanSvc:s,pinnedRowModel:i}=this.beans,n=e.autoHeightCols;let o=!1;const r=h=>{var p;const u=h.__autoHeights;let f=hl(this.beans,h).height;for(const m of n){let v=u==null?void 0:u[m.getColId()];const C=s==null?void 0:s.getCellSpan(m,h);if(C){if(C.getLastNode()!==h)continue;if(v=(p=s==null?void 0:s.getCellSpan(m,h))==null?void 0:p.getLastNodeAutoHeight(),!v)return}if(v==null){if(this.colSpanSkipCell(m,h))continue;return}f=Math.max(v,f)}f!==h.rowHeight&&(h.setRowHeight(f),o=!0)};(a=i==null?void 0:i.forEachPinnedRow)==null||a.call(i,"top",r),(l=i==null?void 0:i.forEachPinnedRow)==null||l.call(i,"bottom",r),(c=t.forEachDisplayedNode)==null||c.call(t,r),o&&((d=t.onRowHeightChanged)==null||d.call(t))}setRowAutoHeight(e,t,s){if(e.__autoHeights??(e.__autoHeights={}),t==null){delete e.__autoHeights[s.getId()];return}const i=e.__autoHeights[s.getId()];e.__autoHeights[s.getId()]=t,i!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){const{colModel:s,colViewport:i,visibleCols:n}=this.beans;if(!s.colSpanActive)return!1;let o=[];switch(e.getPinned()){case"left":o=n.getLeftColsForRow(t);break;case"right":o=n.getRightColsForRow(t);break;case null:o=i.getColsWithinViewport(t);break}return!o.includes(e)}setupCellAutoHeight(e,t,s){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;const i=t.parentElement,{rowNode:n,column:o}=e,r=this.beans,a=d=>{var b;if((b=this.beans.editSvc)!=null&&b.isEditing(e)||!e.isAlive()||!s.isAlive())return;const{paddingTop:h,paddingBottom:u,borderBottomWidth:f,borderTopWidth:p}=fd(i),m=h+u+f+p,C=t.offsetHeight+m;if(d<5){const y=ks(r),S=!(y!=null&&y.contains(t)),R=C==0;if(S||R){window.setTimeout(()=>a(d+1),0);return}}this.setRowAutoHeight(n,C,o)},l=()=>a(0);l();const c=Cl(r,t,l);return s.addDestroyFunc(()=>{c(),this.setRowAutoHeight(n,void 0,o)}),!0}setAutoHeightActive(e){this.active=e.list.some(t=>t.isVisible()&&t.isAutoHeight())}areRowsMeasured(){if(!this.active)return!0;const e=this.beans.rowRenderer.getAllRowCtrls();let t=null;for(const{rowNode:s}of e)if((!t||this.beans.colModel.colSpanActive)&&(t=this.beans.colViewport.getColsWithinViewport(s).filter(n=>n.isAutoHeight())),t.length!==0){if(!s.__autoHeights)return!1;for(const i of t){const n=s.__autoHeights[i.getColId()];if(!n||s.rowHeight<n)return!1}}return!0}},nY={moduleName:"RowAutoHeight",version:fe,beans:[iY]},oY={moduleName:"AllCommunity",version:fe,dependsOn:[i7,h7,y7,q8,nq,oq,rq,aq,lq,cq,dq,iq,Xj,Qj,Jj,Yj,eK,tK,N7,Lq,s9,v_,u9,g9,y9,A9,z3,k9,Eq,h8,W9,Y9,$9,tY,f8,_7,Z_,sY,nY,V3,n7,G9]},rY=W("<option> </option>"),aY=W('<div class="toolbar svelte-33y0l8"><div class="toolbar-group svelte-33y0l8"><span class="label svelte-33y0l8">Theme:</span> <select class="svelte-33y0l8"></select></div> <div class="toolbar-group svelte-33y0l8"><button class="refresh-btn svelte-33y0l8">LÃ m má»i Grid</button></div></div> <div class="grid-wrapper svelte-33y0l8"><div class="ag-theme-alpine" style="height: 100%; width: 100%;"></div></div>',1);function lY(e,t){lt(t,!1),YB.registerModules([oY]);let s=J(),i,n=J("ag-theme-alpine");const o=[{name:"Alpine",class:"ag-theme-alpine"},{name:"Quartz",class:"ag-theme-quartz"},{name:"Balham",class:"ag-theme-balham"},{name:"Material",class:"ag-theme-material"}];let r=[{field:"athlete",headerName:"VÄV",sortable:!0,filter:!0,flex:2},{field:"age",headerName:"Tuá»i",width:100},{field:"country",headerName:"Quá»c gia",sortable:!0,filter:!0,flex:2},{field:"year",headerName:"NÄm",width:100},{field:"date",headerName:"NgÃ y",width:130},{field:"sport",headerName:"MÃ´n thi",sortable:!0,filter:!0,flex:2},{field:"gold",headerName:"VÃ ng",width:100,cellStyle:{color:"#d4a017"}},{field:"silver",headerName:"Báº¡c",width:100,cellStyle:{color:"#a8a8a8"}},{field:"bronze",headerName:"Äá»ng",width:100,cellStyle:{color:"#cd7f32"}},{field:"total",headerName:"Tá»ng",width:110,cellStyle:{fontWeight:"bold"}}],a=[];vs(async()=>{try{const b=await fetch("https://www.ag-grid.com/example-assets/olympic-winners.json");if(!b.ok)throw new Error("KhÃ´ng táº£i ÄÆ°á»£c dá»¯ liá»u");a=await b.json(),console.log(`ÄÃ£ táº£i ${a.length} dÃ²ng dá»¯ liá»u thÃ nh cÃ´ng!`);const y={columnDefs:r,rowData:a,pagination:!0,paginationPageSize:20,paginationPageSizeSelector:[10,20,50,100],animateRows:!0,defaultColDef:{flex:1,minWidth:100,resizable:!0,sortable:!0,filter:!0},overlayLoadingTemplate:'<span class="ag-overlay-loading-center">Äang táº£i dá»¯ liá»u...</span>',overlayNoRowsTemplate:'<span class="ag-overlay-loading-center">KhÃ´ng cÃ³ dá»¯ liá»u</span>',onGridReady:S=>{i=S.api},onFirstDataRendered:()=>{w(s)&&w(s).offsetWidth>0&&i.sizeColumnsToFit()},onGridSizeChanged:()=>{w(s)&&w(s).offsetWidth>0&&i.sizeColumnsToFit()}};A8(w(s),y)}catch(b){console.error("Lá»i khi táº£i dá»¯ liá»u:",b),a=[{athlete:"Lá»i",country:"Kiá»m tra máº¡ng"}]}});function l(b){w(s)&&(o.forEach(y=>w(s).classList.remove(y.class)),w(s).classList.add(b),L(n,b),i&&w(s).offsetWidth>0&&setTimeout(()=>i.sizeColumnsToFit(),0))}function c(){i&&i.refreshCells({force:!0})}ut();var d=aY(),h=j(d),u=D(h),f=M(D(u),2);Ae(()=>{w(n),qk(()=>{})}),fs(f,5,()=>o,gi,(b,y)=>{var S=rY(),R=D(S),A={};Ae(()=>{ze(R,w(y).name),A!==(A=w(y).class)&&(S.value=(S.__value=w(y).class)??"")}),_(b,S)});var p=M(u,2),m=D(p),v=M(h,2),C=D(v);ss(C,b=>L(s,b),()=>w(s)),C1(f,()=>w(n),b=>L(n,b)),z("change",f,b=>l(b.target.value)),z("click",m,c),_(e,d),ct()}function lS(e,t){const s=typeof t=="object"&&t!==null;let i=t;if(typeof window<"u")try{const o=localStorage.getItem(e);o!==null&&(s?i={...t,...JSON.parse(o)}:i=o)}catch{}const n=cs(i);return n.subscribe(o=>{try{localStorage.setItem(e,s?JSON.stringify(o):o)}catch{}}),n}function cY(){const e=lS("$selectedFace","info"),t=cs(!0);function s(r){e.set(r),r==="cam"?t.set(!1):t.set(!0)}function i(){t.set(!0)}function n(){t.set(!1)}function o(){t.update(r=>!r)}return{face:e,menuVisible:t,changeFace:s,showMenu:i,hideMenu:n,toggleMenu:o}}const W0=cY(),mM=cs(!1);function yE(){const e=window.matchMedia("(max-width: 768px)").matches;mM.set(e)}typeof window<"u"&&(yE(),window.addEventListener("resize",yE));function dY(e,t){const s=()=>mt(mM,"$isMobile",i),[i,n]=Zi();var o=de(),r=j(o);{var a=c=>{var d=de(),h=j(d);He(h,t,"mobile",{}),_(c,d)},l=c=>{var d=de(),h=j(d);He(h,t,"desktop",{}),_(c,d)};Z(r,c=>{s()?c(a):c(l,!1)})}_(e,o),n()}var hY=W("<!> <!> <!>",1),uY=W("<!> <!> <!>",1),gY=W("<!> <!> <!>",1);function fY(e,t){lt(t,!1);let s=he(t,"option",24,()=>({}));const i=s().mainKey||"layout-main-default",n=s().bodyKey||"layout-body-default",o=s().contentKey||"layout-content-default",r=s().noDivider??!0;s().noSnap;const a=s().mainSizes||[{size:5,snapSize123:2},{size:90,snapSize123:10},{size:5,snapSize123:10}],l=s().bodySizes||[{size:23,snapSize123:10},{size:50,snapSize123:10},{size:30,snapSize123:10}],c=s().contentSizes||[{size:10,snapSize123:5},{size:80,snapSize123:10},{size:10,snapSize123:10}];Bt(()=>{},()=>{console.log("sole:",c)}),ki(),ut();{let d=Hr(()=>`${r?"no-splitter-divider":""}`);qC(e,{get class(){return w(d)},get key(){return i},horizontal:!0,get defaultSizes(){return a},children:NC,$$slots:{default:(h,u)=>{const f=Hr(()=>u.paneSizes);var p=gY(),m=j(p);Zo(m,{index:0,get paneSizes(){return w(f)},children:(b,y)=>{var S=de(),R=j(S);He(R,t,"header",{}),_(b,S)},$$slots:{default:!0}});var v=M(m,2);Zo(v,{index:1,get paneSizes(){return w(f)},children:(b,y)=>{qC(b,{get key(){return n},horizontal:!1,get defaultSizes(){return l},children:NC,$$slots:{default:(S,R)=>{const A=Hr(()=>R.paneSizes);var F=uY(),T=j(F);Zo(T,{index:0,get paneSizes(){return w(A)},children:(O,V)=>{var ee=de(),G=j(ee);He(G,t,"left",{}),_(O,ee)},$$slots:{default:!0}});var k=M(T,2);Zo(k,{index:1,get paneSizes(){return w(A)},children:(O,V)=>{qC(O,{get key(){return o},horizontal:!0,get defaultSizes(){return c},children:NC,$$slots:{default:(ee,G)=>{const ne=Hr(()=>G.paneSizes);var te=hY(),K=j(te);Zo(K,{index:0,get paneSizes(){return w(ne)},children:(Se,Ce)=>{var re=de(),ie=j(re);He(ie,t,"head",{}),_(Se,re)},$$slots:{default:!0}});var ve=M(K,2);Zo(ve,{index:1,get paneSizes(){return w(ne)},children:(Se,Ce)=>{var re=de(),ie=j(re);He(ie,t,"content",{}),_(Se,re)},$$slots:{default:!0}});var ce=M(ve,2);Zo(ce,{index:2,get paneSizes(){return w(ne)},children:(Se,Ce)=>{var re=de(),ie=j(re);He(ie,t,"comment",{}),_(Se,re)},$$slots:{default:!0}}),_(ee,te)}}})},$$slots:{default:!0}});var N=M(k,2);{var I=O=>{Zo(O,{index:2,get paneSizes(){return w(A)},children:(V,ee)=>{var G=de(),ne=j(G);He(ne,t,"right",{}),_(V,G)},$$slots:{default:!0}})};Z(N,O=>{me(s()),Y(()=>s().showBodyRight!==!1)&&O(I)})}_(S,F)}}})},$$slots:{default:!0}});var C=M(v,2);Zo(C,{index:2,get paneSizes(){return w(f)},children:(b,y)=>{var S=de(),R=j(S);He(R,t,"footer",{}),_(b,S)},$$slots:{default:!0}}),_(h,p)}}})}ct()}const Hs={avatar:"https://i.pravatar.cc/120?img=12",name:"Nguyá»n VÄn A",isGroup:!0,membersCount:5,description:"NhÃ³m trao Äá»i cÃ´ng viá»c",members:[{id:1,name:"Nguyá»n VÄn A",avatar:"https://i.pravatar.cc/40?img=12"},{id:2,name:"Tráº§n Thá» B",avatar:"https://i.pravatar.cc/40?img=32"},{id:3,name:"LÃª VÄn C",avatar:"https://i.pravatar.cc/40?img=45"}],media:["https://picsum.photos/200/140?1","https://picsum.photos/200/140?2","https://picsum.photos/200/140?3"],files:[{name:"BÃ¡o_cÃ¡o_T8.pdf",size:"1.2 MB"},{name:"Káº¿_hoáº¡ch.xlsx",size:"340 KB"}]};var pY=W(`<div class="flex items-center justify-between
               px-3 py-2
               rounded-lg
               bg-gray-100
               border-l-4 border-blue-500
               text-sm shadow-sm"><div class="truncate"><span class="font-semibold"> </span> </div> <button class="ml-3 text-gray-500 hover:text-gray-800">â</button></div>`),mY=W('<div class="text-xs text-gray-500 px-2">Äang táº£i file...</div>'),vY=W(`<div class="h-full flex flex-col bg-white border-t border-gray-200"><div class="flex items-center gap-3 px-3 py-2 shrink-0"><button type="button"><!></button> <button type="button"><!></button> <button type="button"><!></button> <!></div> <div class="px-3 pb-2 flex flex-col gap-2"><!> <div class="flex items-end gap-2"><textarea rows="1" class="flex-1 resize-none rounded-2xl
               border border-gray-200
               px-4 py-2 text-sm
               focus:outline-none focus:border-blue-400
               overflow-y-auto">
      </textarea> <button type="button" class="text-blue-500 shrink-0 disabled:opacity-40"><!></button></div> <!></div> <input type="file" accept="image/*" multiple class="hidden"/> <input type="file" multiple class="hidden"/></div>`);function vM(e,t){lt(t,!1);const s=()=>mt(Pn,"$replyingTo",n),i=()=>mt(Ir,"$myId",n),[n,o]=Zi();let r=he(t,"placeholder",8,"Nháº­p tin nháº¯n..."),a=he(t,"disabled",8,!1),l=he(t,"autoFocus",8,!1),c=J(""),d=J(),h=J(),u=!1,f=J(!1);function p(){var Q;console.log("commitSend sending || uploading || !text.trim() || disabled:",u,w(f),w(c).trim(),a()),u=!0,Xn({type:"chat",conversationId:jt(Pi),from:jt(Ir),message:w(c).trim(),replyTo:((Q=jt(Pn))==null?void 0:Q.id)||null}),L(c,""),Pn.set(null),requestAnimationFrame(()=>{u=!1})}function m(Q){Q.key==="Enter"&&!Q.shiftKey&&!Q.repeat&&!Q.isComposing&&(Q.preventDefault(),p())}function v(){var Q;(Q=w(d))==null||Q.click()}function C(){var Q;(Q=w(h))==null||Q.click()}async function b(Q){var se;if(!(!Q.length||w(f))){L(f,!0);for(const De of Q)try{console.log("uploaded0:",De);const we=await wI(De);console.log("uploaded:",we),Xn({type:"chat",conversationId:jt(Pi),from:Ir,message:we.url,msgType:"media",meta:{mediaType:we.type,name:we.name,size:we.size,mime:we.mime},replyTo:((se=jt(Pn))==null?void 0:se.id)||null})}catch(we){console.error("â Upload failed:",we)}Pn.set(null),L(f,!1)}}function y(Q){const se=Array.from(Q.target.files||[]);b(se),Q.target.value=""}function S(){Xn({type:"chat",payload:{conversationId:jt(Pi),from:jt(Ir),type:"sticker",stickerId:"sticker_like"}})}async function R(Q){var De;const se=Array.from(Q.target.files||[]);if(se.length){if(se.length===1){await b(se),Q.target.value="";return}L(f,!0);try{const we=await bI(se);console.log("results:",we);const Me=we.images.map(nt=>nt.url),je=we.images.map(nt=>nt.url);Xn({type:"chat",conversationId:jt(Pi),from:jt(Ir),msgType:"album",message:JSON.stringify({urls:Me,fullUrls:je}),replyTo:((De=jt(Pn))==null?void 0:De.id)||null}),Pn.set(null)}catch(we){console.error("â Upload gallery failed",we)}finally{L(f,!1),Q.target.value=""}}}ut();var A=vY(),F=D(A),T=D(F),k=D(T);aI(k,{size:"22"});var N=M(T,2),I=D(N);eI(I,{size:"22"});var O=M(N,2),V=D(O);WA(V,{size:"22"});var ee=M(O,2);W1(ee,{size:"22"});var G=M(F,2),ne=D(G);{var te=Q=>{var se=pY(),De=D(se),we=D(De),Me=D(we),je=M(we),nt=M(De,2);Ae(()=>{ze(Me,(s(),i(),Y(()=>s().senderId===i()?"Báº¡n":"NgÆ°á»i khÃ¡c"))),ze(je,` : ${s(),Y(()=>s().content)??""}`)}),z("click",nt,()=>Pn.set(null)),_(Q,se)};Z(ne,Q=>{s()&&Q(te)})}var K=M(ne,2),ve=D(K);bS(ve,l());var ce=M(ve,2),Se=D(ce);nI(Se,{size:"22"});var Ce=M(K,2);{var re=Q=>{var se=mY();_(Q,se)};Z(Ce,Q=>{w(f)&&Q(re)})}var ie=M(G,2);ss(ie,Q=>L(d,Q),()=>w(d));var X=M(ie,2);ss(X,Q=>L(h,Q),()=>w(h)),Ae(Q=>{T.disabled=w(f),N.disabled=w(f),O.disabled=w(f),xs(ve,"placeholder",r()),ve.disabled=a(),ce.disabled=Q},[()=>(w(c),w(f),Y(()=>!w(c).trim()||w(f)))]),z("click",T,S),z("click",N,C),z("click",O,v),cu(ve,()=>w(c),Q=>L(c,Q)),z("keydown",ve,m),z("click",ce,p),z("change",ie,R),z("change",X,y),_(e,A),ct(),o()}var CY=W('<button class="text-gray-400 hover:text-gray-600"><!></button>'),wY=W(`<div class="flex items-center gap-2
         px-3 py-2
         rounded-full
         bg-gray-100
         border border-transparent
         focus-within:bg-white
         focus-within:border-blue-400
         transition"><!> <input type="text" class="flex-1 bg-transparent outline-none text-sm"/> <!></div>`);function bY(e,t){lt(t,!1);let s=he(t,"placeholder",8,"TÃ¬m kiáº¿m"),i=he(t,"autoFocus",8,!1),n=he(t,"debounce",8,300),o=he(t,"onSearch",8,()=>{}),r=he(t,"onClear",8,()=>{}),a=J(""),l;function c(C){L(a,C.target.value),clearTimeout(l),l=setTimeout(()=>{o()(w(a).trim())},n())}function d(){L(a,""),clearTimeout(l),r()(),o()("")}function h(C){C.key==="Escape"&&w(a)&&d()}Yo(()=>{clearTimeout(l)}),ut();var u=wY(),f=D(u);_S(f,{size:"18",class:"text-gray-500 shrink-0"});var p=M(f,2);bS(p,i());var m=M(p,2);{var v=C=>{var b=CY(),y=D(b);XA(y,{size:"16"}),z("click",b,d),_(C,b)};Z(m,C=>{w(a)&&C(v)})}Ae(()=>xs(p,"placeholder",s())),cu(p,()=>w(a),C=>L(a,C)),z("input",p,c),z("keydown",p,h),_(e,u),ct()}var yY=W(`<div class="absolute bottom-0 left-0 right-0
               bg-white rounded-t-2xl
               p-4 pb-6
               animate-slide-up svelte-191znx"><!></div>`),SY=W(`<div class="absolute bg-white rounded-xl shadow-lg
               p-3 animate-scale-in svelte-191znx"><!></div>`),xY=W(`<div class="popup-center bg-white rounded-2xl shadow-xl
               animate-scale-in-center svelte-191znx"><!></div>`),RY=W('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/40"></div> <!></div>');function EY(e,t){lt(t,!1);let s=he(t,"open",12,!1),i=he(t,"mode",8,"bottom"),n=he(t,"anchorRect",8,null),o=he(t,"width",8,null),r=he(t,"height",8,null);const a=8,l=8,c={anchor:{width:"200px",height:"auto"},center:{width:"420px",height:"auto"},bottom:{width:"100%",height:"auto"}};let d=J({top:0,left:0});function h(){s(!1)}function u(){const C=c[i()]??{},b=o()??C.width,y=r()??C.height;let S="";return b&&(S+=`width:${b};`),y&&(S+=`height:${y};`),S}function f(){if(!n())return{top:0,left:0};const C=window.innerWidth,b=window.innerHeight,y=parseInt((o()??c.anchor.width).toString())||200;let S=n().left+n().width/2-y/2;S=Math.max(l,S),S=Math.min(S,C-y-l);const R=b-n().bottom,A=n().top;let F;return R>=a+100?F=n().bottom+a:A>=a+100?F=n().top-a-100:F=Math.max(l,b-100-l),{top:F,left:S}}Bt(()=>(me(s()),me(i()),me(n())),()=>{s()&&i()==="anchor"&&n()&&L(d,f())}),ki(),ut();var p=de(),m=j(p);{var v=C=>{var b=RY(),y=D(b),S=M(y,2);{var R=F=>{var T=yY(),k=D(T);He(k,t,"default",{}),Ae(N=>wn(T,N),[()=>Y(u)]),_(F,T)},A=F=>{var T=de(),k=j(T);{var N=O=>{var V=SY(),ee=D(V);He(ee,t,"default",{}),Ae(G=>wn(V,`
          top:${w(d),Y(()=>w(d).top)??""}px;
          left:${w(d),Y(()=>w(d).left)??""}px;
          ${G??""}
        `),[()=>Y(u)]),_(O,V)},I=O=>{var V=de(),ee=j(V);{var G=ne=>{var te=xY(),K=D(te);He(K,t,"default",{}),Ae(ve=>wn(te,ve),[()=>Y(u)]),_(ne,te)};Z(ee,ne=>{i()==="center"&&ne(G)},!0)}_(O,V)};Z(k,O=>{i()==="anchor"&&n()?O(N):O(I,!1)},!0)}_(F,T)};Z(S,F=>{i()==="bottom"?F(R):F(A,!1)})}z("click",y,h),_(C,b)};Z(m,C=>{s()&&C(v)})}_(e,p),ct()}var AY=W('<h3 class="text-lg font-semibold mb-4">ThÃªm ngÆ°á»i dÃ¹ng</h3> <input placeholder="Nháº­p sá» Äiá»n thoáº¡i" class="w-full px-4 py-2 rounded-lg bg-gray-100 focus:outline-none"/> <button class="w-full mt-4 py-2 bg-blue-600 text-white rounded-lg">ThÃªm</button>',1);function CM(e,t){let s=he(t,"onClose",8);var i=AY(),n=M(j(i),4);z("click",n,function(...o){var r;(r=s())==null||r.apply(this,o)}),_(e,i)}var FY=W('<h3 class="text-lg font-semibold mb-4">Táº¡o nhÃ³m</h3> <input placeholder="TÃªn nhÃ³m" class="w-full px-4 py-2 rounded-lg bg-gray-100 focus:outline-none"/> <button class="w-full mt-4 py-2 bg-blue-600 text-white rounded-lg">Táº¡o nhÃ³m</button>',1);function wM(e,t){let s=he(t,"onClose",8);var i=FY(),n=M(j(i),4);z("click",n,function(...o){var r;(r=s())==null||r.apply(this,o)}),_(e,i)}var PY=W('<h3 class="text-lg font-semibold mb-4">CÃ i Äáº·t</h3> <div class="space-y-3 text-sm"><div class="flex justify-between"><span>ThÃ´ng bÃ¡o</span> <input type="checkbox" checked/></div> <div class="flex justify-between"><span>Cháº¿ Äá» tá»i</span> <input type="checkbox"/></div></div> <button class="w-full mt-6 py-2 bg-gray-200 rounded-lg">ÄÃ³ng</button>',1);function bM(e,t){let s=he(t,"onClose",8);var i=PY(),n=M(j(i),4);z("click",n,function(...o){var r;(r=s())==null||r.apply(this,o)}),_(e,i)}var TY=W(`<div class="flex items-center justify-between mb-4"><h3 class="text-lg font-semibold text-gray-900">CÃ i Äáº·t</h3> <button class="text-gray-400 hover:text-gray-600 text-xl">â</button></div> <div class="space-y-6 text-sm text-gray-700"><section><h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Chung</h4> <div class="space-y-3"><label class="flex items-center justify-between"><span>ThÃ´ng bÃ¡o</span> <input type="checkbox" class="accent-blue-500"/></label> <label class="flex items-center justify-between"><span>Cháº¿ Äá» tá»i</span> <input type="checkbox" class="accent-blue-500"/></label></div></section> <section><h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">TrÃ² chuyá»n</h4> <div class="space-y-3"><label class="flex items-center justify-between"><span>Enter Äá» gá»­i</span> <input type="checkbox" class="accent-blue-500"/></label> <label class="flex items-center justify-between"><span>Tá»± cuá»n khi cÃ³ tin má»i</span> <input type="checkbox" class="accent-blue-500"/></label></div></section> <section><h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">TÃ i khoáº£n</h4> <button class="w-full py-2 text-red-600
             bg-red-50 rounded-lg
             hover:bg-red-100 transition">ÄÄng xuáº¥t</button></section></div> <div class="mt-6 flex gap-3"><button class="flex-1 py-2 rounded-lg
           bg-gray-100 hover:bg-gray-200">Huá»·</button> <button class="flex-1 py-2 rounded-lg
           bg-blue-600 text-white
           hover:bg-blue-700">LÆ°u</button></div>`,1);function yM(e,t){lt(t,!1);let s=he(t,"onClose",8),i=J(!0),n=J(!1),o=J(!0),r=J(!0);function a(){var I;(I=s())==null||I()}ut();var l=TY(),c=j(l),d=M(D(c),2),h=M(c,2),u=D(h),f=M(D(u),2),p=D(f),m=M(D(p),2),v=M(p,2),C=M(D(v),2),b=M(u,2),y=M(D(b),2),S=D(y),R=M(D(S),2),A=M(S,2),F=M(D(A),2),T=M(h,2),k=D(T),N=M(k,2);z("click",d,function(...I){var O;(O=s())==null||O.apply(this,I)}),Lp(m,()=>w(i),I=>L(i,I)),Lp(C,()=>w(n),I=>L(n,I)),Lp(R,()=>w(o),I=>L(o,I)),Lp(F,()=>w(r),I=>L(r,I)),z("click",k,function(...I){var O;(O=s())==null||O.apply(this,I)}),z("click",N,a),_(e,l),ct()}var DY=W('<label><div class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-gray-100"><input type="checkbox" class="accent-blue-500"/> <div class="flex-1 min-w-0 overflow-hidden"><!></div></div></label>'),_Y=W('<div class="py-6 text-center text-sm text-gray-400">KhÃ´ng cÃ³ cuá»c trÃ² chuyá»n</div>'),MY=W(`<div class="flex items-center gap-2
                 px-2 py-1.5
                 rounded-lg
                 bg-white
                 shadow-sm"><div class="flex-1 truncate text-sm"> </div> <button class="text-gray-400 hover:text-red-500">â</button></div>`),kY=W(`<div class="w-[260px]
           border-l border-gray-200
           bg-gray-50
           flex flex-col
           animate-slide-in svelte-528wx8"><div class="flex items-center justify-between px-3 py-2 border-b"><span class="text-sm font-semibold"> </span> <button class="text-xs text-red-500 hover:underline">XoÃ¡ táº¥t cáº£</button></div> <div class="flex-1 overflow-y-auto p-2 space-y-1"></div></div>`),IY=W(`<div class="flex items-center justify-between
               px-3 py-2
               rounded-lg
               bg-gray-100
               border-l-4 border-blue-500
               text-sm shadow-sm"><div class="truncate"> </div></div>`),LY=W('<div class="p-3 bg-gray-100 rounded text-sm">ÄÃ£ chá»n <b> </b> tin nháº¯n</div>'),OY=W(`<div class="w-full max-w-[2048px] mx-auto bg-white rounded-2xl shadow-xl"><div class="flex items-center justify-between px-4 py-3 border-b border-gray-300"><h3 class="text-lg font-semibold">Chia sáº»</h3> <button class="text-gray-400 text-xl">â</button></div> <div class="flex px-2 pt-2 gap-1"><button>Gáº§n ÄÃ¢y</button> <button>NhÃ³m</button> <button>Báº¡n bÃ¨</button></div> <div class="w-full mx-auto bg-white rounded-2xl shadow-xl
         flex overflow-hidden"><div class="w-full max-h-64 overflow-y-auto px-2 mt-2"><!> <!></div> <!></div> <div class="px-4 py-3"><!></div> <div class="px-4"><textarea rows="2" placeholder="Nháº­p tin nháº¯n..." class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm resize-none">
    </textarea></div> <div class="px-4 py-3 flex justify-end gap-3 border-t border-gray-300"><button class="px-4 py-2 bg-gray-100 rounded">Huá»·</button> <button class="px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-50">Chia sáº»</button></div></div>`);function NY(e,t){lt(t,!1);const s=()=>mt(bp,"$conversations",o),i=()=>mt(Kn,"$messages",o),n=()=>mt(qn,"$selectedMessageIds",o),[o,r]=Zi(),a=J(),l=J(),c=J();let d=he(t,"onClose",8),h=J(new Set),u=J(""),f=J("recent");function p(ie){w(h).has(ie)?w(h).delete(ie):w(h).add(ie),L(h,new Set(w(h)))}function m(){var ie;!w(h).size||!w(c).length||(Xn({type:"message_share",fromConversationId:jt(Pi),targetConversationIds:Array.from(w(h)),messages:w(c).map(X=>({id:X.id,from:X.from,message:X.message,type:X.type,created_at:X.created_at})),note:((ie=w(u))==null?void 0:ie.trim())||null}),v())}function v(){var ie;w(h).clear(),qn.set(new Set),Ja.set(!1),(ie=d())==null||ie()}Bt(()=>(s(),w(f)),()=>{L(a,s().filter(ie=>w(f)==="recent"?!0:w(f)==="group"?ie.type==="group":w(f)==="direct"?ie.type==="direct":!0))}),Bt(()=>(s(),w(h)),()=>{L(l,s().filter(ie=>w(h).has(ie.conversationId)))}),Bt(()=>(i(),n()),()=>{L(c,i().filter(ie=>n().has(ie.id)))}),ki(),ut();var C=OY(),b=D(C),y=M(D(b),2),S=M(b,2),R=D(S),A=M(R,2),F=M(A,2),T=M(S,2),k=D(T),N=D(k);fs(N,1,()=>w(a),ie=>ie.conversationId,(ie,X)=>{var Q=DY(),se=D(Q),De=D(se),we=M(De,2),Me=D(we);QS(Me,{get conversation(){return w(X)}}),Ae(je=>w1(De,je),[()=>(w(h),w(X),Y(()=>w(h).has(w(X).conversationId)))]),z("change",De,()=>p(w(X).conversationId)),_(ie,Q)});var I=M(N,2);{var O=ie=>{var X=_Y();_(ie,X)};Z(I,ie=>{w(a),Y(()=>!w(a).length)&&ie(O)})}var V=M(k,2);{var ee=ie=>{var X=kY(),Q=D(X),se=D(Q),De=D(se),we=M(se,2),Me=M(Q,2);fs(Me,5,()=>w(l),je=>je.conversationId,(je,nt)=>{var bt=MY(),We=D(bt),gt=D(We),Fe=M(We,2);Ae(()=>ze(gt,(w(nt),Y(()=>w(nt).title||"Untitle")))),z("click",Fe,()=>p(w(nt).conversationId)),_(je,bt)}),Ae(()=>ze(De,`ÄÃ£ chá»n (${w(h),Y(()=>w(h).size)??""})`)),z("click",we,()=>L(h,new Set)),_(ie,X)};Z(V,ie=>{w(h),Y(()=>w(h).size>0)&&ie(ee)})}var G=M(T,2),ne=D(G);{var te=ie=>{var X=IY(),Q=D(X),se=D(Q);Ae(()=>ze(se,(w(c),Y(()=>w(c)[0].message)))),_(ie,X)},K=ie=>{var X=LY(),Q=M(D(X)),se=D(Q);Ae(()=>ze(se,(w(c),Y(()=>{var De;return(De=w(c))==null?void 0:De.length})))),_(ie,X)};Z(ne,ie=>{w(c),Y(()=>w(c).length===1)?ie(te):ie(K,!1)})}var ve=M(G,2),ce=D(ve),Se=M(ve,2),Ce=D(Se),re=M(Ce,2);Ae(()=>{Ht(R,1,`flex-1 py-2 rounded-lg text-sm font-medium
    ${w(f)==="recent"?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100"}`),Ht(A,1,`flex-1 py-2 rounded-lg text-sm font-medium
    ${w(f)==="group"?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100"}`),Ht(F,1,`flex-1 py-2 rounded-lg text-sm font-medium
    ${w(f)==="direct"?"bg-blue-100 text-blue-600":"text-gray-500 hover:bg-gray-100"}`),re.disabled=(w(h),Y(()=>!w(h).size))}),z("click",y,v),z("click",R,()=>L(f,"recent")),z("click",A,()=>L(f,"group")),z("click",F,()=>L(f,"direct")),cu(ce,()=>w(u),ie=>L(u,ie)),z("click",Ce,v),z("click",re,m),_(e,C),ct(),r()}var HY=W('<div class="absolute inset-0 grid grid-cols-2 z-0"><video autoplay playsinline="" class="w-full h-full object-cover pointer-events-none"></video> <video autoplay playsinline="" class="w-full h-full object-cover pointer-events-none"></video></div>',2),BY=W('<video autoplay playsinline="" class="absolute inset-0 w-full h-full object-cover transform scale-x-[-1] pointer-events-none"></video>',2),GY=W(`<span class="absolute w-8 h-[2px]
             bg-red-500
             rotate-45
             rounded-full
             shadow-md shadow-red-500/50"></span>`),VY=W(`<span class="absolute w-8 h-[2px]
             bg-red-500
             rotate-45
             rounded-full
             shadow-md shadow-red-500/50"></span>`),zY=W('<div class="absolute border-2 border-white rounded-lg overflow-hidden shadow-lg cursor-move bg-black z-20"><video autoplay playsinline="" class="w-full h-36 object-cover"></video> <button class="absolute bottom-2 right-2 bg-black bg-opacity-60 text-white px-2 py-1 text-xs rounded">Swap</button></div>',2),WY=W(`<div class="absolute bottom-24 right-6
           bg-white/90 backdrop-blur-xl
           rounded-xl shadow-xl
           p-4 w-72
           z-60"><h3 class="font-semibold mb-2">Thiáº¿t bá»</h3> <p class="text-sm mb-1">Camera</p> <select class="w-full border rounded p-2 mb-3"><option>Default Camera</option></select> <p class="text-sm mb-1">Microphone</p> <select class="w-full border rounded p-2"><option>Default Microphone</option></select> <div class="flex items-center justify-between mb-3 mt-3"><span class="text-sm font-medium">Chia ÄÃ´i mÃ n hÃ¬nh</span> <button> </button></div></div>`),$Y=W(`<div class="fixed inset-0 bg-black z-50"><!> <div class="absolute inset-0 z-10"><button class="absolute top-4 right-4
         bg-white/5
         backdrop-blur-sm
         border border-white/10
         text-white
         w-9 h-9
         flex items-center justify-center
         rounded-full
         hover:bg-white/20
         hover:border-white/30
         hover:backdrop-blur-md
         active:bg-white/25
         transition-all duration-200">â</button> <button class="absolute bottom-6 right-6 bg-white/5
         backdrop-blur-sm
         border border-white/10
         text-white
         w-9 h-9
         flex items-center justify-center
         rounded-full
         hover:bg-white/20
         hover:border-white/30
         hover:backdrop-blur-md
         active:bg-white/25
         transition-all duration-200">â</button> <div class="absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-6"><button class="relative w-14 h-14 rounded-full
         bg-white/5 backdrop-blur-sm
         border border-white/10
         text-white text-xl
         flex items-center justify-center
         hover:bg-white/20 hover:border-white/30 hover:backdrop-blur-md
         active:bg-white/25
         transition-all duration-200">ð¥ <!></button> <button class="w-16 h-16 rounded-full
           bg-red-500/70 backdrop-blur-md
           border border-red-300/30
           text-white text-2xl
           flex items-center justify-center
           hover:bg-red-500/80
           active:bg-red-500/90
           shadow-lg shadow-black/30
           transition-all duration-200">ð</button> <button class="relative w-14 h-14 rounded-full
         bg-white/5 backdrop-blur-sm
         border border-white/10
         text-white text-xl
         flex items-center justify-center
         hover:bg-white/20 hover:border-white/30 hover:backdrop-blur-md
         active:bg-white/25
         transition-all duration-200">ð¤ <!></button></div></div> <!></div>  <button class="absolute bottom-6 right-6 bg-white/5
   backdrop-blur-sm
   border border-white/10
   text-white
   w-9 h-9
   flex items-center justify-center
   rounded-full
   hover:bg-white/20
   hover:border-white/30
   hover:backdrop-blur-md
   active:bg-white/25
   transition-all duration-200">â</button> <!>`,1);function SE(e,t){lt(t,!1);let s=J(),i=J(),n,o,r,a=J(!0),l=J(!0),c=J(!0),d=!1,h=J(!1),u=J(!1),f=J(20),p=J(20),m=!1,v=0,C=0,b=he(t,"onClose",8);const y={iceServers:[{urls:"stun:stun.l.google.com:19302"}]};let S=!1;vs(async()=>{const ce=jt(Pi);ce&&(yI(ce),await Qr(),await R(),SI({onPeerJoined:async()=>{const Se=await n.createOffer();await n.setLocalDescription(Se),UC(ce,{sdp:Se})},onSignal:async(Se,Ce)=>{if(Se===ce){if(Ce.sdp&&(await n.setRemoteDescription(Ce.sdp),Ce.sdp.type==="offer")){const re=await n.createAnswer();await n.setLocalDescription(re),UC(ce,{sdp:re})}Ce.candidate&&await n.addIceCandidate(Ce.candidate)}}}))});async function R(){S||(S=!0,o=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),n=new RTCPeerConnection(y),o.getTracks().forEach(ce=>n.addTrack(ce,o)),n.ontrack=ce=>{r=ce.streams[0],A()},n.onicecandidate=ce=>{ce.candidate&&UC(jt(Pi),{candidate:ce.candidate})},A())}function A(){!w(s)||!w(i)||(d?(as(s,w(s).srcObject=r||null),as(i,w(i).srcObject=o)):(as(s,w(s).srcObject=o),as(i,w(i).srcObject=r||null)))}async function F(){d=!d,await Qr(),A()}function T(){L(a,!w(a)),o==null||o.getVideoTracks().forEach(ce=>ce.enabled=w(a))}function k(){L(l,!w(l)),o==null||o.getAudioTracks().forEach(ce=>ce.enabled=w(l))}function N(){L(u,!w(u))}function I(){L(c,!1),o==null||o.getTracks().forEach(ce=>ce.stop()),n==null||n.close()}function O(){I()}function V(){var ce;I(),(ce=b())==null||ce()}function ee(ce){m=!0,v=ce.clientX-w(f),C=ce.clientY-w(p)}function G(ce){m&&(L(f,ce.clientX-v),L(p,ce.clientY-C))}function ne(){m=!1}Yo(I),ut();var te=de(),K=j(te);{var ve=ce=>{var Se=$Y(),Ce=j(Se),re=D(Ce);{var ie=q=>{var ye=HY(),B=D(ye);B.muted=!0,ss(B,Ee=>L(s,Ee),()=>w(s));var ae=M(B,2);ss(ae,Ee=>L(i,Ee),()=>w(i)),_(q,ye)},X=q=>{var ye=BY();ye.muted=!0,ss(ye,B=>L(s,B),()=>w(s)),_(q,ye)};Z(re,q=>{w(u)?q(ie):q(X,!1)})}var Q=M(re,2),se=D(Q),De=M(se,2),we=M(De,2),Me=D(we),je=M(D(Me));{var nt=q=>{var ye=GY();_(q,ye)};Z(je,q=>{w(a)||q(nt)})}var bt=M(Me,2),We=M(bt,2),gt=M(D(We));{var Fe=q=>{var ye=VY();_(q,ye)};Z(gt,q=>{w(l)||q(Fe)})}var Ze=M(Q,2);{var Pe=q=>{var ye=zY(),B=D(ye);ss(B,Ee=>L(i,Ee),()=>w(i));var ae=M(B,2);Ae(()=>wn(ye,`top:${w(p)??""}px; left:${w(f)??""}px; width:220px`)),z("click",ae,il(F)),z("mousedown",ye,ee),z("mousemove",ye,G),z("mouseup",ye,ne),z("mouseleave",ye,ne),_(q,ye)};Z(Ze,q=>{w(u)||q(Pe)})}var Oe=M(Ce,2),dt=M(Oe,2);{var Ot=q=>{var ye=WY(),B=M(D(ye),10),ae=M(D(B),2),Ee=D(ae);Ae(()=>{Ht(ae,1,`px-3 py-1 rounded-full text-sm
      ${w(u)?"bg-green-500 text-white":"bg-gray-200"}`),ze(Ee,w(u)?"ON":"OFF")}),z("click",ae,N),_(q,ye)};Z(dt,q=>{w(h)&&q(Ot)})}z("click",se,V),z("click",De,()=>L(h,!w(h))),z("click",Me,T),z("click",bt,O),z("click",We,k),z("click",Oe,()=>L(h,!w(h))),_(ce,Se)};Z(K,ce=>{w(c)&&ce(ve)})}_(e,te),ct()}const Uo=Object.create(null);Uo.open="0";Uo.close="1";Uo.ping="2";Uo.pong="3";Uo.message="4";Uo.upgrade="5";Uo.noop="6";const Jm=Object.create(null);Object.keys(Uo).forEach(e=>{Jm[Uo[e]]=e});const cS={type:"error",data:"parser error"},SM=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",xM=typeof ArrayBuffer=="function",RM=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,$0=({type:e,data:t},s,i)=>SM&&t instanceof Blob?s?i(t):xE(t,i):xM&&(t instanceof ArrayBuffer||RM(t))?s?i(t):xE(new Blob([t]),i):i(Uo[e]+(t||"")),xE=(e,t)=>{const s=new FileReader;return s.onload=function(){const i=s.result.split(",")[1];t("b"+(i||""))},s.readAsDataURL(e)};function RE(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Hw;function UY(e,t){if(SM&&e.data instanceof Blob)return e.data.arrayBuffer().then(RE).then(t);if(xM&&(e.data instanceof ArrayBuffer||RM(e.data)))return t(RE(e.data));$0(e,!1,s=>{Hw||(Hw=new TextEncoder),t(Hw.encode(s))})}const EE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<EE.length;e++)lg[EE.charCodeAt(e)]=e;const jY=e=>{let t=e.length*.75,s=e.length,i,n=0,o,r,a,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const c=new ArrayBuffer(t),d=new Uint8Array(c);for(i=0;i<s;i+=4)o=lg[e.charCodeAt(i)],r=lg[e.charCodeAt(i+1)],a=lg[e.charCodeAt(i+2)],l=lg[e.charCodeAt(i+3)],d[n++]=o<<2|r>>4,d[n++]=(r&15)<<4|a>>2,d[n++]=(a&3)<<6|l&63;return c},KY=typeof ArrayBuffer=="function",U0=(e,t)=>{if(typeof e!="string")return{type:"message",data:EM(e,t)};const s=e.charAt(0);return s==="b"?{type:"message",data:qY(e.substring(1),t)}:Jm[s]?e.length>1?{type:Jm[s],data:e.substring(1)}:{type:Jm[s]}:cS},qY=(e,t)=>{if(KY){const s=jY(e);return EM(s,t)}else return{base64:!0,data:e}},EM=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},AM="",YY=(e,t)=>{const s=e.length,i=new Array(s);let n=0;e.forEach((o,r)=>{$0(o,!1,a=>{i[r]=a,++n===s&&t(i.join(AM))})})},XY=(e,t)=>{const s=e.split(AM),i=[];for(let n=0;n<s.length;n++){const o=U0(s[n],t);if(i.push(o),o.type==="error")break}return i};function QY(){return new TransformStream({transform(e,t){UY(e,s=>{const i=s.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const o=new DataView(n.buffer);o.setUint8(0,126),o.setUint16(1,i)}else{n=new Uint8Array(9);const o=new DataView(n.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(i))}e.data&&typeof e.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(s)})}})}let Bw;function nm(e){return e.reduce((t,s)=>t+s.length,0)}function om(e,t){if(e[0].length===t)return e.shift();const s=new Uint8Array(t);let i=0;for(let n=0;n<t;n++)s[n]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),s}function JY(e,t){Bw||(Bw=new TextDecoder);const s=[];let i=0,n=-1,o=!1;return new TransformStream({transform(r,a){for(s.push(r);;){if(i===0){if(nm(s)<1)break;const l=om(s,1);o=(l[0]&128)===128,n=l[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(nm(s)<2)break;const l=om(s,2);n=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),i=3}else if(i===2){if(nm(s)<8)break;const l=om(s,8),c=new DataView(l.buffer,l.byteOffset,l.length),d=c.getUint32(0);if(d>Math.pow(2,21)-1){a.enqueue(cS);break}n=d*Math.pow(2,32)+c.getUint32(4),i=3}else{if(nm(s)<n)break;const l=om(s,n);a.enqueue(U0(o?l:Bw.decode(l),t)),i=0}if(n===0||n>e){a.enqueue(cS);break}}}})}const FM=4;function ps(e){if(e)return ZY(e)}function ZY(e){for(var t in ps.prototype)e[t]=ps.prototype[t];return e}ps.prototype.on=ps.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ps.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this};ps.prototype.off=ps.prototype.removeListener=ps.prototype.removeAllListeners=ps.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+e];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var i,n=0;n<s.length;n++)if(i=s[n],i===t||i.fn===t){s.splice(n,1);break}return s.length===0&&delete this._callbacks["$"+e],this};ps.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(s){s=s.slice(0);for(var i=0,n=s.length;i<n;++i)s[i].apply(this,t)}return this};ps.prototype.emitReserved=ps.prototype.emit;ps.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ps.prototype.hasListeners=function(e){return!!this.listeners(e).length};const IC=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,s)=>s(t,0),fn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),eX="arraybuffer";function PM(e,...t){return t.reduce((s,i)=>(e.hasOwnProperty(i)&&(s[i]=e[i]),s),{})}const tX=fn.setTimeout,sX=fn.clearTimeout;function LC(e,t){t.useNativeTimers?(e.setTimeoutFn=tX.bind(fn),e.clearTimeoutFn=sX.bind(fn)):(e.setTimeoutFn=fn.setTimeout.bind(fn),e.clearTimeoutFn=fn.clearTimeout.bind(fn))}const iX=1.33;function nX(e){return typeof e=="string"?oX(e):Math.ceil((e.byteLength||e.size)*iX)}function oX(e){let t=0,s=0;for(let i=0,n=e.length;i<n;i++)t=e.charCodeAt(i),t<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(i++,s+=4);return s}function TM(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function rX(e){let t="";for(let s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t}function aX(e){let t={},s=e.split("&");for(let i=0,n=s.length;i<n;i++){let o=s[i].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class lX extends Error{constructor(t,s,i){super(t),this.description=s,this.context=i,this.type="TransportError"}}class j0 extends ps{constructor(t){super(),this.writable=!1,LC(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,s,i){return super.emitReserved("error",new lX(t,s,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const s=U0(t,this.socket.binaryType);this.onPacket(s)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,s={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const s=rX(t);return s.length?"?"+s:""}}class cX extends j0{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const s=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||s()})),this.writable||(i++,this.once("drain",function(){--i||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const s=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};XY(t,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,YY(t,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=TM()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(t,s)}}let DM=!1;try{DM=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const dX=DM;function hX(){}class uX extends cX{constructor(t){if(super(t),typeof location<"u"){const s=location.protocol==="https:";let i=location.port;i||(i=s?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}}doWrite(t,s){const i=this.request({method:"POST",data:t});i.on("success",s),i.on("error",(n,o)=>{this.onError("xhr post error",n,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(s,i)=>{this.onError("xhr poll error",s,i)}),this.pollXhr=t}}class zo extends ps{constructor(t,s,i){super(),this.createRequest=t,LC(this,i),this._opts=i,this._method=i.method||"GET",this._uri=s,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var t;const s=PM(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(s);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=zo.requestsCount++,zo.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=hX,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete zo.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}zo.requestsCount=0;zo.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",AE);else if(typeof addEventListener=="function"){const e="onpagehide"in fn?"pagehide":"unload";addEventListener(e,AE,!1)}}function AE(){for(let e in zo.requests)zo.requests.hasOwnProperty(e)&&zo.requests[e].abort()}const gX=(function(){const e=_M({xdomain:!1});return e&&e.responseType!==null})();class fX extends uX{constructor(t){super(t);const s=t&&t.forceBase64;this.supportsBinary=gX&&!s}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new zo(_M,this.uri(),t)}}function _M(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||dX))return new XMLHttpRequest}catch{}if(!t)try{return new fn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const MM=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class pX extends j0{get name(){return"websocket"}doOpen(){const t=this.uri(),s=this.opts.protocols,i=MM?{}:PM(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,s,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const i=t[s],n=s===t.length-1;$0(i,this.supportsBinary,o=>{try{this.doWrite(i,o)}catch{}n&&IC(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=TM()),this.supportsBinary||(s.b64=1),this.createUri(t,s)}}const Gw=fn.WebSocket||fn.MozWebSocket;class mX extends pX{createSocket(t,s,i){return MM?new Gw(t,s,i):s?new Gw(t,s):new Gw(t)}doWrite(t,s){this.ws.send(s)}}class vX extends j0{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const s=JY(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(s).getReader(),n=QY();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const o=()=>{i.read().then(({done:a,value:l})=>{a||(this.onPacket(l),o())}).catch(a=>{})};o();const r={type:"open"};this.query.sid&&(r.data=`{"sid":"${this.query.sid}"}`),this._writer.write(r).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const i=t[s],n=s===t.length-1;this._writer.write(i).then(()=>{n&&IC(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const CX={websocket:mX,webtransport:vX,polling:fX},wX=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,bX=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function dS(e){if(e.length>8e3)throw"URI too long";const t=e,s=e.indexOf("["),i=e.indexOf("]");s!=-1&&i!=-1&&(e=e.substring(0,s)+e.substring(s,i).replace(/:/g,";")+e.substring(i,e.length));let n=wX.exec(e||""),o={},r=14;for(;r--;)o[bX[r]]=n[r]||"";return s!=-1&&i!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=yX(o,o.path),o.queryKey=SX(o,o.query),o}function yX(e,t){const s=/\/{2,9}/g,i=t.replace(s,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function SX(e,t){const s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,o){n&&(s[n]=o)}),s}const hS=typeof addEventListener=="function"&&typeof removeEventListener=="function",Zm=[];hS&&addEventListener("offline",()=>{Zm.forEach(e=>e())},!1);class nl extends ps{constructor(t,s){if(super(),this.binaryType=eX,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(s=t,t=null),t){const i=dS(t);s.hostname=i.host,s.secure=i.protocol==="https"||i.protocol==="wss",s.port=i.port,i.query&&(s.query=i.query)}else s.host&&(s.hostname=dS(s.host).host);LC(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(i=>{const n=i.prototype.name;this.transports.push(n),this._transportsByName[n]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=aX(this.opts.query)),hS&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Zm.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const s=Object.assign({},this.opts.query);s.EIO=FM,s.transport=t,this.id&&(s.sid=this.id);const i=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&nl.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(t);s.open(),this.setTransport(s)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",nl.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=t.data,this._onError(s);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let i=0;i<this.writeBuffer.length;i++){const n=this.writeBuffer[i].data;if(n&&(s+=nX(n)),i>0&&s>this._maxPayload)return this.writeBuffer.slice(0,i);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,IC(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,s,i){return this._sendPacket("message",t,s,i),this}send(t,s,i){return this._sendPacket("message",t,s,i),this}_sendPacket(t,s,i,n){if(typeof s=="function"&&(n=s,s=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const o={type:t,data:s,options:i};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),t()},i=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}_onError(t){if(nl.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),hS&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=Zm.indexOf(this._offlineEventListener);i!==-1&&Zm.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,s),this.writeBuffer=[],this._prevBufferLen=0}}}nl.protocol=FM;class xX extends nl{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let s=this.createTransport(t),i=!1;nl.priorWebsocketSuccess=!1;const n=()=>{i||(s.send([{type:"ping",data:"probe"}]),s.once("packet",h=>{if(!i)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;nl.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(d(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const u=new Error("probe error");u.transport=s.name,this.emitReserved("upgradeError",u)}}))};function o(){i||(i=!0,d(),s.close(),s=null)}const r=h=>{const u=new Error("probe error: "+h);u.transport=s.name,o(),this.emitReserved("upgradeError",u)};function a(){r("transport closed")}function l(){r("socket closed")}function c(h){s&&h.name!==s.name&&o()}const d=()=>{s.removeListener("open",n),s.removeListener("error",r),s.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};s.once("open",n),s.once("error",r),s.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||s.open()},200):s.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const s=[];for(let i=0;i<t.length;i++)~this.transports.indexOf(t[i])&&s.push(t[i]);return s}}let RX=class extends xX{constructor(t,s={}){const i=typeof t=="object"?t:s;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(n=>CX[n]).filter(n=>!!n)),super(t,i)}};function EX(e,t="",s){let i=e;s=s||typeof location<"u"&&location,e==null&&(e=s.protocol+"//"+s.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=s.protocol+e:e=s.host+e),/^(https?|wss?):\/\//.test(e)||(typeof s<"u"?e=s.protocol+"//"+e:e="https://"+e),i=dS(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+t,i.href=i.protocol+"://"+o+(s&&s.port===i.port?"":":"+i.port),i}const AX=typeof ArrayBuffer=="function",FX=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,kM=Object.prototype.toString,PX=typeof Blob=="function"||typeof Blob<"u"&&kM.call(Blob)==="[object BlobConstructor]",TX=typeof File=="function"||typeof File<"u"&&kM.call(File)==="[object FileConstructor]";function K0(e){return AX&&(e instanceof ArrayBuffer||FX(e))||PX&&e instanceof Blob||TX&&e instanceof File}function ev(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let s=0,i=e.length;s<i;s++)if(ev(e[s]))return!0;return!1}if(K0(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return ev(e.toJSON(),!0);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&ev(e[s]))return!0;return!1}function DX(e){const t=[],s=e.data,i=e;return i.data=uS(s,t),i.attachments=t.length,{packet:i,buffers:t}}function uS(e,t){if(!e)return e;if(K0(e)){const s={_placeholder:!0,num:t.length};return t.push(e),s}else if(Array.isArray(e)){const s=new Array(e.length);for(let i=0;i<e.length;i++)s[i]=uS(e[i],t);return s}else if(typeof e=="object"&&!(e instanceof Date)){const s={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=uS(e[i],t));return s}return e}function _X(e,t){return e.data=gS(e.data,t),delete e.attachments,e}function gS(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let s=0;s<e.length;s++)e[s]=gS(e[s],t);else if(typeof e=="object")for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=gS(e[s],t));return e}const IM=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],MX=5;var et;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(et||(et={}));class kX{constructor(t){this.replacer=t}encode(t){return(t.type===et.EVENT||t.type===et.ACK)&&ev(t)?this.encodeAsBinary({type:t.type===et.EVENT?et.BINARY_EVENT:et.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let s=""+t.type;return(t.type===et.BINARY_EVENT||t.type===et.BINARY_ACK)&&(s+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(s+=t.nsp+","),t.id!=null&&(s+=t.id),t.data!=null&&(s+=JSON.stringify(t.data,this.replacer)),s}encodeAsBinary(t){const s=DX(t),i=this.encodeAsString(s.packet),n=s.buffers;return n.unshift(i),n}}class q0 extends ps{constructor(t){super(),this.reviver=t}add(t){let s;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(t);const i=s.type===et.BINARY_EVENT;i||s.type===et.BINARY_ACK?(s.type=i?et.EVENT:et.ACK,this.reconstructor=new IX(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(K0(t)||t.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(t),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let s=0;const i={type:Number(t.charAt(0))};if(et[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===et.BINARY_EVENT||i.type===et.BINARY_ACK){const o=s+1;for(;t.charAt(++s)!=="-"&&s!=t.length;);const r=t.substring(o,s);if(r!=Number(r)||t.charAt(s)!=="-")throw new Error("Illegal attachments");i.attachments=Number(r)}if(t.charAt(s+1)==="/"){const o=s+1;for(;++s&&!(t.charAt(s)===","||s===t.length););i.nsp=t.substring(o,s)}else i.nsp="/";const n=t.charAt(s+1);if(n!==""&&Number(n)==n){const o=s+1;for(;++s;){const r=t.charAt(s);if(r==null||Number(r)!=r){--s;break}if(s===t.length)break}i.id=Number(t.substring(o,s+1))}if(t.charAt(++s)){const o=this.tryParse(t.substr(s));if(q0.isPayloadValid(i.type,o))i.data=o;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,s){switch(t){case et.CONNECT:return Ov(s);case et.DISCONNECT:return s===void 0;case et.CONNECT_ERROR:return typeof s=="string"||Ov(s);case et.EVENT:case et.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&IM.indexOf(s[0])===-1);case et.ACK:case et.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class IX{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const s=_X(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function LX(e){return typeof e=="string"}const OX=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function NX(e){return e===void 0||OX(e)}function Ov(e){return Object.prototype.toString.call(e)==="[object Object]"}function HX(e,t){switch(e){case et.CONNECT:return t===void 0||Ov(t);case et.DISCONNECT:return t===void 0;case et.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&IM.indexOf(t[0])===-1);case et.ACK:return Array.isArray(t);case et.CONNECT_ERROR:return typeof t=="string"||Ov(t);default:return!1}}function BX(e){return LX(e.nsp)&&NX(e.id)&&HX(e.type,e.data)}const GX=Object.freeze(Object.defineProperty({__proto__:null,Decoder:q0,Encoder:kX,get PacketType(){return et},isPacketValid:BX,protocol:MX},Symbol.toStringTag,{value:"Module"}));function $n(e,t,s){return e.on(t,s),function(){e.off(t,s)}}const VX=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class LM extends ps{constructor(t,s,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=s,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[$n(t,"open",this.onopen.bind(this)),$n(t,"packet",this.onpacket.bind(this)),$n(t,"error",this.onerror.bind(this)),$n(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...s){var i,n,o;if(VX.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(s.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const r={type:et.EVENT,data:s};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const d=this.ids++,h=s.pop();this._registerAckCallback(d,h),r.id=d}const a=(n=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||n===void 0?void 0:n.writable,l=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(t,s){var i;const n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[t]=s;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);s.call(this,new Error("operation has timed out"))},n),r=(...a)=>{this.io.clearTimeoutFn(o),s.apply(this,a)};r.withError=!0,this.acks[t]=r}emitWithAck(t,...s){return new Promise((i,n)=>{const o=(r,a)=>r?n(r):i(a);o.withError=!0,s.push(o),this.emit(t,...s)})}_addToQueue(t){let s;typeof t[t.length-1]=="function"&&(s=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...o)=>(this._queue[0],n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(n)):(this._queue.shift(),s&&s(null,...o)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!t||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:et.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case et.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case et.EVENT:case et.BINARY_EVENT:this.onevent(t);break;case et.ACK:case et.BINARY_ACK:this.onack(t);break;case et.DISCONNECT:this.ondisconnect();break;case et.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const s=t.data||[];t.id!=null&&s.push(this.ack(t.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const i of s)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const s=this;let i=!1;return function(...n){i||(i=!0,s.packet({type:et.ACK,id:t,data:n}))}}onack(t){const s=this.acks[t.id];typeof s=="function"&&(delete this.acks[t.id],s.withError&&t.data.unshift(null),s.apply(this,t.data))}onconnect(t,s){this.id=t,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:et.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const s=this._anyListeners;for(let i=0;i<s.length;i++)if(t===s[i])return s.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const s=this._anyOutgoingListeners;for(let i=0;i<s.length;i++)if(t===s[i])return s.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const i of s)i.apply(this,t.data)}}}function Pu(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Pu.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-s:e+s}return Math.min(e,this.max)|0};Pu.prototype.reset=function(){this.attempts=0};Pu.prototype.setMin=function(e){this.ms=e};Pu.prototype.setMax=function(e){this.max=e};Pu.prototype.setJitter=function(e){this.jitter=e};class fS extends ps{constructor(t,s){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(s=t,t=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,LC(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((i=s.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Pu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=t;const n=s.parser||GX;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var s;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(s=this.backoff)===null||s===void 0||s.setMin(t),this)}randomizationFactor(t){var s;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(s=this.backoff)===null||s===void 0||s.setJitter(t),this)}reconnectionDelayMax(t){var s;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(s=this.backoff)===null||s===void 0||s.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new RX(this.uri,this.opts);const s=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const n=$n(s,"open",function(){i.onopen(),t&&t()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},r=$n(s,"error",o);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{n(),o(new Error("timeout")),s.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(n),this.subs.push(r),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push($n(t,"ping",this.onping.bind(this)),$n(t,"data",this.ondata.bind(this)),$n(t,"error",this.onerror.bind(this)),$n(t,"close",this.onclose.bind(this)),$n(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(s){this.onclose("parse error",s)}}ondecoded(t){IC(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,s){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new LM(this,t,s),this.nsps[t]=i),i}_destroy(t){const s=Object.keys(this.nsps);for(const i of s)if(this.nsps[i].active)return;this._close()}_packet(t){const s=this.encoder.encode(t);for(let i=0;i<s.length;i++)this.engine.write(s[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,s){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},s);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const zu={};function tv(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const s=EX(e,t.path||"/socket.io"),i=s.source,n=s.id,o=s.path,r=zu[n]&&o in zu[n].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||r;let l;return a?l=new fS(i,t):(zu[n]||(zu[n]=new fS(i,t)),l=zu[n]),s.query&&!t.query&&(t.query=s.queryKey),l.socket(s.path,t)}Object.assign(tv,{Manager:fS,Socket:LM,io:tv,connect:tv});var zX=W('<h2>WebRTC Video Call Demo (Svelte)</h2> <button>Start Call</button> <div><h2>Phone</h2> <video autoplay playsinline="" class="svelte-1c0t62k"></video> <video autoplay playsinline="" class="svelte-1c0t62k"></video></div>',3);function WX(e,t){lt(t,!1);let s=J(),i=J(),n,o,r="room1";const a={iceServers:[{urls:"stun:stun.l.google.com:19302"}]};async function l(){n.emit("join-room",r);const p=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});as(s,w(s).srcObject=p),o=new RTCPeerConnection(a),p.getTracks().forEach(m=>o.addTrack(m,p)),o.ontrack=m=>{as(i,w(i).srcObject=m.streams[0])},o.onicecandidate=m=>{m.candidate&&n.emit("signal",{roomId:r,data:{candidate:m.candidate}})}}vs(()=>{n=tv(),n.on("user-joined",async()=>{const p=await o.createOffer();await o.setLocalDescription(p),n.emit("signal",{roomId:r,data:{sdp:p}})}),n.on("signal",async({data:p})=>{if(p.sdp&&(await o.setRemoteDescription(p.sdp),p.sdp.type==="offer")){const m=await o.createAnswer();await o.setLocalDescription(m),n.emit("signal",{roomId:r,data:{sdp:m}})}p.candidate&&await o.addIceCandidate(p.candidate)})}),ut();var c=zX(),d=M(j(c),2),h=M(d,2),u=M(D(h),2);u.muted=!0,ss(u,p=>L(s,p),()=>w(s));var f=M(u,2);ss(f,p=>L(i,p),()=>w(i)),z("click",d,l),_(e,c),ct()}var $X=W('<div class="flex justify-between flex-row items-center w-full"><div><span class="font-semibold text-blue-600 truncate"> </span> <span> </span></div> <div><label for="quantity">Quantity (0-100):</label> <input type="number" id="quantity" name="quantity" min="0" max="100" step="5" value="1"/></div> <div><button><!></button></div></div>'),UX=W(`<div class="min-w-[330px] w-full h-full flex flex-col"><div class="min-h-[52px] px-2 bg-gray-200 flex items-center gap-2"><div class="flex-1"><!></div> <button class="w-9 h-9 flex items-center justify-center
           rounded-full
           hover:bg-gray-300
           transition" title="ThÃªm báº¡n"><!></button> <button class="w-9 h-9 flex items-center justify-center
           rounded-full
           hover:bg-gray-300
           transition" title="Táº¡o nhÃ³m"><!></button></div> <div class="flex-1 bg-gray-100 overflow-auto"><div class="w-full h-full overflow-auto"><h1 class="text-1xl font-bold mb-2 text-center hidden">Chat List</h1> <div class="bg-white shadow-md rounded-lg overflow-hidden"><ul id="chat-list" class="divide-y divide-gray-200"></ul></div></div></div></div>`),jX=W(`<div class="h-full w-full flex justify-between items-center gap-3"><div class="font-semibold"></div> <div class="font-semibold">Nguyá»n VÄn A</div> <div><div class="flex items-center gap-2"><button class="w-9 h-9 flex items-center justify-center
           rounded-full
           hover:bg-gray-300
           transition" title="Gá»i audio"><!></button> <button class="w-9 h-9 flex items-center justify-center
           rounded-full
           hover:bg-gray-300
           transition" title="Gá»i video"><!></button></div></div></div>`),KX=W('<p class="text-center text-gray-400 mt-10">Chá»n má»t cuá»c trÃ² chuyá»n Äá» báº¯t Äáº§u</p>'),qX=W('<p class="text-center text-xs text-gray-500 py-2">Äang táº£i tin nháº¯n cÅ©...</p>'),YX=W("<!> <!>",1),XX=W('<!> <!> <div class="h-2"></div>',1),QX=W(`<div class="h-[56px]
           flex items-center justify-between
           px-4
           bg-white
           border-t border-gray-200
           sticky bottom-0 z-20"><button class="text-sm font-medium text-blue-600 hover:opacity-80">Huá»·</button> <span class="text-sm text-gray-600"> </span> <div class="flex items-center gap-2"><button class="w-9 h-9
               flex items-center justify-center
               rounded-full
               hover:bg-gray-100
               active:bg-gray-200
               transition"><!></button> <button class="w-9 h-9
               flex items-center justify-center
               rounded-full
               hover:bg-red-50
               active:bg-red-100
               transition"><!></button></div></div>`),JX=W('<div class="h-full w-full flex flex-col"><div class="flex-1 overflow-y-auto p-3 bg-gray-50"><!></div> <!></div>'),ZX=W('<div class="h-full w-full flex flex-col"><!></div>'),eQ=W('<img class="w-full h-20 object-cover rounded cursor-pointer" alt=""/>'),tQ=W('<li class="flex justify-between items-center text-xs bg-gray-50 p-2 rounded"><span class="truncate"> </span> <span class="text-gray-400"> </span></li>'),sQ=W('<li class="flex items-center gap-2"><img class="w-8 h-8 rounded-full"/> <span class="text-sm"> </span></li>'),iQ=W('<section><h4 class="text-sm font-semibold mb-2">ThÃ nh viÃªn</h4> <ul class="space-y-2"></ul></section>'),nQ=W('<div class="h-full w-full flex flex-col bg-white"><div class="p-4 border-b border-gray-200 flex flex-col items-center"><img class="w-20 h-20 rounded-full mb-2" alt=""/> <div class="font-semibold"> </div> <div class="text-xs text-gray-500"> </div></div> <div class="flex-1 overflow-y-auto px-4 py-3 space-y-5 chat-scroll"><section><h4 class="text-sm font-semibold mb-2">ThÃ´ng tin</h4> <p class="text-xs text-gray-600"> </p></section> <section><h4 class="text-sm font-semibold mb-2">áº¢nh / Video</h4> <div class="grid grid-cols-3 gap-2"></div></section> <section><h4 class="text-sm font-semibold mb-2">File</h4> <ul class="space-y-2"></ul></section> <!> <section class="pt-3 border-t border-gray-200"><button class="w-full text-sm text-red-600 hover:underline">Rá»i khá»i cuá»c trÃ² chuyá»n</button></section></div></div>'),oQ=W('<div slot="footer" class="h-full flex items-center justify-center text-xs text-gray-400">Desktop Clone</div>'),rQ=W("<!> <!> <!>",1);function aQ(e,t){lt(t,!1);const s=()=>mt(Kn,"$messages",h),i=()=>mt(Pi,"$conversationId",h),n=()=>mt(Ir,"$myId",h),o=()=>mt(f,"$menuVisible",h),r=()=>mt(eb,"$myName",h),a=()=>mt(lm,"$status",h),l=()=>mt(bp,"$conversations",h),c=()=>mt(Ja,"$selectionMode",h),d=()=>mt(qn,"$selectedMessageIds",h),[h,u]=Zi(),{menuVisible:f,toggleMenu:p}=W0;let m=J(!1);const v={};let C=J(null),b=J(),y=J(),S=J(!1),R=!1,A=0,F=null;async function T(X=!1){w(y)&&(await Qr(),w(y).scrollTo({top:w(y).scrollHeight,behavior:X?"smooth":"auto"}))}async function k(){if(!w(y)||w(S)||w(y).scrollTop>120||s().length===0)return;w(y).scrollTop<=1&&as(y,w(y).scrollTop=1);const X=s()[0];if(F!==X.id){L(S,!0),R=!0,A=w(y).scrollHeight,F=X.id;try{await Tg(i(),{firstMsg:X})}catch(Q){console.error("Load older failed:",Q),F=null}finally{L(S,!1)}}}ES(async()=>{if(w(y)){if(R){await Qr();const X=w(y).scrollHeight-A;X>0&&as(y,w(y).scrollTop+=X),R=!1;return}s().length>0&&(w(y).scrollHeight-w(y).scrollTop-w(y).clientHeight<300||F===null)&&T()}});async function N(X){!(X!=null&&X.conversationId)||w(C)===X.conversationId||(L(C,X.conversationId),Pi.set(w(C)),Kn.set([]),F=null,R=!1,await Tg(i()),T())}function I(X=""){const Q=X.trim();if(!Q||!w(C))return;const se=jt(Pn);Xn({type:"chat",conversationId:w(C),from:n(),message:Q,replyTo:(se==null?void 0:se.id)??null}),Pn.set(null)}vs(()=>{o()&&p(!1);const X=()=>k();return w(y).addEventListener("scroll",X,{passive:!0}),()=>{w(y).removeEventListener("scroll",X)}});let O=J(!1),V=J(null),ee=J("bottom"),G=J(null),ne=J({});function te({type:X="",mode:Q="bottom",event:se=null,width:De=null,height:we=null}={}){L(V,X),L(ee,Q),L(ne,{width:De,height:we}),Q==="anchor"&&(se!=null&&se.currentTarget)?L(G,se.currentTarget.getBoundingClientRect()):L(G,null),L(O,!0)}function K(){L(O,!1),L(V,null),L(G,null)}const ve=X=>{te({type:"shareConversation",mode:"center",width:"50%",height:"70%",event:X})};Bt(()=>(s(),w(y)),()=>{s().length>0&&w(y)&&w(y).scrollHeight-w(y).scrollTop-w(y).clientHeight<100&&T("smooth")}),ki(),ut();var ce=rQ(),Se=j(ce);fY(Se,{get option(){return v},$$slots:{header:(X,Q)=>{var se=$X(),De=D(se),we=D(De),Me=D(we),je=M(we,2),nt=D(je),bt=M(De,4),We=D(bt);We.__click=p;var gt=D(We);{var Fe=Pe=>{$A(Pe,{size:26})},Ze=Pe=>{UA(Pe,{size:26})};Z(gt,Pe=>{o()?Pe(Fe):Pe(Ze,!1)})}Ae((Pe,Oe)=>{ze(Me,r()),Ht(je,1,`text-[10px] px-2 rounded-full ${Pe??""}`),ze(nt,Oe)},[()=>(a(),Y(()=>a().includes("Connected")?"bg-green-100 text-green-600":"bg-red-100 text-red-600")),()=>(a(),Y(()=>a().replace(/\s.*$/,"")))]),_(X,se)},left:(X,Q)=>{var se=UX(),De=D(se),we=D(De),Me=D(we);bY(Me,{placeholder:"TÃ¬m kiáº¿m cuá»c trÃ² chuyá»n",onSearch:Oe=>{L(b,l().filter(dt=>(dt.name||"").toLowerCase().includes((Oe||"").toLowerCase())))}});var je=M(we,2);je.__click=Oe=>te({type:"user",mode:"anchor",event:Oe});var nt=D(je);KA(nt,{size:20});var bt=M(je,2);bt.__click=Oe=>te({type:"group",mode:"anchor",event:Oe});var We=D(bt);qA(We,{size:20});var gt=M(De,2),Fe=D(gt),Ze=M(D(Fe),2),Pe=D(Ze);fs(Pe,5,l,gi,(Oe,dt)=>{QS(Oe,{get conversation(){return w(dt)},get selectedId(){return w(C)},onSelect:N,className:"p-4 rounded-none"})}),_(X,se)},head:(X,Q)=>{var se=jX(),De=M(D(se),4),we=D(De),Me=D(we);Me.__click=We=>te({type:"callPhone",mode:"center",event:We,width:"400px",height:"600px"});var je=D(Me);tI(je,{size:20});var nt=M(Me,2);nt.__click=We=>te({type:"callVideo",mode:"center",event:We,width:"98%",height:"98%"});var bt=D(nt);YA(bt,{size:20}),_(X,se)},content:(X,Q)=>{var se=JX(),De=D(se),we=D(De);{var Me=We=>{var gt=KX();_(We,gt)},je=We=>{var gt=XX(),Fe=j(gt);{var Ze=Oe=>{var dt=qX();_(Oe,dt)};Z(Fe,Oe=>{w(S)&&Oe(Ze)})}var Pe=M(Fe,2);fs(Pe,3,s,Oe=>Oe.id,(Oe,dt,Ot)=>{var q=YX(),ye=j(q);{var B=Ee=>{dF(Ee,{get time(){return w(dt),Y(()=>w(dt).created_at)},locale:"vi"})};Z(ye,Ee=>{me(w(Ot)),me(av),w(dt),s(),Y(()=>{var ot;return w(Ot)===0||av(w(dt).created_at,(ot=s()[w(Ot)-1])==null?void 0:ot.created_at)})&&Ee(B)})}var ae=M(ye,2);vT(ae,{get msg(){return w(dt)},get myId(){return n()},onShareMessage:ve}),_(Oe,q)}),_(We,gt)};Z(we,We=>{w(C)?We(je,!1):We(Me)})}ss(De,We=>L(y,We),()=>w(y));var nt=M(De,2);{var bt=We=>{var gt=QX(),Fe=D(gt);Fe.__click=()=>{qn.set(new Set),Ja.set(!1)};var Ze=M(Fe,2),Pe=D(Ze),Oe=M(Ze,2),dt=D(Oe);dt.__click=ve;var Ot=D(dt);DS(Ot,{size:"18",class:"text-gray-700"});var q=M(dt,2);q.__click=()=>{Array.from(jt(qn)).forEach(ae=>Xn({type:"delete",messageId:ae})),qn.set(new Set),Ja.set(!1)};var ye=D(q);jA(ye,{size:"18",class:"text-red-600"}),Ae(()=>ze(Pe,`${d(),Y(()=>d().size)??""} ÄÃ£ chá»n`)),_(We,gt)};Z(nt,We=>{c()&&We(bt)})}_(X,se)},comment:(X,Q)=>{var se=ZX(),De=D(se);{let we=Hr(()=>!w(C));vM(De,{placeholder:"Nháº­p tin nháº¯n...",get disabled(){return w(we)},onSendText:Me=>{I(Me==null?void 0:Me.text),console.log("payload:",Me)},onSendImages:Me=>{console.log("onSendImages:",Me)},onSendFiles:Me=>{console.log("onSendFiles:",Me)},onSendSticker:Me=>{console.log("onSendSticker:",Me)}})}_(X,se)},right:(X,Q)=>{var se=nQ(),De=D(se),we=D(De),Me=M(we,2),je=D(Me),nt=M(Me,2),bt=D(nt),We=M(De,2),gt=D(We),Fe=M(D(gt),2),Ze=D(Fe),Pe=M(gt,2),Oe=M(D(Pe),2);fs(Oe,5,()=>(me(Hs),Y(()=>Hs.media)),gi,(B,ae)=>{var Ee=eQ();Ae(()=>xs(Ee,"src",w(ae))),_(B,Ee)});var dt=M(Pe,2),Ot=M(D(dt),2);fs(Ot,5,()=>(me(Hs),Y(()=>Hs.files)),gi,(B,ae)=>{var Ee=tQ(),ot=D(Ee),U=D(ot),ue=M(ot,2),xe=D(ue);Ae(()=>{ze(U,(w(ae),Y(()=>w(ae).name))),ze(xe,(w(ae),Y(()=>w(ae).size)))}),_(B,Ee)});var q=M(dt,2);{var ye=B=>{var ae=iQ(),Ee=M(D(ae),2);fs(Ee,5,()=>(me(Hs),Y(()=>Hs.members)),gi,(ot,U)=>{var ue=sQ(),xe=D(ue),le=M(xe,2),ke=D(le);Ae(()=>{xs(xe,"src",(w(U),Y(()=>w(U).avatar))),ze(ke,(w(U),Y(()=>w(U).name)))}),_(ot,ue)}),_(B,ae)};Z(q,B=>{me(Hs),Y(()=>Hs.isGroup)&&B(ye)})}Ae(()=>{xs(we,"src",(me(Hs),Y(()=>Hs.avatar))),ze(je,(me(Hs),Y(()=>Hs.name))),ze(bt,(me(Hs),Y(()=>Hs.isGroup?`${Hs.membersCount} thÃ nh viÃªn`:"Äang hoáº¡t Äá»ng"))),ze(Ze,(me(Hs),Y(()=>Hs.description)))}),_(X,se)},footer:(X,Q)=>{var se=oQ();_(X,se)}}});var Ce=M(Se,2);EY(Ce,st({get mode(){return w(ee)},get anchorRect(){return w(G)}},()=>w(ne),{get open(){return w(O)},set open(X){L(O,X)},children:(X,Q)=>{var se=de(),De=j(se);{var we=je=>{CM(je,{onClose:K})},Me=je=>{var nt=de(),bt=j(nt);{var We=Fe=>{wM(Fe,{onClose:K})},gt=Fe=>{var Ze=de(),Pe=j(Ze);{var Oe=Ot=>{bM(Ot,{onClose:K})},dt=Ot=>{var q=de(),ye=j(q);{var B=Ee=>{yM(Ee,{onClose:K})},ae=Ee=>{var ot=de(),U=j(ot);{var ue=le=>{NY(le,{onClose:K})},xe=le=>{var ke=de(),Ie=j(ke);{var _e=Ue=>{SE(Ue,{onClose:K})},Le=Ue=>{var yt=de(),Mt=j(yt);{var Yt=rt=>{WX(rt,{onClose:K})};Z(Mt,rt=>{w(V)==="callPhone"&&rt(Yt)},!0)}_(Ue,yt)};Z(Ie,Ue=>{w(V)==="callVideo"?Ue(_e):Ue(Le,!1)},!0)}_(le,ke)};Z(U,le=>{w(V)==="shareConversation"?le(ue):le(xe,!1)},!0)}_(Ee,ot)};Z(ye,Ee=>{w(V)==="contacts"?Ee(B):Ee(ae,!1)},!0)}_(Ot,q)};Z(Pe,Ot=>{w(V)==="settings"?Ot(Oe):Ot(dt,!1)},!0)}_(Fe,Ze)};Z(bt,Fe=>{w(V)==="group"?Fe(We):Fe(gt,!1)},!0)}_(je,nt)};Z(De,je=>{w(V)==="user"?je(we):je(Me,!1)})}_(X,se)},$$slots:{default:!0},$$legacy:!0}));var re=M(Ce,2);{var ie=X=>{SE(X,{onClose:()=>L(m,!1)})};Z(re,X=>{w(m)&&X(ie)})}_(e,ce),ct(),u()}Cp(["click"]);var lQ=W(`<div class="absolute bottom-0 left-0 right-0
               bg-white rounded-t-2xl
               p-4 pb-6
               animate-slide-up svelte-198oxpw"><!></div>`),cQ=W(`<div class="absolute bg-white rounded-xl shadow-lg
               p-3 animate-scale-in svelte-198oxpw"><!></div>`),dQ=W(`<div class="popup-center bg-white rounded-2xl shadow-xl
               animate-scale-in-center svelte-198oxpw"><!></div>`),hQ=W('<div class="fixed inset-0 z-50"><div class="absolute inset-0 bg-black/40"></div> <!></div>');function uQ(e,t){lt(t,!1);let s=he(t,"open",12,!1),i=he(t,"mode",8,"bottom"),n=he(t,"anchorRect",8,null);const o=200,r=180,a=8,l=8;let c=J({top:0,left:0});function d(){s(!1)}function h(){if(!n())return{top:0,left:0};const m=window.innerWidth,v=window.innerHeight;let C=n().left+n().width/2-o/2;C=Math.max(l,C),C=Math.min(C,m-o-l);const b=v-n().bottom,y=n().top;let S;return b>=r+a?S=n().bottom+a:y>=r+a?S=n().top-r-a:S=Math.max(l,v-r-l),{top:S,left:C}}Bt(()=>(me(s()),me(i()),me(n())),()=>{s()&&i()==="anchor"&&n()&&L(c,h())}),ki(),ut();var u=de(),f=j(u);{var p=m=>{var v=hQ(),C=D(v),b=M(C,2);{var y=R=>{var A=lQ(),F=D(A);He(F,t,"default",{}),_(R,A)},S=R=>{var A=de(),F=j(A);{var T=N=>{var I=cQ(),O=D(I);He(O,t,"default",{}),Ae(()=>wn(I,`
          top: ${w(c),Y(()=>w(c).top)??""}px;
          left: ${w(c),Y(()=>w(c).left)??""}px;
          width: 200px;
        `)),_(N,I)},k=N=>{var I=de(),O=j(I);{var V=ee=>{var G=dQ(),ne=D(G);He(ne,t,"default",{}),_(ee,G)};Z(O,ee=>{i()==="center"&&ee(V)},!0)}_(N,I)};Z(F,N=>{i()==="anchor"&&n()?N(T):N(k,!1)},!0)}_(R,A)};Z(b,R=>{i()==="bottom"?R(y):R(S,!1)})}z("click",C,d),_(m,v)};Z(f,m=>{s()&&m(p)})}_(e,u),ct()}var gQ=W(`<div class="flex items-center px-4 py-3
               border-b border-gray-100
               active:bg-gray-100 transition"><!></div>`),fQ=W(`<div class="w-full h-dvh flex flex-col bg-white"><div class="sticky top-0 z-10 bg-white border-b border-gray-200"><div class="px-4 pt-4 pb-3"><div class="flex items-center justify-between mb-2"><h2 class="text-lg font-semibold text-gray-900">Tin nháº¯n</h2> <div class="flex items-center gap-4 text-gray-600"><button><!></button> <button><!></button> <button><!></button></div></div> <div><div class="relative"><!> <input type="text" placeholder="TÃ¬m kiáº¿m" class="w-full pl-10 pr-4 py-2 text-sm
                   rounded-full bg-gray-100
                   focus:outline-none"/></div></div></div></div> <div class="flex-1 overflow-y-auto"></div> <div class="shrink-0 border-t border-gray-200 bg-white"><div class="flex justify-around py-2"><div class="flex flex-col items-center text-blue-600 text-xs"><!> <span class="mt-0.5">Tin nháº¯n</span></div> <div class="flex flex-col items-center text-gray-500 text-xs"><button><!></button> <span class="mt-0.5">Danh báº¡</span></div> <div class="flex flex-col items-center text-gray-500 text-xs"><button><!></button> <span class="mt-0.5">CÃ i Äáº·t</span></div></div></div></div> <!>`,1);function pQ(e,t){lt(t,!1);const s=()=>mt(a,"$menuVisible",o),i=()=>mt(Pi,"$conversationId",o),n=()=>mt(bp,"$conversations",o),[o,r]=Zi(),{menuVisible:a,toggleMenu:l}=W0;let c=he(t,"openChat",8),d=J(null),h=J(!0),u=0;function f(Fe){var Ze;(Ze=c())==null||Ze(Fe)}function p(Fe){const Ze=Fe.target.scrollTop;Ze>u&&Ze>20&&L(h,!1),Ze<u&&L(h,!0),u=Ze}let m=J(!1),v=J(null),C=J("bottom"),b=J(null);function y({type:Fe,mode:Ze="bottom",event:Pe=null}){L(v,Fe),L(C,Ze),Ze==="anchor"&&(Pe!=null&&Pe.currentTarget)?L(b,Pe.currentTarget.getBoundingClientRect()):L(b,null),L(m,!0)}function S(){L(m,!1),L(v,null),L(b,null)}vs(()=>{s()&&l(!1),document.addEventListener("touchmove",Fe=>{Fe.scale!==1&&Fe.preventDefault()},{passive:!1})});async function R(Fe){!(Fe!=null&&Fe.conversationId)||w(d)===Fe.conversationId||(L(d,Fe.conversationId),Pi.set(w(d)),Kn.set([]),await Tg(i()))}ut();var A=fQ(),F=j(A),T=D(F),k=D(T),N=D(k),I=M(D(N),2),O=D(I),V=D(O);KA(V,{size:20});var ee=M(O,2),G=D(ee);qA(G,{size:20});var ne=M(ee,2),te=D(ne);{var K=Fe=>{$A(Fe,{size:20})},ve=Fe=>{UA(Fe,{size:20})};Z(te,Fe=>{s()?Fe(K):Fe(ve,!1)})}var ce=M(N,2);let Se;var Ce=D(ce),re=D(Ce);_S(re,{size:18,class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"});var ie=M(T,2);fs(ie,5,n,gi,(Fe,Ze)=>{var Pe=gQ(),Oe=D(Pe);QS(Oe,{get conversation(){return w(Ze)},get selectedId(){return w(d)},onSelect:R}),z("click",Pe,()=>f(w(Ze))),_(Fe,Pe)});var X=M(ie,2),Q=D(X),se=D(Q),De=D(se);X1(De,{size:22});var we=M(se,2),Me=D(we),je=D(Me);G1(je,{size:22});var nt=M(we,2),bt=D(nt),We=D(bt);oI(We,{size:22});var gt=M(F,2);uQ(gt,{get mode(){return w(C)},get anchorRect(){return w(b)},get open(){return w(m)},set open(Fe){L(m,Fe)},children:(Fe,Ze)=>{var Pe=de(),Oe=j(Pe);{var dt=q=>{CM(q,{onClose:S})},Ot=q=>{var ye=de(),B=j(ye);{var ae=ot=>{wM(ot,{onClose:S})},Ee=ot=>{var U=de(),ue=j(U);{var xe=ke=>{bM(ke,{onClose:S})},le=ke=>{var Ie=de(),_e=j(Ie);{var Le=Ue=>{yM(Ue,{onClose:S})};Z(_e,Ue=>{w(v)==="contacts"&&Ue(Le)},!0)}_(ke,Ie)};Z(ue,ke=>{w(v)==="settings"?ke(xe):ke(le,!1)},!0)}_(ot,U)};Z(B,ot=>{w(v)==="group"?ot(ae):ot(Ee,!1)},!0)}_(q,ye)};Z(Oe,q=>{w(v)==="user"?q(dt):q(Ot,!1)})}_(Fe,Pe)},$$slots:{default:!0},$$legacy:!0}),Ae(()=>Se=Ht(ce,1,"transition-all duration-200 ease-out overflow-hidden",null,Se,{"h-0":!w(h),"opacity-0":!w(h),"mt-0":!w(h),"h-10":w(h),"opacity-100":w(h),"mt-2":w(h)})),z("click",O,Fe=>y({type:"user",mode:"anchor",event:Fe})),z("click",ee,Fe=>y({type:"group",mode:"anchor",event:Fe})),z("click",ne,l),z("scroll",ie,p),z("click",Me,Fe=>y({type:"contacts",mode:"center",event:Fe})),z("click",bt,Fe=>y({type:"settings",mode:"bottom",event:Fe})),_(e,A),ct(),r()}var mQ=W("<!> <!>",1),vQ=W(`<div class="h-screen w-full flex flex-col bg-white"><header class="h-14 px-3
           flex items-center justify-between
           border-b border-gray-200 bg-white shrink-0"><div class="flex items-center gap-2"><button><!></button> <span class="font-semibold truncate max-w-[160px]"> </span></div> <div class="flex items-center gap-4"><!> <!></div></header> <main class="flex-1 overflow-y-auto bg-gray-100 px-3 py-2 space-y-2"></main> <footer class="w-full shrink-0
           px-2 py-0
           bg-white border-t border-gray-200"><!></footer></div>`);function CQ(e,t){lt(t,!1);const s=()=>mt(Pi,"$conversationId",o),i=()=>mt(Ir,"$myId",o),n=()=>mt(Kn,"$messages",o),[o,r]=Zi(),a=J();let l=he(t,"activeChat",8),c=he(t,"back",8),d=J(),h=!1,u=!1,f=0,p=null;function m(G=""){const ne=G.trim();!ne||!w(a)||(console.log("text, selected, $myId:=-->",ne,w(a),i()),Xn({type:"chat",conversationId:w(a),from:i(),message:ne}))}ES(async()=>{if(w(d)){if(u){await Qr();const G=w(d).scrollHeight-f;G>0&&as(d,w(d).scrollTop+=G),u=!1;return}n().length>0&&(w(d).scrollHeight-w(d).scrollTop-w(d).clientHeight<300||p===null)&&C()}});async function v(){if(!w(d)||h||w(d).scrollTop>120||n().length===0)return;const G=n()[0];if(p!==G.id){h=!0,u=!0,f=w(d).scrollHeight,p=G.id;try{await Tg(s(),{firstMsg:G})}catch(ne){console.error("Load older failed:",ne),p=null}finally{h=!1}}}async function C(G=!1){w(d)&&(await Qr(),w(d).scrollTo({top:w(d).scrollHeight,behavior:G?"smooth":"auto"}))}Bt(()=>s(),()=>{L(a,s())}),Bt(()=>(n(),w(d)),()=>{n().length>0&&w(d)&&w(d).scrollHeight-w(d).scrollTop-w(d).clientHeight<100&&C("smooth")}),ki(),ut();var b=vQ(),y=D(b),S=D(y),R=D(S);R.__click=function(...G){var ne;(ne=c())==null||ne.apply(this,G)};var A=D(R);zA(A,{size:"22"});var F=M(R,2),T=D(F),k=M(S,2),N=D(k);_S(N,{size:"20"});var I=M(N,2);z1(I,{size:"20"});var O=M(y,2);fs(O,7,n,G=>G.id,(G,ne,te)=>{var K=mQ(),ve=j(K);{var ce=Ce=>{dF(Ce,{get time(){return w(ne),Y(()=>w(ne).created_at)},locale:"vi"})};Z(ve,Ce=>{me(w(te)),me(av),w(ne),n(),Y(()=>{var re;return w(te)===0||av(w(ne).created_at,(re=n()[w(te)-1])==null?void 0:re.created_at)})&&Ce(ce)})}var Se=M(ve,2);vT(Se,{get msg(){return w(ne)},get myId(){return i()}}),_(G,K)}),ss(O,G=>L(d,G),()=>w(d));var V=M(O,2),ee=D(V);vM(ee,{placeholder:"Nháº­p tin nháº¯n...",onSendText:G=>{m(G==null?void 0:G.text),console.log("payload:",G)},onSendImages:G=>{console.log("onSendImages:",G)},onSendFiles:G=>{console.log("onSendFiles:",G)},onSendSticker:G=>{console.log("onSendSticker:",G)}}),Ae(()=>ze(T,(me(l()),Y(()=>{var G;return(G=l())==null?void 0:G.name})))),z("scroll",O,v),_(e,b),ct(),r()}Cp(["click"]);function wQ(e,t){lt(t,!1);const s=()=>mt(r,"$chatScreen",n),i=()=>mt(a,"$activeChat",n),[n,o]=Zi(),r=lS("chatScreen","list"),a=lS("activeChat",null);function l(v){a.set(v),r.set("detail")}function c(){r.set("list")}var d={back:c};ut();var h=de(),u=j(h);{var f=v=>{pQ(v,{openChat:l})},p=v=>{var C=de(),b=j(C);{var y=S=>{CQ(S,{get activeChat(){return i()},back:c})};Z(b,S=>{s()==="detail"&&S(y)},!0)}_(v,C)};Z(u,v=>{s()==="list"?v(f):v(p,!1)})}_(e,h),ha(t,"back",c);var m=ct(d);return o(),m}function bQ(e){let t={mainKey:"chat-main",bodyKey:"chat-body",contentKey:"chat-content"};dY(e,{get option(){return t},$$slots:{mobile:(s,i)=>{wQ(s,{})},desktop:(s,i)=>{aQ(s,{})}}})}var yQ=W('<div class="p-4"> </div>'),SQ=W('<div class="h-screen flex overflow-hidden"><div><div class="menu-left h-full w-full bg-blue-100 border-r-[2px] border-r-gray-300 flex flex-col items-center justify-between py-4 overflow-hidden"><div class="flex flex-col border-b gap-y-5"><button class="p-2 rounded-full hover:bg-green-600 text-white shadow-md transition"><!></button> <button class="p-2 rounded-full hover:bg-blue-600 text-white shadow-md transition"><!></button> <button class="p-2 rounded-full hover:bg-red-600 text-white shadow-md transition"><!></button> <button class="p-2 rounded-full bg-gray-500 hover:bg-gray-600 text-white shadow-md"><!></button> <button class="p-2 rounded-full bg-gray-500 hover:bg-gray-600 text-white shadow-md"><!></button></div> <div class="flex flex-col items-center"><button class="p-2 rounded-full hover:bg-gray-100 text-white shadow-md transition"><!></button></div></div></div> <div class="flex-1 overflow-auto bg-white"><!></div></div> <!> <!> <!> <!> <!>',1);function xQ(e,t){lt(t,!1);const s=()=>mt(c,"$menuVisible",n),i=()=>mt(l,"$selectedFace",n),[n,o]=Zi();let r=J(!1),a=J({width:"80%",height:"80%",title:""});const{face:l,menuVisible:c,changeFace:d}=W0;function h(ie){let X="";ie.ctrlKey&&(X+="Ctrl+"),ie.altKey&&(X+="Alt+"),ie.shiftKey&&(X+="Shift+"),X+=ie.key,nb.subscribe(Q=>{Q[X]&&Q[X](ie)})}vs(()=>{window.addEventListener("keydown",h)}),Yo(()=>{window.removeEventListener("keydown",h)}),ut();var u=SQ(),f=j(u),p=D(f);let m;var v=D(p),C=D(v),b=D(C),y=D(b);Np(y,{name:"info-circle"});var S=M(b,2),R=D(S);Np(R,{name:"video"});var A=M(S,2),F=D(A);Np(F,{name:"list-ul"});var T=M(A,2),k=D(T);Q1(k,{size:32});var N=M(T,2),I=D(N);Y1(I,{size:32});var O=M(C,2),V=D(O),ee=D(V);Np(ee,{name:"settings"});var G=M(p,2),ne=D(G);{var te=ie=>{gI(ie,{get user(){return Xa}})},K=ie=>{var X=de(),Q=j(X);{var se=we=>{_I(we,{onClose:()=>d("info")})},De=we=>{var Me=de(),je=j(Me);{var nt=We=>{qI(We,{})},bt=We=>{var gt=de(),Fe=j(gt);{var Ze=Oe=>{lY(Oe,{})},Pe=Oe=>{var dt=de(),Ot=j(dt);{var q=B=>{bQ(B)},ye=B=>{var ae=yQ(),Ee=D(ae);Ae(()=>ze(Ee,`Coming soon... ${i()??""}`)),_(B,ae)};Z(Ot,B=>{i()==="messenger"?B(q):B(ye,!1)},!0)}_(Oe,dt)};Z(Fe,Oe=>{i()==="chat"?Oe(Ze):Oe(Pe,!1)},!0)}_(We,gt)};Z(je,We=>{i()==="list"?We(nt):We(bt,!1)},!0)}_(we,Me)};Z(Q,we=>{i()==="cam"?we(se):we(De,!1)},!0)}_(ie,X)};Z(ne,ie=>{i()==="info"?ie(te):ie(K,!1)})}var ve=M(f,2);II(ve,st(()=>w(a),{closeOnOutsideClick:!1,get open(){return w(r)},set open(ie){L(r,ie)},children:(ie,X)=>{VI(ie)},$$slots:{default:!0},$$legacy:!0}));var ce=M(ve,2);jC(ce,{combo:"Escape",$$events:{pressed:()=>fa(l,"info")}});var Se=M(ce,2);jC(Se,{combo:"Ctrl+q",$$events:{pressed:()=>fa(l,"info")}});var Ce=M(Se,2);jC(Ce,{combo:"Ctrl+s",$$events:{pressed:ie=>{ie.preventDefault(),console.log("Save!")}}});var re=M(Ce,2);ZL(re,{}),Ae(()=>m=Ht(p,1,"bg-gray-200 transition-all duration-300",null,m,{"w-[50px]":s(),"w-0":!s()})),z("click",b,()=>d("info")),z("click",S,()=>d("cam")),z("click",A,()=>d("list")),z("click",T,()=>d("chat")),z("click",N,()=>d("messenger")),z("click",V,()=>{L(r,!0),L(a,{width:"80%",height:"80%",title:"Thiáº¿t láº­p tÃ i khoáº£n"})}),_(e,u),ct(),o()}var RQ=W('<div class="bg-red-100 text-red-700 px-3 py-2 rounded mb-4 text-sm"> </div>'),EQ=EA('<svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4l3-3-3-3v4a12 12 0 00-12 12h4z"></path></svg>'),AQ=W('<div class="min-h-screen bg-gray-100 flex items-center justify-center px-4"><div class="bg-white shadow-xl rounded-xl p-8 w-full max-w-md"><h2 class="text-2xl font-bold text-gray-800 text-center mb-6">ÄÄNG NHáº¬P</h2> <!> <form class="space-y-5"><div><label class="block text-sm font-medium text-gray-700">Email</label> <input type="email" class="mt-1 w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-300 outline-none" required/></div> <div><label class="block text-sm font-medium text-gray-700">Máº­t kháº©u</label> <input type="password" class="mt-1 w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-300 outline-none" required/></div> <button type="submit" class="w-full py-2 rounded-lg bg-blue-600 text-white font-semibold hover:bg-blue-700 transition flex justify-center"><!></button></form> <div class="flex items-center my-6"><div class="flex-1 h-px bg-gray-300"></div> <span class="px-3 text-gray-500 text-sm">hoáº·c</span> <div class="flex-1 h-px bg-gray-300"></div></div> <button class="w-full py-2 border border-gray-300 rounded-lg flex items-center justify-center gap-2 hover:bg-gray-100 transition"><img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="h-5 w-5"/> <span>ÄÄng nháº­p vá»i Google</span></button></div></div>');function FQ(e,t){lt(t,!1);const s=new gC;let i=J(""),n=J(""),o=J(""),r=J(!1);async function a(){L(o,""),L(r,!0);try{const F=await s.post("/auth/login",{email:w(i),password:w(n)},{withCredentials:!0});if(!F.user||!F.accessToken)throw new Error("Response missing user or accessToken");Xa.set(F.user),Yn.set(F.accessToken),console.log("setdata login:",F),F.refreshToken&&await PS(F.refreshToken)}catch(F){console.error("ð¨ LOGIN ERROR:",F),L(o,"Email hoáº·c máº­t kháº©u khÃ´ng ÄÃºng hoáº·c server khÃ´ng pháº£n há»i.")}finally{L(r,!1)}}function l(){window.location.href="http://localhost:3000/auth/google"}ut();var c=AQ(),d=D(c),h=M(D(d),2);{var u=F=>{var T=RQ(),k=D(T);Ae(()=>ze(k,w(o))),_(F,T)};Z(h,F=>{w(o)&&F(u)})}var f=M(h,2),p=D(f),m=M(D(p),2),v=M(p,2),C=M(D(v),2),b=M(v,2),y=D(b);{var S=F=>{var T=EQ();_(F,T)},R=F=>{var T=AA("ÄÄng nháº­p");_(F,T)};Z(y,F=>{w(r)?F(S):F(R,!1)})}var A=M(f,4);Ae(()=>b.disabled=w(r)),cu(m,()=>w(i),F=>L(i,F)),cu(C,()=>w(n),F=>L(n,F)),z("submit",f,F1(a)),z("click",A,l),_(e,c),ct()}const PQ=cs("light");function TQ(){const e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,s=e||(t?"dark":"light");DQ(s),PQ.set(s)}function DQ(e){const t=document.documentElement;e==="dark"?t.classList.add("dark"):t.classList.remove("dark"),localStorage.setItem("theme",e)}function _Q(e,t){lt(t,!1);const s=()=>mt(Yn,"$accessToken",o),i=()=>mt(Xa,"$user",o),n=()=>mt(WC,"$loading",o),[o,r]=Zi(),a=new gC;let l=!1,c;const d=async()=>{try{let C=s();if(!C){const b=await VA();if(b){const y=await a.post("/auth/refresh",{refreshToken:b},{withCredentials:!0});C=y.accessToken,await Yn.set(C),y.refreshToken&&await PS(y.refreshToken)}}if(C){const b=await a.get("/auth/me",{headers:{Authorization:`Bearer ${C}`},withCredentials:!0});Xa.set(b.user)}else Xa.set(null)}catch(C){console.warn("Auto refresh failed:",C),Yn.set(""),Xa.set(null),await TS()}};vs(async()=>{WC.set(!0),await d(),TQ(),window.addEventListener("beforeunload",h),window.addEventListener("popstate",u),c=Yn.subscribe(C=>{C?(console.log("ð accessToken ready â connect WS"),ZA()):(console.log("ðª accessToken cleared â close WS"),ib())}),WC.set(!1)}),Yo(()=>{c==null||c(),ib(),window.removeEventListener("beforeunload",h),window.removeEventListener("popstate",u)});function h(C){i()&&(C.preventDefault(),C.returnValue="")}function u(){i()&&!l&&(confirm("Báº¡n cÃ³ cháº¯c muá»n rá»i khá»i á»©ng dá»¥ng khÃ´ng?")?(l=!0,history.back()):history.pushState(null,"",location.href))}ut();var f=de(),p=j(f);{var m=C=>{QA(C,{})},v=C=>{var b=de(),y=j(b);{var S=A=>{xQ(A,{})},R=A=>{FQ(A,{})};Z(y,A=>{i()?A(S):A(R,!1)},!0)}_(C,b)};Z(p,C=>{n()?C(m):C(v,!1)})}_(e,f),ct(),r()}r1(_Q,{target:document.getElementById("app")});export{LQ as $,he as A,NC as B,Zo as C,Hr as D,HA as E,xs as F,ze as G,gC as H,wt as I,fs as J,qC as K,gi as L,uC as M,vs as N,Ht as O,Bt as P,ki as Q,qA as R,_S as S,cu as T,KA as U,AA as V,il as W,Qr as X,Yo as Y,Np as Z,Ol as _,Z as a,as as a0,II as a1,mt as a2,h1 as a3,Zi as a4,Xa as a5,Yn as a6,ib as a7,TS as a8,ZL as a9,qk as aa,V1 as ab,C1 as ac,XA as ad,IQ as ae,U1 as af,ha as ag,ss as b,D as c,wn as d,z as e,W as f,w as g,_ as h,ut as i,ct as j,F1 as k,L as l,J as m,vp as n,me as o,lt as p,zE as q,Su as r,M as s,Ae as t,Y as u,Ye as v,st as w,de as x,j as y,He as z};
//# sourceMappingURL=index-ChvxLbCO.js.map
